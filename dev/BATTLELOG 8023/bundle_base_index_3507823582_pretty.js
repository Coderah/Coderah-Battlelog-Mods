 /*

  Generated by ESN Planet
  www.esn.me

*/

var SonarVoice;
function SonarError(message) {
    this.name = "SonarError";
    this.message = (message || "");
}
SonarError.prototype = new Error();
SonarError.prototype.name = "SonarError";
function SonarOutdatedVersion(message) {
    this.name = "SonarOutdatedVersion";
    this.message = (message || "");
}
SonarOutdatedVersion.prototype = new Error();
SonarOutdatedVersion.prototype.name = "SonarOutdatedVersion";
function SonarPluginError(message) {
    this.name = "SonarPluginError";
    this.message = (message || "");
}
SonarPluginError.prototype = new Error();
SonarPluginError.prototype.name = "SonarPluginError";
function SonarInvalidArgument(message) {
    this.name = "SonarInvalidArgument";
    this.message = (message || "");
}
SonarInvalidArgument.prototype = new Error();
SonarInvalidArgument.prototype.name = "SonarInvalidArgument";
(function() {
    var EXPECTED_VERSION = "0.62.0";
    var CAPTURE_MODE_CONTINUOUS = 0;
    var CAPTURE_MODE_PUSH_TO_TALK = 1;
    var CAPTURE_MODE_VOICE_ACTIVATION = 2;
    var JOIN_CHANNEL_TIMEOUT = 5000;
    var VOICE_SERVER_REASONS = ["DISCONNECT_REQUESTED", "WRONG_VERSION", "WRONG_SUBPROTOCOL_VERSION", "AUTHENTICATION_ERROR", "USERID_IN_USE", "INVALID_TICKET", "CONNECTION_LOST", "REGISTER_TIMEDOUT", "LOGGEDIN_ELSEWHERE", "ADMIN_KICK", "ADMIN_BAN", "ACCESS_DENIED", "CHANNEL_DESTROYED", "CHANNEL_EXPIRED", "ROAMING", "LEAVING", "DESTROYED_BY_OWNER", "TOKEN_MISSING_ARGUMENTS", "TOKEN_EMPTY_ARGUMENTS", "TOKEN_INVALID_TIMESTAMP", "TOKEN_EXPIRED", "TOKEN_UNKNOWN_OPERATOR", "TOKEN_INVALID_DIGEST", "TOKEN_ACCESS_DENIED"];
    var ERRORS = ["SUCCESS", "PROTOCOL_ERROR", "NETWORK_ERROR", "ACCESS_ERROR", "PARAMETER_ERROR", "CAPTURE_DEVICE_ERROR", "PLAYBACK_DEVICE_ERROR", "TOKEN_MISSING_ARGUMENTS", "TOKEN_EMPTY_ARGUMENTS", "TOKEN_INVALID_TIMESTAMP", "TOKEN_EXPIRED", "TOKEN_UNKNOWN_OPERATOR", "TOKEN_INVALID_DIGEST", "TOKEN_ACCESS_DENIED"];
    var TOKEN_PREFIX = "SONAR2|";
    SonarVoice = function(token, options) {
        var parseOptions = function(options) {
            if (options === null || options === undefined) {
                options = {};
            }
            self.instanceName = options.instanceName !== null && options.instanceName !== undefined ? options.instanceName : defaultInstanceName();
            self.themeXmlUrl = options.themeXmlUrl !== null && options.themeXmlUrl !== undefined ? options.themeXmlUrl : "";
            self.pluginObjectId = options.pluginObjectId !== null && options.pluginObjectId !== undefined ? options.pluginObjectId : "sonarClient";
            self.pluginContainer = options.pluginContainer !== null && options.pluginContainer !== undefined ? options.pluginContainer : null;
            self.expectedVersion = options.expectedVersion !== null && options.expectedVersion !== undefined ? options.expectedVersion : EXPECTED_VERSION;
            self.joinChannelTimeout = options.joinChannelTimeout !== null && options.joinChannelTimeout !== undefined ? options.joinChannelTimeout : JOIN_CHANNEL_TIMEOUT;
            return options;
        };
        var isPluginInstalled = function() {
            if (navigator.appName === "Microsoft Internet Explorer") {
                try {
                    var control = new ActiveXObject("WHISPERAX.WhisperAxCtrl." + self.expectedVersion);
                    return true;
                } catch (e) {
                    return false;
                }
            }
            navigator.plugins.refresh();
            for (var i in navigator.plugins) {
                var plugin = navigator.plugins[i];
                if (!plugin) {
                    continue;
                }
                if (plugin.filename && (plugin.filename.indexOf("npesnsonar") != -1 && plugin.description == self.expectedVersion)) {
                    return true;
                }
            }
            return false;
        };
        var hasExpectedVersion = function() {
            S.debug("You got Sonar version: " + self.client.getVersion() + ", have a nice talk!");
            return self.client.getVersion() == self.expectedVersion;
        };
        var validateToken = function(token) {
            return token.substr(0, 7) === TOKEN_PREFIX;
        };
        var versionToHex = function(version) {
            var values = version.split(".");
            var ret = "";
            for (var i = 0; i < values.length; i++) {
                var n = parseInt(values[i], 10);
                n &= 255;
                h = n.toString(16);
                if (h.length == 1) {
                    h = "0" + h;
                }
                ret += h;
            }
            return ret;
        };
        var embedClient = function() {
            var versionHex = versionToHex(self.expectedVersion);
            var pluginHtml = '<embed width="0" height="0" type="application/mozilla-plugin-esn-sonar-' + self.expectedVersion + '" id="' + self.pluginObjectId + '"></embed>';
            if (navigator.appName === "Microsoft Internet Explorer") {
                pluginHtml = '<object width="0" height="0" id="' + self.pluginObjectId + '" classid="CLSID:eba7a1e6-e69d-4ba5-b291-95782a' + versionHex + '" type="application/x-oleobject"></object>';
            }
            var containerExists = document.getElementById(self.pluginObjectId + "_container");
            if (!containerExists) {
                var e = document.createElement("div");
                e.id = self.pluginObjectId + "_container";
                e.innerHTML = pluginHtml;
                var container = document.body;
                if (self.pluginContainer) {
                    container = document.getElementById(self.pluginContainer);
                    if (!container) {
                        throw new SonarPluginError("Couldn't find container");
                    }
                }
                container.appendChild(e);
            }
            var pe = document.getElementById(self.pluginObjectId);
            if (pe == null) {
                throw new SonarPluginError("Couldn't find plugin element '" + self.pluginObjectId + "'");
            }
            self.client = pe;
            return self.client;
        };
        var defaultInstanceName = function() {
            var hostname = window.location.hostname;
            var validIp = /^(([1-9][0-9]{0,2})|0)\.(([1-9][0-9]{0,2})|0)\.(([1-9][0-9]{0,2})|0)\.(([1-9][0-9]{0,2})|0)$/;
            if (validIp.test(hostname)) {
                return hostname;
            }
            var s = hostname.split(".");
            hostname = s[s.length - 2] + "." + s[s.length - 1];
            return hostname;
        };
        var command = function() {
            var result = client.syncExecCommand(arguments[0], Array.prototype.slice.call(arguments, 1));
            return eval("(" + result + ")");
        };
        var asyncCommand = function() {
            var result = client.asyncExecCommand(arguments[0], Array.prototype.slice.call(arguments, 1));
            return eval("(" + result + ")");
        };
        var onError = function(event, data) {
            self.trigger("error", {code: data.errorCode,description: formatError(data.errorCode, ERRORS)});
        };
        var onDisconnect = function(event, args) {
            args.reasonType = formatError(args.reasonType, VOICE_SERVER_REASONS);
            self.trigger("disconnect", args);
        };
        var onChannelJoin = function(event, args) {
            if (self.joinChannelCallback != null) {
                clearTimeout(self.joinChannelTimeout);
                self.joinChannelCallback(true, "Channel joined");
                self.joinChannelTimeout = null;
                self.joinChannelCallback = null;
            }
            self.trigger("channeljoin", args);
        };
        var parseEvent = function(callback) {
            return function(event, args) {
                callback(event, eval(args));
            };
        };
        var parseNamedEvent = function(names, callback) {
            return function(event, args) {
                var arguments = eval(args), namedArgs = {};
                for (var i in names) {
                    if (names[i] === null) {
                        continue;
                    }
                    namedArgs[names[i]] = arguments[i];
                }
                callback(event, namedArgs);
            };
        };
        var triggerNamedEvent = function(name, argNames) {
            return parseNamedEvent(argNames, function(internalName, event) {
                self.trigger(name, event);
            });
        };
        var registerEventHandlers = function() {
            client.registerEventHandler("whisper.onconnected", triggerNamedEvent("connect", [null, "channelId", "channelDescription"]));
            client.registerEventHandler("whisper.ondisconnected", parseNamedEvent(["reasonType", "reasonDescription"], onDisconnect));
            client.registerEventHandler("whisper.channel.onclientjoined", triggerNamedEvent("channeluserjoin", [null, "userId", "userDescription"]));
            client.registerEventHandler("whisper.channel.onclientparted", triggerNamedEvent("channeluserpart", [null, "userId", "userDescription", "reason"]));
            client.registerEventHandler("whisper.channel.onclientmuted", triggerNamedEvent("channelusermute", [null, "userId", "userDescription", "talking", "muted"]));
            client.registerEventHandler("whisper.channel.onclienttalking", triggerNamedEvent("channelusertalk", [null, "userId", "userDescription", "talking", "muted"]));
            client.registerEventHandler("whisper.onerror", parseNamedEvent(["errorCode"], onError));
            client.registerEventHandler("whisper.menu.exit", triggerNamedEvent("exit", []));
            client.registerEventHandler("whisper.playback.mute", triggerNamedEvent("playbackmute", ["muted"]));
            client.registerEventHandler("whisper.capture.mute", triggerNamedEvent("capturemute", ["muted"]));
            client.registerEventHandler("whisper.bind.pttkey.block", triggerNamedEvent("blockingkey", ["blocked"]));
            client.registerEventHandler("whisper.bind.pttkey.stroke", parseEvent(function(event, args) {
                var key = args[0];
                if (key == "") {
                    key = null;
                }
                self.trigger("hotkey", {type: "ptt",key: key});
            }));
        };
        var getUsersInCurrentChannel = function() {
            if (!self.channel()) {
                return [];
            }
            var rawUsers = command("whisper.channel.listclients");
            if (!rawUsers) {
                return [];
            }
            var result = {userIds: [],channelUsers: {},channelUserIds: {},users: []};
            for (var i = 0; i < rawUsers.length; i += 5) {
                var channelUserId = rawUsers[i], userId = rawUsers[i + 1], userDescription = rawUsers[i + 2], talking = rawUsers[i + 3], muted = rawUsers[i + 4];
                result.userIds.push(userId);
                result.channelUsers[channelUserId] = {userId: userId,userDescription: userDescription};
                result.channelUserIds[channelUserId] = userId;
                result.users.push({userId: userId,userDescription: userDescription,talking: talking,muted: muted});
            }
            return result;
        };
        var getUser = function(userId) {
            var users = getUsersInCurrentChannel().users;
            for (var i in users) {
                if (users[i].userId == userId) {
                    return users[i];
                }
            }
            return null;
        };
        var addAudioCallback = function() {
            if (audioCallbackEnabled) {
                return;
            }
            client.registerEventHandler("whisper.capture.onaudio", triggerNamedEvent("audio", ["clip", "avgAmp", "peakAmp", "vaState", "xmit"]));
        };
        var formatError = function(errorCode, errorList) {
            try {
                return errorList[errorCode];
            } catch (e) {
                return errorCode;
            }
        };
        var getDevices = function(type) {
            var devices = command(type);
            var returnDevices = [];
            for (var i = 0; i < devices.length; i += 2) {
                returnDevices.push({deviceId: devices[i],deviceName: devices[i + 1]});
            }
            return returnDevices;
        };
        var verifyVolume = function(volume) {
            if ((volume - 0) != volume || volume.length <= 0 || volume < 0 || volume > 1) {
                throw new SonarInvalidArgument("Invalid volume " + volume + " supplied. Must be between 0.0 and 1.0");
            }
        };
        var toWhisperVolume = function(volume) {
            return roundNumber(volume * 10, 2);
        };
        var fromWhisperVolume = function(volume) {
            return roundNumber(volume / 10, 2);
        };
        var roundNumber = function(number, digits) {
            var multiple = Math.pow(10, digits);
            return Math.round(number * multiple) / multiple;
        };
        this.bind = function(event, callback) {
            var calls = this._callbacks || (this._callbacks = {});
            var list = this._callbacks[event] || (this._callbacks[event] = []);
            list.push(callback);
            if (event == "audio") {
                addAudioCallback();
            }
            return this;
        };
        this.unbind = function(event, callback) {
            var calls;
            if (!event) {
                this._callbacks = {};
            } else {
                if (calls = this._callbacks) {
                    if (!callback) {
                        calls[event] = [];
                    } else {
                        var list = calls[event];
                        if (!list) {
                            return this;
                        }
                        for (var i = 0, l = list.length; i < l; i++) {
                            if (callback === list[i]) {
                                list.splice(i, 1);
                                break;
                            }
                        }
                    }
                }
            }
            return this;
        };
        this.trigger = function(event) {
            var list, calls, i, l;
            if (!(calls = this._callbacks)) {
                return this;
            }
            arguments[1].name = event;
            if (list = calls[event]) {
                for (i = 0, l = list.length; i < l; i++) {
                    list[i].apply(this, Array.prototype.slice.call(arguments, 1));
                }
            }
            if ((list = calls["*"]) && event !== "audio") {
                for (i = 0, l = list.length; i < l; i++) {
                    list[i].apply(this, Array.prototype.slice.call(arguments, 1));
                }
            }
            return this;
        };
        this.userId = function() {
            return client.getVariable("whisper.userId");
        };
        this.userDescription = function() {
            return client.getVariable("whisper.userDesc");
        };
        this.channel = function() {
            var channelId = client.getVariable("whisper.channelid");
            if (channelId == "") {
                return null;
            }
            return {id: channelId,description: client.getVariable("whisper.channeldesc")};
        };
        this.usersInChannel = function() {
            if (self.channel() == null) {
                return [];
            }
            return getUsersInCurrentChannel().users;
        };
        this.pushToTalkKey = function() {
            return client.getVariable("whisper.bind.pttkey.stroke");
        };
        this.recordPushToTalkKey = function() {
            asyncCommand("whisper.bindpttkey");
            return false;
        };
        this.captureDevices = function() {
            return getDevices("audio.capture.listdevices");
        };
        this.captureDevice = function(deviceId) {
            if (deviceId !== undefined) {
                client.setVariable("audio.capture.deviceid", deviceId);
                command("audio.stop");
                command("audio.start");
                return deviceId;
            }
            return client.getVariable("audio.capture.deviceid");
        };
        this.playbackDevices = function() {
            return getDevices("audio.playback.listdevices");
        };
        this.playbackDevice = function(deviceId) {
            if (deviceId !== undefined) {
                client.setVariable("audio.playback.deviceid", deviceId);
                command("audio.stop");
                command("audio.start");
            }
            return client.getVariable("audio.playback.deviceid");
        };
        this.voiceSensitivity = function(sensitivity) {
            if (sensitivity !== undefined) {
                verifyVolume(sensitivity);
                client.setVariable("audio.capture.voicesensitivity", parseInt(sensitivity * 100));
                self.trigger("voicesensitivity", {sensitivity: sensitivity});
                return sensitivity;
            }
            return roundNumber(client.getVariable("audio.capture.voicesensitivity") / 100, 2);
        };
        this.playbackVolume = function(volume) {
            if (volume !== undefined) {
                verifyVolume(volume);
                client.setVariable("audio.playback.volume", toWhisperVolume(volume));
                self.trigger("playbackvolume", {volume: volume});
                return volume;
            }
            return fromWhisperVolume(client.getVariable("audio.playback.volume"));
        };
        this.captureVolume = function(volume) {
            if (volume !== undefined) {
                verifyVolume(volume);
                client.setVariable("audio.capture.volume", toWhisperVolume(volume));
                self.trigger("capturevolume", {volume: volume});
                return volume;
            }
            return fromWhisperVolume(client.getVariable("audio.capture.volume"));
        };
        this.playbackMuted = function(muted) {
            if (muted !== undefined) {
                client.setVariable("whisper.playback.mute", muted);
                return muted;
            }
            return client.getVariable("whisper.playback.mute");
        };
        this.togglePlaybackMuted = function() {
            return this.playbackMuted(!client.getVariable("whisper.playback.mute"));
        };
        this.captureMuted = function(muted) {
            if (muted !== undefined) {
                client.setVariable("whisper.capture.mute", muted);
                return muted;
            }
            return client.getVariable("whisper.capture.mute");
        };
        this.toggleCaptureMuted = function() {
            return this.captureMuted(!client.getVariable("whisper.capture.mute"));
        };
        this.audioLoopback = function(enabled) {
            if (enabled !== undefined) {
                command("audio.setloopback", enabled);
                self.trigger("audioloopback", {enabled: enabled});
                return enabled;
            }
            return client.getVariable("audio.loopbackenabled");
        };
        this.toggleAudioLoopback = function() {
            return self.audioLoopback(!self.audioLoopback());
        };
        this.voiceActivation = function() {
            return self.captureMode() == "voiceactivation";
        };
        this.captureMode = function(mode) {
            if (mode !== undefined) {
                if (mode !== "pushtotalk" && mode !== "voiceactivation" && mode !== "continuous") {
                    throw new SonarInvalidArgument("Trying to set invalid capture mode: " + mode);
                }
                var newMode = null;
                if (mode === "pushtotalk") {
                    newMode = CAPTURE_MODE_PUSH_TO_TALK;
                }
                if (mode === "voiceactivation") {
                    newMode = CAPTURE_MODE_VOICE_ACTIVATION;
                }
                if (mode === "continuous") {
                    newMode = CAPTURE_MODE_CONTINUOUS;
                }
                command("whisper.capture.setmode", newMode);
                self.trigger("capturemode", {mode: mode});
                return mode;
            }
            var m = client.getVariable("whisper.capture.mode");
            if (m == CAPTURE_MODE_PUSH_TO_TALK) {
                return "pushtotalk";
            }
            if (m == CAPTURE_MODE_VOICE_ACTIVATION) {
                return "voiceactivation";
            }
            return "continuous";
        };
        this.partChannel = function(reasonType, reasonDescription) {
            if (reasonDescription === undefined) {
                reasonDescription = "JavaScript client parted from channel";
            }
            if (reasonType === undefined) {
                reasonType = "JS_CLIENT_PARTED";
            }
            if (!command("whisper.partchannel", reasonType, reasonDescription)) {
                throw new SonarError("Error trying to leave channel");
            }
        };
        this.userMuted = function(userId, mute) {
            if (mute !== undefined) {
                command("whisper.channel.muteclient", userId, mute);
                return mute;
            }
            var user = getUser(userId);
            if (user == null) {
                throw new SonarInvalidArgument("User with user ID " + userId + " not in channel.");
            }
            return user.muted;
        };
        this.toggleUserMuted = function(userId) {
            return self.userMuted(userId, !self.userMuted(userId));
        };
        this.echoCancellation = function(enable) {
            if (enable !== undefined) {
                client.setVariable("audio.capture.echo", enable);
                command("audio.stop");
                command("audio.start");
                return enable;
            }
            return client.getVariable("audio.capture.echo");
        };
        this.toggleEchoCancellation = function() {
            return self.echoCancellation(!self.echoCancellation());
        };
        this.blockPushToTalkKey = function(enable) {
            if (enable !== undefined) {
                command("whisper.bindpttkey.setblock", enable);
                return enable;
            }
            return client.getVariable("whisper.bind.pttkey.block");
        };
        this.toggleBlockingPushToTalkKey = function() {
            return self.blockPushToTalkKey(!self.blockPushToTalkKey());
        };
        var self = this;
        var audioCallbackEnabled = false;
        this.options = parseOptions(options);
        this.token = token;
        self.joinChannelCallback = null;
        self._command = command;
        if (token === null || token === undefined) {
            throw new SonarInvalidArgument("No token supplied");
        }
        if (!validateToken(token)) {
            throw new SonarInvalidArgument("Invalid token supplied. Must start with " + TOKEN_PREFIX);
        }
        if (!isPluginInstalled()) {
            throw new SonarPluginError("Plugin not installed");
        }
        var client = embedClient();
        if (!hasExpectedVersion()) {
            throw new SonarOutdatedVersion("Plugin version is too old");
        }
        if (!client.setupInstance(this.instanceName, token, this.themeXmlUrl)) {
            throw new SonarError("Couldn't initialize the Sonar host instance");
        }
        client.setVariable("whisper.capture.onaudio.skiprate", 0.3);
        var capMode = client.getVariable("whisper.capture.mode");
        if (capMode !== CAPTURE_MODE_PUSH_TO_TALK && capMode !== CAPTURE_MODE_VOICE_ACTIVATION && capMode !== CAPTURE_MODE_CONTINUOUS) {
            this.captureMode("pushtotalk");
        }
        registerEventHandlers();
        return this;
    };
})();
(function(b, f) {
    b.fn.jPlayer = function(a) {
        var c = typeof a === "string", d = Array.prototype.slice.call(arguments, 1), e = this, a = !c && d.length ? b.extend.apply(null, [!0, a].concat(d)) : a;
        if (c && a.charAt(0) === "_") {
            return e;
        }
        c ? this.each(function() {
            var c = b.data(this, "jPlayer"), h = c && b.isFunction(c[a]) ? c[a].apply(c, d) : c;
            if (h !== c && h !== f) {
                return e = h, !1;
            }
        }) : this.each(function() {
            var c = b.data(this, "jPlayer");
            c ? c.option(a || {}) : b.data(this, "jPlayer", new b.jPlayer(a, this));
        });
        return e;
    };
    b.jPlayer = function(a, c) {
        if (arguments.length) {
            this.element = b(c);
            this.options = b.extend(!0, {}, this.options, a);
            var d = this;
            this.element.bind("remove.jPlayer", function() {
                d.destroy();
            });
            this._init();
        }
    };
    b.jPlayer.emulateMethods = "load play pause";
    b.jPlayer.emulateStatus = "src readyState networkState currentTime duration paused ended playbackRate";
    b.jPlayer.emulateOptions = "muted volume";
    b.jPlayer.reservedEvent = "ready flashreset resize repeat error warning";
    b.jPlayer.event = {ready: "jPlayer_ready",flashreset: "jPlayer_flashreset",resize: "jPlayer_resize",repeat: "jPlayer_repeat",click: "jPlayer_click",error: "jPlayer_error",warning: "jPlayer_warning",loadstart: "jPlayer_loadstart",progress: "jPlayer_progress",suspend: "jPlayer_suspend",abort: "jPlayer_abort",emptied: "jPlayer_emptied",stalled: "jPlayer_stalled",play: "jPlayer_play",pause: "jPlayer_pause",loadedmetadata: "jPlayer_loadedmetadata",loadeddata: "jPlayer_loadeddata",waiting: "jPlayer_waiting",playing: "jPlayer_playing",canplay: "jPlayer_canplay",canplaythrough: "jPlayer_canplaythrough",seeking: "jPlayer_seeking",seeked: "jPlayer_seeked",timeupdate: "jPlayer_timeupdate",ended: "jPlayer_ended",ratechange: "jPlayer_ratechange",durationchange: "jPlayer_durationchange",volumechange: "jPlayer_volumechange"};
    b.jPlayer.htmlEvent = "loadstart,abort,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,ratechange".split(",");
    b.jPlayer.pause = function() {
        b.each(b.jPlayer.prototype.instances, function(a, b) {
            b.data("jPlayer").status.srcSet && b.jPlayer("pause");
        });
    };
    b.jPlayer.timeFormat = {showHour: !1,showMin: !0,showSec: !0,padHour: !1,padMin: !0,padSec: !0,sepHour: ":",sepMin: ":",sepSec: ""};
    b.jPlayer.convertTime = function(a) {
        var c = new Date(a * 1000), d = c.getUTCHours(), a = c.getUTCMinutes(), c = c.getUTCSeconds(), d = b.jPlayer.timeFormat.padHour && d < 10 ? "0" + d : d, a = b.jPlayer.timeFormat.padMin && a < 10 ? "0" + a : a, c = b.jPlayer.timeFormat.padSec && c < 10 ? "0" + c : c;
        return (b.jPlayer.timeFormat.showHour ? d + b.jPlayer.timeFormat.sepHour : "") + (b.jPlayer.timeFormat.showMin ? a + b.jPlayer.timeFormat.sepMin : "") + (b.jPlayer.timeFormat.showSec ? c + b.jPlayer.timeFormat.sepSec : "");
    };
    b.jPlayer.uaBrowser = function(a) {
        var a = a.toLowerCase(), b = /(opera)(?:.*version)?[ \/]([\w.]+)/, d = /(msie) ([\w.]+)/, e = /(mozilla)(?:.*? rv:([\w.]+))?/, a = /(webkit)[ \/]([\w.]+)/.exec(a) || b.exec(a) || d.exec(a) || a.indexOf("compatible") < 0 && e.exec(a) || [];
        return {browser: a[1] || "",version: a[2] || "0"};
    };
    b.jPlayer.uaPlatform = function(a) {
        var b = a.toLowerCase(), d = /(android)/, e = /(mobile)/, a = /(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(b) || [], b = /(ipad|playbook)/.exec(b) || !e.exec(b) && d.exec(b) || [];
        a[1] && (a[1] = a[1].replace(/\s/g, "_"));
        return {platform: a[1] || "",tablet: b[1] || ""};
    };
    b.jPlayer.browser = {};
    b.jPlayer.platform = {};
    var i = b.jPlayer.uaBrowser(navigator.userAgent);
    if (i.browser) {
        b.jPlayer.browser[i.browser] = !0, b.jPlayer.browser.version = i.version;
    }
    i = b.jPlayer.uaPlatform(navigator.userAgent);
    if (i.platform) {
        b.jPlayer.platform[i.platform] = !0, b.jPlayer.platform.mobile = !i.tablet, b.jPlayer.platform.tablet = !!i.tablet;
    }
    b.jPlayer.prototype = {count: 0,version: {script: "2.1.0",needFlash: "2.1.0",flash: "unknown"},options: {swfPath: "js",solution: "html, flash",supplied: "mp3",preload: "metadata",volume: 0.8,muted: !1,wmode: "opaque",backgroundColor: "#000000",cssSelectorAncestor: "#jp_container_1",cssSelector: {videoPlay: ".jp-video-play",play: ".jp-play",pause: ".jp-pause",stop: ".jp-stop",seekBar: ".jp-seek-bar",playBar: ".jp-play-bar",mute: ".jp-mute",unmute: ".jp-unmute",volumeBar: ".jp-volume-bar",volumeBarValue: ".jp-volume-bar-value",volumeMax: ".jp-volume-max",currentTime: ".jp-current-time",duration: ".jp-duration",fullScreen: ".jp-full-screen",restoreScreen: ".jp-restore-screen",repeat: ".jp-repeat",repeatOff: ".jp-repeat-off",gui: ".jp-gui",noSolution: ".jp-no-solution"},fullScreen: !1,autohide: {restored: !1,full: !0,fadeIn: 200,fadeOut: 600,hold: 1000},loop: !1,repeat: function(a) {
                a.jPlayer.options.loop ? b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended + ".jPlayer.jPlayerRepeat", function() {
                    b(this).jPlayer("play");
                }) : b(this).unbind(".jPlayerRepeat");
            },nativeVideoControls: {},noFullScreen: {msie: /msie [0-6]/,ipad: /ipad.*?os [0-4]/,iphone: /iphone/,ipod: /ipod/,android_pad: /android [0-3](?!.*?mobile)/,android_phone: /android.*?mobile/,blackberry: /blackberry/,windows_ce: /windows ce/,webos: /webos/},noVolume: {ipad: /ipad/,iphone: /iphone/,ipod: /ipod/,android_pad: /android(?!.*?mobile)/,android_phone: /android.*?mobile/,blackberry: /blackberry/,windows_ce: /windows ce/,webos: /webos/,playbook: /playbook/},verticalVolume: !1,idPrefix: "jp",noConflict: "jQuery",emulateHtml: !1,errorAlerts: !1,warningAlerts: !1},optionsAudio: {size: {width: "0px",height: "0px",cssClass: ""},sizeFull: {width: "0px",height: "0px",cssClass: ""}},optionsVideo: {size: {width: "480px",height: "270px",cssClass: "jp-video-270p"},sizeFull: {width: "100%",height: "100%",cssClass: "jp-video-full"}},instances: {},status: {src: "",media: {},paused: !0,format: {},formatType: "",waitForPlay: !0,waitForLoad: !0,srcSet: !1,video: !1,seekPercent: 0,currentPercentRelative: 0,currentPercentAbsolute: 0,currentTime: 0,duration: 0,readyState: 0,networkState: 0,playbackRate: 1,ended: 0},internal: {ready: !1},solution: {html: !0,flash: !0},format: {mp3: {codec: 'audio/mpeg; codecs="mp3"',flashCanPlay: !0,media: "audio"},m4a: {codec: 'audio/mp4; codecs="mp4a.40.2"',flashCanPlay: !0,media: "audio"},oga: {codec: 'audio/ogg; codecs="vorbis"',flashCanPlay: !1,media: "audio"},wav: {codec: 'audio/wav; codecs="1"',flashCanPlay: !1,media: "audio"},webma: {codec: 'audio/webm; codecs="vorbis"',flashCanPlay: !1,media: "audio"},fla: {codec: "audio/x-flv",flashCanPlay: !0,media: "audio"},m4v: {codec: 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay: !0,media: "video"},ogv: {codec: 'video/ogg; codecs="theora, vorbis"',flashCanPlay: !1,media: "video"},webmv: {codec: 'video/webm; codecs="vorbis, vp8"',flashCanPlay: !1,media: "video"},flv: {codec: "video/x-flv",flashCanPlay: !0,media: "video"}},_init: function() {
            var a = this;
            this.element.empty();
            this.status = b.extend({}, this.status);
            this.internal = b.extend({}, this.internal);
            this.internal.domNode = this.element.get(0);
            this.formats = [];
            this.solutions = [];
            this.require = {};
            this.htmlElement = {};
            this.html = {};
            this.html.audio = {};
            this.html.video = {};
            this.flash = {};
            this.css = {};
            this.css.cs = {};
            this.css.jq = {};
            this.ancestorJq = [];
            this.options.volume = this._limitValue(this.options.volume, 0, 1);
            b.each(this.options.supplied.toLowerCase().split(","), function(c, d) {
                var e = d.replace(/^\s+|\s+$/g, "");
                if (a.format[e]) {
                    var f = !1;
                    b.each(a.formats, function(a, b) {
                        if (e === b) {
                            return f = !0, !1;
                        }
                    });
                    f || a.formats.push(e);
                }
            });
            b.each(this.options.solution.toLowerCase().split(","), function(c, d) {
                var e = d.replace(/^\s+|\s+$/g, "");
                if (a.solution[e]) {
                    var f = !1;
                    b.each(a.solutions, function(a, b) {
                        if (e === b) {
                            return f = !0, !1;
                        }
                    });
                    f || a.solutions.push(e);
                }
            });
            this.internal.instance = "jp_" + this.count;
            this.instances[this.internal.instance] = this.element;
            this.element.attr("id") || this.element.attr("id", this.options.idPrefix + "_jplayer_" + this.count);
            this.internal.self = b.extend({}, {id: this.element.attr("id"),jq: this.element});
            this.internal.audio = b.extend({}, {id: this.options.idPrefix + "_audio_" + this.count,jq: f});
            this.internal.video = b.extend({}, {id: this.options.idPrefix + "_video_" + this.count,jq: f});
            this.internal.flash = b.extend({}, {id: this.options.idPrefix + "_flash_" + this.count,jq: f,swf: this.options.swfPath + (this.options.swfPath.toLowerCase().slice(-4) !== ".swf" ? (this.options.swfPath && this.options.swfPath.slice(-1) !== "/" ? "/" : "") + "Jplayer.swf" : "")});
            this.internal.poster = b.extend({}, {id: this.options.idPrefix + "_poster_" + this.count,jq: f});
            b.each(b.jPlayer.event, function(b, c) {
                a.options[b] !== f && (a.element.bind(c + ".jPlayer", a.options[b]), a.options[b] = f);
            });
            this.require.audio = !1;
            this.require.video = !1;
            b.each(this.formats, function(b, c) {
                a.require[a.format[c].media] = !0;
            });
            this.options = this.require.video ? b.extend(!0, {}, this.optionsVideo, this.options) : b.extend(!0, {}, this.optionsAudio, this.options);
            this._setSize();
            this.status.nativeVideoControls = this._uaBlocklist(this.options.nativeVideoControls);
            this.status.noFullScreen = this._uaBlocklist(this.options.noFullScreen);
            this.status.noVolume = this._uaBlocklist(this.options.noVolume);
            this._restrictNativeVideoControls();
            this.htmlElement.poster = document.createElement("img");
            this.htmlElement.poster.id = this.internal.poster.id;
            this.htmlElement.poster.onload = function() {
                (!a.status.video || a.status.waitForPlay) && a.internal.poster.jq.show();
            };
            this.element.append(this.htmlElement.poster);
            this.internal.poster.jq = b("#" + this.internal.poster.id);
            this.internal.poster.jq.css({width: this.status.width,height: this.status.height});
            this.internal.poster.jq.hide();
            this.internal.poster.jq.bind("click.jPlayer", function() {
                a._trigger(b.jPlayer.event.click);
            });
            this.html.audio.available = !1;
            if (this.require.audio) {
                this.htmlElement.audio = document.createElement("audio"), this.htmlElement.audio.id = this.internal.audio.id, this.html.audio.available = !!this.htmlElement.audio.canPlayType && this._testCanPlayType(this.htmlElement.audio);
            }
            this.html.video.available = !1;
            if (this.require.video) {
                this.htmlElement.video = document.createElement("video"), this.htmlElement.video.id = this.internal.video.id, this.html.video.available = !!this.htmlElement.video.canPlayType && this._testCanPlayType(this.htmlElement.video);
            }
            this.flash.available = this._checkForFlash(10);
            this.html.canPlay = {};
            this.flash.canPlay = {};
            b.each(this.formats, function(b, c) {
                a.html.canPlay[c] = a.html[a.format[c].media].available && "" !== a.htmlElement[a.format[c].media].canPlayType(a.format[c].codec);
                a.flash.canPlay[c] = a.format[c].flashCanPlay && a.flash.available;
            });
            this.html.desired = !1;
            this.flash.desired = !1;
            b.each(this.solutions, function(c, d) {
                if (c === 0) {
                    a[d].desired = !0;
                } else {
                    var e = !1, f = !1;
                    b.each(a.formats, function(b, c) {
                        a[a.solutions[0]].canPlay[c] && (a.format[c].media === "video" ? f = !0 : e = !0);
                    });
                    a[d].desired = a.require.audio && !e || a.require.video && !f;
                }
            });
            this.html.support = {};
            this.flash.support = {};
            b.each(this.formats, function(b, c) {
                a.html.support[c] = a.html.canPlay[c] && a.html.desired;
                a.flash.support[c] = a.flash.canPlay[c] && a.flash.desired;
            });
            this.html.used = !1;
            this.flash.used = !1;
            b.each(this.solutions, function(c, d) {
                b.each(a.formats, function(b, c) {
                    if (a[d].support[c]) {
                        return a[d].used = !0, !1;
                    }
                });
            });
            this._resetActive();
            this._resetGate();
            this._cssSelectorAncestor(this.options.cssSelectorAncestor);
            !this.html.used && !this.flash.used ? (this._error({type: b.jPlayer.error.NO_SOLUTION,context: "{solution:'" + this.options.solution + "', supplied:'" + this.options.supplied + "'}",message: b.jPlayer.errorMsg.NO_SOLUTION,hint: b.jPlayer.errorHint.NO_SOLUTION}), this.css.jq.noSolution.length && this.css.jq.noSolution.show()) : this.css.jq.noSolution.length && this.css.jq.noSolution.hide();
            if (this.flash.used) {
                var c, d = "jQuery=" + encodeURI(this.options.noConflict) + "&id=" + encodeURI(this.internal.self.id) + "&vol=" + this.options.volume + "&muted=" + this.options.muted;
                if (b.browser.msie && Number(b.browser.version) <= 8) {
                    d = ['<param name="movie" value="' + this.internal.flash.swf + '" />', '<param name="FlashVars" value="' + d + '" />', '<param name="allowScriptAccess" value="always" />', '<param name="bgcolor" value="' + this.options.backgroundColor + '" />', '<param name="wmode" value="' + this.options.wmode + '" />'];
                    c = document.createElement('<object id="' + this.internal.flash.id + '" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0"></object>');
                    for (var e = 0; e < d.length; e++) {
                        c.appendChild(document.createElement(d[e]));
                    }
                } else {
                    e = function(a, b, c) {
                        var d = document.createElement("param");
                        d.setAttribute("name", b);
                        d.setAttribute("value", c);
                        a.appendChild(d);
                    }, c = document.createElement("object"), c.setAttribute("id", this.internal.flash.id), c.setAttribute("data", this.internal.flash.swf), c.setAttribute("type", "application/x-shockwave-flash"), c.setAttribute("width", "1"), c.setAttribute("height", "1"), e(c, "flashvars", d), e(c, "allowscriptaccess", "always"), e(c, "bgcolor", this.options.backgroundColor), e(c, "wmode", this.options.wmode);
                }
                this.element.append(c);
                this.internal.flash.jq = b(c);
            }
            if (this.html.used) {
                if (this.html.audio.available) {
                    this._addHtmlEventListeners(this.htmlElement.audio, this.html.audio), this.element.append(this.htmlElement.audio), this.internal.audio.jq = b("#" + this.internal.audio.id);
                }
                if (this.html.video.available) {
                    this._addHtmlEventListeners(this.htmlElement.video, this.html.video), this.element.append(this.htmlElement.video), this.internal.video.jq = b("#" + this.internal.video.id), this.status.nativeVideoControls ? this.internal.video.jq.css({width: this.status.width,height: this.status.height}) : this.internal.video.jq.css({width: "0px",height: "0px"}), this.internal.video.jq.bind("click.jPlayer", function() {
                        a._trigger(b.jPlayer.event.click);
                    });
                }
            }
            this.options.emulateHtml && this._emulateHtmlBridge();
            this.html.used && !this.flash.used && setTimeout(function() {
                a.internal.ready = !0;
                a.version.flash = "n/a";
                a._trigger(b.jPlayer.event.repeat);
                a._trigger(b.jPlayer.event.ready);
            }, 100);
            this._updateNativeVideoControls();
            this._updateInterface();
            this._updateButtons(!1);
            this._updateAutohide();
            this._updateVolume(this.options.volume);
            this._updateMute(this.options.muted);
            this.css.jq.videoPlay.length && this.css.jq.videoPlay.hide();
            b.jPlayer.prototype.count++;
        },destroy: function() {
            this.clearMedia();
            this._removeUiClass();
            this.css.jq.currentTime.length && this.css.jq.currentTime.text("");
            this.css.jq.duration.length && this.css.jq.duration.text("");
            b.each(this.css.jq, function(a, b) {
                b.length && b.unbind(".jPlayer");
            });
            this.internal.poster.jq.unbind(".jPlayer");
            this.internal.video.jq && this.internal.video.jq.unbind(".jPlayer");
            this.options.emulateHtml && this._destroyHtmlBridge();
            this.element.removeData("jPlayer");
            this.element.unbind(".jPlayer");
            this.element.empty();
            delete this.instances[this.internal.instance];
        },enable: function() {
        },disable: function() {
        },_testCanPlayType: function(a) {
            try {
                return a.canPlayType(this.format.mp3.codec), !0;
            } catch (b) {
                return !1;
            }
        },_uaBlocklist: function(a) {
            var c = navigator.userAgent.toLowerCase(), d = !1;
            b.each(a, function(a, b) {
                if (b && b.test(c)) {
                    return d = !0, !1;
                }
            });
            return d;
        },_restrictNativeVideoControls: function() {
            if (this.require.audio && this.status.nativeVideoControls) {
                this.status.nativeVideoControls = !1, this.status.noFullScreen = !0;
            }
        },_updateNativeVideoControls: function() {
            if (this.html.video.available && this.html.used) {
                this.htmlElement.video.controls = this.status.nativeVideoControls, this._updateAutohide(), this.status.nativeVideoControls && this.require.video ? (this.internal.poster.jq.hide(), this.internal.video.jq.css({width: this.status.width,height: this.status.height})) : this.status.waitForPlay && this.status.video && (this.internal.poster.jq.show(), this.internal.video.jq.css({width: "0px",height: "0px"}));
            }
        },_addHtmlEventListeners: function(a, c) {
            var d = this;
            a.preload = this.options.preload;
            a.muted = this.options.muted;
            a.volume = this.options.volume;
            a.addEventListener("progress", function() {
                c.gate && (d._getHtmlStatus(a), d._updateInterface(), d._trigger(b.jPlayer.event.progress));
            }, !1);
            a.addEventListener("timeupdate", function() {
                c.gate && (d._getHtmlStatus(a), d._updateInterface(), d._trigger(b.jPlayer.event.timeupdate));
            }, !1);
            a.addEventListener("durationchange", function() {
                if (c.gate) {
                    d.status.duration = this.duration, d._getHtmlStatus(a), d._updateInterface(), d._trigger(b.jPlayer.event.durationchange);
                }
            }, !1);
            a.addEventListener("play", function() {
                c.gate && (d._updateButtons(!0), d._html_checkWaitForPlay(), d._trigger(b.jPlayer.event.play));
            }, !1);
            a.addEventListener("playing", function() {
                c.gate && (d._updateButtons(!0), d._seeked(), d._trigger(b.jPlayer.event.playing));
            }, !1);
            a.addEventListener("pause", function() {
                c.gate && (d._updateButtons(!1), d._trigger(b.jPlayer.event.pause));
            }, !1);
            a.addEventListener("waiting", function() {
                c.gate && (d._seeking(), d._trigger(b.jPlayer.event.waiting));
            }, !1);
            a.addEventListener("seeking", function() {
                c.gate && (d._seeking(), d._trigger(b.jPlayer.event.seeking));
            }, !1);
            a.addEventListener("seeked", function() {
                c.gate && (d._seeked(), d._trigger(b.jPlayer.event.seeked));
            }, !1);
            a.addEventListener("volumechange", function() {
                if (c.gate) {
                    d.options.volume = a.volume, d.options.muted = a.muted, d._updateMute(), d._updateVolume(), d._trigger(b.jPlayer.event.volumechange);
                }
            }, !1);
            a.addEventListener("suspend", function() {
                c.gate && (d._seeked(), d._trigger(b.jPlayer.event.suspend));
            }, !1);
            a.addEventListener("ended", function() {
                if (c.gate) {
                    if (!b.jPlayer.browser.webkit) {
                        d.htmlElement.media.currentTime = 0;
                    }
                    d.htmlElement.media.pause();
                    d._updateButtons(!1);
                    d._getHtmlStatus(a, !0);
                    d._updateInterface();
                    d._trigger(b.jPlayer.event.ended);
                }
            }, !1);
            a.addEventListener("error", function() {
                if (c.gate && (d._updateButtons(!1), d._seeked(), d.status.srcSet)) {
                    clearTimeout(d.internal.htmlDlyCmdId), d.status.waitForLoad = !0, d.status.waitForPlay = !0, d.status.video && !d.status.nativeVideoControls && d.internal.video.jq.css({width: "0px",height: "0px"}), d._validString(d.status.media.poster) && !d.status.nativeVideoControls && d.internal.poster.jq.show(), d.css.jq.videoPlay.length && d.css.jq.videoPlay.show(), d._error({type: b.jPlayer.error.URL,context: d.status.src,message: b.jPlayer.errorMsg.URL,hint: b.jPlayer.errorHint.URL});
                }
            }, !1);
            b.each(b.jPlayer.htmlEvent, function(e, g) {
                a.addEventListener(this, function() {
                    c.gate && d._trigger(b.jPlayer.event[g]);
                }, !1);
            });
        },_getHtmlStatus: function(a, b) {
            var d = 0, e = 0, g = 0, f = 0;
            if (a.duration) {
                this.status.duration = a.duration;
            }
            d = a.currentTime;
            e = this.status.duration > 0 ? 100 * d / this.status.duration : 0;
            typeof a.seekable === "object" && a.seekable.length > 0 ? (g = this.status.duration > 0 ? 100 * a.seekable.end(a.seekable.length - 1) / this.status.duration : 100, f = 100 * a.currentTime / a.seekable.end(a.seekable.length - 1)) : (g = 100, f = e);
            b && (e = f = d = 0);
            this.status.seekPercent = g;
            this.status.currentPercentRelative = f;
            this.status.currentPercentAbsolute = e;
            this.status.currentTime = d;
            this.status.readyState = a.readyState;
            this.status.networkState = a.networkState;
            this.status.playbackRate = a.playbackRate;
            this.status.ended = a.ended;
        },_resetStatus: function() {
            this.status = b.extend({}, this.status, b.jPlayer.prototype.status);
        },_trigger: function(a, c, d) {
            a = b.Event(a);
            a.jPlayer = {};
            a.jPlayer.version = b.extend({}, this.version);
            a.jPlayer.options = b.extend(!0, {}, this.options);
            a.jPlayer.status = b.extend(!0, {}, this.status);
            a.jPlayer.html = b.extend(!0, {}, this.html);
            a.jPlayer.flash = b.extend(!0, {}, this.flash);
            if (c) {
                a.jPlayer.error = b.extend({}, c);
            }
            if (d) {
                a.jPlayer.warning = b.extend({}, d);
            }
            this.element.trigger(a);
        },jPlayerFlashEvent: function(a, c) {
            if (a === b.jPlayer.event.ready) {
                if (this.internal.ready) {
                    if (this.flash.gate) {
                        if (this.status.srcSet) {
                            var d = this.status.currentTime, e = this.status.paused;
                            this.setMedia(this.status.media);
                            d > 0 && (e ? this.pause(d) : this.play(d));
                        }
                        this._trigger(b.jPlayer.event.flashreset);
                    }
                } else {
                    this.internal.ready = !0, this.internal.flash.jq.css({width: "0px",height: "0px"}), this.version.flash = c.version, this.version.needFlash !== this.version.flash && this._error({type: b.jPlayer.error.VERSION,context: this.version.flash,message: b.jPlayer.errorMsg.VERSION + this.version.flash,hint: b.jPlayer.errorHint.VERSION}), this._trigger(b.jPlayer.event.repeat), this._trigger(a);
                }
            }
            if (this.flash.gate) {
                switch (a) {
                    case b.jPlayer.event.progress:
                        this._getFlashStatus(c);
                        this._updateInterface();
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.timeupdate:
                        this._getFlashStatus(c);
                        this._updateInterface();
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.play:
                        this._seeked();
                        this._updateButtons(!0);
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.pause:
                        this._updateButtons(!1);
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.ended:
                        this._updateButtons(!1);
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.click:
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.error:
                        this.status.waitForLoad = !0;
                        this.status.waitForPlay = !0;
                        this.status.video && this.internal.flash.jq.css({width: "0px",height: "0px"});
                        this._validString(this.status.media.poster) && this.internal.poster.jq.show();
                        this.css.jq.videoPlay.length && this.status.video && this.css.jq.videoPlay.show();
                        this.status.video ? this._flash_setVideo(this.status.media) : this._flash_setAudio(this.status.media);
                        this._updateButtons(!1);
                        this._error({type: b.jPlayer.error.URL,context: c.src,message: b.jPlayer.errorMsg.URL,hint: b.jPlayer.errorHint.URL});
                        break;
                    case b.jPlayer.event.seeking:
                        this._seeking();
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.seeked:
                        this._seeked();
                        this._trigger(a);
                        break;
                    case b.jPlayer.event.ready:
                        break;
                    default:
                        this._trigger(a);
                }
            }
            return !1;
        },_getFlashStatus: function(a) {
            this.status.seekPercent = a.seekPercent;
            this.status.currentPercentRelative = a.currentPercentRelative;
            this.status.currentPercentAbsolute = a.currentPercentAbsolute;
            this.status.currentTime = a.currentTime;
            this.status.duration = a.duration;
            this.status.readyState = 4;
            this.status.networkState = 0;
            this.status.playbackRate = 1;
            this.status.ended = !1;
        },_updateButtons: function(a) {
            if (a !== f) {
                this.status.paused = !a, this.css.jq.play.length && this.css.jq.pause.length && (a ? (this.css.jq.play.hide(), this.css.jq.pause.show()) : (this.css.jq.play.show(), this.css.jq.pause.hide()));
            }
            this.css.jq.restoreScreen.length && this.css.jq.fullScreen.length && (this.status.noFullScreen ? (this.css.jq.fullScreen.hide(), this.css.jq.restoreScreen.hide()) : this.options.fullScreen ? (this.css.jq.fullScreen.hide(), this.css.jq.restoreScreen.show()) : (this.css.jq.fullScreen.show(), this.css.jq.restoreScreen.hide()));
            this.css.jq.repeat.length && this.css.jq.repeatOff.length && (this.options.loop ? (this.css.jq.repeat.hide(), this.css.jq.repeatOff.show()) : (this.css.jq.repeat.show(), this.css.jq.repeatOff.hide()));
        },_updateInterface: function() {
            this.css.jq.seekBar.length && this.css.jq.seekBar.width(this.status.seekPercent + "%");
            this.css.jq.playBar.length && this.css.jq.playBar.width(this.status.currentPercentRelative + "%");
            this.css.jq.currentTime.length && this.css.jq.currentTime.text(b.jPlayer.convertTime(this.status.currentTime));
            this.css.jq.duration.length && this.css.jq.duration.text(b.jPlayer.convertTime(this.status.duration));
        },_seeking: function() {
            this.css.jq.seekBar.length && this.css.jq.seekBar.addClass("jp-seeking-bg");
        },_seeked: function() {
            this.css.jq.seekBar.length && this.css.jq.seekBar.removeClass("jp-seeking-bg");
        },_resetGate: function() {
            this.html.audio.gate = !1;
            this.html.video.gate = !1;
            this.flash.gate = !1;
        },_resetActive: function() {
            this.html.active = !1;
            this.flash.active = !1;
        },setMedia: function(a) {
            var c = this, d = !1, e = this.status.media.poster !== a.poster;
            this._resetMedia();
            this._resetGate();
            this._resetActive();
            b.each(this.formats, function(e, f) {
                var i = c.format[f].media === "video";
                b.each(c.solutions, function(b, e) {
                    if (c[e].support[f] && c._validString(a[f])) {
                        var g = e === "html";
                        i ? (g ? (c.html.video.gate = !0, c._html_setVideo(a), c.html.active = !0) : (c.flash.gate = !0, c._flash_setVideo(a), c.flash.active = !0), c.css.jq.videoPlay.length && c.css.jq.videoPlay.show(), c.status.video = !0) : (g ? (c.html.audio.gate = !0, c._html_setAudio(a), c.html.active = !0) : (c.flash.gate = !0, c._flash_setAudio(a), c.flash.active = !0), c.css.jq.videoPlay.length && c.css.jq.videoPlay.hide(), c.status.video = !1);
                        d = !0;
                        return !1;
                    }
                });
                if (d) {
                    return !1;
                }
            });
            if (d) {
                if ((!this.status.nativeVideoControls || !this.html.video.gate) && this._validString(a.poster)) {
                    e ? this.htmlElement.poster.src = a.poster : this.internal.poster.jq.show();
                }
                this.status.srcSet = !0;
                this.status.media = b.extend({}, a);
                this._updateButtons(!1);
                this._updateInterface();
            } else {
                this._error({type: b.jPlayer.error.NO_SUPPORT,context: "{supplied:'" + this.options.supplied + "'}",message: b.jPlayer.errorMsg.NO_SUPPORT,hint: b.jPlayer.errorHint.NO_SUPPORT});
            }
        },_resetMedia: function() {
            this._resetStatus();
            this._updateButtons(!1);
            this._updateInterface();
            this._seeked();
            this.internal.poster.jq.hide();
            clearTimeout(this.internal.htmlDlyCmdId);
            this.html.active ? this._html_resetMedia() : this.flash.active && this._flash_resetMedia();
        },clearMedia: function() {
            this._resetMedia();
            this.html.active ? this._html_clearMedia() : this.flash.active && this._flash_clearMedia();
            this._resetGate();
            this._resetActive();
        },load: function() {
            this.status.srcSet ? this.html.active ? this._html_load() : this.flash.active && this._flash_load() : this._urlNotSetError("load");
        },play: function(a) {
            a = typeof a === "number" ? a : NaN;
            this.status.srcSet ? this.html.active ? this._html_play(a) : this.flash.active && this._flash_play(a) : this._urlNotSetError("play");
        },videoPlay: function() {
            this.play();
        },pause: function(a) {
            a = typeof a === "number" ? a : NaN;
            this.status.srcSet ? this.html.active ? this._html_pause(a) : this.flash.active && this._flash_pause(a) : this._urlNotSetError("pause");
        },pauseOthers: function() {
            var a = this;
            b.each(this.instances, function(b, d) {
                a.element !== d && d.data("jPlayer").status.srcSet && d.jPlayer("pause");
            });
        },stop: function() {
            this.status.srcSet ? this.html.active ? this._html_pause(0) : this.flash.active && this._flash_pause(0) : this._urlNotSetError("stop");
        },playHead: function(a) {
            a = this._limitValue(a, 0, 100);
            this.status.srcSet ? this.html.active ? this._html_playHead(a) : this.flash.active && this._flash_playHead(a) : this._urlNotSetError("playHead");
        },_muted: function(a) {
            this.options.muted = a;
            this.html.used && this._html_mute(a);
            this.flash.used && this._flash_mute(a);
            !this.html.video.gate && !this.html.audio.gate && (this._updateMute(a), this._updateVolume(this.options.volume), this._trigger(b.jPlayer.event.volumechange));
        },mute: function(a) {
            a = a === f ? !0 : !!a;
            this._muted(a);
        },unmute: function(a) {
            a = a === f ? !0 : !!a;
            this._muted(!a);
        },_updateMute: function(a) {
            if (a === f) {
                a = this.options.muted;
            }
            this.css.jq.mute.length && this.css.jq.unmute.length && (this.status.noVolume ? (this.css.jq.mute.hide(), this.css.jq.unmute.hide()) : a ? (this.css.jq.mute.hide(), this.css.jq.unmute.show()) : (this.css.jq.mute.show(), this.css.jq.unmute.hide()));
        },volume: function(a) {
            a = this._limitValue(a, 0, 1);
            this.options.volume = a;
            this.html.used && this._html_volume(a);
            this.flash.used && this._flash_volume(a);
            !this.html.video.gate && !this.html.audio.gate && (this._updateVolume(a), this._trigger(b.jPlayer.event.volumechange));
        },volumeBar: function(a) {
            if (this.css.jq.volumeBar.length) {
                var b = this.css.jq.volumeBar.offset(), d = a.pageX - b.left, e = this.css.jq.volumeBar.width(), a = this.css.jq.volumeBar.height() - a.pageY + b.top, b = this.css.jq.volumeBar.height();
                this.options.verticalVolume ? this.volume(a / b) : this.volume(d / e);
            }
            this.options.muted && this._muted(!1);
        },volumeBarValue: function(a) {
            this.volumeBar(a);
        },_updateVolume: function(a) {
            if (a === f) {
                a = this.options.volume;
            }
            a = this.options.muted ? 0 : a;
            this.status.noVolume ? (this.css.jq.volumeBar.length && this.css.jq.volumeBar.hide(), this.css.jq.volumeBarValue.length && this.css.jq.volumeBarValue.hide(), this.css.jq.volumeMax.length && this.css.jq.volumeMax.hide()) : (this.css.jq.volumeBar.length && this.css.jq.volumeBar.show(), this.css.jq.volumeBarValue.length && (this.css.jq.volumeBarValue.show(), this.css.jq.volumeBarValue[this.options.verticalVolume ? "height" : "width"](a * 100 + "%")), this.css.jq.volumeMax.length && this.css.jq.volumeMax.show());
        },volumeMax: function() {
            this.volume(1);
            this.options.muted && this._muted(!1);
        },_cssSelectorAncestor: function(a) {
            var c = this;
            this.options.cssSelectorAncestor = a;
            this._removeUiClass();
            this.ancestorJq = a ? b(a) : [];
            a && this.ancestorJq.length !== 1 && this._warning({type: b.jPlayer.warning.CSS_SELECTOR_COUNT,context: a,message: b.jPlayer.warningMsg.CSS_SELECTOR_COUNT + this.ancestorJq.length + " found for cssSelectorAncestor.",hint: b.jPlayer.warningHint.CSS_SELECTOR_COUNT});
            this._addUiClass();
            b.each(this.options.cssSelector, function(a, b) {
                c._cssSelector(a, b);
            });
        },_cssSelector: function(a, c) {
            var d = this;
            typeof c === "string" ? b.jPlayer.prototype.options.cssSelector[a] ? (this.css.jq[a] && this.css.jq[a].length && this.css.jq[a].unbind(".jPlayer"), this.options.cssSelector[a] = c, this.css.cs[a] = this.options.cssSelectorAncestor + " " + c, this.css.jq[a] = c ? b(this.css.cs[a]) : [], this.css.jq[a].length && this.css.jq[a].bind("click.jPlayer", function(c) {
                d[a](c);
                b(this).blur();
                return !1;
            }), c && this.css.jq[a].length !== 1 && this._warning({type: b.jPlayer.warning.CSS_SELECTOR_COUNT,context: this.css.cs[a],message: b.jPlayer.warningMsg.CSS_SELECTOR_COUNT + this.css.jq[a].length + " found for " + a + " method.",hint: b.jPlayer.warningHint.CSS_SELECTOR_COUNT})) : this._warning({type: b.jPlayer.warning.CSS_SELECTOR_METHOD,context: a,message: b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint: b.jPlayer.warningHint.CSS_SELECTOR_METHOD}) : this._warning({type: b.jPlayer.warning.CSS_SELECTOR_STRING,context: c,message: b.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint: b.jPlayer.warningHint.CSS_SELECTOR_STRING});
        },seekBar: function(a) {
            if (this.css.jq.seekBar) {
                var b = this.css.jq.seekBar.offset(), a = a.pageX - b.left, b = this.css.jq.seekBar.width();
                this.playHead(100 * a / b);
            }
        },playBar: function(a) {
            this.seekBar(a);
        },repeat: function() {
            this._loop(!0);
        },repeatOff: function() {
            this._loop(!1);
        },_loop: function(a) {
            if (this.options.loop !== a) {
                this.options.loop = a, this._updateButtons(), this._trigger(b.jPlayer.event.repeat);
            }
        },currentTime: function() {
        },duration: function() {
        },gui: function() {
        },noSolution: function() {
        },option: function(a, c) {
            var d = a;
            if (arguments.length === 0) {
                return b.extend(!0, {}, this.options);
            }
            if (typeof a === "string") {
                var e = a.split(".");
                if (c === f) {
                    for (var d = b.extend(!0, {}, this.options), g = 0; g < e.length; g++) {
                        if (d[e[g]] !== f) {
                            d = d[e[g]];
                        } else {
                            return this._warning({type: b.jPlayer.warning.OPTION_KEY,context: a,message: b.jPlayer.warningMsg.OPTION_KEY,hint: b.jPlayer.warningHint.OPTION_KEY}), f;
                        }
                    }
                    return d;
                }
                for (var g = d = {}, h = 0; h < e.length; h++) {
                    h < e.length - 1 ? (g[e[h]] = {}, g = g[e[h]]) : g[e[h]] = c;
                }
            }
            this._setOptions(d);
            return this;
        },_setOptions: function(a) {
            var c = this;
            b.each(a, function(a, b) {
                c._setOption(a, b);
            });
            return this;
        },_setOption: function(a, c) {
            var d = this;
            switch (a) {
                case "volume":
                    this.volume(c);
                    break;
                case "muted":
                    this._muted(c);
                    break;
                case "cssSelectorAncestor":
                    this._cssSelectorAncestor(c);
                    break;
                case "cssSelector":
                    b.each(c, function(a, b) {
                        d._cssSelector(a, b);
                    });
                    break;
                case "fullScreen":
                    this.options[a] !== c && (this._removeUiClass(), this.options[a] = c, this._refreshSize());
                    break;
                case "size":
                    !this.options.fullScreen && this.options[a].cssClass !== c.cssClass && this._removeUiClass();
                    this.options[a] = b.extend({}, this.options[a], c);
                    this._refreshSize();
                    break;
                case "sizeFull":
                    this.options.fullScreen && this.options[a].cssClass !== c.cssClass && this._removeUiClass();
                    this.options[a] = b.extend({}, this.options[a], c);
                    this._refreshSize();
                    break;
                case "autohide":
                    this.options[a] = b.extend({}, this.options[a], c);
                    this._updateAutohide();
                    break;
                case "loop":
                    this._loop(c);
                    break;
                case "nativeVideoControls":
                    this.options[a] = b.extend({}, this.options[a], c);
                    this.status.nativeVideoControls = this._uaBlocklist(this.options.nativeVideoControls);
                    this._restrictNativeVideoControls();
                    this._updateNativeVideoControls();
                    break;
                case "noFullScreen":
                    this.options[a] = b.extend({}, this.options[a], c);
                    this.status.nativeVideoControls = this._uaBlocklist(this.options.nativeVideoControls);
                    this.status.noFullScreen = this._uaBlocklist(this.options.noFullScreen);
                    this._restrictNativeVideoControls();
                    this._updateButtons();
                    break;
                case "noVolume":
                    this.options[a] = b.extend({}, this.options[a], c);
                    this.status.noVolume = this._uaBlocklist(this.options.noVolume);
                    this._updateVolume();
                    this._updateMute();
                    break;
                case "emulateHtml":
                    this.options[a] !== c && ((this.options[a] = c) ? this._emulateHtmlBridge() : this._destroyHtmlBridge());
            }
            return this;
        },_refreshSize: function() {
            this._setSize();
            this._addUiClass();
            this._updateSize();
            this._updateButtons();
            this._updateAutohide();
            this._trigger(b.jPlayer.event.resize);
        },_setSize: function() {
            this.options.fullScreen ? (this.status.width = this.options.sizeFull.width, this.status.height = this.options.sizeFull.height, this.status.cssClass = this.options.sizeFull.cssClass) : (this.status.width = this.options.size.width, this.status.height = this.options.size.height, this.status.cssClass = this.options.size.cssClass);
            this.element.css({width: this.status.width,height: this.status.height});
        },_addUiClass: function() {
            this.ancestorJq.length && this.ancestorJq.addClass(this.status.cssClass);
        },_removeUiClass: function() {
            this.ancestorJq.length && this.ancestorJq.removeClass(this.status.cssClass);
        },_updateSize: function() {
            this.internal.poster.jq.css({width: this.status.width,height: this.status.height});
            !this.status.waitForPlay && this.html.active && this.status.video || this.html.video.available && this.html.used && this.status.nativeVideoControls ? this.internal.video.jq.css({width: this.status.width,height: this.status.height}) : !this.status.waitForPlay && this.flash.active && this.status.video && this.internal.flash.jq.css({width: this.status.width,height: this.status.height});
        },_updateAutohide: function() {
            var a = this, b = function() {
                a.css.jq.gui.fadeIn(a.options.autohide.fadeIn, function() {
                    clearTimeout(a.internal.autohideId);
                    a.internal.autohideId = setTimeout(function() {
                        a.css.jq.gui.fadeOut(a.options.autohide.fadeOut);
                    }, a.options.autohide.hold);
                });
            };
            this.css.jq.gui.length && (this.css.jq.gui.stop(!0, !0), clearTimeout(this.internal.autohideId), this.element.unbind(".jPlayerAutohide"), this.css.jq.gui.unbind(".jPlayerAutohide"), this.status.nativeVideoControls ? this.css.jq.gui.hide() : this.options.fullScreen && this.options.autohide.full || !this.options.fullScreen && this.options.autohide.restored ? (this.element.bind("mousemove.jPlayer.jPlayerAutohide", b), this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide", b), this.css.jq.gui.hide()) : this.css.jq.gui.show());
        },fullScreen: function() {
            this._setOption("fullScreen", !0);
        },restoreScreen: function() {
            this._setOption("fullScreen", !1);
        },_html_initMedia: function() {
            this.htmlElement.media.src = this.status.src;
            this.options.preload !== "none" && this._html_load();
            this._trigger(b.jPlayer.event.timeupdate);
        },_html_setAudio: function(a) {
            var c = this;
            b.each(this.formats, function(b, e) {
                if (c.html.support[e] && a[e]) {
                    return c.status.src = a[e], c.status.format[e] = !0, c.status.formatType = e, !1;
                }
            });
            this.htmlElement.media = this.htmlElement.audio;
            this._html_initMedia();
        },_html_setVideo: function(a) {
            var c = this;
            b.each(this.formats, function(b, e) {
                if (c.html.support[e] && a[e]) {
                    return c.status.src = a[e], c.status.format[e] = !0, c.status.formatType = e, !1;
                }
            });
            if (this.status.nativeVideoControls) {
                this.htmlElement.video.poster = this._validString(a.poster) ? a.poster : "";
            }
            this.htmlElement.media = this.htmlElement.video;
            this._html_initMedia();
        },_html_resetMedia: function() {
            this.htmlElement.media && (this.htmlElement.media.id === this.internal.video.id && !this.status.nativeVideoControls && this.internal.video.jq.css({width: "0px",height: "0px"}), this.htmlElement.media.pause());
        },_html_clearMedia: function() {
            if (this.htmlElement.media) {
                this.htmlElement.media.src = "", this.htmlElement.media.load();
            }
        },_html_load: function() {
            if (this.status.waitForLoad) {
                this.status.waitForLoad = !1, this.htmlElement.media.load();
            }
            clearTimeout(this.internal.htmlDlyCmdId);
        },_html_play: function(a) {
            var b = this;
            this._html_load();
            this.htmlElement.media.play();
            if (!isNaN(a)) {
                try {
                    this.htmlElement.media.currentTime = a;
                } catch (d) {
                    this.internal.htmlDlyCmdId = setTimeout(function() {
                        b.play(a);
                    }, 100);
                    return;
                }
            }
            this._html_checkWaitForPlay();
        },_html_pause: function(a) {
            var b = this;
            a > 0 ? this._html_load() : clearTimeout(this.internal.htmlDlyCmdId);
            this.htmlElement.media.pause();
            if (!isNaN(a)) {
                try {
                    this.htmlElement.media.currentTime = a;
                } catch (d) {
                    this.internal.htmlDlyCmdId = setTimeout(function() {
                        b.pause(a);
                    }, 100);
                    return;
                }
            }
            a > 0 && this._html_checkWaitForPlay();
        },_html_playHead: function(a) {
            var b = this;
            this._html_load();
            try {
                if (typeof this.htmlElement.media.seekable === "object" && this.htmlElement.media.seekable.length > 0) {
                    this.htmlElement.media.currentTime = a * this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length - 1) / 100;
                } else {
                    if (this.htmlElement.media.duration > 0 && !isNaN(this.htmlElement.media.duration)) {
                        this.htmlElement.media.currentTime = a * this.htmlElement.media.duration / 100;
                    } else {
                        throw "e";
                    }
                }
            } catch (d) {
                this.internal.htmlDlyCmdId = setTimeout(function() {
                    b.playHead(a);
                }, 100);
                return;
            }
            this.status.waitForLoad || this._html_checkWaitForPlay();
        },_html_checkWaitForPlay: function() {
            if (this.status.waitForPlay) {
                this.status.waitForPlay = !1, this.css.jq.videoPlay.length && this.css.jq.videoPlay.hide(), this.status.video && (this.internal.poster.jq.hide(), this.internal.video.jq.css({width: this.status.width,height: this.status.height}));
            }
        },_html_volume: function(a) {
            if (this.html.audio.available) {
                this.htmlElement.audio.volume = a;
            }
            if (this.html.video.available) {
                this.htmlElement.video.volume = a;
            }
        },_html_mute: function(a) {
            if (this.html.audio.available) {
                this.htmlElement.audio.muted = a;
            }
            if (this.html.video.available) {
                this.htmlElement.video.muted = a;
            }
        },_flash_setAudio: function(a) {
            var c = this;
            try {
                if (b.each(this.formats, function(b, d) {
                    if (c.flash.support[d] && a[d]) {
                        switch (d) {
                            case "m4a":
                            case "fla":
                                c._getMovie().fl_setAudio_m4a(a[d]);
                                break;
                            case "mp3":
                                c._getMovie().fl_setAudio_mp3(a[d]);
                        }
                        c.status.src = a[d];
                        c.status.format[d] = !0;
                        c.status.formatType = d;
                        return !1;
                    }
                }), this.options.preload === "auto") {
                    this._flash_load(), this.status.waitForLoad = !1;
                }
            } catch (d) {
                this._flashError(d);
            }
        },_flash_setVideo: function(a) {
            var c = this;
            try {
                if (b.each(this.formats, function(b, d) {
                    if (c.flash.support[d] && a[d]) {
                        switch (d) {
                            case "m4v":
                            case "flv":
                                c._getMovie().fl_setVideo_m4v(a[d]);
                        }
                        c.status.src = a[d];
                        c.status.format[d] = !0;
                        c.status.formatType = d;
                        return !1;
                    }
                }), this.options.preload === "auto") {
                    this._flash_load(), this.status.waitForLoad = !1;
                }
            } catch (d) {
                this._flashError(d);
            }
        },_flash_resetMedia: function() {
            this.internal.flash.jq.css({width: "0px",height: "0px"});
            this._flash_pause(NaN);
        },_flash_clearMedia: function() {
            try {
                this._getMovie().fl_clearMedia();
            } catch (a) {
                this._flashError(a);
            }
        },_flash_load: function() {
            try {
                this._getMovie().fl_load();
            } catch (a) {
                this._flashError(a);
            }
            this.status.waitForLoad = !1;
        },_flash_play: function(a) {
            try {
                this._getMovie().fl_play(a);
            } catch (b) {
                this._flashError(b);
            }
            this.status.waitForLoad = !1;
            this._flash_checkWaitForPlay();
        },_flash_pause: function(a) {
            try {
                this._getMovie().fl_pause(a);
            } catch (b) {
                this._flashError(b);
            }
            if (a > 0) {
                this.status.waitForLoad = !1, this._flash_checkWaitForPlay();
            }
        },_flash_playHead: function(a) {
            try {
                this._getMovie().fl_play_head(a);
            } catch (b) {
                this._flashError(b);
            }
            this.status.waitForLoad || this._flash_checkWaitForPlay();
        },_flash_checkWaitForPlay: function() {
            if (this.status.waitForPlay) {
                this.status.waitForPlay = !1, this.css.jq.videoPlay.length && this.css.jq.videoPlay.hide(), this.status.video && (this.internal.poster.jq.hide(), this.internal.flash.jq.css({width: this.status.width,height: this.status.height}));
            }
        },_flash_volume: function(a) {
            try {
                this._getMovie().fl_volume(a);
            } catch (b) {
                this._flashError(b);
            }
        },_flash_mute: function(a) {
            try {
                this._getMovie().fl_mute(a);
            } catch (b) {
                this._flashError(b);
            }
        },_getMovie: function() {
            return document[this.internal.flash.id];
        },_checkForFlash: function(a) {
            var b = !1, d;
            if (window.ActiveXObject) {
                try {
                    new ActiveXObject("ShockwaveFlash.ShockwaveFlash." + a), b = !0;
                } catch (e) {
                }
            } else {
                navigator.plugins && navigator.mimeTypes.length > 0 && (d = navigator.plugins["Shockwave Flash"]) && navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/, "$1") >= a && (b = !0);
            }
            return b;
        },_validString: function(a) {
            return a && typeof a === "string";
        },_limitValue: function(a, b, d) {
            return a < b ? b : a > d ? d : a;
        },_urlNotSetError: function(a) {
            this._error({type: b.jPlayer.error.URL_NOT_SET,context: a,message: b.jPlayer.errorMsg.URL_NOT_SET,hint: b.jPlayer.errorHint.URL_NOT_SET});
        },_flashError: function(a) {
            var c;
            c = this.internal.ready ? "FLASH_DISABLED" : "FLASH";
            this._error({type: b.jPlayer.error[c],context: this.internal.flash.swf,message: b.jPlayer.errorMsg[c] + a.message,hint: b.jPlayer.errorHint[c]});
            this.internal.flash.jq.css({width: "1px",height: "1px"});
        },_error: function(a) {
            this._trigger(b.jPlayer.event.error, a);
            this.options.errorAlerts && this._alert("Error!" + (a.message ? "\n\n" + a.message : "") + (a.hint ? "\n\n" + a.hint : "") + "\n\nContext: " + a.context);
        },_warning: function(a) {
            this._trigger(b.jPlayer.event.warning, f, a);
            this.options.warningAlerts && this._alert("Warning!" + (a.message ? "\n\n" + a.message : "") + (a.hint ? "\n\n" + a.hint : "") + "\n\nContext: " + a.context);
        },_alert: function(a) {
            alert("jPlayer " + this.version.script + " : id='" + this.internal.self.id + "' : " + a);
        },_emulateHtmlBridge: function() {
            var a = this;
            b.each(b.jPlayer.emulateMethods.split(/\s+/g), function(b, d) {
                a.internal.domNode[d] = function(b) {
                    a[d](b);
                };
            });
            b.each(b.jPlayer.event, function(c, d) {
                var e = !0;
                b.each(b.jPlayer.reservedEvent.split(/\s+/g), function(a, b) {
                    if (b === c) {
                        return e = !1;
                    }
                });
                e && a.element.bind(d + ".jPlayer.jPlayerHtml", function() {
                    a._emulateHtmlUpdate();
                    var b = document.createEvent("Event");
                    b.initEvent(c, !1, !0);
                    a.internal.domNode.dispatchEvent(b);
                });
            });
        },_emulateHtmlUpdate: function() {
            var a = this;
            b.each(b.jPlayer.emulateStatus.split(/\s+/g), function(b, d) {
                a.internal.domNode[d] = a.status[d];
            });
            b.each(b.jPlayer.emulateOptions.split(/\s+/g), function(b, d) {
                a.internal.domNode[d] = a.options[d];
            });
        },_destroyHtmlBridge: function() {
            var a = this;
            this.element.unbind(".jPlayerHtml");
            b.each((b.jPlayer.emulateMethods + " " + b.jPlayer.emulateStatus + " " + b.jPlayer.emulateOptions).split(/\s+/g), function(b, d) {
                delete a.internal.domNode[d];
            });
        }};
    b.jPlayer.error = {FLASH: "e_flash",FLASH_DISABLED: "e_flash_disabled",NO_SOLUTION: "e_no_solution",NO_SUPPORT: "e_no_support",URL: "e_url",URL_NOT_SET: "e_url_not_set",VERSION: "e_version"};
    b.jPlayer.errorMsg = {FLASH: "jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED: "jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION: "No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT: "It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL: "Media URL could not be loaded.",URL_NOT_SET: "Attempt to issue media playback commands, while no media url is set.",VERSION: "jPlayer " + b.jPlayer.prototype.version.script + " needs Jplayer.swf version " + b.jPlayer.prototype.version.needFlash + " but found "};
    b.jPlayer.errorHint = {FLASH: "Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED: "Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION: "Review the jPlayer options: support and supplied.",NO_SUPPORT: "Video or audio formats defined in the supplied option are missing.",URL: "Check media URL is valid.",URL_NOT_SET: "Use setMedia() to set the media URL.",VERSION: "Update jPlayer files."};
    b.jPlayer.warning = {CSS_SELECTOR_COUNT: "e_css_selector_count",CSS_SELECTOR_METHOD: "e_css_selector_method",CSS_SELECTOR_STRING: "e_css_selector_string",OPTION_KEY: "e_option_key"};
    b.jPlayer.warningMsg = {CSS_SELECTOR_COUNT: "The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD: "The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING: "The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY: "The option requested in jPlayer('option') is undefined."};
    b.jPlayer.warningHint = {CSS_SELECTOR_COUNT: "Check your css selector and the ancestor.",CSS_SELECTOR_METHOD: "Check your method name.",CSS_SELECTOR_STRING: "Check your css selector is a string.",OPTION_KEY: "Check your option name."};
})(jQuery);
(function(a) {
    a.fn.autoResize = function(j) {
        var b = a.extend({onResize: function() {
            },animate: true,animateDuration: 150,animateCallback: function() {
            },extraSpace: 20,limit: 1000}, j);
        this.filter("textarea").each(function() {
            var c = a(this).css({resize: "none","overflow-y": "hidden"}), k = c.height(), f = (function() {
                var l = ["height", "width", "lineHeight", "textDecoration", "letterSpacing"], h = {};
                a.each(l, function(d, e) {
                    h[e] = c.css(e);
                });
                return c.clone().removeAttr("id").removeAttr("name").css({position: "absolute",top: 0,left: -9999}).css(h).attr("tabIndex", "-1").insertBefore(c);
            })(), i = null, g = function() {
                f.height(0).val(a(this).val()).scrollTop(10000);
                var d = Math.max(f.scrollTop(), k) + b.extraSpace, e = a(this).add(f);
                if (i === d) {
                    return;
                }
                i = d;
                if (d >= b.limit) {
                    a(this).css("overflow-y", "");
                    return;
                }
                b.onResize.call(this);
                b.animate && c.css("display") === "block" ? e.stop().animate({height: d}, b.animateDuration, b.animateCallback) : e.height(d);
            };
            c.unbind(".dynSiz").bind("keyup.dynSiz", g).bind("keydown.dynSiz", g).bind("change.dynSiz", g);
        });
        return this;
    };
})(jQuery);
var soundFXHtml5Audio = true;
try {
    new Audio();
} catch (e) {
    soundFXHtml5Audio = false;
}
var soundFX = {BLEEP: "UI_Comm_Rose_Select",GAME_READY: "UI_inGame_Notification",isMuted: function(type) {
        return type !== undefined && S.Modifier.bitwiseand(S.globalContext.mutedSounds, $S.callFunction("base.soundFxMap")[type]);
    }};
if (soundFXHtml5Audio) {
    soundFX.ext = ".ogg";
    if (navigator.userAgent.match(/MSIE/) || navigator.userAgent.match(/Safari/)) {
        soundFX.ext = ".mp3";
    }
    soundFX.cache = {};
    soundFX.play = function(fx, type) {
        if (soundFX.isMuted(type)) {
            return;
        }
        var audio = soundFX.cache[fx];
        if (audio === undefined) {
            soundFX.cache[fx] = audio = new Audio("/public/base/soundfx/" + fx + soundFX.ext);
        }
        audio.play();
    };
} else {
    soundFX.play = function(fx, type) {
        if (soundFX.isMuted(type)) {
            return;
        }
        var player = $("#" + fx);
        if (player.length == 0) {
            $("#soundFxPlayer").append("<div id='" + fx + "'></div>");
            player = $("#" + fx);
            player.jPlayer({ready: function() {
                    $(this).jPlayer("setMedia", {mp3: "/public/base/soundfx/" + fx + ".mp3"}).jPlayer("play");
                },supplied: "mp3",solution: "flash, html",swfPath: "/public/base/shared/"});
        } else {
            player.jPlayer("play");
        }
    };
}
var GSFN;
if (GSFN == undefined) {
    GSFN = {};
}
if (!GSFN.initialized) {
    GSFN.gId = function(id) {
        return document.getElementById(id);
    };
    GSFN.hasClassName = function(element, className) {
        var elementClassName = element.className;
        return (elementClassName.length > 0 && (elementClassName == className || new RegExp("(^|\\s)" + className + "(\\s|$)").test(elementClassName)));
    };
    GSFN.addClassName = function(element, className) {
        if (!GSFN.hasClassName(element, className)) {
            element.className += (element.className ? " " : "") + className;
        }
        return element;
    };
    GSFN.removeClassName = function(element, className) {
        var newClass = GSFN.strip(element.className.replace(new RegExp("(^|\\s+)" + className + "(\\s+|$)"), " "));
        element.className = newClass;
        return element;
    };
    GSFN.strip = function(string) {
        return string.replace(/^\s+/, "").replace(/\s+$/, "");
    };
    GSFN.add_css = function(css_content) {
        var head = document.getElementsByTagName("head")[0];
        var style = document.createElement("style");
        style.type = "text/css";
        if (style.styleSheet) {
            style.styleSheet.cssText = css_content;
        } else {
            rules = document.createTextNode(css_content);
            style.appendChild(rules);
        }
        head.appendChild(style);
    };
    GSFN.initialized = true;
}
GSFN.feedback_widget = function(options) {
    this.widget_disabled = false;
    this.options = options;
    this.is_ssl = ("https:" == document.location.protocol);
    if (!this.options.display) {
        this.options.display = "overlay";
    }
    if (this.is_ssl) {
        this.feedback_base_url = this.local_ssl_base_url;
        this.asset_base_url = this.s3_ssl_base_url;
    } else {
        this.feedback_base_url = this.local_base_url;
        this.asset_base_url = this.s3_base_url;
    }
    if (this.options.local_assets == true) {
        this.asset_base_url = this.feedback_base_url;
    }
    var disable_tagging = this.options.auto_tag == false;
    this.query = [];
    if (!disable_tagging) {
        if (this.options.product) {
            this.query.push("product=" + encodeURIComponent(this.options.product));
        }
        if (this.options.tag) {
            this.query.push("tag=" + encodeURIComponent(this.options.tag));
        }
        if (this.options.user_defined_code) {
            this.query.push("user_defined_code=" + encodeURIComponent(this.options.user_defined_code));
        }
    }
    if (this.options.display) {
        this.query.push("display=" + encodeURIComponent(this.options.display));
    }
    if (this.options.style) {
        this.query.push("style=" + encodeURIComponent(this.options.style));
    }
    if (this.options.popular_topics) {
        this.query.push("popular_topics=" + encodeURIComponent(this.options.popular_topics));
    }
    if (this.options.limit) {
        this.query.push("limit=" + encodeURIComponent(this.options.limit));
    }
    if (this.options.problem) {
        this.query.push("problem=" + encodeURIComponent(this.options.problem));
    }
    if (this.options.powered_by) {
        this.query.push("powered_by=" + encodeURIComponent(this.options.powered_by));
    }
    if (this.options.custom_css) {
        this.query.push("custom_css=" + encodeURIComponent(this.options.custom_css));
    }
    if (this.options.custom_ie_css) {
        this.query.push("custom_ie_css=" + encodeURIComponent(this.options.custom_ie_css));
    }
    if (this.options.custom_js) {
        this.query.push("custom_js=" + encodeURIComponent(this.options.custom_js));
    }
    if (this.options.auto_tag == false) {
        this.query.push("auto_tag=" + encodeURIComponent(this.options.auto_tag));
    }
    if (this.options.interstitial) {
        this.query.push("interstitial=" + encodeURIComponent(this.options.interstitial));
    }
    if (this.options.community_base_url) {
        this.query.push("community_base_url=" + encodeURIComponent(this.options.community_base_url));
    }
    if (this.options.document_domain) {
        this.query.push("document_domain=" + encodeURIComponent(this.options.document_domain));
    }
    var fastpass = this.get_fastpass_url(this.options);
    if (fastpass) {
        this.query.push("fastpass=" + encodeURIComponent(fastpass));
    }
    this.query_string = "?" + this.query.join("&");
    this.feedback_url = this.feedback_base_url + "/" + this.options.company + "/feedback/topics/new" + this.query_string;
    this.options = options ? options : {};
    this.options.placement = this.options.placement ? this.options.placement : "left";
    this.options.color = this.options.color ? this.options.color : "#222";
    if (this.options.display == "overlay") {
        this.initial_iframe_url = "";
        if (!this.options.width) {
            if (this.options.company == "rightcliq_by_visa") {
                this.options.width = "780px;";
            } else {
                this.options.width = "658px";
            }
        }
        if (!this.options.height) {
            this.options.height = "100%";
        }
    } else {
        this.initial_iframe_url = this.feedback_url;
        if (!this.options.width) {
            this.options.width = "100%";
        }
        if (!this.options.height) {
            this.options.height = "500px";
        }
    }
    if (this.widget_disabled) {
        this.iframe_html = '<div id="fdbk_iframe" style="position:relative; top: 20px; margin:20px;background:orange;color:purple;font-size:72px; padding: 20px;">' + "WIDGETS ARE UNAVAILABLE LOL" + "</div>";
    } else {
        this.iframe_html = '<iframe id="fdbk_iframe" allowTransparency="true" scrolling="no" frameborder="0" class="loading"' + (this.initial_iframe_url != "" ? ' src="' + this.initial_iframe_url + '"' : "") + ' width="' + this.options.width + '"' + ' height="' + this.options.height + '"' + ' style="width: ' + this.options.width + "; height: " + this.options.height + ';"></iframe>';
    }
    this.tab_html = '<a href="#" id="fdbk_tab" class="fdbk_tab_' + this.options.placement + '" style="background-color:' + this.options.color + '">FEEDBACK</a>';
    this.overlay_html = '<div id="fdbk_overlay" style="display:none">' + '<div id="fdbk_container">' + '<a href="#" id="fdbk_close"></a>' + this.iframe_html + "</div>" + '<div id="fdbk_screen"></div>' + "</div>";
    if (this.options.display == "overlay") {
        raw_css = "#fdbk_overlay {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000000;\n  position: absolute; }\n\n#fdbk_screen {\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  position: absolute;\n  background-color: black;\n  opacity: 0.45;\n  -moz-opacity: 0.45;\n  filter: alpha(opacity=45); }\n\n#fdbk_container {\n  width: 680px;\n  height: 640px;\n  margin: 0 auto;\n  z-index: 2;\n  position: relative; }\n  #fdbk_container iframe {\n    width: 658px;\n    height: 100%;\n    margin: 20px;\n    background: transparent; }\n  #fdbk_container iframe.loading {\n    background: transparent url(https://s3.amazonaws.com/getsatisfaction.com/images/fb_loading.png) no-repeat; }\n\na#fdbk_tab {\n  top: 25%;\n  left: 0;\n  width: 42px;\n  height: 102px;\n  color: white;\n  cursor: pointer;\n  text-indent: -100000px;\n  overflow: hidden;\n  position: fixed;\n  z-index: 100000;\n  margin-left: -7px;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_trans_tab.png);\n  _position: absolute;\n  _background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_tab_ie6.png); }\n  a#fdbk_tab:hover {\n    margin-left: -4px; }\n\na.fdbk_tab_right {\n  right: 0 !important;\n  left: auto !important;\n  margin-right: 0 !important;\n  margin-left: auto !important;\n  width: 35px !important; }\n  a.fdbk_tab_right:hover {\n    width: 38px !important;\n    margin-right: 0 !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_bottom {\n  top: auto !important;\n  bottom: 0 !important;\n  left: 20% !important;\n  height: 38px !important;\n  width: 102px !important;\n  background-position: 0 -102px !important;\n  margin-bottom: -7px !important;\n  margin-left: auto !important; }\n  a.fdbk_tab_bottom:hover {\n    margin-bottom: -4px !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_hidden {\n  display: none !important; }\n\na#fdbk_close {\n  position: absolute;\n  cursor: pointer;\n  outline: none;\n  top: 0;\n  left: 0;\n  z-index: 4;\n  width: 42px;\n  height: 42px;\n  overflow: hidden;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png);\n  _background: none;\n  _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png', sizingMethod='crop'); }\n  a#fdbk_close:hover {\n    background-position: -42px 0; }\n\n.feedback_tab_on embed, .feedback_tab_on select, .feedback_tab_on object {\n  visibility: hidden; }\n";
        replacer_regex = new RegExp(this.s3_ssl_base_url, "g");
        translated_css = raw_css.replace(replacer_regex, this.asset_base_url);
        GSFN.add_css(translated_css);
        if (this.options.container) {
            var container_el = GSFN.gId(this.options.container);
            container_el.innerHTML = this.tab_html + this.overlay_html;
        } else {
            document.write(this.tab_html);
            document.write(this.overlay_html);
        }
        var feedback_obj = this;
        GSFN.gId("fdbk_tab").onclick = function() {
            feedback_obj.show();
            return false;
        };
        GSFN.gId("fdbk_close").onclick = function() {
            feedback_obj.hide();
            return false;
        };
        GSFN.gId("fdbk_iframe").removeAttribute("src");
    } else {
        if (this.options.container) {
            var container_el = GSFN.gId(this.options.container);
            container_el.innerHTML = this.iframe_html;
        } else {
            document.write(this.iframe_html);
        }
    }
};
GSFN.feedback_widget.prototype = {local_base_url: "http://getsatisfaction.com",local_ssl_base_url: "https://getsatisfaction.com",s3_base_url: "http://s3.amazonaws.com/getsatisfaction.com",s3_ssl_base_url: "https://s3.amazonaws.com/getsatisfaction.com",asset_url: function(asset) {
        return this.asset_base_url + asset;
    },set_position: function() {
        this.scroll_top = document.documentElement.scrollTop || document.body.scrollTop;
        this.scroll_height = document.documentElement.scrollHeight;
        this.client_height = window.innerHeight || document.documentElement.clientHeight;
        GSFN.gId("fdbk_screen").style.height = this.scroll_height + "px";
        GSFN.gId("fdbk_container").style.top = this.scroll_top + (this.client_height * 0.1) + "px";
    },show: function() {
        GSFN.gId("fdbk_iframe").setAttribute("src", this.feedback_url);
        if (GSFN.gId("fdbk_iframe").addEventListener) {
            GSFN.gId("fdbk_iframe").addEventListener("load", this.loaded, false);
        } else {
            if (GSFN.gId("fdbk_iframe").attachEvent) {
                GSFN.gId("fdbk_iframe").attachEvent("onload", this.loaded);
            }
        }
        this.set_position();
        GSFN.addClassName(document.getElementsByTagName("html")[0], "feedback_tab_on");
        GSFN.gId("fdbk_overlay").style.display = "block";
    },hide: function() {
        if (GSFN.gId("fdbk_iframe").addEventListener) {
            GSFN.gId("fdbk_iframe").removeEventListener("load", this.loaded, false);
        } else {
            if (GSFN.gId("fdbk_iframe").attachEvent) {
                GSFN.gId("fdbk_iframe").detachEvent("onload", this.loaded);
            }
        }
        GSFN.gId("fdbk_overlay").style.display = "none";
        GSFN.gId("fdbk_iframe").removeAttribute("src");
        GSFN.gId("fdbk_iframe").className = "loading";
        GSFN.removeClassName(document.getElementsByTagName("html")[0], "feedback_tab_on");
    },loaded: function() {
        GSFN.gId("fdbk_iframe").className = "loaded";
    },get_fastpass_url: function(options) {
        if (options.fastpass) {
            return options.fastpass;
        }
        var script_tags = document.getElementsByTagName("script");
        for (var i = 0; i < script_tags.length; i++) {
            var tag = script_tags[i];
            if (tag.src.match(/\/fastpass/ && tag.src.match(/oauth/))) {
                return tag.src;
            }
        }
    }};
(function($) {
    jQuery.fn.autobrowse = function(options) {
        var defaults = {url: function(offset, count) {
                return "/";
            },template: function(response) {
                return "";
            },offset: 0,count: 20,totalCount: 0,loader: '<div class="loader"></div>',itemsReturned: null,onComplete: function(response) {
            },useCache: false,expiration: 24,sensitivity: 0};
        if (typeof options == "string" && options == "flush") {
            jQuery.jStorage.flush();
            return this;
        }
        if (typeof options == "string" && options == "unbind") {
            return this.each(function() {
                var scrollCallback = $(this).data("scrollCallback");
                $(window).unbind("scroll", scrollCallback);
            });
        }
        options = jQuery.extend(defaults, options);
        if (typeof options.url == "string") {
            var url = options.url;
            options.url = function(offset, count) {
                return url;
            };
        }
        var getDataLength = function(data) {
            var length = 0;
            for (var i = 0; i < data.length; i++) {
                length += options.itemsReturned(data[i]);
            }
            return length;
        };
        return this.each(function() {
            var localData, obj = jQuery(this);
            var currentOffset = options.offset;
            var loading = false;
            var scrollTopUpdateTimer = null;
            scrollCallback = function() {
                var scrollTop = jQuery(window).scrollTop();
                var objBottom = obj.height() + obj.offset().top;
                var winHeight = window.innerHeight ? window.innerHeight : $(window).height();
                var winBtmPos = scrollTop + winHeight;
                if (scrollTopUpdateTimer) {
                    clearTimeout(scrollTopUpdateTimer);
                }
                scrollTopUpdateTimer = setTimeout(function() {
                    jQuery.jStorage.set("autobrowseScrollTop", scrollTop);
                }, 200);
                if (objBottom - options.sensitivity < winBtmPos && !loading && currentOffset <= options.totalCount) {
                    var loader = jQuery(options.loader);
                    loader.appendTo(obj);
                    loading = true;
                    jQuery.getJSON(options.url(currentOffset, options.count), function(response) {
                        if (options.itemsReturned(response) + currentOffset >= options.totalCount || options.itemsReturned(response) == 0) {
                            jQuery(window).unbind("scroll", scrollCallback);
                        }
                        if (options.itemsReturned(response) > 0) {
                            try {
                                var markup = options.template(response);
                            } catch (e) {
                            }
                            jQuery(markup).appendTo(obj);
                            options.onComplete.call(obj, response);
                            if (options.useCache && getDataLength(localData) + options.offset == currentOffset) {
                                localData.push(response);
                                if (!jQuery.jStorage.set("autobrowseStorage", localData)) {
                                    localData.pop();
                                }
                            }
                            currentOffset += options.itemsReturned(response);
                            if (options.useCache) {
                                jQuery.jStorage.set("autobrowseOffset", currentOffset);
                            }
                        }
                        loader.remove();
                        loading = false;
                    });
                }
            };
            var startPlugin = function(obj) {
                if (options.useCache) {
                    var autobrowseScrollTop = jQuery.jStorage.get("autobrowseScrollTop");
                }
                if (autobrowseScrollTop) {
                    jQuery(window).scrollTop(autobrowseScrollTop);
                }
                obj.data("scrollCallback", scrollCallback);
                jQuery(window).scroll(scrollCallback);
                scrollCallback();
            };
            if (options.useCache) {
                if (jQuery.jStorage.get("autobrowseStorageKey") != options.url(0, 0)) {
                    jQuery.jStorage.flush();
                } else {
                    if (jQuery.jStorage.get("autobrowseExpiration") && jQuery.jStorage.get("autobrowseExpiration") < (new Date()).getTime()) {
                        jQuery.jStorage.flush();
                    }
                }
                localData = jQuery.jStorage.get("autobrowseStorage");
                if (localData) {
                    for (var i = 0; i < localData.length; i++) {
                        var markup = options.template(localData[i]);
                        jQuery(markup).appendTo(obj);
                        currentOffset += options.itemsReturned(localData[i]);
                        options.onComplete.call(obj, localData[i]);
                    }
                    var offsetDifference = jQuery.jStorage.get("autobrowseOffset") - currentOffset;
                    if (offsetDifference > 0) {
                        var loader = jQuery(options.loader);
                        loader.appendTo(obj);
                        loading = true;
                        jQuery.getJSON(options.url(currentOffset, offsetDifference), function(response) {
                            try {
                                var markup = options.template(response);
                            } catch (e) {
                            }
                            jQuery(markup).appendTo(obj);
                            options.onComplete.call(obj, response);
                            currentOffset += options.itemsReturned(response);
                            loader.remove();
                            loading = false;
                            startPlugin(obj);
                        });
                    } else {
                        startPlugin(obj);
                    }
                } else {
                    localData = [];
                    jQuery.jStorage.get("autobrowseStorageKey");
                    jQuery.jStorage.set("autobrowseExpiration", (new Date()).getTime() + options.expiration * 60 * 60 * 1000);
                    jQuery.jStorage.set("autobrowseOffset", currentOffset);
                    jQuery.jStorage.set("autobrowseStorageKey", options.url(0, 0));
                    jQuery.jStorage.set("autobrowseStorage", localData);
                    jQuery.jStorage.set("autobrowseScrollTop", 0);
                    startPlugin(obj);
                }
            } else {
                startPlugin(obj);
            }
        });
    };
})(jQuery);
(function($) {
    $.fn.battleBubble = function(body, options) {
        var defaults = {extraClass: "",position: "top",appendBody: true,bodyElement: "body"};
        body = arguments.length > 0 || body === false ? body : false;
        options = $.extend(defaults, options);
        this.live("mouseenter", function(e) {
            var $this = $(this);
            var $thisOffset = $this.offset();
            if (options.bodyElement !== "body" && options.appendBody && $(options.bodyElement).css("position") != "static") {
                var $appendBodyOffset = $(options.bodyElement).offset();
                $thisOffset.top -= $appendBodyOffset.top;
                $thisOffset.left -= $appendBodyOffset.left;
            }
            var $bubble = $this.find(".common-bubble");
            if ($bubble.length && !options.appendBody) {
                $bubble.show();
            } else {
                var bubbleBody = body;
                if (bubbleBody === false) {
                    bubbleBody = $this.attr("title");
                    if (typeof bubbleBody === "undefined" || bubbleBody === false || bubbleBody === "") {
                        bubbleBody = $this.attr("data-battlebubble");
                    } else {
                        $this.removeAttr("title").attr("data-battlebubble", bubbleBody);
                    }
                }
                var bubble = $($S("common.bubble").render({"body": bubbleBody,"extraClass": options.extraClass}));
                if (options.position === "left") {
                    if (!options.appendBody) {
                        bubble.appendTo($this).css("left", -(bubble.outerWidth() + 5)).css("margin-top", -(bubble.outerHeight() / 2)).css("top", "50%").addClass("common-bubble-left");
                    } else {
                        bubble.appendTo(options.bodyElement).css("left", $thisOffset.left - (bubble.outerWidth() + 5)).css("top", $thisOffset.top + ($this.outerHeight() / 2) - (bubble.outerHeight() / 2)).addClass("common-bubble-left");
                    }
                } else {
                    if (!options.appendBody) {
                        bubble.appendTo($this).css("top", -(bubble.outerHeight() + 5)).css("margin-left", -(bubble.outerWidth() / 2)).css("left", "50%").addClass("common-bubble-top");
                    } else {
                        bubble.appendTo(options.bodyElement).css("left", $thisOffset.left + ($this.outerWidth() / 2) - (bubble.outerWidth() / 2)).css("top", $thisOffset.top - (bubble.outerHeight() + 5)).addClass("common-bubble-top");
                    }
                }
                bubble.bind("mouseenter", function() {
                    bubble.hide();
                });
            }
        });
        this.live("mouseleave", function() {
            if (!options.appendBody) {
                $(this).find(".common-bubble").hide();
            } else {
                $(options.bodyElement).find("> .common-bubble").remove();
            }
        });
    };
})(jQuery);
(function($) {
    var leavePageCallbacks = [];
    var currentBound = [];
    $.fn.pageBind = function(eventName, func) {
        currentBound.push({elem: this,event: eventName,func: func});
        return this.bind(eventName, func);
    };
    var currentDelegate = [];
    $.fn.pageDelegate = function(selector, eventType, handler) {
        currentDelegate.push({elem: this,selector: selector,eventType: eventType,handler: handler});
        return this.delegate(selector, eventType, handler);
    };
    var currentLive = [];
    $.fn.pageLive = function(eventName, func) {
        currentLive.push({elem: this,event: eventName,func: func});
        return this.live(eventName, func);
    };
    $.leavePage = function(func) {
        leavePageCallbacks.push(func);
    };
    $.unbindPage = function() {
        var b = 0;
        var l = 0;
        var c = 0;
        var d = 0;
        $.each(currentBound, function(i, data) {
            b++;
            data.elem.unbind(data.event, data.func);
        });
        currentBound.splice(0);
        $.each(currentDelegate, function(i, data) {
            d++;
            data.elem.undelegate(data.selector, data.eventType, data.handler);
        });
        currentDelegate.splice(0);
        $.each(currentLive, function(i, data) {
            l++;
            data.elem.die(data.event, data.func);
        });
        currentLive.splice(0);
        $.each(leavePageCallbacks, function(i, func) {
            c++;
            func();
        });
        leavePageCallbacks.splice(0);
    };
})(jQuery);
(function($) {
    $.fn.railer = function($contentWrapper, elementsMinHeight) {
        var $cart = this, $rail = $cart.parent(), $window = $(window), $preScrollTop = $window.scrollTop(), scrollBusy = false;
        $cart.cartPausedAtPlace = false;
        $cart.cartPausedAtEnd = false;
        $cart.sendToHook = function() {
        };
        $window.scroll(function() {
            if (scrollBusy) {
                return;
            }
            scrollBusy = true;
            var $cartHeight = $cart.outerHeight();
            if ($cartHeight >= elementsMinHeight.outerHeight()) {
                scrollBusy = false;
                return;
            }
            var $scrollTop = $window.scrollTop(), $scrollBottom = $scrollTop + serverguideList.windowHeight, $cartOffset = $cart.offset(), $scrollingDown = $scrollTop > $preScrollTop, $cartHigherThenWindow = $cartHeight > serverguideList.windowHeight, $railOffset = $rail.offset();
            var $hasClass = {fixedTop: $rail.hasClass("floating-fixed-top"),fixedBottom: $rail.hasClass("floating-fixed-bottom")};
            $cartOffset.topBottom = $cartOffset.top + $cartHeight;
            $railOffset.topBottom = $railOffset.top + $contentWrapper.outerHeight();
            var $reachedEndTop = $scrollTop <= $railOffset.top, $reachedEndBottom = $scrollBottom >= $railOffset.topBottom;
            $cart.cartPauseAtPlace = function() {
                if ($cart.cartPausedAtPlace) {
                    scrollBusy = false;
                    return;
                }
                $cart.cartPausedAtPlace = true;
                $rail.addClass("floating-fixed-pause");
                var marginTop = $cartOffset.top - $railOffset.top;
                $cart.css("margin-top", marginTop < 0 ? 0 : marginTop);
            };
            $cart.cartResume = function() {
                if (!$cart.cartPausedAtEnd && !$cart.cartPausedAtPlace) {
                    scrollBusy = false;
                    return;
                }
                $cart.cartPausedAtEnd = false;
                $cart.cartPausedAtPlace = false;
                $rail.removeClass("floating-fixed-pause");
                $cart.css("margin-top", "");
            };
            $cart.sendToHook = function() {
                $cart.cartResume();
                $cart.removeAttr("style");
                var recalculatePositions = function() {
                    $cartHeight = $cart.outerHeight();
                    $cartOffset = $cart.offset();
                    $railOffset = $rail.offset();
                    $cartOffset.topBottom = $cartOffset.top + $cartHeight;
                    $railOffset.topBottom = $railOffset.top + $contentWrapper.outerHeight();
                    $reachedEndTop = $scrollTop <= $railOffset.top;
                    $reachedEndBottom = $scrollBottom >= $railOffset.topBottom;
                };
                recalculatePositions();
                var stickTop = !$reachedEndTop;
                var stickBottom = false;
                var runStick = function() {
                    if (stickTop) {
                        $rail.addClass("floating-fixed-top");
                    } else {
                        $rail.removeClass("floating-fixed-top");
                    }
                    if (stickBottom) {
                        $rail.addClass("floating-fixed-bottom");
                    } else {
                        $rail.removeClass("floating-fixed-bottom");
                    }
                    recalculatePositions();
                };
                runStick();
                if (($reachedEndBottom || $cartOffset.topBottom > $railOffset.topBottom) && !$reachedEndTop) {
                    stickTop = false;
                    stickBottom = true;
                    runStick();
                }
                if ($cartOffset.topBottom > $railOffset.topBottom && !$reachedEndTop) {
                    stickTop = false;
                    stickBottom = true;
                    runStick();
                }
                if ($cartOffset.top < $railOffset.top) {
                    stickTop = false;
                    stickBottom = false;
                    runStick();
                }
                if ($cartHeight < serverguideList.windowHeight && !$reachedEndTop) {
                    stickTop = true;
                    stickBottom = false;
                    runStick();
                }
            };
            $preScrollTop = $scrollTop;
            var $windowPullingUp = $scrollTop < $cartOffset.top && !$reachedEndTop;
            if ($cartHigherThenWindow) {
                var $windowPullingDown = $scrollBottom >= $cartOffset.topBottom && !$reachedEndBottom;
                if ($scrollingDown) {
                    if ($hasClass.fixedTop && !$reachedEndBottom && !$windowPullingDown) {
                        $cart.cartPauseAtPlace();
                    } else {
                        if ($windowPullingDown) {
                            $cart.cartResume();
                            $rail.removeClass("floating-fixed-top");
                            $rail.addClass("floating-fixed-bottom");
                        }
                    }
                } else {
                    if ($hasClass.fixedBottom && !$reachedEndTop && !$windowPullingUp) {
                        $cart.cartPauseAtPlace();
                    } else {
                        if ($windowPullingUp) {
                            $cart.cartResume();
                            $rail.removeClass("floating-fixed-bottom");
                            $rail.addClass("floating-fixed-top");
                        }
                    }
                }
            } else {
                var $windowPushingDown = $scrollTop > $cartOffset.top && !$reachedEndBottom;
                if ($windowPushingDown && !$hasClass.fixedTop) {
                    $rail.removeClass("floating-fixed-bottom");
                    $rail.addClass("floating-fixed-top");
                }
                if ($windowPullingUp && !$hasClass.fixedTop) {
                    $cart.cartResume();
                    $rail.removeClass("floating-fixed-bottom");
                    $rail.addClass("floating-fixed-top");
                }
            }
            if ($reachedEndTop && !$scrollingDown && ($hasClass.fixedBottom || $hasClass.fixedTop)) {
                $rail.removeClass("floating-fixed-top");
                $rail.removeClass("floating-fixed-bottom");
            }
            scrollBusy = false;
        });
        return $cart;
    };
})(jQuery);
(function($) {
    $.fn.sodaSlider = function(options) {
        var defaultOptions = {leftArrow: ".sodaSlider-arrow-left",rightArrow: ".sodaSlider-arrow-right",slider: ".sodaSlider-slider",speed: false,distance: false,centered: true};
        options = jQuery.extend(defaultOptions, options);
        this.each(function() {
            var $this = $(this);
            var sliderWrapperWidth = $this.width();
            var $slider = $this.find(options.slider);
            var sliderWidth = $slider.outerWidth(true);
            if (options.centered) {
                if (sliderWidth < sliderWrapperWidth) {
                    $slider.css("left", parseInt((sliderWrapperWidth - sliderWidth) / 2, 10));
                } else {
                    if (sliderWidth > sliderWrapperWidth) {
                        $slider.css("left", parseInt(((sliderWidth / 2) - (sliderWrapperWidth / 2)) * -1, 10));
                    }
                }
            } else {
                if (sliderWidth < sliderWrapperWidth) {
                    $slider.css("left", parseInt((sliderWrapperWidth - sliderWidth) / 2, 10));
                }
            }
            var $rightArrow = $this.find(options.rightArrow);
            var $leftArrow = $this.find(options.leftArrow);
            var stopPosition = (parseInt($slider.outerWidth(true), 10) - sliderWrapperWidth) * -1;
            var currentPos = parseInt($slider.css("left"), 10);
            options.speed = options.speed ? options.speed : parseInt(sliderWrapperWidth / 4, 10);
            options.distance = options.distance ? options.distance : parseInt(sliderWrapperWidth / 2, 10);
            function _fadeArrows() {
                if (currentPos >= 0) {
                    $leftArrow.addClass("sodaSlider-arrow-disabled");
                } else {
                    $leftArrow.removeClass("sodaSlider-arrow-disabled");
                }
                if (currentPos <= stopPosition) {
                    $rightArrow.addClass("sodaSlider-arrow-disabled");
                } else {
                    $rightArrow.removeClass("sodaSlider-arrow-disabled");
                }
            }
            _fadeArrows();
            var _loopMoveInterval = 0;
            function _move(direction) {
                var goRight = direction === -1;
                var leftWall = currentPos >= 0 && direction === 1;
                var rightWall = currentPos <= stopPosition && direction === -1;
                if (leftWall || rightWall) {
                    clearInterval(_loopMoveInterval);
                    return;
                }
                currentPos = goRight ? currentPos - options.distance : currentPos + options.distance;
                if (currentPos < stopPosition && goRight) {
                    currentPos = stopPosition;
                }
                if (currentPos > 0 && !goRight) {
                    currentPos = 0;
                }
                $slider.stop(true, true).animate({"left": currentPos}, options.speed, "linear", function() {
                    _fadeArrows();
                });
            }
            $rightArrow.bind("mousedown", function() {
                _move(-1);
                _loopMoveInterval = setInterval(function() {
                    _move(-1);
                }, options.speed);
            }).live("mouseout mouseup", function() {
                clearInterval(_loopMoveInterval);
            }).disableSelection();
            $leftArrow.bind("mousedown", function() {
                _move(1);
                _loopMoveInterval = setInterval(function() {
                    _move(1);
                }, options.speed);
            }).live("mouseout mouseup", function() {
                clearInterval(_loopMoveInterval);
            }).disableSelection();
        });
    };
})(jQuery);
(function($) {
    $.fn.preLoad = function() {
        this.each(function() {
            $("<img/>")[0].src = this;
        });
    };
})(jQuery);
(function($) {
    $.fn.hoverIntent = function(f, g) {
        var cfg = {sensitivity: 7,interval: 100,timeout: 0};
        cfg = $.extend(cfg, g ? {over: f,out: g} : f);
        var cX, cY, pX, pY;
        var track = function(ev) {
            cX = ev.pageX;
            cY = ev.pageY;
        };
        var compare = function(ev, ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            if ((Math.abs(pX - cX) + Math.abs(pY - cY)) < cfg.sensitivity) {
                $(ob).unbind("mousemove", track);
                ob.hoverIntent_s = 1;
                return cfg.over.apply(ob, [ev]);
            } else {
                pX = cX;
                pY = cY;
                ob.hoverIntent_t = setTimeout(function() {
                    compare(ev, ob);
                }, cfg.interval);
            }
        };
        var delay = function(ev, ob) {
            ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            ob.hoverIntent_s = 0;
            return cfg.out.apply(ob, [ev]);
        };
        var handleHover = function(e) {
            var p = (e.type == "mouseover" ? e.fromElement : e.toElement) || e.relatedTarget;
            while (p && p != this) {
                try {
                    p = p.parentNode;
                } catch (e) {
                    p = this;
                }
            }
            if (p == this) {
                return false;
            }
            var ev = jQuery.extend({}, e);
            var ob = this;
            if (ob.hoverIntent_t) {
                ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
            }
            if (e.type == "mouseover") {
                pX = ev.pageX;
                pY = ev.pageY;
                $(ob).bind("mousemove", track);
                if (ob.hoverIntent_s != 1) {
                    ob.hoverIntent_t = setTimeout(function() {
                        compare(ev, ob);
                    }, cfg.interval);
                }
            } else {
                $(ob).unbind("mousemove", track);
                if (ob.hoverIntent_s == 1) {
                    ob.hoverIntent_t = setTimeout(function() {
                        delay(ev, ob);
                    }, cfg.timeout);
                }
            }
        };
        return this.mouseover(handleHover).mouseout(handleHover);
    };
})(jQuery);
(function($) {
    if (!$.Indextank) {
        $.Indextank = new Object();
    }
    $.Indextank.Ize = function(el, apiurl, indexName, options) {
        var base = this;
        base.$el = $(el);
        base.el = el;
        var urlrx = /http(s)?:\/\/[a-z0-9]+.api.indextank.com/;
        if (!urlrx.test(apiurl)) {
            throw ("invalid api url!");
        }
        if (indexName == undefined) {
            throw ("index name is not defined!");
        }
        base.$el.data("Indextank.Ize", base);
        base.init = function() {
            base.apiurl = apiurl;
            base.indexName = indexName;
            base.options = $.extend({}, $.Indextank.Ize.defaultOptions, options);
        };
        base.init();
    };
    $.Indextank.Ize.defaultOptions = {};
    $.fn.indextank_Ize = function(apiurl, indexName, options) {
        return this.each(function() {
            (new $.Indextank.Ize(this, apiurl, indexName, options));
        });
    };
    $.fn.getIndextank_Ize = function() {
        this.data("Indextank.Ize");
    };
})(jQuery);
(function($) {
    $.toJSON = function(o) {
        if (typeof (JSON) == "object" && JSON.stringify) {
            return JSON.stringify(o);
        }
        var type = typeof (o);
        if (o === null) {
            return "null";
        }
        if (type == "undefined") {
            return undefined;
        }
        if (type == "number" || type == "boolean") {
            return o + "";
        }
        if (type == "string") {
            return $.quoteString(o);
        }
        if (type == "object") {
            if (typeof o.toJSON == "function") {
                return $.toJSON(o.toJSON());
            }
            if (o.constructor === Date) {
                var month = o.getUTCMonth() + 1;
                if (month < 10) {
                    month = "0" + month;
                }
                var day = o.getUTCDate();
                if (day < 10) {
                    day = "0" + day;
                }
                var year = o.getUTCFullYear();
                var hours = o.getUTCHours();
                if (hours < 10) {
                    hours = "0" + hours;
                }
                var minutes = o.getUTCMinutes();
                if (minutes < 10) {
                    minutes = "0" + minutes;
                }
                var seconds = o.getUTCSeconds();
                if (seconds < 10) {
                    seconds = "0" + seconds;
                }
                var milli = o.getUTCMilliseconds();
                if (milli < 100) {
                    milli = "0" + milli;
                }
                if (milli < 10) {
                    milli = "0" + milli;
                }
                return '"' + year + "-" + month + "-" + day + "T" + hours + ":" + minutes + ":" + seconds + "." + milli + 'Z"';
            }
            if (o.constructor === Array) {
                var ret = [];
                for (var i = 0; i < o.length; i++) {
                    ret.push($.toJSON(o[i]) || "null");
                }
                return "[" + ret.join(",") + "]";
            }
            var pairs = [];
            for (var k in o) {
                var name;
                var type = typeof k;
                if (type == "number") {
                    name = '"' + k + '"';
                } else {
                    if (type == "string") {
                        name = $.quoteString(k);
                    } else {
                        continue;
                    }
                }
                if (typeof o[k] == "function") {
                    continue;
                }
                var val = $.toJSON(o[k]);
                pairs.push(name + ":" + val);
            }
            return "{" + pairs.join(", ") + "}";
        }
    };
    $.evalJSON = function(src) {
        if (typeof (JSON) == "object" && JSON.parse) {
            return JSON.parse(src);
        }
        return eval("(" + src + ")");
    };
    $.secureEvalJSON = function(src) {
        if (typeof (JSON) == "object" && JSON.parse) {
            return JSON.parse(src);
        }
        var filtered = src;
        filtered = filtered.replace(/\\["\\\/bfnrtu]/g, "@");
        filtered = filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]");
        filtered = filtered.replace(/(?:^|:|,)(?:\s*\[)+/g, "");
        if (/^[\],:{}\s]*$/.test(filtered)) {
            return eval("(" + src + ")");
        } else {
            throw new SyntaxError("Error parsing JSON, source is not valid.");
        }
    };
    $.quoteString = function(string) {
        if (string.match(_escapeable)) {
            return '"' + string.replace(_escapeable, function(a) {
                var c = _meta[a];
                if (typeof c === "string") {
                    return c;
                }
                c = a.charCodeAt();
                return "\\u00" + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
            }) + '"';
        }
        return '"' + string + '"';
    };
    var _escapeable = /["\\\x00-\x1f\x7f-\x9f]/g;
    var _meta = {"\b": "\\b","\t": "\\t","\n": "\\n","\f": "\\f","\r": "\\r",'"': '\\"',"\\": "\\\\"};
})(jQuery);
(function($) {
    $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || "");
            } else {
                o[this.name] = this.value || "";
            }
        });
        return o;
    };
})(jQuery);
(function($) {
    $.extend({tablesorter: new function() {
            var parsers = [], widgets = [];
            this.defaults = {cssHeader: "header",cssAsc: "headerSortUp",cssDesc: "headerSortDown",cssChildRow: "expand-child",sortInitialOrder: "asc",sortMultiSortKey: "shiftKey",sortForce: null,sortAppend: null,sortLocaleCompare: true,textExtraction: "simple",parsers: {},widgets: [],widgetZebra: {css: ["even", "odd"]},headers: {},widthFixed: false,cancelSelection: true,sortList: [],headerList: [],dateFormat: "us",decimal: "/.|,/g",onRenderHeader: null,selectorHeaders: "thead th",debug: false};
            function benchmark(s, d) {
                log(s + "," + (new Date().getTime() - d.getTime()) + "ms");
            }
            this.benchmark = benchmark;
            function log(s) {
                if (typeof console != "undefined" && typeof console.debug != "undefined") {
                    console.log(s);
                } else {
                    alert(s);
                }
            }
            function buildParserCache(table, $headers) {
                if (table.config.debug) {
                    var parsersDebug = "";
                }
                if (table.tBodies.length == 0) {
                    return;
                }
                var rows = table.tBodies[0].rows;
                if (rows[0]) {
                    var list = [], cells = rows[0].cells, l = cells.length;
                    for (var i = 0; i < l; i++) {
                        var p = false;
                        if ($.metadata && ($($headers[i]).metadata() && $($headers[i]).metadata().sorter)) {
                            p = getParserById($($headers[i]).metadata().sorter);
                        } else {
                            if ((table.config.headers[i] && table.config.headers[i].sorter)) {
                                p = getParserById(table.config.headers[i].sorter);
                            }
                        }
                        if (!p) {
                            p = detectParserForColumn(table, rows, -1, i);
                        }
                        if (table.config.debug) {
                            parsersDebug += "column:" + i + " parser:" + p.id + "\n";
                        }
                        list.push(p);
                    }
                }
                if (table.config.debug) {
                    log(parsersDebug);
                }
                return list;
            }
            function detectParserForColumn(table, rows, rowIndex, cellIndex) {
                var l = parsers.length, node = false, nodeValue = false, keepLooking = true;
                while (nodeValue == "" && keepLooking) {
                    rowIndex++;
                    if (rows[rowIndex]) {
                        node = getNodeFromRowAndCellIndex(rows, rowIndex, cellIndex);
                        nodeValue = trimAndGetNodeText(table.config, node);
                        if (table.config.debug) {
                            log("Checking if value was empty on row:" + rowIndex);
                        }
                    } else {
                        keepLooking = false;
                    }
                }
                for (var i = 1; i < l; i++) {
                    if (parsers[i].is(nodeValue, table, node)) {
                        return parsers[i];
                    }
                }
                return parsers[0];
            }
            function getNodeFromRowAndCellIndex(rows, rowIndex, cellIndex) {
                return rows[rowIndex].cells[cellIndex];
            }
            function trimAndGetNodeText(config, node) {
                return $.trim(getElementText(config, node));
            }
            function getParserById(name) {
                var l = parsers.length;
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == name.toLowerCase()) {
                        return parsers[i];
                    }
                }
                return false;
            }
            function buildCache(table) {
                if (table.config.debug) {
                    var cacheTime = new Date();
                }
                var totalRows = (table.tBodies[0] && table.tBodies[0].rows.length) || 0, totalCells = (table.tBodies[0].rows[0] && table.tBodies[0].rows[0].cells.length) || 0, parsers = table.config.parsers, cache = {row: [],normalized: []};
                for (var i = 0; i < totalRows; ++i) {
                    var c = $(table.tBodies[0].rows[i]), cols = [];
                    if (c.hasClass(table.config.cssChildRow)) {
                        cache.row[cache.row.length - 1] = cache.row[cache.row.length - 1].add(c);
                        continue;
                    }
                    cache.row.push(c);
                    for (var j = 0; j < totalCells; ++j) {
                        cols.push(parsers[j].format(getElementText(table.config, c[0].cells[j]), table, c[0].cells[j]));
                    }
                    cols.push(cache.normalized.length);
                    cache.normalized.push(cols);
                    cols = null;
                }
                if (table.config.debug) {
                    benchmark("Building cache for " + totalRows + " rows:", cacheTime);
                }
                return cache;
            }
            function getElementText(config, node) {
                var text = "";
                if (!node) {
                    return "";
                }
                if (!config.supportsTextContent) {
                    config.supportsTextContent = node.textContent || false;
                }
                if (config.textExtraction == "simple") {
                    if (config.supportsTextContent) {
                        text = node.textContent;
                    } else {
                        if (node.childNodes[0] && node.childNodes[0].hasChildNodes()) {
                            text = node.childNodes[0].innerHTML;
                        } else {
                            text = node.innerHTML;
                        }
                    }
                } else {
                    if (typeof (config.textExtraction) == "function") {
                        text = config.textExtraction(node);
                    } else {
                        text = $(node).text();
                    }
                }
                return text;
            }
            function appendToTable(table, cache) {
                if (table.config.debug) {
                    var appendTime = new Date();
                }
                var c = cache, r = c.row, n = c.normalized, totalRows = n.length, checkCell = (n[0].length - 1), tableBody = $(table.tBodies[0]), rows = [];
                for (var i = 0; i < totalRows; i++) {
                    var pos = n[i][checkCell];
                    rows.push(r[pos]);
                    if (!table.config.appender) {
                        var l = r[pos].length;
                        for (var j = 0; j < l; j++) {
                            tableBody[0].appendChild(r[pos][j]);
                        }
                    }
                }
                if (table.config.appender) {
                    table.config.appender(table, rows);
                }
                rows = null;
                if (table.config.debug) {
                    benchmark("Rebuilt table:", appendTime);
                }
                applyWidget(table);
                setTimeout(function() {
                    $(table).trigger("sortEnd");
                }, 0);
            }
            function buildHeaders(table) {
                if (table.config.debug) {
                    var time = new Date();
                }
                var meta = ($.metadata) ? true : false;
                var header_index = computeTableHeaderCellIndexes(table);
                $tableHeaders = $(table.config.selectorHeaders, table).each(function(index) {
                    this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex];
                    this.order = formatSortingOrder(table.config.sortInitialOrder);
                    this.count = this.order;
                    if (checkHeaderMetadata(this) || checkHeaderOptions(table, index)) {
                        this.sortDisabled = true;
                    }
                    if (checkHeaderOptionsSortingLocked(table, index)) {
                        this.order = this.lockedOrder = checkHeaderOptionsSortingLocked(table, index);
                    }
                    if (!this.sortDisabled) {
                        var $th = $(this).addClass(table.config.cssHeader);
                        if (table.config.onRenderHeader) {
                            table.config.onRenderHeader.apply($th);
                        }
                    }
                    table.config.headerList[index] = this;
                });
                if (table.config.debug) {
                    benchmark("Built headers:", time);
                    log($tableHeaders);
                }
                return $tableHeaders;
            }
            function computeTableHeaderCellIndexes(t) {
                var matrix = [];
                var lookup = {};
                var thead = t.getElementsByTagName("THEAD")[0];
                var trs = thead.getElementsByTagName("TR");
                for (var i = 0; i < trs.length; i++) {
                    var cells = trs[i].cells;
                    for (var j = 0; j < cells.length; j++) {
                        var c = cells[j];
                        var rowIndex = c.parentNode.rowIndex;
                        var cellId = rowIndex + "-" + c.cellIndex;
                        var rowSpan = c.rowSpan || 1;
                        var colSpan = c.colSpan || 1;
                        var firstAvailCol;
                        if (typeof (matrix[rowIndex]) == "undefined") {
                            matrix[rowIndex] = [];
                        }
                        for (var k = 0; k < matrix[rowIndex].length + 1; k++) {
                            if (typeof (matrix[rowIndex][k]) == "undefined") {
                                firstAvailCol = k;
                                break;
                            }
                        }
                        lookup[cellId] = firstAvailCol;
                        for (var k = rowIndex; k < rowIndex + rowSpan; k++) {
                            if (typeof (matrix[k]) == "undefined") {
                                matrix[k] = [];
                            }
                            var matrixrow = matrix[k];
                            for (var l = firstAvailCol; l < firstAvailCol + colSpan; l++) {
                                matrixrow[l] = "x";
                            }
                        }
                    }
                }
                return lookup;
            }
            function checkCellColSpan(table, rows, row) {
                var arr = [], r = table.tHead.rows, c = r[row].cells;
                for (var i = 0; i < c.length; i++) {
                    var cell = c[i];
                    if (cell.colSpan > 1) {
                        arr = arr.concat(checkCellColSpan(table, headerArr, row++));
                    } else {
                        if (table.tHead.length == 1 || (cell.rowSpan > 1 || !r[row + 1])) {
                            arr.push(cell);
                        }
                    }
                }
                return arr;
            }
            function checkHeaderMetadata(cell) {
                if (($.metadata) && ($(cell).metadata().sorter === false)) {
                    return true;
                }
                return false;
            }
            function checkHeaderOptions(table, i) {
                if ((table.config.headers[i]) && (table.config.headers[i].sorter === false)) {
                    return true;
                }
                return false;
            }
            function checkHeaderOptionsSortingLocked(table, i) {
                if ((table.config.headers[i]) && (table.config.headers[i].lockedOrder)) {
                    return table.config.headers[i].lockedOrder;
                }
                return false;
            }
            function applyWidget(table) {
                var c = table.config.widgets;
                var l = c.length;
                for (var i = 0; i < l; i++) {
                    getWidgetById(c[i]).format(table);
                }
            }
            function getWidgetById(name) {
                var l = widgets.length;
                for (var i = 0; i < l; i++) {
                    if (widgets[i].id.toLowerCase() == name.toLowerCase()) {
                        return widgets[i];
                    }
                }
            }
            function formatSortingOrder(v) {
                if (typeof (v) != "Number") {
                    return (v.toLowerCase() == "desc") ? 1 : 0;
                } else {
                    return (v == 1) ? 1 : 0;
                }
            }
            function isValueInArray(v, a) {
                var l = a.length;
                for (var i = 0; i < l; i++) {
                    if (a[i][0] == v) {
                        return true;
                    }
                }
                return false;
            }
            function setHeadersCss(table, $headers, list, css) {
                $headers.removeClass(css[0]).removeClass(css[1]);
                var h = [];
                $headers.each(function(offset) {
                    if (!this.sortDisabled) {
                        h[this.column] = $(this);
                    }
                });
                var l = list.length;
                for (var i = 0; i < l; i++) {
                    h[list[i][0]].addClass(css[list[i][1]]);
                }
            }
            function fixColumnWidth(table, $headers) {
                var c = table.config;
                if (c.widthFixed) {
                    var colgroup = $("<colgroup>");
                    $("tr:first td", table.tBodies[0]).each(function() {
                        colgroup.append($("<col>").css("width", $(this).width()));
                    });
                    $(table).prepend(colgroup);
                }
            }
            function updateHeaderSortCount(table, sortList) {
                var c = table.config, l = sortList.length;
                for (var i = 0; i < l; i++) {
                    var s = sortList[i], o = c.headerList[s[0]];
                    o.count = s[1];
                    o.count++;
                }
            }
            function multisort(table, sortList, cache) {
                if (table.config.debug) {
                    var sortTime = new Date();
                }
                var dynamicExp = "var sortWrapper = function(a,b) {", l = sortList.length;
                for (var i = 0; i < l; i++) {
                    var c = sortList[i][0];
                    var order = sortList[i][1];
                    var s = (table.config.parsers[c].type == "text") ? ((order == 0) ? makeSortFunction("text", "asc", c) : makeSortFunction("text", "desc", c)) : ((order == 0) ? makeSortFunction("numeric", "asc", c) : makeSortFunction("numeric", "desc", c));
                    var e = "e" + i;
                    dynamicExp += "var " + e + " = " + s;
                    dynamicExp += "if(" + e + ") { return " + e + "; } ";
                    dynamicExp += "else { ";
                }
                var orgOrderCol = cache.normalized[0].length - 1;
                dynamicExp += "return a[" + orgOrderCol + "]-b[" + orgOrderCol + "];";
                for (var i = 0; i < l; i++) {
                    dynamicExp += "}; ";
                }
                dynamicExp += "return 0; ";
                dynamicExp += "}; ";
                if (table.config.debug) {
                    benchmark("Evaling expression:" + dynamicExp, new Date());
                }
                eval(dynamicExp);
                cache.normalized.sort(sortWrapper);
                if (table.config.debug) {
                    benchmark("Sorting on " + sortList.toString() + " and dir " + order + " time:", sortTime);
                }
                return cache;
            }
            function makeSortFunction(type, direction, index) {
                var a = "a[" + index + "]", b = "b[" + index + "]";
                if (type == "text" && direction == "asc") {
                    return "(" + a + " == " + b + " ? 0 : (" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : (" + a + " < " + b + ") ? -1 : 1 )));";
                } else {
                    if (type == "text" && direction == "desc") {
                        return "(" + a + " == " + b + " ? 0 : (" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : (" + b + " < " + a + ") ? -1 : 1 )));";
                    } else {
                        if (type == "numeric" && direction == "asc") {
                            return "(" + a + " === null && " + b + " === null) ? 0 :(" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : " + a + " - " + b + "));";
                        } else {
                            if (type == "numeric" && direction == "desc") {
                                return "(" + a + " === null && " + b + " === null) ? 0 :(" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : " + b + " - " + a + "));";
                            }
                        }
                    }
                }
            }
            function makeSortText(i) {
                return "((a[" + i + "] < b[" + i + "]) ? -1 : ((a[" + i + "] > b[" + i + "]) ? 1 : 0));";
            }
            function makeSortTextDesc(i) {
                return "((b[" + i + "] < a[" + i + "]) ? -1 : ((b[" + i + "] > a[" + i + "]) ? 1 : 0));";
            }
            function makeSortNumeric(i) {
                return "a[" + i + "]-b[" + i + "];";
            }
            function makeSortNumericDesc(i) {
                return "b[" + i + "]-a[" + i + "];";
            }
            function sortText(a, b) {
                if (table.config.sortLocaleCompare) {
                    return a.localeCompare(b);
                }
                return ((a < b) ? -1 : ((a > b) ? 1 : 0));
            }
            function sortTextDesc(a, b) {
                if (table.config.sortLocaleCompare) {
                    return b.localeCompare(a);
                }
                return ((b < a) ? -1 : ((b > a) ? 1 : 0));
            }
            function sortNumeric(a, b) {
                return a - b;
            }
            function sortNumericDesc(a, b) {
                return b - a;
            }
            function getCachedSortType(parsers, i) {
                return parsers[i].type;
            }
            this.construct = function(settings) {
                return this.each(function() {
                    if (!this.tHead || !this.tBodies) {
                        return;
                    }
                    var $this, $document, $headers, cache, config, shiftDown = 0, sortOrder;
                    this.config = {};
                    config = $.extend(this.config, $.tablesorter.defaults, settings);
                    $this = $(this);
                    $.data(this, "tablesorter", config);
                    $headers = buildHeaders(this);
                    this.config.parsers = buildParserCache(this, $headers);
                    cache = buildCache(this);
                    var sortCSS = [config.cssDesc, config.cssAsc];
                    fixColumnWidth(this);
                    $headers.click(function(e) {
                        var totalRows = ($this[0].tBodies[0] && $this[0].tBodies[0].rows.length) || 0;
                        if (!this.sortDisabled && totalRows > 0) {
                            $this.trigger("sortStart");
                            var $cell = $(this);
                            var i = this.column;
                            this.order = this.count++ % 2;
                            if (this.lockedOrder) {
                                this.order = this.lockedOrder;
                            }
                            if (!e[config.sortMultiSortKey]) {
                                config.sortList = [];
                                if (config.sortForce != null) {
                                    var a = config.sortForce;
                                    for (var j = 0; j < a.length; j++) {
                                        if (a[j][0] != i) {
                                            config.sortList.push(a[j]);
                                        }
                                    }
                                }
                                config.sortList.push([i, this.order]);
                            } else {
                                if (isValueInArray(i, config.sortList)) {
                                    for (var j = 0; j < config.sortList.length; j++) {
                                        var s = config.sortList[j], o = config.headerList[s[0]];
                                        if (s[0] == i) {
                                            o.count = s[1];
                                            o.count++;
                                            s[1] = o.count % 2;
                                        }
                                    }
                                } else {
                                    config.sortList.push([i, this.order]);
                                }
                            }
                            setTimeout(function() {
                                setHeadersCss($this[0], $headers, config.sortList, sortCSS);
                                appendToTable($this[0], multisort($this[0], config.sortList, cache));
                            }, 1);
                            return false;
                        }
                    }).mousedown(function() {
                        if (config.cancelSelection) {
                            this.onselectstart = function() {
                                return false;
                            };
                            return false;
                        }
                    });
                    $this.bind("update", function() {
                        var me = this;
                        setTimeout(function() {
                            me.config.parsers = buildParserCache(me, $headers);
                            cache = buildCache(me);
                        }, 1);
                    }).bind("updateCell", function(e, cell) {
                        var config = this.config;
                        var pos = [(cell.parentNode.rowIndex - 1), cell.cellIndex];
                        cache.normalized[pos[0]][pos[1]] = config.parsers[pos[1]].format(getElementText(config, cell), cell);
                    }).bind("sorton", function(e, list) {
                        $(this).trigger("sortStart");
                        config.sortList = list;
                        var sortList = config.sortList;
                        updateHeaderSortCount(this, sortList);
                        setHeadersCss(this, $headers, sortList, sortCSS);
                        appendToTable(this, multisort(this, sortList, cache));
                    }).bind("appendCache", function() {
                        appendToTable(this, cache);
                    }).bind("applyWidgetId", function(e, id) {
                        getWidgetById(id).format(this);
                    }).bind("applyWidgets", function() {
                        applyWidget(this);
                    });
                    if ($.metadata && ($(this).metadata() && $(this).metadata().sortlist)) {
                        config.sortList = $(this).metadata().sortlist;
                    }
                    if (config.sortList.length > 0) {
                        $this.trigger("sorton", [config.sortList]);
                    }
                    applyWidget(this);
                });
            };
            this.addParser = function(parser) {
                var l = parsers.length, a = true;
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == parser.id.toLowerCase()) {
                        a = false;
                    }
                }
                if (a) {
                    parsers.push(parser);
                }
            };
            this.addWidget = function(widget) {
                widgets.push(widget);
            };
            this.formatFloat = function(s) {
                var i = parseFloat(s);
                return (isNaN(i)) ? 0 : i;
            };
            this.formatInt = function(s) {
                var i = parseInt(s);
                return (isNaN(i)) ? 0 : i;
            };
            this.isDigit = function(s, config) {
                return /^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g, "")));
            };
            this.clearTableBody = function(table) {
                if ($.browser.msie) {
                    function empty() {
                        while (this.firstChild) {
                            this.removeChild(this.firstChild);
                        }
                    }
                    empty.apply(table.tBodies[0]);
                } else {
                    table.tBodies[0].innerHTML = "";
                }
            };
        }});
    $.fn.extend({tablesorter: $.tablesorter.construct});
    var ts = $.tablesorter;
    ts.addParser({id: "text",is: function(s) {
            return true;
        },format: function(s) {
            return $.trim(s.toLocaleLowerCase());
        },type: "text"});
    ts.addParser({id: "digit",is: function(s, table) {
            var c = table.config;
            return $.tablesorter.isDigit(s, c);
        },format: function(s) {
            return $.tablesorter.formatFloat(s);
        },type: "numeric"});
    ts.addParser({id: "currency",is: function(s) {
            return /^[$?.]/.test(s);
        },format: function(s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/[$]/g), ""));
        },type: "numeric"});
    ts.addParser({id: "ipAddress",is: function(s) {
            return /^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);
        },format: function(s) {
            var a = s.split("."), r = "", l = a.length;
            for (var i = 0; i < l; i++) {
                var item = a[i];
                if (item.length == 2) {
                    r += "0" + item;
                } else {
                    r += item;
                }
            }
            return $.tablesorter.formatFloat(r);
        },type: "numeric"});
    ts.addParser({id: "url",is: function(s) {
            return /^(https?|ftp|file):\/\/$/.test(s);
        },format: function(s) {
            return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//), ""));
        },type: "text"});
    ts.addParser({id: "isoDate",is: function(s) {
            return /^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);
        },format: function(s) {
            return $.tablesorter.formatFloat((s != "") ? new Date(s.replace(new RegExp(/-/g), "/")).getTime() : "0");
        },type: "numeric"});
    ts.addParser({id: "percent",is: function(s) {
            return /\%$/.test($.trim(s));
        },format: function(s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g), ""));
        },type: "numeric"});
    ts.addParser({id: "usLongDate",is: function(s) {
            return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));
        },format: function(s) {
            return $.tablesorter.formatFloat(new Date(s).getTime());
        },type: "numeric"});
    ts.addParser({id: "shortDate",is: function(s) {
            return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);
        },format: function(s, table) {
            var c = table.config;
            s = s.replace(/\-/g, "/");
            if (c.dateFormat == "us") {
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$1/$2");
            } else {
                if (c.dateFormat == "uk") {
                    s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$2/$1");
                } else {
                    if (c.dateFormat == "dd/mm/yy" || c.dateFormat == "dd-mm-yy") {
                        s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$1/$2/$3");
                    }
                }
            }
            return $.tablesorter.formatFloat(new Date(s).getTime());
        },type: "numeric"});
    ts.addParser({id: "time",is: function(s) {
            return /^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);
        },format: function(s) {
            return $.tablesorter.formatFloat(new Date("2000/01/01 " + s).getTime());
        },type: "numeric"});
    ts.addParser({id: "metadata",is: function(s) {
            return false;
        },format: function(s, table, cell) {
            var c = table.config, p = (!c.parserMetadataName) ? "sortValue" : c.parserMetadataName;
            return $(cell).metadata()[p];
        },type: "numeric"});
    ts.addWidget({id: "zebra",format: function(table) {
            if (table.config.debug) {
                var time = new Date();
            }
            var $tr, row = -1, odd;
            $("tr:visible", table.tBodies[0]).each(function(i) {
                $tr = $(this);
                if (!$tr.hasClass(table.config.cssChildRow)) {
                    row++;
                }
                odd = (row % 2 == 0);
                $tr.removeClass(table.config.widgetZebra.css[odd ? 0 : 1]).addClass(table.config.widgetZebra.css[odd ? 1 : 0]);
            });
            if (table.config.debug) {
                $.tablesorter.benchmark("Applying Zebra widget", time);
            }
        }});
})(jQuery);
(function($) {
    $.titleAlert = function(text, settings) {
        if ($.titleAlert._running) {
            $.titleAlert.stop();
        }
        $.titleAlert._settings = settings = $.extend({}, $.titleAlert.defaults, settings);
        if (settings.requireBlur && $.titleAlert.hasFocus) {
            return;
        }
        $.titleAlert._running = true;
        $.titleAlert._initialText = document.title;
        document.title = text;
        var showingAlertTitle = true;
        $.titleAlert._intervalToken = setInterval(function() {
            if (!$.titleAlert._running) {
                return;
            }
            showingAlertTitle = !showingAlertTitle;
            document.title = (showingAlertTitle ? text : $.titleAlert._initialText);
        }, settings.interval);
        if (settings.duration > 0) {
            $.titleAlert._timeoutToken = setTimeout(function() {
                $.titleAlert.stop();
            }, settings.duration);
        }
    };
    $.titleAlert.defaults = {interval: 500,duration: 0,stopOnFocus: true,requireBlur: false};
    $.titleAlert.stop = function() {
        clearInterval($.titleAlert._intervalToken);
        clearTimeout($.titleAlert._timeoutToken);
        document.title = $.titleAlert._initialText;
        $.titleAlert._timeoutToken = null;
        $.titleAlert._intervalToken = null;
        $.titleAlert._initialText = null;
        $.titleAlert._running = false;
        $.titleAlert._settings = null;
    };
    $.titleAlert.hasFocus = true;
    $.titleAlert._running = false;
    $.titleAlert._intervalToken = null;
    $.titleAlert._timeoutToken = null;
    $.titleAlert._initialText = null;
    $.titleAlert._settings = null;
    $.titleAlert._focus = function() {
        $.titleAlert.hasFocus = true;
        if ($.titleAlert._running) {
            if ($.titleAlert._settings.stopOnFocus) {
                $.titleAlert.stop();
            }
        }
    };
    $.titleAlert._blur = function() {
        $.titleAlert.hasFocus = false;
    };
    if (
    /*@cc_on!@*/
    false) {
        document.onfocusin = $.titleAlert._focus;
        document.onfocusout = $.titleAlert._blur;
    } else {
        window.onfocus = $.titleAlert._focus;
        window.onblur = $.titleAlert._blur;
    }
})(jQuery);
(function($) {
    $.widget("ui.multidraggable", $.extend({}, $.ui.draggable.prototype, {_create: function() {
            if (this.options.helper == "original" && !(/^(?:r|a|f)/).test(this.element.css("position"))) {
                this.element[0].style.position = "relative";
            }
            (this.options.addClasses && this.element.addClass("ui-draggable"));
            (this.options.disabled && this.element.addClass("ui-draggable-disabled"));
            this._mouseInit();
            this.options.isMain = false;
        },destroy: function() {
            if (!this.element.data("multidraggable")) {
                return;
            }
            this.element.removeData("multidraggable").unbind(".draggable").removeClass("ui-draggable" + " ui-draggable-dragging" + " ui-draggable-disabled");
            this._mouseDestroy();
            return this;
        },_mouseCapture: function(event) {
            if (event.ctrlKey) {
                this.element.toggleClass("ui-multidraggable");
            }
            var o = this.options;
            if (this.helper || o.disabled || $(event.target).is(".ui-resizable-handle")) {
                return false;
            }
            this.handle = this._getHandle(event);
            if (!this.handle) {
                return false;
            }
            return true;
        },mouseStart: function(event, draggedOptions) {
            var o = this.options;
            if (this.element.hasClass("ui-multidraggable")) {
                this.options.draggedOptions = draggedOptions;
            }
            this.helper = this._createHelper(event);
            this._cacheHelperProportions();
            if ($.ui.ddmanager) {
                $.ui.ddmanager.current = this;
            }
            this._cacheMargins();
            this.cssPosition = this.helper.css("position");
            this.scrollParent = this.helper.scrollParent();
            this.offset = this.positionAbs = this.element.offset();
            this.offset = {top: this.offset.top - this.margins.top,left: this.offset.left - this.margins.left};
            $.extend(this.offset, {click: {left: event.pageX - this.offset.left,top: event.pageY - this.offset.top},parent: this._getParentOffset(),relative: this._getRelativeOffset()});
            this.originalPosition = this.position = this._generatePosition(event);
            this.originalPageX = event.pageX;
            this.originalPageY = event.pageY;
            (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));
            if (o.containment) {
                this._setContainment();
            }
            if (this._trigger("start", event) === false) {
                this._clear();
                return false;
            }
            this._cacheHelperProportions();
            if ($.ui.ddmanager && !o.dropBehaviour) {
                $.ui.ddmanager.prepareOffsets(this, event);
            }
            this.helper.addClass("ui-draggable-dragging");
            this.mouseDrag(event, true);
            return true;
        },_mouseStart: function(event) {
            var o = this.options;
            if (this.element.hasClass("ui-multidraggable")) {
                this.options.isMain = true;
                $(".ui-multidraggable").each(function() {
                    $(this).multidraggable("mouseStart", event, o);
                });
                return true;
            } else {
                this.mouseStart(event, o);
            }
        },mouseDrag: function(event, noPropagation) {
            this.position = this._generatePosition(event);
            this.positionAbs = this._convertPositionTo("absolute");
            if (!noPropagation) {
                var ui = this._uiHash();
                if (this._trigger("drag", event, ui) === false) {
                    this._mouseUp({});
                    return false;
                }
                this.position = ui.position;
            }
            if (this.element.hasClass("ui-multidraggable")) {
                if (!this.options.axis && !this.options.draggedOptions.axis || this.options.axis != "y" && this.options.draggedOptions.axis != "y") {
                    this.helper[0].style.left = this.position.left + "px";
                }
                if (!this.options.axis && !this.options.draggedOptions.axis || this.options.axis != "x" && this.options.draggedOptions.axis != "x") {
                    this.helper[0].style.top = this.position.top + "px";
                }
            } else {
                if (!this.options.axis || this.options.axis != "y") {
                    this.helper[0].style.left = this.position.left + "px";
                }
                if (!this.options.axis || this.options.axis != "x") {
                    this.helper[0].style.top = this.position.top + "px";
                }
            }
            if ($.ui.ddmanager) {
                $.ui.ddmanager.drag(this, event);
            }
            return false;
        },_mouseDrag: function(event, noPropagation) {
            if (this.element.hasClass("ui-multidraggable")) {
                $(".ui-multidraggable").each(function() {
                    $(this).multidraggable("mouseDrag", event, noPropagation);
                });
                return false;
            } else {
                this.mouseDrag(event, noPropagation, this.options);
                return false;
            }
        },mouseStop: function(event) {
            var dropped = false;
            if ($.ui.ddmanager && !this.options.dropBehaviour) {
                dropped = $.ui.ddmanager.drop(this, event);
            }
            if (this.dropped) {
                dropped = this.dropped;
                this.dropped = false;
            }
            if (!this.element[0] || !this.element[0].parentNode) {
                return false;
            }
            if ((this.options.revert == "invalid" && !dropped) || (this.options.revert == "valid" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {
                var self = this;
                $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                    if (self._trigger("stop", event) !== false) {
                        self._clear();
                    }
                });
            } else {
                if (this._trigger("stop", event) !== false) {
                    this._clear();
                }
            }
            return false;
        },_mouseStop: function(event) {
            if (this.element.hasClass("ui-multidraggable")) {
                $(".ui-multidraggable").each(function() {
                    $(this).multidraggable("mouseStop", event);
                });
                return false;
            } else {
                this.mouseStop(event);
                return false;
            }
        },cancel: function() {
            if (this.helper.is(".ui-draggable-dragging")) {
                this._mouseUp({});
            } else {
                this._clear();
            }
            return this;
        },_clear: function() {
            this.helper.removeClass("ui-draggable-dragging");
            if (this.helper[0] != this.element[0] && !this.cancelHelperRemoval) {
                this.helper.remove();
            }
            this.options.isMain = false;
            this.helper = null;
            this.cancelHelperRemoval = false;
        },plugins: {}}));
    $.extend($.ui.multidraggable, {version: "1.8.8",widgetEventPrefix: "drag",options: {addClasses: true,appendTo: "parent",axis: false,cancel: ":input,option",connectToSortable: false,containment: false,cursor: "auto",cursorAt: false,delay: 0,distance: 1,grid: false,handle: false,helper: "original",iframeFix: false,opacity: false,refreshPositions: false,revert: false,revertDuration: 500,scope: "default",scroll: true,scrollSensitivity: 20,scrollSpeed: 20,snap: false,snapMode: "both",snapTolerance: 20,stack: false,zIndex: false}});
    $.ui.plugin.add("multidraggable", "connectToSortable", {start: function(event, ui) {
            var inst = $(this).data("multidraggable"), o = inst.options, uiSortable = $.extend({}, ui, {item: inst.element});
            inst.sortables = [];
            $(o.connectToSortable).each(function() {
                var sortable = $.data(this, "sortable");
                if (sortable && !sortable.options.disabled) {
                    inst.sortables.push({instance: sortable,shouldRevert: sortable.options.revert});
                    sortable._refreshItems();
                    sortable._trigger("activate", event, uiSortable);
                }
            });
        },stop: function(event, ui) {
            var inst = $(this).data("multidraggable"), uiSortable = $.extend({}, ui, {item: inst.element});
            $.each(inst.sortables, function() {
                if (this.instance.isOver) {
                    this.instance.isOver = 0;
                    inst.cancelHelperRemoval = true;
                    this.instance.cancelHelperRemoval = false;
                    if (this.shouldRevert) {
                        this.instance.options.revert = true;
                    }
                    this.instance._mouseStop(event);
                    this.instance.options.helper = this.instance.options._helper;
                    if (inst.options.helper == "original") {
                        this.instance.currentItem.css({top: "auto",left: "auto"});
                    }
                } else {
                    this.instance.cancelHelperRemoval = false;
                    this.instance._trigger("deactivate", event, uiSortable);
                }
            });
        },drag: function(event, ui) {
            var inst = $(this).data("multidraggable"), self = this;
            var checkPos = function(o) {
                var dyClick = this.offset.click.top, dxClick = this.offset.click.left;
                var helperTop = this.positionAbs.top, helperLeft = this.positionAbs.left;
                var itemHeight = o.height, itemWidth = o.width;
                var itemTop = o.top, itemLeft = o.left;
                return $.ui.isOver(helperTop + dyClick, helperLeft + dxClick, itemTop, itemLeft, itemHeight, itemWidth);
            };
            $.each(inst.sortables, function(i) {
                this.instance.positionAbs = inst.positionAbs;
                this.instance.helperProportions = inst.helperProportions;
                this.instance.offset.click = inst.offset.click;
                if (this.instance._intersectsWith(this.instance.containerCache)) {
                    if (!this.instance.isOver) {
                        this.instance.isOver = 1;
                        this.instance.currentItem = $(self).clone().appendTo(this.instance.element).data("sortable-item", true);
                        this.instance.options._helper = this.instance.options.helper;
                        this.instance.options.helper = function() {
                            return ui.helper[0];
                        };
                        event.target = this.instance.currentItem[0];
                        this.instance._mouseCapture(event, true);
                        this.instance._mouseStart(event, true, true);
                        this.instance.offset.click.top = inst.offset.click.top;
                        this.instance.offset.click.left = inst.offset.click.left;
                        this.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;
                        this.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;
                        inst._trigger("toSortable", event);
                        inst.dropped = this.instance.element;
                        inst.currentItem = inst.element;
                        this.instance.fromOutside = inst;
                    }
                    if (this.instance.currentItem) {
                        this.instance._mouseDrag(event);
                    }
                } else {
                    if (this.instance.isOver) {
                        this.instance.isOver = 0;
                        this.instance.cancelHelperRemoval = true;
                        this.instance.options.revert = false;
                        this.instance._trigger("out", event, this.instance._uiHash(this.instance));
                        this.instance._mouseStop(event, true);
                        this.instance.options.helper = this.instance.options._helper;
                        this.instance.currentItem.remove();
                        if (this.instance.placeholder) {
                            this.instance.placeholder.remove();
                        }
                        inst._trigger("fromSortable", event);
                        inst.dropped = false;
                    }
                }
            });
        }});
    $.ui.plugin.add("multidraggable", "cursor", {start: function(event, ui) {
            if ($(this).hasClass("ui-multidraggable")) {
                if ($(this).data("multidraggable").options.isMain == false) {
                    return;
                }
            }
            var t = $("body"), o = $(this).data("multidraggable").options;
            if (t.css("cursor")) {
                o._cursor = t.css("cursor");
            }
            t.css("cursor", o.cursor);
        },stop: function(event, ui) {
            if ($(this).hasClass("ui-multidraggable")) {
                if ($(this).data("multidraggable").options.isMain == false) {
                    return;
                }
            }
            var o = $(this).data("multidraggable").options;
            if (o._cursor) {
                $("body").css("cursor", o._cursor);
            }
        }});
    $.ui.plugin.add("multidraggable", "iframeFix", {start: function(event, ui) {
            var o = $(this).data("multidraggable").options;
            $(o.iframeFix === true ? "iframe" : o.iframeFix).each(function() {
                $('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width: this.offsetWidth + "px",height: this.offsetHeight + "px",position: "absolute",opacity: "0.001",zIndex: 1000}).css($(this).offset()).appendTo("body");
            });
        },stop: function(event, ui) {
            $("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            });
        }});
    $.ui.plugin.add("multidraggable", "opacity", {start: function(event, ui) {
            var t = $(ui.helper), o = $(this).data("multidraggable").options;
            if (t.css("opacity")) {
                o._opacity = t.css("opacity");
            }
            t.css("opacity", o.opacity);
        },stop: function(event, ui) {
            var o = $(this).data("multidraggable").options;
            if (o._opacity) {
                $(ui.helper).css("opacity", o._opacity);
            }
        }});
    $.ui.plugin.add("multidraggable", "scroll", {start: function(event, ui) {
            var i = $(this).data("multidraggable");
            if (i.scrollParent[0] != document && i.scrollParent[0].tagName != "HTML") {
                i.overflowOffset = i.scrollParent.offset();
            }
        },drag: function(event, ui) {
            var i = $(this).data("multidraggable"), o = i.options, scrolled = false;
            if (i.scrollParent[0] != document && i.scrollParent[0].tagName != "HTML") {
                if (!o.axis || o.axis != "x") {
                    if ((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
                        i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;
                    } else {
                        if (event.pageY - i.overflowOffset.top < o.scrollSensitivity) {
                            i.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;
                        }
                    }
                }
                if (!o.axis || o.axis != "y") {
                    if ((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
                        i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;
                    } else {
                        if (event.pageX - i.overflowOffset.left < o.scrollSensitivity) {
                            i.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;
                        }
                    }
                }
            } else {
                if (!o.axis || o.axis != "x") {
                    if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
                        scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
                    } else {
                        if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
                        }
                    }
                }
                if (!o.axis || o.axis != "y") {
                    if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
                        scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
                    } else {
                        if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
                            scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
                        }
                    }
                }
            }
            if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
                $.ui.ddmanager.prepareOffsets(i, event);
            }
        }});
    $.ui.plugin.add("multidraggable", "snap", {start: function(event, ui) {
            var i = $(this).data("multidraggable"), o = i.options;
            i.snapElements = [];
            $(o.snap.constructor != String ? (o.snap.items || ":data(draggable)") : o.snap).each(function() {
                var $t = $(this);
                var $o = $t.offset();
                if (this != i.element[0]) {
                    i.snapElements.push({item: this,width: $t.outerWidth(),height: $t.outerHeight(),top: $o.top,left: $o.left});
                }
            });
        },drag: function(event, ui) {
            var inst = $(this).data("multidraggable"), o = inst.options;
            var d = o.snapTolerance;
            var x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width, y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;
            for (var i = inst.snapElements.length - 1; i >= 0; i--) {
                var l = inst.snapElements[i].left, r = l + inst.snapElements[i].width, t = inst.snapElements[i].top, b = t + inst.snapElements[i].height;
                if (!((l - d < x1 && x1 < r + d && t - d < y1 && y1 < b + d) || (l - d < x1 && x1 < r + d && t - d < y2 && y2 < b + d) || (l - d < x2 && x2 < r + d && t - d < y1 && y1 < b + d) || (l - d < x2 && x2 < r + d && t - d < y2 && y2 < b + d))) {
                    if (inst.snapElements[i].snapping) {
                        (inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), {snapItem: inst.snapElements[i].item})));
                    }
                    inst.snapElements[i].snapping = false;
                    continue;
                }
                if (o.snapMode != "inner") {
                    var ts = Math.abs(t - y2) <= d;
                    var bs = Math.abs(b - y1) <= d;
                    var ls = Math.abs(l - x2) <= d;
                    var rs = Math.abs(r - x1) <= d;
                    if (ts) {
                        ui.position.top = inst._convertPositionTo("relative", {top: t - inst.helperProportions.height,left: 0}).top - inst.margins.top;
                    }
                    if (bs) {
                        ui.position.top = inst._convertPositionTo("relative", {top: b,left: 0}).top - inst.margins.top;
                    }
                    if (ls) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: l - inst.helperProportions.width}).left - inst.margins.left;
                    }
                    if (rs) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: r}).left - inst.margins.left;
                    }
                }
                var first = (ts || bs || ls || rs);
                if (o.snapMode != "outer") {
                    var ts = Math.abs(t - y1) <= d;
                    var bs = Math.abs(b - y2) <= d;
                    var ls = Math.abs(l - x1) <= d;
                    var rs = Math.abs(r - x2) <= d;
                    if (ts) {
                        ui.position.top = inst._convertPositionTo("relative", {top: t,left: 0}).top - inst.margins.top;
                    }
                    if (bs) {
                        ui.position.top = inst._convertPositionTo("relative", {top: b - inst.helperProportions.height,left: 0}).top - inst.margins.top;
                    }
                    if (ls) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: l}).left - inst.margins.left;
                    }
                    if (rs) {
                        ui.position.left = inst._convertPositionTo("relative", {top: 0,left: r - inst.helperProportions.width}).left - inst.margins.left;
                    }
                }
                if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {
                    (inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), {snapItem: inst.snapElements[i].item})));
                }
                inst.snapElements[i].snapping = (ts || bs || ls || rs || first);
            }
        }});
    $.ui.plugin.add("multidraggable", "stack", {start: function(event, ui) {
            var o = $(this).data("multidraggable").options;
            var group = $.makeArray($(o.stack)).sort(function(a, b) {
                return (parseInt($(a).css("zIndex"), 10) || 0) - (parseInt($(b).css("zIndex"), 10) || 0);
            });
            if (!group.length) {
                return;
            }
            var min = parseInt(group[0].style.zIndex) || 0;
            $(group).each(function(i) {
                this.style.zIndex = min + i;
            });
            if ($(this).hasClass("ui-multidraggable")) {
                if ($(this).data("multidraggable").options.isMain == true) {
                    this[0].style.zIndex = o.stack.min + group.length;
                }
            } else {
                this[0].style.zIndex = o.stack.min + group.length;
            }
        }});
    $.ui.plugin.add("multidraggable", "zIndex", {start: function(event, ui) {
            var t = $(ui.helper), o = $(this).data("multidraggable").options;
            if (t.css("zIndex")) {
                o._zIndex = t.css("zIndex");
            }
            t.css("zIndex", o.zIndex);
        },stop: function(event, ui) {
            var o = $(this).data("multidraggable").options;
            if (o._zIndex) {
                $(ui.helper).css("zIndex", o._zIndex);
            }
        }});
})(jQuery);
var jscolor = {dir: "/public/base/shared/",bindClass: "jscolor-colorpicker",binding: true,preloading: true,install: function() {
        jscolor.addEvent(window, "load", jscolor.init);
    },init: function() {
        if (jscolor.binding) {
            jscolor.bind();
        }
        if (jscolor.preloading) {
            jscolor.preload();
        }
    },getDir: function() {
        if (!jscolor.dir) {
            var detected = jscolor.detectDir();
            jscolor.dir = detected !== false ? detected : "jscolor/";
        }
        return jscolor.dir;
    },detectDir: function() {
        var base = location.href;
        var e = document.getElementsByTagName("base");
        for (var i = 0; i < e.length; i += 1) {
            if (e[i].href) {
                base = e[i].href;
            }
        }
        var e = document.getElementsByTagName("script");
        for (var i = 0; i < e.length; i += 1) {
            if (e[i].src && /(^|\/)jscolor\.js([?#].*)?$/i.test(e[i].src)) {
                var src = new jscolor.URI(e[i].src);
                var srcAbs = src.toAbsolute(base);
                srcAbs.path = srcAbs.path.replace(/[^\/]+$/, "");
                srcAbs.query = null;
                srcAbs.fragment = null;
                return srcAbs.toString();
            }
        }
        return false;
    },bind: function() {
        var matchClass = new RegExp("(^|\\s)(" + jscolor.bindClass + ")\\s*(\\{[^}]*\\})?", "i");
        var e = document.getElementsByTagName("input");
        for (var i = 0; i < e.length; i += 1) {
            var m;
            if (!e[i].color && e[i].className && (m = e[i].className.match(matchClass))) {
                var prop = {};
                if (m[3]) {
                    try {
                        eval("prop=" + m[3]);
                    } catch (eInvalidProp) {
                    }
                }
                e[i].color = new jscolor.color(e[i], prop);
            }
        }
    },preload: function() {
        for (var fn in jscolor.imgRequire) {
            if (jscolor.imgRequire.hasOwnProperty(fn)) {
                jscolor.loadImage(fn);
            }
        }
    },images: {pad: [181, 101],sld: [16, 101],cross: [15, 15],arrow: [7, 11]},imgRequire: {},imgLoaded: {},requireImage: function(filename) {
        jscolor.imgRequire[filename] = true;
    },loadImage: function(filename) {
        if (!jscolor.imgLoaded[filename]) {
            jscolor.imgLoaded[filename] = new Image();
            jscolor.imgLoaded[filename].src = jscolor.getDir() + filename;
        }
    },fetchElement: function(mixed) {
        return typeof mixed === "string" ? document.getElementById(mixed) : mixed;
    },addEvent: function(el, evnt, func) {
        if (el.addEventListener) {
            el.addEventListener(evnt, func, false);
        } else {
            if (el.attachEvent) {
                el.attachEvent("on" + evnt, func);
            }
        }
    },fireEvent: function(el, evnt) {
        if (!el) {
            return;
        }
        if (document.createEvent) {
            var ev = document.createEvent("HTMLEvents");
            ev.initEvent(evnt, true, true);
            el.dispatchEvent(ev);
        } else {
            if (document.createEventObject) {
                var ev = document.createEventObject();
                el.fireEvent("on" + evnt, ev);
            } else {
                if (el["on" + evnt]) {
                    el["on" + evnt]();
                }
            }
        }
    },getElementPos: function(e) {
        var e1 = e, e2 = e;
        var x = 0, y = 0;
        if (e1.offsetParent) {
            do {
                x += e1.offsetLeft;
                y += e1.offsetTop;
            } while (e1 = e1.offsetParent);
        }
        while ((e2 = e2.parentNode) && e2.nodeName.toUpperCase() !== "BODY") {
            x -= e2.scrollLeft;
            y -= e2.scrollTop;
        }
        return [x, y];
    },getElementSize: function(e) {
        return [e.offsetWidth, e.offsetHeight];
    },getRelMousePos: function(e) {
        var x = 0, y = 0;
        if (!e) {
            e = window.event;
        }
        if (typeof e.offsetX === "number") {
            x = e.offsetX;
            y = e.offsetY;
        } else {
            if (typeof e.layerX === "number") {
                x = e.layerX;
                y = e.layerY;
            }
        }
        return {x: x,y: y};
    },getViewPos: function() {
        if (typeof window.pageYOffset === "number") {
            return [window.pageXOffset, window.pageYOffset];
        } else {
            if (document.body && (document.body.scrollLeft || document.body.scrollTop)) {
                return [document.body.scrollLeft, document.body.scrollTop];
            } else {
                if (document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {
                    return [document.documentElement.scrollLeft, document.documentElement.scrollTop];
                } else {
                    return [0, 0];
                }
            }
        }
    },getViewSize: function() {
        if (typeof window.innerWidth === "number") {
            return [window.innerWidth, window.innerHeight];
        } else {
            if (document.body && (document.body.clientWidth || document.body.clientHeight)) {
                return [document.body.clientWidth, document.body.clientHeight];
            } else {
                if (document.documentElement && (document.documentElement.clientWidth || document.documentElement.clientHeight)) {
                    return [document.documentElement.clientWidth, document.documentElement.clientHeight];
                } else {
                    return [0, 0];
                }
            }
        }
    },URI: function(uri) {
        this.scheme = null;
        this.authority = null;
        this.path = "";
        this.query = null;
        this.fragment = null;
        this.parse = function(uri) {
            var m = uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);
            this.scheme = m[3] ? m[2] : null;
            this.authority = m[5] ? m[6] : null;
            this.path = m[7];
            this.query = m[9] ? m[10] : null;
            this.fragment = m[12] ? m[13] : null;
            return this;
        };
        this.toString = function() {
            var result = "";
            if (this.scheme !== null) {
                result = result + this.scheme + ":";
            }
            if (this.authority !== null) {
                result = result + "//" + this.authority;
            }
            if (this.path !== null) {
                result = result + this.path;
            }
            if (this.query !== null) {
                result = result + "?" + this.query;
            }
            if (this.fragment !== null) {
                result = result + "#" + this.fragment;
            }
            return result;
        };
        this.toAbsolute = function(base) {
            var base = new jscolor.URI(base);
            var r = this;
            var t = new jscolor.URI;
            if (base.scheme === null) {
                return false;
            }
            if (r.scheme !== null && r.scheme.toLowerCase() === base.scheme.toLowerCase()) {
                r.scheme = null;
            }
            if (r.scheme !== null) {
                t.scheme = r.scheme;
                t.authority = r.authority;
                t.path = removeDotSegments(r.path);
                t.query = r.query;
            } else {
                if (r.authority !== null) {
                    t.authority = r.authority;
                    t.path = removeDotSegments(r.path);
                    t.query = r.query;
                } else {
                    if (r.path === "") {
                        t.path = base.path;
                        if (r.query !== null) {
                            t.query = r.query;
                        } else {
                            t.query = base.query;
                        }
                    } else {
                        if (r.path.substr(0, 1) === "/") {
                            t.path = removeDotSegments(r.path);
                        } else {
                            if (base.authority !== null && base.path === "") {
                                t.path = "/" + r.path;
                            } else {
                                t.path = base.path.replace(/[^\/]+$/, "") + r.path;
                            }
                            t.path = removeDotSegments(t.path);
                        }
                        t.query = r.query;
                    }
                    t.authority = base.authority;
                }
                t.scheme = base.scheme;
            }
            t.fragment = r.fragment;
            return t;
        };
        function removeDotSegments(path) {
            var out = "";
            while (path) {
                if (path.substr(0, 3) === "../" || path.substr(0, 2) === "./") {
                    path = path.replace(/^\.+/, "").substr(1);
                } else {
                    if (path.substr(0, 3) === "/./" || path === "/.") {
                        path = "/" + path.substr(3);
                    } else {
                        if (path.substr(0, 4) === "/../" || path === "/..") {
                            path = "/" + path.substr(4);
                            out = out.replace(/\/?[^\/]*$/, "");
                        } else {
                            if (path === "." || path === "..") {
                                path = "";
                            } else {
                                var rm = path.match(/^\/?[^\/]*/)[0];
                                path = path.substr(rm.length);
                                out = out + rm;
                            }
                        }
                    }
                }
            }
            return out;
        }
        if (uri) {
            this.parse(uri);
        }
    },color: function(target, prop) {
        this.required = true;
        this.adjust = true;
        this.hash = false;
        this.caps = true;
        this.slider = true;
        this.valueElement = target;
        this.styleElement = target;
        this.hsv = [0, 0, 1];
        this.rgb = [1, 1, 1];
        this.pickerOnfocus = true;
        this.pickerMode = "HSV";
        this.pickerPosition = "bottom";
        this.pickerButtonHeight = 20;
        this.pickerClosable = false;
        this.pickerCloseText = "Close";
        this.pickerButtonColor = "ButtonText";
        this.pickerFace = 10;
        this.pickerFaceColor = "ThreeDFace";
        this.pickerBorder = 1;
        this.pickerBorderColor = "ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";
        this.pickerInset = 1;
        this.pickerInsetColor = "ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";
        this.pickerZIndex = 10000;
        for (var p in prop) {
            if (prop.hasOwnProperty(p)) {
                this[p] = prop[p];
            }
        }
        this.hidePicker = function() {
            if (isPickerOwner()) {
                removePicker();
            }
        };
        this.showPicker = function() {
            if (!isPickerOwner()) {
                var tp = jscolor.getElementPos(target);
                var ts = jscolor.getElementSize(target);
                var vp = jscolor.getViewPos();
                var vs = jscolor.getViewSize();
                var ps = getPickerDims(this);
                var a, b, c;
                switch (this.pickerPosition.toLowerCase()) {
                    case "left":
                        a = 1;
                        b = 0;
                        c = -1;
                        break;
                    case "right":
                        a = 1;
                        b = 0;
                        c = 1;
                        break;
                    case "top":
                        a = 0;
                        b = 1;
                        c = -1;
                        break;
                    default:
                        a = 0;
                        b = 1;
                        c = 1;
                        break;
                }
                var l = (ts[b] + ps[b]) / 2;
                var pp = [-vp[a] + tp[a] + ps[a] > vs[a] ? (-vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a]) : tp[a], -vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ? (-vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c) : (tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c)];
                drawPicker(pp[a], pp[b]);
            }
        };
        this.importColor = function() {
            if (!valueElement) {
                this.exportColor();
            } else {
                if (!this.adjust) {
                    if (!this.fromString(valueElement.value, leaveValue)) {
                        styleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;
                        styleElement.style.color = styleElement.jscStyle.color;
                        this.exportColor(leaveValue | leaveStyle);
                    }
                } else {
                    if (!this.required && /^\s*$/.test(valueElement.value)) {
                        valueElement.value = "";
                        styleElement.style.backgroundColor = styleElement.jscStyle.backgroundColor;
                        styleElement.style.color = styleElement.jscStyle.color;
                        this.exportColor(leaveValue | leaveStyle);
                    } else {
                        if (this.fromString(valueElement.value)) {
                        } else {
                            this.exportColor();
                        }
                    }
                }
            }
        };
        this.exportColor = function(flags) {
            if (!(flags & leaveValue) && valueElement) {
                var value = this.toString();
                if (this.caps) {
                    value = value.toUpperCase();
                }
                if (this.hash) {
                    value = "#" + value;
                }
                valueElement.value = value;
            }
            if (!(flags & leaveStyle) && styleElement) {
                styleElement.style.backgroundColor = "#" + this.toString();
                styleElement.style.color = 0.213 * this.rgb[0] + 0.715 * this.rgb[1] + 0.072 * this.rgb[2] < 0.5 ? "#FFF" : "#000";
            }
            if (!(flags & leavePad) && isPickerOwner()) {
                redrawPad();
            }
            if (!(flags & leaveSld) && isPickerOwner()) {
                redrawSld();
            }
        };
        this.fromHSV = function(h, s, v, flags) {
            h < 0 && (h = 0) || h > 6 && (h = 6);
            s < 0 && (s = 0) || s > 1 && (s = 1);
            v < 0 && (v = 0) || v > 1 && (v = 1);
            this.rgb = HSV_RGB(h === null ? this.hsv[0] : (this.hsv[0] = h), s === null ? this.hsv[1] : (this.hsv[1] = s), v === null ? this.hsv[2] : (this.hsv[2] = v));
            this.exportColor(flags);
        };
        this.fromRGB = function(r, g, b, flags) {
            r < 0 && (r = 0) || r > 1 && (r = 1);
            g < 0 && (g = 0) || g > 1 && (g = 1);
            b < 0 && (b = 0) || b > 1 && (b = 1);
            var hsv = RGB_HSV(r === null ? this.rgb[0] : (this.rgb[0] = r), g === null ? this.rgb[1] : (this.rgb[1] = g), b === null ? this.rgb[2] : (this.rgb[2] = b));
            if (hsv[0] !== null) {
                this.hsv[0] = hsv[0];
            }
            if (hsv[2] !== 0) {
                this.hsv[1] = hsv[1];
            }
            this.hsv[2] = hsv[2];
            this.exportColor(flags);
        };
        this.fromString = function(hex, flags) {
            var m = hex.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);
            if (!m) {
                return false;
            } else {
                if (m[1].length === 6) {
                    this.fromRGB(parseInt(m[1].substr(0, 2), 16) / 255, parseInt(m[1].substr(2, 2), 16) / 255, parseInt(m[1].substr(4, 2), 16) / 255, flags);
                } else {
                    this.fromRGB(parseInt(m[1].charAt(0) + m[1].charAt(0), 16) / 255, parseInt(m[1].charAt(1) + m[1].charAt(1), 16) / 255, parseInt(m[1].charAt(2) + m[1].charAt(2), 16) / 255, flags);
                }
                return true;
            }
        };
        this.toString = function() {
            return ((256 | Math.round(255 * this.rgb[0])).toString(16).substr(1) + (256 | Math.round(255 * this.rgb[1])).toString(16).substr(1) + (256 | Math.round(255 * this.rgb[2])).toString(16).substr(1));
        };
        function RGB_HSV(r, g, b) {
            var n = Math.min(Math.min(r, g), b);
            var v = Math.max(Math.max(r, g), b);
            var m = v - n;
            if (m === 0) {
                return [null, 0, v];
            }
            var h = r === n ? 3 + (b - g) / m : (g === n ? 5 + (r - b) / m : 1 + (g - r) / m);
            return [h === 6 ? 0 : h, m / v, v];
        }
        function HSV_RGB(h, s, v) {
            if (h === null) {
                return [v, v, v];
            }
            var i = Math.floor(h);
            var f = i % 2 ? h - i : 1 - (h - i);
            var m = v * (1 - s);
            var n = v * (1 - s * f);
            switch (i) {
                case 6:
                case 0:
                    return [v, n, m];
                case 1:
                    return [n, v, m];
                case 2:
                    return [m, v, n];
                case 3:
                    return [m, n, v];
                case 4:
                    return [n, m, v];
                case 5:
                    return [v, m, n];
            }
        }
        function removePicker() {
            delete jscolor.picker.owner;
            document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB);
        }
        function drawPicker(x, y) {
            if (!jscolor.picker) {
                jscolor.picker = {box: document.createElement("div"),boxB: document.createElement("div"),pad: document.createElement("div"),padB: document.createElement("div"),padM: document.createElement("div"),sld: document.createElement("div"),sldB: document.createElement("div"),sldM: document.createElement("div"),btn: document.createElement("div"),btnS: document.createElement("span"),btnT: document.createTextNode(THIS.pickerCloseText)};
                for (var i = 0, segSize = 4; i < jscolor.images.sld[1]; i += segSize) {
                    var seg = document.createElement("div");
                    seg.style.height = segSize + "px";
                    seg.style.fontSize = "1px";
                    seg.style.lineHeight = "0";
                    jscolor.picker.sld.appendChild(seg);
                }
                jscolor.picker.sldB.appendChild(jscolor.picker.sld);
                jscolor.picker.box.appendChild(jscolor.picker.sldB);
                jscolor.picker.box.appendChild(jscolor.picker.sldM);
                jscolor.picker.padB.appendChild(jscolor.picker.pad);
                jscolor.picker.box.appendChild(jscolor.picker.padB);
                jscolor.picker.box.appendChild(jscolor.picker.padM);
                jscolor.picker.btnS.appendChild(jscolor.picker.btnT);
                jscolor.picker.btn.appendChild(jscolor.picker.btnS);
                jscolor.picker.box.appendChild(jscolor.picker.btn);
                jscolor.picker.boxB.appendChild(jscolor.picker.box);
            }
            var p = jscolor.picker;
            p.box.onmouseup = p.box.onmouseout = function() {
                target.focus();
            };
            p.box.onmousedown = function() {
                abortBlur = true;
            };
            p.box.onmousemove = function(e) {
                if (holdPad || holdSld) {
                    holdPad && setPad(e);
                    holdSld && setSld(e);
                    if (document.selection) {
                        document.selection.empty();
                    } else {
                        if (window.getSelection) {
                            window.getSelection().removeAllRanges();
                        }
                    }
                    jscolor.fireEvent(valueElement, "change");
                }
            };
            p.padM.onmouseup = p.padM.onmouseout = function() {
                if (holdPad) {
                    holdPad = false;
                    jscolor.fireEvent(valueElement, "change");
                }
            };
            p.padM.onmousedown = function(e) {
                holdPad = true;
                setPad(e);
                jscolor.fireEvent(valueElement, "change");
            };
            p.sldM.onmouseup = p.sldM.onmouseout = function() {
                if (holdSld) {
                    holdSld = false;
                    jscolor.fireEvent(valueElement, "change");
                }
            };
            p.sldM.onmousedown = function(e) {
                holdSld = true;
                setSld(e);
                jscolor.fireEvent(valueElement, "change");
            };
            var dims = getPickerDims(THIS);
            p.box.style.width = dims[0] + "px";
            p.box.style.height = dims[1] + "px";
            p.box.className = "keep-active-badgepart";
            p.boxB.style.position = "absolute";
            p.boxB.style.clear = "both";
            p.boxB.style.left = x + "px";
            p.boxB.style.top = y + "px";
            p.boxB.style.zIndex = THIS.pickerZIndex;
            p.boxB.style.border = THIS.pickerBorder + "px solid";
            p.boxB.style.borderColor = THIS.pickerBorderColor;
            p.boxB.style.background = THIS.pickerFaceColor;
            p.boxB.className = "keep-active-badgepart";
            p.pad.style.width = jscolor.images.pad[0] + "px";
            p.pad.style.height = jscolor.images.pad[1] + "px";
            p.pad.className = "keep-active-badgepart";
            p.padB.style.position = "absolute";
            p.padB.style.left = THIS.pickerFace + "px";
            p.padB.style.top = THIS.pickerFace + "px";
            p.padB.style.border = THIS.pickerInset + "px solid";
            p.padB.style.borderColor = THIS.pickerInsetColor;
            p.padB.className = "keep-active-badgepart";
            p.padM.style.position = "absolute";
            p.padM.style.left = "0";
            p.padM.style.top = "0";
            p.padM.style.width = THIS.pickerFace + 2 * THIS.pickerInset + jscolor.images.pad[0] + jscolor.images.arrow[0] + "px";
            p.padM.style.height = p.box.style.height;
            p.padM.style.cursor = "crosshair";
            p.padM.className = "keep-active-badgepart";
            p.sld.style.overflow = "hidden";
            p.sld.style.width = jscolor.images.sld[0] + "px";
            p.sld.style.height = jscolor.images.sld[1] + "px";
            p.sld.className = "keep-active-badgepart";
            p.sldB.style.display = THIS.slider ? "block" : "none";
            p.sldB.style.position = "absolute";
            p.sldB.style.right = THIS.pickerFace + "px";
            p.sldB.style.top = THIS.pickerFace + "px";
            p.sldB.style.border = THIS.pickerInset + "px solid";
            p.sldB.style.borderColor = THIS.pickerInsetColor;
            p.sldB.className = "keep-active-badgepart";
            p.sldM.style.display = THIS.slider ? "block" : "none";
            p.sldM.style.position = "absolute";
            p.sldM.style.right = "0";
            p.sldM.style.top = "0";
            p.sldM.style.width = jscolor.images.sld[0] + jscolor.images.arrow[0] + THIS.pickerFace + 2 * THIS.pickerInset + "px";
            p.sldM.style.height = p.box.style.height;
            p.sldM.className = "keep-active-badgepart";
            try {
                p.sldM.style.cursor = "pointer";
            } catch (eOldIE) {
                p.sldM.style.cursor = "hand";
            }
            function setBtnBorder() {
                var insetColors = THIS.pickerInsetColor.split(/\s+/);
                var pickerOutsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + " " + insetColors[0] + " " + insetColors[0] + " " + insetColors[1];
                p.btn.style.borderColor = pickerOutsetColor;
            }
            p.btn.style.display = THIS.pickerClosable ? "block" : "none";
            p.btn.style.position = "absolute";
            p.btn.style.left = THIS.pickerFace + "px";
            p.btn.style.bottom = THIS.pickerFace + "px";
            p.btn.style.padding = "0 15px";
            p.btn.style.height = "18px";
            p.btn.style.border = THIS.pickerInset + "px solid";
            setBtnBorder();
            p.btn.style.color = THIS.pickerButtonColor;
            p.btn.style.font = "12px sans-serif";
            p.btn.style.textAlign = "center";
            p.btn.className = "keep-active-badgepart";
            try {
                p.btn.style.cursor = "pointer";
            } catch (eOldIE) {
                p.btn.style.cursor = "hand";
            }
            p.btn.onmousedown = function() {
                THIS.hidePicker();
            };
            p.btnS.style.lineHeight = p.btn.style.height;
            switch (modeID) {
                case 0:
                    var padImg = "hs.png";
                    break;
                case 1:
                    var padImg = "hv.png";
                    break;
            }
            p.padM.style.backgroundImage = "url('" + jscolor.getDir() + "cross.gif')";
            p.padM.style.backgroundRepeat = "no-repeat";
            p.sldM.style.backgroundImage = "url('" + jscolor.getDir() + "arrow.gif')";
            p.sldM.style.backgroundRepeat = "no-repeat";
            p.pad.style.backgroundImage = "url('" + jscolor.getDir() + padImg + "')";
            p.pad.style.backgroundRepeat = "no-repeat";
            p.pad.style.backgroundPosition = "0 0";
            redrawPad();
            redrawSld();
            jscolor.picker.owner = THIS;
            document.getElementsByTagName("body")[0].appendChild(p.boxB);
        }
        function getPickerDims(o) {
            var dims = [2 * o.pickerInset + 2 * o.pickerFace + jscolor.images.pad[0] + (o.slider ? 2 * o.pickerInset + 2 * jscolor.images.arrow[0] + jscolor.images.sld[0] : 0), o.pickerClosable ? 4 * o.pickerInset + 3 * o.pickerFace + jscolor.images.pad[1] + o.pickerButtonHeight : 2 * o.pickerInset + 2 * o.pickerFace + jscolor.images.pad[1]];
            return dims;
        }
        function redrawPad() {
            switch (modeID) {
                case 0:
                    var yComponent = 1;
                    break;
                case 1:
                    var yComponent = 2;
                    break;
            }
            var x = Math.round((THIS.hsv[0] / 6) * (jscolor.images.pad[0] - 1));
            var y = Math.round((1 - THIS.hsv[yComponent]) * (jscolor.images.pad[1] - 1));
            jscolor.picker.padM.style.backgroundPosition = (THIS.pickerFace + THIS.pickerInset + x - Math.floor(jscolor.images.cross[0] / 2)) + "px " + (THIS.pickerFace + THIS.pickerInset + y - Math.floor(jscolor.images.cross[1] / 2)) + "px";
            var seg = jscolor.picker.sld.childNodes;
            switch (modeID) {
                case 0:
                    var rgb = HSV_RGB(THIS.hsv[0], THIS.hsv[1], 1);
                    for (var i = 0; i < seg.length; i += 1) {
                        seg[i].style.backgroundColor = "rgb(" + (rgb[0] * (1 - i / seg.length) * 100) + "%," + (rgb[1] * (1 - i / seg.length) * 100) + "%," + (rgb[2] * (1 - i / seg.length) * 100) + "%)";
                    }
                    break;
                case 1:
                    var rgb, s, c = [THIS.hsv[2], 0, 0];
                    var i = Math.floor(THIS.hsv[0]);
                    var f = i % 2 ? THIS.hsv[0] - i : 1 - (THIS.hsv[0] - i);
                    switch (i) {
                        case 6:
                        case 0:
                            rgb = [0, 1, 2];
                            break;
                        case 1:
                            rgb = [1, 0, 2];
                            break;
                        case 2:
                            rgb = [2, 0, 1];
                            break;
                        case 3:
                            rgb = [2, 1, 0];
                            break;
                        case 4:
                            rgb = [1, 2, 0];
                            break;
                        case 5:
                            rgb = [0, 2, 1];
                            break;
                    }
                    for (var i = 0; i < seg.length; i += 1) {
                        s = 1 - 1 / (seg.length - 1) * i;
                        c[1] = c[0] * (1 - s * f);
                        c[2] = c[0] * (1 - s);
                        seg[i].style.backgroundColor = "rgb(" + (c[rgb[0]] * 100) + "%," + (c[rgb[1]] * 100) + "%," + (c[rgb[2]] * 100) + "%)";
                    }
                    break;
            }
        }
        function redrawSld() {
            switch (modeID) {
                case 0:
                    var yComponent = 2;
                    break;
                case 1:
                    var yComponent = 1;
                    break;
            }
            var y = Math.round((1 - THIS.hsv[yComponent]) * (jscolor.images.sld[1] - 1));
            jscolor.picker.sldM.style.backgroundPosition = "0 " + (THIS.pickerFace + THIS.pickerInset + y - Math.floor(jscolor.images.arrow[1] / 2)) + "px";
        }
        function isPickerOwner() {
            return jscolor.picker && jscolor.picker.owner === THIS;
        }
        function blurTarget() {
            if (valueElement === target) {
                THIS.importColor();
            }
            if (THIS.pickerOnfocus) {
                THIS.hidePicker();
            }
        }
        function blurValue() {
            if (valueElement !== target) {
                THIS.importColor();
            }
        }
        function setPad(e) {
            var mpos = jscolor.getRelMousePos(e);
            var x = mpos.x - THIS.pickerFace - THIS.pickerInset;
            var y = mpos.y - THIS.pickerFace - THIS.pickerInset;
            switch (modeID) {
                case 0:
                    THIS.fromHSV(x * (6 / (jscolor.images.pad[0] - 1)), 1 - y / (jscolor.images.pad[1] - 1), null, leaveSld);
                    break;
                case 1:
                    THIS.fromHSV(x * (6 / (jscolor.images.pad[0] - 1)), null, 1 - y / (jscolor.images.pad[1] - 1), leaveSld);
                    break;
            }
        }
        function setSld(e) {
            var mpos = jscolor.getRelMousePos(e);
            var y = mpos.y - THIS.pickerFace - THIS.pickerInset;
            switch (modeID) {
                case 0:
                    THIS.fromHSV(null, null, 1 - y / (jscolor.images.sld[1] - 1), leavePad);
                    break;
                case 1:
                    THIS.fromHSV(null, 1 - y / (jscolor.images.sld[1] - 1), null, leavePad);
                    break;
            }
        }
        var THIS = this;
        var modeID = this.pickerMode.toLowerCase() === "hvs" ? 1 : 0;
        var abortBlur = false;
        var valueElement = jscolor.fetchElement(this.valueElement), styleElement = jscolor.fetchElement(this.styleElement);
        var holdPad = false, holdSld = false;
        var leaveValue = 1 << 0, leaveStyle = 1 << 1, leavePad = 1 << 2, leaveSld = 1 << 3;
        jscolor.addEvent(target, "focus", function() {
            if (THIS.pickerOnfocus) {
                THIS.showPicker();
            }
        });
        jscolor.addEvent(target, "blur", function() {
            if (!abortBlur) {
                window.setTimeout(function() {
                    abortBlur || blurTarget();
                    abortBlur = false;
                }, 0);
            } else {
                abortBlur = false;
            }
        });
        if (valueElement) {
            var updateField = function() {
                THIS.fromString(valueElement.value, leaveValue);
            };
            jscolor.addEvent(valueElement, "keyup", updateField);
            jscolor.addEvent(valueElement, "input", updateField);
            jscolor.addEvent(valueElement, "blur", blurValue);
            valueElement.setAttribute("autocomplete", "off");
        }
        if (styleElement) {
            styleElement.jscStyle = {backgroundColor: styleElement.style.backgroundColor,color: styleElement.style.color};
        }
        switch (modeID) {
            case 0:
                jscolor.requireImage("hs.png");
                break;
            case 1:
                jscolor.requireImage("hv.png");
                break;
        }
        jscolor.requireImage("cross.gif");
        jscolor.requireImage("arrow.gif");
        this.importColor();
    }};
jscolor.install();
(function($) {
    if (!$ || !($.toJSON || Object.toJSON || window.JSON)) {
        throw new Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");
    }
    var _storage = {}, _storage_service = {jStorage: "{}"}, _storage_elm = null, _storage_size = 0, json_encode = $.toJSON || Object.toJSON || (window.JSON && (JSON.encode || JSON.stringify)), json_decode = $.evalJSON || (window.JSON && (JSON.decode || JSON.parse)) || function(str) {
        return String(str).evalJSON();
    }, _backend = false;
    _XMLService = {isXML: function(elm) {
            var documentElement = (elm ? elm.ownerDocument || elm : 0).documentElement;
            return documentElement ? documentElement.nodeName !== "HTML" : false;
        },encode: function(xmlNode) {
            if (!this.isXML(xmlNode)) {
                return false;
            }
            try {
                return new XMLSerializer().serializeToString(xmlNode);
            } catch (E1) {
                try {
                    return xmlNode.xml;
                } catch (E2) {
                }
            }
            return false;
        },decode: function(xmlString) {
            var dom_parser = ("DOMParser" in window && (new DOMParser()).parseFromString) || (window.ActiveXObject && function(_xmlString) {
                var xml_doc = new ActiveXObject("Microsoft.XMLDOM");
                xml_doc.async = "false";
                xml_doc.loadXML(_xmlString);
                return xml_doc;
            }), resultXML;
            if (!dom_parser) {
                return false;
            }
            resultXML = dom_parser.call("DOMParser" in window && (new DOMParser()) || window, xmlString, "text/xml");
            return this.isXML(resultXML) ? resultXML : false;
        }};
    function _init() {
        if (window.localStorage) {
            try {
                _storage_service = window.localStorage;
                _backend = "localStorage";
            } catch (E3) {
            }
        } else {
            if (window.globalStorage) {
                try {
                    _storage_service = window.globalStorage[window.location.hostname];
                    _backend = "globalStorage";
                } catch (E4) {
                }
            } else {
                _storage_elm = document.createElement("link");
                if (_storage_elm.addBehavior) {
                    _storage_elm.style.behavior = "url(#default#userData)";
                    document.getElementsByTagName("head")[0].appendChild(_storage_elm);
                    _storage_elm.load("jStorage");
                    var data = "{}";
                    try {
                        data = _storage_elm.getAttribute("jStorage");
                    } catch (E5) {
                    }
                    _storage_service.jStorage = data;
                    _backend = "userDataBehavior";
                } else {
                    _storage_elm = null;
                    return;
                }
            }
        }
        if (_storage_service.jStorage) {
            try {
                _storage = json_decode(String(_storage_service.jStorage));
            } catch (E6) {
                _storage_service.jStorage = "{}";
            }
        } else {
            _storage_service.jStorage = "{}";
        }
        _storage_size = _storage_service.jStorage ? String(_storage_service.jStorage).length : 0;
    }
    function _save() {
        try {
            _storage_service.jStorage = json_encode(_storage);
            if (_storage_elm) {
                _storage_elm.setAttribute("jStorage", _storage_service.jStorage);
                _storage_elm.save("jStorage");
            }
            _storage_size = _storage_service.jStorage ? String(_storage_service.jStorage).length : 0;
        } catch (E7) {
        }
    }
    function _checkKey(key) {
        if (!key || (typeof key != "string" && typeof key != "number")) {
            throw new TypeError("Key name must be string or numeric");
        }
        return true;
    }
    $.jStorage = {version: "0.1.4.1",set: function(key, value) {
            _checkKey(key);
            if (_XMLService.isXML(value)) {
                value = {_is_xml: true,xml: _XMLService.encode(value)};
            }
            _storage[key] = value;
            _save();
            return value;
        },get: function(key, def) {
            _checkKey(key);
            if (key in _storage) {
                if (_storage[key] != null && typeof _storage[key] == "object" && _storage[key]._is_xml && _storage[key]._is_xml) {
                    return _XMLService.decode(_storage[key].xml);
                } else {
                    return _storage[key];
                }
            }
            return typeof (def) == "undefined" ? null : def;
        },deleteKey: function(key) {
            _checkKey(key);
            if (key in _storage) {
                delete _storage[key];
                _save();
                return true;
            }
            return false;
        },flush: function() {
            _storage = {};
            _save();
            try {
                window.localStorage.clear();
            } catch (E8) {
            }
            return true;
        },storageObj: function() {
            function F() {
            }
            F.prototype = _storage;
            return new F();
        },index: function() {
            var index = [], i;
            for (i in _storage) {
                if (_storage.hasOwnProperty(i)) {
                    index.push(i);
                }
            }
            return index;
        },storageSize: function() {
            return _storage_size;
        },currentBackend: function() {
            return _backend;
        }};
    _init();
})(window.jQuery || window.$);
window.Modernizr = function(a, b, c) {
    function G() {
        e.input = function(a) {
            for (var b = 0, c = a.length; b < c; b++) {
                s[a[b]] = a[b] in l;
            }
            return s;
        }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), e.inputtypes = function(a) {
            for (var d = 0, e, f, h, i = a.length; d < i; d++) {
                l.setAttribute("type", f = a[d]), e = l.type !== "text", e && (l.value = m, l.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(f) && l.style.WebkitAppearance !== c ? (g.appendChild(l), h = b.defaultView, e = h.getComputedStyle && h.getComputedStyle(l, null).WebkitAppearance !== "textfield" && l.offsetHeight !== 0, g.removeChild(l)) : /^(search|tel)$/.test(f) || (/^(url|email)$/.test(f) ? e = l.checkValidity && l.checkValidity() === !1 : /^color$/.test(f) ? (g.appendChild(l), g.offsetWidth, e = l.value != m, g.removeChild(l)) : e = l.value != m)), r[a[d]] = !!e;
            }
            return r;
        }("search tel url email datetime date month week time datetime-local number range color".split(" "));
    }
    function E(a, b) {
        var c = a.charAt(0).toUpperCase() + a.substr(1), d = (a + " " + p.join(c + " ") + c).split(" ");
        return D(d, b);
    }
    function D(a, b) {
        for (var d in a) {
            if (k[a[d]] !== c) {
                return b == "pfx" ? a[d] : !0;
            }
        }
        return !1;
    }
    function C(a, b) {
        return !!~("" + a).indexOf(b);
    }
    function B(a, b) {
        return typeof a === b;
    }
    function A(a, b) {
        return z(o.join(a + ";") + (b || ""));
    }
    function z(a) {
        k.cssText = a;
    }
    var d = "2.0.6", e = {}, f = !0, g = b.documentElement, h = b.head || b.getElementsByTagName("head")[0], i = "modernizr", j = b.createElement(i), k = j.style, l = b.createElement("input"), m = ":)", n = Object.prototype.toString, o = " -webkit- -moz- -o- -ms- -khtml- ".split(" "), p = "Webkit Moz O ms Khtml".split(" "), q = {}, r = {}, s = {}, t = [], u = function(a, c, d, e) {
        var f, h, j, k = b.createElement("div");
        if (parseInt(d, 10)) {
            while (d--) {
                j = b.createElement("div"), j.id = e ? e[d] : i + (d + 1), k.appendChild(j);
            }
        }
        f = ["&shy;", "<style>", a, "</style>"].join(""), k.id = i, k.innerHTML += f, g.appendChild(k), h = c(k, a), k.parentNode.removeChild(k);
        return !!h;
    }, v = function() {
        function d(d, e) {
            e = e || b.createElement(a[d] || "div"), d = "on" + d;
            var f = d in e;
            f || (e.setAttribute || (e = b.createElement("div")), e.setAttribute && e.removeAttribute && (e.setAttribute(d, ""), f = B(e[d], "function"), B(e[d], c) || (e[d] = c), e.removeAttribute(d))), e = null;
            return f;
        }
        var a = {select: "input",change: "input",submit: "form",reset: "form",error: "img",load: "img",abort: "img"};
        return d;
    }(), w, x = {}.hasOwnProperty, y;
    !B(x, c) && !B(x.call, c) ? y = function(a, b) {
        return x.call(a, b);
    } : y = function(a, b) {
        return b in a && B(a.constructor.prototype[b], c);
    };
    var F = function(a, c) {
        var d = a.join(""), f = c.length;
        u(d, function(a, c) {
            var d = b.styleSheets[b.styleSheets.length - 1], g = d.cssRules && d.cssRules[0] ? d.cssRules[0].cssText : d.cssText || "", h = a.childNodes, i = {};
            while (f--) {
                i[h[f].id] = h[f];
            }
            e.csstransforms3d = i.csstransforms3d.offsetLeft === 9, e.generatedcontent = i.generatedcontent.offsetHeight >= 1, e.fontface = /src/i.test(g) && g.indexOf(c.split(" ")[0]) === 0;
        }, f, c);
    }(['@font-face {font-family:"font";src:url("https://")}', ["@media (", o.join("transform-3d),("), i, ")", "{#csstransforms3d{left:9px;position:absolute}}"].join(""), ['#generatedcontent:after{content:"', m, '";visibility:hidden}'].join("")], ["fontface", "csstransforms3d", "generatedcontent"]);
    q.flexbox = function() {
        function c(a, b, c, d) {
            a.style.cssText = o.join(b + ":" + c + ";") + (d || "");
        }
        function a(a, b, c, d) {
            b += ":", a.style.cssText = (b + o.join(c + ";" + b)).slice(0, -b.length) + (d || "");
        }
        var d = b.createElement("div"), e = b.createElement("div");
        a(d, "display", "box", "width:42px;padding:0;"), c(e, "box-flex", "1", "width:10px;"), d.appendChild(e), g.appendChild(d);
        var f = e.offsetWidth === 42;
        d.removeChild(e), g.removeChild(d);
        return f;
    }, q.postmessage = function() {
        return !!a.postMessage;
    }, q.indexedDB = function() {
        for (var b = -1, c = p.length; ++b < c; ) {
            if (a[p[b].toLowerCase() + "IndexedDB"]) {
                return !0;
            }
        }
        return !!a.indexedDB;
    }, q.hashchange = function() {
        return v("hashchange", a) && (b.documentMode === c || b.documentMode > 7);
    }, q.history = function() {
        return !!a.history && !!history.pushState;
    }, q.rgba = function() {
        z("background-color:rgba(150,255,150,.5)");
        return C(k.backgroundColor, "rgba");
    }, q.hsla = function() {
        z("background-color:hsla(120,40%,100%,.5)");
        return C(k.backgroundColor, "rgba") || C(k.backgroundColor, "hsla");
    }, q.multiplebgs = function() {
        z("background:url(https://),url(https://),red url(https://)");
        return /(url\s*\(.*?){3}/.test(k.background);
    }, q.backgroundsize = function() {
        return E("backgroundSize");
    }, q.borderimage = function() {
        return E("borderImage");
    }, q.borderradius = function() {
        return E("borderRadius");
    }, q.boxshadow = function() {
        return E("boxShadow");
    }, q.textshadow = function() {
        return b.createElement("div").style.textShadow === "";
    }, q.opacity = function() {
        A("opacity:.55");
        return /^0.55$/.test(k.opacity);
    }, q.cssanimations = function() {
        return E("animationName");
    }, q.csscolumns = function() {
        return E("columnCount");
    }, q.cssgradients = function() {
        var a = "background-image:", b = "gradient(linear,left top,right bottom,from(#9f9),to(white));", c = "linear-gradient(left top,#9f9, white);";
        z((a + o.join(b + a) + o.join(c + a)).slice(0, -a.length));
        return C(k.backgroundImage, "gradient");
    }, q.cssreflections = function() {
        return E("boxReflect");
    }, q.csstransforms = function() {
        return !!D(["transformProperty", "WebkitTransform", "MozTransform", "OTransform", "msTransform"]);
    }, q.csstransforms3d = function() {
        var a = !!D(["perspectiveProperty", "WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"]);
        a && "webkitPerspective" in g.style && (a = e.csstransforms3d);
        return a;
    }, q.csstransitions = function() {
        return E("transitionProperty");
    }, q.fontface = function() {
        return e.fontface;
    }, q.generatedcontent = function() {
        return e.generatedcontent;
    }, q.video = function() {
        var a = b.createElement("video"), c = !1;
        try {
            if (c = !!a.canPlayType) {
                c = new Boolean(c), c.ogg = a.canPlayType('video/ogg; codecs="theora"');
                var d = 'video/mp4; codecs="avc1.42E01E';
                c.h264 = a.canPlayType(d + '"') || a.canPlayType(d + ', mp4a.40.2"'), c.webm = a.canPlayType('video/webm; codecs="vp8, vorbis"');
            }
        } catch (e) {
        }
        return c;
    }, q.audio = function() {
        var a = b.createElement("audio"), c = !1;
        try {
            if (c = !!a.canPlayType) {
                c = new Boolean(c), c.ogg = a.canPlayType('audio/ogg; codecs="vorbis"'), c.mp3 = a.canPlayType("audio/mpeg;"), c.wav = a.canPlayType('audio/wav; codecs="1"'), c.m4a = a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;");
            }
        } catch (d) {
        }
        return c;
    }, q.localstorage = function() {
        try {
            return !!localStorage.getItem;
        } catch (a) {
            return !1;
        }
    }, q.sessionstorage = function() {
        try {
            return !!sessionStorage.getItem;
        } catch (a) {
            return !1;
        }
    }, q.applicationcache = function() {
        return !!a.applicationCache;
    };
    for (var H in q) {
        y(q, H) && (w = H.toLowerCase(), e[w] = q[H](), t.push((e[w] ? "" : "no-") + w));
    }
    e.input || G(), z(""), j = l = null, e._version = d, e._prefixes = o, e._domPrefixes = p, e.hasEvent = v, e.testProp = function(a) {
        return D([a]);
    }, e.testAllProps = E, e.testStyles = u, g.className = g.className.replace(/\bno-js\b/, "") + (f ? " js " + t.join(" ") : "");
    return e;
}(this, this.document);
var common = {spinners: [],onPageShow: function() {
        $(".common-replyform-form-body, #forum-newthread-body").pageLive("focus", function() {
            var $this = $(this);
            if (!$this.hasClass("increased-height")) {
                $this.addClass("increased-height");
                $this.animate({height: $this.height() * 3}, 300);
            }
        });
        $(".common-focusbartoggle-header").pageLive("click", function() {
            var $this = $(this);
            $this.parent().toggleClass("expanded");
        }).disableSelection();
    },init: function(template) {
        $(".common-selectable-container input").change(function() {
            var val = $(this).val();
            var left = $(this).siblings(".common-selectable-left");
            var right = $(this).siblings(".common-selectable-right");
            left.removeClass("common-selectable-left-pressed");
            right.removeClass("common-selectable-right-pressed");
            if (val == 1) {
                left.addClass("common-selectable-left-pressed");
            }
            if (val == 0) {
                right.addClass("common-selectable-right-pressed");
            }
            $(this).trigger("newvalue");
        });
        $(".common-selectable-container .common-selectable-left").live("click", function() {
            var inp = $(this).siblings("input");
            if (inp.val() == 1) {
                inp.val(-1);
            } else {
                inp.val(1);
            }
            inp.change();
        });
        $(".common-selectable-container .common-selectable-right").live("click", function() {
            var inp = $(this).siblings("input");
            if (inp.val() == 0) {
                inp.val(-1);
            } else {
                inp.val(0);
            }
            inp.change();
        });
        $(".common-selectablebig-container input").change(function() {
            var val = $(this).val();
            var left = $(this).siblings(".common-selectablebig-left");
            var right = $(this).siblings(".common-selectablebig-right");
            left.removeClass("common-selectablebig-left-pressed");
            right.removeClass("common-selectablebig-right-pressed");
            if (val == 1) {
                left.addClass("common-selectablebig-left-pressed");
            }
            if (val == 0) {
                right.addClass("common-selectablebig-right-pressed");
            }
            $(this).trigger("newvalue");
        });
        $(".common-selectablebig-container .common-selectablebig-left").live("click", function() {
            var inp = $(this).siblings("input");
            if (inp.val() == 1) {
                inp.val(-1);
            } else {
                inp.val(1);
            }
            inp.change();
        });
        $(".common-selectablebig-container .common-selectablebig-right").live("click", function() {
            var inp = $(this).siblings("input");
            if (inp.val() == 0) {
                inp.val(-1);
            } else {
                inp.val(0);
            }
            inp.change();
        });
        $(".common-onechoice-entry").live("click", function() {
            $(this).disableSelection();
            $(this).siblings(".common-onechoice-entry").removeClass("common-onechoice-pressed");
            $(this).addClass("common-onechoice-pressed");
            $(this).siblings("input").val("" + $(this).attr("rel"));
        });
        $(".common-multichoice-entry").live("click", function() {
            var entry = $(this);
            var input = entry.siblings("input");
            var name = input.attr("name");
            var surf = $S("commonMultichoice" + name);
            var iteration = parseInt(entry.attr("iteration"));
            var values = surf.getState()["val"];
            var idx = $.inArray(iteration, values);
            if (idx == -1) {
                values[values.length] = iteration;
            } else {
                S.debug("splice!!" + idx);
                values = values.splice(idx, 1);
            }
            surf.refresh();
            input.trigger("newvalue");
        });
        $(".common-form-input-wrapper input, " + ".common-form-input-wrapper select, " + ".common-form-input-wrapper textarea").focus(function() {
            $(this).parent().addClass("common-form-input-focus");
        });
        $(".common-form-input-wrapper input, " + ".common-form-input-wrapper select, " + ".common-form-input-wrapper textarea").blur(function() {
            $(this).parent().removeClass("common-form-input-focus");
        });
        $(".common-reportbutton").live("click", function() {
            var reportButton = $(this).parents(".common-reportbutton-container:first");
            if (reportButton.find(".common-reportbutton-dropdown").is(":visible")) {
                reportButton.removeClass("active");
                reportButton.parent().parent().removeClass("show-report");
                $("body").unbind("click.reportClick");
                return false;
            }
            var reportUrl = reportButton.attr("rel");
            reportButton.addClass("active");
            reportButton.parent().parent().addClass("show-report");
            $("body").bind("click.reportClick", function(e) {
                if ($(e.target).parents(".common-reportbutton-container").length) {
                    return true;
                }
                reportButton.removeClass("active");
                reportButton.parent().parent().removeClass("show-report");
                $("body").unbind("click.reportClick");
            });
            $.ajax({url: reportUrl,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    response.data.context["id"] += "";
                    var html = $S(response.data.template).render(response.data.context);
                    var dropdown = reportButton.find(".common-reportbutton-dropdown");
                    var initialDropdownHtml = dropdown.html();
                    dropdown.html(html);
                    dropdown.find("a.report").click(function() {
                        var url = $(this).attr("href");
                        if ($(this).attr("rel")) {
                            common.showReportPopup($(this).attr("title"), $(this).attr("rel"));
                            return;
                        }
                        if ($(this).hasClass("report-action-require-confirm")) {
                            var popupWindow = $($S("popup.confirm").render({"data": {"action": $(this).html(),"url": url}}).replace("##RANDOM_ID##", ("popup-" + Math.random()).replace(".", "")));
                            popupWindow = popupWindow.appendTo(".base-center-popups");
                            popupWindow.find(".common-popup-close-button").bind("bind", function() {
                                popupWindow.remove();
                            });
                            popupWindow.find(".popup-reportabuse-button-send").bind("click", function() {
                                $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                                        if (!response.message) {
                                            base.showReceipt("Something went wrong. Please try again");
                                            return;
                                        } else {
                                            switch (response.message) {
                                                case "DELETE_THREAD":
                                                    if (response.data.success) {
                                                        comcenter.showReceipt("Forum thread has been successfully removed");
                                                        document.location.href = document.location.href;
                                                    } else {
                                                        comcenter.showReceipt("Error: Forum thread could not be removed (" + response.data.error + ")");
                                                    }
                                                    break;
                                                case "DELETE_POST":
                                                    if (response.data.success) {
                                                        comcenter.showReceipt("Forum post has been successfully removed");
                                                        $("#post_" + response.data.id).remove();
                                                    } else {
                                                        comcenter.showReceipt("Error: Forum post could not be removed (" + response.data.error + ")");
                                                    }
                                                    break;
                                            }
                                        }
                                        popupWindow.remove();
                                        reportButton.removeClass("active");
                                        reportButton.parent().parent().removeClass("show-report");
                                        dropdown.html(initialDropdownHtml);
                                    }, false)});
                            });
                        } else {
                            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                                    if (!response.message) {
                                        base.showReceipt("Something went wrong. Please try again");
                                        return;
                                    } else {
                                        switch (response.message) {
                                            case "STICKY":
                                                base.showReceipt("Thread is now made sticky!");
                                                break;
                                            case "UNSTICKY":
                                                base.showReceipt("Thread is now not sticky anymore!");
                                                break;
                                            case "LOCK":
                                                base.showReceipt("Thread is now locked!");
                                                document.location.href = document.location.href;
                                                break;
                                            case "UNLOCK":
                                                base.showReceipt("Thread is now unlocked!");
                                                document.location.href = document.location.href;
                                                break;
                                            case "REPORT_POST":
                                                if (response.data.success) {
                                                    comcenter.showReceipt("A report has been sent, case number " + response.data.guid);
                                                } else {
                                                    comcenter.showReceipt("Unable to send report, please try again later.");
                                                }
                                                break;
                                            case "REPORT_FEED_POST":
                                                comcenter.showReceipt("Feed post has been successfully reported");
                                                break;
                                            case "REPORT_COMMENT_POST":
                                                comcenter.showReceipt("Comment has been successfully reported");
                                                break;
                                            case "REPORT_PROFILE":
                                                comcenter.showReceipt("Profile has been successfully reported");
                                                break;
                                            case "CENSOR_POST":
                                                if (response.data.success) {
                                                    comcenter.showReceipt("Forum post has been successfully censored");
                                                    $("#post_" + response.data.id + " .forum-threadview-post-text").html("This post has been censored...");
                                                } else {
                                                    comcenter.showReceipt("Error: Forum post could not be censored (" + response.data.error + ")");
                                                }
                                                break;
                                            case "UNCENSOR_POST":
                                                if (response.data.success) {
                                                    comcenter.showReceipt("Forum post has been successfully uncensored");
                                                    $("#post_" + response.data.id + " .forum-threadview-post-text").html(response.data.body + "<br/><br/><br/>");
                                                } else {
                                                    comcenter.showReceipt("Error: Forum post could not be uncensored (" + response.data.error + ")");
                                                }
                                                break;
                                            case "MOVE_THREAD":
                                                if (response.data.success) {
                                                    popup.render("movethread", response, true, false);
                                                    $("#popup-movethread-submit").click(function(e) {
                                                        e.preventDefault();
                                                        var form = $("#popup-movethread-form");
                                                        $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                                                                if (success) {
                                                                    if (response.message == "OK") {
                                                                        base.showReceipt("Thread successfully moved");
                                                                        base.redirect(document.location.href);
                                                                    } else {
                                                                        base.showReceipt("Error: Thread could not be moved (" + response.message + ")", receiptTypes.ERROR);
                                                                    }
                                                                }
                                                                $("#popup-movethread-close").click();
                                                            }, false)});
                                                    });
                                                } else {
                                                    comcenter.showReceipt("Error: Forum thread could not be moved, it does not exist.");
                                                }
                                        }
                                    }
                                    reportButton.removeClass("active");
                                    reportButton.parent().parent().removeClass("show-report");
                                    dropdown.html(initialDropdownHtml);
                                }, false)});
                        }
                        return false;
                    });
                }, false)});
            return false;
        });
    },startSpinners: function() {
        for (var i = 0; i < common.spinners.length; i++) {
            clearInterval(common.spinners[i]);
        }
        common.spinners = [];
        $(".common-spinner").each(function() {
            var $this = $(this);
            var spriteFrames = 0;
            var spritePosition = 0;
            switch ($this.data("size")) {
                case "big":
                    $this.addClass("common-spinner-40x55");
                    spriteFrames = 20;
                    spritePosition = 0;
                    break;
                case "small":
                    $this.addClass("common-spinner-18x25");
                    spriteFrames = 15;
                    spritePosition = -55;
                    break;
            }
            if (spriteFrames === 0) {
                return false;
            }
            var frameWidth = $this.width();
            var fps = 30;
            var currentFrame = 0;
            var spinnerInterval = setInterval(function() {
                $this.css("background-position", -(frameWidth * currentFrame) + "px " + spritePosition + "px");
                currentFrame++;
                if (currentFrame >= spriteFrames) {
                    currentFrame = 0;
                }
            }, Math.floor(1000 / fps));
            common.spinners.push(spinnerInterval);
        });
    },showReportPopup: function(title, url) {
        var popupWindow = $($S("popup.reportabuse").render({"data": {"title": title,"url": url}}).replace("##RANDOM_ID##", ("popup-" + Math.random()).replace(".", "")));
        popupWindow = popupWindow.appendTo(".base-center-popups");
        var textarea = $(popupWindow.find('textarea[name="reason"]'));
        textarea.focus();
        popupWindow.find(".common-popup-close-button").bind("bind", function() {
            popupWindow.remove();
        });
        popupWindow.find(".popup-reportabuse-button-send").bind("click", function() {
            $.ajax({url: $(this).data("action"),dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum,"reason": textarea.val()},complete: base.onComplete(function(success, response) {
                    if (!response.message) {
                        base.showReceipt("Something went wrong. Please try again");
                        return;
                    } else {
                        switch (response.message) {
                            case "REPORT_POST":
                                if (response.data.success) {
                                    comcenter.showReceipt("A report has been sent, case number " + response.data.guid);
                                    popupWindow.remove();
                                } else {
                                    comcenter.showReceipt("Unable to send report, please try again later.");
                                }
                                break;
                            case "REPORT_FEED_POST":
                                comcenter.showReceipt("Feed post has been successfully reported");
                                popupWindow.remove();
                                break;
                            case "REPORT_COMMENT_POST":
                                comcenter.showReceipt("Comment has been successfully reported");
                                popupWindow.remove();
                                break;
                            case "REPORT_PROFILE":
                                comcenter.showReceipt("Profile has been successfully reported");
                                popupWindow.remove();
                                break;
                        }
                    }
                }, false)});
        });
    },compFallbacks: function() {
        if (!Modernizr.input.placeholder) {
            $(":input[placeholder]").each(function() {
                var $this = $(this), $ph = $this.attr("placeholder");
                if (!$this.val()) {
                    $this.val($ph);
                    $this.addClass("placeholder");
                }
                $this.focus(function() {
                    if ($this.val() == $ph) {
                        $this.val("");
                        $this.removeClass("placeholder");
                    }
                });
                $this.blur(function() {
                    if (!$this.val()) {
                        $this.val($ph);
                        $this.addClass("placeholder");
                    }
                });
            });
        }
    },ajaxNotify: function(response) {
        message = Surface.parseJSON(response);
        UserMessageBox.show(message["message"], message["type"]);
    },tooltipBubble: function(element, innerHtml, options, showInstant) {
        element = $(element);
        var tooltipOptions = {position: "top",align: "center",innerHtml: innerHtml,width: "200px",themeName: "all-black",themePath: "/public/common/jquerybubblepopup-theme",distance: "10px",mouseOut: "hide"};
        if (options) {
            $.extend(tooltipOptions, options);
        }
        var theBubble = element.CreateBubblePopup(tooltipOptions);
        if (showInstant) {
            theBubble.ShowBubblePopup();
        }
    }};
var UserMessageBox = {MSG_ERROR: "error",MSG_WARNING: "warning",MSG_SUCCESS: "success",MSG_INFORMATION: "information",close: function() {
        $("#userMessageBox").animate({height: "0px"}, "fast").animate({margin: "0px",padding: "0px",border: "0px"}, "fast");
        return false;
    },showTop: function(message, type) {
        $("#general-base-usermsg").each(function(i, e) {
            $(this).attr("className", "base-usermsg-general");
            $(this).addClass("base-usermsg-" + type);
            $(this).children(":first").html(message);
            $(this).show();
            $(this).click(function() {
                $(this).hide();
            });
        });
        return false;
    },show: function(message, type) {
        message = base.usermessages.render({"msg": message});
        var foundErrorContainer = false;
        $(".base-usermsg:first").each(function(i, e) {
            $(this).attr("className", "base-usermsg");
            $(this).addClass("base-usermsg-" + type);
            $(this).children(":first").html(message);
            $(this).show();
            foundErrorContainer = true;
        });
        if (!foundErrorContainer) {
            S.debug("MESSAGE: " + message + ", TYPE: " + type);
            return false;
            S.debug("ERROR: Could not find any error container with the class .base-usermsg to show the error in!");
            S.debug("Showing in the general one...");
            $("#general-base-usermsg").each(function(i, e) {
                $(this).attr("className", "base-usermsg-general");
                $(this).addClass("base-usermsg-" + type);
                $(this).children(":first").html(message);
                $(this).show();
                $(this).click(function() {
                    $(this).hide();
                });
            });
        }
        return false;
    }};
eval(function(p, a, c, k, e, r) {
    e = function(c) {
        return (c < a ? "" : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36));
    };
    if (!"".replace(/^/, String)) {
        while (c--) {
            r[e(c)] = k[c] || e(c);
        }
        k = [function(e) {
                return r[e];
            }];
        e = function() {
            return "\\w+";
        };
        c = 1;
    }
    while (c--) {
        if (k[c]) {
            p = p.replace(new RegExp("\\b" + e(c) + "\\b", "g"), k[c]);
        }
    }
    return p;
}('(6(a){a.1j.3C=6(){4 c=X;a(W).1g(6(d,e){4 b=a(e).1K("1U");5(b!=X&&7 b=="1a"&&!a.19(b)&&!a.18(b)&&b.3!=X&&7 b.3=="1a"&&!a.19(b.3)&&!a.18(b.3)&&7 b.3.1v!="1w"){c=b.3.1v?U:Q}12 Q});12 c};a.1j.45=6(){4 b=X;a(W).1g(6(e,f){4 d=a(f).1K("1U");5(d!=X&&7 d=="1a"&&!a.19(d)&&!a.18(d)&&d.3!=X&&7 d.3=="1a"&&!a.19(d.3)&&!a.18(d.3)&&7 d.3.1V!="1w"&&d.3.1V!=X){b=c(d.3.1V)}12 Q});6 c(d){12 2z 2Q(d*2R)}12 b};a.1j.4d=6(){4 b=X;a(W).1g(6(e,f){4 d=a(f).1K("1U");5(d!=X&&7 d=="1a"&&!a.19(d)&&!a.18(d)&&d.3!=X&&7 d.3=="1a"&&!a.19(d.3)&&!a.18(d.3)&&7 d.3.1W!="1w"&&d.3.1W!=X){b=c(d.3.1W)}12 Q});6 c(d){12 2z 2Q(d*2R)}12 b};a.1j.3G=6(){4 b=X;a(W).1g(6(e,f){4 d=a(f).1K("1U");5(d!=X&&7 d=="1a"&&!a.19(d)&&!a.18(d)&&d.3!=X&&7 d.3=="1a"&&!a.19(d.3)&&!a.18(d.3)&&7 d.3.1L!="1w"&&d.3.1L!=X){b=c(d.3.1L)}12 Q});6 c(d){12 2z 2Q(d*2R)}12 b};a.1j.3H=6(){4 b=X;a(W).1g(6(d,e){4 c=a(e).1K("1U");5(c!=X&&7 c=="1a"&&!a.19(c)&&!a.18(c)&&c.3!=X&&7 c.3=="1a"&&!a.19(c.3)&&!a.18(c.3)&&7 c.3.T!="1w"){b=a("#"+c.3.T).Z>0?a("#"+c.3.T).2p():X}12 Q});12 b};a.1j.3D=6(){4 b=X;a(W).1g(6(d,e){4 c=a(e).1K("1U");5(c!=X&&7 c=="1a"&&!a.19(c)&&!a.18(c)&&c.3!=X&&7 c.3=="1a"&&!a.19(c.3)&&!a.18(c.3)&&7 c.3.T!="1w"){b=c.3.T}12 Q});12 b};a.1j.4h=6(){4 b=0;a(W).1g(6(d,e){4 c=a(e).1K("1U");5(c!=X&&7 c=="1a"&&!a.19(c)&&!a.18(c)&&c.3!=X&&7 c.3=="1a"&&!a.19(c.3)&&!a.18(c.3)&&7 c.3.T!="1w"){a(e).2h("33");a(e).2h("2S");a(e).2h("30");a(e).2h("2G");a(e).2h("2L");a(e).2h("2x");a(e).2h("2s");a(e).2h("28");a(e).1K("1U",{});5(a("#"+c.3.T).Z>0){a("#"+c.3.T).2H()}b++}});12 b};a.1j.3x=6(){4 c=Q;a(W).1g(6(d,e){4 b=a(e).1K("1U");5(b!=X&&7 b=="1a"&&!a.19(b)&&!a.18(b)&&b.3!=X&&7 b.3=="1a"&&!a.19(b.3)&&!a.18(b.3)&&7 b.3.T!="1w"){c=U}12 Q});12 c};a.1j.48=6(){4 b={};a(W).1g(6(c,d){b=a(d).1K("1U");5(b!=X&&7 b=="1a"&&!a.19(b)&&!a.18(b)&&b.3!=X&&7 b.3=="1a"&&!a.19(b.3)&&!a.18(b.3)){44 b.3}1d{b=X}12 Q});5(a.18(b)){b=X}12 b};a.1j.4e=6(b,c){a(W).1g(6(d,e){5(7 c!="1I"){c=U}a(e).1e("2S",[b,c])})};a.1j.4c=6(b){a(W).1g(6(c,d){a(d).1e("30",[b])})};a.1j.47=6(b,c){a(W).1g(6(d,e){a(e).1e("2s",[b,c,U]);12 Q})};a.1j.46=6(b,c){a(W).1g(6(d,e){a(e).1e("2s",[b,c,U])})};a.1j.3X=6(){a(W).1g(6(b,c){a(c).1e("28",[U]);12 Q})};a.1j.3U=6(){a(W).1g(6(b,c){a(c).1e("28",[U])})};a.1j.3P=6(){a(W).1g(6(b,c){a(c).1e("2L");12 Q})};a.1j.3O=6(){a(W).1g(6(b,c){a(c).1e("2L")})};a.1j.3N=6(){a(W).1g(6(b,c){a(c).1e("2x");12 Q})};a.1j.3M=6(){a(W).1g(6(b,c){a(c).1e("2x")})};a.1j.3J=6(e){4 r={2J:W,2X:[],2Y:"1U",3w:["S","13","1b"],3n:["R","13","1c"],3j:\'<3i 1y="{1N} {3g}"{36} T="{37}"> 									<38{3b}> 									<3c> 									<2y> 										<14 1y="{1N}-S-R"{2m-2Z}>{2m-2O}</14> 										<14 1y="{1N}-S-13"{2m-3u}>{2m-20}</14> 										<14 1y="{1N}-S-1c"{2m-2U}>{2m-2P}</14> 									</2y> 									<2y> 										<14 1y="{1N}-13-R"{20-2Z}>{20-2O}</14> 										<14 1y="{1N}-1H"{31}>{2T}</14> 										<14 1y="{1N}-13-1c"{20-2U}>{20-2P}</14> 									</2y> 									<2y> 										<14 1y="{1N}-1b-R"{2l-2Z}>{2l-2O}</14> 										<14 1y="{1N}-1b-13"{2l-3u}>{2l-20}</14> 										<14 1y="{1N}-1b-1c"{2l-2U}>{2l-2P}</14> 									</2y> 									</3c> 									</38> 									</3i>\',3:{T:X,1L:X,1W:X,1V:X,1v:Q,1J:Q,1r:Q,1A:Q,1Y:Q,1B:Q,25:{}},15:"S",3v:["R","S","1c","1b"],11:"27",35:["R","27","1c","S","13","1b"],2K:["R","27","1c"],32:["S","13","1b"],1n:"3Y",1p:X,1o:X,1x:{},1u:{},1H:X,1O:{},V:{11:"27",1F:Q},1i:U,2q:U,22:Q,2k:U,23:"2E",3t:["2E","2V"],26:"2V",3o:["2E","2V"],1M:3h,1P:3h,29:0,2a:0,Y:"3e",21:"3F",2b:"3e-4f/",1h:{2A:"4a",1E:"43"},1T:6(){},1S:6(){},1m:[]};h(e);6 g(v){4 w={3:{},1p:r.1p,1o:r.1o,1x:r.1x,1u:r.1u,15:r.15,11:r.11,1n:r.1n,1M:r.1M,1P:r.1P,29:r.29,2a:r.2a,23:r.23,26:r.26,V:r.V,1H:r.1H,1O:r.1O,Y:r.Y,21:r.21,2b:r.2b,1h:r.1h,1i:r.1i,2k:r.2k,2q:r.2q,22:r.22,1T:r.1T,1S:r.1S,1m:r.1m};4 t=a.3E(Q,w,(7 v=="1a"&&!a.19(v)&&!a.18(v)&&v!=X?v:{}));t.3.T=r.3.T;t.3.1L=r.3.1L;t.3.1W=r.3.1W;t.3.1V=r.3.1V;t.3.1v=r.3.1v;t.3.1J=r.3.1J;t.3.1r=r.3.1r;t.3.1A=r.3.1A;t.3.1Y=r.3.1Y;t.3.1B=r.3.1B;t.3.25=r.3.25;t.1p=(7 t.1p=="1Q"||7 t.1p=="2c")&&10(t.1p)>0?10(t.1p):r.1p;t.1o=(7 t.1o=="1Q"||7 t.1o=="2c")&&10(t.1o)>0?10(t.1o):r.1o;t.1x=t.1x!=X&&7 t.1x=="1a"&&!a.19(t.1x)&&!a.18(t.1x)?t.1x:r.1x;t.1u=t.1u!=X&&7 t.1u=="1a"&&!a.19(t.1u)&&!a.18(t.1u)?t.1u:r.1u;t.15=7 t.15=="1Q"&&o(t.15.1X(),r.3v)?t.15.1X():r.15;t.11=7 t.11=="1Q"&&o(t.11.1X(),r.35)?t.11.1X():r.11;t.1n=(7 t.1n=="1Q"||7 t.1n=="2c")&&10(t.1n)>=0?10(t.1n):r.1n;t.1M=7 t.1M=="2c"&&10(t.1M)>0?10(t.1M):r.1M;t.1P=7 t.1P=="2c"&&10(t.1P)>0?10(t.1P):r.1P;t.29=7 t.29=="2c"&&t.29>=0?t.29:r.29;t.2a=7 t.2a=="2c"&&t.2a>=0?t.2a:r.2a;t.23=7 t.23=="1Q"&&o(t.23.1X(),r.3t)?t.23.1X():r.23;t.26=7 t.26=="1Q"&&o(t.26.1X(),r.3o)?t.26.1X():r.26;t.V=t.V!=X&&7 t.V=="1a"&&!a.19(t.V)&&!a.18(t.V)?t.V:r.V;t.V.11=7 t.V.11!="1w"?t.V.11:r.V.11;t.V.1F=7 t.V.1F!="1w"?t.V.1F:r.V.1F;t.1H=7 t.1H=="1Q"&&t.1H.Z>0?t.1H:r.1H;t.1O=t.1O!=X&&7 t.1O=="1a"&&!a.19(t.1O)&&!a.18(t.1O)?t.1O:r.1O;t.Y=j(7 t.Y=="1Q"&&t.Y.Z>0?t.Y:r.Y);t.21=7 t.21=="1Q"&&t.21.Z>0?a.3d(t.21):r.21;t.2b=7 t.2b=="1Q"&&t.2b.Z>0?a.3d(t.2b):r.2b;t.1h=t.1h!=X&&7 t.1h=="1a"&&!a.19(t.1h)&&!a.18(t.1h)&&(7 10(t.1h.2A)=="2c"&&7 10(t.1h.1E)=="2c")?t.1h:r.1h;t.1i=7 t.1i=="1I"&&t.1i==U?U:Q;t.2k=7 t.2k=="1I"&&t.2k==U?U:Q;t.2q=7 t.2q=="1I"&&t.2q==U?U:Q;t.22=7 t.22=="1I"&&t.22==U?U:Q;t.1T=7 t.1T=="6"?t.1T:r.1T;t.1S=7 t.1S=="6"?t.1S:r.1S;t.1m=a.19(t.1m)?t.1m:r.1m;5(t.15=="R"||t.15=="1c"){t.11=o(t.11,r.32)?t.11:"13"}1d{t.11=o(t.11,r.2K)?t.11:"27"}1R(4 u 2r t.V){2g(u){17"11":t.V.11=7 t.V.11=="1Q"&&o(t.V.11.1X(),r.35)?t.V.11.1X():r.V.11;5(t.15=="R"||t.15=="1c"){t.V.11=o(t.V.11,r.32)?t.V.11:"13"}1d{t.V.11=o(t.V.11,r.2K)?t.V.11:"27"}16;17"1F":t.V.1F=t.V.1F==U?U:Q;16}}12 t}6 l(t){5(t==0){12 0}5(t>0){12-(1s.1t(t))}1d{12 1s.1t(t)}}6 o(v,w){4 t=Q;1R(4 u 2r w){5(w[u]==v){t=U;16}}12 t}6 k(t){5(2W.3q){1R(4 v=t.Z-1;v>=0;v--){4 u=2W.3q("1G");u.2o=t[v];5(a.4g(t[v],r.2X)>-1){r.2X.3s(t[v])}}}}6 b(t){5(t.1m&&t.1m.Z>0){1R(4 u=0;u<t.1m.Z;u++){4 v=(t.1m[u].3m(0)!="#"?"#"+t.1m[u]:t.1m[u]);a(v).1k({34:"1F"})}}}6 s(u){5(u.1m&&u.1m.Z>0){1R(4 v=0;v<u.1m.Z;v++){4 x=(u.1m[v].3m(0)!="#"?"#"+u.1m[v]:u.1m[v]);a(x).1k({34:"3f"});4 w=a(x).Z;1R(4 t=0;t<w.Z;t++){a(w[t]).1k({34:"3f"})}}}}6 m(u){4 w=u.2b;4 t=u.21;4 v=(w.2I(w.Z-1)=="/"||w.2I(w.Z-1)=="\\\\")?w.2I(0,w.Z-1)+"/"+t+"/":w+"/"+t+"/";12 v+(u.1i==U?(a.1l.1D?"2e/":""):"2e/")}6 j(t){4 u=t.2I(0,1)=="."?t.2I(1,t.Z):t;12 u}6 q(u){5(a("#"+u.3.T).Z>0){4 t="1b-13";2g(u.15){17"R":t="13-1c";16;17"S":t="1b-13";16;17"1c":t="13-R";16;17"1b":t="S-13";16}5(o(u.V.11,r.2K)){a("#"+u.3.T).1f("14."+u.Y+"-"+t).1k("3a-11",u.V.11)}1d{a("#"+u.3.T).1f("14."+u.Y+"-"+t).1k("39-11",u.V.11)}}}6 p(v){4 H=r.3j;4 F=m(v);4 x="";4 G="";4 u="";5(!v.V.1F){2g(v.15){17"R":G="1c";u="{20-2P}";16;17"S":G="1b";u="{2l-20}";16;17"1c":G="R";u="{20-2O}";16;17"1b":G="S";u="{2m-20}";16}x=\'<1G 2o="\'+F+"V-"+G+"."+(v.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+v.Y+\'-V" />\'}4 t=r.3w;4 z=r.3n;4 K,E,A,J;4 B="";4 y="";4 D=2z 3p();1R(E 2r t){A="";J="";1R(K 2r z){A=t[E]+"-"+z[K];A=A.42();J="{"+A+"40}";A="{"+A+"}";5(A==u){H=H.1z(A,x);B=""}1d{H=H.1z(A,"");B=""}5(t[E]+"-"+z[K]!="13-13"){y=F+t[E]+"-"+z[K]+"."+(v.1i==U?(a.1l.1D?"1C":"2n"):"1C");D.3s(y);H=H.1z(J,\' 2M="\'+B+"3L-3K:3I("+y+\');"\')}}}5(D.Z>0){k(D)}4 w="";5(v.1u!=X&&7 v.1u=="1a"&&!a.19(v.1u)&&!a.18(v.1u)){1R(4 C 2r v.1u){w+=C+":"+v.1u[C]+";"}}w+=(v.1p!=X||v.1o!=X)?(v.1p!=X?"1p:"+v.1p+"1Z;":"")+(v.1o!=X?"1o:"+v.1o+"1Z;":""):"";H=w.Z>0?H.1z("{3b}",\' 2M="\'+w+\'"\'):H.1z("{3b}","");4 I="";5(v.1x!=X&&7 v.1x=="1a"&&!a.19(v.1x)&&!a.18(v.1x)){1R(4 C 2r v.1x){I+=C+":"+v.1x[C]+";"}}H=I.Z>0?H.1z("{36}",\' 2M="\'+I+\'"\'):H.1z("{36}","");H=H.1z("{3g}",v.Y+"-"+v.21);H=v.3.T!=X?H.1z("{37}",v.3.T):H.1z("{37}","");3y(H.3z("{1N}")>-1){H=H.1z("{1N}",v.Y)}H=v.1H!=X?H.1z("{2T}",v.1H):H.1z("{2T}","");J="";1R(4 C 2r v.1O){J+=C+":"+v.1O[C]+";"}H=J.Z>0?H.1z("{31}",\' 2M="\'+J+\'"\'):H.1z("{31}","");12 H}6 f(){12 1s.3A(2z 2Q().3B()/2R)}6 c(E,N,x){4 O=x.15;4 K=x.11;4 z=x.1n;4 F=x.1h;4 I=2z 3p();4 u=N.2F();4 t=10(u.S);4 y=10(u.R);4 P=10(N.2v(Q));4 L=10(N.2u(Q));4 v=10(E.2v(Q));4 M=10(E.2u(Q));F.1E=1s.1t(10(F.1E));F.2A=1s.1t(10(F.2A));4 w=l(F.1E);4 J=l(F.1E);4 A=l(F.2A);4 H=m(x);2g(K){17"R":I.S=O=="S"?t-M-z+l(w):t+L+z+w;I.R=y+A;16;17"27":4 D=1s.1t(v-P)/2;I.S=O=="S"?t-M-z+l(w):t+L+z+w;I.R=v>=P?y-D:y+D;16;17"1c":4 D=1s.1t(v-P);I.S=O=="S"?t-M-z+l(w):t+L+z+w;I.R=v>=P?y-D+l(A):y+D+l(A);16;17"S":I.S=t+A;I.R=O=="R"?y-v-z+l(J):y+P+z+J;16;17"13":4 D=1s.1t(M-L)/2;I.S=M>=L?t-D:t+D;I.R=O=="R"?y-v-z+l(J):y+P+z+J;16;17"1b":4 D=1s.1t(M-L);I.S=M>=L?t-D+l(A):t+D+l(A);I.R=O=="R"?y-v-z+l(J):y+P+z+J;16}I.15=O;5(a("#"+x.3.T).Z>0&&a("#"+x.3.T).1f("1G."+x.Y+"-V").Z>0){a("#"+x.3.T).1f("1G."+x.Y+"-V").2H();4 G="1b";4 C="1b-13";2g(O){17"R":G="1c";C="13-1c";16;17"S":G="1b";C="1b-13";16;17"1c":G="R";C="13-R";16;17"1b":G="S";C="S-13";16}a("#"+x.3.T).1f("14."+x.Y+"-"+C).2D();a("#"+x.3.T).1f("14."+x.Y+"-"+C).2p(\'<1G 2o="\'+H+"V-"+G+"."+(x.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+x.Y+\'-V" />\');q(x)}5(x.2q==U){5(I.S<a(1q).2i()||I.S+M>a(1q).2i()+a(1q).1o()){5(a("#"+x.3.T).Z>0&&a("#"+x.3.T).1f("1G."+x.Y+"-V").Z>0){a("#"+x.3.T).1f("1G."+x.Y+"-V").2H()}4 B="";5(I.S<a(1q).2i()){I.15="1b";I.S=t+L+z+w;5(a("#"+x.3.T).Z>0&&!x.V.1F){a("#"+x.3.T).1f("14."+x.Y+"-S-13").2D();a("#"+x.3.T).1f("14."+x.Y+"-S-13").2p(\'<1G 2o="\'+H+"V-S."+(x.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+x.Y+\'-V" />\');B="S-13"}}1d{5(I.S+M>a(1q).2i()+a(1q).1o()){I.15="S";I.S=t-M-z+l(w);5(a("#"+x.3.T).Z>0&&!x.V.1F){a("#"+x.3.T).1f("14."+x.Y+"-1b-13").2D();a("#"+x.3.T).1f("14."+x.Y+"-1b-13").2p(\'<1G 2o="\'+H+"V-1b."+(x.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+x.Y+\'-V" />\');B="1b-13"}}}5(I.R<0){I.R=0;5(B.Z>0){a("#"+x.3.T).1f("14."+x.Y+"-"+B).1k("3a-11","27")}}1d{5(I.R+v>a(1q).1p()){I.R=a(1q).1p()-v;5(B.Z>0){a("#"+x.3.T).1f("14."+x.Y+"-"+B).1k("3a-11","27")}}}}1d{5(I.R<0||I.R+v>a(1q).1p()){5(a("#"+x.3.T).Z>0&&a("#"+x.3.T).1f("1G."+x.Y+"-V").Z>0){a("#"+x.3.T).1f("1G."+x.Y+"-V").2H()}4 B="";5(I.R<0){I.15="1c";I.R=y+P+z+J;5(a("#"+x.3.T).Z>0&&!x.V.1F){a("#"+x.3.T).1f("14."+x.Y+"-13-R").2D();a("#"+x.3.T).1f("14."+x.Y+"-13-R").2p(\'<1G 2o="\'+H+"V-R."+(x.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+x.Y+\'-V" />\');B="13-R"}}1d{5(I.R+v>a(1q).1p()){I.15="R";I.R=y-v-z+l(J);5(a("#"+x.3.T).Z>0&&!x.V.1F){a("#"+x.3.T).1f("14."+x.Y+"-13-1c").2D();a("#"+x.3.T).1f("14."+x.Y+"-13-1c").2p(\'<1G 2o="\'+H+"V-1c."+(x.1i==U?(a.1l.1D?"1C":"2n"):"1C")+\'" 2w="" 1y="\'+x.Y+\'-V" />\');B="13-1c"}}}5(I.S<a(1q).2i()){I.S=a(1q).2i();5(B.Z>0){a("#"+x.3.T).1f("14."+x.Y+"-"+B).1k("39-11","13")}}1d{5(I.S+M>a(1q).2i()+a(1q).1o()){I.S=(a(1q).2i()+a(1q).1o())-M;5(B.Z>0){a("#"+x.3.T).1f("14."+x.Y+"-"+B).1k("39-11","13")}}}}}}12 I}6 d(u,t){a(u).1K(r.2Y,t)}6 n(t){12 a(t).1K(r.2Y)}6 i(t){4 u=t!=X&&7 t=="1a"&&!a.19(t)&&!a.18(t)?U:Q;12 u}6 h(t){a(1q).3Q(6(){a(r.2J).1g(6(u,v){a(v).1e("2G")})});a(2W).3R(6(u){a(r.2J).1g(6(v,w){a(w).1e("33",[u.3S,u.3T])})});a(r.2J).1g(6(v,w){4 u=g(t);u.3.1L=f();u.3.T=u.Y+"-"+u.3.1L+"-"+v;d(w,u);a(w).2f("33",6(y,C,B){4 N=n(W);5(i(N)&&i(N.3)&&7 C!="1w"&&7 B!="1w"){5(N.2k){4 E=a(W);4 z=E.2F();4 L=10(z.S);4 H=10(z.R);4 F=10(E.2v(Q));4 K=10(E.2u(Q));4 J=Q;5(H<=C&&C<=F+H&&L<=B&&B<=K+L){J=U}1d{J=Q}5(J&&!N.3.1Y){N.3.1Y=U;d(W,N);5(N.23=="2E"){a(W).1e("2s")}1d{5(N.22&&a("#"+N.3.T).Z>0){4 x=a("#"+N.3.T);4 A=x.2F();4 D=10(A.S);4 I=10(A.R);4 G=10(x.2v(Q));4 M=10(x.2u(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1d{a(W).1e("28")}}1d{a(W).1e("28")}}}1d{5(!J&&N.3.1Y){N.3.1Y=Q;d(W,N);5(N.26=="2E"){a(W).1e("2s")}1d{5(N.22&&a("#"+N.3.T).Z>0){4 x=a("#"+N.3.T);4 A=x.2F();4 D=10(A.S);4 I=10(A.R);4 G=10(x.2v(Q));4 M=10(x.2u(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1d{a(W).1e("28")}}1d{a(W).1e("28")}}}1d{5(!J&&!N.3.1Y){5(N.22&&a("#"+N.3.T).Z>0&&!N.3.1r){4 x=a("#"+N.3.T);4 A=x.2F();4 D=10(A.S);4 I=10(A.R);4 G=10(x.2v(Q));4 M=10(x.2u(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1d{a(W).1e("28")}}}}}}}});a(w).2f("2S",6(A,x,z){4 y=n(W);5(i(y)&&i(y.3)&&7 x!="1w"){y.3.1W=f();5(7 z=="1I"&&z==U){y.1H=x}d(W,y);5(a("#"+y.3.T).Z>0){a("#"+y.3.T).1f("14."+y.Y+"-1H").2p(x);5(y.3.1A){a(W).1e("2G",[Q])}1d{a(W).1e("2G",[U])}}}});a(w).2f("30",6(A,z){4 x=n(W);5(i(x)&&i(x.3)){4 y=x;x=g(z);x.3.T=y.3.T;x.3.1L=y.3.1L;x.3.1W=f();x.3.1V=y.3.1V;x.3.1v=y.3.1v;x.3.1J=y.3.1J;x.3.25={};d(W,x)}});a(w).2f("2G",6(A,y){4 z=n(W);5(i(z)&&i(z.3)&&a("#"+z.3.T).Z>0&&z.3.1v==U){4 x=a("#"+z.3.T);4 C=c(x,a(W),z);4 B=2;5(7 y=="1I"&&y==U){x.1k({S:C.S,R:C.R})}1d{2g(z.15){17"R":x.1k({S:C.S,R:(C.15!=z.15?C.R-(1s.1t(z.1h.1E)*B):C.R+(1s.1t(z.1h.1E)*B))});16;17"S":x.1k({S:(C.15!=z.15?C.S-(1s.1t(z.1h.1E)*B):C.S+(1s.1t(z.1h.1E)*B)),R:C.R});16;17"1c":x.1k({S:C.S,R:(C.15!=z.15?C.R+(1s.1t(z.1h.1E)*B):C.R-(1s.1t(z.1h.1E)*B))});16;17"1b":x.1k({S:(C.15!=z.15?C.S+(1s.1t(z.1h.1E)*B):C.S-(1s.1t(z.1h.1E)*B)),R:C.R});16}}}});a(w).2f("2L",6(){4 x=n(W);5(i(x)&&i(x.3)){x.3.1J=U;d(W,x)}});a(w).2f("2x",6(){4 x=n(W);5(i(x)&&i(x.3)){x.3.1J=Q;d(W,x)}});a(w).2f("2s",6(x,A,D,G){4 H=n(W);5((7 G=="1I"&&G==U&&(i(H)&&i(H.3)))||(7 G=="1w"&&(i(H)&&i(H.3)&&!H.3.1J&&!H.3.1v))){5(7 G=="1I"&&G==U){a(W).1e("2x")}H.3.1v=U;H.3.1J=Q;H.3.1r=Q;H.3.1A=Q;5(i(H.3.25)){H=H.3.25}1d{H.3.25={}}5(i(A)){4 C=H;4 F=f();H=g(A);H.3.T=C.3.T;H.3.1L=C.3.1L;H.3.1W=F;H.3.1V=F;H.3.1v=U;H.3.1J=Q;H.3.1r=Q;H.3.1A=Q;H.3.1Y=C.3.1Y;H.3.1B=C.3.1B;H.3.25={};5(7 D=="1I"&&D==Q){C.3.1W=F;C.3.1V=F;H.3.25=C}}d(W,H);b(H);5(a("#"+H.3.T).Z>0){a("#"+H.3.T).2H()}4 y={};4 B=p(H);y=a(B);y.3V("3W");y=a("#"+H.3.T);y.1k({24:0,S:"3r",R:"3r",15:"3Z",2C:"41"});5(H.1i==U){5(a.1l.1D&&10(a.1l.2t)<9){a("#"+H.3.T+" 38").2B(H.Y+"-2e")}}q(H);4 E=c(y,a(W),H);y.1k({S:E.S,R:E.R});5(E.15==H.15){H.3.1B=Q}1d{H.3.1B=U}d(W,H);4 z=3l(6(){H.3.1r=U;d(w,H);y.3k();2g(H.15){17"R":y.2d({24:1,R:(H.3.1B?"-=":"+=")+H.1n+"1Z"},H.1M,"2j",6(){H.3.1r=Q;H.3.1A=U;d(w,H);5(H.1i==U){5(a.1l.1D&&10(a.1l.2t)>8){y.2B(H.Y+"-2e")}}H.1T()});16;17"S":y.2d({24:1,S:(H.3.1B?"-=":"+=")+H.1n+"1Z"},H.1M,"2j",6(){H.3.1r=Q;H.3.1A=U;d(w,H);5(H.1i==U){5(a.1l.1D&&10(a.1l.2t)>8){y.2B(H.Y+"-2e")}}H.1T()});16;17"1c":y.2d({24:1,R:(H.3.1B?"+=":"-=")+H.1n+"1Z"},H.1M,"2j",6(){H.3.1r=Q;H.3.1A=U;d(w,H);5(H.1i==U){5(a.1l.1D&&10(a.1l.2t)>8){y.2B(H.Y+"-2e")}}H.1T()});16;17"1b":y.2d({24:1,S:(H.3.1B?"+=":"-=")+H.1n+"1Z"},H.1M,"2j",6(){H.3.1r=Q;H.3.1A=U;d(w,H);5(H.1i==U){5(a.1l.1D&&10(a.1l.2t)>8){y.2B(H.Y+"-2e")}}H.1T()});16}},H.29)}});a(w).2f("28",6(B,x){4 A=n(W);5((7 x=="1I"&&x==U&&(i(A)&&i(A.3)&&a("#"+A.3.T).Z>0))||(7 x=="1w"&&(i(A)&&i(A.3)&&a("#"+A.3.T).Z>0&&!A.3.1J&&A.3.1v))){5(7 x=="1I"&&x==U){a(W).1e("2x")}A.3.1r=Q;A.3.1A=Q;d(W,A);4 y=a("#"+A.3.T);4 z=7 x=="1w"?A.2a:0;4 C=3l(6(){A.3.1r=U;d(w,A);y.3k();5(A.1i==U){5(a.1l.1D&&10(a.1l.2t)>8){y.49(A.Y+"-2e")}}2g(A.15){17"R":y.2d({24:0,R:(A.3.1B?"+=":"-=")+A.1n+"1Z"},A.1P,"2j",6(){A.3.1v=Q;A.3.1r=Q;A.3.1A=U;d(w,A);y.1k("2C","2N");A.1S()});16;17"S":y.2d({24:0,S:(A.3.1B?"+=":"-=")+A.1n+"1Z"},A.1P,"2j",6(){A.3.1v=Q;A.3.1r=Q;A.3.1A=U;d(w,A);y.1k("2C","2N");A.1S()});16;17"1c":y.2d({24:0,R:(A.3.1B?"-=":"+=")+A.1n+"1Z"},A.1P,"2j",6(){A.3.1v=Q;A.3.1r=Q;A.3.1A=U;d(w,A);y.1k("2C","2N");A.1S()});16;17"1b":y.2d({24:0,S:(A.3.1B?"-=":"+=")+A.1n+"1Z"},A.1P,"2j",6(){A.3.1v=Q;A.3.1r=Q;A.3.1A=U;d(w,A);y.1k("2C","2N");A.1S()});16}},z);A.3.1V=f();A.3.1J=Q;d(W,A);s(A)}})})}12 W}})(4b);', 62, 266, "|||privateVars|var|if|function|typeof|||||||||||||||||||||||||||||||||||||||||||||false|left|top|id|true|tail|this|null|baseClass|length|parseInt|align|return|middle|td|position|break|case|isEmptyObject|isArray|object|bottom|right|else|trigger|find|each|themeMargins|dropShadow|fn|css|browser|hideElementId|distance|height|width|window|is_animating|Math|abs|tableStyle|is_open|undefined|divStyle|class|replace|is_animation_complete|is_position_changed|gif|msie|difference|hidden|img|innerHtml|boolean|is_freezed|data|creation_datetime|openingSpeed|BASE_CLASS|innerHtmlStyle|closingSpeed|string|for|afterHidden|afterShown|private_jquerybubblepopup_options|last_display_datetime|last_modified_datetime|toLowerCase|is_mouse_over|px|MIDDLE|themeName|selectable|mouseOver|opacity|last_options|mouseOut|center|hidebubblepopup|openingDelay|closingDelay|themePath|number|animate|ie|bind|switch|unbind|scrollTop|swing|manageMouseEvents|BOTTOM|TOP|png|src|html|alwaysVisible|in|showbubblepopup|version|outerHeight|outerWidth|alt|unfreezebubblepopup|tr|new|total|addClass|display|empty|show|offset|positionbubblepopup|remove|substring|me|alignHorizontalValues|freezebubblepopup|style|none|LEFT|RIGHT|Date|1000|setbubblepopupinnerhtml|INNERHTML|RIGHT_STYLE|hide|document|cache|options_key|LEFT_STYLE|setbubblepopupoptions|INNERHTML_STYLE|alignVerticalValues|managebubblepopup|visibility|alignValues|DIV_STYLE|DIV_ID|table|vertical|text|TABLE_STYLE|tbody|trim|jquerybubblepopup|visible|TEMPLATE_CLASS|250|div|model_markup|stop|setTimeout|charAt|model_td|mouseOutValues|Array|createElement|0px|push|mouseOverValues|MIDDLE_STYLE|positionValues|model_tr|HasBubblePopup|while|indexOf|round|getTime|IsBubblePopupOpen|GetBubblePopupID|extend|azure|GetBubblePopupCreationDateTime|GetBubblePopupMarkup|url|CreateBubblePopup|image|background|UnfreezeAllBubblePopups|UnfreezeBubblePopup|FreezeAllBubblePopups|FreezeBubblePopup|resize|mousemove|pageX|pageY|HideAllBubblePopups|appendTo|body|HideBubblePopup|20px|absolute|_STYLE|block|toUpperCase|10px|delete|GetBubblePopupLastDisplayDateTime|ShowAllBubblePopups|ShowBubblePopup|GetBubblePopupOptions|removeClass|13px|jQuery|SetBubblePopupOptions|GetBubblePopupLastModifiedDateTime|SetBubblePopupInnerHtml|theme|inArray|RemoveBubblePopup".split("|"), 0, {}));
(function(b) {
    b.fn.extend({counter: function(a) {
            a = b.extend({}, {type: "char",count: "down",goal: 140}, a);
            var d = false;
            return this.each(function() {
                function e(c) {
                    if (typeof a.type === "string") {
                        switch (a.type) {
                            case "char":
                                if (a.count === "down") {
                                    g = " character(s) left";
                                    return a.goal - c;
                                } else {
                                    if (a.count === "up") {
                                        g = " characters (" + a.goal + " max)";
                                        return c;
                                    }
                                }
                                break;
                            case "word":
                                if (a.count === "down") {
                                    g = " word(s) left";
                                    return a.goal - c;
                                } else {
                                    if (a.count === "up") {
                                        g = " words (" + a.goal + " max)";
                                        return c;
                                    }
                                }
                                break;
                            default:
                        }
                    }
                }
                var g, f = b(this);
                b('<div id="' + this.id + '_counter"><span>' + e(b(f).val().length) + "</span>" + g + "</div>").insertAfter(f);
                var i = b("#" + this.id + "_counter span");
                f.bind("keyup click blur focus change paste", function(c) {
                    switch (a.type) {
                        case "char":
                            c = b(f).val().length;
                            break;
                        case "word":
                            c = f.val() === "" ? 0 : b.trim(f.val()).replace(/\s+/g, " ").split(" ").length;
                            break;
                        default:
                    }
                    switch (a.count) {
                        case "up":
                            if (e(c) >= a.goal && a.type === "char") {
                                b(this).val(b(this).val().substring(0, a.goal));
                                d = true;
                                break;
                            }
                            if (e(c) === a.goal && a.type === "word") {
                                d = true;
                                break;
                            } else {
                                if (e(c) > a.goal && a.type === "word") {
                                    b(this).val("");
                                    i.text("0");
                                    d = true;
                                    break;
                                }
                            }
                            break;
                        case "down":
                            if (e(c) <= 0 && a.type === "char") {
                                b(this).val(b(this).val().substring(0, a.goal));
                                d = true;
                                break;
                            }
                            if (e(c) === 0 && a.type === "word") {
                                d = true;
                            } else {
                                if (e(c) < 0 && a.type === "word") {
                                    b(this).val("");
                                    d = true;
                                    break;
                                }
                            }
                            break;
                        default:
                    }
                    f.keydown(function(h) {
                        if (d) {
                            this.focus();
                            if (h.keyCode !== 46 && h.keyCode !== 8) {
                                if (b(this).val().length > a.goal && a.type === "char") {
                                    b(this).val(b(this).val().substring(0, a.goal));
                                    return false;
                                } else {
                                    return h.keyCode !== 32 && h.keyCode !== 8 && a.type === "word" ? true : false;
                                }
                            } else {
                                d = false;
                                return true;
                            }
                        }
                    });
                    i.text(e(c));
                });
            });
        }});
})(jQuery);
(function(d) {
    var k = d.scrollTo = function(a, i, e) {
        d(window).scrollTo(a, i, e);
    };
    k.defaults = {axis: "xy",duration: parseFloat(d.fn.jquery) >= 1.3 ? 0 : 1};
    k.window = function(a) {
        return d(window)._scrollable();
    };
    d.fn._scrollable = function() {
        return this.map(function() {
            var a = this, i = !a.nodeName || d.inArray(a.nodeName.toLowerCase(), ["iframe", "#document", "html", "body"]) != -1;
            if (!i) {
                return a;
            }
            var e = (a.contentWindow || a).document || a.ownerDocument || a;
            return d.browser.safari || e.compatMode == "BackCompat" ? e.body : e.documentElement;
        });
    };
    d.fn.scrollTo = function(n, j, b) {
        if (typeof j == "object") {
            b = j;
            j = 0;
        }
        if (typeof b == "function") {
            b = {onAfter: b};
        }
        if (n == "max") {
            n = 9000000000;
        }
        b = d.extend({}, k.defaults, b);
        j = j || b.speed || b.duration;
        b.queue = b.queue && b.axis.length > 1;
        if (b.queue) {
            j /= 2;
        }
        b.offset = p(b.offset);
        b.over = p(b.over);
        return this._scrollable().each(function() {
            var q = this, r = d(q), f = n, s, g = {}, u = r.is("html,body");
            switch (typeof f) {
                case "number":
                case "string":
                    if (/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)) {
                        f = p(f);
                        break;
                    }
                    f = d(f, this);
                case "object":
                    if (f.is || f.style) {
                        s = (f = d(f)).offset();
                    }
            }
            d.each(b.axis.split(""), function(a, i) {
                var e = i == "x" ? "Left" : "Top", h = e.toLowerCase(), c = "scroll" + e, l = q[c], m = k.max(q, i);
                if (s) {
                    g[c] = s[h] + (u ? 0 : l - r.offset()[h]);
                    if (b.margin) {
                        g[c] -= parseInt(f.css("margin" + e)) || 0;
                        g[c] -= parseInt(f.css("border" + e + "Width")) || 0;
                    }
                    g[c] += b.offset[h] || 0;
                    if (b.over[h]) {
                        g[c] += f[i == "x" ? "width" : "height"]() * b.over[h];
                    }
                } else {
                    var o = f[h];
                    g[c] = o.slice && o.slice(-1) == "%" ? parseFloat(o) / 100 * m : o;
                }
                if (/^\d+$/.test(g[c])) {
                    g[c] = g[c] <= 0 ? 0 : Math.min(g[c], m);
                }
                if (!a && b.queue) {
                    if (l != g[c]) {
                        t(b.onAfterFirst);
                    }
                    delete g[c];
                }
            });
            t(b.onAfter);
            function t(a) {
                r.animate(g, j, b.easing, a && function() {
                    a.call(this, n, b);
                });
            }
        }).end();
    };
    k.max = function(a, i) {
        var e = i == "x" ? "Width" : "Height", h = "scroll" + e;
        if (!d(a).is("html,body")) {
            return a[h] - d(a)[e.toLowerCase()]();
        }
        var c = "client" + e, l = a.ownerDocument.documentElement, m = a.ownerDocument.body;
        return Math.max(l[h], m[h]) - Math.min(l[c], m[c]);
    };
    function p(a) {
        return typeof a == "object" ? a : {top: a,left: a};
    }
})(jQuery);
(function($) {
    function Tipsy(element, options) {
        this.$element = $(element);
        this.options = options;
        this.enabled = true;
        this.fixTitle();
    }
    Tipsy.prototype = {show: function() {
            var title = this.getTitle();
            if (title && this.enabled) {
                var $tip = this.tip();
                var appendContainer = $(this.options.appendTo || "body");
                $tip.find(".tipsy-inner")[this.options.html ? "html" : "text"](title);
                $tip[0].className = "tipsy";
                var elem = $tip.remove().css({top: 0,left: 0,visibility: "hidden",display: "block"});
                elem.appendTo(appendContainer);
                var pos = $.extend({}, this.$element.offset(), {width: this.$element[0].offsetWidth,height: this.$element[0].offsetHeight});
                var actualWidth = $tip[0].offsetWidth, actualHeight = $tip[0].offsetHeight;
                var gravity = (typeof this.options.gravity == "function") ? this.options.gravity.call(this.$element[0]) : this.options.gravity;
                var tp;
                switch (gravity.charAt(0)) {
                    case "n":
                        tp = {top: pos.top + pos.height + this.options.offset,left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case "s":
                        tp = {top: pos.top - actualHeight - this.options.offset,left: pos.left + pos.width / 2 - actualWidth / 2};
                        break;
                    case "e":
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2,left: pos.left - actualWidth - this.options.offset};
                        break;
                    case "w":
                        tp = {top: pos.top + pos.height / 2 - actualHeight / 2,left: pos.left + pos.width + this.options.offset};
                        break;
                }
                if (gravity.length == 2) {
                    if (gravity.charAt(1) == "w") {
                        tp.left = pos.left + pos.width / 2 - 15;
                    } else {
                        tp.left = pos.left + pos.width / 2 - actualWidth + 15;
                    }
                }
                $tip.css(tp).addClass("tipsy-" + gravity);
                if (this.options.fade) {
                    $tip.stop().css({opacity: 0,display: "block",visibility: "visible"}).animate({opacity: this.options.opacity});
                } else {
                    $tip.css({visibility: "visible",opacity: this.options.opacity});
                }
            }
        },hide: function() {
            if (this.options.fade) {
                this.tip().stop().fadeOut(function() {
                    $(this).remove();
                });
            } else {
                this.tip().remove();
            }
        },fixTitle: function() {
            var $e = this.$element;
            if ($e.attr("title") || typeof ($e.attr("original-title")) != "string") {
                $e.attr("original-title", $e.attr("title") || "").removeAttr("title");
            }
        },getTitle: function() {
            var title, $e = this.$element, o = this.options;
            this.fixTitle();
            var title, o = this.options;
            if (typeof o.title == "string") {
                title = $e.attr(o.title == "title" ? "original-title" : o.title);
            } else {
                if (typeof o.title == "function") {
                    title = o.title.call($e[0]);
                }
            }
            title = ("" + title).replace(/(^\s*|\s*$)/, "");
            return title || o.fallback;
        },tip: function() {
            if (!this.$tip) {
                this.$tip = $('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');
            }
            return this.$tip;
        },validate: function() {
            if (!this.$element[0].parentNode) {
                this.hide();
                this.$element = null;
                this.options = null;
            }
        },enable: function() {
            this.enabled = true;
        },disable: function() {
            this.enabled = false;
        },toggleEnabled: function() {
            this.enabled = !this.enabled;
        }};
    $.fn.tipsy = function(options) {
        if (options === true) {
            return this.data("tipsy");
        } else {
            if (typeof options == "string") {
                var tipsy = this.data("tipsy");
                if (tipsy) {
                    tipsy[options]();
                }
                return this;
            }
        }
        options = $.extend({}, $.fn.tipsy.defaults, options);
        function get(ele) {
            var tipsy = $.data(ele, "tipsy");
            if (!tipsy) {
                tipsy = new Tipsy(ele, $.fn.tipsy.elementOptions(ele, options));
                $.data(ele, "tipsy", tipsy);
            }
            return tipsy;
        }
        function enter() {
            var tipsy = get(this);
            tipsy.hoverState = "in";
            if (options.delayIn == 0) {
                tipsy.show();
            } else {
                tipsy.fixTitle();
                setTimeout(function() {
                    if (tipsy.hoverState == "in") {
                        tipsy.show();
                    }
                }, options.delayIn);
            }
        }
        function leave() {
            var tipsy = get(this);
            tipsy.hoverState = "out";
            if (options.delayOut == 0) {
                tipsy.hide();
            } else {
                setTimeout(function() {
                    if (tipsy.hoverState == "out") {
                        tipsy.hide();
                    }
                }, options.delayOut);
            }
        }
        if (!options.live) {
            this.each(function() {
                get(this);
            });
        }
        if (options.trigger != "manual") {
            var binder = options.live ? "live" : "bind", eventIn = options.trigger == "hover" ? "mouseenter" : "focus", eventOut = options.trigger == "hover" ? "mouseleave" : "blur";
            this[binder](eventIn, enter)[binder](eventOut, leave);
        }
        return this;
    };
    $.fn.tipsy.defaults = {delayIn: 0,delayOut: 0,fade: false,fallback: "",gravity: "n",html: false,live: false,offset: 0,opacity: 0.8,title: "title",trigger: "hover"};
    $.fn.tipsy.elementOptions = function(ele, options) {
        return $.metadata ? $.extend({}, options, $(ele).metadata()) : options;
    };
    $.fn.tipsy.autoNS = function() {
        return $(this).offset().top > ($(document).scrollTop() + $(window).height() / 2) ? "s" : "n";
    };
    $.fn.tipsy.autoWE = function() {
        return $(this).offset().left > ($(document).scrollLeft() + $(window).width() / 2) ? "e" : "w";
    };
})(jQuery);
var Surface = {};
Surface.Application = {};
Surface.Modifier = {};
Surface.components = [];
Surface.hasFirebug = typeof console != "undefined";
Surface.translations = {};
Surface.logger = function(args, level) {
    if (!level) {
        level = "debug";
    }
    try {
        if (!(level in console)) {
            level = "info";
        }
        var argList = "";
        if (level == "debug") {
            try {
                var x;
                x.y;
            } catch (e) {
                if (e.stack) {
                    try {
                        var location = "";
                        var errorLine;
                        if (e["arguments"]) {
                            errorLine = e.stack.split("\n")[3];
                            if (errorLine.indexOf("<anonymous>") == -1) {
                                location = errorLine.replace(/^.*?\(/, "").replace(/:\d*\)$/, "");
                            }
                        } else {
                            errorLine = e.stack.split("\n")[2];
                            if (errorLine.indexOf("with(_FirebugCommandLine)") == -1) {
                                location = errorLine.replace(/^.*@/, "");
                            }
                        }
                        location = location.replace(/^.*?\d\//, "/");
                        argList += "'Surface Debug" + (location != "" ? " " + location : "") + ":\\n'";
                    } catch (e) {
                    }
                }
            }
        }
        for (var i = 0; i < args.length; i++) {
            argList += (argList != "" ? ", " : "") + "args[" + i + "]";
        }
        eval("console." + level + "(" + argList + ")");
    } catch (e) {
    }
};
Surface.log = function() {
    Surface.logger(arguments, "log");
};
Surface.debug = function() {
    Surface.logger(arguments, "debug");
};
Surface.info = function() {
    Surface.logger(arguments, "info");
};
Surface.warn = function() {
    Surface.logger(arguments, "warn");
};
Surface.error = function() {
    Surface.logger(arguments, "error");
};
Surface.raise = function(s) {
    throw new Error(s);
};
Surface.info("Surface logging enabled");
Surface.Component = function(name) {
    Surface.components.push(this);
    this.name = name;
    this.methodsToHash = {};
    this.methodHashes = [];
    this.addTemplate = function(template) {
        var templateName = "";
        var template_prefix = template.name.substr(0, template.name.indexOf("_"));
        var template_postfix = template.name.substr(template.name.indexOf("_") + 1);
        if (typeof (this[template.name]) != "undefined") {
            Surface.raise("Member '" + template.name + "' in component '" + this.name + "' collides with a template name.");
        }
        if (template_prefix == this.name) {
            templateName = template_postfix;
            if (typeof (this[template_postfix]) != "undefined") {
                Surface.raise("Member '" + template_postfix + " in component " + this.name + "' collides with a template name.");
            }
            this[template_postfix] = template;
        }
        this[template.name] = template;
    };
    this.extend = function(obj) {
        for (var attr in obj) {
            if (typeof this[attr] == "undefined") {
                this[attr] = obj[attr];
                if (typeof (this[attr]) == "function") {
                    this.methodsToHash[attr] = this[attr];
                }
            } else {
                Surface.raise("User created attribute '" + this.name + "." + attr + "' is reserved by Surface. Please rename it.");
            }
        }
    };
};
Surface.SingleSurface = function(name) {
    this.name = name;
    var parts = name.split(".");
    this.component = parts[0];
    this.id = parts.pop();
    this.getId = function() {
        return this.id;
    };
    this.getBlockConfig = function() {
        if (Surface.Renderer.state.blockConfig[this.id] !== undefined) {
            return Surface.Renderer.state.blockConfig[this.id];
        } else {
            Surface.warn("Couldn't retrieve blockConfig for surface " + this.name);
            return Surface.BlockConfig("", {});
        }
    }, this.getState = function() {
        if (Surface.Renderer.state.surface[this.id] !== undefined) {
            return Surface.Renderer.state.surface[this.id];
        } else {
            Surface.warn("Couldn't retrieve state for surface " + this.name);
            return {};
        }
    };
    this.setState = function(newState) {
        Surface.Renderer.state.surface[this.id] = newState;
    };
    this.clearState = function() {
        Surface.Renderer.state.surface[this.id] = {};
    };
    this.createElement = function(itemState) {
        var usage = "Usage: " + this.name + ".createElement(itemState)";
        if (arguments.length > 0) {
            return Surface.Renderer.createElement(this.createHTML(itemState));
        } else {
            Surface.raise("In call to " + this.name + ".createElement(): No arguments given\n    " + usage);
        }
    };
    this.createHTML = function(itemState) {
        var usage = "Usage: " + this.name + ".createElement(itemState)";
        if (arguments.length > 0) {
            return this.render(itemState, this.getBlockConfig());
        } else {
            Surface.raise("In call to " + this.name + ".createHTML(): No arguments given\n    " + usage);
        }
    };
    this.update = function(itemState) {
        if (arguments.length == 0) {
            Surface.raise("In call to " + this.name + ".update(): No arguments given\n    Usage: " + this.name + ".update(itemState)");
            return;
        }
        return Surface.Renderer.update(this, itemState);
    };
    this.refresh = function() {
        Surface.Renderer.updateElement(document.getElementById(this.id), this.render(this.getState(), this.getBlockConfig()));
    };
    this.rendered = function() {
        return true;
    };
};
Surface.SurfaceList = function(name, listId, item, uniqueId) {
    this.name = name;
    var parts = name.split(".");
    this.component = parts[0];
    this.id = parts.pop();
    this.listId = listId;
    this.item = item;
    this.uniqueId = uniqueId.replace(item + ".", "");
    this.opts = {"refresh": false,"location": Surface.Location.top};
    this.getId = function(itemState) {
        return this.id + "_" + eval("itemState." + this.uniqueId);
    };
    this.getBlockConfig = function() {
        if (Surface.Renderer.state.blockConfig[this.id] !== undefined) {
            return Surface.Renderer.state.blockConfig[this.id];
        } else {
            Surface.warn("Couldn't retrieve blockConfig for surface list " + this.name);
            return Surface.BlockConfig("", {});
        }
    }, this.getState = function() {
        var s;
        if (Surface.Renderer.state.surface[this.id] !== undefined) {
            s = Surface.Renderer.state.surface[this.id];
        } else {
            Surface.warn("Couldn't retrieve state for surface list " + this.name);
            s = {};
        }
        if (!s[this.listId]) {
            s[this.listId] = [];
        }
        return s;
    };
    this.setState = function(state) {
        Surface.Renderer.state.surface[this.id] = state;
    };
    this.clearState = function() {
        Surface.Renderer.state.surface[this.id] = {};
    };
    this.getUniqueValue = function(itemState) {
        try {
            return eval("itemState." + this.uniqueId);
        } catch (err) {
            Surface.raise("Couldn't find unique value from Surface data");
        }
    };
    this.createElement = function(itemState) {
        if (arguments.length > 0) {
            return Surface.Renderer.createElement(this.createHTML(itemState));
        } else {
            Surface.raise("In call to " + this.name + ".createElement(): No arguments given\n    Usage: " + this.name + ".createElement(itemState)");
        }
    };
    this.createHTML = function(itemState) {
        if (arguments.length > 0) {
            return this.render(itemState, this.getBlockConfig());
        } else {
            Surface.error("In call to " + this.name + ".createHTML(): No arguments given\n    Usage: " + this.name + ".createElement(data)");
        }
    };
    this.remove = function(itemState, opts) {
        var usage = "Usage: " + this.name + ".remove(itemState [, opts])";
        opts = Surface.jQuery.extend(this.opts, opts || {});
        if (arguments.length > 0) {
            if (!this._hasSurfaceId(itemState)) {
                Surface.warn("In call to " + this.name + ".remove(): Data argument does not contain identifier: '" + this.uniqueId + "'\n    " + usage);
            }
            var el = Surface.Renderer.getElement(this.id);
            if (el) {
                return Surface.Renderer.loopItemRemove(this, itemState, el, opts["refresh"]);
            } else {
                Surface.raise("In call to " + this.name + ".remove(): Missing containing HTML element.\n    " + usage);
            }
        } else {
            Surface.raise("In call to " + this.name + ".remove(): No arguments given\n    " + usage);
        }
    };
    this.update = function(itemState, opts) {
        var usage = "Usage: " + this.name + ".update(itemState [, opts])";
        opts = Surface.jQuery.extend(this.opts, opts || {});
        if (arguments.length == 0) {
            Surface.raise("In call to " + this.name + ".update(): No arguments given\n    " + usage);
        } else {
            if (!this._hasSurfaceId(itemState)) {
                Surface.warn("In call to " + this.name + ".update(): Data argument does not contain identifier: '" + this.uniqueId + "'\n    " + usage);
            }
        }
        var container = document.getElementById(this.id);
        return Surface.Renderer.loopItemUpdate(this, itemState, container, opts["refresh"]);
    };
    this.insert = function(itemState, opts) {
        var usage = "Usage: " + this.name + ".insert(itemState [, opts])";
        opts = Surface.jQuery.extend(this.opts, opts || {});
        if (typeof (opts["location"]) != "number") {
            Surface.warn("In call to " + this.name + ".insert(): invalid location argument. Valid argument is e.g. 'Surface.Location.top'\n    " + usage);
            opts["location"] = Surface.Location.top;
        }
        if (!this._hasSurfaceId(itemState)) {
            Surface.warn("In call to " + this.name + ".insert(): Data argument does not contain identifier: '" + this.uniqueId + "'\n    " + usage);
        }
        var container = Surface.Renderer.getElement(this.id);
        return Surface.Renderer.loopItemInsert(this, itemState, container, opts["refresh"], opts["location"]);
    };
    this.replace = function(itemState, opts) {
        opts = opts || {};
        var elementId = this.getId(itemState);
        if (document.getElementById(elementId)) {
            return this.update(itemState, opts);
        } else {
            return this.insert(itemState, opts);
        }
    };
    this.count = function() {
        return this.getState()[this.listId].length;
    };
    this.append = function(divId, itemState) {
        document.getElementById(divId).innerHTML += this.render(itemState, this.getBlockConfig());
    };
    this._hasSurfaceId = function(itemState) {
        try {
            return typeof (eval("itemState." + this.uniqueId)) != "undefined";
        } catch (err) {
            Surface.error(err);
            return false;
        }
    };
    this.refresh = function() {
        Surface.Renderer.updateElement(document.getElementById(this.id), this.render(this.getState(), this.getBlockConfig()));
    };
    this.rendered = function() {
        return true;
    };
};
Surface.EmptySurface = function(id) {
    this.id = id;
    this.rendered = function() {
        return false;
    };
    var _SurfaceAPIMethods = ["update", "insert", "replace", "remove", "getState", "setState", "clearState", "refresh"];
    for (var i = 0; i < _SurfaceAPIMethods.length; i++) {
        var functionName = _SurfaceAPIMethods[i];
        this[functionName] = eval("(function() { Surface.warn('Trying to call " + functionName + '() on non-existing surface $S("' + this.id + "\").') })");
    }
};
Surface.TemplateProxy = function(name) {
    this.name = name;
    this.func = null;
    try {
        this.func = eval(this.name + ".render");
    } catch (e) {
    }
    this.render = function(data) {
        if (this.func == null) {
            Surface.raise("Could not render " + this.name + ". Verify that you have spelled the template name correctly, and that you have added {exportToJs} to the template.");
        } else {
            return this.func(data);
        }
    };
    this.rendered = function() {
        return Surface.$.inArray(this.name, Surface.Renderer.state.usedTemplates) != -1;
    };
};
Surface.Template = function(name) {
    this.name = name;
};
Surface.Block = function(name) {
    this.name = name;
};
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS PUB 180-1
 * Version 2.1a Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Stripped down and modified by Markus Kristo at ESN AB
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */
Surface.sha1 = {chrsz: 8,hash: function(A) {
        return this.binb2hex(this.core_sha1(this.str2binb(A), A.length * this.chrsz));
    },core_sha1: function(N, H) {
        N[H >> 5] |= 128 << (24 - H % 32);
        N[((H + 64 >> 9) << 4) + 15] = H;
        var O = Array(80);
        var M = 1732584193;
        var L = -271733879;
        var K = -1732584194;
        var J = 271733878;
        var I = -1009589776;
        for (var E = 0; E < N.length; E += 16) {
            var G = M;
            var F = L;
            var D = K;
            var C = J;
            var A = I;
            for (var B = 0; B < 80; B++) {
                if (B < 16) {
                    O[B] = N[E + B];
                } else {
                    O[B] = this.rol(O[B - 3] ^ O[B - 8] ^ O[B - 14] ^ O[B - 16], 1);
                }
                var P = this.safe_add(this.safe_add(this.rol(M, 5), this.sha1_ft(B, L, K, J)), this.safe_add(this.safe_add(I, O[B]), this.sha1_kt(B)));
                I = J;
                J = K;
                K = this.rol(L, 30);
                L = M;
                M = P;
            }
            M = this.safe_add(M, G);
            L = this.safe_add(L, F);
            K = this.safe_add(K, D);
            J = this.safe_add(J, C);
            I = this.safe_add(I, A);
        }
        return Array(M, L, K, J, I);
    },sha1_ft: function(B, A, D, C) {
        if (B < 20) {
            return (A & D) | ((~A) & C);
        }
        if (B < 40) {
            return A ^ D ^ C;
        }
        if (B < 60) {
            return (A & D) | (A & C) | (D & C);
        }
        return A ^ D ^ C;
    },sha1_kt: function(A) {
        return (A < 20) ? 1518500249 : (A < 40) ? 1859775393 : (A < 60) ? -1894007588 : -899497514;
    },safe_add: function(A, D) {
        var C = (A & 65535) + (D & 65535);
        var B = (A >> 16) + (D >> 16) + (C >> 16);
        return (B << 16) | (C & 65535);
    },rol: function(A, B) {
        return (A << B) | (A >>> (32 - B));
    },str2binb: function(D) {
        var C = Array();
        var A = (1 << this.chrsz) - 1;
        for (var B = 0; B < D.length * this.chrsz; B += this.chrsz) {
            C[B >> 5] |= (D.charCodeAt(B / this.chrsz) & A) << (32 - this.chrsz - B % 32);
        }
        return C;
    },binb2hex: function(C) {
        var B = "0123456789abcdef";
        var D = "";
        for (var A = 0; A < C.length * 4; A++) {
            D += B.charAt((C[A >> 2] >> ((3 - A % 4) * 8 + 4)) & 15) + B.charAt((C[A >> 2] >> ((3 - A % 4) * 8)) & 15);
        }
        return D;
    }};
/*
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.5.2
*/
if (typeof YAHOO == "undefined" || !YAHOO) {
    var YAHOO = {};
}
YAHOO.namespace = function() {
    var A = arguments, E = null, C, B, D;
    for (C = 0; C < A.length; C = C + 1) {
        D = A[C].split(".");
        E = YAHOO;
        for (B = (D[0] == "YAHOO") ? 1 : 0; B < D.length; B = B + 1) {
            E[D[B]] = E[D[B]] || {};
            E = E[D[B]];
        }
    }
    return E;
};
YAHOO.log = function(D, A, C) {
    var B = YAHOO.widget.Logger;
    if (B && B.log) {
        return B.log(D, A, C);
    } else {
        return false;
    }
};
YAHOO.register = function(A, E, D) {
    var I = YAHOO.env.modules;
    if (!I[A]) {
        I[A] = {versions: [],builds: []};
    }
    var B = I[A], H = D.version, G = D.build, F = YAHOO.env.listeners;
    B.name = A;
    B.version = H;
    B.build = G;
    B.versions.push(H);
    B.builds.push(G);
    B.mainClass = E;
    for (var C = 0; C < F.length; C = C + 1) {
        F[C](B);
    }
    if (E) {
        E.VERSION = H;
        E.BUILD = G;
    } else {
        YAHOO.log("mainClass is undefined for module " + A, "warn");
    }
};
YAHOO.env = YAHOO.env || {modules: [],listeners: []};
YAHOO.env.getVersion = function(A) {
    return YAHOO.env.modules[A] || null;
};
YAHOO.env.ua = function() {
    var C = {ie: 0,opera: 0,gecko: 0,webkit: 0,mobile: null,air: 0};
    var B = navigator.userAgent, A;
    if ((/KHTML/).test(B)) {
        C.webkit = 1;
    }
    A = B.match(/AppleWebKit\/([^\s]*)/);
    if (A && A[1]) {
        C.webkit = parseFloat(A[1]);
        if (/ Mobile\//.test(B)) {
            C.mobile = "Apple";
        } else {
            A = B.match(/NokiaN[^\/]*/);
            if (A) {
                C.mobile = A[0];
            }
        }
        A = B.match(/AdobeAIR\/([^\s]*)/);
        if (A) {
            C.air = A[0];
        }
    }
    if (!C.webkit) {
        A = B.match(/Opera[\s\/]([^\s]*)/);
        if (A && A[1]) {
            C.opera = parseFloat(A[1]);
            A = B.match(/Opera Mini[^;]*/);
            if (A) {
                C.mobile = A[0];
            }
        } else {
            A = B.match(/MSIE\s([^;]*)/);
            if (A && A[1]) {
                C.ie = parseFloat(A[1]);
            } else {
                A = B.match(/Gecko\/([^\s]*)/);
                if (A) {
                    C.gecko = 1;
                    A = B.match(/rv:([^\s\)]*)/);
                    if (A && A[1]) {
                        C.gecko = parseFloat(A[1]);
                    }
                }
            }
        }
    }
    return C;
}();
(function() {
    YAHOO.namespace("util", "widget", "example");
    if ("undefined" !== typeof YAHOO_config) {
        var B = YAHOO_config.listener, A = YAHOO.env.listeners, D = true, C;
        if (B) {
            for (C = 0; C < A.length; C = C + 1) {
                if (A[C] == B) {
                    D = false;
                    break;
                }
            }
            if (D) {
                A.push(B);
            }
        }
    }
})();
YAHOO.lang = YAHOO.lang || {};
(function() {
    var A = YAHOO.lang, C = ["toString", "valueOf"], B = {isArray: function(D) {
            if (D) {
                return A.isNumber(D.length) && A.isFunction(D.splice);
            }
            return false;
        },isBoolean: function(D) {
            return typeof D === "boolean";
        },isFunction: function(D) {
            return typeof D === "function";
        },isNull: function(D) {
            return D === null;
        },isNumber: function(D) {
            return typeof D === "number" && isFinite(D);
        },isObject: function(D) {
            return (D && (typeof D === "object" || A.isFunction(D))) || false;
        },isString: function(D) {
            return typeof D === "string";
        },isUndefined: function(D) {
            return typeof D === "undefined";
        },_IEEnumFix: (YAHOO.env.ua.ie) ? function(F, E) {
            for (var D = 0; D < C.length; D = D + 1) {
                var H = C[D], G = E[H];
                if (A.isFunction(G) && G != Object.prototype[H]) {
                    F[H] = G;
                }
            }
        } : function() {
        },extend: function(H, I, G) {
            if (!I || !H) {
                throw new Error("extend failed, please check that " + "all dependencies are included.");
            }
            var E = function() {
            };
            E.prototype = I.prototype;
            H.prototype = new E();
            H.prototype.constructor = H;
            H.superclass = I.prototype;
            if (I.prototype.constructor == Object.prototype.constructor) {
                I.prototype.constructor = I;
            }
            if (G) {
                for (var D in G) {
                    if (A.hasOwnProperty(G, D)) {
                        H.prototype[D] = G[D];
                    }
                }
                A._IEEnumFix(H.prototype, G);
            }
        },augmentObject: function(H, G) {
            if (!G || !H) {
                throw new Error("Absorb failed, verify dependencies.");
            }
            var D = arguments, F, I, E = D[2];
            if (E && E !== true) {
                for (F = 2; F < D.length; F = F + 1) {
                    H[D[F]] = G[D[F]];
                }
            } else {
                for (I in G) {
                    if (E || !(I in H)) {
                        H[I] = G[I];
                    }
                }
                A._IEEnumFix(H, G);
            }
        },augmentProto: function(G, F) {
            if (!F || !G) {
                throw new Error("Augment failed, verify dependencies.");
            }
            var D = [G.prototype, F.prototype];
            for (var E = 2; E < arguments.length; E = E + 1) {
                D.push(arguments[E]);
            }
            A.augmentObject.apply(this, D);
        },dump: function(D, I) {
            var F, H, K = [], L = "{...}", E = "f(){...}", J = ", ", G = " => ";
            if (!A.isObject(D)) {
                return D + "";
            } else {
                if (D instanceof Date || ("nodeType" in D && "tagName" in D)) {
                    return D;
                } else {
                    if (A.isFunction(D)) {
                        return E;
                    }
                }
            }
            I = (A.isNumber(I)) ? I : 3;
            if (A.isArray(D)) {
                K.push("[");
                for (F = 0, H = D.length; F < H; F = F + 1) {
                    if (A.isObject(D[F])) {
                        K.push((I > 0) ? A.dump(D[F], I - 1) : L);
                    } else {
                        K.push(D[F]);
                    }
                    K.push(J);
                }
                if (K.length > 1) {
                    K.pop();
                }
                K.push("]");
            } else {
                K.push("{");
                for (F in D) {
                    if (A.hasOwnProperty(D, F)) {
                        K.push(F + G);
                        if (A.isObject(D[F])) {
                            K.push((I > 0) ? A.dump(D[F], I - 1) : L);
                        } else {
                            K.push(D[F]);
                        }
                        K.push(J);
                    }
                }
                if (K.length > 1) {
                    K.pop();
                }
                K.push("}");
            }
            return K.join("");
        },substitute: function(S, E, L) {
            var I, H, G, O, P, R, N = [], F, J = "dump", M = " ", D = "{", Q = "}";
            for (; ; ) {
                I = S.lastIndexOf(D);
                if (I < 0) {
                    break;
                }
                H = S.indexOf(Q, I);
                if (I + 1 >= H) {
                    break;
                }
                F = S.substring(I + 1, H);
                O = F;
                R = null;
                G = O.indexOf(M);
                if (G > -1) {
                    R = O.substring(G + 1);
                    O = O.substring(0, G);
                }
                P = E[O];
                if (L) {
                    P = L(O, P, R);
                }
                if (A.isObject(P)) {
                    if (A.isArray(P)) {
                        P = A.dump(P, parseInt(R, 10));
                    } else {
                        R = R || "";
                        var K = R.indexOf(J);
                        if (K > -1) {
                            R = R.substring(4);
                        }
                        if (P.toString === Object.prototype.toString || K > -1) {
                            P = A.dump(P, parseInt(R, 10));
                        } else {
                            P = P.toString();
                        }
                    }
                } else {
                    if (!A.isString(P) && !A.isNumber(P)) {
                        P = "~-" + N.length + "-~";
                        N[N.length] = F;
                    }
                }
                S = S.substring(0, I) + P + S.substring(H + 1);
            }
            for (I = N.length - 1; I >= 0; I = I - 1) {
                S = S.replace(new RegExp("~-" + I + "-~"), "{" + N[I] + "}", "g");
            }
            return S;
        },trim: function(D) {
            try {
                return D.replace(/^\s+|\s+$/g, "");
            } catch (E) {
                return D;
            }
        },merge: function() {
            var G = {}, E = arguments;
            for (var F = 0, D = E.length; F < D; F = F + 1) {
                A.augmentObject(G, E[F], true);
            }
            return G;
        },later: function(K, E, L, G, H) {
            K = K || 0;
            E = E || {};
            var F = L, J = G, I, D;
            if (A.isString(L)) {
                F = E[L];
            }
            if (!F) {
                throw new TypeError("method undefined");
            }
            if (!A.isArray(J)) {
                J = [G];
            }
            I = function() {
                F.apply(E, J);
            };
            D = (H) ? setInterval(I, K) : setTimeout(I, K);
            return {interval: H,cancel: function() {
                    if (this.interval) {
                        clearInterval(D);
                    } else {
                        clearTimeout(D);
                    }
                }};
        },isValue: function(D) {
            return (A.isObject(D) || A.isString(D) || A.isNumber(D) || A.isBoolean(D));
        }};
    A.hasOwnProperty = (Object.prototype.hasOwnProperty) ? function(D, E) {
        return D && D.hasOwnProperty(E);
    } : function(D, E) {
        return !A.isUndefined(D[E]) && D.constructor.prototype[E] !== D[E];
    };
    B.augmentObject(A, B, true);
    YAHOO.util.Lang = A;
    A.augment = A.augmentProto;
    YAHOO.augment = A.augmentProto;
    YAHOO.extend = A.extend;
})();
YAHOO.register("yahoo", YAHOO, {version: "2.5.2",build: "1076"});
/*
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.5.2
*/
YAHOO.namespace("lang");
YAHOO.lang.JSON = {_ESCAPES: /\\["\\\/bfnrtu]/g,_VALUES: /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS: /(?:^|:|,)(?:\s*\[)+/g,_INVALID: /^[\],:{}\s]*$/,_SPECIAL_CHARS: /["\\\x00-\x1f\x7f-\x9f]/g,_PARSE_DATE: /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})Z$/,_CHARS: {"\b": "\\b","\t": "\\t","\n": "\\n","\f": "\\f","\r": "\\r",'"': '\\"',"\\": "\\\\"},_applyFilter: function(C, B) {
        var A = function(E, D) {
            var F, G;
            if (D && typeof D === "object") {
                for (F in D) {
                    if (YAHOO.lang.hasOwnProperty(D, F)) {
                        G = A(F, D[F]);
                        if (G === undefined) {
                            delete D[F];
                        } else {
                            D[F] = G;
                        }
                    }
                }
            }
            return B(E, D);
        };
        if (YAHOO.lang.isFunction(B)) {
            A("", C);
        }
        return C;
    },isValid: function(A) {
        if (!YAHOO.lang.isString(A)) {
            return false;
        }
        return this._INVALID.test(A.replace(this._ESCAPES, "@").replace(this._VALUES, "]").replace(this._BRACKETS, ""));
    },dateToString: function(B) {
        function A(C) {
            return C < 10 ? "0" + C : C;
        }
        return '"' + B.getUTCFullYear() + "-" + A(B.getUTCMonth() + 1) + "-" + A(B.getUTCDate()) + "T" + A(B.getUTCHours()) + ":" + A(B.getUTCMinutes()) + ":" + A(B.getUTCSeconds()) + 'Z"';
    },stringToDate: function(B) {
        if (this._PARSE_DATE.test(B)) {
            var A = new Date();
            A.setUTCFullYear(RegExp.$1, (RegExp.$2 | 0) - 1, RegExp.$3);
            A.setUTCHours(RegExp.$4, RegExp.$5, RegExp.$6);
            return A;
        }
    },parse: function(s, filter) {
        if (this.isValid(s)) {
            return this._applyFilter(eval("(" + s + ")"), filter);
        }
        throw new SyntaxError("parseJSON");
    },stringify: function(C, K, F) {
        var E = YAHOO.lang, H = E.JSON, D = H._CHARS, A = this._SPECIAL_CHARS, B = [];
        var I = function(N) {
            if (!D[N]) {
                var J = N.charCodeAt();
                D[N] = "\\u00" + Math.floor(J / 16).toString(16) + (J % 16).toString(16);
            }
            return D[N];
        };
        var M = function(J) {
            return '"' + J.replace(A, I) + '"';
        };
        var L = H.dateToString;
        var G = function(J, T, R) {
            var W = typeof J, P, Q, O, N, U, V, S;
            if (W === "string") {
                return M(J);
            }
            if (W === "boolean" || J instanceof Boolean) {
                return String(J);
            }
            if (W === "number" || J instanceof Number) {
                return isFinite(J) ? String(J) : "null";
            }
            if (J instanceof Date) {
                return L(J);
            }
            if (E.isArray(J)) {
                for (P = B.length - 1; P >= 0; --P) {
                    if (B[P] === J) {
                        return "null";
                    }
                }
                B[B.length] = J;
                S = [];
                if (R > 0) {
                    for (P = J.length - 1; P >= 0; --P) {
                        S[P] = G(J[P], T, R - 1) || "null";
                    }
                }
                B.pop();
                return "[" + S.join(",") + "]";
            }
            if (W === "object") {
                if (!J) {
                    return "null";
                }
                for (P = B.length - 1; P >= 0; --P) {
                    if (B[P] === J) {
                        return "null";
                    }
                }
                B[B.length] = J;
                S = [];
                if (R > 0) {
                    if (T) {
                        for (P = 0, O = 0, Q = T.length; P < Q; ++P) {
                            if (typeof T[P] === "string") {
                                U = G(J[T[P]], T, R - 1);
                                if (U) {
                                    S[O++] = M(T[P]) + ":" + U;
                                }
                            }
                        }
                    } else {
                        O = 0;
                        for (N in J) {
                            if (typeof N === "string" && E.hasOwnProperty(J, N)) {
                                U = G(J[N], T, R - 1);
                                if (U) {
                                    S[O++] = M(N) + ":" + U;
                                }
                            }
                        }
                    }
                }
                B.pop();
                return "{" + S.join(",") + "}";
            }
            return undefined;
        };
        F = F >= 0 ? F : 1 / 0;
        return G(C, K, F);
    }};
YAHOO.register("json", YAHOO.lang.JSON, {version: "2.5.2",build: "1076"});
Surface.parseJSON = function(str) {
    return YAHOO.lang.JSON.parse(str);
};
Surface.encodeJSON = function(data) {
    return YAHOO.lang.JSON.stringify(data);
};
Surface.developers = eval(String.fromCharCode(40, 102, 117, 110, 99, 116, 105, 111, 110, 40, 41, 32, 123, 32, 83, 117, 114, 102, 97, 99, 101, 46, 105, 110, 102, 111, 40, 34, 72, 97, 118, 101, 32, 97, 32, 115, 119, 101, 101, 116, 32, 100, 97, 121, 33, 32, 47, 32, 84, 104, 101, 32, 80, 108, 97, 110, 101, 116, 32, 100, 101, 118, 101, 108, 111, 112, 101, 114, 115, 32, 40, 74, 111, 110, 97, 116, 97, 110, 32, 39, 74, 111, 110, 116, 97, 116, 97, 110, 39, 32, 72, 101, 121, 109, 97, 110, 44, 32, 82, 111, 110, 110, 105, 101, 32, 39, 82, 111, 110, 107, 97, 110, 39, 32, 75, 111, 108, 101, 104, 109, 97, 105, 110, 101, 110, 44, 32, 77, 97, 114, 107, 117, 115, 32, 39, 80, 111, 112, 112, 101, 39, 32, 75, 114, 105, 115, 116, 111, 44, 32, 77, 97, 114, 99, 117, 115, 32, 39, 78, 117, 108, 108, 115, 115, 111, 110, 39, 32, 78, 105, 108, 115, 115, 111, 110, 44, 32, 72, 229, 107, 97, 110, 32, 39, 77, 97, 110, 104, 111, 108, 101, 39, 32, 82, 111, 115, 101, 110, 104, 111, 114, 110, 41, 34, 41, 59, 32, 125, 41, 59));
Surface.valOut = function(obj) {
    if (typeof (obj) == "string") {
        return Surface.Modifier.htmlspecialchars(obj);
    } else {
        if (typeof (obj) == "boolean") {
            return obj ? "True" : "False";
        } else {
            return obj;
        }
    }
};
Surface.importTemplate = function(_template, _arg, _blocks, _kwargs) {
    if (_template.search("\\.") < 0) {
        _template += ".index";
    }
    _kwargs = _kwargs || {};
    var _component_name = _template.split(".")[0];
    var _template_name = _template.replace(_component_name + ".", "").replace(".", "_");
    var _render;
    try {
        _render = eval(_component_name + "." + _template_name + ".render");
    } catch (e) {
    }
    if (_render) {
        return _render(_arg, _blocks, _kwargs);
    } else {
        Surface.warn("Could not render " + _template + ". Verify that you have spelled the template name correctly, and that you have added {exportToJs} to the template.");
        return "";
    }
};
Surface.cookieSet = function(name, value, days, path) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    }
    if (!path) {
        path = "/";
    }
    document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=" + path;
};
Surface.cookieGet = function(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(";");
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == " ") {
            c = c.substring(1, c.length);
        }
        if (c.indexOf(nameEQ) == 0) {
            return decodeURIComponent(c.substring(nameEQ.length, c.length));
        }
    }
    return "";
};
Surface.cookieExpire = function(name) {
    Surface.cookieSet(name, "", -1);
};
Surface.Event = function(name, data) {
    this.name = name;
    if (data != undefined) {
        this.data = data;
    } else {
        this.data = {};
    }
};
Surface.Event.prototype.dispatch = function(data) {
    if (data != undefined) {
        this.data = data;
    }
    Surface.EventHandler.dispatch(this);
};
Surface.EventHandler = {Callback: function(func, scope) {
        this.func = func;
        this.scope = scope;
    },listeners: {},addListener: function(surfaceEvent, callback, scope) {
        if (typeof (surfaceEvent) == "string") {
            surfaceEvent = new Surface.Event(surfaceEvent);
        }
        if (this.listeners[surfaceEvent.name] == undefined) {
            this.listeners[surfaceEvent.name] = new Array();
        }
        if (scope == undefined) {
            scope = this;
        }
        this.listeners[surfaceEvent.name].push(new Surface.EventHandler.Callback(callback, scope));
    },removeListener: function(surfaceEvent, callback) {
        if (typeof (surfaceEvent) == "string") {
            surfaceEvent = new Surface.Event(surfaceEvent);
        }
        var callbacks = this.listeners[surfaceEvent.name];
        if (callbacks == undefined) {
            return;
        }
        var start = -1;
        try {
            start = callbacks.indexOf(callback);
        } catch (e) {
            for (var i = 0; i < callbacks.length; i++) {
                if (callbacks[i] == callback) {
                    start = i;
                    break;
                }
            }
        }
        callbacks.splice(start, 1);
    },dispatch: function(surfaceEvent) {
        if (typeof (surfaceEvent) == "string") {
            surfaceEvent = new Surface.Event(surfaceEvent);
        }
        var callbacks = this.listeners[surfaceEvent.name];
        if (callbacks == undefined) {
            return;
        }
        for (var i = 0; i < callbacks.length; i++) {
            callbacks[i].func.call(callbacks[i].scope, surfaceEvent);
        }
    }};
Surface.domReady = function(callback) {
    Surface.$(document).ready(callback);
};
Surface.Location = {bottom: 1,top: 2};
Surface.isValidLoopItem = function(item) {
    return typeof (item) != "function";
};
Surface.inArray = function(elem, array) {
    if (array.indexOf) {
        return array.indexOf(elem);
    }
    for (var i = 0, l = array.length; i < l; i++) {
        if (array[i] === elem) {
            return i;
        }
    }
    return -1;
};
Surface.modulo = function(m, n) {
    return ((m % n) + n) % n;
};
Surface.Renderer = {state: {surface: {},blockConfig: {},usedComponents: [],usedTemplates: [],updates: {}},addUsedComponent: function(componentName) {
        if (Surface.$.inArray(componentName, Surface.Renderer.state.usedComponents) == -1) {
            Surface.Renderer.state.usedComponents.push(componentName);
        }
    },addUsedTemplate: function(templateName) {
        if (Surface.$.inArray(templateName, Surface.Renderer.state.usedTemplates) == -1) {
            Surface.Renderer.state.usedTemplates.push(templateName);
        }
    },lookupTable: {},surfaces: {},callFunction: function(functionName) {
        var func = eval("(" + functionName.replace(".", ".function_") + ")");
        if (func) {
            var argumentList = [];
            for (var i = 1; i < arguments.length; i++) {
                argumentList.push(arguments[i]);
            }
            return func.apply(null, argumentList);
        } else {
            Surface.raise("The function " + functionName + " is not defined. Please verify that the name is correct and that you have used {exportToJs} in the template.");
        }
    },getSurface: function(id) {
        if (id in Surface.Renderer.surfaces) {
            return Surface.Renderer.surfaces[id];
        } else {
            var s = eval(Surface.Renderer.lookupTable[id]);
            if (typeof (s) != "undefined") {
                var newSurface = {};
                for (var i in s) {
                    newSurface[i] = s[i];
                }
                newSurface.id = id;
                Surface.Renderer.surfaces[id] = newSurface;
                return newSurface;
            }
        }
        return new Surface.EmptySurface(id);
    },addSurfaceState: function(namespace, surfaceid, id, data, blockConfig) {
        Surface.Renderer.lookupTable[id] = namespace + "." + surfaceid;
        Surface.Renderer.state.updates[id] = (Surface.Renderer.state.updates[id] || 0) + 1;
        Surface.Renderer.state.surface[id] = data;
        Surface.Renderer.state.blockConfig[id] = blockConfig;
    },clearSurfaceStates: function(excludeList) {
        excludeList = excludeList || [];
        var newLookupTable = {};
        var newUpdates = {};
        var newSurface = {};
        var newBlockConfig = {};
        for (var id in Surface.Renderer.lookupTable) {
            if (Surface.$.inArray(id, excludeList) > -1) {
                newLookupTable[id] = Surface.Renderer.lookupTable[id];
                newUpdates[id] = Surface.Renderer.state.updates[id];
                newSurface[id] = Surface.Renderer.state.surface[id];
                newBlockConfig[id] = Surface.Renderer.state.blockConfig[id];
            }
        }
        Surface.Renderer.lookupTable = newLookupTable;
        Surface.Renderer.state.updates = newUpdates;
        Surface.Renderer.state.surface = newSurface;
        Surface.Renderer.state.blockConfig = newBlockConfig;
    },warnDuplicateSurfaces: function() {
        for (var id in Surface.Renderer.state.updates) {
            if (Surface.Renderer.state.updates[id] > 1) {
                Surface.warn("Duplicate Surface: A Surface with id " + id + " was rendered more than once, old state will be overwritten");
            }
        }
    },invokeUsedComponents: function() {
        var components = Surface.Renderer.state.usedComponents;
        for (var i = 0; i < components.length; i++) {
            var component = components[i];
            if (component != "") {
                eval("if (typeof " + component + " != 'undefined' && typeof " + component + ".init != 'undefined') { " + component + ".init() }");
            }
        }
    },createElement: function(html) {
        var dummyEl = document.createElement("div");
        dummyEl.innerHTML = html;
        return Surface.Renderer.getFirstChildTrimmed(dummyEl);
    },update: function(surface, o) {
        var elementId = surface.getId(o);
        var oldElement = surface.getState(o);
        var mergedElement = Surface.Renderer.mergeElements(oldElement, o, null);
        var element = document.getElementById(elementId);
        if (typeof element == "undefined") {
            Surface.warn(surface.name + ".update(): Found no element to update. Continuing");
        }
        this.updateElement(element, surface.createHTML(mergedElement));
        return element;
    },loopItemInsert: function(surface, dto, containerId, refresh, location) {
        var elementId = surface.getId(dto);
        var state = surface.getState();
        var list = this.getList(state, surface.listId);
        if (Object.prototype.toString.call(list) != "[object Array]") {
            Surface.error("Invalid {surfacelist} state. Array was expected.", Surface.ERRORMODE_BREAKING);
        }
        if (location == Surface.Location.top) {
            list.splice(0, 0, dto);
        } else {
            list.push(dto);
        }
        var container = Surface.Renderer.getElement(containerId);
        if (refresh || list.length == 1) {
            this.updateElement(container, surface.render(state, surface.getBlockConfig()));
        } else {
            var renderedContainer = Surface.Renderer.createElement(surface.render(state, surface.getBlockConfig()));
            var newElements = Surface.jQuery(renderedContainer).find("#" + elementId);
            if (location == Surface.Location.top) {
                var elementsAfter = Surface.jQuery(container).find("#" + surface.getId(list[1]));
                Surface.jQuery(newElements[0]).insertBefore(elementsAfter[0]);
            } else {
                var elementsBefore = Surface.jQuery(container).find("#" + surface.getId(list[list.length - 2]));
                Surface.jQuery(newElements[newElements.length - 1]).insertAfter(elementsBefore[elementsBefore.length - 1]);
            }
        }
        return document.getElementById(elementId);
    },loopItemUpdate: function(surface, o, containerId, refresh) {
        var elementId = surface.getId(o);
        var state = surface.getState();
        var list = this.getList(state, surface.listId);
        var newList = [];
        var uniqueVal = "";
        for (var i = 0; i < list.length; i++) {
            var element = list[i];
            if (!Surface.isValidLoopItem(element)) {
                continue;
            }
            uniqueVal = eval("element." + surface.uniqueId);
            if (uniqueVal == surface.getUniqueValue(o)) {
                var mergedElement = Surface.Renderer.mergeElements(element, o, null);
                newList.push(mergedElement);
            } else {
                newList.push(element);
            }
        }
        list = newList;
        if (refresh) {
            var container = Surface.Renderer.getElement(containerId);
            this.updateElement(container, surface.render(state, surface.getBlockConfig()));
        } else {
            var renderedContainer = Surface.Renderer.createElement(surface.render(state, surface.getBlockConfig()));
            Surface.jQuery("#" + elementId).html(Surface.jQuery(renderedContainer).find("#" + elementId).html());
        }
        return document.getElementById(elementId);
    },loopItemRemove: function(surface, o, container, refresh) {
        var elementId = surface.getId(o);
        var state = surface.getState();
        var list = this.getList(state, surface.listId);
        var newList = [];
        for (var i = 0; i < list.length; i++) {
            var element = list[i];
            if (typeof (element) == "function") {
                continue;
            }
            if (eval("element." + surface.uniqueId) != surface.getUniqueValue(o)) {
                newList.push(element);
            }
        }
        eval("state." + surface.listId + " = newList");
        if (refresh || (newList.length == 0 && list.length > 0)) {
            this.updateElement(container, surface.render(state, surface.getBlockConfig()));
        } else {
            while (true) {
                var elements = Surface.jQuery("#" + elementId);
                if (elements.length == 0) {
                    break;
                }
                var el = elements[0];
                Surface.jQuery("*", el).add([el]).each(function() {
                    Surface.jQuery.event.remove(el);
                    Surface.jQuery.removeData(el);
                });
                if (el.parentNode) {
                    el.parentNode.removeChild(el);
                }
            }
        }
    },getList: function(state, listId) {
        return eval("state." + listId);
    },getElement: function(el) {
        if (el && (el.nodeType || el.item)) {
            return el;
        }
        if (typeof el === "string" || !el) {
            return document.getElementById(el);
        }
        return false;
    },mergeElements: function(element, newElement, parentElements) {
        parentElements = parentElements || [];
        if (newElement != null && typeof newElement == "object" && typeof element == "object") {
            try {
                if (Object.prototype.toString.call(element) === "[object Array]" || Object.prototype.toString.call(newElement) === "[object Array]") {
                    return newElement;
                }
            } catch (err) {
            }
            if (typeof element == "undefined" || element == null) {
                element = {};
            }
            if (Surface.inArray(newElement, parentElements) >= 0) {
                throw "Infinite recursion detected. Your input to Surface.update contains cyclic references.";
            } else {
                parentElements.push(newElement);
            }
            for (var field in newElement) {
                if (typeof newElement[field] != "function") {
                    element[field] = this.mergeElements(element[field], newElement[field], parentElements.slice());
                }
            }
        } else {
            element = newElement;
        }
        return element;
    },updateElement: function(replaceEl, html) {
        replaceEl.innerHTML = Surface.Renderer.createElement(html).innerHTML;
    },getFirstChildTrimmed: function(el) {
        function normalizeString(s) {
            var whtSpEnds = new RegExp("^\\s*|\\s*$", "g");
            var whtSpMult = new RegExp("\\s\\s+", "g");
            s = s.replace(whtSpMult, " ");
            s = s.replace(whtSpEnds, "");
            return s;
        }
        var currentEl = el.firstChild;
        while (currentEl) {
            if (currentEl.nodeType == 1) {
                return currentEl;
            } else {
                if (currentEl.nodeType == Node.TEXT_NODE) {
                    var normalized = normalizeString(currentEl.nodeValue);
                    if (normalized != "") {
                        return currentEl;
                    }
                }
            }
            currentEl = currentEl.nextSibling;
        }
    }};
Surface.BlockConfig = function(parent, elements) {
    this.parent = parent;
    this.content = elements;
    this.get = function(attr) {
        if (this.content[attr] != null) {
            return eval(this.content[attr] + ".render");
        }
        if (parent == "") {
            Surface.raise("Could not find a block named '" + attr + "'");
        } else {
            try {
                if (attr == ".parent") {
                    return eval(this.parent);
                } else {
                    if (attr == ".parentBlock") {
                        return eval("block_" + this.parent.replace(".", "_"));
                    } else {
                        return eval("block_" + this.parent.replace(".", "_")).get(attr);
                    }
                }
            } catch (e) {
                Surface.raise("Could not find extended template '" + parent + "'");
            }
        }
    };
};
Surface.logMissingBlockConfig = function(blockConfigName, surfaceName) {
    var templateName = blockConfigName.replace("block_", "").replace("_", ".");
    Surface.warn("Error when setting up state for surface '" + surfaceName + "'. BlockConfig " + blockConfigName + " is not defined. Did you forget to add 'exportToJs' in the rendered template (" + templateName + ".surf)?");
};
Surface.evalScripts = function(html) {
    var scriptPattern = "<script[^>]*>([\\S\\s]*?)<\/script>";
    (html.match(new RegExp(scriptPattern, "img")) || []).map(function(scriptTag) {
        var match = scriptTag.match(new RegExp(scriptPattern, "im"));
        if (match) {
            try {
                eval(match[1]);
            } catch (e) {
                Surface.error(e);
            }
        }
    });
};
Surface.asyncLoadScripts = function(scriptUrls, callback) {
    var numScripts = scriptUrls.length;
    var head = document.getElementsByTagName("head")[0];
    for (var i = 0; i < scriptUrls.length; i++) {
        var x = function(src) {
            var script = document.createElement("script");
            script.type = "text/javascript";
            script.async = true;
            script.src = src;
            script.onload = script.onreadystatechange = function() {
                script.onload = null;
                script.onreadystatechange = null;
                if (--numScripts == 0) {
                    eval(callback);
                }
            };
            head.appendChild(script);
        }(scriptUrls[i]);
    }
};
Surface.tz = {"UTC": [[-21774528, 0, "UTC"]]};
Surface.setTimeZoneData = function(tz) {
    Surface.timezone = tz;
    Surface.timezoneData = [];
    var tzd = Surface.tz[tz];
    if (!tzd) {
        Surface.debug('Timezone data not found for "' + tz + '". Defaulting to UTC.');
        tzd = Surface.tz["UTC"];
    }
    for (var i = 0; i < tzd.length; i++) {
        Surface.timezoneData.push([tzd[i][0] * 100, tzd[i][1] * 100, tzd[i][2]]);
    }
};
Surface.Push = {init: function(pushDtos, swfUrl, log) {
        if (typeof (Beacon) == "undefined" || !Beacon) {
            S.error("Beacon could not be loaded. Beaconpush server down or SSL issues?");
        } else {
            Beacon.defaultOptions.swfUrl = swfUrl;
            Beacon.init(this.listener, pushDtos, log);
        }
    },reinit: function(pushDtos, log) {
        if (typeof (Beacon) == "undefined" || !Beacon) {
            S.error("Beacon could not be loaded. Beaconpush server down or SSL issues?");
        } else {
            Beacon.reinit(this.listener, pushDtos, log);
        }
    },bind: function(eventName, callback) {
        Surface.EventHandler.addListener(new Surface.Event(eventName), callback, this);
    },unbind: function(eventName, callback) {
        Surface.EventHandler.removeListener(new Surface.Event(eventName), callback);
    },trigger: function(eventName, eventData) {
        new Surface.Event(eventName).dispatch(eventData);
    },listener: function(message) {
        new Surface.Event(message.eventName).dispatch(message.data);
    }};
var S = Surface;
var Push = Surface.Push;
var $S = function(selector) {
    return (selector.indexOf(".") == -1 ? Surface.Renderer.getSurface(selector) : new Surface.TemplateProxy(selector));
};
$S.callFunction = Surface.Renderer.callFunction;
/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A, w) {
bundle_base_index_3507823582.js:50 Uncaught TypeError: Cannot read property 'roundTripMSEC' of undefined
    function ma() {
        if (!c.isReady) {
            try {
                s.documentElement.doScroll("left");
            } catch (a) {
                setTimeout(ma, 1);
                return;
            }
            c.ready();
        }
    }
    function Qa(a, b) {
        b.src ? c.ajax({url: b.src,async: false,dataType: "script"}) : c.globalEval(b.text || b.textContent || b.innerHTML || "");
        b.parentNode && b.parentNode.removeChild(b);
    }
    function X(a, b, d, f, e, j) {
        var i = a.length;
        if (typeof b === "object") {
            for (var o in b) {
                X(a, o, b[o], f, e, d);
            }
            return a;
        }
        if (d !== w) {
            f = !j && f && c.isFunction(d);
            for (o = 0; o < i; o++) {
                e(a[o], b, f ? d.call(a[o], o, e(a[o], b)) : d, j);
            }
            return a;
        }
        return i ? e(a[0], b) : w;
    }
    function J() {
        return (new Date).getTime();
    }
    function Y() {
        return false;
    }
    function Z() {
        return true;
    }
    function na(a, b, d) {
        d[0].type = a;
        return c.event.handle.apply(b, d);
    }
    function oa(a) {
        var b, d = [], f = [], e = arguments, j, i, o, k, n, r;
        i = c.data(this, "events");
        if (!(a.liveFired === this || !i || !i.live || a.button && a.type === "click")) {
            a.liveFired = this;
            var u = i.live.slice(0);
            for (k = 0; k < u.length; k++) {
                i = u[k];
                i.origType.replace(O, "") === a.type ? f.push(i.selector) : u.splice(k--, 1);
            }
            j = c(a.target).closest(f, a.currentTarget);
            n = 0;
            for (r = j.length; n < r; n++) {
                for (k = 0; k < u.length; k++) {
                    i = u[k];
                    if (j[n].selector === i.selector) {
                        o = j[n].elem;
                        f = null;
                        if (i.preType === "mouseenter" || i.preType === "mouseleave") {
                            f = c(a.relatedTarget).closest(i.selector)[0];
                        }
                        if (!f || f !== o) {
                            d.push({elem: o,handleObj: i});
                        }
                    }
                }
            }
            n = 0;
            for (r = d.length; n < r; n++) {
                j = d[n];
                a.currentTarget = j.elem;
                a.data = j.handleObj.data;
                a.handleObj = j.handleObj;
                if (j.handleObj.origHandler.apply(j.elem, e) === false) {
                    b = false;
                    break;
                }
            }
            return b;
        }
    }
    function pa(a, b) {
        return "live." + (a && a !== "*" ? a + "." : "") + b.replace(/\./g, "`").replace(/ /g, "&");
    }
    function qa(a) {
        return !a || !a.parentNode || a.parentNode.nodeType === 11;
    }
    function ra(a, b) {
        var d = 0;
        b.each(function() {
            if (this.nodeName === (a[d] && a[d].nodeName)) {
                var f = c.data(a[d++]), e = c.data(this, f);
                if (f = f && f.events) {
                    delete e.handle;
                    e.events = {};
                    for (var j in f) {
                        for (var i in f[j]) {
                            c.event.add(this, j, f[j][i], f[j][i].data);
                        }
                    }
                }
            }
        });
    }
    function sa(a, b, d) {
        var f, e, j;
        b = b && b[0] ? b[0].ownerDocument || b[0] : s;
        if (a.length === 1 && typeof a[0] === "string" && a[0].length < 512 && b === s && !ta.test(a[0]) && (c.support.checkClone || !ua.test(a[0]))) {
            e = true;
            if (j = c.fragments[a[0]]) {
                if (j !== 1) {
                    f = j;
                }
            }
        }
        if (!f) {
            f = b.createDocumentFragment();
            c.clean(a, b, f, d);
        }
        if (e) {
            c.fragments[a[0]] = j ? f : 1;
        }
        return {fragment: f,cacheable: e};
    }
    function K(a, b) {
        var d = {};
        c.each(va.concat.apply([], va.slice(0, b)), function() {
            d[this] = a;
        });
        return d;
    }
    function wa(a) {
        return "scrollTo" in a && a.document ? a : a.nodeType === 9 ? a.defaultView || a.parentWindow : false;
    }
    var c = function(a, b) {
        return new c.fn.init(a, b);
    }, Ra = A.jQuery, Sa = A.$, s = A.document, T, Ta = /^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/, Ua = /^.[^:#\[\.,]*$/, Va = /\S/, Wa = /^(\s|\u00A0)+|(\s|\u00A0)+$/g, Xa = /^<(\w+)\s*\/?>(?:<\/\1>)?$/, P = navigator.userAgent, xa = false, Q = [], L, $ = Object.prototype.toString, aa = Object.prototype.hasOwnProperty, ba = Array.prototype.push, R = Array.prototype.slice, ya = Array.prototype.indexOf;
    c.fn = c.prototype = {init: function(a, b) {
            var d, f;
            if (!a) {
                return this;
            }
            if (a.nodeType) {
                this.context = this[0] = a;
                this.length = 1;
                return this;
            }
            if (a === "body" && !b) {
                this.context = s;
                this[0] = s.body;
                this.selector = "body";
                this.length = 1;
                return this;
            }
            if (typeof a === "string") {
                if ((d = Ta.exec(a)) && (d[1] || !b)) {
                    if (d[1]) {
                        f = b ? b.ownerDocument || b : s;
                        if (a = Xa.exec(a)) {
                            if (c.isPlainObject(b)) {
                                a = [s.createElement(a[1])];
                                c.fn.attr.call(a, b, true);
                            } else {
                                a = [f.createElement(a[1])];
                            }
                        } else {
                            a = sa([d[1]], [f]);
                            a = (a.cacheable ? a.fragment.cloneNode(true) : a.fragment).childNodes;
                        }
                        return c.merge(this, a);
                    } else {
                        if (b = s.getElementById(d[2])) {
                            if (b.id !== d[2]) {
                                return T.find(a);
                            }
                            this.length = 1;
                            this[0] = b;
                        }
                        this.context = s;
                        this.selector = a;
                        return this;
                    }
                } else {
                    if (!b && /^\w+$/.test(a)) {
                        this.selector = a;
                        this.context = s;
                        a = s.getElementsByTagName(a);
                        return c.merge(this, a);
                    } else {
                        return !b || b.jquery ? (b || T).find(a) : c(b).find(a);
                    }
                }
            } else {
                if (c.isFunction(a)) {
                    return T.ready(a);
                }
            }
            if (a.selector !== w) {
                this.selector = a.selector;
                this.context = a.context;
            }
            return c.makeArray(a, this);
        },selector: "",jquery: "1.4.2",length: 0,size: function() {
            return this.length;
        },toArray: function() {
            return R.call(this, 0);
        },get: function(a) {
            return a == null ? this.toArray() : a < 0 ? this.slice(a)[0] : this[a];
        },pushStack: function(a, b, d) {
            var f = c();
            c.isArray(a) ? ba.apply(f, a) : c.merge(f, a);
            f.prevObject = this;
            f.context = this.context;
            if (b === "find") {
                f.selector = this.selector + (this.selector ? " " : "") + d;
            } else {
                if (b) {
                    f.selector = this.selector + "." + b + "(" + d + ")";
                }
            }
            return f;
        },each: function(a, b) {
            return c.each(this, a, b);
        },ready: function(a) {
            c.bindReady();
            if (c.isReady) {
                a.call(s, c);
            } else {
                Q && Q.push(a);
            }
            return this;
        },eq: function(a) {
            return a === -1 ? this.slice(a) : this.slice(a, +a + 1);
        },first: function() {
            return this.eq(0);
        },last: function() {
            return this.eq(-1);
        },slice: function() {
            return this.pushStack(R.apply(this, arguments), "slice", R.call(arguments).join(","));
        },map: function(a) {
            return this.pushStack(c.map(this, function(b, d) {
                return a.call(b, d, b);
            }));
        },end: function() {
            return this.prevObject || c(null);
        },push: ba,sort: [].sort,splice: [].splice};
    c.fn.init.prototype = c.fn;
    c.extend = c.fn.extend = function() {
        var a = arguments[0] || {}, b = 1, d = arguments.length, f = false, e, j, i, o;
        if (typeof a === "boolean") {
            f = a;
            a = arguments[1] || {};
            b = 2;
        }
        if (typeof a !== "object" && !c.isFunction(a)) {
            a = {};
        }
        if (d === b) {
            a = this;
            --b;
        }
        for (; b < d; b++) {
            if ((e = arguments[b]) != null) {
                for (j in e) {
                    i = a[j];
                    o = e[j];
                    if (a !== o) {
                        if (f && o && (c.isPlainObject(o) || c.isArray(o))) {
                            i = i && (c.isPlainObject(i) || c.isArray(i)) ? i : c.isArray(o) ? [] : {};
                            a[j] = c.extend(f, i, o);
                        } else {
                            if (o !== w) {
                                a[j] = o;
                            }
                        }
                    }
                }
            }
        }
        return a;
    };
    c.extend({noConflict: function(a) {
            A.$ = Sa;
            if (a) {
                A.jQuery = Ra;
            }
            return c;
        },isReady: false,ready: function() {
            if (!c.isReady) {
                if (!s.body) {
                    return setTimeout(c.ready, 13);
                }
                c.isReady = true;
                if (Q) {
                    for (var a, b = 0; a = Q[b++]; ) {
                        a.call(s, c);
                    }
                    Q = null;
                }
                c.fn.triggerHandler && c(s).triggerHandler("ready");
            }
        },bindReady: function() {
            if (!xa) {
                xa = true;
                if (s.readyState === "complete") {
                    return c.ready();
                }
                if (s.addEventListener) {
                    s.addEventListener("DOMContentLoaded", L, false);
                    A.addEventListener("load", c.ready, false);
                } else {
                    if (s.attachEvent) {
                        s.attachEvent("onreadystatechange", L);
                        A.attachEvent("onload", c.ready);
                        var a = false;
                        try {
                            a = A.frameElement == null;
                        } catch (b) {
                        }
                        s.documentElement.doScroll && a && ma();
                    }
                }
            }
        },isFunction: function(a) {
            return $.call(a) === "[object Function]";
        },isArray: function(a) {
            return $.call(a) === "[object Array]";
        },isPlainObject: function(a) {
            if (!a || $.call(a) !== "[object Object]" || a.nodeType || a.setInterval) {
                return false;
            }
            if (a.constructor && !aa.call(a, "constructor") && !aa.call(a.constructor.prototype, "isPrototypeOf")) {
                return false;
            }
            var b;
            for (b in a) {
            }
            return b === w || aa.call(a, b);
        },isEmptyObject: function(a) {
            for (var b in a) {
                return false;
            }
            return true;
        },error: function(a) {
            throw a;
        },parseJSON: function(a) {
            if (typeof a !== "string" || !a) {
                return null;
            }
            a = c.trim(a);
            if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) {
                return A.JSON && A.JSON.parse ? A.JSON.parse(a) : (new Function("return " + a))();
            } else {
                c.error("Invalid JSON: " + a);
            }
        },noop: function() {
        },globalEval: function(a) {
            if (a && Va.test(a)) {
                var b = s.getElementsByTagName("head")[0] || s.documentElement, d = s.createElement("script");
                d.type = "text/javascript";
                if (c.support.scriptEval) {
                    d.appendChild(s.createTextNode(a));
                } else {
                    d.text = a;
                }
                b.insertBefore(d, b.firstChild);
                b.removeChild(d);
            }
        },nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toUpperCase() === b.toUpperCase();
        },each: function(a, b, d) {
            var f, e = 0, j = a.length, i = j === w || c.isFunction(a);
            if (d) {
                if (i) {
                    for (f in a) {
                        if (b.apply(a[f], d) === false) {
                            break;
                        }
                    }
                } else {
                    for (; e < j; ) {
                        if (b.apply(a[e++], d) === false) {
                            break;
                        }
                    }
                }
            } else {
                if (i) {
                    for (f in a) {
                        if (b.call(a[f], f, a[f]) === false) {
                            break;
                        }
                    }
                } else {
                    for (d = a[0]; e < j && b.call(d, e, d) !== false; d = a[++e]) {
                    }
                }
            }
            return a;
        },trim: function(a) {
            return (a || "").replace(Wa, "");
        },makeArray: function(a, b) {
            b = b || [];
            if (a != null) {
                a.length == null || typeof a === "string" || c.isFunction(a) || typeof a !== "function" && a.setInterval ? ba.call(b, a) : c.merge(b, a);
            }
            return b;
        },inArray: function(a, b) {
            if (b.indexOf) {
                return b.indexOf(a);
            }
            for (var d = 0, f = b.length; d < f; d++) {
                if (b[d] === a) {
                    return d;
                }
            }
            return -1;
        },merge: function(a, b) {
            var d = a.length, f = 0;
            if (typeof b.length === "number") {
                for (var e = b.length; f < e; f++) {
                    a[d++] = b[f];
                }
            } else {
                for (; b[f] !== w; ) {
                    a[d++] = b[f++];
                }
            }
            a.length = d;
            return a;
        },grep: function(a, b, d) {
            for (var f = [], e = 0, j = a.length; e < j; e++) {
                !d !== !b(a[e], e) && f.push(a[e]);
            }
            return f;
        },map: function(a, b, d) {
            for (var f = [], e, j = 0, i = a.length; j < i; j++) {
                e = b(a[j], j, d);
                if (e != null) {
                    f[f.length] = e;
                }
            }
            return f.concat.apply([], f);
        },guid: 1,proxy: function(a, b, d) {
            if (arguments.length === 2) {
                if (typeof b === "string") {
                    d = a;
                    a = d[b];
                    b = w;
                } else {
                    if (b && !c.isFunction(b)) {
                        d = b;
                        b = w;
                    }
                }
            }
            if (!b && a) {
                b = function() {
                    return a.apply(d || this, arguments);
                };
            }
            if (a) {
                b.guid = a.guid = a.guid || b.guid || c.guid++;
            }
            return b;
        },uaMatch: function(a) {
            a = a.toLowerCase();
            a = /(webkit)[ \/]([\w.]+)/.exec(a) || /(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a) || /(msie) ([\w.]+)/.exec(a) || !/compatible/.test(a) && /(mozilla)(?:.*? rv:([\w.]+))?/.exec(a) || [];
            return {browser: a[1] || "",version: a[2] || "0"};
        },browser: {}});
    P = c.uaMatch(P);
    if (P.browser) {
        c.browser[P.browser] = true;
        c.browser.version = P.version;
    }
    if (c.browser.webkit) {
        c.browser.safari = true;
    }
    if (ya) {
        c.inArray = function(a, b) {
            return ya.call(b, a);
        };
    }
    T = c(s);
    if (s.addEventListener) {
        L = function() {
            s.removeEventListener("DOMContentLoaded", L, false);
            c.ready();
        };
    } else {
        if (s.attachEvent) {
            L = function() {
                if (s.readyState === "complete") {
                    s.detachEvent("onreadystatechange", L);
                    c.ready();
                }
            };
        }
    }
    (function() {
        c.support = {};
        var a = s.documentElement, b = s.createElement("script"), d = s.createElement("div"), f = "script" + J();
        d.style.display = "none";
        d.innerHTML = "   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
        var e = d.getElementsByTagName("*"), j = d.getElementsByTagName("a")[0];
        if (!(!e || !e.length || !j)) {
            c.support = {leadingWhitespace: d.firstChild.nodeType === 3,tbody: !d.getElementsByTagName("tbody").length,htmlSerialize: !!d.getElementsByTagName("link").length,style: /red/.test(j.getAttribute("style")),hrefNormalized: j.getAttribute("href") === "/a",opacity: /^0.55$/.test(j.style.opacity),cssFloat: !!j.style.cssFloat,checkOn: d.getElementsByTagName("input")[0].value === "on",optSelected: s.createElement("select").appendChild(s.createElement("option")).selected,parentNode: d.removeChild(d.appendChild(s.createElement("div"))).parentNode === null,deleteExpando: true,checkClone: false,scriptEval: false,noCloneEvent: true,boxModel: null};
            b.type = "text/javascript";
            try {
                b.appendChild(s.createTextNode("window." + f + "=1;"));
            } catch (i) {
            }
            a.insertBefore(b, a.firstChild);
            if (A[f]) {
                c.support.scriptEval = true;
                delete A[f];
            }
            try {
                delete b.test;
            } catch (o) {
                c.support.deleteExpando = false;
            }
            a.removeChild(b);
            if (d.attachEvent && d.fireEvent) {
                d.attachEvent("onclick", function k() {
                    c.support.noCloneEvent = false;
                    d.detachEvent("onclick", k);
                });
                d.cloneNode(true).fireEvent("onclick");
            }
            d = s.createElement("div");
            d.innerHTML = "<input type='radio' name='radiotest' checked='checked'/>";
            a = s.createDocumentFragment();
            a.appendChild(d.firstChild);
            c.support.checkClone = a.cloneNode(true).cloneNode(true).lastChild.checked;
            c(function() {
                var k = s.createElement("div");
                k.style.width = k.style.paddingLeft = "1px";
                s.body.appendChild(k);
                c.boxModel = c.support.boxModel = k.offsetWidth === 2;
                s.body.removeChild(k).style.display = "none";
            });
            a = function(k) {
                var n = s.createElement("div");
                k = "on" + k;
                var r = k in n;
                if (!r) {
                    n.setAttribute(k, "return;");
                    r = typeof n[k] === "function";
                }
                return r;
            };
            c.support.submitBubbles = a("submit");
            c.support.changeBubbles = a("change");
            a = b = d = e = j = null;
        }
    })();
    c.props = {"for": "htmlFor","class": "className",readonly: "readOnly",maxlength: "maxLength",cellspacing: "cellSpacing",rowspan: "rowSpan",colspan: "colSpan",tabindex: "tabIndex",usemap: "useMap",frameborder: "frameBorder"};
    var G = "jQuery" + J(), Ya = 0, za = {};
    c.extend({cache: {},expando: G,noData: {embed: true,object: true,applet: true},data: function(a, b, d) {
            if (!(a.nodeName && c.noData[a.nodeName.toLowerCase()])) {
                a = a == A ? za : a;
                var f = a[G], e = c.cache;
                if (!f && typeof b === "string" && d === w) {
                    return null;
                }
                f || (f = ++Ya);
                if (typeof b === "object") {
                    a[G] = f;
                    e[f] = c.extend(true, {}, b);
                } else {
                    if (!e[f]) {
                        a[G] = f;
                        e[f] = {};
                    }
                }
                a = e[f];
                if (d !== w) {
                    a[b] = d;
                }
                return typeof b === "string" ? a[b] : a;
            }
        },removeData: function(a, b) {
            if (!(a.nodeName && c.noData[a.nodeName.toLowerCase()])) {
                a = a == A ? za : a;
                var d = a[G], f = c.cache, e = f[d];
                if (b) {
                    if (e) {
                        delete e[b];
                        c.isEmptyObject(e) && c.removeData(a);
                    }
                } else {
                    if (c.support.deleteExpando) {
                        delete a[c.expando];
                    } else {
                        a.removeAttribute && a.removeAttribute(c.expando);
                    }
                    delete f[d];
                }
            }
        }});
    c.fn.extend({data: function(a, b) {
            if (typeof a === "undefined" && this.length) {
                return c.data(this[0]);
            } else {
                if (typeof a === "object") {
                    return this.each(function() {
                        c.data(this, a);
                    });
                }
            }
            var d = a.split(".");
            d[1] = d[1] ? "." + d[1] : "";
            if (b === w) {
                var f = this.triggerHandler("getData" + d[1] + "!", [d[0]]);
                if (f === w && this.length) {
                    f = c.data(this[0], a);
                }
                return f === w && d[1] ? this.data(d[0]) : f;
            } else {
                return this.trigger("setData" + d[1] + "!", [d[0], b]).each(function() {
                    c.data(this, a, b);
                });
            }
        },removeData: function(a) {
            return this.each(function() {
                c.removeData(this, a);
            });
        }});
    c.extend({queue: function(a, b, d) {
            if (a) {
                b = (b || "fx") + "queue";
                var f = c.data(a, b);
                if (!d) {
                    return f || [];
                }
                if (!f || c.isArray(d)) {
                    f = c.data(a, b, c.makeArray(d));
                } else {
                    f.push(d);
                }
                return f;
            }
        },dequeue: function(a, b) {
            b = b || "fx";
            var d = c.queue(a, b), f = d.shift();
            if (f === "inprogress") {
                f = d.shift();
            }
            if (f) {
                b === "fx" && d.unshift("inprogress");
                f.call(a, function() {
                    c.dequeue(a, b);
                });
            }
        }});
    c.fn.extend({queue: function(a, b) {
            if (typeof a !== "string") {
                b = a;
                a = "fx";
            }
            if (b === w) {
                return c.queue(this[0], a);
            }
            return this.each(function() {
                var d = c.queue(this, a, b);
                a === "fx" && d[0] !== "inprogress" && c.dequeue(this, a);
            });
        },dequeue: function(a) {
            return this.each(function() {
                c.dequeue(this, a);
            });
        },delay: function(a, b) {
            a = c.fx ? c.fx.speeds[a] || a : a;
            b = b || "fx";
            return this.queue(b, function() {
                var d = this;
                setTimeout(function() {
                    c.dequeue(d, b);
                }, a);
            });
        },clearQueue: function(a) {
            return this.queue(a || "fx", []);
        }});
    var Aa = /[\n\t]/g, ca = /\s+/, Za = /\r/g, $a = /href|src|style/, ab = /(button|input)/i, bb = /(button|input|object|select|textarea)/i, cb = /^(a|area)$/i, Ba = /radio|checkbox/;
    c.fn.extend({attr: function(a, b) {
            return X(this, a, b, true, c.attr);
        },removeAttr: function(a) {
            return this.each(function() {
                c.attr(this, a, "");
                this.nodeType === 1 && this.removeAttribute(a);
            });
        },addClass: function(a) {
            if (c.isFunction(a)) {
                return this.each(function(n) {
                    var r = c(this);
                    r.addClass(a.call(this, n, r.attr("class")));
                });
            }
            if (a && typeof a === "string") {
                for (var b = (a || "").split(ca), d = 0, f = this.length; d < f; d++) {
                    var e = this[d];
                    if (e.nodeType === 1) {
                        if (e.className) {
                            for (var j = " " + e.className + " ", i = e.className, o = 0, k = b.length; o < k; o++) {
                                if (j.indexOf(" " + b[o] + " ") < 0) {
                                    i += " " + b[o];
                                }
                            }
                            e.className = c.trim(i);
                        } else {
                            e.className = a;
                        }
                    }
                }
            }
            return this;
        },removeClass: function(a) {
            if (c.isFunction(a)) {
                return this.each(function(k) {
                    var n = c(this);
                    n.removeClass(a.call(this, k, n.attr("class")));
                });
            }
            if (a && typeof a === "string" || a === w) {
                for (var b = (a || "").split(ca), d = 0, f = this.length; d < f; d++) {
                    var e = this[d];
                    if (e.nodeType === 1 && e.className) {
                        if (a) {
                            for (var j = (" " + e.className + " ").replace(Aa, " "), i = 0, o = b.length; i < o; i++) {
                                j = j.replace(" " + b[i] + " ", " ");
                            }
                            e.className = c.trim(j);
                        } else {
                            e.className = "";
                        }
                    }
                }
            }
            return this;
        },toggleClass: function(a, b) {
            var d = typeof a, f = typeof b === "boolean";
            if (c.isFunction(a)) {
                return this.each(function(e) {
                    var j = c(this);
                    j.toggleClass(a.call(this, e, j.attr("class"), b), b);
                });
            }
            return this.each(function() {
                if (d === "string") {
                    for (var e, j = 0, i = c(this), o = b, k = a.split(ca); e = k[j++]; ) {
                        o = f ? o : !i.hasClass(e);
                        i[o ? "addClass" : "removeClass"](e);
                    }
                } else {
                    if (d === "undefined" || d === "boolean") {
                        this.className && c.data(this, "__className__", this.className);
                        this.className = this.className || a === false ? "" : c.data(this, "__className__") || "";
                    }
                }
            });
        },hasClass: function(a) {
            a = " " + a + " ";
            for (var b = 0, d = this.length; b < d; b++) {
                if ((" " + this[b].className + " ").replace(Aa, " ").indexOf(a) > -1) {
                    return true;
                }
            }
            return false;
        },val: function(a) {
            if (a === w) {
                var b = this[0];
                if (b) {
                    if (c.nodeName(b, "option")) {
                        return (b.attributes.value || {}).specified ? b.value : b.text;
                    }
                    if (c.nodeName(b, "select")) {
                        var d = b.selectedIndex, f = [], e = b.options;
                        b = b.type === "select-one";
                        if (d < 0) {
                            return null;
                        }
                        var j = b ? d : 0;
                        for (d = b ? d + 1 : e.length; j < d; j++) {
                            var i = e[j];
                            if (i.selected) {
                                a = c(i).val();
                                if (b) {
                                    return a;
                                }
                                f.push(a);
                            }
                        }
                        return f;
                    }
                    if (Ba.test(b.type) && !c.support.checkOn) {
                        return b.getAttribute("value") === null ? "on" : b.value;
                    }
                    return (b.value || "").replace(Za, "");
                }
                return w;
            }
            var o = c.isFunction(a);
            return this.each(function(k) {
                var n = c(this), r = a;
                if (this.nodeType === 1) {
                    if (o) {
                        r = a.call(this, k, n.val());
                    }
                    if (typeof r === "number") {
                        r += "";
                    }
                    if (c.isArray(r) && Ba.test(this.type)) {
                        this.checked = c.inArray(n.val(), r) >= 0;
                    } else {
                        if (c.nodeName(this, "select")) {
                            var u = c.makeArray(r);
                            c("option", this).each(function() {
                                this.selected = c.inArray(c(this).val(), u) >= 0;
                            });
                            if (!u.length) {
                                this.selectedIndex = -1;
                            }
                        } else {
                            this.value = r;
                        }
                    }
                }
            });
        }});
    c.extend({attrFn: {val: true,css: true,html: true,text: true,data: true,width: true,height: true,offset: true},attr: function(a, b, d, f) {
            if (!a || a.nodeType === 3 || a.nodeType === 8) {
                return w;
            }
            if (f && b in c.attrFn) {
                return c(a)[b](d);
            }
            f = a.nodeType !== 1 || !c.isXMLDoc(a);
            var e = d !== w;
            b = f && c.props[b] || b;
            if (a.nodeType === 1) {
                var j = $a.test(b);
                if (b in a && f && !j) {
                    if (e) {
                        b === "type" && ab.test(a.nodeName) && a.parentNode && c.error("type property can't be changed");
                        a[b] = d;
                    }
                    if (c.nodeName(a, "form") && a.getAttributeNode(b)) {
                        return a.getAttributeNode(b).nodeValue;
                    }
                    if (b === "tabIndex") {
                        return (b = a.getAttributeNode("tabIndex")) && b.specified ? b.value : bb.test(a.nodeName) || cb.test(a.nodeName) && a.href ? 0 : w;
                    }
                    return a[b];
                }
                if (!c.support.style && f && b === "style") {
                    if (e) {
                        a.style.cssText = "" + d;
                    }
                    return a.style.cssText;
                }
                e && a.setAttribute(b, "" + d);
                a = !c.support.hrefNormalized && f && j ? a.getAttribute(b, 2) : a.getAttribute(b);
                return a === null ? w : a;
            }
            return c.style(a, b, d);
        }});
    var O = /\.(.*)$/, db = function(a) {
        return a.replace(/[^\w\s\.\|`]/g, function(b) {
            return "\\" + b;
        });
    };
    c.event = {add: function(a, b, d, f) {
            if (!(a.nodeType === 3 || a.nodeType === 8)) {
                if (a.setInterval && a !== A && !a.frameElement) {
                    a = A;
                }
                var e, j;
                if (d.handler) {
                    e = d;
                    d = e.handler;
                }
                if (!d.guid) {
                    d.guid = c.guid++;
                }
                if (j = c.data(a)) {
                    var i = j.events = j.events || {}, o = j.handle;
                    if (!o) {
                        j.handle = o = function() {
                            return typeof c !== "undefined" && !c.event.triggered ? c.event.handle.apply(o.elem, arguments) : w;
                        };
                    }
                    o.elem = a;
                    b = b.split(" ");
                    for (var k, n = 0, r; k = b[n++]; ) {
                        j = e ? c.extend({}, e) : {handler: d,data: f};
                        if (k.indexOf(".") > -1) {
                            r = k.split(".");
                            k = r.shift();
                            j.namespace = r.slice(0).sort().join(".");
                        } else {
                            r = [];
                            j.namespace = "";
                        }
                        j.type = k;
                        j.guid = d.guid;
                        var u = i[k], z = c.event.special[k] || {};
                        if (!u) {
                            u = i[k] = [];
                            if (!z.setup || z.setup.call(a, f, r, o) === false) {
                                if (a.addEventListener) {
                                    a.addEventListener(k, o, false);
                                } else {
                                    a.attachEvent && a.attachEvent("on" + k, o);
                                }
                            }
                        }
                        if (z.add) {
                            z.add.call(a, j);
                            if (!j.handler.guid) {
                                j.handler.guid = d.guid;
                            }
                        }
                        u.push(j);
                        c.event.global[k] = true;
                    }
                    a = null;
                }
            }
        },global: {},remove: function(a, b, d, f) {
            if (!(a.nodeType === 3 || a.nodeType === 8)) {
                var e, j = 0, i, o, k, n, r, u, z = c.data(a), C = z && z.events;
                if (z && C) {
                    if (b && b.type) {
                        d = b.handler;
                        b = b.type;
                    }
                    if (!b || typeof b === "string" && b.charAt(0) === ".") {
                        b = b || "";
                        for (e in C) {
                            c.event.remove(a, e + b);
                        }
                    } else {
                        for (b = b.split(" "); e = b[j++]; ) {
                            n = e;
                            i = e.indexOf(".") < 0;
                            o = [];
                            if (!i) {
                                o = e.split(".");
                                e = o.shift();
                                k = new RegExp("(^|\\.)" + c.map(o.slice(0).sort(), db).join("\\.(?:.*\\.)?") + "(\\.|$)");
                            }
                            if (r = C[e]) {
                                if (d) {
                                    n = c.event.special[e] || {};
                                    for (B = f || 0; B < r.length; B++) {
                                        u = r[B];
                                        if (d.guid === u.guid) {
                                            if (i || k.test(u.namespace)) {
                                                f == null && r.splice(B--, 1);
                                                n.remove && n.remove.call(a, u);
                                            }
                                            if (f != null) {
                                                break;
                                            }
                                        }
                                    }
                                    if (r.length === 0 || f != null && r.length === 1) {
                                        if (!n.teardown || n.teardown.call(a, o) === false) {
                                            Ca(a, e, z.handle);
                                        }
                                        delete C[e];
                                    }
                                } else {
                                    for (var B = 0; B < r.length; B++) {
                                        u = r[B];
                                        if (i || k.test(u.namespace)) {
                                            c.event.remove(a, n, u.handler, B);
                                            r.splice(B--, 1);
                                        }
                                    }
                                }
                            }
                        }
                        if (c.isEmptyObject(C)) {
                            if (b = z.handle) {
                                b.elem = null;
                            }
                            delete z.events;
                            delete z.handle;
                            c.isEmptyObject(z) && c.removeData(a);
                        }
                    }
                }
            }
        },trigger: function(a, b, d, f) {
            var e = a.type || a;
            if (!f) {
                a = typeof a === "object" ? a[G] ? a : c.extend(c.Event(e), a) : c.Event(e);
                if (e.indexOf("!") >= 0) {
                    a.type = e = e.slice(0, -1);
                    a.exclusive = true;
                }
                if (!d) {
                    a.stopPropagation();
                    c.event.global[e] && c.each(c.cache, function() {
                        this.events && this.events[e] && c.event.trigger(a, b, this.handle.elem);
                    });
                }
                if (!d || d.nodeType === 3 || d.nodeType === 8) {
                    return w;
                }
                a.result = w;
                a.target = d;
                b = c.makeArray(b);
                b.unshift(a);
            }
            a.currentTarget = d;
            (f = c.data(d, "handle")) && f.apply(d, b);
            f = d.parentNode || d.ownerDocument;
            try {
                if (!(d && d.nodeName && c.noData[d.nodeName.toLowerCase()])) {
                    if (d["on" + e] && d["on" + e].apply(d, b) === false) {
                        a.result = false;
                    }
                }
            } catch (j) {
            }
            if (!a.isPropagationStopped() && f) {
                c.event.trigger(a, b, f, true);
            } else {
                if (!a.isDefaultPrevented()) {
                    f = a.target;
                    var i, o = c.nodeName(f, "a") && e === "click", k = c.event.special[e] || {};
                    if ((!k._default || k._default.call(d, a) === false) && !o && !(f && f.nodeName && c.noData[f.nodeName.toLowerCase()])) {
                        try {
                            if (f[e]) {
                                if (i = f["on" + e]) {
                                    f["on" + e] = null;
                                }
                                c.event.triggered = true;
                                f[e]();
                            }
                        } catch (n) {
                        }
                        if (i) {
                            f["on" + e] = i;
                        }
                        c.event.triggered = false;
                    }
                }
            }
        },handle: function(a) {
            var b, d, f, e;
            a = arguments[0] = c.event.fix(a || A.event);
            a.currentTarget = this;
            b = a.type.indexOf(".") < 0 && !a.exclusive;
            if (!b) {
                d = a.type.split(".");
                a.type = d.shift();
                f = new RegExp("(^|\\.)" + d.slice(0).sort().join("\\.(?:.*\\.)?") + "(\\.|$)");
            }
            e = c.data(this, "events");
            d = e[a.type];
            if (e && d) {
                d = d.slice(0);
                e = 0;
                for (var j = d.length; e < j; e++) {
                    var i = d[e];
                    if (b || f.test(i.namespace)) {
                        a.handler = i.handler;
                        a.data = i.data;
                        a.handleObj = i;
                        i = i.handler.apply(this, arguments);
                        if (i !== w) {
                            a.result = i;
                            if (i === false) {
                                a.preventDefault();
                                a.stopPropagation();
                            }
                        }
                        if (a.isImmediatePropagationStopped()) {
                            break;
                        }
                    }
                }
            }
            return a.result;
        },props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix: function(a) {
            if (a[G]) {
                return a;
            }
            var b = a;
            a = c.Event(b);
            for (var d = this.props.length, f; d; ) {
                f = this.props[--d];
                a[f] = b[f];
            }
            if (!a.target) {
                a.target = a.srcElement || s;
            }
            if (a.target.nodeType === 3) {
                a.target = a.target.parentNode;
            }
            if (!a.relatedTarget && a.fromElement) {
                a.relatedTarget = a.fromElement === a.target ? a.toElement : a.fromElement;
            }
            if (a.pageX == null && a.clientX != null) {
                b = s.documentElement;
                d = s.body;
                a.pageX = a.clientX + (b && b.scrollLeft || d && d.scrollLeft || 0) - (b && b.clientLeft || d && d.clientLeft || 0);
                a.pageY = a.clientY + (b && b.scrollTop || d && d.scrollTop || 0) - (b && b.clientTop || d && d.clientTop || 0);
            }
            if (!a.which && (a.charCode || a.charCode === 0 ? a.charCode : a.keyCode)) {
                a.which = a.charCode || a.keyCode;
            }
            if (!a.metaKey && a.ctrlKey) {
                a.metaKey = a.ctrlKey;
            }
            if (!a.which && a.button !== w) {
                a.which = a.button & 1 ? 1 : a.button & 2 ? 3 : a.button & 4 ? 2 : 0;
            }
            return a;
        },guid: 100000000,proxy: c.proxy,special: {ready: {setup: c.bindReady,teardown: c.noop},live: {add: function(a) {
                    c.event.add(this, a.origType, c.extend({}, a, {handler: oa}));
                },remove: function(a) {
                    var b = true, d = a.origType.replace(O, "");
                    c.each(c.data(this, "events").live || [], function() {
                        if (d === this.origType.replace(O, "")) {
                            return b = false;
                        }
                    });
                    b && c.event.remove(this, a.origType, oa);
                }},beforeunload: {setup: function(a, b, d) {
                    if (this.setInterval) {
                        this.onbeforeunload = d;
                    }
                    return false;
                },teardown: function(a, b) {
                    if (this.onbeforeunload === b) {
                        this.onbeforeunload = null;
                    }
                }}}};
    var Ca = s.removeEventListener ? function(a, b, d) {
        a.removeEventListener(b, d, false);
    } : function(a, b, d) {
        a.detachEvent("on" + b, d);
    };
    c.Event = function(a) {
        if (!this.preventDefault) {
            return new c.Event(a);
        }
        if (a && a.type) {
            this.originalEvent = a;
            this.type = a.type;
        } else {
            this.type = a;
        }
        this.timeStamp = J();
        this[G] = true;
    };
    c.Event.prototype = {preventDefault: function() {
            this.isDefaultPrevented = Z;
            var a = this.originalEvent;
            if (a) {
                a.preventDefault && a.preventDefault();
                a.returnValue = false;
            }
        },stopPropagation: function() {
            this.isPropagationStopped = Z;
            var a = this.originalEvent;
            if (a) {
                a.stopPropagation && a.stopPropagation();
                a.cancelBubble = true;
            }
        },stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = Z;
            this.stopPropagation();
        },isDefaultPrevented: Y,isPropagationStopped: Y,isImmediatePropagationStopped: Y};
    var Da = function(a) {
        var b = a.relatedTarget;
        try {
            for (; b && b !== this; ) {
                b = b.parentNode;
            }
            if (b !== this) {
                a.type = a.data;
                c.event.handle.apply(this, arguments);
            }
        } catch (d) {
        }
    }, Ea = function(a) {
        a.type = a.data;
        c.event.handle.apply(this, arguments);
    };
    c.each({mouseenter: "mouseover",mouseleave: "mouseout"}, function(a, b) {
        c.event.special[a] = {setup: function(d) {
                c.event.add(this, b, d && d.selector ? Ea : Da, a);
            },teardown: function(d) {
                c.event.remove(this, b, d && d.selector ? Ea : Da);
            }};
    });
    if (!c.support.submitBubbles) {
        c.event.special.submit = {setup: function() {
                if (this.nodeName.toLowerCase() !== "form") {
                    c.event.add(this, "click.specialSubmit", function(a) {
                        var b = a.target, d = b.type;
                        if ((d === "submit" || d === "image") && c(b).closest("form").length) {
                            return na("submit", this, arguments);
                        }
                    });
                    c.event.add(this, "keypress.specialSubmit", function(a) {
                        var b = a.target, d = b.type;
                        if ((d === "text" || d === "password") && c(b).closest("form").length && a.keyCode === 13) {
                            return na("submit", this, arguments);
                        }
                    });
                } else {
                    return false;
                }
            },teardown: function() {
                c.event.remove(this, ".specialSubmit");
            }};
    }
    if (!c.support.changeBubbles) {
        var da = /textarea|input|select/i, ea, Fa = function(a) {
            var b = a.type, d = a.value;
            if (b === "radio" || b === "checkbox") {
                d = a.checked;
            } else {
                if (b === "select-multiple") {
                    d = a.selectedIndex > -1 ? c.map(a.options, function(f) {
                        return f.selected;
                    }).join("-") : "";
                } else {
                    if (a.nodeName.toLowerCase() === "select") {
                        d = a.selectedIndex;
                    }
                }
            }
            return d;
        }, fa = function(a, b) {
            var d = a.target, f, e;
            if (!(!da.test(d.nodeName) || d.readOnly)) {
                f = c.data(d, "_change_data");
                e = Fa(d);
                if (a.type !== "focusout" || d.type !== "radio") {
                    c.data(d, "_change_data", e);
                }
                if (!(f === w || e === f)) {
                    if (f != null || e) {
                        a.type = "change";
                        return c.event.trigger(a, b, d);
                    }
                }
            }
        };
        c.event.special.change = {filters: {focusout: fa,click: function(a) {
                    var b = a.target, d = b.type;
                    if (d === "radio" || d === "checkbox" || b.nodeName.toLowerCase() === "select") {
                        return fa.call(this, a);
                    }
                },keydown: function(a) {
                    var b = a.target, d = b.type;
                    if (a.keyCode === 13 && b.nodeName.toLowerCase() !== "textarea" || a.keyCode === 32 && (d === "checkbox" || d === "radio") || d === "select-multiple") {
                        return fa.call(this, a);
                    }
                },beforeactivate: function(a) {
                    a = a.target;
                    c.data(a, "_change_data", Fa(a));
                }},setup: function() {
                if (this.type === "file") {
                    return false;
                }
                for (var a in ea) {
                    c.event.add(this, a + ".specialChange", ea[a]);
                }
                return da.test(this.nodeName);
            },teardown: function() {
                c.event.remove(this, ".specialChange");
                return da.test(this.nodeName);
            }};
        ea = c.event.special.change.filters;
    }
    s.addEventListener && c.each({focus: "focusin",blur: "focusout"}, function(a, b) {
        function d(f) {
            f = c.event.fix(f);
            f.type = b;
            return c.event.handle.call(this, f);
        }
        c.event.special[b] = {setup: function() {
                this.addEventListener(a, d, true);
            },teardown: function() {
                this.removeEventListener(a, d, true);
            }};
    });
    c.each(["bind", "one"], function(a, b) {
        c.fn[b] = function(d, f, e) {
            if (typeof d === "object") {
                for (var j in d) {
                    this[b](j, f, d[j], e);
                }
                return this;
            }
            if (c.isFunction(f)) {
                e = f;
                f = w;
            }
            var i = b === "one" ? c.proxy(e, function(k) {
                c(this).unbind(k, i);
                return e.apply(this, arguments);
            }) : e;
            if (d === "unload" && b !== "one") {
                this.one(d, f, e);
            } else {
                j = 0;
                for (var o = this.length; j < o; j++) {
                    c.event.add(this[j], d, i, f);
                }
            }
            return this;
        };
    });
    c.fn.extend({unbind: function(a, b) {
            if (typeof a === "object" && !a.preventDefault) {
                for (var d in a) {
                    this.unbind(d, a[d]);
                }
            } else {
                d = 0;
                for (var f = this.length; d < f; d++) {
                    c.event.remove(this[d], a, b);
                }
            }
            return this;
        },delegate: function(a, b, d, f) {
            return this.live(b, d, f, a);
        },undelegate: function(a, b, d) {
            return arguments.length === 0 ? this.unbind("live") : this.die(b, null, d, a);
        },trigger: function(a, b) {
            return this.each(function() {
                c.event.trigger(a, b, this);
            });
        },triggerHandler: function(a, b) {
            if (this[0]) {
                a = c.Event(a);
                a.preventDefault();
                a.stopPropagation();
                c.event.trigger(a, b, this[0]);
                return a.result;
            }
        },toggle: function(a) {
            for (var b = arguments, d = 1; d < b.length; ) {
                c.proxy(a, b[d++]);
            }
            return this.click(c.proxy(a, function(f) {
                var e = (c.data(this, "lastToggle" + a.guid) || 0) % d;
                c.data(this, "lastToggle" + a.guid, e + 1);
                f.preventDefault();
                return b[e].apply(this, arguments) || false;
            }));
        },hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a);
        }});
    var Ga = {focus: "focusin",blur: "focusout",mouseenter: "mouseover",mouseleave: "mouseout"};
    c.each(["live", "die"], function(a, b) {
        c.fn[b] = function(d, f, e, j) {
            var i, o = 0, k, n, r = j || this.selector, u = j ? this : c(this.context);
            if (c.isFunction(f)) {
                e = f;
                f = w;
            }
            for (d = (d || "").split(" "); (i = d[o++]) != null; ) {
                j = O.exec(i);
                k = "";
                if (j) {
                    k = j[0];
                    i = i.replace(O, "");
                }
                if (i === "hover") {
                    d.push("mouseenter" + k, "mouseleave" + k);
                } else {
                    n = i;
                    if (i === "focus" || i === "blur") {
                        d.push(Ga[i] + k);
                        i += k;
                    } else {
                        i = (Ga[i] || i) + k;
                    }
                    b === "live" ? u.each(function() {
                        c.event.add(this, pa(i, r), {data: f,selector: r,handler: e,origType: i,origHandler: e,preType: n});
                    }) : u.unbind(pa(i, r), e);
                }
            }
            return this;
        };
    });
    c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "), function(a, b) {
        c.fn[b] = function(d) {
            return d ? this.bind(b, d) : this.trigger(b);
        };
        if (c.attrFn) {
            c.attrFn[b] = true;
        }
    });
    A.attachEvent && !A.addEventListener && A.attachEvent("onunload", function() {
        for (var a in c.cache) {
            if (c.cache[a].handle) {
                try {
                    c.event.remove(c.cache[a].handle.elem);
                } catch (b) {
                }
            }
        }
    });
    (function() {
        function a(g) {
            for (var h = "", l, m = 0; g[m]; m++) {
                l = g[m];
                if (l.nodeType === 3 || l.nodeType === 4) {
                    h += l.nodeValue;
                } else {
                    if (l.nodeType !== 8) {
                        h += a(l.childNodes);
                    }
                }
            }
            return h;
        }
        function b(g, h, l, m, q, p) {
            q = 0;
            for (var v = m.length; q < v; q++) {
                var t = m[q];
                if (t) {
                    t = t[g];
                    for (var y = false; t; ) {
                        if (t.sizcache === l) {
                            y = m[t.sizset];
                            break;
                        }
                        if (t.nodeType === 1 && !p) {
                            t.sizcache = l;
                            t.sizset = q;
                        }
                        if (t.nodeName.toLowerCase() === h) {
                            y = t;
                            break;
                        }
                        t = t[g];
                    }
                    m[q] = y;
                }
            }
        }
        function d(g, h, l, m, q, p) {
            q = 0;
            for (var v = m.length; q < v; q++) {
                var t = m[q];
                if (t) {
                    t = t[g];
                    for (var y = false; t; ) {
                        if (t.sizcache === l) {
                            y = m[t.sizset];
                            break;
                        }
                        if (t.nodeType === 1) {
                            if (!p) {
                                t.sizcache = l;
                                t.sizset = q;
                            }
                            if (typeof h !== "string") {
                                if (t === h) {
                                    y = true;
                                    break;
                                }
                            } else {
                                if (k.filter(h, [t]).length > 0) {
                                    y = t;
                                    break;
                                }
                            }
                        }
                        t = t[g];
                    }
                    m[q] = y;
                }
            }
        }
        var f = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g, e = 0, j = Object.prototype.toString, i = false, o = true;
        [0, 0].sort(function() {
            o = false;
            return 0;
        });
        var k = function(g, h, l, m) {
            l = l || [];
            var q = h = h || s;
            if (h.nodeType !== 1 && h.nodeType !== 9) {
                return [];
            }
            if (!g || typeof g !== "string") {
                return l;
            }
            for (var p = [], v, t, y, S, H = true, M = x(h), I = g; (f.exec(""), v = f.exec(I)) !== null; ) {
                I = v[3];
                p.push(v[1]);
                if (v[2]) {
                    S = v[3];
                    break;
                }
            }
            if (p.length > 1 && r.exec(g)) {
                if (p.length === 2 && n.relative[p[0]]) {
                    t = ga(p[0] + p[1], h);
                } else {
                    for (t = n.relative[p[0]] ? [h] : k(p.shift(), h); p.length; ) {
                        g = p.shift();
                        if (n.relative[g]) {
                            g += p.shift();
                        }
                        t = ga(g, t);
                    }
                }
            } else {
                if (!m && p.length > 1 && h.nodeType === 9 && !M && n.match.ID.test(p[0]) && !n.match.ID.test(p[p.length - 1])) {
                    v = k.find(p.shift(), h, M);
                    h = v.expr ? k.filter(v.expr, v.set)[0] : v.set[0];
                }
                if (h) {
                    v = m ? {expr: p.pop(),set: z(m)} : k.find(p.pop(), p.length === 1 && (p[0] === "~" || p[0] === "+") && h.parentNode ? h.parentNode : h, M);
                    t = v.expr ? k.filter(v.expr, v.set) : v.set;
                    if (p.length > 0) {
                        y = z(t);
                    } else {
                        H = false;
                    }
                    for (; p.length; ) {
                        var D = p.pop();
                        v = D;
                        if (n.relative[D]) {
                            v = p.pop();
                        } else {
                            D = "";
                        }
                        if (v == null) {
                            v = h;
                        }
                        n.relative[D](y, v, M);
                    }
                } else {
                    y = [];
                }
            }
            y || (y = t);
            y || k.error(D || g);
            if (j.call(y) === "[object Array]") {
                if (H) {
                    if (h && h.nodeType === 1) {
                        for (g = 0; y[g] != null; g++) {
                            if (y[g] && (y[g] === true || y[g].nodeType === 1 && E(h, y[g]))) {
                                l.push(t[g]);
                            }
                        }
                    } else {
                        for (g = 0; y[g] != null; g++) {
                            y[g] && y[g].nodeType === 1 && l.push(t[g]);
                        }
                    }
                } else {
                    l.push.apply(l, y);
                }
            } else {
                z(y, l);
            }
            if (S) {
                k(S, q, l, m);
                k.uniqueSort(l);
            }
            return l;
        };
        k.uniqueSort = function(g) {
            if (B) {
                i = o;
                g.sort(B);
                if (i) {
                    for (var h = 1; h < g.length; h++) {
                        g[h] === g[h - 1] && g.splice(h--, 1);
                    }
                }
            }
            return g;
        };
        k.matches = function(g, h) {
            return k(g, null, null, h);
        };
        k.find = function(g, h, l) {
            var m, q;
            if (!g) {
                return [];
            }
            for (var p = 0, v = n.order.length; p < v; p++) {
                var t = n.order[p];
                if (q = n.leftMatch[t].exec(g)) {
                    var y = q[1];
                    q.splice(1, 1);
                    if (y.substr(y.length - 1) !== "\\") {
                        q[1] = (q[1] || "").replace(/\\/g, "");
                        m = n.find[t](q, h, l);
                        if (m != null) {
                            g = g.replace(n.match[t], "");
                            break;
                        }
                    }
                }
            }
            m || (m = h.getElementsByTagName("*"));
            return {set: m,expr: g};
        };
        k.filter = function(g, h, l, m) {
            for (var q = g, p = [], v = h, t, y, S = h && h[0] && x(h[0]); g && h.length; ) {
                for (var H in n.filter) {
                    if ((t = n.leftMatch[H].exec(g)) != null && t[2]) {
                        var M = n.filter[H], I, D;
                        D = t[1];
                        y = false;
                        t.splice(1, 1);
                        if (D.substr(D.length - 1) !== "\\") {
                            if (v === p) {
                                p = [];
                            }
                            if (n.preFilter[H]) {
                                if (t = n.preFilter[H](t, v, l, p, m, S)) {
                                    if (t === true) {
                                        continue;
                                    }
                                } else {
                                    y = I = true;
                                }
                            }
                            if (t) {
                                for (var U = 0; (D = v[U]) != null; U++) {
                                    if (D) {
                                        I = M(D, t, U, v);
                                        var Ha = m ^ !!I;
                                        if (l && I != null) {
                                            if (Ha) {
                                                y = true;
                                            } else {
                                                v[U] = false;
                                            }
                                        } else {
                                            if (Ha) {
                                                p.push(D);
                                                y = true;
                                            }
                                        }
                                    }
                                }
                            }
                            if (I !== w) {
                                l || (v = p);
                                g = g.replace(n.match[H], "");
                                if (!y) {
                                    return [];
                                }
                                break;
                            }
                        }
                    }
                }
                if (g === q) {
                    if (y == null) {
                        k.error(g);
                    } else {
                        break;
                    }
                }
                q = g;
            }
            return v;
        };
        k.error = function(g) {
            throw "Syntax error, unrecognized expression: " + g;
        };
        var n = k.selectors = {order: ["ID", "NAME", "TAG"],match: {ID: /#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS: /\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR: /\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG: /^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD: /:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO: /:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch: {},attrMap: {"class": "className","for": "htmlFor"},attrHandle: {href: function(g) {
                    return g.getAttribute("href");
                }},relative: {"+": function(g, h) {
                    var l = typeof h === "string", m = l && !/\W/.test(h);
                    l = l && !m;
                    if (m) {
                        h = h.toLowerCase();
                    }
                    m = 0;
                    for (var q = g.length, p; m < q; m++) {
                        if (p = g[m]) {
                            for (; (p = p.previousSibling) && p.nodeType !== 1; ) {
                            }
                            g[m] = l || p && p.nodeName.toLowerCase() === h ? p || false : p === h;
                        }
                    }
                    l && k.filter(h, g, true);
                },">": function(g, h) {
                    var l = typeof h === "string";
                    if (l && !/\W/.test(h)) {
                        h = h.toLowerCase();
                        for (var m = 0, q = g.length; m < q; m++) {
                            var p = g[m];
                            if (p) {
                                l = p.parentNode;
                                g[m] = l.nodeName.toLowerCase() === h ? l : false;
                            }
                        }
                    } else {
                        m = 0;
                        for (q = g.length; m < q; m++) {
                            if (p = g[m]) {
                                g[m] = l ? p.parentNode : p.parentNode === h;
                            }
                        }
                        l && k.filter(h, g, true);
                    }
                },"": function(g, h, l) {
                    var m = e++, q = d;
                    if (typeof h === "string" && !/\W/.test(h)) {
                        var p = h = h.toLowerCase();
                        q = b;
                    }
                    q("parentNode", h, m, g, p, l);
                },"~": function(g, h, l) {
                    var m = e++, q = d;
                    if (typeof h === "string" && !/\W/.test(h)) {
                        var p = h = h.toLowerCase();
                        q = b;
                    }
                    q("previousSibling", h, m, g, p, l);
                }},find: {ID: function(g, h, l) {
                    if (typeof h.getElementById !== "undefined" && !l) {
                        return (g = h.getElementById(g[1])) ? [g] : [];
                    }
                },NAME: function(g, h) {
                    if (typeof h.getElementsByName !== "undefined") {
                        var l = [];
                        h = h.getElementsByName(g[1]);
                        for (var m = 0, q = h.length; m < q; m++) {
                            h[m].getAttribute("name") === g[1] && l.push(h[m]);
                        }
                        return l.length === 0 ? null : l;
                    }
                },TAG: function(g, h) {
                    return h.getElementsByTagName(g[1]);
                }},preFilter: {CLASS: function(g, h, l, m, q, p) {
                    g = " " + g[1].replace(/\\/g, "") + " ";
                    if (p) {
                        return g;
                    }
                    p = 0;
                    for (var v; (v = h[p]) != null; p++) {
                        if (v) {
                            if (q ^ (v.className && (" " + v.className + " ").replace(/[\t\n]/g, " ").indexOf(g) >= 0)) {
                                l || m.push(v);
                            } else {
                                if (l) {
                                    h[p] = false;
                                }
                            }
                        }
                    }
                    return false;
                },ID: function(g) {
                    return g[1].replace(/\\/g, "");
                },TAG: function(g) {
                    return g[1].toLowerCase();
                },CHILD: function(g) {
                    if (g[1] === "nth") {
                        var h = /(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2] === "even" && "2n" || g[2] === "odd" && "2n+1" || !/\D/.test(g[2]) && "0n+" + g[2] || g[2]);
                        g[2] = h[1] + (h[2] || 1) - 0;
                        g[3] = h[3] - 0;
                    }
                    g[0] = e++;
                    return g;
                },ATTR: function(g, h, l, m, q, p) {
                    h = g[1].replace(/\\/g, "");
                    if (!p && n.attrMap[h]) {
                        g[1] = n.attrMap[h];
                    }
                    if (g[2] === "~=") {
                        g[4] = " " + g[4] + " ";
                    }
                    return g;
                },PSEUDO: function(g, h, l, m, q) {
                    if (g[1] === "not") {
                        if ((f.exec(g[3]) || "").length > 1 || /^\w/.test(g[3])) {
                            g[3] = k(g[3], null, null, h);
                        } else {
                            g = k.filter(g[3], h, l, true ^ q);
                            l || m.push.apply(m, g);
                            return false;
                        }
                    } else {
                        if (n.match.POS.test(g[0]) || n.match.CHILD.test(g[0])) {
                            return true;
                        }
                    }
                    return g;
                },POS: function(g) {
                    g.unshift(true);
                    return g;
                }},filters: {enabled: function(g) {
                    return g.disabled === false && g.type !== "hidden";
                },disabled: function(g) {
                    return g.disabled === true;
                },checked: function(g) {
                    return g.checked === true;
                },selected: function(g) {
                    return g.selected === true;
                },parent: function(g) {
                    return !!g.firstChild;
                },empty: function(g) {
                    return !g.firstChild;
                },has: function(g, h, l) {
                    return !!k(l[3], g).length;
                },header: function(g) {
                    return /h\d/i.test(g.nodeName);
                },text: function(g) {
                    return "text" === g.type;
                },radio: function(g) {
                    return "radio" === g.type;
                },checkbox: function(g) {
                    return "checkbox" === g.type;
                },file: function(g) {
                    return "file" === g.type;
                },password: function(g) {
                    return "password" === g.type;
                },submit: function(g) {
                    return "submit" === g.type;
                },image: function(g) {
                    return "image" === g.type;
                },reset: function(g) {
                    return "reset" === g.type;
                },button: function(g) {
                    return "button" === g.type || g.nodeName.toLowerCase() === "button";
                },input: function(g) {
                    return /input|select|textarea|button/i.test(g.nodeName);
                }},setFilters: {first: function(g, h) {
                    return h === 0;
                },last: function(g, h, l, m) {
                    return h === m.length - 1;
                },even: function(g, h) {
                    return h % 2 === 0;
                },odd: function(g, h) {
                    return h % 2 === 1;
                },lt: function(g, h, l) {
                    return h < l[3] - 0;
                },gt: function(g, h, l) {
                    return h > l[3] - 0;
                },nth: function(g, h, l) {
                    return l[3] - 0 === h;
                },eq: function(g, h, l) {
                    return l[3] - 0 === h;
                }},filter: {PSEUDO: function(g, h, l, m) {
                    var q = h[1], p = n.filters[q];
                    if (p) {
                        return p(g, l, h, m);
                    } else {
                        if (q === "contains") {
                            return (g.textContent || g.innerText || a([g]) || "").indexOf(h[3]) >= 0;
                        } else {
                            if (q === "not") {
                                h = h[3];
                                l = 0;
                                for (m = h.length; l < m; l++) {
                                    if (h[l] === g) {
                                        return false;
                                    }
                                }
                                return true;
                            } else {
                                k.error("Syntax error, unrecognized expression: " + q);
                            }
                        }
                    }
                },CHILD: function(g, h) {
                    var l = h[1], m = g;
                    switch (l) {
                        case "only":
                        case "first":
                            for (; m = m.previousSibling; ) {
                                if (m.nodeType === 1) {
                                    return false;
                                }
                            }
                            if (l === "first") {
                                return true;
                            }
                            m = g;
                        case "last":
                            for (; m = m.nextSibling; ) {
                                if (m.nodeType === 1) {
                                    return false;
                                }
                            }
                            return true;
                        case "nth":
                            l = h[2];
                            var q = h[3];
                            if (l === 1 && q === 0) {
                                return true;
                            }
                            h = h[0];
                            var p = g.parentNode;
                            if (p && (p.sizcache !== h || !g.nodeIndex)) {
                                var v = 0;
                                for (m = p.firstChild; m; m = m.nextSibling) {
                                    if (m.nodeType === 1) {
                                        m.nodeIndex = ++v;
                                    }
                                }
                                p.sizcache = h;
                            }
                            g = g.nodeIndex - q;
                            return l === 0 ? g === 0 : g % l === 0 && g / l >= 0;
                    }
                },ID: function(g, h) {
                    return g.nodeType === 1 && g.getAttribute("id") === h;
                },TAG: function(g, h) {
                    return h === "*" && g.nodeType === 1 || g.nodeName.toLowerCase() === h;
                },CLASS: function(g, h) {
                    return (" " + (g.className || g.getAttribute("class")) + " ").indexOf(h) > -1;
                },ATTR: function(g, h) {
                    var l = h[1];
                    g = n.attrHandle[l] ? n.attrHandle[l](g) : g[l] != null ? g[l] : g.getAttribute(l);
                    l = g + "";
                    var m = h[2];
                    h = h[4];
                    return g == null ? m === "!=" : m === "=" ? l === h : m === "*=" ? l.indexOf(h) >= 0 : m === "~=" ? (" " + l + " ").indexOf(h) >= 0 : !h ? l && g !== false : m === "!=" ? l !== h : m === "^=" ? l.indexOf(h) === 0 : m === "$=" ? l.substr(l.length - h.length) === h : m === "|=" ? l === h || l.substr(0, h.length + 1) === h + "-" : false;
                },POS: function(g, h, l, m) {
                    var q = n.setFilters[h[2]];
                    if (q) {
                        return q(g, l, h, m);
                    }
                }}}, r = n.match.POS;
        for (var u in n.match) {
            n.match[u] = new RegExp(n.match[u].source + /(?![^\[]*\])(?![^\(]*\))/.source);
            n.leftMatch[u] = new RegExp(/(^(?:.|\r|\n)*?)/.source + n.match[u].source.replace(/\\(\d+)/g, function(g, h) {
                return "\\" + (h - 0 + 1);
            }));
        }
        var z = function(g, h) {
            g = Array.prototype.slice.call(g, 0);
            if (h) {
                h.push.apply(h, g);
                return h;
            }
            return g;
        };
        try {
            Array.prototype.slice.call(s.documentElement.childNodes, 0);
        } catch (C) {
            z = function(g, h) {
                h = h || [];
                if (j.call(g) === "[object Array]") {
                    Array.prototype.push.apply(h, g);
                } else {
                    if (typeof g.length === "number") {
                        for (var l = 0, m = g.length; l < m; l++) {
                            h.push(g[l]);
                        }
                    } else {
                        for (l = 0; g[l]; l++) {
                            h.push(g[l]);
                        }
                    }
                }
                return h;
            };
        }
        var B;
        if (s.documentElement.compareDocumentPosition) {
            B = function(g, h) {
                if (!g.compareDocumentPosition || !h.compareDocumentPosition) {
                    if (g == h) {
                        i = true;
                    }
                    return g.compareDocumentPosition ? -1 : 1;
                }
                g = g.compareDocumentPosition(h) & 4 ? -1 : g === h ? 0 : 1;
                if (g === 0) {
                    i = true;
                }
                return g;
            };
        } else {
            if ("sourceIndex" in s.documentElement) {
                B = function(g, h) {
                    if (!g.sourceIndex || !h.sourceIndex) {
                        if (g == h) {
                            i = true;
                        }
                        return g.sourceIndex ? -1 : 1;
                    }
                    g = g.sourceIndex - h.sourceIndex;
                    if (g === 0) {
                        i = true;
                    }
                    return g;
                };
            } else {
                if (s.createRange) {
                    B = function(g, h) {
                        if (!g.ownerDocument || !h.ownerDocument) {
                            if (g == h) {
                                i = true;
                            }
                            return g.ownerDocument ? -1 : 1;
                        }
                        var l = g.ownerDocument.createRange(), m = h.ownerDocument.createRange();
                        l.setStart(g, 0);
                        l.setEnd(g, 0);
                        m.setStart(h, 0);
                        m.setEnd(h, 0);
                        g = l.compareBoundaryPoints(Range.START_TO_END, m);
                        if (g === 0) {
                            i = true;
                        }
                        return g;
                    };
                }
            }
        }
        (function() {
            var g = s.createElement("div"), h = "script" + (new Date).getTime();
            g.innerHTML = "<a name='" + h + "'/>";
            var l = s.documentElement;
            l.insertBefore(g, l.firstChild);
            if (s.getElementById(h)) {
                n.find.ID = function(m, q, p) {
                    if (typeof q.getElementById !== "undefined" && !p) {
                        return (q = q.getElementById(m[1])) ? q.id === m[1] || typeof q.getAttributeNode !== "undefined" && q.getAttributeNode("id").nodeValue === m[1] ? [q] : w : [];
                    }
                };
                n.filter.ID = function(m, q) {
                    var p = typeof m.getAttributeNode !== "undefined" && m.getAttributeNode("id");
                    return m.nodeType === 1 && p && p.nodeValue === q;
                };
            }
            l.removeChild(g);
            l = g = null;
        })();
        (function() {
            var g = s.createElement("div");
            g.appendChild(s.createComment(""));
            if (g.getElementsByTagName("*").length > 0) {
                n.find.TAG = function(h, l) {
                    l = l.getElementsByTagName(h[1]);
                    if (h[1] === "*") {
                        h = [];
                        for (var m = 0; l[m]; m++) {
                            l[m].nodeType === 1 && h.push(l[m]);
                        }
                        l = h;
                    }
                    return l;
                };
            }
            g.innerHTML = "<a href='#'></a>";
            if (g.firstChild && typeof g.firstChild.getAttribute !== "undefined" && g.firstChild.getAttribute("href") !== "#") {
                n.attrHandle.href = function(h) {
                    return h.getAttribute("href", 2);
                };
            }
            g = null;
        })();
        s.querySelectorAll && function() {
            var g = k, h = s.createElement("div");
            h.innerHTML = "<p class='TEST'></p>";
            if (!(h.querySelectorAll && h.querySelectorAll(".TEST").length === 0)) {
                k = function(m, q, p, v) {
                    q = q || s;
                    if (!v && q.nodeType === 9 && !x(q)) {
                        try {
                            return z(q.querySelectorAll(m), p);
                        } catch (t) {
                        }
                    }
                    return g(m, q, p, v);
                };
                for (var l in g) {
                    k[l] = g[l];
                }
                h = null;
            }
        }();
        (function() {
            var g = s.createElement("div");
            g.innerHTML = "<div class='test e'></div><div class='test'></div>";
            if (!(!g.getElementsByClassName || g.getElementsByClassName("e").length === 0)) {
                g.lastChild.className = "e";
                if (g.getElementsByClassName("e").length !== 1) {
                    n.order.splice(1, 0, "CLASS");
                    n.find.CLASS = function(h, l, m) {
                        if (typeof l.getElementsByClassName !== "undefined" && !m) {
                            return l.getElementsByClassName(h[1]);
                        }
                    };
                    g = null;
                }
            }
        })();
        var E = s.compareDocumentPosition ? function(g, h) {
            return !!(g.compareDocumentPosition(h) & 16);
        } : function(g, h) {
            return g !== h && (g.contains ? g.contains(h) : true);
        }, x = function(g) {
            return (g = (g ? g.ownerDocument || g : 0).documentElement) ? g.nodeName !== "HTML" : false;
        }, ga = function(g, h) {
            var l = [], m = "", q;
            for (h = h.nodeType ? [h] : h; q = n.match.PSEUDO.exec(g); ) {
                m += q[0];
                g = g.replace(n.match.PSEUDO, "");
            }
            g = n.relative[g] ? g + "*" : g;
            q = 0;
            for (var p = h.length; q < p; q++) {
                k(g, h[q], l);
            }
            return k.filter(m, l);
        };
        c.find = k;
        c.expr = k.selectors;
        c.expr[":"] = c.expr.filters;
        c.unique = k.uniqueSort;
        c.text = a;
        c.isXMLDoc = x;
        c.contains = E;
    })();
    var eb = /Until$/, fb = /^(?:parents|prevUntil|prevAll)/, gb = /,/;
    R = Array.prototype.slice;
    var Ia = function(a, b, d) {
        if (c.isFunction(b)) {
            return c.grep(a, function(e, j) {
                return !!b.call(e, j, e) === d;
            });
        } else {
            if (b.nodeType) {
                return c.grep(a, function(e) {
                    return e === b === d;
                });
            } else {
                if (typeof b === "string") {
                    var f = c.grep(a, function(e) {
                        return e.nodeType === 1;
                    });
                    if (Ua.test(b)) {
                        return c.filter(b, f, !d);
                    } else {
                        b = c.filter(b, f);
                    }
                }
            }
        }
        return c.grep(a, function(e) {
            return c.inArray(e, b) >= 0 === d;
        });
    };
    c.fn.extend({find: function(a) {
            for (var b = this.pushStack("", "find", a), d = 0, f = 0, e = this.length; f < e; f++) {
                d = b.length;
                c.find(a, this[f], b);
                if (f > 0) {
                    for (var j = d; j < b.length; j++) {
                        for (var i = 0; i < d; i++) {
                            if (b[i] === b[j]) {
                                b.splice(j--, 1);
                                break;
                            }
                        }
                    }
                }
            }
            return b;
        },has: function(a) {
            var b = c(a);
            return this.filter(function() {
                for (var d = 0, f = b.length; d < f; d++) {
                    if (c.contains(this, b[d])) {
                        return true;
                    }
                }
            });
        },not: function(a) {
            return this.pushStack(Ia(this, a, false), "not", a);
        },filter: function(a) {
            return this.pushStack(Ia(this, a, true), "filter", a);
        },is: function(a) {
            return !!a && c.filter(a, this).length > 0;
        },closest: function(a, b) {
            if (c.isArray(a)) {
                var d = [], f = this[0], e, j = {}, i;
                if (f && a.length) {
                    e = 0;
                    for (var o = a.length; e < o; e++) {
                        i = a[e];
                        j[i] || (j[i] = c.expr.match.POS.test(i) ? c(i, b || this.context) : i);
                    }
                    for (; f && f.ownerDocument && f !== b; ) {
                        for (i in j) {
                            e = j[i];
                            if (e.jquery ? e.index(f) > -1 : c(f).is(e)) {
                                d.push({selector: i,elem: f});
                                delete j[i];
                            }
                        }
                        f = f.parentNode;
                    }
                }
                return d;
            }
            var k = c.expr.match.POS.test(a) ? c(a, b || this.context) : null;
            return this.map(function(n, r) {
                for (; r && r.ownerDocument && r !== b; ) {
                    if (k ? k.index(r) > -1 : c(r).is(a)) {
                        return r;
                    }
                    r = r.parentNode;
                }
                return null;
            });
        },index: function(a) {
            if (!a || typeof a === "string") {
                return c.inArray(this[0], a ? c(a) : this.parent().children());
            }
            return c.inArray(a.jquery ? a[0] : a, this);
        },add: function(a, b) {
            a = typeof a === "string" ? c(a, b || this.context) : c.makeArray(a);
            b = c.merge(this.get(), a);
            return this.pushStack(qa(a[0]) || qa(b[0]) ? b : c.unique(b));
        },andSelf: function() {
            return this.add(this.prevObject);
        }});
    c.each({parent: function(a) {
            return (a = a.parentNode) && a.nodeType !== 11 ? a : null;
        },parents: function(a) {
            return c.dir(a, "parentNode");
        },parentsUntil: function(a, b, d) {
            return c.dir(a, "parentNode", d);
        },next: function(a) {
            return c.nth(a, 2, "nextSibling");
        },prev: function(a) {
            return c.nth(a, 2, "previousSibling");
        },nextAll: function(a) {
            return c.dir(a, "nextSibling");
        },prevAll: function(a) {
            return c.dir(a, "previousSibling");
        },nextUntil: function(a, b, d) {
            return c.dir(a, "nextSibling", d);
        },prevUntil: function(a, b, d) {
            return c.dir(a, "previousSibling", d);
        },siblings: function(a) {
            return c.sibling(a.parentNode.firstChild, a);
        },children: function(a) {
            return c.sibling(a.firstChild);
        },contents: function(a) {
            return c.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : c.makeArray(a.childNodes);
        }}, function(a, b) {
        c.fn[a] = function(d, f) {
            var e = c.map(this, b, d);
            eb.test(a) || (f = d);
            if (f && typeof f === "string") {
                e = c.filter(f, e);
            }
            e = this.length > 1 ? c.unique(e) : e;
            if ((this.length > 1 || gb.test(f)) && fb.test(a)) {
                e = e.reverse();
            }
            return this.pushStack(e, a, R.call(arguments).join(","));
        };
    });
    c.extend({filter: function(a, b, d) {
            if (d) {
                a = ":not(" + a + ")";
            }
            return c.find.matches(a, b);
        },dir: function(a, b, d) {
            var f = [];
            for (a = a[b]; a && a.nodeType !== 9 && (d === w || a.nodeType !== 1 || !c(a).is(d)); ) {
                a.nodeType === 1 && f.push(a);
                a = a[b];
            }
            return f;
        },nth: function(a, b, d) {
            b = b || 1;
            for (var f = 0; a; a = a[d]) {
                if (a.nodeType === 1 && ++f === b) {
                    break;
                }
            }
            return a;
        },sibling: function(a, b) {
            for (var d = []; a; a = a.nextSibling) {
                a.nodeType === 1 && a !== b && d.push(a);
            }
            return d;
        }});
    var Ja = / jQuery\d+="(?:\d+|null)"/g, V = /^\s+/, Ka = /(<([\w:]+)[^>]*?)\/>/g, hb = /^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i, La = /<([\w:]+)/, ib = /<tbody/i, jb = /<|&#?\w+;/, ta = /<script|<object|<embed|<option|<style/i, ua = /checked\s*(?:[^=]|=\s*.checked.)/i, Ma = function(a, b, d) {
        return hb.test(d) ? a : b + "></" + d + ">";
    }, F = {option: [1, "<select multiple='multiple'>", "</select>"],legend: [1, "<fieldset>", "</fieldset>"],thead: [1, "<table>", "</table>"],tr: [2, "<table><tbody>", "</tbody></table>"],td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],area: [1, "<map>", "</map>"],_default: [0, "", ""]};
    F.optgroup = F.option;
    F.tbody = F.tfoot = F.colgroup = F.caption = F.thead;
    F.th = F.td;
    if (!c.support.htmlSerialize) {
        F._default = [1, "div<div>", "</div>"];
    }
    c.fn.extend({text: function(a) {
            if (c.isFunction(a)) {
                return this.each(function(b) {
                    var d = c(this);
                    d.text(a.call(this, b, d.text()));
                });
            }
            if (typeof a !== "object" && a !== w) {
                return this.empty().append((this[0] && this[0].ownerDocument || s).createTextNode(a));
            }
            return c.text(this);
        },wrapAll: function(a) {
            if (c.isFunction(a)) {
                return this.each(function(d) {
                    c(this).wrapAll(a.call(this, d));
                });
            }
            if (this[0]) {
                var b = c(a, this[0].ownerDocument).eq(0).clone(true);
                this[0].parentNode && b.insertBefore(this[0]);
                b.map(function() {
                    for (var d = this; d.firstChild && d.firstChild.nodeType === 1; ) {
                        d = d.firstChild;
                    }
                    return d;
                }).append(this);
            }
            return this;
        },wrapInner: function(a) {
            if (c.isFunction(a)) {
                return this.each(function(b) {
                    c(this).wrapInner(a.call(this, b));
                });
            }
            return this.each(function() {
                var b = c(this), d = b.contents();
                d.length ? d.wrapAll(a) : b.append(a);
            });
        },wrap: function(a) {
            return this.each(function() {
                c(this).wrapAll(a);
            });
        },unwrap: function() {
            return this.parent().each(function() {
                c.nodeName(this, "body") || c(this).replaceWith(this.childNodes);
            }).end();
        },append: function() {
            return this.domManip(arguments, true, function(a) {
                this.nodeType === 1 && this.appendChild(a);
            });
        },prepend: function() {
            return this.domManip(arguments, true, function(a) {
                this.nodeType === 1 && this.insertBefore(a, this.firstChild);
            });
        },before: function() {
            if (this[0] && this[0].parentNode) {
                return this.domManip(arguments, false, function(b) {
                    this.parentNode.insertBefore(b, this);
                });
            } else {
                if (arguments.length) {
                    var a = c(arguments[0]);
                    a.push.apply(a, this.toArray());
                    return this.pushStack(a, "before", arguments);
                }
            }
        },after: function() {
            if (this[0] && this[0].parentNode) {
                return this.domManip(arguments, false, function(b) {
                    this.parentNode.insertBefore(b, this.nextSibling);
                });
            } else {
                if (arguments.length) {
                    var a = this.pushStack(this, "after", arguments);
                    a.push.apply(a, c(arguments[0]).toArray());
                    return a;
                }
            }
        },remove: function(a, b) {
            for (var d = 0, f; (f = this[d]) != null; d++) {
                if (!a || c.filter(a, [f]).length) {
                    if (!b && f.nodeType === 1) {
                        c.cleanData(f.getElementsByTagName("*"));
                        c.cleanData([f]);
                    }
                    f.parentNode && f.parentNode.removeChild(f);
                }
            }
            return this;
        },empty: function() {
            for (var a = 0, b; (b = this[a]) != null; a++) {
                for (b.nodeType === 1 && c.cleanData(b.getElementsByTagName("*")); b.firstChild; ) {
                    b.removeChild(b.firstChild);
                }
            }
            return this;
        },clone: function(a) {
            var b = this.map(function() {
                if (!c.support.noCloneEvent && !c.isXMLDoc(this)) {
                    var d = this.outerHTML, f = this.ownerDocument;
                    if (!d) {
                        d = f.createElement("div");
                        d.appendChild(this.cloneNode(true));
                        d = d.innerHTML;
                    }
                    return c.clean([d.replace(Ja, "").replace(/=([^="'>\s]+\/)>/g, '="$1">').replace(V, "")], f)[0];
                } else {
                    return this.cloneNode(true);
                }
            });
            if (a === true) {
                ra(this, b);
                ra(this.find("*"), b.find("*"));
            }
            return b;
        },html: function(a) {
            if (a === w) {
                return this[0] && this[0].nodeType === 1 ? this[0].innerHTML.replace(Ja, "") : null;
            } else {
                if (typeof a === "string" && !ta.test(a) && (c.support.leadingWhitespace || !V.test(a)) && !F[(La.exec(a) || ["", ""])[1].toLowerCase()]) {
                    a = a.replace(Ka, Ma);
                    try {
                        for (var b = 0, d = this.length; b < d; b++) {
                            if (this[b].nodeType === 1) {
                                c.cleanData(this[b].getElementsByTagName("*"));
                                this[b].innerHTML = a;
                            }
                        }
                    } catch (f) {
                        this.empty().append(a);
                    }
                } else {
                    c.isFunction(a) ? this.each(function(e) {
                        var j = c(this), i = j.html();
                        j.empty().append(function() {
                            return a.call(this, e, i);
                        });
                    }) : this.empty().append(a);
                }
            }
            return this;
        },replaceWith: function(a) {
            if (this[0] && this[0].parentNode) {
                if (c.isFunction(a)) {
                    return this.each(function(b) {
                        var d = c(this), f = d.html();
                        d.replaceWith(a.call(this, b, f));
                    });
                }
                if (typeof a !== "string") {
                    a = c(a).detach();
                }
                return this.each(function() {
                    var b = this.nextSibling, d = this.parentNode;
                    c(this).remove();
                    b ? c(b).before(a) : c(d).append(a);
                });
            } else {
                return this.pushStack(c(c.isFunction(a) ? a() : a), "replaceWith", a);
            }
        },detach: function(a) {
            return this.remove(a, true);
        },domManip: function(a, b, d) {
            function f(u) {
                return c.nodeName(u, "table") ? u.getElementsByTagName("tbody")[0] || u.appendChild(u.ownerDocument.createElement("tbody")) : u;
            }
            var e, j, i = a[0], o = [], k;
            if (!c.support.checkClone && arguments.length === 3 && typeof i === "string" && ua.test(i)) {
                return this.each(function() {
                    c(this).domManip(a, b, d, true);
                });
            }
            if (c.isFunction(i)) {
                return this.each(function(u) {
                    var z = c(this);
                    a[0] = i.call(this, u, b ? z.html() : w);
                    z.domManip(a, b, d);
                });
            }
            if (this[0]) {
                e = i && i.parentNode;
                e = c.support.parentNode && e && e.nodeType === 11 && e.childNodes.length === this.length ? {fragment: e} : sa(a, this, o);
                k = e.fragment;
                if (j = k.childNodes.length === 1 ? (k = k.firstChild) : k.firstChild) {
                    b = b && c.nodeName(j, "tr");
                    for (var n = 0, r = this.length; n < r; n++) {
                        d.call(b ? f(this[n], j) : this[n], n > 0 || e.cacheable || this.length > 1 ? k.cloneNode(true) : k);
                    }
                }
                o.length && c.each(o, Qa);
            }
            return this;
        }});
    c.fragments = {};
    c.each({appendTo: "append",prependTo: "prepend",insertBefore: "before",insertAfter: "after",replaceAll: "replaceWith"}, function(a, b) {
        c.fn[a] = function(d) {
            var f = [];
            d = c(d);
            var e = this.length === 1 && this[0].parentNode;
            if (e && e.nodeType === 11 && e.childNodes.length === 1 && d.length === 1) {
                d[b](this[0]);
                return this;
            } else {
                e = 0;
                for (var j = d.length; e < j; e++) {
                    var i = (e > 0 ? this.clone(true) : this).get();
                    c.fn[b].apply(c(d[e]), i);
                    f = f.concat(i);
                }
                return this.pushStack(f, a, d.selector);
            }
        };
    });
    c.extend({clean: function(a, b, d, f) {
            b = b || s;
            if (typeof b.createElement === "undefined") {
                b = b.ownerDocument || b[0] && b[0].ownerDocument || s;
            }
            for (var e = [], j = 0, i; (i = a[j]) != null; j++) {
                if (typeof i === "number") {
                    i += "";
                }
                if (i) {
                    if (typeof i === "string" && !jb.test(i)) {
                        i = b.createTextNode(i);
                    } else {
                        if (typeof i === "string") {
                            i = i.replace(Ka, Ma);
                            var o = (La.exec(i) || ["", ""])[1].toLowerCase(), k = F[o] || F._default, n = k[0], r = b.createElement("div");
                            for (r.innerHTML = k[1] + i + k[2]; n--; ) {
                                r = r.lastChild;
                            }
                            if (!c.support.tbody) {
                                n = ib.test(i);
                                o = o === "table" && !n ? r.firstChild && r.firstChild.childNodes : k[1] === "<table>" && !n ? r.childNodes : [];
                                for (k = o.length - 1; k >= 0; --k) {
                                    c.nodeName(o[k], "tbody") && !o[k].childNodes.length && o[k].parentNode.removeChild(o[k]);
                                }
                            }
                            !c.support.leadingWhitespace && V.test(i) && r.insertBefore(b.createTextNode(V.exec(i)[0]), r.firstChild);
                            i = r.childNodes;
                        }
                    }
                    if (i.nodeType) {
                        e.push(i);
                    } else {
                        e = c.merge(e, i);
                    }
                }
            }
            if (d) {
                for (j = 0; e[j]; j++) {
                    if (f && c.nodeName(e[j], "script") && (!e[j].type || e[j].type.toLowerCase() === "text/javascript")) {
                        f.push(e[j].parentNode ? e[j].parentNode.removeChild(e[j]) : e[j]);
                    } else {
                        e[j].nodeType === 1 && e.splice.apply(e, [j + 1, 0].concat(c.makeArray(e[j].getElementsByTagName("script"))));
                        d.appendChild(e[j]);
                    }
                }
            }
            return e;
        },cleanData: function(a) {
            for (var b, d, f = c.cache, e = c.event.special, j = c.support.deleteExpando, i = 0, o; (o = a[i]) != null; i++) {
                if (d = o[c.expando]) {
                    b = f[d];
                    if (b.events) {
                        for (var k in b.events) {
                            e[k] ? c.event.remove(o, k) : Ca(o, k, b.handle);
                        }
                    }
                    if (j) {
                        delete o[c.expando];
                    } else {
                        o.removeAttribute && o.removeAttribute(c.expando);
                    }
                    delete f[d];
                }
            }
        }});
    var kb = /z-?index|font-?weight|opacity|zoom|line-?height/i, Na = /alpha\([^)]*\)/, Oa = /opacity=([^)]*)/, ha = /float/i, ia = /-([a-z])/ig, lb = /([A-Z])/g, mb = /^-?\d+(?:px)?$/i, nb = /^-?\d/, ob = {position: "absolute",visibility: "hidden",display: "block"}, pb = ["Left", "Right"], qb = ["Top", "Bottom"], rb = s.defaultView && s.defaultView.getComputedStyle, Pa = c.support.cssFloat ? "cssFloat" : "styleFloat", ja = function(a, b) {
        return b.toUpperCase();
    };
    c.fn.css = function(a, b) {
        return X(this, a, b, true, function(d, f, e) {
            if (e === w) {
                return c.curCSS(d, f);
            }
            if (typeof e === "number" && !kb.test(f)) {
                e += "px";
            }
            c.style(d, f, e);
        });
    };
    c.extend({style: function(a, b, d) {
            if (!a || a.nodeType === 3 || a.nodeType === 8) {
                return w;
            }
            if ((b === "width" || b === "height") && parseFloat(d) < 0) {
                d = w;
            }
            var f = a.style || a, e = d !== w;
            if (!c.support.opacity && b === "opacity") {
                if (e) {
                    f.zoom = 1;
                    b = parseInt(d, 10) + "" === "NaN" ? "" : "alpha(opacity=" + d * 100 + ")";
                    a = f.filter || c.curCSS(a, "filter") || "";
                    f.filter = Na.test(a) ? a.replace(Na, b) : b;
                }
                return f.filter && f.filter.indexOf("opacity=") >= 0 ? parseFloat(Oa.exec(f.filter)[1]) / 100 + "" : "";
            }
            if (ha.test(b)) {
                b = Pa;
            }
            b = b.replace(ia, ja);
            if (e) {
                f[b] = d;
            }
            return f[b];
        },css: function(a, b, d, f) {
            if (b === "width" || b === "height") {
                var e, j = b === "width" ? pb : qb;
                function i() {
                    e = b === "width" ? a.offsetWidth : a.offsetHeight;
                    f !== "border" && c.each(j, function() {
                        f || (e -= parseFloat(c.curCSS(a, "padding" + this, true)) || 0);
                        if (f === "margin") {
                            e += parseFloat(c.curCSS(a, "margin" + this, true)) || 0;
                        } else {
                            e -= parseFloat(c.curCSS(a, "border" + this + "Width", true)) || 0;
                        }
                    });
                }
                a.offsetWidth !== 0 ? i() : c.swap(a, ob, i);
                return Math.max(0, Math.round(e));
            }
            return c.curCSS(a, b, d);
        },curCSS: function(a, b, d) {
            var f, e = a.style;
            if (!c.support.opacity && b === "opacity" && a.currentStyle) {
                f = Oa.test(a.currentStyle.filter || "") ? parseFloat(RegExp.$1) / 100 + "" : "";
                return f === "" ? "1" : f;
            }
            if (ha.test(b)) {
                b = Pa;
            }
            if (!d && e && e[b]) {
                f = e[b];
            } else {
                if (rb) {
                    if (ha.test(b)) {
                        b = "float";
                    }
                    b = b.replace(lb, "-$1").toLowerCase();
                    e = a.ownerDocument.defaultView;
                    if (!e) {
                        return null;
                    }
                    if (a = e.getComputedStyle(a, null)) {
                        f = a.getPropertyValue(b);
                    }
                    if (b === "opacity" && f === "") {
                        f = "1";
                    }
                } else {
                    if (a.currentStyle) {
                        d = b.replace(ia, ja);
                        f = a.currentStyle[b] || a.currentStyle[d];
                        if (!mb.test(f) && nb.test(f)) {
                            b = e.left;
                            var j = a.runtimeStyle.left;
                            a.runtimeStyle.left = a.currentStyle.left;
                            e.left = d === "fontSize" ? "1em" : f || 0;
                            f = e.pixelLeft + "px";
                            e.left = b;
                            a.runtimeStyle.left = j;
                        }
                    }
                }
            }
            return f;
        },swap: function(a, b, d) {
            var f = {};
            for (var e in b) {
                f[e] = a.style[e];
                a.style[e] = b[e];
            }
            d.call(a);
            for (e in b) {
                a.style[e] = f[e];
            }
        }});
    if (c.expr && c.expr.filters) {
        c.expr.filters.hidden = function(a) {
            var b = a.offsetWidth, d = a.offsetHeight, f = a.nodeName.toLowerCase() === "tr";
            return b === 0 && d === 0 && !f ? true : b > 0 && d > 0 && !f ? false : c.curCSS(a, "display") === "none";
        };
        c.expr.filters.visible = function(a) {
            return !c.expr.filters.hidden(a);
        };
    }
    var sb = J(), tb = /<script(.|\s)*?\/script>/gi, ub = /select|textarea/i, vb = /color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i, N = /=\?(&|$)/, ka = /\?/, wb = /(\?|&)_=.*?(&|$)/, xb = /^(\w+:)?\/\/([^\/?#]+)/, yb = /%20/g, zb = c.fn.load;
    c.fn.extend({load: function(a, b, d) {
            if (typeof a !== "string") {
                return zb.call(this, a);
            } else {
                if (!this.length) {
                    return this;
                }
            }
            var f = a.indexOf(" ");
            if (f >= 0) {
                var e = a.slice(f, a.length);
                a = a.slice(0, f);
            }
            f = "GET";
            if (b) {
                if (c.isFunction(b)) {
                    d = b;
                    b = null;
                } else {
                    if (typeof b === "object") {
                        b = c.param(b, c.ajaxSettings.traditional);
                        f = "POST";
                    }
                }
            }
            var j = this;
            c.ajax({url: a,type: f,dataType: "html",data: b,complete: function(i, o) {
                    if (o === "success" || o === "notmodified") {
                        j.html(e ? c("<div />").append(i.responseText.replace(tb, "")).find(e) : i.responseText);
                    }
                    d && j.each(d, [i.responseText, o, i]);
                }});
            return this;
        },serialize: function() {
            return c.param(this.serializeArray());
        },serializeArray: function() {
            return this.map(function() {
                return this.elements ? c.makeArray(this.elements) : this;
            }).filter(function() {
                return this.name && !this.disabled && (this.checked || ub.test(this.nodeName) || vb.test(this.type));
            }).map(function(a, b) {
                a = c(this).val();
                return a == null ? null : c.isArray(a) ? c.map(a, function(d) {
                    return {name: b.name,value: d};
                }) : {name: b.name,value: a};
            }).get();
        }});
    c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(a, b) {
        c.fn[b] = function(d) {
            return this.bind(b, d);
        };
    });
    c.extend({get: function(a, b, d, f) {
            if (c.isFunction(b)) {
                f = f || d;
                d = b;
                b = null;
            }
            return c.ajax({type: "GET",url: a,data: b,success: d,dataType: f});
        },getScript: function(a, b) {
            return c.get(a, null, b, "script");
        },getJSON: function(a, b, d) {
            return c.get(a, b, d, "json");
        },post: function(a, b, d, f) {
            if (c.isFunction(b)) {
                f = f || d;
                d = b;
                b = {};
            }
            return c.ajax({type: "POST",url: a,data: b,success: d,dataType: f});
        },ajaxSetup: function(a) {
            c.extend(c.ajaxSettings, a);
        },ajaxSettings: {url: location.href,global: true,type: "GET",contentType: "application/x-www-form-urlencoded",processData: true,async: true,xhr: A.XMLHttpRequest && (A.location.protocol !== "file:" || !A.ActiveXObject) ? function() {
                return new A.XMLHttpRequest;
            } : function() {
                try {
                    return new A.ActiveXObject("Microsoft.XMLHTTP");
                } catch (a) {
                }
            },accepts: {xml: "application/xml, text/xml",html: "text/html",script: "text/javascript, application/javascript",json: "application/json, text/javascript",text: "text/plain",_default: "*/*"}},lastModified: {},etag: {},ajax: function(a) {
            function b() {
                e.success && e.success.call(k, o, i, x);
                e.global && f("ajaxSuccess", [x, e]);
            }
            function d() {
                e.complete && e.complete.call(k, x, i);
                e.global && f("ajaxComplete", [x, e]);
                e.global && !--c.active && c.event.trigger("ajaxStop");
            }
            function f(q, p) {
                (e.context ? c(e.context) : c.event).trigger(q, p);
            }
            var e = c.extend(true, {}, c.ajaxSettings, a), j, i, o, k = a && a.context || e, n = e.type.toUpperCase();
            if (e.data && e.processData && typeof e.data !== "string") {
                e.data = c.param(e.data, e.traditional);
            }
            if (e.dataType === "jsonp") {
                if (n === "GET") {
                    N.test(e.url) || (e.url += (ka.test(e.url) ? "&" : "?") + (e.jsonp || "callback") + "=?");
                } else {
                    if (!e.data || !N.test(e.data)) {
                        e.data = (e.data ? e.data + "&" : "") + (e.jsonp || "callback") + "=?";
                    }
                }
                e.dataType = "json";
            }
            if (e.dataType === "json" && (e.data && N.test(e.data) || N.test(e.url))) {
                j = e.jsonpCallback || "jsonp" + sb++;
                if (e.data) {
                    e.data = (e.data + "").replace(N, "=" + j + "$1");
                }
                e.url = e.url.replace(N, "=" + j + "$1");
                e.dataType = "script";
                A[j] = A[j] || function(q) {
                    o = q;
                    b();
                    d();
                    A[j] = w;
                    try {
                        delete A[j];
                    } catch (p) {
                    }
                    z && z.removeChild(C);
                };
            }
            if (e.dataType === "script" && e.cache === null) {
                e.cache = false;
            }
            if (e.cache === false && n === "GET") {
                var r = J(), u = e.url.replace(wb, "$1_=" + r + "$2");
                e.url = u + (u === e.url ? (ka.test(e.url) ? "&" : "?") + "_=" + r : "");
            }
            if (e.data && n === "GET") {
                e.url += (ka.test(e.url) ? "&" : "?") + e.data;
            }
            e.global && !c.active++ && c.event.trigger("ajaxStart");
            r = (r = xb.exec(e.url)) && (r[1] && r[1] !== location.protocol || r[2] !== location.host);
            if (e.dataType === "script" && n === "GET" && r) {
                var z = s.getElementsByTagName("head")[0] || s.documentElement, C = s.createElement("script");
                C.src = e.url;
                if (e.scriptCharset) {
                    C.charset = e.scriptCharset;
                }
                if (!j) {
                    var B = false;
                    C.onload = C.onreadystatechange = function() {
                        if (!B && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete")) {
                            B = true;
                            b();
                            d();
                            C.onload = C.onreadystatechange = null;
                            z && C.parentNode && z.removeChild(C);
                        }
                    };
                }
                z.insertBefore(C, z.firstChild);
                return w;
            }
            var E = false, x = e.xhr();
            if (x) {
                e.username ? x.open(n, e.url, e.async, e.username, e.password) : x.open(n, e.url, e.async);
                try {
                    if (e.data || a && a.contentType) {
                        x.setRequestHeader("Content-Type", e.contentType);
                    }
                    if (e.ifModified) {
                        c.lastModified[e.url] && x.setRequestHeader("If-Modified-Since", c.lastModified[e.url]);
                        c.etag[e.url] && x.setRequestHeader("If-None-Match", c.etag[e.url]);
                    }
                    r || x.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                    x.setRequestHeader("Accept", e.dataType && e.accepts[e.dataType] ? e.accepts[e.dataType] + ", */*" : e.accepts._default);
                } catch (ga) {
                }
                if (e.beforeSend && e.beforeSend.call(k, x, e) === false) {
                    e.global && !--c.active && c.event.trigger("ajaxStop");
                    x.abort();
                    return false;
                }
                e.global && f("ajaxSend", [x, e]);
                var g = x.onreadystatechange = function(q) {
                    if (!x || x.readyState === 0 || q === "abort") {
                        E || d();
                        E = true;
                        if (x) {
                            x.onreadystatechange = c.noop;
                        }
                    } else {
                        if (!E && x && (x.readyState === 4 || q === "timeout")) {
                            E = true;
                            x.onreadystatechange = c.noop;
                            i = q === "timeout" ? "timeout" : !c.httpSuccess(x) ? "error" : e.ifModified && c.httpNotModified(x, e.url) ? "notmodified" : "success";
                            var p;
                            if (i === "success") {
                                try {
                                    o = c.httpData(x, e.dataType, e);
                                } catch (v) {
                                    i = "parsererror";
                                    p = v;
                                }
                            }
                            if (i === "success" || i === "notmodified") {
                                j || b();
                            } else {
                                c.handleError(e, x, i, p);
                            }
                            d();
                            q === "timeout" && x.abort();
                            if (e.async) {
                                x = null;
                            }
                        }
                    }
                };
                try {
                    var h = x.abort;
                    x.abort = function() {
                        x && h.call(x);
                        g("abort");
                    };
                } catch (l) {
                }
                e.async && e.timeout > 0 && setTimeout(function() {
                    x && !E && g("timeout");
                }, e.timeout);
                try {
                    x.send(n === "POST" || n === "PUT" || n === "DELETE" ? e.data : null);
                } catch (m) {
                    c.handleError(e, x, null, m);
                    d();
                }
                e.async || g();
                return x;
            }
        },handleError: function(a, b, d, f) {
            if (a.error) {
                a.error.call(a.context || a, b, d, f);
            }
            if (a.global) {
                (a.context ? c(a.context) : c.event).trigger("ajaxError", [b, a, f]);
            }
        },active: 0,httpSuccess: function(a) {
            try {
                return !a.status && location.protocol === "file:" || a.status >= 200 && a.status < 300 || a.status === 304 || a.status === 1223 || a.status === 0;
            } catch (b) {
            }
            return false;
        },httpNotModified: function(a, b) {
            var d = a.getResponseHeader("Last-Modified"), f = a.getResponseHeader("Etag");
            if (d) {
                c.lastModified[b] = d;
            }
            if (f) {
                c.etag[b] = f;
            }
            return a.status === 304 || a.status === 0;
        },httpData: function(a, b, d) {
            var f = a.getResponseHeader("content-type") || "", e = b === "xml" || !b && f.indexOf("xml") >= 0;
            a = e ? a.responseXML : a.responseText;
            e && a.documentElement.nodeName === "parsererror" && c.error("parsererror");
            if (d && d.dataFilter) {
                a = d.dataFilter(a, b);
            }
            if (typeof a === "string") {
                if (b === "json" || !b && f.indexOf("json") >= 0) {
                    a = c.parseJSON(a);
                } else {
                    if (b === "script" || !b && f.indexOf("javascript") >= 0) {
                        c.globalEval(a);
                    }
                }
            }
            return a;
        },param: function(a, b) {
            function d(i, o) {
                if (c.isArray(o)) {
                    c.each(o, function(k, n) {
                        b || /\[\]$/.test(i) ? f(i, n) : d(i + "[" + (typeof n === "object" || c.isArray(n) ? k : "") + "]", n);
                    });
                } else {
                    !b && o != null && typeof o === "object" ? c.each(o, function(k, n) {
                        d(i + "[" + k + "]", n);
                    }) : f(i, o);
                }
            }
            function f(i, o) {
                o = c.isFunction(o) ? o() : o;
                e[e.length] = encodeURIComponent(i) + "=" + encodeURIComponent(o);
            }
            var e = [];
            if (b === w) {
                b = c.ajaxSettings.traditional;
            }
            if (c.isArray(a) || a.jquery) {
                c.each(a, function() {
                    f(this.name, this.value);
                });
            } else {
                for (var j in a) {
                    d(j, a[j]);
                }
            }
            return e.join("&").replace(yb, "+");
        }});
    var la = {}, Ab = /toggle|show|hide/, Bb = /^([+-]=)?([\d+-.]+)(.*)$/, W, va = [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity"]];
    c.fn.extend({show: function(a, b) {
            if (a || a === 0) {
                return this.animate(K("show", 3), a, b);
            } else {
                a = 0;
                for (b = this.length; a < b; a++) {
                    var d = c.data(this[a], "olddisplay");
                    this[a].style.display = d || "";
                    if (c.css(this[a], "display") === "none") {
                        d = this[a].nodeName;
                        var f;
                        if (la[d]) {
                            f = la[d];
                        } else {
                            var e = c("<" + d + " />").appendTo("body");
                            f = e.css("display");
                            if (f === "none") {
                                f = "block";
                            }
                            e.remove();
                            la[d] = f;
                        }
                        c.data(this[a], "olddisplay", f);
                    }
                }
                a = 0;
                for (b = this.length; a < b; a++) {
                    this[a].style.display = c.data(this[a], "olddisplay") || "";
                }
                return this;
            }
        },hide: function(a, b) {
            if (a || a === 0) {
                return this.animate(K("hide", 3), a, b);
            } else {
                a = 0;
                for (b = this.length; a < b; a++) {
                    var d = c.data(this[a], "olddisplay");
                    !d && d !== "none" && c.data(this[a], "olddisplay", c.css(this[a], "display"));
                }
                a = 0;
                for (b = this.length; a < b; a++) {
                    this[a].style.display = "none";
                }
                return this;
            }
        },_toggle: c.fn.toggle,toggle: function(a, b) {
            var d = typeof a === "boolean";
            if (c.isFunction(a) && c.isFunction(b)) {
                this._toggle.apply(this, arguments);
            } else {
                a == null || d ? this.each(function() {
                    var f = d ? a : c(this).is(":hidden");
                    c(this)[f ? "show" : "hide"]();
                }) : this.animate(K("toggle", 3), a, b);
            }
            return this;
        },fadeTo: function(a, b, d) {
            return this.filter(":hidden").css("opacity", 0).show().end().animate({opacity: b}, a, d);
        },animate: function(a, b, d, f) {
            var e = c.speed(b, d, f);
            if (c.isEmptyObject(a)) {
                return this.each(e.complete);
            }
            return this[e.queue === false ? "each" : "queue"](function() {
                var j = c.extend({}, e), i, o = this.nodeType === 1 && c(this).is(":hidden"), k = this;
                for (i in a) {
                    var n = i.replace(ia, ja);
                    if (i !== n) {
                        a[n] = a[i];
                        delete a[i];
                        i = n;
                    }
                    if (a[i] === "hide" && o || a[i] === "show" && !o) {
                        return j.complete.call(this);
                    }
                    if ((i === "height" || i === "width") && this.style) {
                        j.display = c.css(this, "display");
                        j.overflow = this.style.overflow;
                    }
                    if (c.isArray(a[i])) {
                        (j.specialEasing = j.specialEasing || {})[i] = a[i][1];
                        a[i] = a[i][0];
                    }
                }
                if (j.overflow != null) {
                    this.style.overflow = "hidden";
                }
                j.curAnim = c.extend({}, a);
                c.each(a, function(r, u) {
                    var z = new c.fx(k, j, r);
                    if (Ab.test(u)) {
                        z[u === "toggle" ? o ? "show" : "hide" : u](a);
                    } else {
                        var C = Bb.exec(u), B = z.cur(true) || 0;
                        if (C) {
                            u = parseFloat(C[2]);
                            var E = C[3] || "px";
                            if (E !== "px") {
                                k.style[r] = (u || 1) + E;
                                B = (u || 1) / z.cur(true) * B;
                                k.style[r] = B + E;
                            }
                            if (C[1]) {
                                u = (C[1] === "-=" ? -1 : 1) * u + B;
                            }
                            z.custom(B, u, E);
                        } else {
                            z.custom(B, u, "");
                        }
                    }
                });
                return true;
            });
        },stop: function(a, b) {
            var d = c.timers;
            a && this.queue([]);
            this.each(function() {
                for (var f = d.length - 1; f >= 0; f--) {
                    if (d[f].elem === this) {
                        b && d[f](true);
                        d.splice(f, 1);
                    }
                }
            });
            b || this.dequeue();
            return this;
        }});
    c.each({slideDown: K("show", 1),slideUp: K("hide", 1),slideToggle: K("toggle", 1),fadeIn: {opacity: "show"},fadeOut: {opacity: "hide"}}, function(a, b) {
        c.fn[a] = function(d, f) {
            return this.animate(b, d, f);
        };
    });
    c.extend({speed: function(a, b, d) {
            var f = a && typeof a === "object" ? a : {complete: d || !d && b || c.isFunction(a) && a,duration: a,easing: d && b || b && !c.isFunction(b) && b};
            f.duration = c.fx.off ? 0 : typeof f.duration === "number" ? f.duration : c.fx.speeds[f.duration] || c.fx.speeds._default;
            f.old = f.complete;
            f.complete = function() {
                f.queue !== false && c(this).dequeue();
                c.isFunction(f.old) && f.old.call(this);
            };
            return f;
        },easing: {linear: function(a, b, d, f) {
                return d + f * a;
            },swing: function(a, b, d, f) {
                return (-Math.cos(a * Math.PI) / 2 + 0.5) * f + d;
            }},timers: [],fx: function(a, b, d) {
            this.options = b;
            this.elem = a;
            this.prop = d;
            if (!b.orig) {
                b.orig = {};
            }
        }});
    c.fx.prototype = {update: function() {
            this.options.step && this.options.step.call(this.elem, this.now, this);
            (c.fx.step[this.prop] || c.fx.step._default)(this);
            if ((this.prop === "height" || this.prop === "width") && this.elem.style) {
                this.elem.style.display = "block";
            }
        },cur: function(a) {
            if (this.elem[this.prop] != null && (!this.elem.style || this.elem.style[this.prop] == null)) {
                return this.elem[this.prop];
            }
            return (a = parseFloat(c.css(this.elem, this.prop, a))) && a > -10000 ? a : parseFloat(c.curCSS(this.elem, this.prop)) || 0;
        },custom: function(a, b, d) {
            function f(j) {
                return e.step(j);
            }
            this.startTime = J();
            this.start = a;
            this.end = b;
            this.unit = d || this.unit || "px";
            this.now = this.start;
            this.pos = this.state = 0;
            var e = this;
            f.elem = this.elem;
            if (f() && c.timers.push(f) && !W) {
                W = setInterval(c.fx.tick, 13);
            }
        },show: function() {
            this.options.orig[this.prop] = c.style(this.elem, this.prop);
            this.options.show = true;
            this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur());
            c(this.elem).show();
        },hide: function() {
            this.options.orig[this.prop] = c.style(this.elem, this.prop);
            this.options.hide = true;
            this.custom(this.cur(), 0);
        },step: function(a) {
            var b = J(), d = true;
            if (a || b >= this.options.duration + this.startTime) {
                this.now = this.end;
                this.pos = this.state = 1;
                this.update();
                this.options.curAnim[this.prop] = true;
                for (var f in this.options.curAnim) {
                    if (this.options.curAnim[f] !== true) {
                        d = false;
                    }
                }
                if (d) {
                    if (this.options.display != null) {
                        this.elem.style.overflow = this.options.overflow;
                        a = c.data(this.elem, "olddisplay");
                        this.elem.style.display = a ? a : this.options.display;
                        if (c.css(this.elem, "display") === "none") {
                            this.elem.style.display = "block";
                        }
                    }
                    this.options.hide && c(this.elem).hide();
                    if (this.options.hide || this.options.show) {
                        for (var e in this.options.curAnim) {
                            c.style(this.elem, e, this.options.orig[e]);
                        }
                    }
                    this.options.complete.call(this.elem);
                }
                return false;
            } else {
                e = b - this.startTime;
                this.state = e / this.options.duration;
                a = this.options.easing || (c.easing.swing ? "swing" : "linear");
                this.pos = c.easing[this.options.specialEasing && this.options.specialEasing[this.prop] || a](this.state, e, 0, 1, this.options.duration);
                this.now = this.start + (this.end - this.start) * this.pos;
                this.update();
            }
            return true;
        }};
    c.extend(c.fx, {tick: function() {
            for (var a = c.timers, b = 0; b < a.length; b++) {
                a[b]() || a.splice(b--, 1);
            }
            a.length || c.fx.stop();
        },stop: function() {
            clearInterval(W);
            W = null;
        },speeds: {slow: 600,fast: 200,_default: 400},step: {opacity: function(a) {
                c.style(a.elem, "opacity", a.now);
            },_default: function(a) {
                if (a.elem.style && a.elem.style[a.prop] != null) {
                    a.elem.style[a.prop] = (a.prop === "width" || a.prop === "height" ? Math.max(0, a.now) : a.now) + a.unit;
                } else {
                    a.elem[a.prop] = a.now;
                }
            }}});
    if (c.expr && c.expr.filters) {
        c.expr.filters.animated = function(a) {
            return c.grep(c.timers, function(b) {
                return a === b.elem;
            }).length;
        };
    }
    c.fn.offset = "getBoundingClientRect" in s.documentElement ? function(a) {
        var b = this[0];
        if (a) {
            return this.each(function(e) {
                c.offset.setOffset(this, a, e);
            });
        }
        if (!b || !b.ownerDocument) {
            return null;
        }
        if (b === b.ownerDocument.body) {
            return c.offset.bodyOffset(b);
        }
        var d = b.getBoundingClientRect(), f = b.ownerDocument;
        b = f.body;
        f = f.documentElement;
        return {top: d.top + (self.pageYOffset || c.support.boxModel && f.scrollTop || b.scrollTop) - (f.clientTop || b.clientTop || 0),left: d.left + (self.pageXOffset || c.support.boxModel && f.scrollLeft || b.scrollLeft) - (f.clientLeft || b.clientLeft || 0)};
    } : function(a) {
        var b = this[0];
        if (a) {
            return this.each(function(r) {
                c.offset.setOffset(this, a, r);
            });
        }
        if (!b || !b.ownerDocument) {
            return null;
        }
        if (b === b.ownerDocument.body) {
            return c.offset.bodyOffset(b);
        }
        c.offset.initialize();
        var d = b.offsetParent, f = b, e = b.ownerDocument, j, i = e.documentElement, o = e.body;
        f = (e = e.defaultView) ? e.getComputedStyle(b, null) : b.currentStyle;
        for (var k = b.offsetTop, n = b.offsetLeft; (b = b.parentNode) && b !== o && b !== i; ) {
            if (c.offset.supportsFixedPosition && f.position === "fixed") {
                break;
            }
            j = e ? e.getComputedStyle(b, null) : b.currentStyle;
            k -= b.scrollTop;
            n -= b.scrollLeft;
            if (b === d) {
                k += b.offsetTop;
                n += b.offsetLeft;
                if (c.offset.doesNotAddBorder && !(c.offset.doesAddBorderForTableAndCells && /^t(able|d|h)$/i.test(b.nodeName))) {
                    k += parseFloat(j.borderTopWidth) || 0;
                    n += parseFloat(j.borderLeftWidth) || 0;
                }
                f = d;
                d = b.offsetParent;
            }
            if (c.offset.subtractsBorderForOverflowNotVisible && j.overflow !== "visible") {
                k += parseFloat(j.borderTopWidth) || 0;
                n += parseFloat(j.borderLeftWidth) || 0;
            }
            f = j;
        }
        if (f.position === "relative" || f.position === "static") {
            k += o.offsetTop;
            n += o.offsetLeft;
        }
        if (c.offset.supportsFixedPosition && f.position === "fixed") {
            k += Math.max(i.scrollTop, o.scrollTop);
            n += Math.max(i.scrollLeft, o.scrollLeft);
        }
        return {top: k,left: n};
    };
    c.offset = {initialize: function() {
            var a = s.body, b = s.createElement("div"), d, f, e, j = parseFloat(c.curCSS(a, "marginTop", true)) || 0;
            c.extend(b.style, {position: "absolute",top: 0,left: 0,margin: 0,border: 0,width: "1px",height: "1px",visibility: "hidden"});
            b.innerHTML = "<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
            a.insertBefore(b, a.firstChild);
            d = b.firstChild;
            f = d.firstChild;
            e = d.nextSibling.firstChild.firstChild;
            this.doesNotAddBorder = f.offsetTop !== 5;
            this.doesAddBorderForTableAndCells = e.offsetTop === 5;
            f.style.position = "fixed";
            f.style.top = "20px";
            this.supportsFixedPosition = f.offsetTop === 20 || f.offsetTop === 15;
            f.style.position = f.style.top = "";
            d.style.overflow = "hidden";
            d.style.position = "relative";
            this.subtractsBorderForOverflowNotVisible = f.offsetTop === -5;
            this.doesNotIncludeMarginInBodyOffset = a.offsetTop !== j;
            a.removeChild(b);
            c.offset.initialize = c.noop;
        },bodyOffset: function(a) {
            var b = a.offsetTop, d = a.offsetLeft;
            c.offset.initialize();
            if (c.offset.doesNotIncludeMarginInBodyOffset) {
                b += parseFloat(c.curCSS(a, "marginTop", true)) || 0;
                d += parseFloat(c.curCSS(a, "marginLeft", true)) || 0;
            }
            return {top: b,left: d};
        },setOffset: function(a, b, d) {
            if (/static/.test(c.curCSS(a, "position"))) {
                a.style.position = "relative";
            }
            var f = c(a), e = f.offset(), j = parseInt(c.curCSS(a, "top", true), 10) || 0, i = parseInt(c.curCSS(a, "left", true), 10) || 0;
            if (c.isFunction(b)) {
                b = b.call(a, d, e);
            }
            d = {top: b.top - e.top + j,left: b.left - e.left + i};
            "using" in b ? b.using.call(a, d) : f.css(d);
        }};
    c.fn.extend({position: function() {
            if (!this[0]) {
                return null;
            }
            var a = this[0], b = this.offsetParent(), d = this.offset(), f = /^body|html$/i.test(b[0].nodeName) ? {top: 0,left: 0} : b.offset();
            d.top -= parseFloat(c.curCSS(a, "marginTop", true)) || 0;
            d.left -= parseFloat(c.curCSS(a, "marginLeft", true)) || 0;
            f.top += parseFloat(c.curCSS(b[0], "borderTopWidth", true)) || 0;
            f.left += parseFloat(c.curCSS(b[0], "borderLeftWidth", true)) || 0;
            return {top: d.top - f.top,left: d.left - f.left};
        },offsetParent: function() {
            return this.map(function() {
                for (var a = this.offsetParent || s.body; a && !/^body|html$/i.test(a.nodeName) && c.css(a, "position") === "static"; ) {
                    a = a.offsetParent;
                }
                return a;
            });
        }});
    c.each(["Left", "Top"], function(a, b) {
        var d = "scroll" + b;
        c.fn[d] = function(f) {
            var e = this[0], j;
            if (!e) {
                return null;
            }
            if (f !== w) {
                return this.each(function() {
                    if (j = wa(this)) {
                        j.scrollTo(!a ? f : c(j).scrollLeft(), a ? f : c(j).scrollTop());
                    } else {
                        this[d] = f;
                    }
                });
            } else {
                return (j = wa(e)) ? "pageXOffset" in j ? j[a ? "pageYOffset" : "pageXOffset"] : c.support.boxModel && j.document.documentElement[d] || j.document.body[d] : e[d];
            }
        };
    });
    c.each(["Height", "Width"], function(a, b) {
        var d = b.toLowerCase();
        c.fn["inner" + b] = function() {
            return this[0] ? c.css(this[0], d, false, "padding") : null;
        };
        c.fn["outer" + b] = function(f) {
            return this[0] ? c.css(this[0], d, false, f ? "margin" : "border") : null;
        };
        c.fn[d] = function(f) {
            var e = this[0];
            if (!e) {
                return f == null ? null : this;
            }
            if (c.isFunction(f)) {
                return this.each(function(j) {
                    var i = c(this);
                    i[d](f.call(this, j, i[d]()));
                });
            }
            return "scrollTo" in e && e.document ? e.document.compatMode === "CSS1Compat" && e.document.documentElement["client" + b] || e.document.body["client" + b] : e.nodeType === 9 ? Math.max(e.documentElement["client" + b], e.body["scroll" + b], e.documentElement["scroll" + b], e.body["offset" + b], e.documentElement["offset" + b]) : f === w ? c.css(e, d) : this.css(d, typeof f === "string" ? f : f + "px");
        };
    });
    A.Surface.jQuery = A.Surface.$ = c;
})(window);
Surface.Modifier.abs = function(subject) {
    subject = Math.abs(subject);
    return (("" + subject).indexOf(".") < 0) ? subject + ".0" : subject;
};
Surface.Modifier.ago = function(timestamp_in_sec) {
    var difference = parseInt(new Date().getTime() / 1000 - timestamp_in_sec);
    var future = false;
    difference /= 60;
    if (difference < 0) {
        future = true;
        difference = Math.abs(difference);
    }
    if (difference == 0) {
        difference = 1;
    }
    var periods = ["minute", "hour", "day", "week", "month", "year"];
    var periods2 = ["minutes", "hours", "days", "weeks", "months", "years"];
    var lengths = ["60", "24", "7", "4.35", "12"];
    for (var j = 0; j < lengths.length && difference >= lengths[j]; j++) {
        difference /= lengths[j];
    }
    difference = Math.round(difference);
    if (difference == 0) {
        return "1 minute ago";
    }
    return (future ? "in " : "") + difference + " " + (difference != 1 ? periods2[j] : periods[j]) + (future ? "" : " ago");
};
Surface.Modifier.append = function(input, element) {
    input.push(element);
    return input;
};
Surface.Modifier.capitalize = function(str) {
    return str.replace(/((^.)|( |\n|\r|\t)(.))/g, function(match) {
        return match.toUpperCase();
    }).replace(/\n/, " ");
};
Surface.Modifier.ceil = function(val) {
    return Math.ceil(val);
};
Surface.Modifier.concat = function(str1, str2) {
    return "" + str1 + str2;
};
Surface.Modifier.contains = function(arr, str) {
    for (var index in arr) {
        if (arr[index] == str && typeof (arr[index]) == typeof (str)) {
            return true;
        }
    }
    return false;
};
Surface.Modifier.count = function(obj) {
    var i = 0;
    if (obj) {
        i = obj.length;
        if (typeof obj == "object" || i == "undefined") {
            i = 0;
            for (var index in obj) {
                if (typeof obj[index] != "function") {
                    i++;
                }
            }
        }
    }
    return i;
};
Surface.Modifier.dateformat = function(timestamp, fmt) {
    timestamp = parseInt(timestamp);
    var timezoneData = S.timezoneData || [[0, 0, "UTC"]];
    var pad = function(number, n, p) {
        var s = "" + number;
        p = p || "0";
        while (s.length < n) {
            s = p + s;
        }
        return s;
    };
    var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var weekdays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    var dpm = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    var strftime_f = {A: function(d) {
            return weekdays[d.getDay()];
        },a: function(d) {
            return weekdays[d.getDay()].substring(0, 3);
        },B: function(d) {
            return months[d.getMonth()];
        },b: function(d) {
            return months[d.getMonth()].substring(0, 3);
        },c: function(d) {
            return d.toString();
        },d: function(d) {
            return pad(d.getDate(), 2, "0");
        },H: function(d) {
            return pad(d.getHours(), 2, "0");
        },I: function(d) {
            return pad(d.getHours() % 12 || 12, 2);
        },j: function(d) {
            var t = d.getDate();
            var m = d.getMonth() - 1;
            if (m > 1) {
                var y = d.getYear();
                if (((y % 100) == 0) && ((y % 400) == 0)) {
                    ++t;
                } else {
                    if ((y % 4) == 0) {
                        ++t;
                    }
                }
            }
            while (m > -1) {
                t += dpm[m--];
            }
            return pad(t, 3, "0");
        },M: function(d) {
            return pad(d.getMinutes(), 2, "0");
        },m: function(d) {
            return pad(d.getMonth() + 1, 2, "0");
        },p: function(d) {
            return (d.getHours() > 11) ? "PM" : "AM";
        },S: function(d) {
            return pad(d.getSeconds(), 2, "0");
        },U: function(d) {
            var month = d.getMonth();
            var day = d.getDay();
            var year = d.getYear();
            month += 1;
            var a = Math.floor((14 - (month)) / 12);
            var y = year + 4800 - a;
            var m = (month) + (12 * a) - 3;
            var jd = day + Math.floor(((153 * m) + 2) / 5) + (365 * y) + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;
            var d4 = (jd + 31741 - (jd % 7)) % 146097 % 36524 % 1461;
            var L = Math.floor(d4 / 1460);
            var d1 = ((d4 - L) % 365) + L;
            var NumberOfWeek = Math.floor(d1 / 7) + 1;
            return NumberOfWeek;
        },w: function(d) {
            return d.getDay();
        },X: function(d) {
            return d.toTimeString();
        },x: function(d) {
            return d.toDateString();
        },Y: function(d) {
            return d.getFullYear();
        },y: function(d) {
            return pad(d.getYear() % 100, 2);
        },z: function(d) {
            return d.toString().match(/\sGMT([+-]\d+)/)[1];
        },"%": function(d) {
            return "%";
        }};
    strftime_f["+"] = strftime_f.c;
    strftime_f.h = strftime_f.b;
    var currentTzData = timezoneData[0];
    for (var i in timezoneData) {
        var tzData = timezoneData[i];
        if (tzData[0] <= timestamp) {
            currentTzData = tzData;
        } else {
            break;
        }
    }
    var localTimestamp = (timestamp + currentTzData[1]) * 1000;
    var d = new Date(new Date(localTimestamp).toUTCString().replace(" UTC", "").replace(" GMT", ""));
    var r = "";
    var n = 0;
    while (n < fmt.length) {
        var c = fmt.substring(n, n + 1);
        if (c == "%") {
            c = fmt.substring(++n, n + 1);
            r += (strftime_f[c]) ? strftime_f[c](d) : c;
        } else {
            r += c;
        }
        ++n;
    }
    return r;
};
Surface.Modifier.dump = function(obj) {
    if (typeof (obj) == "object") {
        return Surface.encodeJSON(obj);
    } else {
        return obj;
    }
};
Surface.Modifier.floor = function(val) {
    return Math.floor(val);
};
Surface.Modifier.format = function(subject, format) {
    return format.replace(/{(.*?)}/g, function(match, key) {
        return typeof (subject[key]) != "undefined" ? subject[key] : "";
    });
};
Surface.Modifier.get = function(obj, key, def) {
    try {
        return typeof (obj[key]) != "undefined" ? obj[key] : def;
    } catch (e) {
        return def;
    }
};
Surface.Modifier.htmlspecialchars = function(s) {
    return s.toString().replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
};
Surface.Modifier.isstring = function(val) {
    return typeof (val) == "string";
};
Surface.Modifier.join = function(lst, glue) {
    glue = glue || " ";
    try {
        return lst.join(glue);
    } catch (e) {
        var values = [];
        for (var key in lst) {
            if (Surface.isValidKey(lst[key])) {
                values.push(lst[key]);
            }
        }
        return values.join(glue);
    }
};
Surface.Modifier.json = function(subject) {
    return Surface.encodeJSON(subject);
};
Surface.Modifier.limit = function(obj, limit) {
    if (typeof (obj.slice) == "undefined") {
        var i = 0;
        var result;
        for (var key in obj) {
            if (i < limit) {
                result[key] = obj[key];
            } else {
                break;
            }
            i++;
        }
    } else {
        return obj.slice(0, limit);
    }
};
Surface.Modifier.loremipsum = function(val) {
    var loremIpsumStr = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam aliquet suscipit sagittis. Nam viverra, quam et iaculis viverra, dolor enim tincidunt enim, id dapibus nisi dui et tortor. Cras tincidunt adipiscing aliquet. Aliquam ut consequat est. Sed semper risus quis leo mollis quis sollicitudin diam consectetur. Mauris in erat eget dolor ornare ornare. Maecenas aliquet dignissim enim. Duis porttitor condimentum lorem, imperdiet aliquam sem accumsan sit amet. Pellentesque semper, massa eu posuere elementum, libero ipsum gravida nisl, eu consequat tellus nunc at neque. In tincidunt cursus dui eget ornare. Ut nisl dolor, semper fringilla malesuada ac, placerat vel quam. Sed cursus neque eu nibh bibendum et ullamcorper urna consectetur. Integer est orci, aliquet blandit gravida eget, placerat eu ligula. Praesent quis pulvinar nisl. Nulla a tellus id libero dignissim placerat eget vel nisi. ";
    var loremList = loremIpsumStr.split(" ");
    var newList = Array();
    var listPos = 0;
    for (var i = 0; i < val; i++) {
        newList.push(loremList[listPos]);
        if (++listPos >= loremList.length) {
            listPos = 0;
        }
    }
    return newList.join(" ");
};
Surface.Modifier.lower = function(s) {
    try {
        return s.toString().toLowerCase();
    } catch (e) {
        return "none";
    }
};
Surface.Modifier.md5 = function(val) {
    return Surface.Modifier.md5Function(val);
};
Surface.Modifier.md5Function = function(string) {
    function RotateLeft(lValue, iShiftBits) {
        return (lValue << iShiftBits) | (lValue >>> (32 - iShiftBits));
    }
    function AddUnsigned(lX, lY) {
        var lX4, lY4, lX8, lY8, lResult;
        lX8 = (lX & 2147483648);
        lY8 = (lY & 2147483648);
        lX4 = (lX & 1073741824);
        lY4 = (lY & 1073741824);
        lResult = (lX & 1073741823) + (lY & 1073741823);
        if (lX4 & lY4) {
            return (lResult ^ 2147483648 ^ lX8 ^ lY8);
        }
        if (lX4 | lY4) {
            if (lResult & 1073741824) {
                return (lResult ^ 3221225472 ^ lX8 ^ lY8);
            } else {
                return (lResult ^ 1073741824 ^ lX8 ^ lY8);
            }
        } else {
            return (lResult ^ lX8 ^ lY8);
        }
    }
    function F(x, y, z) {
        return (x & y) | ((~x) & z);
    }
    function G(x, y, z) {
        return (x & z) | (y & (~z));
    }
    function H(x, y, z) {
        return (x ^ y ^ z);
    }
    function I(x, y, z) {
        return (y ^ (x | (~z)));
    }
    function FF(a, b, c, d, x, s, ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    }
    function GG(a, b, c, d, x, s, ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    }
    function HH(a, b, c, d, x, s, ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    }
    function II(a, b, c, d, x, s, ac) {
        a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));
        return AddUnsigned(RotateLeft(a, s), b);
    }
    function ConvertToWordArray(string) {
        var lWordCount;
        var lMessageLength = string.length;
        var lNumberOfWords_temp1 = lMessageLength + 8;
        var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - (lNumberOfWords_temp1 % 64)) / 64;
        var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;
        var lWordArray = Array(lNumberOfWords - 1);
        var lBytePosition = 0;
        var lByteCount = 0;
        while (lByteCount < lMessageLength) {
            lWordCount = (lByteCount - (lByteCount % 4)) / 4;
            lBytePosition = (lByteCount % 4) * 8;
            lWordArray[lWordCount] = (lWordArray[lWordCount] | (string.charCodeAt(lByteCount) << lBytePosition));
            lByteCount++;
        }
        lWordCount = (lByteCount - (lByteCount % 4)) / 4;
        lBytePosition = (lByteCount % 4) * 8;
        lWordArray[lWordCount] = lWordArray[lWordCount] | (128 << lBytePosition);
        lWordArray[lNumberOfWords - 2] = lMessageLength << 3;
        lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;
        return lWordArray;
    }
    function WordToHex(lValue) {
        var WordToHexValue = "", WordToHexValue_temp = "", lByte, lCount;
        for (lCount = 0; lCount <= 3; lCount++) {
            lByte = (lValue >>> (lCount * 8)) & 255;
            WordToHexValue_temp = "0" + lByte.toString(16);
            WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);
        }
        return WordToHexValue;
    }
    function Utf8Encode(string) {
        string = string.replace(/\r\n/g, "\n");
        var utftext = "";
        for (var n = 0; n < string.length; n++) {
            var c = string.charCodeAt(n);
            if (c < 128) {
                utftext += String.fromCharCode(c);
            } else {
                if ((c > 127) && (c < 2048)) {
                    utftext += String.fromCharCode((c >> 6) | 192);
                    utftext += String.fromCharCode((c & 63) | 128);
                } else {
                    utftext += String.fromCharCode((c >> 12) | 224);
                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                    utftext += String.fromCharCode((c & 63) | 128);
                }
            }
        }
        return utftext;
    }
    var x = Array();
    var k, AA, BB, CC, DD, a, b, c, d;
    var S11 = 7, S12 = 12, S13 = 17, S14 = 22;
    var S21 = 5, S22 = 9, S23 = 14, S24 = 20;
    var S31 = 4, S32 = 11, S33 = 16, S34 = 23;
    var S41 = 6, S42 = 10, S43 = 15, S44 = 21;
    string = Utf8Encode(string);
    x = ConvertToWordArray(string);
    a = 1732584193;
    b = 4023233417;
    c = 2562383102;
    d = 271733878;
    for (k = 0; k < x.length; k += 16) {
        AA = a;
        BB = b;
        CC = c;
        DD = d;
        a = FF(a, b, c, d, x[k + 0], S11, 3614090360);
        d = FF(d, a, b, c, x[k + 1], S12, 3905402710);
        c = FF(c, d, a, b, x[k + 2], S13, 606105819);
        b = FF(b, c, d, a, x[k + 3], S14, 3250441966);
        a = FF(a, b, c, d, x[k + 4], S11, 4118548399);
        d = FF(d, a, b, c, x[k + 5], S12, 1200080426);
        c = FF(c, d, a, b, x[k + 6], S13, 2821735955);
        b = FF(b, c, d, a, x[k + 7], S14, 4249261313);
        a = FF(a, b, c, d, x[k + 8], S11, 1770035416);
        d = FF(d, a, b, c, x[k + 9], S12, 2336552879);
        c = FF(c, d, a, b, x[k + 10], S13, 4294925233);
        b = FF(b, c, d, a, x[k + 11], S14, 2304563134);
        a = FF(a, b, c, d, x[k + 12], S11, 1804603682);
        d = FF(d, a, b, c, x[k + 13], S12, 4254626195);
        c = FF(c, d, a, b, x[k + 14], S13, 2792965006);
        b = FF(b, c, d, a, x[k + 15], S14, 1236535329);
        a = GG(a, b, c, d, x[k + 1], S21, 4129170786);
        d = GG(d, a, b, c, x[k + 6], S22, 3225465664);
        c = GG(c, d, a, b, x[k + 11], S23, 643717713);
        b = GG(b, c, d, a, x[k + 0], S24, 3921069994);
        a = GG(a, b, c, d, x[k + 5], S21, 3593408605);
        d = GG(d, a, b, c, x[k + 10], S22, 38016083);
        c = GG(c, d, a, b, x[k + 15], S23, 3634488961);
        b = GG(b, c, d, a, x[k + 4], S24, 3889429448);
        a = GG(a, b, c, d, x[k + 9], S21, 568446438);
        d = GG(d, a, b, c, x[k + 14], S22, 3275163606);
        c = GG(c, d, a, b, x[k + 3], S23, 4107603335);
        b = GG(b, c, d, a, x[k + 8], S24, 1163531501);
        a = GG(a, b, c, d, x[k + 13], S21, 2850285829);
        d = GG(d, a, b, c, x[k + 2], S22, 4243563512);
        c = GG(c, d, a, b, x[k + 7], S23, 1735328473);
        b = GG(b, c, d, a, x[k + 12], S24, 2368359562);
        a = HH(a, b, c, d, x[k + 5], S31, 4294588738);
        d = HH(d, a, b, c, x[k + 8], S32, 2272392833);
        c = HH(c, d, a, b, x[k + 11], S33, 1839030562);
        b = HH(b, c, d, a, x[k + 14], S34, 4259657740);
        a = HH(a, b, c, d, x[k + 1], S31, 2763975236);
        d = HH(d, a, b, c, x[k + 4], S32, 1272893353);
        c = HH(c, d, a, b, x[k + 7], S33, 4139469664);
        b = HH(b, c, d, a, x[k + 10], S34, 3200236656);
        a = HH(a, b, c, d, x[k + 13], S31, 681279174);
        d = HH(d, a, b, c, x[k + 0], S32, 3936430074);
        c = HH(c, d, a, b, x[k + 3], S33, 3572445317);
        b = HH(b, c, d, a, x[k + 6], S34, 76029189);
        a = HH(a, b, c, d, x[k + 9], S31, 3654602809);
        d = HH(d, a, b, c, x[k + 12], S32, 3873151461);
        c = HH(c, d, a, b, x[k + 15], S33, 530742520);
        b = HH(b, c, d, a, x[k + 2], S34, 3299628645);
        a = II(a, b, c, d, x[k + 0], S41, 4096336452);
        d = II(d, a, b, c, x[k + 7], S42, 1126891415);
        c = II(c, d, a, b, x[k + 14], S43, 2878612391);
        b = II(b, c, d, a, x[k + 5], S44, 4237533241);
        a = II(a, b, c, d, x[k + 12], S41, 1700485571);
        d = II(d, a, b, c, x[k + 3], S42, 2399980690);
        c = II(c, d, a, b, x[k + 10], S43, 4293915773);
        b = II(b, c, d, a, x[k + 1], S44, 2240044497);
        a = II(a, b, c, d, x[k + 8], S41, 1873313359);
        d = II(d, a, b, c, x[k + 15], S42, 4264355552);
        c = II(c, d, a, b, x[k + 6], S43, 2734768916);
        b = II(b, c, d, a, x[k + 13], S44, 1309151649);
        a = II(a, b, c, d, x[k + 4], S41, 4149444226);
        d = II(d, a, b, c, x[k + 11], S42, 3174756917);
        c = II(c, d, a, b, x[k + 2], S43, 718787259);
        b = II(b, c, d, a, x[k + 9], S44, 3951481745);
        a = AddUnsigned(a, AA);
        b = AddUnsigned(b, BB);
        c = AddUnsigned(c, CC);
        d = AddUnsigned(d, DD);
    }
    var temp = WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);
    return temp.toLowerCase();
};
Surface.Modifier.merge = function() {
    var result = {};
    for (var i = 0; i < arguments.length; i++) {
        var e = arguments[i];
        if (e != null && typeof e == "object") {
            for (var field in e) {
                result[field] = e[field];
            }
        }
    }
    return result;
};
Surface.Modifier.multisort = function(array) {
    if (Object.prototype.toString.call(array) !== "[object Array]") {
        Surface.error("Only lists are sortable", Surface.ERRORMODE_WARNING);
        return array;
    }
    var multisortArgs = [];
    for (var i = 1; i < arguments.length; i++) {
        multisortArgs.push(arguments[i]);
    }
    if (multisortArgs.length % 2 != 0) {
        Surface.error("Wrong number of arguments to modifier multisort. (sort_key1, sort_order1, ..., sort_keyN, sort_orderN)", Surface.ERRORMODE_WARNING);
        return array;
    }
    array.sort(function(a, b) {
        var args = multisortArgs.slice();
        var x, y;
        while (args.length > 0) {
            var sortKey = args.shift();
            var order = args.shift();
            if (order == "asc") {
                x = a[sortKey];
                y = b[sortKey];
            } else {
                y = a[sortKey];
                x = b[sortKey];
            }
            if (y == null || typeof (y) == "undefined") {
                if (x == null || typeof (x) == "undefined") {
                    return 0;
                }
                return 1;
            }
            if (x == null || typeof (x) == "undefined") {
                return -1;
            }
            if (typeof x == "string" && typeof y == "string") {
                var lx = x.toLowerCase();
                var ly = y.toLowerCase();
                if (lx != ly) {
                    x = lx;
                    y = ly;
                }
            }
            if (x != y) {
                break;
            }
        }
        return ((x <= y) ? -1 : ((x > y) ? 1 : 0));
    });
    return array;
};
Surface.Modifier.nl2br = function(s) {
    return String(s).replace(/\n/g, "<br />");
};
Surface.Modifier.numberformat = function(number, decimalPoint, thousandsSep, grouping) {
    var parts = number.toString().split(".");
    var decimal = parts[0];
    var fraction = parts[1] || "";
    if (fraction.length > 3) {
        var n = Math.pow(10, fraction.length - 3);
        fraction = parseInt(Math.round(parseInt(fraction) / n)).toString();
    }
    var regExp = new RegExp("(-?[0-9]+)([0-9]{" + grouping + "})");
    while (regExp.test(decimal)) {
        decimal = decimal.replace(regExp, "$1" + thousandsSep + "$2");
    }
    return fraction ? decimal + decimalPoint + fraction : decimal;
};
Surface.Modifier.pluralize = function(value, singular, plural) {
    return (value == 1 || value == -1) ? singular : plural;
};
Surface.Modifier.range = function(start, offset, step) {
    return Surface.Modifier.to(start, start + offset, step);
};
Surface.Modifier.replace = function(subject, pattern, replacement) {
    return String(subject).replace(pattern, replacement);
};
Surface.Modifier.reverse = function(subject) {
    return subject.reverse();
};
Surface.Modifier.round = function(number, n) {
    n = n || 0;
    var result;
    if (n > 0) {
        n = Math.pow(10, n);
        result = Math.round(number * n) / n;
    } else {
        result = parseInt(Math.round(number));
    }
    if (typeof (result) != "number") {
        return number;
    } else {
        return (n > 0 && ("" + result).indexOf(".") < 0) ? result + ".0" : result;
    }
};
Surface.Modifier.set = function(obj, key, value) {
    obj[key] = value;
    return obj;
};
Surface.Modifier.sort = function(array, sortKey, order) {
    if (Object.prototype.toString.call(array) !== "[object Array]") {
        Surface.error("Only lists are sortable", Surface.ERRORMODE_WARNING);
        return array;
    }
    order = order || "asc";
    sortKey = sortKey || "";
    if (sortKey != "") {
        array.sort(function(a, b) {
            var x, y;
            if (order == "asc") {
                x = a[sortKey];
                y = b[sortKey];
            } else {
                y = a[sortKey];
                x = b[sortKey];
            }
            if (y == null || typeof (y) == "undefined") {
                if (x == null || typeof (x) == "undefined") {
                    return 0;
                }
                return 1;
            }
            if (x == null || typeof (x) == "undefined") {
                return -1;
            }
            if (typeof x == "string" && typeof y == "string") {
                var lx = x.toLowerCase();
                var ly = y.toLowerCase();
                if (lx != ly) {
                    x = lx;
                    y = ly;
                }
            }
            return ((x <= y) ? -1 : ((x > y) ? 1 : 0));
        });
    } else {
        array.sort();
        if (order == "desc") {
            array.reverse();
        }
    }
    return array;
};
Surface.Modifier.substring = function(subject, from, to) {
    if (arguments.length > 2) {
        return subject.substring(from, to);
    } else {
        return subject.substring(from);
    }
};
Surface.Modifier.to = function(start, stop, step) {
    if (typeof (step) == "undefined") {
        step = 1;
    }
    var range = [];
    for (var i = start; i <= stop; i += step) {
        range.push(i);
    }
    return range;
};
Surface.Modifier.truncate = function(s, amount) {
    return String(s).substring(0, amount);
};
Surface.Modifier.upper = function(s) {
    return String(s).toUpperCase();
};
Surface.Modifier.urlencode = function(s) {
    s = encodeURIComponent(s.toString());
    s = s.split("!").join("%21");
    s = s.replace(/(\%([a-z0-9]{2}))/g, function(full, m1, m2) {
        return "%" + m2.toUpperCase();
    });
    s = s.replace(/~/g, "%7E");
    s = s.replace(new RegExp("'", "g"), "%27");
    return s;
};
Surface.Modifier.urlformat = function(format, urlcontext, context) {
    var subject = Surface.Modifier.merge(urlcontext, context);
    return format.replace(/{(.*?)}/g, function(match, key) {
        return typeof (subject[key]) != "undefined" ? subject[key] : "";
    }).replace(/\/+/g, "/");
};
Surface.Modifier.urlnormalize = function(subject) {
    return subject.replace(/\/+/g, "/");
};
Surface.Modifier.wordwrap = function(str, m, b, c) {
    if (typeof (b) == "undefined") {
        b = "\n";
    }
    if (typeof (c) == "undefined") {
        c = false;
    }
    var i, j, s, r = str.split("\n");
    if (m > 0) {
        for (i in r) {
            for (s = r[i], r[i] = ""; s.length > m; j = c ? m : (j = s.substr(0, m + 1).match(/\S*$/)).input.length - j[0].length || m, r[i] += Surface.Modifier.wordwrap.rtrim1(s.substr(0, j)) + ((s = s.substr(j)).length ? b : "")) {
            }
            r[i] += s;
        }
    }
    return r.join("\n");
};
Surface.Modifier.wordwrap.rtrim1 = function(text) {
    if (text[text.length - 1] == " ") {
        return text.substr(0, text.length - 1);
    } else {
        return text;
    }
};
S.Modifier.ago = function(subject) {
    var timestamp_in_sec = parseInt(subject);
    var difference = new Date().getTime() / 1000 - timestamp_in_sec;
    var future = false;
    difference /= 60;
    if (difference < 0) {
        future = true;
        difference = Math.abs(difference);
    }
    if (difference == 0) {
        difference = 1;
    }
    var periods = ["minute", "hour", "day", "week", "month", "year"];
    var periods2 = ["minutes", "hours", "days", "weeks", "months", "years"];
    var lengths = ["60", "24", "7", "4.35", "12"];
    for (j = 0; j < lengths.length && difference >= lengths[j]; j++) {
        difference /= lengths[j];
    }
    if (periods[j] == "day" || periods[j] == "hours") {
        difference = Math.ceil(difference);
    } else {
        difference = Math.floor(difference);
    }
    if (difference == 1 && periods[j] == "day") {
        if (future) {
            return "tomorrow";
        } else {
            return "yesterday";
        }
    } else {
        if (difference == 0) {
            return "1 minute";
        }
        return (future ? "in " : "") + difference + " " + (difference != 1 ? periods2[j] : periods[j]);
    }
};
Surface.Modifier.agoElement = function(subject, periodsSingular, periodsPlural) {
    if (periodsSingular[0] == "ID_WEB_TIME_AGO_MINUTE") {
        periodsSingular = ["%s minute ago", "%s hour ago", "%s day ago", "%s week ago", "%s month ago", "%s year ago"];
        periodsPlural = ["%s minutes ago", "%s hours ago", "%s days ago", "%s weeks ago", "%s months ago", "%s years ago"];
    }
    var ago = "";
    var timestamp_in_sec = parseInt(subject);
    var difference = new Date().getTime() / 1000 - timestamp_in_sec;
    difference /= 60;
    if (difference < 0) {
        difference = Math.abs(difference);
    } else {
        if (difference == 0) {
            difference = 1;
        }
    }
    var lengths = ["60", "24", "7", "4.35", "12"];
    for (var j = 0; j < lengths.length && difference >= lengths[j]; j++) {
        difference /= lengths[j];
    }
    if (j == 2 || j == 1) {
        difference = Math.ceil(difference);
    } else {
        difference = Math.floor(difference);
    }
    if (difference == 7 && j == 2) {
        ago = periodsSingular[3].replace("%s", 1);
    } else {
        if (difference == 0) {
            ago = periodsSingular[0].replace("%s", 1);
        } else {
            if (difference == 1) {
                ago = periodsSingular[j].replace("%s", 1);
            } else {
                ago = periodsPlural[j].replace("%s", difference);
            }
        }
    }
    return '<span data-timestamp="' + timestamp_in_sec + '" class="base-ago">' + ago + "</span>";
};
S.Modifier.avatarmodulo = function(subject, moduloWith) {
    subject = ("" + subject);
    subject = subject.substring(subject.length - 7);
    return parseInt(subject) % parseInt(moduloWith);
};
Surface.Modifier.b64badgepart = function(subject) {
    return subject;
};
S.Modifier.bitwiseand = function(a, b) {
    return parseInt(a) & parseInt(b);
};
Surface.Modifier.codetocountry = function(subject) {
    var country = Surface.Modifier.rawCountryCodes[subject];
    if (country == null) {
        country = "Unknown";
    }
    return country;
};
Surface.Modifier.rawCountryCodes = {"BD": "Bangladesh","BE": "Belgium","BF": "Burkina Faso","BG": "Bulgaria","BA": "Bosnia and Herzegovina","BB": "Barbados","WF": "Wallis and Futuna","BL": "Saint Barth\u00e9lemy","BM": "Bermuda","BN": "Brunei Darussalam","BO": "Bolivia, Plurinational State of","BH": "Bahrain","BI": "Burundi","BJ": "Benin","BT": "Bhutan","JM": "Jamaica","BV": "Bouvet Island","BW": "Botswana","WS": "Samoa","BR": "Brazil","BS": "Bahamas","JE": "Jersey","BY": "Belarus","BZ": "Belize","RU": "Russian Federation","RW": "Rwanda","RS": "Serbia","TL": "Timor-Leste","RE": "R\u00e9union","TM": "Turkmenistan","TJ": "Tajikistan","RO": "Romania","TK": "Tokelau","GW": "Guinea-Bissau","GU": "Guam","GT": "Guatemala","GS": "South Georgia and the South Sandwich Islands","GR": "Greece","GQ": "Equatorial Guinea","GP": "Guadeloupe","JP": "Japan","GY": "Guyana","GG": "Guernsey","GF": "French Guiana","GE": "Georgia","GD": "Grenada","GB": "United Kingdom","GA": "Gabon","GN": "Guinea","GM": "Gambia","GL": "Greenland","GI": "Gibraltar","GH": "Ghana","OM": "Oman","TN": "Tunisia","JO": "Jordan","HR": "Croatia","HT": "Haiti","HU": "Hungary","HK": "Hong Kong","HN": "Honduras","HM": "Heard Island and McDonald Islands","VE": "Venezuela, Bolivarian Republic of","PR": "Puerto Rico","PS": "Palestinian Territory, Occupied","PW": "Palau","PT": "Portugal","KN": "Saint Kitts and Nevis","PY": "Paraguay","IQ": "Iraq","PA": "Panama","PF": "French Polynesia","PG": "Papua New Guinea","PE": "Peru","PK": "Pakistan","PH": "Philippines","PN": "Pitcairn","PL": "Poland","PM": "Saint Pierre and Miquelon","ZM": "Zambia","EH": "Western Sahara","EE": "Estonia","EG": "Egypt","ZA": "South Africa","EC": "Ecuador","IT": "Italy","VN": "Viet Nam","SB": "Solomon Islands","ET": "Ethiopia","SO": "Somalia","ZW": "Zimbabwe","SA": "Saudi Arabia","ES": "Spain","ER": "Eritrea","ME": "Montenegro","MD": "Moldova, Republic of","MG": "Madagascar","MF": "Saint Martin","MA": "Morocco","MC": "Monaco","UZ": "Uzbekistan","MM": "Myanmar","ML": "Mali","MO": "Macao","MN": "Mongolia","MH": "Marshall Islands","MK": "Macedonia, The Former Yugoslav Republic of","MU": "Mauritius","MT": "Malta","MW": "Malawi","MV": "Maldives","MQ": "Martinique","MP": "Northern Mariana Islands","MS": "Montserrat","MR": "Mauritania","IM": "Isle of Man","UG": "Uganda","TZ": "Tanzania, United Republic of","MY": "Malaysia","MX": "Mexico","IL": "Israel","FR": "France","AW": "Aruba","SH": "Saint Helena, Ascension and Tristan Da Cunha","SJ": "Svalbard and Jan Mayen","FI": "Finland","FJ": "Fiji","FK": "Falkland Islands (Malvinas)","FM": "Micronesia, Federated States of","FO": "Faroe Islands","NI": "Nicaragua","NL": "Netherlands","NO": "Norway","NA": "Namibia","VU": "Vanuatu","NC": "New Caledonia","NE": "Niger","NF": "Norfolk Island","NG": "Nigeria","NZ": "New Zealand","NP": "Nepal","NR": "Nauru","NU": "Niue","CK": "Cook Islands","CI": "C\u00f4te d'Ivoire","CH": "Switzerland","CO": "Colombia","CN": "China","CM": "Cameroon","CL": "Chile","CC": "Cocos (Keeling) Islands","CA": "Canada","CG": "Congo","CF": "Central African Republic","CD": "Congo, The Democratic Republic of the","CZ": "Czech Republic","CY": "Cyprus","CX": "Christmas Island","CR": "Costa Rica","CV": "Cape Verde","CU": "Cuba","SZ": "Swaziland","SY": "Syrian Arab Republic","KG": "Kyrgyzstan","KE": "Kenya","SR": "Suriname","KI": "Kiribati","KH": "Cambodia","SV": "El Salvador","KM": "Comoros","ST": "Sao Tome and Principe","SK": "Slovakia","KR": "Korea, Republic of","SI": "Slovenia","KP": "Korea, Democratic People's Republic of","KW": "Kuwait","SN": "Senegal","SM": "San Marino","SL": "Sierra Leone","SC": "Seychelles","KZ": "Kazakhstan","KY": "Cayman Islands","SG": "Singapore","SE": "Sweden","SD": "Sudan","DO": "Dominican Republic","DM": "Dominica","DJ": "Djibouti","DK": "Denmark","VG": "Virgin Islands, British","DE": "Germany","YE": "Yemen","DZ": "Algeria","US": "United States","UY": "Uruguay","YT": "Mayotte","UM": "United States Minor Outlying Islands","LB": "Lebanon","LC": "Saint Lucia","LA": "Lao People's Democratic Republic","TV": "Tuvalu","TW": "Taiwan","TT": "Trinidad and Tobago","TR": "Turkey","LK": "Sri Lanka","LI": "Liechtenstein","LV": "Latvia","TO": "Tonga","LT": "Lithuania","LU": "Luxembourg","LR": "Liberia","LS": "Lesotho","TH": "Thailand","TF": "French Southern Territories","TG": "Togo","TD": "Chad","TC": "Turks and Caicos Islands","LY": "Libyan Arab Jamahiriya","VA": "Holy See (Vatican City State)","VC": "Saint Vincent and the Grenadines","AE": "United Arab Emirates","AD": "Andorra","AG": "Antigua and Barbuda","AF": "Afghanistan","AI": "Anguilla","VI": "Virgin Islands, U.S.","IS": "Iceland","IR": "Iran, Islamic Republic of","AM": "Armenia","AL": "Albania","AO": "Angola","AN": "Netherlands Antilles","AQ": "Antarctica","AS": "American Samoa","AR": "Argentina","AU": "Australia","AT": "Austria","IO": "British Indian Ocean Territory","IN": "India","AX": "\u00c5land Islands","AZ": "Azerbaijan","IE": "Ireland","ID": "Indonesia","UA": "Ukraine","QA": "Qatar","MZ": "Mozambique"};
Surface.Modifier.countrycodes = function(subject) {
    var codes = [];
    $.each(Surface.Modifier.rawCountryCodes, function(key, val) {
        codes.push({"code": key,"name": val});
    });
    return codes.sort(function(a, b) {
        if (a["name"] < b["name"]) {
            return -1;
        }
        if (a["name"] > b["name"]) {
            return 1;
        }
        return 0;
    });
};
S.Modifier.duration = function(subject) {
    var seconds = parseInt(subject);
    var minutes = Math.floor(seconds / 60);
    seconds = seconds - (minutes * 60);
    var hours = Math.floor(minutes / 60);
    minutes = minutes - (hours * 60);
    if (hours) {
        return hours + "h " + minutes + "m";
    } else {
        return minutes + "m " + seconds + "s";
    }
};
Surface.Modifier.endswith = function(subject, suffix) {
    return subject.indexOf(suffix, subject.length - suffix.length) !== -1;
};
Surface.Modifier.explode = function(subject, separator, removeEmpty) {
    var parts = subject.split(separator);
    if (!removeEmpty) {
        return parts;
    }
    var trimmed = [];
    for (var i in parts) {
        var item = parts[i];
        if (item) {
            trimmed.push(item);
        }
    }
    return trimmed;
};
Surface.Modifier.filterlist = function(subject, attribute, value, invert) {
    var newarr = [];
    for (var i in subject) {
        if ((!invert && subject[i][attribute] == value) || (invert && subject[i][attribute] != value)) {
            newarr.push(subject[i]);
        }
    }
    return newarr;
};
Surface.Modifier.friendssort = function(subject) {
    if (!subject.length) {
        return subject;
    }
    subject.sort(function(a, b) {
        return (a.username.toLowerCase() < b.username.toLowerCase() ? -1 : 1);
    });
    subject.sort(function(a, b) {
        if (!a.presence.isOnline && !b.presence.isOnline) {
            return 0;
        }
        if (a.presence.isOnline && b.presence.isOnline) {
            return 0;
        }
        if (a.presence.isOnline && !b.presence.isOnline) {
            return -1;
        }
        return 1;
    });
    subject.sort(function(a, b) {
        if (!a.presence.isPlaying && !b.presence.isPlaying) {
            return 0;
        }
        if (a.presence.isPlaying && b.presence.isPlaying) {
            return 0;
        }
        if (a.presence.isPlaying && !b.presence.isPlaying) {
            return -1;
        }
        return 1;
    });
    return subject;
};
S.Modifier.insert = function(subject, a, b) {
    return subject.splice(parseInt(a), 0, parseInt(b));
};
Surface.Modifier.isInString = function(subject, s) {
    if (subject.toLowerCase().indexOf(s.toLowerCase()) > -1) {
        return true;
    }
    return false;
};
Surface.Modifier.jsonDecode = function(subject) {
    try {
        return S.parseJSON(subject);
    } catch (e) {
        S.debug("Failed to parse JSON: " + subject);
        return null;
    }
};
Surface.Modifier.jsonEncode = function(subject) {
    try {
        return S.encodeJSON(subject);
    } catch (e) {
        S.debug("Failed to JSON encode: " + subject);
        return null;
    }
};
S.Modifier.localizedAgo = function(subject, agoPeriodsSingular, agoPeriodsPlural, inPeriodsSingular, inPeriodsPlural) {
    if (agoPeriodsSingular[0] == "ID_WEB_TIME_AGO_MINUTE") {
        agoPeriodsSingular = ["%s minute ago", "%s hour ago", "%s day ago", "%s week ago", "%s month ago", "%s year ago"];
        agoPeriodsPlural = ["%s minutes ago", "%s hours ago", "%s days ago", "%s weeks ago", "%s months ago", "%s years ago"];
        inPeriodsSingular = ["in %s minute", "in %s hour", "in %s day", "in %s week", "in %s month", "in %s year"];
        inPeriodsPlural = ["in %s minutes", "in %s hours", "in %s days", "in %s weeks", "in %s months", "in %s years"];
    }
    var timestamp_in_sec = parseInt(subject);
    var difference = new Date().getTime() / 1000 - timestamp_in_sec;
    var future = false;
    difference /= 60;
    if (difference < 0) {
        future = true;
        difference = Math.abs(difference);
    }
    if (difference == 0) {
        difference = 1;
    }
    var lengths = ["60", "24", "7", "4.35", "12"];
    for (var j = 0; j < lengths.length && difference >= lengths[j]; j++) {
        difference /= lengths[j];
    }
    if (j == 2 || j == 1) {
        difference = Math.ceil(difference);
    } else {
        difference = Math.floor(difference);
    }
    if (difference == 7 && j == 2) {
        j += 1;
        difference = 1;
    }
    if (difference == 0) {
        return agoPeriodsSingular[0].replace("%s", 1);
    }
    if (future) {
        return (difference == 1 ? inPeriodsSingular[j] : inPeriodsPlural[j]).replace("%s", difference);
    } else {
        return (difference == 1 ? agoPeriodsSingular[j] : agoPeriodsPlural[j]).replace("%s", difference);
    }
};
S.Modifier.lstrip = function(subject) {
    return subject;
};
Surface.Modifier.multisort = function(array) {
    if (Object.prototype.toString.call(array) !== "[object Array]") {
        Surface.error("Only lists are sortable", Surface.ERRORMODE_WARNING);
        return array;
    }
    var multisortArgs = [];
    for (var i = 1; i < arguments.length; i++) {
        multisortArgs.push(arguments[i]);
    }
    if (multisortArgs.length % 2 != 0) {
        Surface.error("Wrong number of arguments to modifier multisort. (sort_key1, sort_order1, ..., sort_keyN, sort_orderN)", Surface.ERRORMODE_WARNING);
        return array;
    }
    array.sort(function(a, b) {
        var args = multisortArgs.slice();
        var x, y;
        while (args.length > 0) {
            var sortKey = args.shift();
            var order = args.shift();
            if (order == "asc") {
                x = eval("a." + sortKey);
                y = eval("b." + sortKey);
            } else {
                y = eval("a." + sortKey);
                x = eval("b." + sortKey);
            }
            if (y == null || typeof (y) == "undefined") {
                if (x == null || typeof (x) == "undefined") {
                    return 0;
                }
                return 1;
            }
            if (x == null || typeof (x) == "undefined") {
                return -1;
            }
            if (typeof x == "string" && typeof y == "string") {
                var lx = x.toLowerCase();
                var ly = y.toLowerCase();
                if (lx != ly) {
                    x = lx;
                    y = ly;
                }
            }
            if (x != y) {
                break;
            }
        }
        return ((x <= y) ? -1 : ((x > y) ? 1 : 0));
    });
    return array;
};
S.Modifier.nbs = function(subject) {
    return String(subject).replace(/ /g, "&nbsp;");
};
Surface.Modifier.niceInt = function(subject, separator) {
    var parts = subject.toString().split(".");
    var decimal = parts[0];
    var regExp = new RegExp("(-?[0-9]+)([0-9]{3})");
    while (regExp.test(decimal)) {
        decimal = decimal.replace(regExp, "$1" + (separator || " ") + "$2");
    }
    return decimal;
};
S.Modifier.objcopy = function(subject) {
    return jQuery.extend({}, subject);
};
Surface.Modifier.offsetdateformat = function(utcTimestampInSeconds, formatString, utcOffsetInMinutes) {
    utcTimestampInSeconds = parseInt(utcTimestampInSeconds) + (parseInt(utcOffsetInMinutes) * 60);
    var originalTz = Surface.timezoneData;
    try {
        Surface.timezoneData = [[0, 0, "UTC"]];
        return Surface.Modifier.dateformat(utcTimestampInSeconds, formatString);
    }finally {
        S.timezoneData = originalTz;
    }
};
S.Modifier.pagination = function() {
    return "";
};
Surface.Modifier.random = function(subject) {
    var randomNo = Math.ceil(Math.random() * 10);
    return randomNo;
};
Surface.Modifier.replace = function(subject, pattern, replacement) {
    return String(subject).replace(pattern, replacement);
};
Surface.Modifier.replacemulti = function(subject, arr) {
    var a = [];
    for (var key in arr) {
        a[a.length] = key.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    }
    var regexp = a.join("|");
    return subject.replace(new RegExp(regexp, "g"), function(m) {
        return arr[m] != null ? arr[m] : arr["\\" + m];
    });
};
S.Modifier.reverse = function(subject) {
    return subject.reverse();
};
Surface.Modifier.sectotime = function(subject) {
    var secs = parseInt(subject);
    var minutes = Math.floor(secs / 60);
    secs = secs - (minutes * 60);
    if (secs < 10) {
        secs = "0" + secs;
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    return minutes + ":" + secs;
};
S.Modifier.slugify = function(subject) {
    return String(subject).replace(/^([^a-zA-Z0-9]+)/g, "").replace(/([^a-zA-Z0-9]+)$/g, "").replace(/([^a-zA-Z0-9]+)/g, "-");
};
Surface.Modifier.sortfast = function(array, sortKey, order) {
    if (Object.prototype.toString.call(array) !== "[object Array]") {
        Surface.error("Only lists are sortable", Surface.ERRORMODE_WARNING);
        return array;
    }
    order = order || "asc";
    sortKey = sortKey || "";
    if (sortKey != "") {
        array.sort(function(a, b) {
            var x, y;
            if (order == "asc") {
                x = a[sortKey];
                y = b[sortKey];
            } else {
                y = a[sortKey];
                x = b[sortKey];
            }
            if (y == null || typeof (y) == "undefined") {
                if (x == null || typeof (x) == "undefined") {
                    return 0;
                }
                return 1;
            }
            if (x == null || typeof (x) == "undefined") {
                return -1;
            }
            if (typeof x == "string" && typeof y == "string") {
                var lx = x.toLowerCase();
                var ly = y.toLowerCase();
                if (lx != ly) {
                    x = lx;
                    y = ly;
                }
            }
            return ((x <= y) ? -1 : ((x > y) ? 1 : 0));
        });
    } else {
        array.sort();
        if (order == "desc") {
            array.reverse();
        }
    }
    return array;
};
S.Modifier.substring = function(subject, start, lgth) {
    if (arguments.length > 1) {
        result = subject.substring(start, lgth);
    } else {
        result = subject.substring(start);
    }
    return result;
};
Surface.Modifier.thousandseparators = function(subject) {
    subject += "";
    x = subject.split(".");
    x1 = x[0];
    x2 = x.length > 1 ? "." + x[1] : "";
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, "$1" + "," + "$2");
    }
    return x1 + x2;
};
S.Modifier.timestamp = function(value) {
    return parseInt(value);
};
S.Modifier.tofloat = function(a) {
    return a;
};
Surface.Modifier.toint = function(subject, _default) {
    var n = parseInt(subject, 10);
    if (isNaN(n)) {
        if (typeof (_default) == "undefined") {
            n = 0;
        } else {
            n = _default;
        }
    }
    return n;
};
Surface.asset = function(path) {
    return "http://battlelog-cdn.battlefield.com/public/" + path.replace("/public/", "") + "?v=7";
};
Surface.debug = function() {
};
(function() {
    var addListener = function(surfaceEvent, callback, scope) {
        if (typeof (surfaceEvent) == "string") {
            surfaceEvent = new Surface.Event(surfaceEvent);
        }
        if (this.listeners[surfaceEvent.name] == undefined) {
            this.listeners[surfaceEvent.name] = new Array();
        }
        if (scope == undefined) {
            scope = this;
        }
        for (var i = 0; i < this.listeners[surfaceEvent.name].length; i++) {
            var cb = this.listeners[surfaceEvent.name][i];
            if (cb.scope == scope && "" + cb.func == "" + callback) {
                return;
            }
        }
        this.listeners[surfaceEvent.name].push(new Surface.EventHandler.Callback(callback, scope));
    };
    Surface.EventHandler.addListener = addListener;
})();
(function() {
    Surface.Renderer.invokeUsedComponents = function(components) {
        if (typeof components == "function") {
            components = Surface.Renderer.state.usedComponents;
        }
        Surface.Renderer.state.usedComponents = components;
        for (var i = 0; i < components.length; i++) {
            var component = components[i];
            if (Surface.ajaxNavigation.initiatedComponent[component] == null) {
                try {
                    if (S.globalContext.isAjaxNavigation) {
                        eval("if (typeof " + component + " != 'undefined' && typeof " + component + ".init != 'undefined') { " + component + ".init();} ");
                    } else {
                        eval("if (typeof " + component + " != 'undefined' && typeof " + component + ".init != 'undefined') { Surface.domReady(" + component + ".init, " + component + "); }");
                    }
                } catch (e) {
                    S.error(e);
                }
                Surface.ajaxNavigation.initiatedComponent[component] = true;
            }
            try {
                if (S.globalContext.isAjaxNavigation) {
                    eval("if (typeof " + component + " != 'undefined' && typeof " + component + ".onPageShow != 'undefined') { " + component + ".onPageShow(); }");
                } else {
                    eval("if (typeof " + component + " != 'undefined' && typeof " + component + ".onPageShow != 'undefined') { $(document).ready(" + component + ".onPageShow); }");
                }
            } catch (e) {
                S.error(e);
            }
        }
    };
})();
if (ESN == null || ESN == undefined) {
    var ESN = {};
}
ESN.Sonar = {client: null,options: null,_loopBack: false,CAPTURE_MODE_PUSH_TO_TALK: "pushtotalk",CAPTURE_MODE_VOICE_ACTIVATION: "voiceactivation",CAPTURE_MODE_CONTINUOUS: "continuous",debug: function(input) {
        try {
            S.debug("SONAR " + input);
        } catch (e) {
        }
    },startClient: function(token) {
        S.debug("Starting and/or embedding Sonar client!");
        if (ESN.Sonar.client) {
            S.debug("SONAR already started!");
        }
        var sonarToken = token;
        ESN.Sonar.client = new SonarVoice(sonarToken, ESN.Sonar.options);
        ESN.Sonar.client.bind("*", myCallback);
    },restartClient: function() {
        ESN.Sonar.startClient();
    },isStarted: function() {
        return ESN.Sonar.client && ESN.Sonar.client.client != null;
    },ensureConnectedToServer: function(callback) {
        if (!S.globalContext.staticContext.useSonar) {
            S.info("Sonar is not enabled in config.");
            return false;
        }
        if (!ESN.Sonar.isStarted()) {
            try {
                S.debug("Starting up Sonar...");
                ESN.Sonar.startSonarWithCallback(callback);
            } catch (e) {
                S.error("Could not start Sonar");
                return false;
            }
        } else {
            callback();
        }
        return true;
    },startSonarWithCallback: function(callback, token) {
        try {
            var token = token || false;
            if (!token) {
                $.ajax({"async": false,"url": $("#getToken-urlaction").val(),"complete": base.onComplete(function(s, r) {
                        switch (r.message) {
                            case "OK":
                                token = r.data.token;
                                break;
                        }
                    }, false)});
            }
            if (!token || token == "UNAVAILABLE") {
                base._showSpecificReceipt("voice_error");
                throw ("Error, could not get a token.");
            }
            ESN.Sonar.options = {themeXmlUrl: S.globalContext.staticContext.voice.xmlInitUrl,expectedVersion: "" + S.globalContext.staticContext.voice.version};
            try {
                S.debug("Got token, " + token);
                ESN.Sonar.startClient(token);
            } catch (e) {
                base._showSpecificReceipt("voice_install");
                gamemanager.show();
                throw ("Error - Voice is not installed");
            }
            if (ESN.Sonar.client) {
                sonarui.setBottomBarInfo();
                callback();
            } else {
                throw ("Could not start voice");
            }
        } catch (e) {
            S.info("Got Sonar error:");
            S.info(e);
            throw ("SonarError");
        }
    },addAudioCallback: function() {
        ESN.Sonar.client.bind("audio", myAudioCallback);
    },checkForNewVersion: function() {
        try {
            var version = ESN.Sonar.client.getVersion().split(".");
        } catch (e) {
            return true;
        }
        var major = parseInt(version[0]);
        var minor = parseInt(version[1]);
        var patch = parseInt(version[2]);
        try {
            var myVersion = ESN.Sonar.options.currentVersion.split(".");
            var myMajor = parseInt(myVersion[0]);
            var myMinor = parseInt(myVersion[1]);
            var myPatch = parseInt(myVersion[2]);
        } catch (e) {
            return false;
        }
        return (minor < myMinor || major < myMajor);
    },getCurrentChannel: function() {
        if (ESN.Sonar.client == null) {
            return false;
        }
        var channel = ESN.Sonar.client.channel();
        if (channel == null) {
            return false;
        }
        return {"channelId": channel.id,"channelDescription": channel.description};
    },getUsersInCurrentChannel: function() {
        if (!ESN.Sonar.client) {
            return [];
        }
        var pluginusers = ESN.Sonar.client.usersInChannel();
        if (!pluginusers) {
            return [];
        }
        return pluginusers;
    },catchNextKeyAndSetAsPushToTalk: function() {
        var stroke = ESN.Sonar.client.recordPushToTalkKey();
    },setPushToTalkKey: function(key) {
        ESN.Sonar.debug("Setting ppt-key to: " + key);
        ESN.Sonar.client.pushToTalkKey(key);
    },getPushToTalkKey: function() {
        try {
            return ESN.Sonar.client.pushToTalkKey();
        } catch (e) {
            return "";
        }
    },setCaptureDevice: function(deviceId) {
        ESN.Sonar.client.captureDevice(deviceId);
    },setPlaybackDevice: function(deviceId) {
        ESN.Sonar.client.playbackDevice(deviceId);
    },getCaptureDevices: function() {
        var devices = ESN.Sonar.client.captureDevices();
        return devices;
    },getCurrentPlaybackDevice: function() {
        return ESN.Sonar.client.playbackDevice();
    },getVoiceSensitivity: function() {
        return ESN.Sonar.client.voiceSensitivity();
    },setVoiceSensitivity: function(value) {
        ESN.Sonar.client.voiceSensitivity(value);
    },getCaptureVolume: function() {
        return ESN.Sonar.client.captureVolume();
    },setCaptureVolume: function(value) {
        value = parseFloat(value);
        S.debug("New mic volume " + value);
        return ESN.Sonar.client.captureVolume(value);
    },getCurrentCaptureDevice: function() {
        return ESN.Sonar.client.captureDevice();
    },getAudioLoopbackEnabled: function() {
        return ESN.Sonar.client.audioLoopback();
    },getVoiceActivationEnabled: function() {
        return ESN.Sonar.client.voiceActivation();
    },getCaptureMode: function() {
        return ESN.Sonar.client.captureMode();
    },getPlaybackDevices: function() {
        var devices = ESN.Sonar.client.playbackDevices();
        return devices;
    },_checkIfUserIsInAChannel: function() {
        if (!ESN.Sonar.getCurrentChannel()) {
            return false;
        }
        return true;
    },leaveChannel: function() {
        if (!ESN.Sonar._checkIfUserIsInAChannel()) {
            return false;
        }
        ESN.Sonar.client.partChannel("UNKNOWN", "");
    },getVolume: function() {
        try {
            var volume = ESN.Sonar.client.playbackVolume();
            return volume;
        } catch (e) {
            return false;
        }
    },setVolume: function(volume) {
        try {
            ESN.Sonar.debug("Setting playbackvolume to  " + volume);
            ESN.Sonar.client.playbackVolume(volume);
        } catch (e) {
        }
    },isMicrophoneMuted: function() {
        try {
            return ESN.Sonar.client && ESN.Sonar.client.captureMuted();
        } catch (e) {
            return false;
        }
    },isSpeakersMuted: function() {
        try {
            return ESN.Sonar.client && ESN.Sonar.client.playbackMuted();
        } catch (e) {
            return false;
        }
    },muteSpeakers: function(state) {
        ESN.Sonar.client.playbackMuted(state);
    },muteMicrophone: function(state) {
        ESN.Sonar.client.captureMuted(state);
    },toggleMicrophone: function() {
        if (!ESN.Sonar.client) {
            return false;
        }
        ESN.Sonar.client.toggleCaptureMuted();
    },toggleSpeakers: function() {
        if (!ESN.Sonar.client) {
            return false;
        }
        ESN.Sonar.client.togglePlaybackMuted();
    },toggleAudioLoopback: function() {
        ESN.Sonar.client.toggleAudioLoopback();
    },toggleVoiceActivation: function() {
        ESN.Sonar.client.toggleVoiceActivation();
    },setCaptureMode: function(mode) {
        if (mode != ESN.Sonar.CAPTURE_MODE_PUSH_TO_TALK && mode != ESN.Sonar.CAPTURE_MODE_VOICE_ACTIVATION) {
            return false;
        }
        ESN.Sonar.client.captureMode(mode);
    }};
var sonarui = {foundPlugin: "nope",timerId: "",debug: function(input) {
        ESN.Sonar.debug(input);
    },showDownloadTab: function() {
    },updateSurfaces: function(userId) {
        var channel = ESN.Sonar.getCurrentChannel();
        channel.channelDesc = channel.channelDescription;
        if ($("#profile-sonar-status_" + userId).length > 0) {
            $("#profile-status-" + userId).show();
            if (channel.channelId == "") {
            } else {
                var users = ESN.Sonar.getUsersInCurrentChannel();
                var data = {"currentChannel": {"channel": channel,"users": users}};
            }
        }
    },renderUsersInChannel: function() {
        comcenter.resizeComCenter();
        return true;
    },renderUserOnConnect: function() {
        return false;
    },prerenderUserInChannel: function(newUser) {
        ESN.Sonar.debug("Prerender one user in channel");
        var users = ESN.Sonar.getUsersInCurrentChannel();
        var channel = ESN.Sonar.getCurrentChannel();
        return true;
    },setBottomBarInfo: function() {
        ESN.Sonar.debug("Setting bottom bar info...");
        $(function() {
            try {
                comcenter.updatePPTkey();
                var volume = ESN.Sonar.getVolume();
                volume = parseInt(volume * 100);
                $(".comcenter-sonar-slider").slider({orientation: "vertical",slide: function(event, ui) {
                        $("#sonar-volume").html($(ui).attr("value") + "%");
                        ESN.Sonar.setVolume($(ui).attr("value") / 100);
                        if ($("#voice-speaker-volumn-slider").length) {
                            $("#voice-speaker-volumn-slider").slider("value", $(ui).attr("value"));
                        }
                    },animate: true,max: 100,min: 0,value: volume,range: "min"});
                if (ESN.Sonar.isMicrophoneMuted()) {
                    sonarui.setMicMute(true);
                }
                if (ESN.Sonar.isSpeakersMuted()) {
                    sonarui.setSpeakersMute(true);
                }
                if (ESN.Sonar.client) {
                    $(".comcenter-taskbar-inner").addClass("comcenter-voice-started");
                }
            } catch (e) {
                S.debug("Could not set sonarInfo");
            }
        });
    },setSettingsInfo: function() {
        ESN.Sonar.debug("Setting settings");
        $("#recordStroke").val(ESN.Sonar.getPushToTalkKey());
        var devices = ESN.Sonar.getPlaybackDevices();
        var currentDevice = ESN.Sonar.getCurrentPlaybackDevice();
        for (var i in devices) {
            if (devices[i].deviceId == currentDevice) {
                devices[i].active = true;
            }
        }
        $S("playbackDevices").update({"devices": devices});
        var devices = ESN.Sonar.getCaptureDevices();
        var currentDevice = ESN.Sonar.getCurrentCaptureDevice();
        for (var i in devices) {
            if (devices[i].deviceId == currentDevice) {
                devices[i].active = true;
            }
        }
        $S("captureDevices").update({"devices": devices});
        var loopBack = ESN.Sonar.getAudioLoopbackEnabled();
        $(".sonar-audio-checkbox").attr("checked", loopBack);
    },startDownloadTimerCheck: function() {
        sonarui.timerId = setInterval(function() {
            ESN.Sonar.debug("Restarting client..");
            ESN.Sonar.restartClient();
        }, 3000);
    },joinChannel: function(channelId) {
        alert("This is not used anymore, if you see this alertbox contact a developer.");
        return false;
        if (ESN.Sonar.client == null) {
            ESN.Sonar.restartClient();
        }
        var channel = ESN.Sonar.getCurrentChannel();
        if (channel.channelId == channelId) {
            return false;
        }
        var channelDescription = channelId + "'s channel";
        ESN.Sonar.joinChannel(channelId, channelDescription);
    },setMicMute: function(state) {
        if (!state) {
            $(".comcenter-setting.mic").removeClass("muted");
        } else {
            $(".comcenter-setting.mic").addClass("muted");
        }
    },toggleAudio: function(state) {
        ESN.Sonar.toggleAudioLoopback(state);
    },toggleSpeakersOrMic: function(type, state) {
        if (type == "mic") {
            ESN.Sonar.muteMicrophone(state);
        }
        if (type == "speaker") {
            ESN.Sonar.muteSpeakers(state);
        }
    },setSpeakersMute: function(state) {
        if (!state) {
            $(".comcenter-setting.noise").removeClass("muted");
        } else {
            $(".comcenter-setting.noise").addClass("muted");
        }
    },leaveChannel: function() {
        ESN.Sonar.leaveChannel();
        if (!S.globalContext.userContext.voice) {
            S.globalContext.userContext.voice = {};
        }
        S.globalContext.userContext.voice.channel = false;
        comcenter.partyUpdateChannel(S.globalContext.session.user.userId, 0);
        $S("comcenter-party-voice").refresh();
        $("#comcenter-area").addClass("comcenter-not-in-voice");
        return false;
    }};
var pluginGames = {ROME: "ROME-GAME",VENICE: "VENICE-GAME"};
var pluginSkus = {ORIGIN: "ORIGIN-APP"};
var launcher = {onPageShow: function() {
    },killGameTimeout: null,init: function(template) {
        Push.bind("MatchmakeSuccessful", launcher._matchmakeSuccessful);
        Push.bind("MatchmakeFail", launcher._matchmakeFail);
        Push.bind("GroupReservationJoined", launcher._reservationReady);
        Push.bind("GroupReservationJoinFail", function(groupJoinFailEvent) {
            var groupJoinFail = groupJoinFailEvent.data;
            switch (groupJoinFail.reason) {
                case launcher.ALERT.ERR_GROUP_JOIN.GAME_SERVER_NOT_FOUND:
                    launcher._triggerEvent("error.generic", [groupJoinFail.game, groupJoinFail.personaId, groupJoinFail.reason]);
                    break;
                case launcher.ALERT.ERR_GROUP_JOIN.FAILED_TO_RESERVE_SLOTS:
                    launcher._triggerEvent("error.generic", [groupJoinFail.game, groupJoinFail.personaId, groupJoinFail.reason]);
                    break;
            }
            launcher._triggerEvent("groupjoin.fail", groupJoinFail);
        });
        Push.bind("ReservationJoinedFromQueue", launcher._reservationReady);
        Push.bind("ReservationQueueStatus", function(queueStatusEvent) {
            var queueStatus = queueStatusEvent.data;
            launcher._updateCurrentState(queueStatus.game, launcher.STATE.IN_QUEUE, launcher.STATE.READY, queueStatus.personaId);
            launcher._serverQueueUpdate(queueStatus.game, queueStatus.personaId, queueStatus.queuePosition);
        });
        Push.bind("ReservationPutInQueue", function(reservationEvent) {
            launcher._triggerEvent("queue.reservation", reservationEvent.data);
        });
    },instance: null,getExpectedVersion: function() {
        return S.globalContext.staticContext.pluginVersion;
    },getExpectedVersionHex: function() {
        var parts = launcher.getExpectedVersion().split(".");
        var hex = "";
        for (var i in parts) {
            if (typeof (parts[i]) == "function" || parts[i] == undefined) {
                continue;
            }
            var h = parseInt(parts[i]).toString(16);
            if (h.length == 1) {
                h = "0" + h;
            }
            hex += h;
        }
        return hex;
    },veniceProtocolVersion: "1",userSettings: {},pingSiteLatency: {},latestGameVersions: {},queryRequests: 0,inProgressPingList: [],inProgressPingRetries: {},currentState: "",currentStatePersonaId: "",targetState: "",wasPreviouslyRunning: {},STATE: {NONE: "NONE",READY: "READY",PENDING: "PENDING",GAMEISGONE: "GAMEISGONE",RESERVING_SLOT: "RESERVING_SLOT",NA: "State_NA",ERROR: "State_Error",STARTING: "State_Starting",INIT: "State_Init",NOT_LOGGED_IN: "State_NotLoggedIn",MENU_READY: "State_MenuReady",MATCHMAKING: "State_Matchmaking",MATCHMAKE_RESULT_HOST: "State_MatchmakeResultHost",MATCHMAKE_RESULT_JOIN: "State_MatchmakeResultJoin",CONNECT_TO_GAMEID: "State_ConnectToGameId",CONNECT_TO_USERID: "State_ConnectToUserId",CREATE_COOP_PEER: "State_CreateCoOpPeer",MATCHMAKE_COOP: "State_MatchmakeCoOp",RESUME_CAMPAIGN: "State_ResumeCampaign",LOAD_LEVEL: "State_LoadLevel",CONNECTING: "State_Connecting",WAIT_FOR_LEVEL: "State_WaitForLevel",GAME_LOADING: "State_GameLoading",GAME: "State_Game",GAME_LEAVING: "State_GameLeaving",IN_QUEUE: "State_InQueue",WAIT_FOR_PEER_CLIENT: "State_WaitForPeerClient",PEER_CLIENT_CONNECTED: "State_PeerClientConnected",CLAIM_RESERVATION: "State_ClaimReservation"},ALERT: {ERR_LOGIN_ACCOUNT: "ERR_LOGIN_ACCOUNT",ERR_LOGIN_PERSONA: "ERR_LOGIN_PERSONA",ERR_SERVERCONNECT: "ERR_SERVERCONNECT",ERR_SERVERCONNECT_FULL: "ERR_SERVERCONNECT_FULL",ERR_SERVERCONNECT_WRONGPASSWORD: "ERR_SERVERCONNECT_WRONGPASSWORD",ERR_SERVERCONNECT_INVALIDGAME: "ERR_SERVERCONNECT_INVALIDGAME",ERR_SERVER_KICKED: "ERR_SERVER_KICKED",ERR_SERVERCONNECT_BANNED: "ERR_SERVERCONNECT_BANNED",ERR_PARAM_MISSINGTOKEN: "ERR_PARAM_MISSINGTOKEN",ERR_PARAM_MISSINGPERSONA: "ERR_PARAM_MISSINGPERSONA",ERR_PARAM_INVALIDGAMEID: "ERR_PARAM_INVALIDGAMEID",ERR_PARAM_INVALIDUSERID: "ERR_PARAM_INVALIDUSERID",ERR_PARAM_INVALIDMISSION: "ERR_PARAM_INVALIDMISSION",ERR_SHOW_TOS: "ERR_SHOW_TOS",ERR_CAMPAIGN_NOSAVE: "ERR_CAMPAIGN_NOSAVE",ERR_CAMPAIGN_LOADSAVE: "ERR_CAMPAIGN_LOADSAVE",ERR_CONFIG_MISSMATCH: "ERR_CONFIG_MISSMATCH",ERR_ALREADY_IN_QUEUE: "ERR_ALREADY_IN_QUEUE",ERR_RESERVATION_ALREADY_EXIST: "ERR_RESERVATION_ALREADY_EXIST",ERR_MATCHMAKE_FAILED: "ERR_MATCHMAKE_FAILED",ERR_ALREADY_GAME_MEMBER: "ERR_ALREADY_GAME_MEMBER",ERR_DISCONNECT_GAME_WRONGPROTOCOLVERSION: "ERR_DISCONNECT_GAME_WRONGPROTOCOLVERSION",ERR_DISCONNECT_GAME_WRONGTITLEVERSION: "ERR_DISCONNECT_GAME_WRONGTITLEVERSION",ERR_DISCONNECT_GAME_SERVERFULL: "ERR_DISCONNECT_GAME_SERVERFULL",ERR_DISCONNECT_GAME_KICKED: "ERR_DISCONNECT_GAME_KICKED",ERR_DISCONNECT_GAME_DEMOOVER: "ERR_DISCONNECT_GAME_DEMOOVER",ERR_DISCONNECT_GAME_BANNED: "ERR_DISCONNECT_GAME_BANNED",ERR_DISCONNECT_GAME_TIMEDOUT: "ERR_DISCONNECT_GAME_TIMEDOUT",ERR_DISCONNECT_GAME_NOREPLY: "ERR_DISCONNECT_GAME_NOREPLY",ERR_DISCONNECT_GAME_BADCONTENT: "ERR_DISCONNECT_GAME_BADCONTENT",ERR_DISCONNECT_GAME: "ERR_DISCONNECT_GAME",ERR_DISCONNECT_BLAZE: "ERR_DISCONNECT_BLAZE",ERR_LOGIN_INVALIDTOKEN: "ERR_LOGIN_INVALIDTOKEN",ERR_LOGIN_EXPIREDTOKEN: "ERR_LOGIN_EXPIREDTOKEN",ERR_LOGIN_PERSONANOTFOUND: "ERR_LOGIN_PERSONANOTFOUND",ERR_INVALID_GAME_STATE_ACTION: "ERR_INVALID_GAME_STATE_ACTION",ERR_GENERIC: "ERR_GENERIC",ERR_LAUNCH_DISABLED: "ERR_LAUNCH_DISABLED",ERR_EMPTY_JOINSTATE: "ERR_EMPTY_JOINSTATE",ERR_BACKEND_ROUTE: "ERR_BACKEND_ROUTE",ERR_BACKEND_HTTP: "ERR_BACKEND_HTTP",ERR_FAILED_PERSONACALL: "ERR_FAILED_PERSONACALL",ERR_PING_PINGSITES: "ERR_PING_PINGSITES",ERR_NO_PINGSITE_LIST: "ERR_NO_PINGSITE_LIST",ERR_SERVER_QUEUE_FULL: "ERR_SERVER_QUEUE_FULL",ERR_TOO_MANY_ATTEMPTS: "ERR_TOO_MANY_ATTEMPTS",ERR_LOGIN_ACCOUNT_ERROR_CODE: {UNSPECIFIED_ERROR: 1,ACCOUNT_NOT_FOUND: 2,ACCOUNT_DISABLED: 3,ACCOUNT_BANNED: 4,ACCOUNT_PENDING: 5,ACCOUNT_NOT_ENTITLED: 6,INVALID_REG_CODE: 7,TOO_MANY_LOGIN_ATTEMPTS: 10,INVALID_PASSWORD: 11,INVALID_EMAIL: 12,NOT_REGISTERED: 13,SERVICE_FAILURE: 14,ACCOUNT_DEACTIVATED: 15,ACCOUNT_MERGED: 16},ERR_LOGIN_PERSONA_ERROR_CODE: {UNSPECIFIED_ERROR: 1,SERVICE_UNAVAILABLE: 25,PERSONA_DISABLED_BY_CSR: 30},ERR_CONFIG_MISSMATCH_ERROR_CODE: {GAME_PROTOCOL: 1},ERR_GENERIC_ERROR_CODE: {BACKEND: 1,UNKNOWN: 2,DEFAULT: 3,INTERNAL_SERVER_ERROR: 4,AJAX_ERROR: 5,MANGLED_RESPONSE: 6,SERVICE_UNAVAILABLE: 7},ERR_MATCHMAKE: {SESSION_TIMED_OUT: "SESSION_TIMED_OUT",SESSION_CANCELED: "SESSION_CANCELED",START_MATCHMAKING_FAILED: "START_MATCHMAKING_FAILED",MAX_REQUESTS: "MAX_REQUESTS",REQUIRED_FILTER_MISSING: "REQUIRED_FILTER_MISSING"},ERR_PLAYER_ACTION: {JOINING: 1,LEAVING: 2},ERR_GROUP_JOIN: {GAME_SERVER_NOT_FOUND: "GAME_SERVER_NOT_FOUND",FAILED_TO_RESERVE_SLOTS: "FAILED_TO_RESERVE_SLOTS"}},INSTALL_STATE: {OK: "OK",OUT_OF_DATE: "OUT_OF_DATE",ERR_VERSION_UNREADABLE: "ERR_VERSION_UNREADABLE",ERR_NO_VERSION_FOUND: "ERR_NO_VERSION_FOUND",ERR_GAME_NOT_FOUND: "ERR_GAME_NOT_FOUND"},JOIN_STATE: {JOINED_GAME: "JOINED_GAME",IN_QUEUE: "IN_QUEUE",GROUP_PARTIALLY_JOINED: "GROUP_PARTIALLY_JOINED"},queryServer: function(server, callback) {
        var obj = launcher.getInstance();
        if (!obj) {
            callback({error: "NO_PLUGIN"});
            return;
        }
        var requestId = "" + launcher.queryRequests;
        launcher.queryRequests++;
        launcher.registerForEvent("queryResult", function(event, resultId, result) {
            if (resultId != requestId) {
                return;
            }
            var data;
            try {
                data = S.parseJSON(result);
                if (data.error == "SUCCESS") {
                    var team1 = data.teamInfo["2"].players;
                    var team2 = data.teamInfo["3"].players;
                    var players = [];
                    for (var i in team1) {
                        team1[i].personaId = parseInt(i);
                        players[players.length] = team1[i];
                    }
                    for (var j in team2) {
                        team2[j].personaId = parseInt(j);
                        players[players.length] = team2[j];
                    }
                }
                data.players = players;
            } catch (e) {
                data = {error: "INVALID_RESPONSE"};
            }
            callback(data);
        });
        var port = parseInt(server.port) + 1;
        if (server.ip == "10.20.108.220") {
            server.ip = "192.168.1.179";
        }
        launcher.debug("Querying " + server.ip + ":" + port);
        obj.queryServer(launcher._gameToPluginGame(server.game), requestId, "" + server.gameId, server.ip, port);
    },pingServers: function(pingServers) {
        launcher.debug("Pinging: " + pingServers);
        var nrAdditionalInFlighAllowed = Math.max(32 - launcher.inProgressPingList.length, 0);
        jQuery.each(pingServers, function(pingId, ip) {
            var pingInfo = {"pingId": pingId,"ip": ip};
            launcher.inProgressPingList.unshift(pingInfo);
            launcher.inProgressPingRetries[pingId] = 0;
        });
        nrAdditionalInFlighAllowed = Math.min(nrAdditionalInFlighAllowed, launcher.inProgressPingList.length);
        var newInFlightPingServers = {};
        for (var i = 0; i < nrAdditionalInFlighAllowed; i++) {
            var pingInfo = launcher.inProgressPingList.pop();
            newInFlightPingServers[pingInfo.pingId] = pingInfo.ip;
        }
        launcher._doPingServers(newInFlightPingServers);
    },_doPingServers: function(pingServers) {
        if (jQuery.isEmptyObject(pingServers)) {
            return;
        }
        var obj = launcher.getInstance();
        if (!obj) {
            return;
        }
        var iteration = 1;
        jQuery.each(pingServers, function(pingId, ip) {
            var timeout = 10 * iteration;
            setTimeout(function() {
                obj.pingBatch(pingId, [ip]);
            }, timeout);
            iteration++;
        });
    },_pingResults: function(pingLatencys) {
        var justFinishedCount = 0;
        var justFinishedServers = {};
        jQuery.each(pingLatencys, function(pingId, serverLatencyObject) {
            launcher.inProgressPingRetries[pingId]++;
            if (serverLatencyObject.roundTripMSEC >= 0) {
                justFinishedCount++;
                justFinishedServers[pingId] = serverLatencyObject.roundTripMSEC;
            } else {
                if (pingId in launcher.inProgressPingRetries && launcher.inProgressPingRetries[pingId] < 5) {
                    var pingInfo = {"pingId": pingId,"ip": serverLatencyObject.ipAddress};
                    launcher.inProgressPingList.unshift(pingInfo);
                }
            }
            if ((pingId in launcher.inProgressPingRetries) && (launcher.inProgressPingRetries[pingId] >= 5 || pingId in justFinishedServers)) {
                delete launcher.inProgressPingRetries[pingId];
            }
        });
        launcher._triggerEvent("pingResult", justFinishedServers);
        var pingServers = {};
        nrNextInFlight = Math.min(justFinishedCount, launcher.inProgressPingList.length);
        for (var i = 0; i < nrNextInFlight; i++) {
            var pingInfo = launcher.inProgressPingList.pop();
            pingServers[pingInfo.pingId] = pingInfo.ip;
        }
        launcher._doPingServers(pingServers);
    },verifyPassword: function(game, gameServerGuid, plaintextPassword, callback) {
        if (game == games.BFBC2) {
            return callback(true);
        }
        var url = "/" + base.gameToSection(game) + "/launcher/verifypassword/" + gameServerGuid;
        var passwordInfo = {"post-check-sum": S.globalContext.session.postChecksum,"password": plaintextPassword};
        var ajaxOptions = {url: url,dataType: "json",type: "POST",data: S.encodeJSON(passwordInfo),contentType: "application/json;charset=utf-8",success: function(response) {
                callback(true);
            },error: function(jqXHR, textStatus, errorThrown) {
                callback(false);
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },joinMpServer: function(persona, game, gameId, options, groupPersonaIdList, callback) {
        if (game == games.BFBC2) {
            launcher._changeGameToState(persona, game, gameTypes.MP, launcher.STATE.CONNECT_TO_GAMEID, jQuery.extend(options, {gameId: gameId}));
        } else {
            launcher._updateCurrentState(game, launcher.STATE.RESERVING_SLOT, launcher.STATE.READY, persona.personaId);
            var url = "/" + base.gameToSection(game) + "/launcher/reserveslotbygameid/" + persona.personaId + "/" + gameId;
            launcher._reserveSlot(game, url, options, groupPersonaIdList, function(reservation, shouldJoinServer) {
                if (shouldJoinServer) {
                    launcher._updateCurrentState(game, launcher.STATE.CONNECT_TO_GAMEID, launcher.STATE.READY, persona.personaId);
                    launcher._claimReservation(reservation, options);
                }
                callback(reservation);
            });
        }
    },joinMpFriend: function(persona, game, friendPersonaId, options, callback) {
        if (game == games.BFBC2) {
            launcher._changeGameToState(persona, game, gameTypes.MP, launcher.STATE.CONNECT_TO_USERID, jQuery.extend(options, {friendPersonaId: friendPersonaId}));
        } else {
            launcher._updateCurrentState(game, launcher.STATE.RESERVING_SLOT, launcher.STATE.READY, persona.personaId);
            var url = "/" + base.gameToSection(game) + "/launcher/reserveslotbyfriendpersonaid/" + persona.personaId + "/" + friendPersonaId;
            launcher._reserveSlot(game, url, options, null, function(reservation, shouldJoinServer) {
                if (shouldJoinServer) {
                    launcher._updateCurrentState(game, launcher.STATE.CONNECT_TO_USERID, launcher.STATE.READY, persona.personaId);
                    launcher._claimReservation(reservation, options);
                }
                callback(reservation);
            });
        }
    },_reserveSlot: function(game, url, options, groupPersonaIdList, callback) {
        var data = {"post-check-sum": S.globalContext.session.postChecksum,"groupPersonaIdList": groupPersonaIdList};
        var ajaxOptions = {url: url,dataType: "json",type: "POST",data: S.encodeJSON(data),contentType: "application/json;charset=utf-8",success: function(response) {
                var reservation = response.data;
                switch (reservation.joinState) {
                    case launcher.JOIN_STATE.GROUP_PARTIALLY_JOINED:
                        launcher._triggerEvent("warning.generic", [game, reservation.personaId, launcher.JOIN_STATE.GROUP_PARTIALLY_JOINED]);
                        return callback(reservation, true);
                    case launcher.JOIN_STATE.JOINED_GAME:
                        return callback(reservation, true);
                    case launcher.JOIN_STATE.IN_QUEUE:
                        launcher._storeJoinOptions(game, reservation.personaId, reservation.gameId, options);
                        launcher._updateCurrentState(game, launcher.STATE.IN_QUEUE, launcher.STATE.READY, reservation.personaId);
                        return callback(reservation, false);
                    default:
                        launcher.debug("Join state not handled: " + reservation.joinState);
                        launcher._triggerEvent("error.generic", [game, reservation.personaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.MANGLED_RESPONSE]);
                        break;
                }
            },error: function(jqXHR, textStatus, errorThrown) {
                var errorResponse = S.parseJSON(jqXHR.responseText);
                launcher.debug(errorResponse.data);
                switch (errorResponse.message) {
                    case "WRONG_USER":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LOGIN_PERSONA]);
                        break;
                    case "BACKEND_HTTP":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_BACKEND_HTTP]);
                        break;
                    case "FAILED_PERSONACALL":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_FAILED_PERSONACALL]);
                        break;
                    case "BACKEND_ROUTE":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_BACKEND_ROUTE]);
                        break;
                    case "LAUNCH_DISABLED":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LAUNCH_DISABLED]);
                        break;
                    case "EMPTY_JOINSTATE":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_EMPTY_JOINSTATE]);
                        break;
                    case "INVALID_TOKEN":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LOGIN_INVALIDTOKEN]);
                        break;
                    case "ALREADY_IN_QUEUE":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_ALREADY_IN_QUEUE]);
                        break;
                    case "TOO_MANY_ATTEMPTS":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_TOO_MANY_ATTEMPTS]);
                        break;
                    case "GAME_PROTOCOL_MISSMATCH":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_CONFIG_MISSMATCH, launcher.ALERT.ERR_CONFIG_MISSMATCH_ERROR_CODE.GAME_PROTOCOL]);
                        break;
                    case "INVALID_GAME_ID":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_PARAM_INVALIDGAMEID, launcher.ALERT.ERR_PLAYER_ACTION.JOINING]);
                        break;
                    case "RESERVATION_ALREADY_EXIST":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_RESERVATION_ALREADY_EXIST]);
                        break;
                    case "GAME_FULL":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_SERVERCONNECT_FULL]);
                        break;
                    case "QUEUE_FULL":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_SERVER_QUEUE_FULL]);
                        break;
                    case "PLAYER_BANNED":
                    case "PLAYER_NOT_FOUND":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_PARAM_INVALIDUSERID, launcher.ALERT.ERR_PLAYER_ACTION.JOINING]);
                        break;
                    case "ALREADY_GAME_MEMBER":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_ALREADY_GAME_MEMBER]);
                        break;
                    case "INVALID_GAME_STATE_ACTION":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_INVALID_GAME_STATE_ACTION]);
                        break;
                    case "BACKEND":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.BACKEND]);
                        break;
                    case "UNKNOWN":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.UNKNOWN]);
                        break;
                    default:
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.DEFAULT]);
                        break;
                }
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },_claimReservation: function(reservation, options) {
        var extendedOptions = jQuery.extend(options, {gameId: reservation.gameId});
        if (reservation.invitePersona && parseInt(reservation.invitePersona.personaId) != NaN && reservation.invitePersona.personaName != null) {
            extendedOptions = jQuery.extend(extendedOptions, {"invitePersonaId": reservation.invitePersona.personaId,"invitePersonaName": reservation.invitePersona.personaName});
        }
        launcher._changeGameToState({"personaId": reservation.personaId}, reservation.game, gameTypes.MP, launcher.STATE.CLAIM_RESERVATION, extendedOptions);
    },_storeJoinOptions: function(game, personaId, gameId, options) {
        jQuery.jStorage.set("launcher.joinoptions." + game + "." + personaId + "." + gameId, options);
    },_retrieveJoinOptions: function(game, personaId, gameId) {
        return jQuery.jStorage.get("launcher.joinoptions." + game + "." + personaId + "." + gameId, {});
    },_deleteJoinOptions: function(game, personaId, gameId) {
        jQuery.jStorage.deleteKey("launcher.joinoptions." + game + "." + personaId + "." + gameId);
    },_reservationReady: function(reservationEvent) {
        var reservation = reservationEvent.data;
        launcher._triggerEvent("reservation.ready", reservation);
    },joinReservation: function(reservation) {
        var options = launcher._retrieveJoinOptions(reservation.game, reservation.personaId, reservation.gameId);
        launcher._updateCurrentState(reservation.game, launcher.STATE.CONNECT_TO_GAMEID, launcher.STATE.READY, reservation.personaId);
        launcher._claimReservation(reservation, options);
        launcher._deleteJoinOptions(reservation.game, reservation.personaId, reservation.gameId);
    },cancelReservation: function(reservation, callback) {
        var url = "/" + base.gameToSection(reservation.game) + "/launcher/mpleavegameserver/" + reservation.personaId + "/" + reservation.gameId;
        var ajaxOptions = {url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},success: function(response) {
                launcher.debug("Successfully canceled reservation");
                callback(true);
            },error: function(jqXHR, textStatus, errorThrown) {
                launcher.debug("Error when canceling reservation: " + jqXHR.responseText);
                callback(false);
            }};
        launcher._ajaxHelper(reservation.game, ajaxOptions);
    },createPrivateCoOpServer: function(persona, game, level, difficulty) {
        var startLevel = "Levels/" + level + "/" + level;
        S.debug("Create CoOp with persona: ");
        S.debug(persona);
        S.debug("Game " + game + ", level: " + startLevel + ", difficulty: " + difficulty);
        launcher._changeGameToState(persona, game, gameTypes.COOP, launcher.STATE.CREATE_COOP_PEER, {level: startLevel,difficulty: difficulty});
    },joinPrivateCoOpServer: function(persona, game, hostPersonaId) {
        S.debug("join CoOp with persona: ");
        S.debug(persona);
        S.debug("Game " + game + ", hostPersonaId: " + hostPersonaId);
        launcher._changeGameToState(persona, game, gameTypes.COOP, launcher.STATE.CONNECT_TO_USERID, {friendPersonaId: hostPersonaId});
    },startPublicCoOpMatchmaking: function(persona, game, matchmakeRules) {
        var options = matchmakeRules;
        var url = "/" + base.gameToSection(game) + "/coop/unlockedmissions/" + persona.personaId;
        var ajaxOptions = {url: url,dataType: "json",success: function(response) {
                var missionInfo = response.data;
                options = jQuery.extend(options, {"unlockedmissions": missionInfo.unlockedMissions});
                launcher._changeGameToState(persona, game, gameTypes.COOP, launcher.STATE.MATCHMAKE_COOP, options);
            },error: function(jqXHR, textStatus, errorThrown) {
                var errorResponse = S.parseJSON(jqXHR.responseText);
                switch (errorResponse.message) {
                }
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },startMpMatchmaking: function(persona, game, matchmakeRules, groupPersonaIdList, callback) {
        launcher._updateCurrentState(game, launcher.STATE.MATCHMAKING, launcher.STATE.READY, persona.personaId);
        launcher._getPingSiteLatency(game, function(pingSiteLatency) {
            var url = "/" + base.gameToSection(game) + "/launcher/mpstartmatchmaking/" + persona.personaId;
            var matchmakeRulesExtended = jQuery.extend({gameModes: null,gamePresets: null,maps: null,gameExpansions: null,groupPersonaIdList: null}, matchmakeRules, {groupPersonaIdList: groupPersonaIdList}, {pingSiteLatency: pingSiteLatency});
            matchmakeRulesExtended = jQuery.extend({"post-check-sum": S.globalContext.session.postChecksum}, matchmakeRulesExtended);
            var ajaxOptions = {url: url,dataType: "json",type: "POST",data: S.encodeJSON(matchmakeRulesExtended),contentType: "application/json;charset=utf-8",success: function(response) {
                    var matchmakingInProgress = response.data;
                    launcher.debug(matchmakingInProgress);
                    callback(matchmakingInProgress.matchmakingSessionId);
                },error: function(jqXHR, textStatus, errorThrown) {
                    var errorResponse = S.parseJSON(jqXHR.responseText);
                    launcher.debug(errorResponse.data);
                    switch (errorResponse.message) {
                        case "MATCHMAKING_REQUIRED_FILTER_MISSING":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_MATCHMAKE.REQUIRED_FILTER_MISSING]);
                            break;
                        case "MATCHMAKING_MAX_REQUESTS":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_MATCHMAKE.MAX_REQUESTS]);
                            break;
                        case "LAUNCH_DISABLED":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LAUNCH_DISABLED]);
                            break;
                        case "WRONG_USER":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LOGIN_PERSONA]);
                            break;
                        case "BACKEND_HTTP":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_BACKEND_HTTP]);
                            break;
                        case "FAILED_PERSONACALL":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_FAILED_PERSONACALL]);
                            break;
                        case "BACKEND_ROUTE":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_BACKEND_ROUTE]);
                            break;
                        case "BACKEND":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.BACKEND]);
                            break;
                        case "UNKNOWN":
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.UNKNOWN]);
                            break;
                        default:
                            launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.DEFAULT]);
                            break;
                    }
                },complete: null};
            launcher._ajaxHelper(game, ajaxOptions);
        });
    },cancelMpMatchmaking: function(persona, game, matchmakingSessionId, callback) {
        var url = "/" + base.gameToSection(game) + "/launcher/mpcancelmatchmaking/" + persona.personaId + "/" + matchmakingSessionId;
        var ajaxOptions = {url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},success: function(response) {
                callback(true);
            },error: function(jqXHR, textStatus, errorThrown) {
                var errorResponse = S.parseJSON(jqXHR.responseText);
                launcher.debug(errorResponse.data);
                switch (errorResponse.message) {
                    case "WRONG_USER":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_LOGIN_PERSONA]);
                        break;
                    case "BACKEND":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.BACKEND]);
                        break;
                    case "UNKNOWN":
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.UNKNOWN]);
                        break;
                    default:
                        launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.DEFAULT]);
                        break;
                }
                callback(false);
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },_matchmakeSuccessful: function(reservationEvent) {
        gamemanager.resetQuickMatchPoll();
        launcher._triggerEvent("matchmake.success", reservationEvent.data);
        launcher._reservationReady(reservationEvent);
    },_matchmakeFail: function(reservationFailEvent) {
        gamemanager.resetQuickMatchPoll();
        var reservationFail = reservationFailEvent.data;
        switch (reservationFail.reason) {
            case launcher.ALERT.ERR_MATCHMAKE.SESSION_TIMED_OUT:
                launcher._triggerEvent("error.generic", [reservationFail.game, reservationFail.personaId, reservationFail.reason]);
                break;
            case launcher.ALERT.ERR_MATCHMAKE.SESSION_CANCELED:
                launcher._updateCurrentState(reservationFail.game, launcher.STATE.GAMEISGONE, launcher.STATE.NA, reservationFail.personaId);
                break;
            case launcher.ALERT.ERR_MATCHMAKE.START_MATCHMAKING_FAILED:
                launcher._triggerEvent("error.generic", [reservationFail.game, reservationFail.personaId, reservationFail.reason]);
                break;
            default:
                S.warn("Unknown matchmaking error: " + reservationFail.reason);
        }
        launcher._triggerEvent("matchmake.fail", reservationFail);
    },launchCampaignMenu: function(persona, game) {
        launcher._changeGameToState(persona, game, gameTypes.SP, launcher.STATE.RESUME_CAMPAIGN, {});
    },leaveQueue: function(persona, game, gameId) {
        if (game == games.BFBC2) {
            launcher._changeGameToState(persona, game, gameTypes.MP, launcher.STATE.MENU_READY, {});
        } else {
            var url = "/" + base.gameToSection(game) + "/launcher/mpleavegameserver/" + persona.personaId + "/" + gameId;
            var ajaxOptions = {url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},success: function(response) {
                    launcher._updateCurrentState(game, launcher.STATE.GAMEISGONE, launcher.STATE.NA, persona.personaId);
                },error: function(jqXHR, textStatus, errorThrown) {
                    var errorResponse = S.parseJSON(jqXHR.responseText);
                    launcher.debug(errorResponse.data);
                    switch (errorResponse.message) {
                        case "INVALID_GAME_ID":
                            launcher._triggerEvent("error.generic", [game, persona.personaId, launcher.ALERT.ERR_PARAM_INVALIDGAMEID, launcher.ALERT.ERR_PLAYER_ACTION.LEAVING]);
                            break;
                        case "PLAYER_NOT_FOUND":
                            launcher._triggerEvent("error.generic", [game, persona.personaId, launcher.ALERT.ERR_PARAM_INVALIDUSERID, launcher.ALERT.ERR_PLAYER_ACTION.LEAVING]);
                            break;
                        case "WRONG_USER":
                            launcher._triggerEvent("error.generic", [game, persona.personaId, launcher.ALERT.ERR_LOGIN_PERSONA]);
                            break;
                        case "BACKEND":
                            launcher._triggerEvent("warning.generic", [game, persona.personaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.BACKEND]);
                            break;
                        case "UNKNOWN":
                            launcher._triggerEvent("warning.generic", [game, persona.personaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.UNKNOWN]);
                            break;
                        default:
                            launcher._triggerEvent("warning.generic", [game, persona.personaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.DEFAULT]);
                            break;
                    }
                }};
            launcher._ajaxHelper(game, ajaxOptions);
        }
    },checkForPatchAvailable: function(game, gameType, patchingDoneCallback) {
        launcher._getInstalledGameVersion(game, function(installState, installedGameBuild, sku) {
            if (installState != launcher.INSTALL_STATE.OK) {
                if (installState == launcher.INSTALL_STATE.ERR_NO_VERSION_FOUND) {
                    patchingDoneCallback(game, true);
                } else {
                    launcher._triggerEvent("error.patcher", [game, installState, sku, gameType]);
                    patchingDoneCallback(game, false);
                }
                return;
            }
            launcher._getLatestGameVersion(game, sku, function(installState, latestGameBuild) {
                if (installState != launcher.INSTALL_STATE.OK) {
                    launcher._triggerEvent("error.patcher", [game, installState, sku, gameType]);
                    patchingDoneCallback(game, false);
                    return;
                }
                var gameUpToDate = false;
                var installedGameBuildInt = parseInt(installedGameBuild);
                var latestGameBuildInt = parseInt(latestGameBuild);
                if (!isNaN(installedGameBuildInt) && !isNaN(latestGameBuildInt)) {
                    gameUpToDate = (installedGameBuildInt >= latestGameBuildInt);
                } else {
                    gameUpToDate = (installedGameBuild === latestGameBuild);
                }
                patchingDoneCallback(game, gameUpToDate);
                if (!gameUpToDate) {
                    var skuPatchInfo = {"build": latestGameBuild};
                    launcher._triggerEvent("error.patcher", [game, launcher.INSTALL_STATE.OUT_OF_DATE, sku, gameType, skuPatchInfo]);
                }
            });
        });
    },_getGameAttribute: function(game, attributeName, callback) {
        launcher.isGameInstalled(game, function(installed) {
            if (!installed) {
                callback("");
                return;
            }
            var obj = launcher.getInstance();
            callback(obj.getParameter(launcher._gameToPluginGame(game), attributeName));
        });
    },registerForEvent: function(event, callback) {
        jQuery("#esnlaunch_container").bind("bf.launcher." + event, callback);
    },unregisterForEvent: function(event, callback) {
        jQuery("#esnlaunch_container").unbind("bf.launcher." + event, callback);
    },_triggerEvent: function(event, data) {
        jQuery("#esnlaunch_container").triggerHandler("bf.launcher." + event, data);
    },_getInstalledGameVersion: function(game, callback) {
        launcher.isGameInstalled(game, function(installed) {
            if (!installed) {
                callback(launcher.INSTALL_STATE.ERR_GAME_NOT_FOUND);
            }
            var obj = launcher.getInstance();
            if (game != games.BFBC2) {
                try {
                    var version = S.parseJSON(obj.getVersion(launcher._gameToPluginGame(game)));
                    callback(launcher.INSTALL_STATE.OK, version.build, version.sku);
                } catch (e) {
                    S.warn("Failed to read local game version JSON: " + e);
                    callback(launcher.INSTALL_STATE.ERR_VERSION_UNREADABLE);
                }
            } else {
                var installationDataXmlString = obj.getParameter(launcher._gameToPluginGame(game), "INSTALLATION_DATA");
                if (installationDataXmlString == null || installationDataXmlString == "") {
                    callback(launcher.INSTALL_STATE.ERR_NO_VERSION_FOUND);
                    return;
                }
                var currentVersion = installationDataXmlString.match(/(?:CurrentVersion>)(\d+)(?:<\/CurrentVersion)/gi)[0].match(/\d+/)[0];
                callback(launcher.INSTALL_STATE.OK, currentVersion, "dice");
            }
        });
    },isPatcherInstalled: function(sku, callback) {
        if (!(sku.toUpperCase() in pluginSkus)) {
            launcher.debug("isPatcherInstalled: Unknown sku:" + sku + ", returning false");
            return callback(false);
        }
        var obj = launcher.getInstance();
        if (!obj) {
            launcher.debug("isPatcherInstalled: No plugin instance, returning false");
            return callback(false);
        }
        var pluginSku = pluginSkus[sku.toUpperCase()];
        var installed = obj.probe(pluginSku);
        launcher.debug("isPatcherInstalled: Probe result " + installed);
        callback(installed);
    },showInPatcher: function(game, sku, callback) {
        launcher.isPatcherInstalled(sku, function(installed) {
            if (installed) {
                var obj = launcher.getInstance("showInSku");
                switch (game) {
                    case games.BF3:
                        switch (sku) {
                            case "origin":
                                var launched = obj.launch(false, false, pluginSkus[sku.toUpperCase()], "library/70619", "", "", "", "");
                                return callback(launched);
                        }
                        break;
                        break;
                }
            }
            return callback(false);
        });
    },isGameInstalled: function(game, callback) {
        var obj = launcher.getInstance();
        if (!obj) {
            launcher.debug("isGameInstalled: No plugin instance, returning false");
            callback(false);
            return;
        }
        launcher.debug("isGameInstalled: Loading settings for " + game);
        launcher._getGameSettings(game, function(userSettings) {
            var params = userSettings["pluginParameters"] || {};
            var pluginGame = launcher._gameToPluginGame(game);
            jQuery.each(params, function(key, value) {
                launcher.debug("Settings " + key + " to " + value);
                obj.setParameter(pluginGame, key, value);
            });
            var installed = obj.probe(pluginGame);
            launcher.debug("isGameInstalled: Probe result " + installed);
            callback(installed);
        });
    },isGameRunning: function(game, callback) {
        launcher.isGameInstalled(game, function(installed) {
            if (!installed) {
                callback(false);
                return;
            }
            var obj = launcher.getInstance("isGameRunning");
            var running = obj.isGameRunning(launcher._gameToPluginGame(game));
            callback(running);
        });
    },getGamesInstalled: function() {
        var installed = [];
        var gameList = [games.BF3];
        jQuery.each(gameList, function(index, game) {
            launcher.isGameInstalled(game, function(gameInstalled) {
                if (gameInstalled) {
                    installed.push(game);
                }
            });
        });
        return installed;
    },getGamesRunning: function() {
        var running = {};
        var obj = launcher.getInstance("getGamesRunning");
        jQuery.each(launcher.getGamesInstalled(), function(index, game) {
            running[game] = obj.isGameRunning(launcher._gameToPluginGame(game));
        });
        return running;
    },_changeGameToState: function(persona, game, gameType, requestedState, args) {
        if (game == undefined) {
            launcher.debug("Game undefined");
            return;
        }
        var veniceRunning = false;
        var gameRunningList = launcher.getGamesRunning();
        jQuery.each(gameRunningList, function(gameRunning, isRunning) {
            if (gameRunning == games.BF3) {
                veniceRunning = isRunning;
            }
            if ((gameRunning != game) && (isRunning === true)) {
                launcher._triggerEvent("error.anotherGameRunning", [game, gameRunning]);
                launcher.debug("Want to run: " + game + ", other game running:" + gameRunning);
                return;
            }
        });
        if (launcher.currentState == launcher.STATE.ERROR || veniceRunning) {
            launcher._killGame(game, 0, function(gameKilled) {
                if (gameKilled) {
                    launcher._doChangeGameToState(persona, game, gameType, requestedState, args);
                } else {
                    launcher._triggerEvent("error.gameNeedsManualKill", game);
                    launcher.debug("Game in state error, couldn't kill");
                }
            });
        } else {
            launcher._doChangeGameToState(persona, game, gameType, requestedState, args);
        }
    },_doChangeGameToState: function(persona, game, gameType, requestedState, args) {
        launcher.debug("Requesting state change: " + requestedState);
        var currentLauncherGame = launcher._gameToPluginGame(game);
        var success = false;
        launcher.isGameInstalled(game, function(installed) {
            if (!installed) {
                launcher._triggerEvent("error.gameNotInstalled", game);
                return;
            }
            var additionalArgs = {};
            if (game == games.BFBC2) {
                additionalArgs["personaRef"] = launcher._escapePersonaName(persona.personaName);
            } else {
                additionalArgs["personaRef"] = persona.personaId;
            }
            switch (gameType) {
                case gameTypes.SP:
                    additionalArgs["levelMode"] = "sp";
                    break;
                case gameTypes.COOP:
                    additionalArgs["levelMode"] = "coop";
                    break;
                case gameTypes.MP:
                    additionalArgs["levelMode"] = "mp";
                    break;
                default:
                    S.warn("Trying to launch unknown gameType: " + gameType);
            }
            var requestStateParams = jQuery("<data></data>");
            var snowrollerParams = jQuery.extend({}, args, additionalArgs);
            jQuery.each(snowrollerParams, function(key, value) {
                if (value != null && value != undefined && (typeof value != "string" || (typeof value == "string" && value.length > 0))) {
                    requestStateParams.attr(key.toLowerCase(), value);
                }
            });
            jQuery("body").append('<div id="launcher-build-data" style="display:none;"></div>');
            var buildDataNode = jQuery("#launcher-build-data");
            var requestStateParamsXml = buildDataNode.html(requestStateParams).html();
            buildDataNode.remove();
            var obj = launcher.getInstance("doChangeGameToState");
            if (!obj.isGameRunning(currentLauncherGame)) {
                launcher.debug("Game is not running, looking up cmdline for launching in state: " + requestedState);
                launcher._getCommandLine(game, gameType, function(cmdline) {
                    launcher._getToken(game, function(token) {
                        cmdline += " -loginToken " + token;
                        cmdline += " -requestState " + requestedState;
                        requestStateParamsXml = requestStateParamsXml.replace(/"/g, '\\"');
                        cmdline += ' -requestStateParams "' + requestStateParamsXml + '"';
                        launcher.debug("Commandline: " + cmdline);
                        success = obj.launch(false, false, currentLauncherGame, cmdline, "", "", "", "");
                        launcher._updateCurrentState(game, launcher.STATE.PENDING, launcher.STATE.READY, persona.personaId);
                        if (!success) {
                            launcher._triggerEvent("error.gameNotLaunched", [game, persona.personaId]);
                        }
                    });
                });
            } else {
                var snowrollerCommand = requestedState + " " + requestStateParamsXml;
                launcher.debug("Requesting state: " + snowrollerCommand);
                success = obj.cmd(currentLauncherGame, "RequestState", snowrollerCommand, "", "");
                if (!success) {
                    launcher._triggerEvent("error.gameNotResponding", [game, persona.personaId]);
                }
            }
        });
        launcher.debug("Launch Success: " + success);
    },_eventHandler: function(pluginGame, cmd, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) {
        if (typeof (launcher) == "undefined") {
            return;
        }
        if (cmd != "PingBatchResult") {
            launcher.debug("Callback from plugin/game (" + pluginGame + "): " + cmd + " [" + arg0 + "][" + arg1 + "][" + arg2 + "][" + arg3 + "]");
        }
        var game = 0;
        if (pluginGame != "") {
            game = launcher._pluginGameToGame(pluginGame);
        }
        switch (cmd) {
            case "StateChanged":
                launcher._updateCurrentState(game, arg0, arg1, arg2, arg3, arg4);
                break;
            case "GameWaiting":
                var personaId = launcher.currentStatePersonaId;
                if (parseInt(arg0) > 0) {
                    personaId = arg0;
                }
                launcher._triggerEvent("gameReadyToPlay", [game, personaId]);
                break;
            case "Alert":
                launcher._handleAlert(game, arg0, arg1);
                break;
            case "ServerQueue":
                launcher._serverQueueUpdate(game, launcher.currentStatePersonaId, parseInt(arg0) + 1);
                break;
            case "QueryServerResult":
                launcher._triggerEvent("queryResult", [arg0, arg1]);
                break;
            case "PingBatchResult":
                if (arg0 == "LOG_INSTEAD_OF_CALLBACK") {
                    S.log("PING RESULT: " + arg1);
                } else {
                    var pingIdList = arg0.split(";");
                    var pingInfoList = S.parseJSON(arg1);
                    var pingIdHash = {};
                    jQuery.each(pingIdList, function(index, pingId) {
                        pingIdHash[pingId] = pingInfoList[index];
                    });
                    launcher._pingResults(pingIdHash);
                }
                break;
            case "LogPrint":
                launcher.debug("Game (" + game + ") LogPrint: " + arg0);
                break;
            default:
                launcher.debug("Unknown state change: " + cmd);
                break;
        }
    },_updateCurrentState: function(game, newCurrentState, newTargetState, personaId, levelName, difficulty) {
        S.debug("CurrentState: " + newCurrentState + ", targetState: " + newTargetState);
        var statePrettyName = newCurrentState;
        switch (newCurrentState) {
            case launcher.STATE.GAME_LOADING:
                if (S.globalContext.staticContext.useLaunchTimer != undefined && S.globalContext.staticContext.useLaunchTimer) {
                    setTimeout(function() {
                        launcher._triggerEvent("gameReadyToPlay", [game, personaId]);
                    }, 13337);
                }
                break;
            case launcher.STATE.GAMEISGONE:
                launcher._triggerEvent("gameIsGone", game);
                break;
            case launcher.STATE.MATCHMAKE_RESULT_HOST:
            case launcher.STATE.MATCHMAKE_RESULT_JOIN:
                var isHost = (launcher.STATE.MATCHMAKE_RESULT_HOST == newCurrentState);
                launcher._triggerEvent("coop.public.ready", [game, personaId, {"levelName": levelName,"difficulty": difficulty,"isHost": isHost}]);
                break;
        }
        if (launcher.currentState == launcher.STATE.IN_QUEUE && newCurrentState != launcher.STATE.IN_QUEUE) {
            launcher._triggerEvent("leftServerQueue", [game, personaId]);
        }
        launcher._triggerEvent("gameStatus", [game, newCurrentState, personaId]);
        launcher.currentState = newCurrentState;
        launcher.currentStatePersonaId = personaId;
        launcher.targetState = newTargetState;
    },checkVersion: function() {
        var result = launcher.getInstance();
        if (!result) {
            return false;
        }
        result = launcher.getInstance().getAPIVersion();
        if (result != launcher.getExpectedVersion()) {
            launcher.debug("Plugin wrong version (" + result + ") expected (" + launcher.getExpectedVersion() + ")");
            return false;
        }
        launcher.debug("Plugin up to date, version " + result);
        return true;
    },_getGameSettings: function(game, callback) {
        if (game in launcher.userSettings) {
            return callback(launcher.userSettings[game]);
        }
        var gameSettings = jQuery.jStorage.get("gamesettings_" + game, null);
        if (gameSettings != null) {
            launcher.userSettings[game] = gameSettings;
            return callback(launcher.userSettings[game]);
        }
        var url = "/" + base.gameToSection(game) + "/launcher/settings/";
        var ajaxOptions = {url: url,dataType: "json",success: function(response) {
                launcher.userSettings[game] = response.data;
                jQuery.jStorage.set("gamesettings_" + game, response.data);
                return callback(launcher.userSettings[game]);
            },error: function() {
                launcher.debug("No gamesettings returned");
                return callback({});
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },_invalidateGameSetting: function(game) {
        jQuery.jStorage.deleteKey("gamesettings_" + game);
        if (game in launcher.userSettings) {
            delete launcher.userSettings[game];
        }
    },_getCommandLine: function(game, gameType, callback) {
        launcher._getGameSettings(game, function(gameSettings) {
            if ("commandLine" in gameSettings) {
                callback(gameSettings["commandLine"][gameType] || "");
            } else {
                launcher.debug("Commandline settings missing for game:" + game);
                return "";
            }
        });
    },_getPingSiteLatency: function(game, callback) {
        if (game in launcher.pingSiteLatency) {
            return callback(launcher.pingSiteLatency[game]);
        }
        var pingSiteLatency = jQuery.jStorage.get("pingsitelatency_" + game, null);
        if (pingSiteLatency != null) {
            launcher.pingSiteLatency[game] = pingSiteLatency;
            return callback(pingSiteLatency);
        }
        launcher._getGameSettings(game, function(gameSettings) {
            var pingSiteMap = gameSettings["pingSiteMap"];
            if (pingSiteMap == undefined || pingSiteMap == null) {
                S.error("Missing ping site configuration for game: " + game);
                launcher._invalidateGameSetting(game);
                return launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_NO_PINGSITE_LIST]);
            }
            var pingSiteMapCount = 0;
            jQuery.each(pingSiteMap, function(k, v) {
                pingSiteMapCount++;
            });
            var retryCount = 0;
            var pingSiteLatencyCount = 0;
            var pingSiteLatency = {};
            var pingResult = function(event, serverLatencys) {
                $.each(serverLatencys, function(serverId, serverLatency) {
                    if (serverLatency >= 0) {
                        pingSiteLatencyCount++;
                        pingSiteLatency[serverId] = serverLatency;
                    }
                });
                retryCount++;
                if (retryCount < 5 && pingSiteLatencyCount < pingSiteMapCount) {
                    return;
                }
                launcher.unregisterForEvent("pingResult", pingResult);
                if (jQuery.isEmptyObject(pingSiteLatency)) {
                    launcher._triggerEvent("warning.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_PING_PINGSITES]);
                }
                launcher.pingSiteLatency[game] = pingSiteLatency;
                jQuery.jStorage.set("pingsitelatency_" + game, pingSiteLatency);
                return callback(pingSiteLatency);
            };
            launcher.registerForEvent("pingResult", pingResult);
            launcher.pingServers(pingSiteMap);
        });
    },_getToken: function(game, callback) {
        var url = "";
        if (S.globalContext.staticContext.sslAvailable) {
            url += S.globalContext.staticContext.currentHostSecure;
        } else {
            url += S.globalContext.staticContext.currentHost;
        }
        url += "/" + base.gameToSection(game) + "/launcher/token/";
        var ajaxOptions = {url: url,dataType: "jsonp",success: function(response) {
                callback(response.data);
            },error: function(XMLHttpRequest, textStatus, errorThrown) {
                launcher.debug("No game token returned, status: " + XMLHttpRequest.statusText);
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },_gameToPluginGame: function(game) {
        switch (+game) {
            case games.BFBC2:
                return pluginGames.ROME;
                break;
            case games.BF3:
                return pluginGames.VENICE;
                break;
            default:
                launcher.debug("Unknown game to convert plugin game: " + game);
        }
    },_pluginGameToGame: function(pluginGame) {
        switch (pluginGame) {
            case pluginGames.ROME:
                return games.BFBC2;
            case pluginGames.VENICE:
                return games.BF3;
            default:
                launcher.debug("Unknown plugin game to convert game: " + pluginGame);
        }
    },restoreWindow: function(game) {
        launcher.debug("Restoring window for game: " + game);
        var obj = launcher.getInstance("restoreWindow");
        var success = obj.cmd(launcher._gameToPluginGame(game), "RestoreWindow", "", "", "");
        launcher.debug("Restore window result: " + success);
    },_killGame: function(game, count, callback) {
        if (count > 10) {
            return callback(false);
        }
        launcher.isGameRunning(game, function(isRunning) {
            launcher.debug("Killing game: " + game + ", try #" + count);
            if (launcher.wasPreviouslyRunning[game] === true && !isRunning) {
                launcher.wasPreviouslyRunning[game] = false;
                return callback(true);
            }
            launcher.wasPreviouslyRunning[game] = isRunning;
            var obj = launcher.getInstance("killGame");
            var success = obj.cmd(launcher._gameToPluginGame(game), "KillGame", "", "", "");
            launcher.debug("Kill game result: " + success);
            launcher.killGameTimeout = setTimeout(function() {
                if (success) {
                    callback(success);
                } else {
                    count++;
                    launcher._killGame(game, count, callback);
                }
            }, 1000);
        });
    },_handleAlert: function(game, alertType, errorCode) {
        launcher.debug("Handling alert: " + alertType + " error code: " + errorCode);
        switch (alertType) {
            case launcher.ALERT.ERR_PARAM_MISSINGTOKEN:
                launcher.debug("Faulty auth token sent to game client");
                break;
            case launcher.ALERT.ERR_MATCHMAKE_FAILED:
                launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_MATCHMAKE.SESSION_TIMED_OUT]);
                break;
            case launcher.ALERT.ERR_PARAM_MISSINGPERSONA:
                launcher._triggerEvent("warning.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_PARAM_MISSINGPERSONA]);
                break;
            default:
                launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, alertType, errorCode]);
        }
    },_serverQueueUpdate: function(game, personaId, queuePosition) {
        launcher.debug("Handling game: " + game + ", server queue update for persona: " + personaId);
        if (launcher.currentState != launcher.STATE.IN_QUEUE) {
            launcher.debug("Game not in queue state, event ignored");
            return;
        }
        launcher._triggerEvent("serverQueuePosition", [game, personaId, queuePosition]);
    },_escapePersonaName: function(personaName) {
        return personaName.replace(/\s/g, "");
    },_getLatestGameVersion: function(game, sku, callback) {
        if (game in launcher.latestGameVersions) {
            return callback(launcher.INSTALL_STATE.OK, launcher.latestGameVersions[game]);
        }
        var latestGameVersion = jQuery.jStorage.get("latestgameversion_" + game, null);
        if (latestGameVersion != null) {
            launcher.latestGameVersions[game] = latestGameVersion;
            return callback(launcher.INSTALL_STATE.OK, latestGameVersion);
        }
        var url = "/" + base.gameToSection(game) + "/launcher/latestgameversion/" + sku;
        ajaxOptions = {url: url,dataType: "json",success: function(response) {
                launcher.latestGameVersions[game] = response.data;
                jQuery.jStorage.set("latestgameversion_" + game, response.data);
                callback(launcher.INSTALL_STATE.OK, response.data);
            },error: function() {
                callback(launcher.INSTALL_STATE.ERR_VERSION_UNREADABLE);
            }};
        launcher._ajaxHelper(game, ajaxOptions);
    },_ajaxHelper: function(game, ajaxOptions) {
        var oldErrorCallback = null;
        if ("error" in ajaxOptions) {
            oldErrorCallback = ajaxOptions.error;
        }
        ajaxOptions.error = function(jqXHR, textStatus, errorThrown) {
            switch (jqXHR.status) {
                case 302:
                case 401:
                    window.location.href = window.location.href;
                    return base.showReceipt(S.translations["ID_WEB_SHOWRECEIPT_SESSION_EXPIRED"], receiptTypes.ERROR);
                case 500:
                    return launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.INTERNAL_SERVER_ERROR]);
                case 503:
                    return launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.SERVICE_UNAVAILABLE]);
                case 422:
                case 200:
                    break;
                default:
                    return launcher._triggerEvent("error.generic", [game, launcher.currentStatePersonaId, launcher.ALERT.ERR_GENERIC, launcher.ALERT.ERR_GENERIC_ERROR_CODE.AJAX_ERROR]);
            }
            if (oldErrorCallback != null) {
                oldErrorCallback(jqXHR, textStatus, errorThrown);
            }
        };
        ajaxOptions.complete = null;
        jQuery.ajax(ajaxOptions);
    },getInstance: function() {
        var isNPAPI = navigator.appName == "Opera" || navigator.appName == "Netscape";
        var isActiveX = navigator.appName == "Microsoft Internet Explorer";
        if (launcher.instance != null) {
            launcher.instance.setEventHandler("BOGUS", launcher._eventHandler);
            return launcher.instance;
        }
        var foundPlugin = false;
        if (isNPAPI) {
            navigator.plugins.refresh();
            for (var i in navigator.plugins) {
                if (navigator.plugins[i]) {
                    var plugin = navigator.plugins[i];
                    if (plugin.filename && plugin.filename.indexOf("npesnlaunch") != -1 && plugin.description == launcher.getExpectedVersion()) {
                        foundPlugin = true;
                    }
                }
            }
        } else {
            if (isActiveX) {
                foundPlugin = true;
            }
        }
        if (!foundPlugin) {
            launcher.debug("Did not find plugin...");
            return false;
        }
        var esnlaunchContainer = document.getElementById("esnlaunch_container");
        if (isNPAPI) {
            esnlaunchContainer.innerHTML = '<embed height="1" width="1" type="application/mozilla-plugin-esn-launch-' + launcher.getExpectedVersion() + '" pluginspage="/public/download/esnlaunch-browser-plugins-install_' + launcher.getExpectedVersion() + '.exe" id="esnlaunch">';
        } else {
            if (isActiveX) {
                esnlaunchContainer.innerHTML = '<object height="1" width="1" id="esnlaunch" classid="CLSID:7AEFE841-DCA1-4A95-80CB-BE935D' + launcher.getExpectedVersionHex() + '" type="application/x-oleobject"></object>';
            }
        }
        var obj = document.getElementById("esnlaunch");
        if (obj == null || typeof (obj.getAPIVersion) == "unknown" || typeof (obj.getAPIVersion) == "undefined") {
            return false;
        }
        launcher.debug("SETTING UP EVENTHANDLER IN GAME LAUNCHER");
        obj.setEventHandler("BOGUS", launcher._eventHandler);
        launcher.instance = obj;
        return obj;
    },debug: function(msg) {
        S.debug(msg);
    }};
function myAudioCallback(event) {
    try {
        settings.gotAudio(event);
    } catch (e) {
    }
}
function myCallback(event) {
    try {
        ESN.Sonar.debug("CUSTOM response for event: " + event.name + " with args:");
        ESN.Sonar.debug(event);
    } catch (e) {
    }
    var arguments = event;
    switch (event.name) {
        case "capturemode":
            if ($(".voice-setting-mode-area").length) {
                settings.setCaptureMode(arguments.mode);
                comcenter.setCaptureMode(arguments.mode);
            }
            break;
        case "audioloopback":
            $(".sonar-audio-checkbox").attr("checked", arguments.enabled);
            break;
        case "error":
            if (arguments.code == "noPluginFound") {
            } else {
                if (arguments.code == "notCorrectVersion") {
                }
            }
            break;
        case "connect":
            comcenter.partyUpdateChannel(S.globalContext.session.user.userId, 1);
            break;
        case "disconnect":
            S.globalContext.userContext.voice = {};
            comcenter.partyUpdateChannel(S.globalContext.session.user.userId, 0);
            setTimeout(function() {
                $S("comcenter-party-voice-icons").refresh();
            }, 500);
            break;
        case "audio":
            try {
                settings.gotAudio(arguments);
            } catch (e) {
            }
            return;
            break;
        case "exit":
            S.globalContext.userContext.voice = {};
            comcenter.partyUpdateChannel(S.globalContext.session.user.userId, 0);
            ESN.Sonar.client = null;
            break;
        case "capturevolume":
            if ($(".voice-volume-slider").length) {
                var volume = parseInt(parseFloat(arguments.volume) * 100);
                $("#voice-volume-slider").slider("value", volume);
            }
            break;
        case "channeluserjoin":
        case "channeluserpart":
            break;
        case "disconnect":
        case "channelpart":
            break;
        case "capturemute":
            sonarui.setMicMute(arguments.muted);
            break;
        case "playbackmute":
            sonarui.setSpeakersMute(arguments.muted);
            break;
        case "channelusermute":
        case "channelusertalk":
            comcenter.partyUserSpeaking(event.userId, event.talking, event.muted);
            break;
        case "hotkey":
            comcenter.updatePPTkey();
            break;
        case "blockingkey":
            if ($("#settings-voice-toggle-block").length) {
                $("#settings-voice-toggle-block").attr("checked", event.blocked);
            }
            break;
    }
}
var admin = {onPageShow: function() {
    },init: function(template) {
        $("#admin-header-bottom-bar > ul > li > a").pageBind("click", function(e) {
            if (!$(this).parent("li").hasClass("nochildren")) {
                admin.menuToggle(e, this);
            }
        });
        $("#admin-header-bottom-bar > ul > li  ul li  a").pageBind("click", function(e) {
            if ($(this).parent("li").hasClass("hasmore")) {
                admin.menuToggle(e, this);
            }
        });
    },menuToggle: function(e, obj) {
        e.preventDefault();
        $(obj).parent("li").toggleClass("active").siblings().toggleClass("active").children("div").hide();
        $(obj).siblings("div").show();
        if ($("#admin-header-bottom-bar > ul > li.active").length == 0) {
            admin.cancelMenu();
        } else {
            admin.activateMenuCancelling();
        }
    },activateMenuCancelling: function() {
        $("#admin-header-bottom-bar ul li a").mouseout(function() {
            $(document).click(function() {
                admin.cancelMenu();
            });
        }).mouseover(function() {
            $(document).unbind("click");
        });
    },cancelMenu: function() {
        $("#admin-header-bottom-bar ul li a").unbind("mouseover").unbind("mouseout");
        $(document).unbind("click");
        $("#admin-header-bottom-bar ul li.active").removeClass("active");
    }};
var adminapiaccess = {onComponentReady: function() {
    },onDomReady: function() {
        $("#apiaccess-selectall").pageBind("click", function(e) {
            $("#apiaccess-invitations").find("input[type=checkbox]").attr("checked", 1);
            return false;
        });
        $("#apiaccess-selectnone").pageBind("click", function(e) {
            $("#apiaccess-invitations").find("input[type=checkbox]").attr("checked", 0);
            return false;
        });
        $("#apiaccess-selectamount").pageBind("click", function(e) {
            var amount = $("#apiaccess-selectamounttxt").val();
            var checkedUsers = 0;
            $("#apiaccess-invitations").find("input[type=checkbox]").attr("checked", 0);
            $("#apiaccess-invitations").find("input[type=checkbox]").each(function() {
                if (checkedUsers >= amount) {
                    return false;
                }
                checkedUsers++;
                $(this).attr("checked", 1);
            });
            return false;
        });
    }};
var adminbetakeys = {init: function(template) {
    },onPageShow: function() {
        $("#userbeta-selectall").pageBind("click", function(e) {
            $("#beta-invitations").find("input[type=checkbox]").attr("checked", 1);
            return false;
        });
        $("#userbeta-selectnone").pageBind("click", function(e) {
            $("#beta-invitations").find("input[type=checkbox]").attr("checked", 0);
            return false;
        });
        $("#userbeta-selectamount").pageBind("click", function(e) {
            var amount = $("#userbeta-selectamounttxt").val();
            var checkedUsers = 0;
            $("#beta-invitations").find("input[type=checkbox]").attr("checked", 0);
            $("#beta-invitations").find("input[type=checkbox]").each(function() {
                if (checkedUsers >= amount) {
                    return false;
                }
                checkedUsers++;
                $(this).attr("checked", 1);
            });
            return false;
        });
    }};
var admindevblog = {onPageShow: function() {
        jQuery("#admindevblog-delete").click(function(e) {
            return confirm("Are you sure you want to delete this blog post?");
        });
    },init: function(template) {
        jQuery(".admindevblog-list-post-title").click(function() {
            jQuery(this).siblings(".base-hide").toggle();
        });
        jQuery("#admindevblog-create-tools img").click(function() {
            $this = jQuery(this);
            jQuery("#admindevblog-image-path").append($this.attr("alt") + ":<br /><p><b>[img]" + $this.attr("src") + "[/img]</b></p>").show();
        });
    }};
var adminfilemanager = {onPageShow: function() {
    },init: function(template) {
        jQuery("#adminfilemanager-delete-selected").click(function() {
            var data = jQuery(".adminfilemanager-asset input:checkbox").serialize();
            $.ajax({type: "POST",url: "/api/adminfilemanager/removeAsset",data: data,success: function(msg) {
                    var assets = Surface.parseJSON(msg);
                    for (i = 0; i < assets.length; i++) {
                        jQuery("#adminfilemanager-asset-key-" + assets[i]).remove();
                    }
                }});
        });
    }};
var adminforum = {onPageShow: function() {
    },init: function(template) {
    }};
var adminlog = {init: function() {
    }};
var adminnotice = {init: function() {
    }};
var adminpoll = {init: function(template) {
    },onPageShow: function(template) {
        adminpoll.configureList();
        adminpoll.configureForm();
        jQuery("#adminpoll-delete").click(function(e) {
            return confirm("Are you sure you want to delete this poll?");
        });
    },configureList: function() {
        jQuery(".adminpoll-poll-title").click(function() {
            jQuery(this).siblings(".base-hide").toggle();
        });
    },configureForm: function() {
        var filterSchema = new ksvalidator.FilterSchema({title: new ksvalidator.filters.StringFilter({maxLength: 25,minLength: 1}),description: new ksvalidator.filters.StringFilter({maxLength: 255,minLength: 0}),answers: new ksvalidator.filters.ListFilter(new ksvalidator.filters.StringFilter({maxLength: 25,minLength: 1}))});
        var selectorSchema = new ksvalidator.SelectorSchema({title: new ksvalidator.Selector("#adminpoll-form input[name=title]"),description: new ksvalidator.Selector("#adminpoll-form textarea[name=description]"),answers: new ksvalidator.Selector("#adminpoll-form input.answer")});
        var errorMessages = {title: {"min_length": "Your title is too short","max_length": "Your title is too long"},description: {"min_length": "Your description is too short","max_length": "Your description is too long"},answers: {"min_length": "Your answer is too short","max_length": "Your answer is too long"}};
        var validator = new ksvalidator.Validator(selectorSchema, filterSchema);
        validator.live(function(event) {
            if (!event.element.data("tipsied")) {
                event.element.data("tipsied", true);
                event.element.tipsy({trigger: "manual",gravity: "w"});
            }
            if (!event.success) {
                event.element[0].setAttribute("original-title", errorMessages[event.filter][event.error.name]);
                event.element.tipsy("show");
            } else {
                event.element.tipsy("hide");
            }
        });
        var $form = $("#adminpoll-form");
        $("#adminpoll-form-submit-button").click(function() {
            $form.submit();
        });
        $form.submit(function() {
            return validator.test();
        });
        $("#adminpoll-form-answers a.delete-button").pageLive("click", function() {
            if (confirm("Are you sure you want to remove this answer?")) {
                $(this).closest("li").remove();
            }
        });
        $("#adminpoll-add-answer-field").click(function() {
            var html = $S("adminpoll.answer").render({});
            $("#adminpoll-form-answers").append(html);
        });
    }};
var adminsystemparams = {init: function() {
    }};
var adminuser = {onPageShow: function() {
    },init: function(template) {
    }};
var agegate = {init: function() {
    }};
var apiaccount = {onComponentReady: function() {
    },onDomReady: function() {
    },onPageShow: function() {
        $("#apiaccount-sidebar-apiinfo-keys").pageDelegate("input", "click", function() {
            $(this).select();
        });
        $("#apiaccount-sidebar-apiinfo-keys").pageDelegate(".apiaccount-sidebar-apiinfo-keys-key-regenerate", "click", function(e) {
            e.preventDefault();
            var $this = $(this);
            $.ajax({url: $this.attr("href"),complete: base.onComplete(function(status, response) {
                    if (status) {
                        if (response.type == "success") {
                            $("#apiaccount-sidebar-apiinfo-keys-key-public").val(response.data.publicKey);
                            $("#apiaccount-sidebar-apiinfo-keys-key-secret").val(response.data.secretKey);
                            $("#apiaccount-sidebar-apiinfo-keys-key-url").val($("#apiaccount-sidebar-apiinfo-keys-key-url").attr("data-baseurl") + response.data.publicKey);
                            base.showReceipt(response.message, "checkbox");
                        } else {
                            base.showReceipt(response.message, "skull");
                        }
                    } else {
                        base.showReceipt(S.translations["ID_WEB_SHOWRECEIPT_GENERIC_ERROR"], "skull");
                    }
                }, false)});
            return false;
        });
    }};
var arena = {onPageShow: function() {
    },init: function(template) {
    }};
var authentication = {init: function() {
    }};
var base = {IDLETIMEOUTCHECK: null,idleTimeout: null,staticContext: {},userContext: {},windowFocused: true,showReceipt: function(msg, type, timeout) {
        var timeout = timeout || 5000;
        var type = type || receiptTypes.OK;
        $("#base-receipts").append($S("common.receipt").render({"message": msg,"type": type}));
        setTimeout(function() {
            $("#base-receipts").find(".common-receipt:not(.fadingOut):first").addClass("fadingOut").fadeOut("slow", function() {
                $(this).remove();
            });
        }, timeout);
    },_showSpecificReceipt: function(key) {
        switch (key) {
            case "voice_error":
                base.showReceipt("Could not start voice, try again later.", "skull");
                break;
            case "voice_install":
                base.showReceipt("You need to install the Browser plugin first", "skull");
                break;
        }
    },getSurfacesInElement: function(el) {
        if (el.getElementsByTagName("surf:container").length) {
            return el.getElementsByTagName("surf:container");
        }
        var surfs = el.getElementsByTagName("container");
        if (surfs.length) {
            return surfs;
        }
        return [];
    },initUserSearch: function(form) {
        var searchForm = $(form);
        var searchInput = searchForm.find("input[type=text]");
        var apiUrl = S.globalContext.staticContext.indexTankApi;
        if (apiUrl && searchForm.length > 0) {
            searchForm.indextank_Ize(apiUrl, "username");
            searchInput.indextank_Autocomplete();
        }
    },showMessageBoxFromResponse: function(success, response) {
        if (response && response.type && response.message) {
            UserMessageBox.show(response.message, response.type);
        }
    },redirect: function(url) {
        if (Surface.ajaxNavigation.navigateTo(url)) {
            document.location.href = url;
            return true;
        }
        return false;
    },onComplete: function(f, useDefaultHandler) {
        return function(xmlHttpRequest, textStatus) {
            if (!xmlHttpRequest) {
                return;
            }
            var status = xmlHttpRequest.status;
            var response = null;
            if (status == 422 || status == 200) {
                try {
                    response = S.parseJSON(xmlHttpRequest.responseText);
                } catch (e) {
                    response = xmlHttpRequest.responseText;
                }
            } else {
                if (status == 401) {
                    window.location.href = window.location.href;
                    return base.showReceipt("Your login session has expired.", receiptTypes.ERROR);
                }
            }
            if (f) {
                f(status == 200, response, xmlHttpRequest);
                common.startSpinners();
            }
            if (useDefaultHandler) {
                base.showMessageBoxFromResponse(status == 200, response);
            }
        };
    },platoonInviteAccepted: function(platoonId) {
        base.showReceipt("Platoon invite accepted");
        var invitedPlatoons = $S("base-dropdown-menu-your-invited-platoons").getState().invitedPlatoons;
        for (var i = 0; invitedPlatoons.length; i++) {
            var platoon = invitedPlatoons[i];
            if (platoon.id == platoonId) {
                $S("base-dropdown-menu-your-platoons").insert(platoon);
                break;
            }
        }
        $(".platoon-accept-invite").hide();
        $(".platoon-decline-invite").hide();
        $S("base-dropdown-menu-your-invited-platoons").remove({"id": "" + platoonId});
    },platoonInviteDeclined: function(platoonId) {
        base.showReceipt("Platoon invite declined");
        $(".platoon-accept-invite").hide();
        $(".platoon-decline-invite").hide();
        $S("base-dropdown-menu-your-invited-platoons").remove({"id": "" + platoonId});
    },platoonRequestForumSubmit: function(e) {
        e.preventDefault();
        var form = $(this);
        $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                var platoonId = form.attr("data-platoonId");
                if (response == "MEMBER_ACCEPTED") {
                    base.platoonInviteAccepted(platoonId);
                } else {
                    if (response == "MEMBER_DECLINED") {
                        base.platoonInviteDeclined(platoonId);
                    } else {
                        base.showReceipt("Unable to accept/decline invite (" + response + ")", receiptTypes.ERROR);
                    }
                }
            }, false)});
        return false;
    },onPageShow: function() {
        $("#feedback-popup-opener-tab").pageLive("click", function(e) {
            e.preventDefault();
            if ($(".popup-feedback-container").length) {
                $(".popup-feedback-container").parents(".common-popup").remove();
            } else {
                var url = $(this).data("url");
                $.get(url, function(response) {
                    popup.render("feedback", response.data, true, false);
                }, "json");
            }
        });
        $(window).focus(function() {
            base.windowFocused = true;
        });
        $(window).blur(function() {
            base.windowFocused = false;
        });
        $("#profile-status-message form").submit(function(e) {
            e.preventDefault();
            var message = $("#profile-status-message-edit").val();
            $("#profile-status-message-edit").blur();
            $.ajax({url: $("#profile-edit-form").attr("action"),dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum,"message": message},complete: base.onComplete(function(success, response) {
                    S.debug(response);
                    switch (response.message) {
                        case "OK":
                            break;
                    }
                    $(".profile-toggle-edit").removeClass("updating");
                }, false)});
            if (message.length == 0) {
                message = $("#profile-status-message-edit").attr("placeholder");
            }
            $("body").unbind("click.profileEditClick");
            $("#profile-status-message-area").text(message);
            $(".profile-toggle-edit").toggle().addClass("updating");
        });
        $("#profile-status-message").delegate("#profile-status-message-edit", "keyup", function(e) {
            if (e.keyCode == 27) {
                $(".profile-toggle-edit").toggle();
                $("body").unbind("click.profileEditClick");
            }
        });
        $("[title]").pageLive("mouseover", function() {
            $(this).attr("title", "");
        });
        $("#platoon-dropdown").delegate(".platoon-request-form", "submit", base.platoonRequestForumSubmit);
        $(".launch-campaign-button").pageLive("click", function(e) {
            e.preventDefault();
            gamemanager.launchCampaign(S.globalContext["realm"]["game"]);
        });
        $(".base-button-general-dropdown").pageLive("click", function(e) {
            e.preventDefault();
            S.debug("Toggling dropdown");
            if ($(this).hasClass("disabled")) {
                return;
            }
            var popup = $(this).parents(".common-receipt:first").addClass("fadingOut");
            var dropdown = $(this).siblings(".base-general-dropdown-area");
            if (dropdown.is(":visible")) {
                dropdown.hide();
                $(this).removeClass("active");
            } else {
                $(this).addClass("active");
                dropdown.show();
                $("body").bind("click.generaldDropdownclick", function(e) {
                    if (!$(e.target).hasClass("base-no-ajax") && ($(e.target).hasClass("base-button-general-dropdown") || $(e.target).parents(".base-general-dropdown-area").length)) {
                        return true;
                    }
                    if (popup.length) {
                        popup.fadeOut("fast");
                    }
                    $(".base-button-general-dropdown").removeClass("active");
                    $(".base-general-dropdown-area").hide();
                    $("body").unbind("click.generaldDropdownclick");
                });
            }
        });
        $("form.join-friend").pageLive("submit", function(e) {
            var p = $(this).parents(".common-popup:first");
            if (p.length) {
                popup.closePopup($(p).attr("id"));
            }
            return joinflow.joinFriend(this);
        });
        $("body").pageDelegate(".ajax-form", "submit", function(e) {
            e.preventDefault();
            base.ajaxPost(this);
            return false;
        });
        $(".common-label-on-input").each(function() {
            var wrapper = $(this);
            var input = wrapper.find("input:first");
            var label = wrapper.find("label:first");
            var checkInputFilled = function() {
                if (input.val() != "") {
                    wrapper.addClass("filled");
                } else {
                    wrapper.removeClass("filled");
                }
            };
            var inputObserver = setInterval(checkInputFilled, 200);
            wrapper.pageDelegate("input", "focus", function() {
                wrapper.addClass("focused");
                label.stop(true, true).fadeOut(50);
            });
            wrapper.pageDelegate("input", "blur", function() {
                wrapper.removeClass("focused");
                if (input.val() == "") {
                    label.stop(true, true).fadeIn(60);
                }
            });
            $.leavePage(function() {
                clearInterval(inputObserver);
            });
        });
        $("#menu-resume-mission").pageLive("submit", function(e) {
            e.preventDefault();
            level = $("#menu-resume-level").val();
            gamemanager.resumeMission(S.globalContext["realm"]["game"], level);
        });
        $(".platoon-accept-invite").pageLive("click", function(e) {
            var popupWindow = $(this).parents(".common-popup");
            var url = $(this).attr("url");
            var notificationId = $(this).attr("notificationId");
            var platoonId = $(this).attr("platoonId");
            var datastring = "platoonId=" + platoonId;
            datastring += "&post-check-sum=" + S.globalContext.session.postChecksum;
            if (typeof notificationId != "undefined") {
                datastring += "&notificationId=" + notificationId;
            }
            $.ajax({url: url,dataType: "json",type: "POST",data: datastring,complete: base.onComplete(function(success, response) {
                    if (success && response == "MEMBER_ACCEPTED") {
                        base.platoonInviteAccepted(platoonId);
                        popup.closePopup();
                        popupWindow.remove();
                    } else {
                        if (response == "MAX_CLUBS_REACHED") {
                            base.showReceipt("You have reached the maximum amount of platoon memberships");
                        } else {
                            if (response == "NEW_MEMBERS_NOT_ALLOWED") {
                                base.showReceipt("New members disabled by founder.");
                            } else {
                                if (response == "MAX_MEMBERS_REACHED") {
                                    base.showReceipt("The platoon has reached maximum amount of members.");
                                } else {
                                    base.showReceipt("Could not accept invitation (" + response + ")");
                                }
                            }
                        }
                    }
                }, false)});
        });
        $(".platoon-decline-invite").pageLive("click", function(e) {
            var popupWindow = $(this).parents(".common-popup");
            var url = $(this).attr("url");
            var notificationId = $(this).attr("notificationId");
            var platoonId = $(this).attr("platoonId");
            $.ajax({url: url,dataType: "json",type: "POST",data: "platoonId=" + platoonId + "&notificationId=" + notificationId + "&post-check-sum=" + S.globalContext.session.postChecksum,complete: base.onComplete(function(success, response) {
                    if (success) {
                        base.platoonInviteDeclined(platoonId);
                        popup.closePopup();
                        popupWindow.remove();
                    } else {
                        base.showReceipt("Could not decline invitation");
                    }
                }, false)});
        });
        $(".base-button-dropdown-joingroup").pageLive("click", function(e) {
            e.preventDefault();
            var partyPlayingUsers = comcenter.getPartyPlayingUsers();
            S.debug(partyPlayingUsers);
            var groupjoin_url = $(this).attr("href");
            if (S.Modifier.count(partyPlayingUsers) > 0) {
                S.debug("Showing party join popup");
                joinflow.showJoinPartyInsteadPopup(partyPlayingUsers, function() {
                    base.startGroupJoin(groupjoin_url);
                });
            } else {
                base.startGroupJoin(groupjoin_url);
            }
            return true;
        });
        $("#base-user-name a").pageLive("click", function() {
            omniture_click("", "gusName_click");
        });
        $("#base-user-profile a").pageLive("click", function() {
            omniture_click("", "gusProfile_click");
        });
        $("#base-user-statistics a").pageLive("click", function() {
            omniture_click("", "gusStats_click");
        });
        $(".base-dropdown-menu-mp-qm-button").pageLive("click", function() {
            omniture_click("", "quickMatchGameTopNav_click");
        });
        $(".preorder-link").click(function(e) {
            e.preventDefault();
            var url = "/bf3/store/";
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        location.href = response.data.urls;
                    }
                }, false)});
        });
        var $headerLogoBF3 = $("a.base-header-logo-bf3");
        $headerLogoBF3.pageBind("mouseover", function() {
            try {
                $(this).stop().animate({backgroundPosition: "0px -136px"}, 80, function() {
                    $(this).stop().animate({backgroundPosition: "0px -68px"});
                });
            } catch (e) {
            }
        });
        $headerLogoBF3.pageBind("mouseout", function() {
            try {
                $(this).stop().animate({backgroundPosition: "0px 0px"}, "slow");
            } catch (e) {
            }
        });
        $(".base-quickmatch-serverfilter-menu").pageBind("mouseenter", function() {
            try {
                var url = $(this).attr("data-url");
                var filter = $.jStorage.get("serverguide-filter-localstorage");
                if (filter == null) {
                    $.jStorage.set("serverguide-filter-localstorage", "");
                    base.ajaxGetJson(url, function(s, r) {
                        filter = r.data;
                        if (r.message == "no_filter") {
                            filter = r.message;
                            $.jStorage.set("serverguide-filter-localstorage", "");
                        } else {
                            $.jStorage.set("serverguide-filter-localstorage", filter);
                        }
                        base.addQuickMatchFiltersToButtons(filter);
                    });
                } else {
                    base.addQuickMatchFiltersToButtons(filter);
                }
            } catch (exception) {
            }
        });
        search.initUserSearch("#base-header-search-form");
        common.compFallbacks();
        common.startSpinners();
    },addQuickMatchFiltersToButtons: function(filter) {
        if (filter != "no_filter") {
            filter = $.parseJSON(filter);
            var title = "";
            var splitfilter = [];
            try {
                if (filter.gameexpansions != "") {
                    try {
                        splitfilter = filter.gameexpansions.split("|");
                    } catch (e) {
                        splitfilter = filter.gameexpansions;
                    }
                    title += " <b>Game:</b> ";
                    for (i = 0; i < splitfilter.length; i++) {
                        if (i != 0) {
                            title += ", ";
                        }
                        title += splitfilter[i];
                    }
                }
            } catch (exception) {
            }
            try {
                if (filter.gamemodes != "") {
                    title += " <b>Mode:</b> ";
                    try {
                        splitfilter = filter.gamemodes.split("|");
                    } catch (e) {
                        splitfilter = filter.gamemodes;
                    }
                    for (i = 0; i < splitfilter.length; i++) {
                        if (i != 0) {
                            title += ", ";
                        }
                        title += splitfilter[i];
                    }
                }
            } catch (exception) {
            }
            try {
                if (filter.gamepresets != "") {
                    title += " <b>Preset:</b> ";
                    try {
                        splitfilter = filter.gamepresets.split("|");
                    } catch (e) {
                        splitfilter = filter.gamepresets;
                    }
                    for (i = 0; i < splitfilter.length; i++) {
                        if (i != 0) {
                            title += ", ";
                        }
                        title += splitfilter[i];
                    }
                }
            } catch (exception) {
            }
            try {
                if (filter.maps != "") {
                    var locallyStored = true;
                    try {
                        splitfilter = filter.maps.split("|");
                        locallyStored = false;
                    } catch (e) {
                        splitfilter = filter.maps;
                    }
                    title += " <b>Maps:</b> ";
                    var mapname;
                    for (i = 0; i < splitfilter.length; i++) {
                        mapname = "";
                        if (i != 0 && splitfilter[i - 1] != "") {
                            title += ", ";
                        }
                        if (splitfilter[i] != "") {
                            if (locallyStored) {
                                mapname = splitfilter[i];
                            } else {
                                mapname = $S.callFunction("common.getMapByCode", splitfilter[i]);
                            }
                            title += mapname;
                        }
                    }
                }
            } catch (exception) {
            }
            if (title == "") {
                title = "Get into the action immediately";
            }
        } else {
            title = "Get into the action immediately";
        }
        var ua = navigator.userAgent;
        if (!ua.match(/iPhone|iPad|iPod|Android/)) {
            $(".base-quickmatch-serverfilter-menu").attr("data-battlebubble", title).addClass("bubble-title");
        }
    },showLoginPopup: function() {
        $("#base-login-popup").toggle();
        if ($("#base-login-popup").is(":visible")) {
            $(".base-login-button-container, .base-login-dropdown-button").addClass("active");
            $("#base-login-email").focus();
            $("body").bind("click.loginClick", function(e) {
                if ($(e.target).parents("#base-login-popup").length || $(e.target).parents(".base-login-button").length) {
                    return true;
                }
                $("#base-login-popup").toggle();
                $("body").unbind("click.loginClick");
                $(".base-login-button-container, .base-login-dropdown-button").removeClass("active");
            });
        } else {
            $("body").unbind("click.loginClick");
            $(".base-login-button-container, .base-login-dropdown-button").removeClass("active");
        }
        return false;
    },clearTipsyOnScroll: function() {
        var isScrolled = false;
        setInterval(function() {
            if (isScrolled) {
                isScrolled = false;
                $(".tipsy").hide();
            }
        }, 500);
        $(document).scroll(function() {
            isScrolled = true;
        });
    },scrollTo: function(element, speed, easing) {
        speed = arguments.length > 1 ? speed : "slow";
        easing = arguments.length > 2 ? easing : "swing";
        $("html,body").animate({scrollTop: $(element).offset().top}, {duration: speed,easing: easing});
    },fixHeaderWidth: function() {
        var $html = $("html");
        if ($html.outerWidth() <= 1026) {
            $html.addClass("window-tight");
        } else {
            $html.removeClass("window-tight");
        }
    },init: function(template) {
        base.fixHeaderWidth();
        $(".bubble-title").battleBubble(false, {"bodyElement": "#content"});
        $(".bubble-title-left").battleBubble(false, {position: "left","bodyElement": "#content"});
        $(".bubble-title-inner").battleBubble(false, {"appendBody": false});
        $(".bubble-title-inner-left").battleBubble(false, {position: "left","appendBody": false});
        $(window).resize(function() {
            comcenter.isResized = true;
            base.fixHeaderWidth();
        });
        if (S.globalContext.useExperimentalPush) {
            main.beaconPush.subscribe("bp:internal").bind(function(name, event) {
                if (name === "flash-blocked") {
                    var infobox = $("#base-header-edgebrowser");
                    infobox.find(".base-header-edgebrowser-title").html("Flash plugin is blocked or disabled");
                    infobox.find(".base-header-edgebrowser-info").html("Battlelog Beta requires Flash. Please enable or unblock it.");
                    infobox.show();
                } else {
                    if (name === "missing-flash-player") {
                        var infobox = $("#base-header-edgebrowser");
                        infobox.find(".base-header-edgebrowser-title").html("Flash plugin is missing");
                        infobox.find(".base-header-edgebrowser-info").html('Battlelog Beta requires Flash. Please <a href="http://get.adobe.com/flashplayer/">install Adobe Flash</a>.');
                        infobox.show();
                    } else {
                        if (name === "bad-flash-player-version") {
                            var infobox = $("#base-header-edgebrowser");
                            infobox.find(".base-header-edgebrowser-title").html("Flash plugin version is too old");
                            infobox.find(".base-header-edgebrowser-info").html('Battlelog Beta requires Flash version 10 or better. Please <a href="http://get.adobe.com/flashplayer/">update Adobe Flash</a>.');
                            infobox.show();
                        }
                    }
                }
            });
        }
        if ((navigator.userAgent.match(/iPad/i)) || (navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
            $("#base-sub-navbar .base-section-dropdown .base-dropdown-middle > a").bind("click", function() {
            });
        }
        $(".common-receipt").live("click", function(e) {
            if ($(e.target).hasClass("base-button-general-dropdown")) {
                S.debug("Do not close since dropdownbutton");
                return false;
            }
            $(this).fadeOut();
        });
        $(".base-button-big-with-dropdown-right").live("click", function(e) {
            var dropdown = $(this).next(".base-button-dropdown:first");
            if (dropdown.length) {
                if (dropdown.is(":visible")) {
                    dropdown.hide();
                } else {
                    dropdown.show();
                }
                $("body").bind("click.dropdownStarteClick", function(e) {
                    if ($(e.target).parents("#serverguide-show-serverjoin").length) {
                        return true;
                    }
                    $(".base-button-dropdown").hide();
                });
            }
        });
        base.clearTipsyOnScroll();
        if (S.globalContext.hideFooter) {
            $("#footer-wrapper").hide();
        }
        $(".common-label-on-input").each(function() {
            var _this = $(this);
            var input = _this.find("input");
            var label = _this.find("label");
            if (input.val() != "") {
                label.hide();
            }
        });
        $(document).bind("keypress", function(e) {
            if (e.keyCode == 27) {
                popup.closeOnePopup();
            }
        });
        Push.bind("Redirect", function(event) {
            base.redirect(event.data.url);
        });
        Push.bind("AdminSignOut", function(event) {
            document.location.href = "/all/session/logout/";
        });
        Push.bind("AddedToPlatoon", function(event) {
            $S("base-dropdown-menu-your-platoons").insert(event.data);
            S.globalContext.userContext.platoons = $S("base-dropdown-menu-your-platoons").getState().platoons;
        });
        Push.bind("InvitedToPlatoon", function(event) {
            var element = $S("base-dropdown-menu-your-invited-platoons").insert(event.data);
            S.globalContext.userContext.invitedPlatoons = $S("base-dropdown-menu-your-platoons").getState().invitedPlatoons;
            $("#platoon-dropdown").delegate(".platoon-request-form", "submit", base.platoonRequestForumSubmit);
        });
        Push.bind("RemovedFromPlatoon", function(event) {
            $S("base-dropdown-menu-your-platoons").remove({"id": event.data.id});
            S.globalContext.userContext.platoons = $S("base-dropdown-menu-your-platoons").getState().platoons;
        });
        $(".base-section-menu a").live("click", function(e) {
            var link = $(this);
            if (link.attr("data") && !e.ctrlKey) {
                S.globalContext.activeMenu = link.attr("data");
                $S("base-header-menu").refresh();
            }
        });
        $.ajaxSetup({"complete": base.onComplete(null, true)});
        base.initMenuDropdowns();
        $("body").delegate("form.base-login-form", "submit", function(e) {
            $("#base-login-ajax-loader img").show();
            var currentUrl = document.location.href;
            if ((hash = currentUrl.indexOf("#")) > 0) {
                currentUrl = currentUrl.substring(hash).replace("!#", "");
                $(this).find("input[name=redirect]").val(currentUrl);
            }
            return true;
        });
        $(".game-coop-join-button").live("click", function() {
            var coopId = $(this).attr("rel");
            S.info("got coopId click " + coopId);
            joinflow.checkJoinCoopRequirements(function(ok) {
                if (ok) {
                    var myUrl = $("#coopJoinGame-urlaction").val().replace("#COOPID#", coopId);
                    $.ajax({url: myUrl,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                            switch (response.message) {
                                case "OK":
                                    base.showReceipt("CO-OP game joined!");
                                    coop.setCurrentTabAsActive(coopId);
                                    break;
                                case "NOT_FOUND":
                                    base.showReceipt("CO-OP session not found!", receiptTypes.ERROR);
                                    break;
                                case "NOT_EMPTY":
                                    base.showReceipt("No free slot available", receiptTypes.ERROR);
                                    break;
                                case "BACKEND":
                                    base.showReceipt("Something went wrong. Please try again", receiptTypes.ERROR);
                                    break;
                            }
                        }, false)});
                } else {
                    base.showReceipt("Could not join CO-OP game", receiptTypes.ERROR);
                }
            });
        });
        $(".join-friend-submit-link").live("click", function(e) {
            e.preventDefault();
            $(this).parents("form.join-friend:first").submit();
            return true;
        });
        $(".join-server-submit-link").live("click", function(e) {
            e.preventDefault();
            $(this).parents("form.serverguide-join-server:first").submit();
            return false;
        });
        $(".base-avatar-voice-status").live("click", function() {
            base.redirect($(this).next().attr("href"));
        });
        S.Modifier.format = function(subject, format) {
            return format.replace(/{(.*?)}/g, function(match, key) {
                return subject[key] || "";
            });
        };
        $(".base-open-chat-link").live("click", function(e) {
            e.preventDefault();
            comcenter.createAndOpenChat($(this).attr("rel"), true);
            return false;
        });
        $("#base-header-edgebrowser-closebutton").click(function() {
            $("#base-header-edgebrowser").hide();
            var expireDate = new Date();
            expireDate.setTime(expireDate.getTime() + (60 * 60 * 1000));
            document.cookie = "hideBrowserWarning=1; expires=" + expireDate.toGMTString() + "; path=/";
        });
        base.initPersonaSelect();
        base.initSetIntervals();
        if (S.globalContext.session.isLoggedIn) {
            clearTimeout(base.idleTimeout);
            if (S.globalContext.staticContext.idleTimeout > 0) {
                base.IDLETIMEOUTCHECK = S.globalContext.staticContext.idleTimeout * 1000;
            }
            if (base.IDLETIMEOUTCHECK > 0) {
                base.idleTimeout = setTimeout(base.checkAway, base.IDLETIMEOUTCHECK);
            }
        } else {
            $.jStorage.flush();
        }
        $(document).ready(base.checkUserAgent);
        $(document).ready(function() {
            base.staticContext = S.globalContext.staticContext;
            base.userContext = S.globalContext.userContext;
        });
    },checkAway: function() {
        var url = $("#checkIdle-urlaction").val();
        base.ajaxGetJson(url, function(s, r) {
            switch (r.message) {
                case "ACTIVE":
                    S.debug("Active, schedule new poll");
                    clearTimeout(base.idleTimeout);
                    base.idleTimeout = setTimeout(base.checkAway, base.IDLETIMEOUTCHECK);
                    break;
                case "IDLE":
                    S.debug("IDLE, add mouse move trigger");
                    $("body").bind("mousemove.bodyaway", function(e) {
                        S.debug("Got mouse move!");
                        $("body").unbind("mousemove.bodyaway");
                        var url = $("#setNotIdle-urlaction").val();
                        base.ajaxGetJson(url, function(s, r) {
                            S.debug(r);
                            clearTimeout(base.idleTimeout);
                            base.idleTimeout = setTimeout(base.checkAway, base.IDLETIMEOUTCHECK);
                        });
                    });
                    break;
                default:
                    S.debug("Got idle resp: ", r.message);
            }
        });
    },initSetIntervals: function() {
        if (!base.agoInterval || base.agoInterval == "") {
            base.agoInterval = setInterval("base.agoIntervalHandler()", 10000);
        }
    },initMenuDropdowns: function() {
        $(".base-dropdown-area li.base-dropdown-menu-item").pageLive("click", function() {
            var url = $(this).find("a").attr("href");
            if (url != undefined && url != "" && url.length > 2) {
                $(".base-dropdown-area").hide();
                $(".base-section-dropdown ").removeClass("activedropdown");
            }
        });
        function menu_foldout() {
            $this = $(this);
            $(".base-dropdown-area").hide();
            $(".base-section-dropdown").removeClass("activedropdown");
            $this.addClass("activedropdown");
            $("body").bind("click.dropdown2Click", function(e) {
                if ($(e.target).parents(".base-section-menu").length) {
                    return true;
                }
                $(".base-dropdown-area").hide();
                $("body").unbind("click.dropdown2Click");
                $(".base-section-dropdown ").removeClass("activedropdown");
            });
            if ($this.find(".base-dropdown-area").length) {
                $this.find(".base-dropdown-area").show();
                return;
            }
            S.error("Should not get here, menu should be rendered already...");
            return false;
        }
        function menu_foldin() {
            $(".base-dropdown-area").hide();
            $("body").unbind("click.dropdown2Click");
            $(".base-section-dropdown ").removeClass("activedropdown");
        }
        var hoverintent_config = {over: menu_foldout,out: menu_foldin};
        $(".base-section-dropdown:not(.disabled)").mouseenter(menu_foldout).mouseleave(menu_foldin);
    },initPersonaSelect: function() {
        $("#base-header-personacontainer").click(function() {
            $("#base-header-personadropdown").toggle();
            $("#base-header-personacontainer").toggleClass("active");
            $("#base-header-currentpersona .common-gameicon").toggleClass("bright");
            $("body").bind("click.personaDropDown", function(e) {
                if ($(e.target).parents("#base-header-personacontainer").length) {
                    S.info("Changing persona");
                    return true;
                }
                $("#base-header-personadropdown").hide();
                $("#base-header-personacontainer").removeClass("active");
                $("#base-header-currentpersona .common-gameicon").addClass("bright");
                $("body").unbind("click.personaDropDown");
            });
        });
        $(".base-header-persona").bind("mousedown", function() {
            $(this).addClass("base-header-persona-pressed");
        });
        $(".base-header-persona").bind("mouseup", function() {
            $(this).removeClass("base-header-persona-pressed");
        });
        $(".base-header-persona").click(function() {
            $("#base-header-personadropdown").hide();
            $("#base-header-personacontainer").removeClass("active");
            $("#base-header-currentpersona .common-gameicon").addClass("bright");
            gamemanager.gameState = null;
            gamemanager.saveLocalStorage();
            var url = $(this).attr("data-url");
            url += (url.indexOf("?") == -1) ? "?" : "&";
            window.location = $(this).attr("data-url") + url + "redirect=" + encodeURIComponent(Surface.ajaxNavigation.getCurrentUrl());
        });
    },ajaxGetJson: function(url, callback) {
        var ajaxRequest = $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                callback(success, response);
            }, false)});
        return ajaxRequest;
    },ajaxPostJson: function(url, callback) {
        var ajaxRequest = $.ajax({url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                callback(success, response);
            }, false)});
        return ajaxRequest;
    },ajaxPost: function(form, callback) {
        var form = $(form);
        var callback = callback || false;
        $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                if (typeof (callback) == "function") {
                    callback(success, response);
                } else {
                    base.showMessageBoxFromResponse(success, response);
                }
            }, false)});
    },gameToSection: function(game) {
        var section = "all";
        if (game == games.BFBC2) {
            section = "bfbc2";
        } else {
            if (game == games.BF3) {
                section = "bf3";
            }
        }
        return section;
    },gameExpansionToString: function(gameExpansion) {
        var gameExpansionString = "";
        var gameExpansions = S.globalContext.staticContext["gameExpansions"];
        switch (gameExpansion) {
            case gameExpansions.BFBC2NAM:
                gameExpansionString = "bfbc2vietnam";
        }
        return gameExpansionString;
    },ownsGame: function(game, platform) {
        if (game == games.BF3) {
            return true;
        }
        var game = parseInt(game);
        var platform = parseInt(platform);
        var session = S.globalContext["session"];
        var userGames = S.globalContext["session"]["userGames"];
        if (!userGames) {
            return false;
        }
        if (!userGames.hasOwnProperty(game)) {
            return false;
        }
        return (jQuery.inArray(platform, userGames[game]) > -1);
    },ownsGameExpansion: function(gameExpansion, platform) {
        var gameExpansion = parseInt(gameExpansion);
        var platform = parseInt(platform);
        var session = S.globalContext["session"];
        var userGameExpansions = S.globalContext["session"]["userGameExpansions"];
        if (!userGameExpansions) {
            return false;
        }
        if (!userGameExpansions.hasOwnProperty(gameExpansion)) {
            return false;
        }
        return (jQuery.inArray(platform, userGameExpansions[gameExpansion]) > -1);
    },agoInterval: "",agoIntervalHandler: function() {
        $("[data-timestamp]").each(function() {
            var timestamp = parseInt($(this).attr("data-timestamp"));
            $(this).html($S("common.ago").render({"timestamp": timestamp}));
        });
    },checkUserAgent: function() {
        var infobox = $("#base-header-edgebrowser");
        if (infobox.length == 0) {
            return;
        }
        if (S.cookieGet("hideBrowserWarning") == "1") {
            return;
        }
        var msg = null;
        var desc = null;
        var ua = navigator.userAgent;
        if (ua.match(/MSIE\s(6|5|4|3|2)/)) {
            document.location.href = "/public/upgradebrowser.html";
            return;
        }
        if (ua.match(/iPhone|iPad|iPod|Android/)) {
            return;
        } else {
            if (ua.match(/Origin/)) {
                msg = "The Origin in-game browser is not fully supported, soldier!";
            } else {
                if (ua.match(/MSIE\s7|Opera/) || (ua.match(/Safari/) && !ua.match(/Chrome/))) {
                    msg = "Your web browser is not fully supported, soldier!";
                } else {
                    if (ua.match(/Win64; x64;/)) {
                        desc = "You can not use the x64 version of Internet Explorer on this site.";
                    } else {
                        if (ua.match(/NT 5.1|Windows XP/)) {
                            msg = "Windows XP is not fully supported";
                        } else {
                            if (ua.match(/Mac/)) {
                                msg = "Mac is not fully supported, soldier!";
                            } else {
                                return;
                            }
                        }
                    }
                }
            }
        }
        if (msg != null) {
            infobox.find(".base-header-edgebrowser-title").html(msg);
        }
        if (desc != null) {
            infobox.find(".base-header-edgebrowser-info").html(desc);
        }
        infobox.show();
    },startGroupJoin: function(groupjoin_url) {
        if (joinflow.checkJoinGameRequirements(function(r) {
            base.startGroupJoin(groupjoin_url);
        })) {
            base.ajaxPostJson(groupjoin_url, function(s, response) {
                if (this.id == "main-loggedin-header-puff-multiplayer-groupjoin") {
                    omniture_click("", "groupJoinGameBanner_click");
                } else {
                    if (this.id == "base-section-nav-bf3-groupjoin") {
                        omniture_click("", "groupJoinGameTopNav_click");
                    } else {
                        if (this.id == "serverguide-groupjoin") {
                            omniture_click("", "groupJoinServer_click");
                        }
                    }
                }
                switch (response.message) {
                    case "OK":
                        base.showReceipt("You created a Party Join!");
                        break;
                    case "NOT_IN_PARTY":
                        base.showReceipt("You need to be in a Party", "skull");
                        break;
                }
            });
        }
        return true;
    },omnitureTrackPage: function() {
        var page_id = S.globalContext.componentName + "-" + S.globalContext.actionName;
        var track_pages = $S.callFunction("base.pages_to_track");
        if (S.globalContext["session"]["currentPersona"]) {
            var current_platform;
            var current_persona = S.globalContext["session"]["currentPersona"]["namespace"];
            var namespaces = S.globalContext.staticContext.nucleusNamespaces;
            if (current_persona == namespaces.CEM_EA_ID || current_persona == namespaces.BATTLEFIELD) {
                current_platform = "PC";
            } else {
                if (current_persona == namespaces.XBOX) {
                    current_platform = "XBOX360";
                } else {
                    if (current_persona == namespaces.PS3) {
                        current_platform = "PS3";
                    } else {
                        current_platform = "Unknown";
                    }
                }
            }
        } else {
            current_platform = "Not available";
        }
        if (track_pages[page_id]) {
            var omniture_page_code = track_pages[page_id].code;
            var omniture_page_bucket = track_pages[page_id].bucket;
            var omniture_page_desc;
            switch (page_id) {
                case "devblog-view":
                    var blog_title = devblog.getBlogTitle();
                    if (blog_title) {
                        omniture_page_desc = devblog.getBlogTitle();
                    } else {
                        omniture_page_desc = track_pages[page_id].desc;
                    }
                    break;
                case "forum-view":
                    var category_title = forum.getForumCategoryTitle();
                    if (category_title) {
                        omniture_page_desc = category_title;
                    } else {
                        omniture_page_desc = track_pages[page_id].desc;
                    }
                    break;
                case "forum-threadview":
                    var thread_title = forum.getThreadTitle();
                    if (category_title) {
                        omniture_page_desc = thread_title;
                    } else {
                        omniture_page_desc = track_pages[page_id].desc;
                    }
                    break;
                default:
                    omniture_page_desc = track_pages[page_id].desc;
            }
            s_ea.prop10 = omniture_page_desc;
            s_ea.prop15 = omniture_page_bucket;
            s_ea.prop66 = current_platform;
            omniSetPageTypeId(omniture_page_code, 1);
        } else {
            return false;
        }
    }};
var games = {BFBC2: 1,BF3: 2,BF1942: 4,BF1943: 8,BFVIETNAM: 16,BF2: 32,BF2142: 64,BFBC: 128,BFHEROES: 256,BFMC: 512};
var sections = jQuery.extend(games, {ALL: 536870912,GENERAL: 1073741824});
var platforms = {PC: 1,XBOX360: 2,PS3: 4,XBOX: 8};
var gameTypes = {ALL: 0,MP: 1,SP: 2,COOP: 4};
var languages = {EN: 1,DE: 2,FR: 4,ES: 8};
var nucleusNamespaces = {CEM_EA_ID: "cem_ea_id",BATTLEFIELD: "battlefield",XBOX: "xbox",PS3: "ps3"};
var receiptTypes = {OK: "checkbox",ERROR: "skull"};
var battlereport = {personaId: null,user: null,loadedGeneral: false,loadedPlayer: false,tableSorting: [[0, 0]],friendsRequestsSent: [],onPageShow: function() {
        var generalUrl = $("#battlereport-general-url");
        var playerUrl = $("#battlereport-player-url");
        battlereport.personaId = $("#battlereport-player-personaId").val();
        battlereport.friendsRequestsSend = [];
        if (generalUrl.length !== 0) {
            battlereport.loadGeneral(generalUrl.val());
        }
        if (playerUrl.length !== 0) {
            battlereport.loadPlayer(playerUrl.val());
        }
    },doMarkings: function() {
        common.startSpinners();
        battlereport.doSortTables();
        battlereport.markSelectedPersona();
        battlereport.markMySquad();
        battlereport.markMyFriends();
        battlereport.markMyTeam();
        battlereport.markBestSquad();
        battlereport.markTopPlayers();
    },doSortTables: function() {
        $.tablesorter.addParser({id: "squads",is: function(s) {
                return false;
            },format: function(s) {
                return s.toLowerCase().replace(/a/, 8).replace(/b/, 7).replace(/c/, 6).replace(/d/, 5).replace(/e/, 4).replace(/f/, 3).replace(/g/, 2).replace(/h/, 1);
            },type: "numeric"});
        $(".battlereport-teamstats-list").tablesorter({sortInitialOrder: "desc",headers: {1: {sorter: "squads"},2: {sorter: false}},sortList: battlereport.tableSorting}).pageBind("sortEnd", function(e) {
            battlereport.tableSorting = e.target.config.sortList;
        });
    },afterReportsLoad: function() {
        $.unbindPage();
        if (battlereport.loadedGeneral && battlereport.loadedPlayer) {
            var battlereportState = $S("battlereport").getState();
            var teams = battlereportState["gameReport"] ? battlereportState["gameReport"]["players"] : false;
            if (teams) {
                var playerReport = $S("battlereport").getState()["playerReport"];
                if (playerReport.personaId) {
                    for (var team in teams) {
                        for (var player in teams[team]) {
                            try {
                                if (playerReport.personaId == teams[team][player].personaId) {
                                    playerReport.user = teams[team][player].user;
                                    playerReport.disableAddButton = S.Modifier.contains(battlereport.friendsRequestsSent, playerReport.user.userId);
                                    $S("battlereport").refresh();
                                }
                            } catch (e) {
                                S.log(e);
                            }
                        }
                    }
                }
            }
        }
        if (battlereport.loadedPlayer) {
            $("#battlereport-personal-awards-slider-wrapper").sodaSlider({centered: false});
        }
        if (battlereport.loadedGeneral) {
            battlereport.doMarkings();
            $("#battlereport-teamstats-show-dnf a").pageBind("click", function(e) {
                e.preventDefault();
                $S("battlereport").update({"showDNF": true});
                battlereport.afterReportsLoad();
                battlereport.doMarkings();
                $(".battlereport-teamstats-list").trigger("update");
                $(this).parent().hide();
            });
            $(".battlereport-teamstats-list tbody tr.battlereport-teamstats-player-row").pageBind("click", function(e) {
                e.preventDefault();
                if (e.target.nodeName === "A" || e.target.nodeName === "BUTTON") {
                    return;
                }
                var $this = $(this);
                battlereport.personaId = $this.attr("data-personaId");
                try {
                    delete $S("battlereport").getState()["playerReport"];
                    $S("battlereport").getState()["personaId"] = battlereport.personaId;
                    $S("battlereport").refresh();
                } catch (e) {
                    S.log(e);
                }
                battlereport.doMarkings();
                battlereport.loadPlayer($(this).attr("data-path"));
            });
            $(".battlereport-header-info .battlereport-comments-top-link").pageBind("click", function(e) {
                e.preventDefault();
                $("#battlereport-comments").get(0).scrollIntoView();
            });
            $("#battlereport-comments .pagination-paginationbutton").addClass("base-no-ajax");
            $("#battlereport-comments .pagination-paginationbutton").pageLive("click", function(e) {
                e.stopPropagation();
                e.preventDefault();
                $.getJSON($(this).attr("href"), function(resp) {
                    var tplData = {"comments": resp.data.comments,"totalCommentCount": resp.data.totalCommentCount,"itemInfo": {"id": resp.data.metaId,"type": "battlereport-round-comment"},"pagination": resp.data.pagination};
                    $("#battlereport-comments").html($S("comment.index").render(tplData));
                    $("#battlereport-comments .pagination-paginationbutton").addClass("base-no-ajax");
                    $("#battlereport-comments").get(0).scrollIntoView();
                });
            });
            $(".battlereport-teamstats-user-addfriend").pageBind("click", function() {
                var $this = $(this);
                var url = $this.attr("data-path");
                var userId = $this.attr("data-userid");
                battlereport.friendsRequestsSent.push(userId);
                $this.attr("disabled", 1);
                $.ajax({url: url,dataType: "json",type: "POST",data: "post-check-sum=" + S.globalContext.session.postChecksum,complete: base.onComplete(function(success, response) {
                        if (success) {
                            base.showReceipt("Friend request sent!");
                        } else {
                            $this.removeAttr("disabled");
                            base.showReceipt("Could not send friend request!", "skull");
                        }
                    }, false)});
            });
        }
    },loadGeneral: function(url) {
        $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                if (success) {
                    S.log("Report");
                    S.log(response);
                    response.gameReport = response.gameReport || false;
                    $S("battlereport").update(response);
                }
                battlereport.loadedGeneral = true;
                battlereport.afterReportsLoad();
            }, false)});
    },loadPlayer: function(url) {
        $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                if (success) {
                    S.log("Player");
                    S.log(response);
                    response.playerReport = response.playerReport || false;
                    try {
                        battlereport.personaId = response.playerReport.personaId;
                    } catch (e) {
                        S.log(e);
                    }
                    response.personaId = battlereport.personaId;
                    $S("battlereport").update(response);
                }
                battlereport.loadedPlayer = true;
                battlereport.afterReportsLoad();
            }, false)});
    },init: function(template) {
    },handlePlayerGameReportReceived: function(event) {
        if ($("#comcenter-notifications").is(":visible")) {
        } else {
            soundFX.play(soundFX.BLEEP, "BATTLE_REPORT");
            if (!$("#comcenter-icon-game").hasClass("open")) {
                $("#comcenter-icon-game").addClass("unread");
            }
        }
    },loadLatestPlayerPreviews: function() {
        $("#comcenter-icon-game").addClass("open");
        $("#comcenter-gamereportupdates-preview").show();
        if (comcenter.generalLoadingAjaxRequest) {
            comcenter.generalLoadingAjaxRequest.abort();
        }
        comcenter.generalLoadingAjaxRequest = $.ajax({url: $("#gamereportupdates-urlaction").val(),dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},success: function(response) {
                $("#comcenter-gamereportupdates-preview .base-preview-area-loader").hide();
                var previews = (response.data.previews);
                var state = $S("gamereportupdates").getState();
                state.gameReportPreviews = previews;
                state.gotEvent = true;
                $S("gamereportupdates").setState(state);
                $S("gamereportupdates").refresh();
                $("#comcenter-icon-game").addClass("open");
                $("#comcenter-gamereportupdates-preview").show();
                $("body").pageBind("click.gameReportClick", function(e) {
                    if ($(e.target).attr("id") == "comcenter-icon-game" || $(e.target).parents("#comcenter-gamereportupdates-preview").length) {
                        return true;
                    }
                    $("#comcenter-gamereportupdates-preview").hide();
                    $("#comcenter-icon-game").removeClass("open");
                    $("body").unbind("click.gameReportClick");
                });
            }});
    },markMyTeam: function() {
        var myTeam = $(".battlereport-teamstats-list").has(".myself").attr("data-teamId");
        $('.battlereport-teamscores-score[data-teamId="' + myTeam + '"]').addClass("myteam");
    },markSelectedPersona: function() {
        if (!battlereport.personaId) {
            return;
        }
        $(".battlereport-teamstats-list .selectedRowSquads").removeClass("selectedRowSquads");
        $(".battlereport-teamstats-list .selected").removeClass("selected");
        var $selected = $(".battlereport-teamstats-list tr.battlereport-teamstats-player-row[data-personaId='" + battlereport.personaId + "']").addClass("selected");
        var currentSquad = $selected.attr("data-squad");
        var $squadMemberRows = $selected.parents(".battlereport-teamstats-list:first").find("tr.battlereport-teamstats-player-row[data-squad='" + currentSquad + "']");
        if ($squadMemberRows.length > 0) {
            $squadMemberRows.addClass("selectedRowSquads");
        }
    },markMyFriends: function() {
        var friends = comcenter.getFriendsListFromLs();
        for (var i = 0; i < friends.length; i++) {
            $("#battlereport-teamstats div[rel='" + friends[i].userId + "']").parents("tr.battlereport-teamstats-player-row").addClass("myfriend");
            $("#battlereport-playerscore-content div[rel='" + friends[i].userId + "']").addClass("myfriend");
        }
    },markMySquad: function() {
        var $myself = $(".battlereport-teamstats-list .myself");
        if ($myself) {
            var my_squad_id = $myself.attr("data-squad");
            var $squadMemberRows = $myself.parents(".battlereport-teamstats-list:first").find("tr.battlereport-teamstats-player-row[data-squad='" + my_squad_id + "']");
            if ($squadMemberRows.length > 1) {
                $squadMemberRows.not(".myself").addClass("mysquad");
            }
        }
    },markBestSquad: function() {
        $(".battlereport-teamstats-bestsquad").each(function(e) {
            var $this = $(this);
            var squadId = $this.val();
            $(this).siblings(".battlereport-teamstats-list:first").find('tr.battlereport-teamstats-player-row[data-squad="' + squadId + '"]').addClass("bestSquad");
        });
    },markTopPlayers: function() {
        var pos1 = $(document.getElementById("battlereport-teamstats-topplayer-pos1")).val();
        var pos2 = $(document.getElementById("battlereport-teamstats-topplayer-pos2")).val();
        var pos3 = $(document.getElementById("battlereport-teamstats-topplayer-pos3")).val();
        $("#battlereport-teamstats tr.battlereport-teamstats-player-row.battlereport-teamstats-list-row-top3[data-personaid='" + pos1 + "']").addClass("pos1");
        $("#battlereport-teamstats tr.battlereport-teamstats-player-row.battlereport-teamstats-list-row-top3[data-personaid='" + pos2 + "']").addClass("pos2");
        $("#battlereport-teamstats tr.battlereport-teamstats-player-row.battlereport-teamstats-list-row-top3[data-personaid='" + pos3 + "']").addClass("pos3");
    }};
var benchmark = {onComponentReady: function() {
    },init: function(template) {
    }};
var campaign = {onPageShow: function() {
    },init: function(template) {
    }};
var comcenter = {userId: 0,numFriendsOnline: 0,numFriendsPlaying: 0,numFriendsTotal: 0,friendAreaExpanded: 0,cookieName: "comcenter",debug: "",friends: "",chatsContracted: false,generalLoadingAjaxRequest: false,chatBlinkInterval: null,cookieSyncLifetime: 1 / 96,isResized: false,resizeComCenter: function() {
        var windowH = $(window).height();
        var comcenterH = $("#comcenter-area").height() + 40;
        var padderHeight = 120;
        if (comcenterH + padderHeight >= windowH) {
            var maxHeightOfFriendsList = comcenterH - (comcenterH - windowH) - padderHeight;
            $("#comcenter-tab-friends-content").css("max-height", maxHeightOfFriendsList);
        } else {
            $("#comcenter-tab-friends-content").css("max-height", "none");
        }
    },resizeComCenterOnResize: function() {
        setInterval(function() {
            if (comcenter.isResized) {
                comcenter.isResized = false;
                comcenter.resizeComCenter();
            }
        }, 500);
    },updateLocalStorage: function() {
        var state = $S("comcenter-surface-friends").getState();
        if (!$.jStorage.set("comcenter.friends", state)) {
            S.debug("Failed to save ls comcenter from event, not supported in browser");
        }
        $S("comcenter-surface-taskbar").setState(state);
        $S("comcenter-surface-taskbar").refresh();
        state = $S("comcenter-surface-friendrequests").getState();
        if (!$.jStorage.set("comcenter.friendsrequests", state)) {
            S.debug("Failed to save ls friend requests");
        }
    },onPageShow: function() {
    },init: function(template) {
        comcenter.resizeComCenterOnResize();
        comcenter.resizeComCenter();
        $("#comcenter-offline-separator .dropdownicon").live("click", function(e) {
            var bar = $("#comcenter-offline-separator");
            if (bar.hasClass("showing-offline")) {
                bar.removeClass("showing-offline");
                $(".comcenter-friend-offline").addClass("comcenter-friend-hidden");
                $S("comcenter-surface-friends").getState()["showingOffline"] = false;
            } else {
                bar.addClass("showing-offline");
                $(".comcenter-friend-offline").removeClass("comcenter-friend-hidden");
                $S("comcenter-surface-friends").getState()["showingOffline"] = true;
            }
            comcenter.resizeComCenter();
            comcenter.updateLocalStorage();
        });
        $("#comcenter-online-separator .dropdownicon").live("click", function(e) {
            var bar = $("#comcenter-online-separator");
            if (bar.hasClass("showing-online")) {
                bar.removeClass("showing-online");
                $(".comcenter-friend-online").addClass("comcenter-friend-hidden");
                $S("comcenter-surface-friends").getState()["showingOnline"] = false;
            } else {
                bar.addClass("showing-online");
                $(".comcenter-friend-online").removeClass("comcenter-friend-hidden");
                $S("comcenter-surface-friends").getState()["showingOnline"] = true;
            }
            comcenter.resizeComCenter();
            comcenter.updateLocalStorage();
        });
        Push.bind("ComcenterUpdateRead", comcenter.updateComcenterNotifications);
        Push.bind("BattlereportUpdateRead", comcenter.updateBattlereportNotifications);
        Push.bind("UserPresenceChanged", comcenter.handleUserPresenceChanged);
        Push.bind("UserBecameFriend", comcenter.handleUserBecameFriend);
        Push.bind("UserRemovedFriend", comcenter.handleUserRemovedFriend);
        Push.bind("ChatMessageIncoming", comcenter.handleChatMessageIncoming);
        Push.bind("ChatMemberJoined", comcenter.handleChatMemberJoined);
        Push.bind("ChatMemberLeft", comcenter.handleChatMemberLeft);
        Push.bind("FriendRequest", comcenter.handleFriendRequest);
        Push.bind("PlayerGameReportReceived", battlereport.handlePlayerGameReportReceived);
        if (S.globalContext.session.isLoggedIn) {
            $(".chat-toggle-party-privacy, .chat-list-party-privacy").live("click", function(e) {
                e.preventDefault();
                if ($(this).hasClass("chat-list-party-privacy")) {
                    return false;
                }
                var lockIcon = $(this);
                var url = $(this).attr("href");
                base.ajaxPostJson(url, function(e, resp) {
                    switch (resp.message) {
                        case "OPEN":
                            lockIcon.removeClass("closed").addClass("open");
                            break;
                        case "CLOSED":
                            lockIcon.removeClass("open").addClass("closed");
                            break;
                        default:
                            base.showReceipt("Could not find Party", "skull");
                            break;
                    }
                });
                return false;
            });
            $(".voice-chat-connect-button").live("click", function(e) {
                e.preventDefault();
                var url = $(this).attr("href");
                ESN.Sonar.ensureConnectedToServer(function() {
                    base.ajaxPostJson(url, function(e, resp) {
                        switch (resp.message) {
                            case "OK":
                                base.showReceipt("You joined the Party Voice");
                                break;
                            default:
                                base.showReceipt("Could not join Party Voice", "skull");
                                break;
                        }
                    });
                });
                return false;
            });
            $("#sonar-open-gm").live("click", gamemanager.show);
            $("#comcenter").delegate(".comcenter-friendrequest-form", "submit", function(e) {
                var form = $(this);
                var friendUserId = form.attr("data-userId");
                var button = form.find(".comcenter-friend-request-button");
                if (button.hasClass("base-button-yes")) {
                    base.showReceipt("Friend has been added to your Com Center");
                }
                $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                        $S("comcenter-surface-friendrequests").remove({"userId": "" + friendUserId});
                        if ($S("comcenter-surface-friendrequests").getState()["friendrequests"].length == 0) {
                            $S("comcenter-surface-taskbar").update({"unread": false});
                            $S("comcenter-surface-friends").getState()["friendrequests"] = [];
                            $S("comcenter-surface-friends").refresh();
                        }
                        comcenter.updateLocalStorage();
                    }, false)});
                return false;
            });
            $("body").delegate(".comcenter-party-create", "submit", function(e) {
                e.preventDefault();
                var form = $(this);
                var createPartyCallback = function() {
                    $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                            switch (response.message) {
                                case "CHAT_DISABLED":
                                    $("#comcenter-area").addClass("comcenter-not-in-voice");
                                    base.showReceipt("Party is currently disabled.", "skull");
                                    break;
                                case "CREATED":
                                    comcenter.showReceipt("Party created!");
                                    break;
                                case "FAILED":
                                    $("#comcenter-area").addClass("comcenter-not-in-voice");
                                    comcenter.showReceipt("Error, no Party created!");
                                    break;
                            }
                            $("#comcenter-voice-loading").hide();
                        }, false)});
                };
                if (!ESN.Sonar.ensureConnectedToServer(createPartyCallback)) {
                    createPartyCallback();
                }
                return false;
            });
            $("body").delegate(".voice-connect-form", "submit", function(e) {
                $("#comcenter-area").removeClass("comcenter-not-in-voice");
                $("#comcenter-voice-loading").show();
                var form = $(this);
                e.preventDefault();
                if (!ESN.Sonar.ensureConnectedToServer(function() {
                    $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                            switch (response.message) {
                                case "CREATED":
                                    comcenter.showReceipt("Voice channel created!");
                                    comcenter.refreshCall = setTimeout(function() {
                                        comcenter.comcenterSync();
                                    }, 3000);
                                    break;
                                case "FAILED":
                                    $("#comcenter-area").addClass("comcenter-not-in-voice");
                                    comcenter.showReceipt("Error, no channel created!");
                                    break;
                            }
                            $("#comcenter-voice-loading").hide();
                        }, false)});
                })) {
                    $("#comcenter-voice-loading").hide();
                    $("#comcenter-area").addClass("comcenter-not-in-voice");
                }
                return false;
            });
            var isResized = false;
            setInterval(function() {
                if (isResized) {
                    isResized = false;
                    comcenter.checkSizeOfChats();
                }
            }, 500);
            $(window).bind("resize", function() {
                isResized = true;
            });
            if (S.globalContext.flushStorage) {
                S.cookieSet("comcenter.isInSync", 0, comcenter.cookieSyncLifetime);
                S.cookieSet("comcenter.flushedOk", 1, 5);
            }
            var state = $S("comcenter-surface-friends").getState();
            var friendState = $S("comcenter-surface-friendrequests").getState();
            if (friendState.friendrequests.length > 0) {
                S.debug("Saved friend requets in ls");
                $.jStorage.set("comcenter.friendrequests", friendState);
                $S("comcenter-surface-taskbar").update({"unread": true});
            } else {
                S.debug("Loaded friend requests from ls");
                var friendRequests = $.jStorage.get("comcenter.friendrequests", {});
                $S("comcenter-surface-friendrequests").setState(friendRequests);
                $S("comcenter-surface-friendrequests").refresh();
                if (friendRequests.length > 0) {
                    $S("comcenter-surface-taskbar").update({"unread": true});
                }
            }
            if (state.friendscomcenter.length > 0) {
                if (!$.jStorage.set("comcenter.friends", state)) {
                    S.debug("Failed to save ls comcenter, not supported browser");
                    S.cookieSet("comcenter.isInSync", 0, comcenter.cookieSyncLifetime);
                } else {
                    S.cookieSet("comcenter.isInSync", 1, comcenter.cookieSyncLifetime);
                }
            } else {
                if (Surface.cookieGet("showfriendarea") != "true") {
                    var lsStored = $.jStorage.get("comcenter.friends");
                    if (lsStored != null) {
                        $S("comcenter-surface-taskbar").setState(lsStored);
                        $S("comcenter-surface-taskbar").refresh();
                    }
                }
                comcenter.updateChatsFromState(comcenter.getFriendsListFromLs());
            }
            try {
                if (S.globalContext.userContext.voice.token != null) {
                    S.debug("Got token, starting Sonar.");
                    ESN.Sonar.startSonarWithCallback(function() {
                    }, S.globalContext.userContext.voice.token);
                } else {
                    if (S.globalContext.userContext.voice.channel != null && S.globalContext.userContext.voice.channel.channelId > 0) {
                        S.debug("Got channel, starting Sonar.");
                        ESN.Sonar.startSonarWithCallback(function() {
                        }, false);
                    }
                }
            } catch (e) {
                S.debug("Could not start Sonar!");
            }
            comcenter.userInit();
        }
        $(".comcenter-voice-kick-from-channel").live("click", function(e) {
            e.preventDefault();
            var userRow = $(this).parents(".comcenter-friend-item:first");
            var userId = userRow.attr("rel");
            S.debug("kick userId " + userId);
            var url = $("#kickVoice-urlaction").val().replace("#USERID#", userId);
            base.ajaxPostJson(url, function(success, response) {
                if (success) {
                    if (response.message == "OK") {
                        userRow.remove();
                    }
                }
            });
            return false;
        });
        $("#comcenter-voice-noise-container").live("mouseenter", function() {
            sonarui.setBottomBarInfo();
        });
        $(".comcenter-voice-lock-icon").live("click", function() {
            $("body").unbind("click.voiceDropdownClick");
            if ($(this).hasClass("active")) {
                $(this).removeClass("active").next().hide();
            } else {
                $(this).addClass("active").next().show();
                $("body").bind("click.voiceDropdownClick", function(e) {
                    if ($(e.target).hasClass("comcenter-voice-lock-icon") || $(e.target).parents(".comcenter-voice-lock-dropdown").length) {
                        return true;
                    }
                    $(".comcenter-voice-lock-dropdown").hide().prev().removeClass("active");
                    $("body").unbind("click.voiceDropdownClick");
                });
            }
        });
        $(".comcenter-voice-lock-dropdown li").live("click", function() {
            var access = $(this).attr("rel");
            var url = $("#setAccessVoice-urlaction").val().replace("#ACCESS#", access);
            $(".comcenter-voice-lock-dropdown li").removeClass("current-access");
            var currentLi = $(this);
            currentLi.addClass("current-access");
            base.ajaxPostJson(url, function(success, response) {
                if (success) {
                    if (response.message == "OK") {
                        $(".comcenter-voice-lock-dropdown").hide().prev().removeClass("active");
                        S.globalContext.userContext.voice.channel.defaultAccess = access;
                    }
                }
            });
        });
        $(".comcenter-tab").click(function() {
            $(".comcenter-tab").removeClass("active");
            $(this).addClass("active");
            $(".comcenter-tab-content").hide();
            $("#" + $(this).attr("id") + "-content").show();
            S.cookieSet("latest-comcenter-tab", $(this).attr("id"));
        });
        $(".comcenter-setting.mic").live("click", function() {
            ESN.Sonar.ensureConnectedToServer(function() {
                ESN.Sonar.toggleMicrophone();
            });
        });
        $(".comcenter-setting.noise").live("click", function() {
            ESN.Sonar.ensureConnectedToServer(function() {
                ESN.Sonar.toggleSpeakers();
            });
        });
        $(".voice-leave-channel-button").live("click", function() {
            sonarui.leaveChannel();
        });
        $(".comcenter-notification-notification-title").live("click", function() {
            comcenter.closeNotifications();
        });
        $(".chat-header-submit").live("click", function() {
            $(this).parents("form:first").submit();
            return false;
        });
        $(".comcenter-notification-notification-title").live("click", function() {
            $("#comcenter-gamereportupdates-preview").hide();
            $("#comcenter-icon-game").removeClass("open");
        });
        $(".chat-header-group-name-area").live("click", function() {
            return false;
        });
        $(".comcenter-chat-group-expand").live("click", function() {
            $(this).toggleClass("active");
            $(this).parents(".comcenter-chat-taskbar:first").find(".comcenter-chat-group-expanded-header:first").toggle();
        });
        $(".comcenter-chat-kickparty").live("click", function(e) {
            S.debug("kick user from party");
            e.preventDefault();
            var url = $(this).attr("href");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "NOT_OWNER":
                            base.showReceipt("You need to be Party owner", "skull");
                            break;
                        case "NO_PARTY":
                            base.showReceipt("Could not find Party", "skull");
                            break;
                        case "NO_USER":
                            base.showReceipt("Could not find user", "skull");
                            break;
                        case "OK":
                            base.showReceipt("User was kicked!");
                            break;
                    }
                }, false)});
        });
        $(".comcenter-chat-toggle-mute").live("click", function(e) {
            var userId = $(this).attr("data-friendId");
            S.debug("Toggle mute for " + userId);
            try {
                ESN.Sonar.client.toggleUserMuted(userId);
            } catch (e) {
                base.showReceipt("Not in channel", "skull");
                S.debug(e);
            }
            $S("comcenter-party-voice").refresh();
        });
        $("#comcenter").delegate(".comcenter-chat-form", "submit", function(e) {
            e.preventDefault();
            var form = $(this);
            var chatId = $(form).find("input[name=chatId]").val();
            var message = $(form).find("input[name=message]").val();
            message = $.trim(message);
            if (message.length == 0) {
                return false;
            }
            if (parseInt(chatId) == 0) {
                S.debug("found no chat id..");
                return false;
            }
            var m = {};
            message = message.replace(/</g, "&lt;").replace(/>/g, "&gt;");
            var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
            message = message.replace(exp, "<a target='_blank' href='$1'>$1</a>");
            m.message = message;
            m.fromUsername = S.globalContext.session.user.username;
            var lastChatChild = $("#chat_" + chatId).children(":last");
            var lastChatter = "";
            if (lastChatChild.hasClass("comcenter-chat-status-message-content")) {
                lastChatter = "";
            } else {
                if (lastChatChild.attr("author") != undefined) {
                    lastChatter = lastChatChild.attr("author");
                }
            }
            $("#chat_" + chatId).append($S("comcenter.chatmessage").render({"lastChatter": lastChatter,"ownMessage": 1,"message": m}));
            $("#chat_" + chatId).find(".comcenter-chat-empty, .comcenter-chat-offlineuser").hide();
            $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first").find(".comcenter-chat-droppable").removeClass("visible");
            comcenter.scrollChatToBottom(chatId, true);
            try {
                $S("chat-surface-container-" + chatId).getState()["chat"]["messages"].push(m);
            } catch (err) {
                S.error(err);
            }
            base.ajaxPost(this, function(status, data) {
                if (!status && data.message == "CHAT_DISABLED") {
                    base.showReceipt("Chat is currently disabled.", "skull");
                    return false;
                }
            });
            $("#comcenter-chat-input-" + chatId).val("");
            return false;
        });
        $("#comcenter-search-friends-input").bind("keyup", function(e) {
            if ($("#comcenter-tab-friends-content").is(":hidden")) {
                $("#comcenter-tab-friends").click();
            }
            var searchFor = $("#comcenter-search-friends-input").val();
            var state = $S("comcenter-surface-friends").getState();
            state.searchFor = searchFor;
            $S("comcenter-surface-friends").setState(state);
            $S("comcenter-surface-friends").refresh();
            comcenter.updateLocalStorage();
        });
        $(".voice-connect-button").live("click", function() {
            var input = $(this);
            ESN.Sonar.ensureConnectedToServer(function() {
                $.ajax({url: $("#joinVoice-urlaction").val().replace("#CHANNELID#", $(input).attr("rel")),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                        if (response == null) {
                            comcenter.showReceipt("Voice server not online");
                            return false;
                        }
                        switch (response.message) {
                            case "OK":
                                $("#comcenter-area").removeClass("comcenter-not-in-voice");
                                comcenter.resizeComCenter();
                                comcenter.showReceipt("You joined the channel");
                                break;
                            case "NOT_ALLOWED":
                                comcenter.showReceipt("Not allowed in this channel");
                                break;
                            case "ALREADY_IN_CHANNEL":
                                comcenter.showReceipt("Already in channel");
                                break;
                            case "VOICE_ERROR":
                                comcenter.showReceipt("Voice error, try again later");
                                break;
                            case "CHANNEL_NOT_FOUND":
                                comcenter.showReceipt("Could not find channel", "skull");
                                break;
                            default:
                                comcenter.showReceipt("Unhandled error, please report", "skull");
                                break;
                        }
                    }, false)});
            });
        });
        var ie8fix = 10;
        if ($.browser.msie && (parseInt($.browser.version, 10) < 9 || document.documentMode < 9)) {
            ie8fix = 1;
        }
        $("#comcenter li.comcenter-friend-item:not(.comcenter-friend-offline, .comcenter-thisisyou)").live("mouseenter", function(e) {
            $(this).filter(function() {
                return $(this).attr("rel") != S.globalContext.session.user.userId;
            }).multidraggable({revert: "invalid",revertDuration: 133,refreshPositions: true,scroll: false,distance: ie8fix,appendTo: $("#draggables"),helper: "clone",opacity: 0.9,zIndex: 2700,stop: function(event, ui) {
                    $(".coop-droparea-droppable").hide().droppable("destroy");
                    $(".gamemanager-invitestate-dropzone").hide();
                    $(".common-dropzone").removeClass("active").removeClass("dragging").droppable("destroy");
                    $(".comcenter-chat-droppable").removeClass("active").removeClass("dragging").droppable("destroy").hide();
                    $(".comcenter-friend-item").removeClass("ui-multidraggable");
                },start: function(event, ui) {
                    var that = this;
                    var userId = $(this).attr("rel");
                    var user = comcenter.getComcenterFriendFromState(userId);
                    $(".comcenter-chat-taskbar").droppable({over: function(event, ui) {
                            var chatId = $(this).attr("rel");
                            comcenter.openChat(chatId);
                        }});
                    var currentServerGuid = 1337;
                    try {
                        launcherState.server.guid;
                    } catch (e) {
                        S.debug("No current server in dropzones..");
                    }
                    $(".comcenter-chat-droppable").addClass("dragging").droppable({tolerance: "pointer",drop: function(event, ui) {
                            omniture_click("", "friendsComCenter_dropZone");
                            var chatId = $(this).parents(".comcenter-chat-taskbar:first").find(".comcenter-chat-chat:first").attr("rel");
                            var multipleDrag = $(ui.draggable).parents(".comcenter-list:first").find(".ui-multidraggable").each(function(i, e) {
                                var multiUserId = $(this).attr("rel");
                                comcenter._inviteToParty(multiUserId, chatId);
                            });
                            if (!multipleDrag.length) {
                                comcenter._inviteToParty(userId, chatId);
                            }
                            omniture_click("", "friendsComCenter_dropZone");
                        },hoverClass: "active",greedy: true,over: function(event, ui) {
                            $("#draggables li").addClass("active");
                        },out: function(event, ui) {
                            $("#draggables li").removeClass("active");
                        }}).show();
                    if ($("#gamemanager-invite-dropzone").length) {
                        $("#gamemanager-invite-dropzone").addClass("dragging");
                        $(".gamemanager-currentstate:first").droppable({tolerance: "pointer",drop: function(event, ui) {
                                omniture_click("", "friendsComCenter_dropZone");
                                comcenter._inviteToServer(userId, currentServerGuid);
                            },hoverClass: "active",greedy: true,over: function(event, ui) {
                                $("#draggables li").addClass("active");
                            },out: function(event, ui) {
                                $("#draggables li").removeClass("active");
                            }});
                    }
                }});
        }).disableSelection();
        $(".notselectable").disableSelection();
        $("#comcenter-tab-friends-content").disableSelection();
        $(".comcenter-list li").live("click", function(e) {
            var $this = $(this);
            var userId = $this.attr("rel");
            e.preventDefault();
            if (e.ctrlKey) {
                return false;
            }
            S.debug("clicked user " + userId);
            S.debug(e.target);
            if ($(e.target).hasClass("comcenter-interact-playing-dropdown") || $(e.target).hasClass("comcenter-interact-playing")) {
            } else {
                if ($(e.target).hasClass("comcenter-interact-party")) {
                    var partyId = $(e.target).attr("data-partyId");
                    if (partyId > 0) {
                        comcenter.joinPartyChat(partyId);
                    }
                } else {
                    if ($(e.target).hasClass("comcenter-playing-link")) {
                        Surface.ajaxNavigation.navigateTo($(e.target).attr("href"));
                    } else {
                        if ($(e.target).hasClass("comcenter-interact-chat")) {
                            S.debug("Opening chat");
                            var state = $S("comcenter-surface-friends").getState().friendscomcenter;
                            for (var i in state) {
                                var user = state[i];
                                if (user.userId == userId) {
                                    if (!user.presence.isOnline) {
                                        S.debug("Clicked user is not online...");
                                    }
                                    comcenter.createAndOpenChat(user);
                                }
                            }
                        } else {
                            if ($(e.target).hasClass("comcenter-add-friend")) {
                                Surface.ajaxNavigation.navigateTo($(e.target).attr("rel"));
                            } else {
                                if (userId > 0) {
                                    var profileLink = $(this).find(".comcenter-username-link:first").attr("data-profile");
                                    S.debug(profileLink);
                                    Surface.ajaxNavigation.navigateTo(profileLink);
                                }
                            }
                        }
                    }
                }
            }
            omniture_click("", "friend_click");
            return true;
        });
        $(".comcenter-interact-party").live("click", function(e) {
            var partyId = $(this).attr("data-partyId");
            if (partyId > 0) {
                comcenter.joinPartyChat(partyId);
            }
            return false;
        });
        $(".comcenter-interact-party").live("mouseenter", function(e) {
            var partyId = $(this).attr("data-partyId");
            if ($(this).hasClass("bubble-title-inner-left")) {
                return false;
            }
            var that = this;
            if (parseInt(partyId) > 0) {
                $.ajax({url: $("#getPartyMembers-urlaction").val().replace("#CHATID#", partyId),dataType: "json",data: {"post-check-sum": S.globalContext.session.postChecksum},type: "GET",complete: base.onComplete(function(success, response) {
                        switch (response.message) {
                            case "OK":
                                var title = "Join Party (" + response.data.users.length + " " + S.Modifier.pluralize(response.data.users.length, "soldier", "soldiers") + ")";
                                $(that).addClass("bubble-title-inner-left");
                                $(that).remove(".common-bubble");
                                var bubble = $($S("common.bubble").render({"body": title}));
                                bubble.appendTo($(that)).css("left", -(bubble.outerWidth() + 5)).css("margin-top", -(bubble.outerHeight() / 2)).css("top", "50%").addClass("common-bubble-left");
                                break;
                        }
                    }, false)});
            }
            return false;
        });
        $(".comcenter-dropdown-profile a").live("click", function() {
            base.redirect($(this).attr("href"));
        });
        $(".comcenter-dropdown-chat a").live("click", function() {
            var userId = $("#comcenter-area").attr("rel");
            S.debug("Opening chat with " + userId);
            $("#comcenter-" + userId).click();
        });
        $(".comcenter-dropdown-voice-join a").live("click", function() {
            $(".comcenter-dropdown").remove();
            $(".comcenter-dropdownbutton").removeClass("active");
        });
        $(".comcenter-dropdown-voice a").live("click", function() {
            var userId = $("#comcenter-area").attr("rel");
            $.ajax({url: $("#inviteVoice-urlaction").val().replace("#USERID#", userId),dataType: "json",data: {"post-check-sum": S.globalContext.session.postChecksum},type: "GET",complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "INVITED":
                            comcenter.showReceipt("Friend invited to your voice channel");
                            break;
                        case "ALREADY_IN_CHANNEL":
                            comcenter.showReceipt("User already in channel");
                            break;
                        case "NO_CHANNEL":
                            comcenter.showReceipt("You are not in a channel");
                            break;
                    }
                    $(".comcenter-dropdown").remove();
                    $(".comcenter-dropdownbutton").removeClass("active");
                }, false)});
            return true;
        });
        $(".comcenter-dropdown-invitegame a").live("click", function() {
            var userId = $("#comcenter-area").attr("rel");
            $.ajax({url: $("#inviteGame-urlaction").val().replace("#USERID#", userId),dataType: "json",type: "GET",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "INVITED":
                            comcenter.showReceipt("Friend invited to server");
                            break;
                    }
                    $(".comcenter-dropdown").remove();
                    $(".comcenter-dropdownbutton").removeClass("active");
                }, false)});
            return true;
        });
        var unreadChats = $.jStorage.get("chats-unread", false);
        if (unreadChats) {
            $(".comcenter-chat-taskbar").each(function(i, e) {
                if (unreadChats[parseInt($(this).attr("rel"))] != undefined) {
                    $(this).addClass("unread");
                }
            });
        }
        if (S.globalContext.session.isLoggedIn) {
            var lastOpenChat = S.cookieGet("chatLastActiveChatId");
            if (lastOpenChat && $("#comcenter-chat-" + lastOpenChat).length) {
                comcenter.openChat(lastOpenChat);
            }
            $(function() {
                comcenter.checkSizeOfChats();
            });
            var latestComcenterTab = S.cookieGet("latest-comcenter-tab");
            if (latestComcenterTab) {
                if (latestComcenterTab == "comcenter-tab-settings") {
                    sonarui.setSettingsInfo();
                }
                $("#" + latestComcenterTab).click();
            }
        }
        $("#comcenter-tab-friends a").live("click", function(e) {
            e.preventDefault();
        });
        $(".chat-header").live("click", function(e) {
            if ($(e.target).attr("href") != undefined || $(e.target).attr("src") != undefined) {
                return true;
            }
            if ($(e.target).parents(".comcenter-chat-party-menu:first").length) {
                return false;
            }
            $(this).parents(".comcenter-chat-taskbar:first").removeClass("active unread");
            S.cookieSet("chatLastActiveChatId", false, 10);
        });
        $(".comcenter-close, .comcenter-close-group").live("click", function(e) {
            var c = false;
            var chatId = $(this).parents(".comcenter-chat-taskbar:first").attr("rel");
            comcenter.hideChat(chatId);
            e.preventDefault();
            return false;
        });
        $(".chat-leave").live("click", function(e) {
            var c = false;
            var chatId = $(this).parents(".comcenter-chat-taskbar:first").attr("rel");
            comcenter.closeChat(chatId);
            e.preventDefault();
            return false;
        });
        $(".comcenter-chat-party-menu-icon").live("click", function() {
            $(this).parent().toggleClass("active");
            $("body").bind("click.closePartyDropdown", function(e) {
                S.debug(e.target);
                if ($(e.target).parents(".comcenter-chat-party-menu").length) {
                    return true;
                }
                $(".comcenter-chat-party-menu-icon").parent().toggleClass("active");
                $("body").unbind("click.closePartyDropdown");
            });
        });
        $(".comcenter-chat-taskbar-button").live("click", function() {
            var chatId = $(this).parents(".comcenter-chat-taskbar:first").attr("rel");
            if ($(this).parent().prev().is(":hidden")) {
                comcenter.openChat(chatId);
            } else {
                $(this).parents(".comcenter-chat-taskbar:first").removeClass("active unread");
                S.cookieSet("chatLastActiveChatId", false, 10);
            }
            return false;
        });
        $("#comcenter-icon-notifications").click(function() {
            if ($("#comcenter-notifications").is(":visible")) {
                comcenter.closeNotifications();
            } else {
                comcenter.closePreviewAreas();
                notification.loadNotifications();
            }
            omniture_click("", "updates");
        });
        $("#comcenter-icon-game").live("click", function() {
            omniture_click("", "battle_reports");
            if ($("#comcenter-gamereportupdates-preview").is(":visible")) {
                $("#comcenter-gamereportupdates-preview").hide();
                $(this).removeClass("open unread");
                return;
            }
            comcenter.closePreviewAreas();
            battlereport.loadLatestPlayerPreviews();
        });
        comcenter.resizeComCenter();
    },refreshDroppables: function() {
        $(".comcenter-chat-droppable").filter(function() {
            var users = $S($(this).parent().attr("id")).getState().users;
            var draggableUserId = $(that).attr("rel");
            for (var i in users) {
                var user = users[i];
                if (user.userId == draggableUserId) {
                    return 0;
                }
            }
            return 1;
        });
    },getFriendsListFromLs: function() {
        var friends = [];
        var state = $S("comcenter-surface-friends").getState();
        if (!state || !state.friendscomcenter.length) {
            state = $.jStorage.get("comcenter.friends", false);
            if (!state || !state.friendscomcenter.length) {
                return [];
            }
        }
        return state.friendscomcenter;
    },getFriendsPlaying: function() {
        var friendsPlaying = {};
        var friends = comcenter.getFriendsListFromLs();
        for (var i in friends) {
            if (friends[i].presence.isPlaying) {
                var guid = friends[i].presence.serverGuid || 1337;
                if (friendsPlaying[guid] == undefined) {
                    friendsPlaying[guid] = [];
                }
                friendsPlaying[guid].push(friends[i]);
            }
        }
        return friendsPlaying;
    },getPartyPlayingUsers: function() {
        if (!$(".comcenter-party-chat").length) {
            return false;
        }
        var chatId = $(".comcenter-party-chat").attr("rel");
        var state = $S("comcenter-chat-header-" + chatId).getState();
        var playing = {};
        for (var i in state.chat.users) {
            var user = state.chat.users[i];
            if (user.presence && user.presence.isPlaying) {
                if (playing[user.presence.serverGuid] == null) {
                    playing[user.presence.serverGuid] = [];
                }
                playing[user.presence.serverGuid].push(user);
            }
        }
        if (S.Modifier.count(playing) == 0) {
            return false;
        }
        var maxGuid = 0;
        var maxCount = 0;
        for (var guid in playing) {
            if (playing[guid].length > maxCount) {
                maxCount = playing[guid].length;
                maxGuid = guid;
            }
        }
        return {"guid": maxGuid,"playing": playing[maxGuid]};
    },getFriendsPlayingOnServer: function(guid) {
        var friendsPlaying = comcenter.getFriendsPlaying();
        if (friendsPlaying[guid] != null) {
            return friendsPlaying[guid];
        }
        return [];
    },getFriendsPlayingCount: function() {
        try {
            return $S("comcenter-surface-taskbar").getState()["playing"];
        } catch (err) {
            S.debug("Coulnd not find comcenter taskbar...");
            return 0;
        }
    },_inviteToServer: function(userId, currentServerGuid) {
        var user = comcenter.getComcenterFriendFromState(userId);
        if (user.presence.serverGuid == currentServerGuid) {
            base.showReceipt("Friend is already playing on server", "skull");
            return false;
        }
        if (gamemanager.inviteToCurrentServer(userId)) {
        }
        base.showReceipt("Friend invited to server");
    },_inviteToParty: function(userId, chatId) {
        var url = $("#inviteToParty-urlaction").val().replace("#USERID#", userId).replace("#CHATID#", chatId);
        $(".comcenter-chat-droppable").hide();
        $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                switch (response.message) {
                    case "NO_CHAT":
                        base.showReceipt("Could not find Party", "skull");
                        break;
                    case "CHAT_FULL":
                        base.showReceipt("Sorry, Party is full", "skull");
                        break;
                    case "ALREADY_IN_CHAT":
                        base.showReceipt("Already in that Party", "skull");
                        break;
                    case "CHAT_CLOSED":
                        base.showReceipt("Party closed, only owner can invite", "skull");
                        break;
                    case "OK":
                        base.showReceipt("Invite was sent!");
                        break;
                }
            }, false)});
    },createAndOpenChat: function(user, getUserFromLs) {
        if (getUserFromLs) {
            var lsUser = comcenter.getComcenterFriendFromState(user);
            if (!lsUser) {
                S.error("Could not find the friend " + user + " in Com Center...");
                return false;
            } else {
                user = lsUser;
            }
        }
        S.debug("Got userState: ");
        S.debug(user);
        base.ajaxPostJson($("#getChatId-urlaction").val().replace("#USERID#", user.userId), function(status, data) {
            if (!status && data.message == "CHAT_DISABLED") {
                base.showReceipt("Chat is currently disabled.", "skull");
                return false;
            }
            if (!status && data.message == "CHAT_NOT_FOUND") {
                base.showReceipt("Chat not found, please try again", "skull");
                return false;
            }
            var chatId = data.data.chatId;
            if ($("#comcenter-chat-" + chatId).length) {
                comcenter.openChat(chatId);
                return false;
            }
            $("#comcenter-chats").append($S("comcenter.chat").render({"chat": data.data.chat}));
            comcenter.openChat(chatId);
        });
    },closePreviewAreas: function() {
        S.debug("closing preview areas!");
        $(".comcenter-preview-area").hide();
        $(".comcenter-taskbar-icon-holder").removeClass("open");
        if (!gamemanager.isHidden) {
            gamemanager.hide();
        }
    },updatePPTkey: function() {
        if (ESN.Sonar.client == null) {
            return false;
        }
        var pptKey = ESN.Sonar.getPushToTalkKey();
        if (!pptKey || pptKey == "") {
            ESN.Sonar.setPushToTalkKey("INSERT");
            pptKey = "Not set";
        }
        var captureMode = ESN.Sonar.getCaptureMode();
        if (captureMode == "pushtotalk") {
            if ($("#comcenter-voice-settings-ppt-key").length && $("#comcenter-voice-settings-ppt-key").html() != "Not set" && $("#comcenter-voice-settings-ppt-key").html() != null && $("#comcenter-voice-settings-ppt-key").html() != pptKey) {
                base.showReceipt("Push-to-talk key changed!");
            }
            $(".sonar-ppt-status").addClass("active");
            $("#voice-settings-ppt-key").html(pptKey);
            $("#comcenter-voice-settings-ppt-key").html(pptKey);
        }
        $S("comcenter-party").update({"captureMode": ESN.Sonar.getCaptureMode()});
    },clearChat: function(chatId) {
        $("#comcenter-chat-input-" + chatId).val("");
        $("#comcenter-chat-input-" + chatId).parents(".comcenter-chat-form").next(".comcenter-chat-bottom-loader").hide();
    },closeChat: function(chatId) {
        var url = $("#leaveChat-urlaction").val().replace("#CHATID#", chatId);
        $("#comcenter-chat-" + chatId).find(".comcenter-close-group").show();
        $("#comcenter-chat-" + chatId).find(".comcenter-chat-leavechat").hide();
        $("#comcenter-chat-" + chatId).find(".comcenter-chat-form:first").find("input[name=chatId]").val(0);
        $.getJSON(url, function(data) {
            if ($("#comcenter-chat-" + chatId).hasClass("comcenter-party-chat")) {
                comcenter.updatePartyStatus(0);
                $S("comcenter-party").refresh();
            }
            $("#comcenter-chat-" + chatId).next().remove();
            $("#comcenter-chat-" + chatId).remove();
        });
        return true;
    },updatePartyStatus: function(status) {
        S.globalContext.userContext.isInParty = status;
        var surfacesToUpdate = ["main-logged-in-quickmatch", "base-dropdown-quickmatch-surface", "comcenter-surface-friends", "serverguide-quickmatch-button", "serverguide-join-button", "serverguide-show-serverjoin", "user-friends-surface", "profile-joinbutton"];
        for (var i in surfacesToUpdate) {
            if ($("#" + surfacesToUpdate[i]).length) {
                $S("" + surfacesToUpdate[i]).refresh();
            }
        }
    },hideChat: function(chatId) {
        var url = $("#hideChat-urlaction").val().replace("#CHATID#", chatId);
        $("#comcenter-chat-" + chatId).next().remove();
        $("#comcenter-chat-" + chatId).remove();
        $.getJSON(url, function(data) {
        });
        return true;
    },saveChat: function(chatId) {
        return false;
        var c = false;
        if (!(c = ($.jStorage.get("chats")))) {
            c = {};
        }
        c[chatId] = {"state": $S("chat-surface-container-" + chatId).getState()};
        $.jStorage.set("chats", c);
        return chatId;
    },openChat: function(chatId) {
        if (!$("#chat-surface-container-" + chatId).length) {
            S.debug("Did not find chat with chatId: " + chatId);
            return false;
        }
        var chatParent = $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first");
        chatParent.removeClass("unread");
        comcenter.setUnreadStatus(chatId, false);
        $(".comcenter-chat-taskbar").removeClass("active");
        $("#comcenter-chat-" + chatId).addClass("active");
        $("#comcenter-chat-" + chatId).find(".common-bubble:first").remove();
        S.cookieSet("chatLastActiveChatId", chatId, 10);
        $("#chat_" + chatId).scrollTop(100000);
        $("#comcenter-chat-input-" + chatId).live("blur", function() {
            $(this).css("color", "#8a8a8a");
        });
        $("#comcenter-chat-input-" + chatId).live("click", function() {
            if ($(this).val() == "Chat here...") {
                $(this).val("");
            }
            $(this).css("color", "#353535");
        }).focus().click();
        comcenter.checkSizeOfChats();
        comcenter.resizeChat(chatId);
    },resizeHandlersAttached: {},resizeChat: function(chatId) {
        return false;
        var resizeChat = $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first").find(".comcenter-chat-content:first");
        resizeChat.resizable({ghost: false,minHeight: 345,maxHeight: 1000,handles: "n",stop: function(event, ui) {
                $(this).find("a").css("display", "block");
            }});
        if (!comcenter.resizeHandlersAttached[chatId]) {
            comcenter.resizeHandlersAttached[chatId] = true;
            var isResized = false;
            setInterval(function() {
                if (!isResized) {
                    return;
                }
                isResized = false;
                var totalHeight = 1 + resizeChat.height() - resizeChat.find(".comcenter-chat-bottom-container").height() - resizeChat.find(".chat-surface-container-container").height();
                resizeChat.find(".comcenter-chat-chat:first, .comcenter-chat-droppable:first").css("height", totalHeight);
                var myTop = resizeChat.css("top");
                var chatSizes = $.jStorage.get("chat-sizes");
                if (!chatSizes) {
                    chatSizes = {};
                }
                chatSizes[resizeChat.parents(".comcenter-chat-taskbar:first").attr("rel")] = {"containerHeight": resizeChat.css("height"),"height": totalHeight,"top": myTop};
                $.jStorage.set("chat-sizes", chatSizes);
            }, 500);
            resizeChat.bind("resize", function(event, ui) {
                isResized = true;
            });
        }
        var totalHeight = 1 + resizeChat.height() - resizeChat.find(".comcenter-chat-bottom-container").height() - resizeChat.find(".chat-surface-container-container").height();
        resizeChat.find(".comcenter-chat-chat:first, .comcenter-chat-droppable:first").css("height", totalHeight);
        var myTop = resizeChat.css("top");
        var chatSizes = $.jStorage.get("chat-sizes");
        if (!chatSizes) {
            chatSizes = {};
        }
        chatSizes[resizeChat.parents(".comcenter-chat-taskbar:first").attr("rel")] = {"containerHeight": resizeChat.css("height"),"height": totalHeight,"top": myTop};
        $.jStorage.set("chat-sizes", chatSizes);
        var chatSizes = $.jStorage.get("chat-sizes");
        if (chatSizes != null && chatSizes[chatId] != null) {
            var newHeight = chatSizes[chatId]["height"];
            var newTop = chatSizes[chatId]["top"];
            var cSelector = $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first");
            cSelector.find(".comcenter-chat-chat:first").css({"height": newHeight});
            cSelector.find(".comcenter-chat-droppable:first").css({"height": newHeight - 40});
            resizeChat.css({"top": newTop,height: chatSizes[chatId]["containerHeight"]});
        }
    },getComcenterFriendFromState: function(userId) {
        var state = $S("comcenter-surface-friends").getState();
        if (!state.friendscomcenter.length) {
            state = $.jStorage.get("comcenter.friends", false);
            if (!state || !state.friendscomcenter.length) {
                return false;
            }
        }
        var foundUser = false;
        for (var i in state.friendscomcenter) {
            var u = state.friendscomcenter[i];
            if (u.userId == userId) {
                return jQuery.extend(true, {}, u);
            }
        }
        return false;
    },updateComcenterNotifications: function(e) {
        $("#comcenter-icon-notifications").removeClass("unread");
    },updateBattlereportNotifications: function(e) {
        $("#comcenter-icon-game").removeClass("unread");
    },closeNotifications: function() {
        if ($("#comcenter-notifications").is(":hidden")) {
            return false;
        }
        $("#comcenter-notifications").hide();
        $("#comcenter-icon-notifications").removeClass("open");
        $("#main-loggedin-wb-info-icon-notifications").removeClass("unread");
        $("#comcenter-icon-notifications").removeClass("unread");
    },setCaptureMode: function(mode) {
        if (mode == undefined) {
            mode = ESN.Sonar.getCaptureMode();
        }
        $S("comcenter-party").update({"captureMode": mode});
    },checkSizeOfChats: function() {
        var widthToFill = $("#comcenter-friends").position().left - $("#comcenter-gamecontrol").position().left;
        $("#comcenter-chats").css("width", widthToFill - 220);
        var numberOfChats = $(".comcenter-chat-taskbar").length;
        var widthOfChat = 155 + 5;
        if (Math.floor(widthToFill / widthOfChat) > numberOfChats) {
            comcenter.expandChats();
            return;
        }
        comcenter.contractChats();
        var currentChat = $(".comcenter-chat-taskbar.active");
        if (currentChat.length && currentChat.position().top > 0) {
            currentChat.removeClass("active");
        }
    },contractChats: function() {
        comcenter.chatsContracted = true;
        $(".comcenter-chat-taskbar:not(.active)").removeClass("contracted").addClass("contracted");
        $(".comcenter-chat-taskbar.active").removeClass("contracted");
    },expandChats: function() {
        comcenter.chatsContracted = false;
        $(".comcenter-chat-taskbar").removeClass("contracted");
    },showReceipt: function(txt) {
        base.showReceipt(txt);
    },handleUserChannel: function(e) {
        S.debug("Got user channel");
        S.debug(e);
        try {
            comcenter.handleUserPresenceChanged({"data": e.data.user.presence});
        } catch (err) {
            S.debug("Failed to handleUserPresenceChanged in handleUserChannel: " + err);
        }
    },handleUserPresenceChanged: function(e) {
        var userPresence = e.data;
        S.debug(userPresence);
        var newStatus = "offline";
        if (userPresence.isPlaying) {
            newStatus = "playing";
        } else {
            if (userPresence.isOnline) {
                newStatus = "online";
            }
        }
        var voiceStatuses = $(".base-avatar-container").filter("[rel=" + userPresence.userId + "]").find(".base-avatar-status-overlay").removeClass("base-avatar-status-overlay-playing base-avatar-status-overlay-online base-avatar-status-overlay-offline").addClass("base-avatar-status-overlay-" + newStatus);
        if (userPresence.userId == S.globalContext.session.user.userId) {
            return false;
        }
        var friendState = comcenter.getComcenterFriendFromState(userPresence.userId);
        var state = $S("comcenter-surface-friends").getState();
        if (!state.friendscomcenter.length) {
            var lsStored = $.jStorage.get("comcenter.friends", {});
            $S("comcenter-surface-friends").setState(lsStored);
        }
        if (userPresence.partyId == undefined) {
            userPresence.partyId = 0;
        }
        if (userPresence.isIdle == undefined) {
            userPresence.isIdle = false;
        }
        $S("comcenter-surface-friends").update({"userId": userPresence.userId,"presence": userPresence}, {"refresh": true});
        comcenter.updateLocalStorage();
        if ($("#serverguide-listcontainer").length) {
            var currentGuid = userPresence.serverGuid || friendState.presence.serverGuid;
            var serverguiderow = $(".serverguide-surface-finder[rel=" + currentGuid + "]");
            if (serverguiderow.length) {
                if (currentGuid != null) {
                    var playingFriends = comcenter.getFriendsPlayingOnServer("" + currentGuid);
                    $S(serverguiderow.parent().attr("id")).update({"friendsOnServer": playingFriends});
                }
            }
            $("#serverguide-friends-tab-playing").html(comcenter.getFriendsPlayingCount());
        }
        main.updateFriendSurfaces();
        if ($("#chat-userId-" + userPresence.userId).length) {
            var chatId = $("#chat-userId-" + userPresence.userId).parents(".comcenter-chat-taskbar:first").attr("rel");
            var users = $S("comcenter-chat-header-" + chatId).getState()["chat"]["users"];
            for (var i in users) {
                var user = users[i];
                if (user.userId == userPresence.userId) {
                    users[i].presence = userPresence;
                    break;
                }
            }
            var chatText = $("#comcenter-chat-input-" + chatId).val();
            var comcenterChat = $("#chat_" + chatId);
            var atBottom = true;
            try {
                atBottom = (comcenterChat[0].scrollHeight - comcenterChat.scrollTop() == comcenterChat.outerHeight());
            } catch (err) {
            }
            $S("chat-surface-container-" + chatId).update({"chat": {"users": users}});
            comcenter.scrollChatToBottom(chatId, atBottom);
            $("#comcenter-chat-input-" + chatId).val(chatText);
            comcenter.resizeChat(chatId);
        }
        sonarui.setBottomBarInfo();
    },handleUserBecameFriend: function(e) {
        $S("comcenter-surface-friends").replace(e.data.friendUser, {refresh: true});
        comcenter.updateLocalStorage();
    },handleUserRemovedFriend: function(e) {
        $S("comcenter-surface-friends").remove({"userId": e.data.friendUserId});
        comcenter.updateLocalStorage();
    },handleFriendRequest: function(e) {
        S.debug("Got friend request");
        soundFX.play(soundFX.BLEEP, "FRIEND_REQUEST");
        $S("comcenter-surface-friendrequests").insert(e.data);
        $S("comcenter-surface-taskbar").update({"unread": true});
        $S("comcenter-surface-friends").getState()["friendrequests"] = [1];
        $S("comcenter-surface-friends").refresh();
    },handleChatMemberLeft: function(e) {
        S.debug("handleChatMemberLeft");
        S.debug(e);
        var leftUserId = e.data.userId;
        var chatId = e.data.chatId;
        if (!$("#comcenter-chat-header-" + chatId).length) {
            return false;
        }
        if (e.data.userId == S.globalContext.session.user.userId) {
            S.debug("Closing Party chat");
            setTimeout(function() {
                if (!$("#comcenter-chat-header-" + chatId).length) {
                    return false;
                }
                base.showReceipt("You were kicked from Party", "skull");
                comcenter.updatePartyStatus(0);
                $S("comcenter-party").refresh();
                $("#comcenter-chat-" + chatId).next().remove();
                $("#comcenter-chat-" + chatId).remove();
            }, 1000);
            return false;
        }
        var state = $S("comcenter-chat-header-" + chatId).getState();
        for (var i in state.chat.users) {
            var user = state.chat.users[i];
            if (user.userId == leftUserId) {
                state.chat.users.splice(i, 1);
                break;
            }
        }
        state.chat.platoon = e.data.platoon;
        $S("comcenter-chat-header-" + chatId).setState(state);
        $S("comcenter-chat-header-" + chatId).refresh();
        $S("comcenter-chat-footer-" + chatId).setState(state);
        $S("comcenter-chat-footer-" + chatId).refresh();
        if (state.users.length > 1) {
        }
        $S("chat-surface-container-" + chatId).refresh();
        $("#comcenter-chat-" + chatId).find(".comcenter-chat-droppable").hide();
        comcenter.saveChat(chatId);
    },_saveCurrentPlatoonForChats: function(chatId, platoon) {
        var lsPlatoons = $.jStorage.get("chat-platoons", {});
        if (platoon) {
            lsPlatoons[chatId] = platoon;
        } else {
            if (lsPlatoons[chatId] != undefined) {
                delete (lsPlatoons[chatId]);
            }
        }
        $.jStorage.set("chat-platoons", lsPlatoons);
    },handleChatMemberJoined: function(e) {
        S.debug("got handleChatMemberJoined");
        S.debug(e);
        var chatId = e.data.chat.chatId;
        var platoon = e.data.chat.platoon || null;
        var channelId = e.data.chat.channelId || null;
        if (!$("#comcenter-chat-" + chatId).length) {
            if (e.data.chat.isParty) {
                $(".comcenter-chat-party").each(function() {
                    var chatToRemove = $(this).parents(".comcenter-chat-taskbar:first");
                    chatToRemove.next().remove();
                    chatToRemove.remove();
                });
                comcenter.updatePartyStatus(chatId);
                $S("comcenter-party").refresh();
                $("#comcenter-chats").prepend($S("comcenter.chat").render(e.data));
                comcenter.openChat(chatId);
            } else {
                $("#comcenter-chats").append($S("comcenter.chat").render(e.data));
            }
            S.debug("Party chat added");
            $("#comcenter-chat-" + chatId).addClass("unread");
        } else {
            $S("comcenter-chat-header-" + chatId).getState()["chat"]["users"] = e.data.chat.users;
            $S("comcenter-chat-header-" + chatId).getState()["chat"]["platoon"] = e.data.chat.platoon;
            $S("comcenter-chat-header-" + chatId).refresh();
            $S("comcenter-chat-footer-" + chatId).getState()["chat"]["users"] = e.data.chat.users;
            $S("comcenter-chat-footer-" + chatId).refresh();
        }
        $("#comcenter-chat-" + chatId).find(".comcenter-chat-content:first").addClass("comcenter-chat-group");
        comcenter.saveChat(chatId);
    },handleChatMessageIncoming: function(e) {
        S.debug(e);
        S.debug("handleChatMessageIncoming");
        var chatId = e.data.chatId;
        var username = e.data.fromUsername;
        var comcenterChat = $("#chat_" + e.data.chatId);
        if (username == S.globalContext.session.user.username) {
            var locale = S.globalContext.session.locale;
            var ts = Surface.Modifier.offsetdateformat(e.data.timestamp, locale.time, locale.offset);
            comcenterChat.find(".comcenter-chat-ownmessage:first").html(ts).removeClass("comcenter-chat-ownmessage");
            return false;
        }
        var firstChat = !comcenterChat.length;
        if (firstChat) {
            var state = $S("comcenter-surface-friends").getState().friendscomcenter;
            for (var i in state) {
                var user = state[i];
                if (user.username == username) {
                    var chatId = e.data.chatId;
                    $.ajax({async: false,url: $("#getChat-urlaction").val().replace("#CHATID#", chatId),dataType: "json",data: {"post-check-sum": S.globalContext.session.postChecksum},type: "GET",complete: base.onComplete(function(success, response) {
                            S.debug("Appending the new chat Got chatId: " + chatId);
                            var users = response.data.users;
                            var messages = response.data.messages;
                            var chatInput = {"unread": true,"messages": messages,"chatId": chatId,"users": users};
                            S.debug(chatInput);
                            $S("comcenter.chat").render({"chat": chatInput});
                            $("#comcenter-chats").append($S("comcenter.chat").render({"chat": chatInput}));
                            comcenter.setUnreadStatus(chatId, true);
                            $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first").addClass("unread");
                        }, false)});
                    break;
                }
            }
        }
        comcenterChat.parents(".comcenter-chat-taskbar:first").find(".comcenter-chat-droppable").removeClass("visible");
        if (!firstChat) {
            try {
                $S("chat-surface-container-" + e.data.chatId).getState()["chat"]["messages"].push(e.data);
            } catch (err) {
                S.debug("Could not find chat!");
                S.error(err);
                return false;
            }
        }
        var atBottom = true;
        try {
            atBottom = (comcenterChat[0].scrollHeight - comcenterChat.scrollTop() == comcenterChat.outerHeight());
        } catch (err) {
        }
        var lastChatChild = $("#chat_" + chatId).children(":last");
        var lastChatter = "";
        if (lastChatChild.hasClass("comcenter-chat-status-message-content")) {
            lastChatter = "";
        } else {
            if (lastChatChild.attr("author") != undefined) {
                lastChatter = lastChatChild.attr("author");
            }
        }
        var eventMessage = false;
        if (e.data.fromUsername == "0") {
            eventMessage = true;
            e.data.message = S.parseJSON(e.data.message);
        }
        var newChatMessage = $S("comcenter.chatmessage").render({"lastChatter": lastChatter,"message": e.data});
        comcenterChat.append(newChatMessage);
        comcenterChat.find(".comcenter-chat-empty").hide();
        try {
            var parsedMessage = e.data.message;
            if (parsedMessage !== null) {
                S.debug("Got parsed message");
                S.debug(e.data.message);
                if (parsedMessage.privacy != undefined) {
                    var chatPrivacy = {"chat": {"partyOpen": parseInt(parsedMessage.privacy)}};
                    $S("chat-surface-container-" + chatId).update(chatPrivacy);
                }
            }
        } catch (err) {
        }
        if (e.data.fromUsername != null && e.data.fromUsername != S.globalContext.session.user.username && e.data.message.userLeftId == undefined) {
            var isHidden = comcenterChat.parents(".comcenter-chat-content:first").is(":hidden");
            if (isHidden || firstChat || !base.windowFocused) {
                soundFX.play(soundFX.BLEEP, "CHAT_MESSAGE");
            }
            if (isHidden) {
                comcenter.setUnreadStatus(chatId, true);
                $("#chat_" + chatId).parents(".comcenter-chat-taskbar:first").addClass("unread");
            } else {
                var old = 0;
                comcenter.setUnreadStatus(chatId, false);
                comcenterChat.parents(".comcenter-chat-taskbar:first").removeClass("unread");
            }
            if (!eventMessage) {
                $.titleAlert("New message from " + e.data.fromUsername + "!", {requireBlur: true,stopOnFocus: true,duration: 10000,interval: 2000});
            }
        }
        comcenter.saveChat(chatId);
        comcenter.scrollChatToBottom(chatId, atBottom);
        return true;
    },setUnreadStatus: function(chatId, status) {
        var chats = $.jStorage.get("chats-unread", {});
        if (status) {
            chats[chatId] = status;
            S.debug("Set unreadstatus to true for chatId: " + chatId);
        } else {
            if (chats[chatId] != undefined) {
                delete chats[chatId];
                S.debug("Deleted unreadstatus for chatId: " + chatId);
            }
        }
        $.jStorage.set("chats-unread", chats);
    },requestPermission: function(callback) {
        S.debug("request permission");
        window.webkitNotifications.requestPermission(callback);
    },showHTML5Notifications: function(from, message) {
        S.debug("show it");
        if (window.webkitNotifications.checkPermission() == 0) {
            S.debug("open it");
            window.webkitNotifications.createNotification("", "test", "message").show();
        } else {
            S.debug("show enable button");
        }
    },scrollChatToBottom: function(chatId, scrollBottom) {
        if (scrollBottom) {
            var comcenterChat = $("#chat_" + chatId);
            comcenterChat.scrollTop(100000000);
        }
    },syncAjaxRequest: null,userInit: function() {
        if (Surface.cookieGet("showfriendarea") == "true") {
            comcenter.toggleComcenterFriendlist();
        }
        $("#comcenter-friendbutton, #friendlist-header").click(function(e) {
            if ($(e.target).hasClass("comcenter-setting")) {
                return true;
            }
            if ($("#comcenter-area").is(":hidden")) {
                comcenter.comcenterSync();
            }
            comcenter.toggleComcenterFriendlist();
        });
    },toggleComcenterFriendlist: function() {
        if ($("#comcenter-area").is(":hidden")) {
            Surface.cookieSet("showfriendarea", "true");
            var lsStored = $.jStorage.get("comcenter.friends");
            if (lsStored != null) {
                $S("comcenter-surface-friends").setState(lsStored);
                $S("comcenter-surface-taskbar").setState(lsStored);
                $S("comcenter-surface-friends").refresh();
                $S("comcenter-surface-taskbar").refresh();
            } else {
                S.debug("Got no update of comcenter in ls, error");
            }
        } else {
            Surface.cookieSet("showfriendarea", "false");
        }
        $("#comcenter-friendbutton").toggleClass("active");
        $("#comcenter-area").toggle(0, function() {
            try {
                if ($(this).is(":visible")) {
                    omniture_click("", "comCenter_open");
                } else {
                    omniture_click("", "comCenter_close");
                }
            } catch (e) {
                S.error("Omni error!");
            }
        });
    },handleFriendOnlineStatusChange: function() {
    },refreshCall: 0,comcenterSync: function() {
        if (comcenter.syncAjaxRequest) {
            comcenter.syncAjaxRequest.abort();
        }
        comcenter.syncAjaxRequest = base.ajaxPostJson($("#syncComcenter-urlaction").val(), function(success, response) {
            comcenter.refreshCall = 0;
            if (response != null && response.type == "error") {
                S.debug("Got error response,  not logged in?");
                comcenter.showReceipt("You need to log in.");
                popup.render("login");
                return false;
            }
            if (response) {
                var channel = response.data.channel;
                if (channel) {
                    var channelUsers = response.data.channelUsers;
                    if (!S.globalContext.userContext.voice) {
                        S.globalContext.userContext.voice = {};
                    }
                    S.globalContext.userContext.voice.channel = channel;
                    S.debug("TODO - Update Party with channel?");
                }
                var lsStored = $.jStorage.get("comcenter.friends", {});
                lsStored.friendscomcenter = response.data.friendscomcenter;
                state = $S("comcenter-surface-friends").getState();
                state.friendscomcenter = response.data.friendscomcenter;
                $S("comcenter-surface-friends").setState(state);
                $S("comcenter-surface-friends").refresh();
                comcenter.updateChatsFromState(response.data.friendscomcenter);
                state = $S("comcenter-surface-friendrequests").getState();
                state.friendrequests = response.data.friendrequests;
                if (state.friendrequests.length > 0) {
                    $S("comcenter-surface-taskbar").update({"unread": true});
                    $S("comcenter-surface-friends").getState()["friendrequests"] = [1];
                    $S("comcenter-surface-friends").refresh();
                } else {
                    $S("comcenter-surface-taskbar").update({"unread": false});
                    $S("comcenter-surface-friends").getState()["friendrequests"] = [];
                    $S("comcenter-surface-friends").refresh();
                }
                $S("comcenter-surface-friendrequests").setState(state);
                $S("comcenter-surface-friendrequests").refresh();
                comcenter.updateLocalStorage();
                S.debug("state synced");
                sonarui.setBottomBarInfo();
                comcenter.resizeComCenter();
            }
        });
    },updateChatsFromState: function(friends) {
        if ($(".comcenter-chat-taskbar").length) {
            var hashedFriends = {};
            for (var i in friends) {
                var friend = friends[i];
                hashedFriends[friend.userId] = friend;
            }
            $(".comcenter-chat-taskbar").each(function(e) {
                var chatId = $(this).attr("rel");
                var su = $S("chat-surface-container-" + chatId);
                var state = su.getState();
                for (var i in state["chat"]["users"]) {
                    var user = state["chat"]["users"][i];
                    if (hashedFriends[user.userId] != null) {
                        state["chat"]["users"][i] = hashedFriends[user.userId];
                    }
                }
                $S("chat-surface-container-" + chatId).update({"chat": {"users": state.chat.users}});
                comcenter.scrollChatToBottom(chatId, true);
            });
        }
    },getUserFromFriendsList: function(userId) {
        var state = $S("comcenter-surface-friends").getState().friendscomcenter;
        for (var i in state) {
            var user = state[i];
            if (user.userId == userId) {
                return user;
            }
        }
        return false;
    },_updateChannelUsers: function(userId, addUser) {
        var comcenterParty = $(".comcenter-party-chat:first");
        if (!comcenterParty.length) {
            S.debug("Could not find party");
            return false;
        }
        S.debug("#got chatId, " + comcenterParty.attr("rel"));
        var state = $S("chat-surface-container-" + comcenterParty.attr("rel")).getState();
        if (state.chat.channelUsers == null) {
            state.chat.channelUsers = [];
        }
        if (addUser) {
            state.chat.channelUsers.push("" + userId);
        } else {
            for (var i in state.chat.channelUsers) {
                var otherUserId = state.chat.channelUsers[i];
                if (otherUserId == userId) {
                    state.chat.channelUsers.splice(i, 1);
                    break;
                }
            }
        }
        S.debug("State added!");
        $S("chat-surface-container-" + comcenterParty.attr("rel")).setState(state);
        $S("chat-surface-header-" + comcenterParty.attr("rel")).setState(state);
        $S("chat-surface-header-" + comcenterParty.attr("rel")).refresh();
    },partyUpdateChannel: function(userId, channelId) {
        $S("comcenter-surface-taskbar").refresh();
        if (!$("#comcenter-party-voice-icons").length) {
            return false;
        }
        var comcenterParty = $(".comcenter-party-chat:first");
        var user = {"userId": userId,"isInVoice": false};
        if (channelId > 0) {
            user.isInVoice = true;
        } else {
        }
        if (comcenterParty.length) {
            S.debug("rendering chat footer");
            $S("comcenter-chat-footer-" + comcenterParty.attr("rel")).refresh();
        }
        comcenter._updateChannelUsers(userId, user.isInVoice);
        $S("comcenter-party-voice-icons").update(user);
        $S("comcenter-party-voice").refresh();
        sonarui.setBottomBarInfo();
    },partyUserSpeaking: function(userId, isSpeaking, isMuted) {
        if (!$("#comcenter-party-voice-icons").length) {
            return false;
        }
        var user = {"userId": userId,"isInVoice": true,"isSpeaking": isSpeaking,"isMuted": isMuted};
        $S("comcenter-party-voice-icons").update(user);
    },joinPartyFromForm: function(form) {
    },showChangePartyPopup: function(chatId) {
        popup.render("partychange", {data: {chatId: chatId}});
    },joinPartyChat: function(chatId) {
        if (S.globalContext.userContext.isInParty > 0 && chatId != S.globalContext.userContext.isInParty) {
            comcenter.showChangePartyPopup(chatId);
        } else {
            comcenter._doJoinPartyChat(chatId);
        }
    },_doJoinPartyChat: function(chatId) {
        $.ajax({url: $("#joinChatParty-urlaction").val().replace("#CHATID#", chatId),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                switch (response.message) {
                    case "NO_CHAT":
                        base.showReceipt("Could not find Party", "skull");
                        break;
                    case "CHAT_FULL":
                        base.showReceipt("Sorry, Party is full", "skull");
                        break;
                    case "CHAT_CLOSED":
                        base.showReceipt("Sorry, Party is invite only", "skull");
                        break;
                    case "ALREADY_IN_CHAT":
                        base.showReceipt("Already in that Party", "skull");
                        comcenter.openChat(chatId);
                        break;
                    case "OK":
                        base.showReceipt("You joined the Party!");
                        break;
                }
            })});
    }};
var objectCookieState = {load: function(object) {
        var state = Surface.cookieGet(object.cookieName);
        if (state != null && state != "") {
            object["state"] = S.parseJSON(state);
        }
    },save: function(object) {
        Surface.cookieSet(object.cookieName, S.encodeJSON(object.state), 1, "/");
    }};
var comment = {onPageShow: function() {
        $("#comment-post-form input:submit").pageBind("click", function() {
            return false;
        });
    },init: function(template) {
        Push.bind("CommentAdded", this.onCommentAdded);
    },onCommentAdded: function(event) {
        S.debug("CommentAdded");
        var state = $S("comment" + event.data.itemId).getState();
        state.data.comments[state.data.comments.length] = event.data;
        $S("comment" + event.data.itemId).update({data: state.data});
    },initPostInput: function() {
        $(".comment-write-commenttext").each(function() {
            var $this = $(this);
            $this.val($this.attr("title"));
        });
        $(".comment-write-commenttext").pageBind("focus", function() {
            var $this = $(this);
            if ($this.val() == $this.attr("title")) {
                $this.val("");
            }
            if (!$this.hasClass("increased-height")) {
                $this.addClass("increased-height");
                $this.animate({height: $this.height() * 3}, 300);
            }
        });
        $(".comment-write-commenttext").pageBind("blur", function() {
            var $this = $(this);
            if ($this.val() == "") {
                $this.val($this.attr("title"));
            }
        });
    },addComment: function(id, type, form) {
        if (form != undefined) {
            var url = $(form).attr("action");
        } else {
            var url = "/all/en/comment/postcomment/" + id + "/" + type + "/";
        }
        var submitButton = $(form).find("input[type=submit]:first");
        submitButton.attr("disabled", 1);
        $.post(url, {comment: $("#write-comment-" + id).val(),"post-check-sum": S.globalContext.session.postChecksum}, function(response) {
            submitButton.attr("disabled", 0);
            if (response.error) {
                UserMessageBox.show(response.message, UserMessageBox.MSG_ERROR);
                return;
            }
            if (response.type == UserMessageBox.MSG_SUCCESS) {
                try {
                    if (response.data.redirectUrl) {
                        base.redirect(response.data.redirectUrl);
                        return;
                    }
                } catch (Error) {
                }
                var state = $S("comment" + id).getState();
                state.data.comments[state.data.comments.length] = response.data.comment;
                $S("comment" + id).update({data: state.data});
                $("#write-comment-" + id).val("");
                $("#comment" + id).find(".comment-body:last").hide().slideToggle();
            } else {
                S.debug("Error adding comment: " + response.message);
            }
        });
    }};
var consolefeed = {init: function() {
    }};
var coop = {currentMission: false,_coopGamesActive: [],setCurrentTabAsActive: function(coopId) {
        S.debug("COOP: Added coopId: " + coopId + " as active");
        coop._coopGamesActive.push(coopId);
        S.debug("COOP: Current active Coop ids, ");
        S.debug(coop._coopGamesActive);
    },isTabCoopActive: function(coopId) {
        S.debug("COOP: Checking coopId active: " + coopId);
        var coopIdActive = $.inArray(coopId, coop._coopGamesActive) != -1;
        S.debug("COOP: CoopId active: " + coopIdActive);
        return coopIdActive;
    },removeCoopIdFromActive: function(coopId) {
        S.debug("COOP: Removed coopId: " + coopId + " as active");
        for (var i = 0; i < coop._coopGamesActive.length; ) {
            if (coop._coopGamesActive[i] === coopId) {
                coop._coopGamesActive.splice(i, 1);
            } else {
                ++i;
            }
        }
    },_fetchStats: function(callback) {
        var callback = callback || false;
        var coopBodyFetch = $("#coop-body-fetch-url");
        if (coopBodyFetch.length) {
            var url = coopBodyFetch.attr("url");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        var htmlHeader = $S("coop.createheader").render(response.data);
                        var htmlBody = $S("coop.createbody").render(response.data);
                        coopBodyFetch.html(htmlHeader + htmlBody);
                        var chapters = $S.callFunction("common.getCoopChaptersVenice");
                        for (var i = 0; i < chapters.length; i++) {
                            var levels = chapters[i].levels;
                            for (var ii = 0; ii < levels.length; ii++) {
                                var m = levels[ii].missions;
                                $(".coop-mission-" + m.name).data({"mission": m});
                            }
                        }
                        coop.initMissions();
                        if (callback) {
                            callback();
                        }
                    }
                }, false)});
        }
    },onPageShow: function() {
        Push.bind("CoopLevelCompleted", function(e) {
            S.debug("Got CoopLevelCompleted, updating stats and clicking on level");
            S.debug(e);
            coop._fetchStats(function() {
                var coopLevelFinished = e.data.level || "COOP_003";
                $("#coop-mission-" + coopLevelFinished).click();
                base.showReceipt("CO-OP stats updated!");
            });
        });
        $(["/public/coop/cards/652x310/coop_002.jpg", "/public/coop/cards/652x310/coop_003.jpg", "/public/coop/cards/652x310/coop_006.jpg", "/public/coop/cards/652x310/coop_007.jpg", "/public/coop/cards/652x310/coop_009.jpg", "/public/coop/cards/652x310/coop_010.jpg"]).preLoad();
        $(".coop-mission-show-difficulty .common-selector-alt li").live("click", function() {
            $(this).addClass("selected").siblings().removeClass("selected");
        });
        coop._fetchStats();
        $("#quickmatch-difficulty li").pageLive("click", function() {
            var $this = $(this);
            var difficulty = $this.data("difficulty").toUpperCase();
            joinflow.checkJoinCoopRequirements(function(ok) {
                if (ok) {
                    var unlockedMission = $(".coop-card:not(.disabled)");
                    var mission = "any";
                    var url = $("#coopStartPublic-urlaction").val().replace("#LEVEL#", mission).replace("#DIFFICULTY#", difficulty);
                    base.ajaxPostJson(url, function(s, r) {
                        switch (r.message) {
                            case "OK":
                                base.showReceipt("CO-OP Quick match started!");
                                var coopGame = r.data;
                                S.debug("Coop game:");
                                S.debug(coopGame);
                                gamemanager.coopPublicStart(coopGame);
                                break;
                            default:
                                base.showReceipt("Could not start CO-OP Public.", receiptTypes.ERROR);
                        }
                        coop.closeMission();
                    });
                }
                $("body").click();
            });
        });
    },initMissions: function() {
        coop.minifiedtryListCoopMissions();
        $(".coop-missions-mission:not(.disabled)").css("cursor", "pointer");
        var html = $S("campaign.score").render({});
        var campaignScore = "<div id='campaign-score'>" + html + "</div>";
        common.tooltipBubble(".campaign-progress-score", campaignScore, {tail: {align: "top"},themeName: "black",mouseOut: "hide",width: "310px",position: "right",align: "top",alwaysVisible: false});
        $(".coop-card.disabled").battleBubble(S.translations["ID_WEB_COOP_UNLOCK_MISSION_TO_ACCESS_NEXT"]);
        $(".coop-open-gm").pageLive("click", gamemanager.show);
        $(".coop-start-play-with-friend").pageLive("click", function(e) {
            e.preventDefault();
            var userId = $(this).attr("rel");
            joinflow.checkJoinCoopRequirements(function(ok) {
                if (ok) {
                    coop.inviteToCoOp(userId);
                    $("#coop-mission-info-header-launch").click();
                }
            });
        });
        $(".coop-public-showSettings").pageLive("click", function(e) {
            e.preventDefault();
            $(".coop-public-advanced-settings").toggle();
            return false;
        });
        $(".coop-mission-close-container").pageLive("click", function() {
            coop.closeMission();
        });
        $("#coop-play-public, .coop-start-play-with-random").pageLive("click", function(e) {
            joinflow.checkJoinCoopRequirements(function(ok) {
                if (ok) {
                    var mission = $("#coop-current-mission").val();
                    var difficulty = $(".coop-mission-info-difficulty ul li.selected div").attr("class").toUpperCase();
                    var url = $("#coopStartPublic-urlaction").val().replace("#LEVEL#", mission).replace("#DIFFICULTY#", difficulty);
                    base.ajaxPostJson(url, function(s, r) {
                        switch (r.message) {
                            case "OK":
                                base.showReceipt("CO-OP Public Matchmake started!");
                                var coopGame = r.data;
                                S.debug("Coop game:");
                                S.debug(coopGame);
                                gamemanager.coopPublicStart(coopGame);
                                $("#coop-mission-info-header-launch").click();
                                break;
                            default:
                                base.showReceipt("Could not start CO-OP Public.", receiptTypes.ERROR);
                        }
                        coop.closeMission();
                    });
                } else {
                    coop.closeMission();
                }
            });
        });
        $("#coop-mission-info-header-launch").pageLive("click", function(e) {
            $S("coop-dropdown-friends").update({"friends": null});
            var playWithFriends = $(this);
            var dropdown = playWithFriends.next(".base-button-dropdown:first");
            if (dropdown.length && !playWithFriends.hasClass("disabled")) {
                coop.populate_friends_list(0);
            }
        });
        $("#coop-mission-info-wrapper .pagination-type-next").pageLive("click", function(e) {
            e.preventDefault();
            var current_page = $("#friends-pagination").data("page");
            coop.populate_friends_list(current_page + 1);
        });
        $("#coop-mission-info-wrapper .pagination-type-prev").pageLive("click", function(e) {
            e.preventDefault();
            var current_page = $("#friends-pagination").data("page");
            if (current_page > 0) {
                coop.populate_friends_list(current_page - 1);
            }
        });
        $("#coop-missions-compare-friends").change(function(d) {
            var userId = $("#coop-missions-compare-friends").val();
            S.info("Selected: " + userId);
            var url;
            if (userId.length == 0) {
                url = $("#coop-createBodyFetch-compare-urlaction").val();
            } else {
                url = $("#coop-createBodyFetch-compare-urlaction").val().replace("#COMPAREUSERID#", userId);
            }
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        S.info(response);
                        $S("coop-cards").update({"takenLevels": response.data.takenLevels,"unlockedLevels": response.data.unlockedLevels});
                    }
                }, false)});
        });
    },init: function(template) {
    },populate_friends_list: function(page_to_show) {
        var my_level = $("#coop-current-mission").val();
        var url = $("#coop-getmissionaccess-urlaction").val().replace("#LEVEL#", my_level).replace("#PAGE#", page_to_show);
        base.ajaxPostJson(url, function(s, r) {
            $S("coop-dropdown-friends").update({"friends": []});
            $S("coop-dropdown-friends").update({"pages": r.data.pages,"friends": r.data.friends,"friendAccess": r.data.friendsWithAccess,"page": page_to_show});
        });
    },tryListCoopMissions: function(dontShowPopup) {
        if (launcher.getInstance()) {
            var game = S.globalContext["realm"]["game"];
            launcher.isGameInstalled(game, function(installed) {
                var gamePatchedCallback = function(game, wasUpToDate) {
                    joinflow.hidePopup(true);
                    coop.addShowMissionHook();
                };
                if (installed) {
                    joinflow.hidePopup(true);
                    coop.addShowMissionHook();
                } else {
                    joinflow.showInstallGameButton(game, null, coop.tryListCoopMissions);
                }
            });
        } else {
            joinflow.showPluginPopup(false, false, coop.tryListCoopMissions);
        }
    },minifiedtryListCoopMissions: function(dontShowPopup) {
        var game = S.globalContext["realm"]["game"];
        joinflow.hidePopup(true);
        coop.addShowMissionHook();
    },closeMission: function() {
        $("#coop-mission-fixed-container").fadeOut("fast", function() {
            $(this).remove();
        });
        $("#coop-mission").fadeOut("fast", function() {
            $("html").removeClass("coop-page");
        });
    },addShowMissionHook: function() {
        S.debug("adding clicks");
        $(".coop-container:first").delegate(".coop-card:not(.disabled)", "click", function() {
            S.info("coop-card click");
            var mName = $(this).data("mission");
            var mission = $(".coop-mission-" + mName).data();
            coop.currentMission = mission;
            coop.showMission(mission);
        });
        $(".coop-card:not(.disabled):first").click();
    },kick: function() {
        $.get("/");
    },inviteToCoOp: function(userId) {
        S.info("Invited userId: " + userId);
        var mission = $("#coop-current-mission").val();
        var difficulty = $(".coop-mission-info-difficulty ul li.selected div").attr("class").toUpperCase();
        var ownerPersonaId = $("#coop-owner-persona").data("id");
        var url = $("#inviteCoopGame-urlaction").val();
        url = url.replace("#OWNERPERSONAID#", ownerPersonaId).replace("#USERID#", userId).replace("#LEVEL#", mission).replace("#DIFFICULTY#", difficulty);
        $.ajax({url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                switch (response.message) {
                    case "INVITED":
                        base.showReceipt("Invite to CO-OP sent!");
                        coop.closeMission();
                        coop.setCurrentTabAsActive(response.data.coopId);
                        break;
                    case "INVALID_INVITE":
                        base.showReceipt("Invalid invite to CO-OP.", receiptTypes.ERROR);
                        break;
                    case "INVALID_RECIPIENT":
                        base.showReceipt("Your friends soldier can not be invited. Are you on the same platform?", receiptTypes.ERROR);
                        break;
                    case "FRIEND_NO_UNLOCK":
                        base.showReceipt("Your friend has not unlocked that level.", receiptTypes.ERROR);
                        break;
                    case "INVALID_INVITE_PERSONA":
                        base.showReceipt("Invalid invite to CO-OP (invalid persona).", receiptTypes.ERROR);
                        break;
                    case "NOT_EMPTY":
                        base.showReceipt("No free slot available", receiptTypes.ERROR);
                        break;
                    case "NOT_FOUND":
                        base.showReceipt("CO-OP game not found", receiptTypes.ERROR);
                        break;
                }
            }, false)});
    },missionStats: {},showMission: function(mission) {
        S.info(mission);
        var missionName = mission.mission.name;
        var ownerPersonaId = $("#coop-owner-persona").data("id");
        mission.gotGame = mission.gotPlugin = true;
        mission.completedDifficulties = false;
        mission.friendsLeaderboard = false;
        var url = $("#coop-getMissionData-urlaction").val().replace("#PERSONAID#", ownerPersonaId).replace("#LEVEL#", missionName);
        base.ajaxPostJson(url, function(s, r) {
            try {
                $S("surface-coop-completion").update({"completedDifficulties": r.data.completedDifficulties});
                $S("surface-coop-friendsleaderboard").update({"friendsLeaderboard": r.data.friendsLeaderboard});
                coop.missionStats[missionName] = r.data;
            } catch (e) {
                S.error(e);
            }
        });
        $S("coop-info-mission").update(mission);
        $(".coop-card").removeClass("selected");
        $("#coop-mission-" + missionName).addClass("selected");
    }};
var debug = {audio: [],lines: 80,lineWidth: 10,avgAudio: 0,samples: 0,displayAudio: function(v) {
        var avg = 0 + parseInt((v.avgAmp / 512)) * 32;
        var peak = 0 + parseInt((v.peakAmp / 512)) * 32;
        debug.audio.push({"avg": avg,"peak": peak});
        if (debug.audio.length > debug.lines) {
            debug.audio.shift();
        }
        debug.drawLines();
        $("#voice-vastate").attr("className", v.vaState ? "on" : "off");
        $("#voice-vastate").html("Voice activation is " + (v.vaState ? "on" : "off"));
        $("#voice-xmit").attr("className", v.xmit ? "active" : "not-sending");
        $("#voice-xmit").html("Sending? " + (v.xmit ? "SENDING" : "NOT SENDING"));
        if (avg > 1) {
            debug.samples++;
            debug.avgAudio += avg;
            $("#avgAudio").html("Avg: " + debug.avgAudio / debug.samples + " samples: " + debug.samples);
        }
    },drawLines: function() {
        debug.context.clearRect(0, 0, debug.canvasWidth, debug.canvasHeight);
        var audioLength = debug.audio.length;
        for (var i = 0 in debug.audio) {
            var elem = debug.audio[audioLength - i - 1];
            var alpha = 1;
            if (i > debug.lines - 20) {
                alpha -= (20 - (debug.lines - i)) * 0.05;
            }
            debug.context.fillStyle = "rgba(255, 51, 51, " + (alpha) + ")";
            var y = debug.halfCanvas - (elem.peak / 2);
            var height = elem.peak;
            debug.context.fillRect((debug.lineWidth + 1) * i, y, debug.lineWidth, height);
            debug.context.fillStyle = "rgba(0, 255, 0, " + (alpha) + ")";
            var y = debug.halfCanvas - (elem.avg / 2);
            var height = elem.avg;
            debug.context.fillRect((debug.lineWidth + 1) * i, y, debug.lineWidth, height);
        }
    },onPageShow: function() {
    },init: function(template) {
        return false;
        debug.canvasWidth = $("#voice-activation-canvas").width();
        debug.canvasHeight = $("#voice-activation-canvas").height();
        setTimeout(function() {
            $("#voiceSens").val(ESN.Sonar.getVoiceSensitivity());
            $("#voiceVolume").val(ESN.Sonar.getCaptureVolume());
        }, 1000);
    }};
var debugfeed = {onPageShow: function() {
    },init: function(template) {
    }};
var demo = {onPageShow: function() {
    },init: function(template) {
        $("input#stop").attr("disabled", "disabled");
        $("input#start").attr("disabled", "");
        $("#demo_start").click(function() {
            demo.start($("#startform"));
        });
        $("#demo_stop").click(function() {
            demo.stop($("#stopform"));
        });
        $("#demo_reset").click(function() {
            demo.reset($("#resetform"));
        });
        $("#demo_notification_start").click(function() {
            demo.startNotification($("#startNotificationForm"));
        });
        $("#demo_notification_stop").click(function() {
            demo.stopNotification($("#stopNotificationForm"));
        });
        $("#demo_notification_reset").click(function() {
            demo.resetNotification($("#resetNotificationForm"));
        });
    },start: function(form) {
        if ($("input#startUserId").val() == "") {
            alert("Enter a username");
            return false;
        }
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#uuid").val(response);
            $("input#demo_start").attr("disabled", "disabled");
            $("input#demo_stop").attr("disabled", "");
        });
    },stop: function(form) {
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#uuid").val("");
            $("input#demo_start").attr("disabled", "");
            $("input#demo_stop").attr("disabled", "disabled");
        });
    },reset: function(form) {
        $("input#resetuserId").val($("input#startUserId").val());
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#uuid").val("");
            $("input#demo_start").attr("disabled", "");
            $("input#demo_stop").attr("disabled", "disabled");
        });
    },startNotification: function(form) {
        if ($("input#startNotificationUsername").val() == "") {
            alert("Enter a username");
            return false;
        }
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#notificationuuid").val(response);
            $("input#demo_notification_start").attr("disabled", "disabled");
            $("input#demo_notification_stop").attr("disabled", "");
        });
    },stopNotification: function(form) {
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#notificationuuid").val("");
            $("input#demo_notification_start").attr("disabled", "");
            $("input#demo_notification_stop").attr("disabled", "disabled");
        });
    },resetNotification: function(form) {
        $("input#resetnotificationuserId").val($("input#startNotificationUsername").val());
        $.post(form.attr("action"), form.serialize(), function(response) {
            $("input#notificationuuid").val("");
            $("input#demo_notification_start").attr("disabled", "");
            $("input#demo_notification_stop").attr("disabled", "disabled");
        });
    }};
var devblog = {onPageShow: function() {
        $("#devblog-leave-comment").pageLive("click", function(e) {
            e.preventDefault();
            base.scrollTo("#comment-post-form");
        });
    },init: function(template) {
        devblog.getBlogTitle();
    },getBlogTitle: function() {
        blog_title = $(".devblog-index-item h1").html();
        return (blog_title);
    }};
var download = {onPageShow: function() {
    },init: function(template) {
        var setOK = function(e) {
            e.addClass("download-status-ok");
            e.removeClass("download-status-error");
            e.removeClass("download-status-pending");
        };
        var setERR = function(e) {
            e.addClass("download-status-error");
            e.removeClass("download-status-ok");
            e.removeClass("download-status-pending");
        };
        var launchstatus = $("#download-status-launcher");
        var exestatus = $("#download-status-executable");
        if (launchstatus) {
            var checkPlugin = function() {
                if (launcher.checkVersion()) {
                    setOK(launchstatus);
                    var checkExe = function() {
                        launcher.isGameInstalled(games.BFBC2, function(result) {
                            if (result) {
                                setOK(exestatus);
                            } else {
                                setERR(exestatus);
                                setTimeout(checkExe, 3000);
                            }
                        });
                    };
                    checkExe();
                } else {
                    setERR(launchstatus);
                    setERR(exestatus);
                    setTimeout(checkPlugin, 3000);
                }
            };
            checkPlugin();
        }
    },displayPatcher: function() {
        $("#patcher-events").show();
    }};
var errorlogging = {init: function() {
    }};
var feed = {GENERAL: 1,SOCIAL: 2,GAME: 4,ALL: 15,showFeedItems: 10,showFeedIncrement: 10,selectedFeed: "feed-filter-all",onPageShow: function() {
        $("body").pageDelegate(".feed-bundle-expand-form", "submit", function(e) {
            return feed.unBundle(this);
        });
        $("body").pageDelegate(".feed-bundle-contract-form", "submit", function(e) {
            return feed.hideSubEvents(this);
        });
        $("body").pageDelegate(".feed-comment-form", "submit", function(e) {
            return feed.feedEventComment(this);
        });
        $("body").pageDelegate(".feed-comment-text-not-clicked", "click", function(e) {
            return feed.feedEventCommentShow(this);
        });
        $("body").pageDelegate(".feed-comment-text-not-clicked", "click", function(e) {
            return feed.feedEventCommentShow(this);
        });
        $(".feed-comment-button").hide();
        $("a.feed-comment-item").pageLive("click", function(e) {
            return feed.feedEventCommentShow($(this).parents(".feed-single-item:first").find(".feed-comment-text-not-clicked"));
        });
        $("a.feed-show-likes").pageLive("click", function(e) {
            e.preventDefault();
            var url = $(this).data("url");
            $.get(url, function(response) {
                popup.render("feedlikes", response.data, true, false);
            }, "json");
        });
        $(".feed-showlikes-addfriend").pageLive("click", function() {
            var $this = $(this);
            var url = $this.attr("data-path");
            $this.attr("disabled", 1);
            $.ajax({url: url,dataType: "json",type: "POST",data: "post-check-sum=" + S.globalContext.session.postChecksum,complete: base.onComplete(function(success, response) {
                    if (success) {
                        base.showReceipt("Friend request sent!");
                    } else {
                        $this.removeAttr("disabled");
                        base.showReceipt("Could not send friend request!", "skull");
                    }
                }, false)});
        });
        $(".feed-comments-show").pageLive("click", function(e) {
            var clickedElement = $(this);
            var itemId = $(this).attr("itemId");
            var url = $("#feedGetComments-urlaction").val().replace("#ITEMID#", itemId);
            base.ajaxGetJson(url, function(success, response) {
                if (success) {
                    var comments = response.data.comments;
                    var state = $S("comments-for-" + itemId).getState()["comments"] = comments;
                    $S("comments-for-" + itemId).refresh();
                    clickedElement.hide();
                } else {
                    base.showReceipt("Could not retrieve comments.", "skull");
                }
            });
        });
        $(".feed-textlimit-count").pageLive("keydown", function() {
            var max_text_length = 1000;
            var max_text_length_warning = max_text_length / 2;
            var textLength = $(this).val().length;
            var remaining = max_text_length - textLength;
            if (textLength > max_text_length) {
                $(this).val($(this).val().substr(0, max_text_length));
            }
            if (textLength > max_text_length_warning) {
                $(this).siblings(".feed-textlimit-counter").text(remaining.toString() + " characters remaining");
            } else {
                $(this).siblings(".feed-textlimit-counter").text("");
            }
        });
        $("body").pageBind("click", function(e) {
            if ($(e.target).parents(".feed-story-comments").length) {
                return true;
            }
            $(".feed-comment-text-clicked").each(function() {
                var $this = $(this);
                if ($this.val().length == 0) {
                    $this.removeClass("feed-comment-text-clicked").addClass("feed-comment-text-not-clicked").val("Write a comment...");
                    $this.parents("form:first").find(".feed-comment-button").hide();
                }
            });
        });
        $("form.feed-like-item").pageLive("click", function() {
            return feed.feedEventLike(this);
        });
        $("form.feed-unlike-item").pageLive("click", function() {
            return feed.feedEventUnlike(this);
        });
        $(".feed-events-nav li a").pageLive("click", function() {
            return feed.getFeed(this);
        });
        $("#feed-load-more").pageLive("click", function() {
            $(this).parent().hide();
            $("#feed-view-more-events-loading").show();
            return feed.getMoreFeed(this);
        });
    },init: function(template) {
        Push.bind("FeedEventCreated", feed.feedAdded);
        Push.bind("FeedReceivedStatusmessage", feed.feedAdded);
        Push.bind("FeedEventLikeUpdate", feed.feedEventLikeUpdate);
        Push.bind("FeedEventCommentUpdate", feed.feedEventCommentUpdate);
        Push.bind("FeedLive", feed.liveFeed);
    },liveFeed: function(e) {
        var myObj = e.data.event;
        var el = $S("livefeed").insert(myObj);
        $(".feed-livefeed-item:eq(4)").css("border-bottom-width", "0").parent().next().remove();
    },hideSubEvents: function(form) {
        $(form).parent().children(".feed-sub-events").empty();
        $(form).hide();
        $(form).parent().children(".feed-bundle-expand-form").show();
        return false;
    },unBundle: function(form) {
        var formObject = $(form);
        var submitButton = formObject.find("input[name=feed-unbundle-btn]");
        submitButton.attr("disabled", "disabled");
        $.ajax({url: formObject.attr("action"),dataType: "json",data: formObject.serialize(),success: function(data) {
                $.each(data.feedEvents, function() {
                    formObject.hide();
                    submitButton.removeAttr("disabled");
                    $(form).parent().children(".feed-bundle-contract-form").show();
                    var feedTypeTemplate = "feed." + this.event + ".render";
                    if ((typeof eval(feedTypeTemplate)) == "function") {
                        var html = eval(feedTypeTemplate + "({sessionUserId: data.sessionUserId, item: this, subEvent: 1});");
                        var container = formObject.parent().children(".feed-sub-events");
                        $(container).append(html);
                        $(".feed-comment-form").hide();
                    } else {
                        common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "No template for feed type: " + this.event});
                    }
                });
            },error: function(XMLHttpRequest, textStatus) {
                submitButton.removeAttr("disabled");
                common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "Failed to expand feed: " + textStatus});
            }});
        return false;
    },feedEventLikeUpdate: function(e) {
        S.debug(e);
        var like = e.data;
        var state = $S("feed-like-surface-" + like.feedItemId).getState();
        var foundUser = false;
        for (var i in state.item.likeUserIds) {
            var userId = state.item.likeUserIds[i];
            if (userId == like.ownerId) {
                foundUser = true;
                break;
            }
        }
        if (like.type == "deleted" && foundUser) {
            state.item.likeUserIds.splice(i, 1);
        } else {
            if (!foundUser && like.type == "created") {
                if (state.users == undefined) {
                    state.users = {};
                }
                if (state.item.likeUserIds == undefined) {
                    state.item.likeUserIds = [];
                }
                state.item.likeUserIds.push(like.ownerId);
            }
        }
        $S("feed-like-surface-" + like.feedItemId).setState(state);
        $S("feed-like-surface-" + like.feedItemId).refresh();
    },feedEventCommentUpdate: function(e) {
        var feedComment = e.data;
        $S("comments-for-" + feedComment.itemId).insert(feedComment, {"location": Surface.Location.bottom});
        $("#feed-comments-item-container-" + feedComment.itemId).find("div.feed-comments-item:last").slideDown(280);
    },feedAdded: function(e) {
        var feedEventType = e.data.event;
        var feedCategory = e.data.feedCategory;
        var feedTypeTemplate = "feed." + feedEventType + "";
        if ((typeof eval(feedTypeTemplate + ".render")) != "function") {
            S.debug("No template found for feed event type: " + feedEventType);
            return;
        }
        var html = $S(feedTypeTemplate).render({item: e.data});
        var doUpdate = false;
        if (feed.selectedFeed == "feed-filter-all") {
            doUpdate = true;
        } else {
            if (feed.selectedFeed == "feed-filter-game" && (feedCategory & feed.GAME)) {
                doUpdate = true;
            } else {
                if (feed.selectedFeed == "feed-filter-social" && (feedCategory & feed.SOCIAL)) {
                    doUpdate = true;
                }
            }
        }
        if (doUpdate) {
            if ($("div.feed-nothing-happening").length) {
                html = '<ul class="feed-events base-menu">' + html + "</ul>";
                $("div.feed-nothing-happening").hide();
                $("#feed-container").prepend(html).find("li:first").hide().slideDown(200);
            } else {
                $("#feed-container .feed-events").prepend(html).find("li:first").hide().slideDown(200);
            }
            if (feedEventType == "gamereport" || feedEventType == "rankedup" || feedEventType == "receivedaward") {
                feed.initializeFeedTipies();
            }
        }
    },getMoreFeed: function(a) {
        feed.showFeedItems = feed.showFeedItems + feed.showFeedIncrement;
        var start = $(a).attr("start");
        var url = $(a).attr("href");
        var feedNavContainer = $("#feed-events-nav").parent("ul");
        var feedContext = "all";
        $(a).attr("start", parseInt(start) + 10);
        url += "?start=" + start;
        return feed.replaceWithFilteredFeed(url, feedNavContainer, feedContext);
    },getFeed: function(a) {
        var anchor = $(a);
        var url = anchor.attr("href");
        feed.selectedFeed = anchor.attr("id");
        var feedNavContainer = anchor.parents("ul");
        var feedContext = feedNavContainer.attr("id").split("-").pop();
        return feed.replaceWithFilteredFeed(url, feedNavContainer, feedContext);
    },initializeFeedTipies: function() {
    },replaceWithFilteredFeed: function(url, feedNavContainer, feedContext) {
        $.ajax({url: url,dataType: "json",success: function(response) {
                var html = feed.index.render({feed: response.data.feedEvents,sessionUserId: response.data.sessionUserId,nowTimestamp: response.data.nowTimestamp});
                $("div#feed-container").append(html);
                $("#feed-view-more-events-loading").hide();
                $("#feed-load-more").parent().show();
                if (!response.data.feedEvents.length) {
                    S.debug("Hiding filter");
                    $("#feed-load-more").parent().hide();
                }
                feed.initializeFeedTipies();
            },error: function() {
                common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "Battle log could not be filtered"});
                $("#feed-load-more").parent().show();
                $("#feed-view-more-events-loading").hide();
            }});
        return false;
    },feedEventCommentShow: function(a) {
        $(a).val("");
        $(a).removeClass("feed-comment-text-not-clicked").addClass("feed-comment-text-clicked");
        $(a).parents(".feed-single-item").find("textarea[name=comment]").focus();
        $(a).parents(".feed-single-item").find(".feed-comment-form").show();
        $(a).parents(".feed-single-item").find("input[type=submit]").show();
        $(a).parents(".feed-single-item").find(".feed-comment-submit-button-area").show();
        $(a).parents(".feed-single-item").find("textarea[name=comment]").focus();
        return false;
    },feedEventCommentHide: function(form) {
    },feedEventComment: function(form) {
        var formObject = $(form);
        var comment = formObject.find("textarea[name=comment]");
        if ($.trim(comment.val()).length < 1) {
            return false;
        }
        if (comment.hasClass("feed-comment-text-not-clicked")) {
            return false;
        }
        $(".feed-textlimit-counter").text("");
        var data = formObject.serialize();
        comment.removeClass("feed-comment-text-clicked").addClass("feed-comment-text-not-clicked disabled");
        formObject.find("input[name=feedCommentSubmitBtn]").hide();
        comment.val("Write a comment...");
        $.ajax({url: formObject.attr("action"),dataType: "json",type: "POST",data: data,success: function(response) {
                comment.val("");
                var itemId = formObject.attr("itemId");
                comment.removeClass("disabled");
                formObject.find("textarea[name=comment]").val("Write a comment...");
            },error: function() {
                common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "Battle log comment could not be created"});
            },complete: function() {
            }});
        formObject.find("input[name=feedCommentSubmitBtn]").removeAttr("disabled");
        return false;
    },feedEventLike: function(form) {
        var formObject = $(form);
        formObject.hide();
        formObject.parent().find("form.feed-unlike-item").show();
        $.ajax({url: formObject.attr("action"),dataType: "json",type: "POST",data: formObject.serialize(),success: function(response) {
                formObject.parents(".feed-single-item").find(".feed-item-likes").show();
            },error: function() {
                common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "Battle log entry could not be liked"});
            },complete: function() {
            }});
        return false;
    },feedEventUnlike: function(form) {
        var formObject = $(form);
        formObject.hide();
        formObject.parent().find("form.feed-like-item").show();
        $.ajax({url: formObject.attr("action"),dataType: "json",type: "POST",data: formObject.serialize(),success: function(response) {
            },error: function() {
                common.ajaxNotify({"type": UserMessageBox.MSG_ERROR,"message": "Battle log entry could not be unliked"});
            },complete: function() {
            }});
        return false;
    }};
var footer = {hintInterval: 0,currentHint: null,onPageShow: function() {
    },init: function(template) {
        $(".footer-show-poll").pageLive("click", function() {
            var url = $(this).attr("url");
            var pollId = $(this).attr("pollId");
            var viewResult = $(this).attr("viewResult");
            $.ajax({url: url,dataType: "json",type: "POST",data: "pollId=" + pollId + "&viewResult=" + viewResult,complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "POLL":
                            S.debug("got poll");
                            S.debug(response.data);
                            response.data.poll.allowVote = response.data.allowVote;
                            if (response.data.viewResult == "true") {
                                response.data.viewResult = true;
                            }
                            if (response.data.viewResult == "false") {
                                response.data.viewResult = false;
                            }
                            $S("footer-poll-surface").update({poll: response.data.poll,pollTotalVotes: response.data.pollTotalVotes,viewResult: response.data.viewResult});
                            break;
                        case "POLL_NOT_FOUND":
                            S.debug("No poll found");
                            break;
                    }
                }, false)});
        });
        footer.showRandomHint();
        var createHintInterval = function() {
            return setInterval(footer.showRandomHint, 20000);
        };
        footer.hintInterval = createHintInterval();
        $(".footer-hint-next").click(function(e) {
            e.preventDefault(true);
            clearInterval(footer.hintInterval);
            footer.showRandomHint(true);
            footer.hintInterval = createHintInterval();
        });
    },showRandomHint: function(showNext) {
        var $footerHint = $(".footer-hint"), nextHint;
        $footerHint.hide();
        if (!showNext) {
            nextHint = Math.ceil(Math.random() * ($footerHint.length)) - 1;
            nextHint = (footer.currentHint == nextHint ? (nextHint == $footerHint.length - 1 ? 0 : footer.currentHint + 1) : nextHint);
        } else {
            nextHint = (footer.currentHint == $footerHint.length - 1 ? 0 : footer.currentHint + 1);
        }
        footer.currentHint = nextHint;
        $footerHint.eq(nextHint).show();
    }};
var forum = {init: function(template) {
        $("body").pageDelegate(".forum-adminform", "submit", forum.handlePostAction);
        $(document).keypress(function(event) {
            if (Surface.globalContext.componentName != "forum" || /textarea|select/i.test(event.target.nodeName) || event.target.type === "text") {
                return;
            }
            var highlightClass = "common-keyboard-shortcut-highlight";
            var getHighlightClassIndex = function(elements) {
                var highlightIndex = -1;
                elements.each(function(i, element) {
                    if ($(element).hasClass(highlightClass)) {
                        $(element).removeClass(highlightClass);
                        highlightIndex = i;
                        return false;
                    }
                });
                return highlightIndex;
            };
            var elements;
            var element;
            switch (event.which) {
                case 110:
                    elements = $(".forum-start-forum");
                    if (elements.length > 0) {
                        element = $(elements[getHighlightClassIndex(elements) + 1]);
                        if (element.length == 0) {
                            element = $(elements[0]);
                        }
                        element.addClass(highlightClass);
                    }
                    break;
                case 112:
                    elements = $(".forum-start-forum");
                    if (elements.length > 0) {
                        var newIndex = getHighlightClassIndex(elements) - 1;
                        element = (newIndex < 0) ? $(elements[elements.length - 1]) : $(elements[newIndex]);
                        element.addClass(highlightClass);
                    }
                    break;
                case 13:
                    var link = $("." + highlightClass + " .forum-start-forum-title a");
                    if (link.length > 0) {
                        Surface.ajaxNavigation.navigateTo(link.attr("href"));
                    }
                    break;
                case 99:
                    if (Surface.globalContext.actionName == "view") {
                        Surface.ajaxNavigation.navigateTo($(".forum-focus-bar-view-top .common-cleanbutton a").attr("href"));
                    }
                    break;
                case 114:
                    if (Surface.globalContext.actionName == "threadview") {
                        window.setTimeout('$(".common-replyform-form-body").focus()', 1);
                    }
                    break;
            }
        });
    },lastTitleSearch: "",onPageShow: function() {
        $(".forum-show-hidden-post").pageLive("click", function(e) {
            e.preventDefault();
            $(this).parents(".forum-hidden-post-info:first").hide();
            $(this).parents(".forum-hidden-post-info:first").next().show();
            return false;
        });
        $("#forum-multi-remove-button").live("click", function() {
            var postIds = [];
            $(".forum-post-select-checkbox:checked").each(function() {
                postIds.push($(this).attr("data-postId"));
            });
            if (postIds.length == 0) {
                base.showReceipt("No forum posts selected");
                return;
            }
            var url = $(this).attr("data-url") + postIds.join(",") + "/";
            var popupWindow = $($S("popup.confirm").render({"data": {"action": $(this).val(),"url": url}}).replace("##RANDOM_ID##", ("popup-" + Math.random()).replace(".", "")));
            popupWindow = popupWindow.appendTo(".base-center-popups");
            popupWindow.find(".common-popup-close-button").bind("bind", function() {
                popupWindow.remove();
            });
            popupWindow.find(".popup-reportabuse-button-send").bind("click", function() {
                $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                        if (!response.message) {
                            base.showReceipt("Something went wrong. Please try again");
                        } else {
                            if (response.message == "DELETE_POSTS") {
                                for (var i = 0; i < response.data.deletedPostIds.length; i++) {
                                    var postId = response.data.deletedPostIds[i];
                                    $("#post_" + postId).remove();
                                }
                                base.showReceipt(response.data.deletedPostIds.length + " of " + postIds.length + " posts deleted");
                            }
                        }
                        popupWindow.remove();
                    })});
            });
        });
        $("#forum-newthread-topic").pageLive("blur", function(e) {
            var title = $(this).val();
            if (title.length > 0 && title != forum.lastTitleSearch) {
                forum.lastTitleSearch = title;
                forum.doFindSimilar(title, "", function(result) {
                    if (result.success) {
                        S.log(result.success.results);
                        $S("forum-create-thread-search-results").update(result.success);
                    }
                });
            }
        });
        if ($("#forum-search-results").length > 0) {
            forum.submitSearch();
        }
    },handlePostAction: function(e) {
        var form = $(this);
        var data = form.serialize();
        var url = form.attr("action");
        var formArray = form.serializeArray();
        var formHash = {};
        for (var i in formArray) {
            var item = formArray[i];
            formHash[item.name] = item.value;
        }
        var postId = formHash["postId"];
        $.ajax({url: url,data: data,dataType: "json",type: "POST",complete: base.onComplete(function(success, resp) {
                switch (formHash["adminTask"]) {
                    case "deletePost":
                        $("#post_" + postId).remove();
                        break;
                    case "censorPost":
                        $("#post_" + postId + " .forum-threadview-post-text").html("This post has been censored...");
                        break;
                    case "showPost":
                        $("#post_" + postId + " .forum-threadview-post-text").html(resp.data.status);
                        break;
                    case "sticky":
                        base.showReceipt("Thread is now made sticky!");
                        break;
                    case "unsticky":
                        base.showReceipt("Thread is now not sticky anymore!");
                        break;
                    case "lock":
                        base.showReceipt("Thread is now locked!");
                        break;
                    case "unlock":
                        base.showReceipt("Thread is now unlocked!");
                        break;
                    default:
                        S.error("Could not find action -> " + formHash["adminTask"]);
                }
                $(".common-reportbutton-container").removeClass("active");
            }, false)});
        return false;
    },ajaxPost: function(form) {
        var form = $(form);
        $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),success: function(response) {
                if (response.message.length > 0) {
                    UserMessageBox.show(response.message, response.data.type);
                    $(form).hide();
                }
            }});
    },quotePost: function(url) {
        $.get(url, function(resp) {
            var textArea = $("textarea[name=body]");
            $.scrollTo(textArea.val(textArea.val() + $.trim(resp) + "\n").focus(), 300);
        });
    },getForumCategoryTitle: function() {
        category_title = $(".forum-page-title h1").html();
        return (category_title);
    },getThreadTitle: function() {
        thread_title = $(".forum-start-title h1").html();
        return (thread_title);
    },doSearch: function(keywords, callback) {
        var searchUrl;
        var usingSolr = false;
        var urlEl = $("#forum-search-api");
        S.debug(urlEl);
        if (urlEl.length > 0) {
            S.info("using solr");
            usingSolr = true;
            searchUrl = urlEl.val();
        } else {
            if (S.globalContext.staticContext.indexTankApi) {
                searchUrl = S.globalContext.staticContext.indexTankApi + "/v1/indexes/forum/search";
            }
        }
        S.info(searchUrl);
        if (searchUrl) {
            var dataType = "jsonp";
            if (usingSolr) {
                dataType = "json";
            }
            $.ajax({url: searchUrl,dataType: dataType,data: {"q": keywords,"snippet": "text","fetch": "threadId,forumId,title,timestamp"},timeout: 3000,success: function(data) {
                    if (usingSolr) {
                        data = data.data;
                    }
                    callback({"success": data});
                },error: function(jqXHR, textStatus, errorThrown) {
                    callback({"error": {"textStatus": textStatus,"err": errorThrown}});
                }});
        }
    },doFindSimilar: function(title, body, callback) {
        var searchUrl = "/bf3/forum/dofindsimilar";
        S.info(searchUrl);
        if (searchUrl) {
            $.ajax({url: searchUrl,dataType: "json",data: {"title": title,"body": body},timeout: 3000,success: function(data) {
                    callback({"success": data.data});
                },error: function(jqXHR, textStatus, errorThrown) {
                    callback({"error": {"textStatus": textStatus,"err": errorThrown}});
                }});
        }
    },submitSearch: function() {
        var keywords = $("input[name=q]").val();
        var surf = $S("forum-search-results");
        forum.doSearch(keywords, function(result) {
            if (result.success) {
                S.log(result.success.results);
                $S("forum-search-results").update(result.success);
            } else {
                if (result.error) {
                    base.showReceipt("Failed to search, please try again later", "skull");
                    S.log(result.error);
                }
            }
        });
    }};
var friend = {onPageShow: function() {
    },init: function(template) {
    },requestFriendship: function() {
        $("form.request-friendship").submit(function(event) {
            event.preventDefault();
            $.post($(this).attr("action"), $(this).serialize());
        });
    },acceptFriendship: function() {
        $("form.accept-friendship").submit(function(event) {
            event.preventDefault();
            $.post($(this).attr("action"), $(this).serialize());
        });
    },declineFriendship: function() {
        S.info("decliennne");
        $("form.decline-friendship").submit(function(event) {
            event.preventDefault();
            $.post($(this).attr("action"), $(this).serialize());
        });
    }};
var friendsync = {onPageShow: function() {
    },init: function(template) {
    }};
var gamecontrol = {onPageShow: function() {
    },init: function(template) {
    }};
var gamemanager = {debug: function(o) {
        if (typeof (o) == "string") {
            S.debug("GAMEMANAGER - " + o);
        } else {
            if (typeof (o) == "object") {
                S.debug("GAMEMANAGER - Object");
                S.debug(o);
            }
        }
    },onPageShow: function() {
    },launchPollInterval: false,setLaunchPollFunction: function(callback) {
        clearInterval(gamemanager.launchPollInterval);
        setInterval(callback, 5000);
    },clearLaunchPoll: function() {
        clearInterval(gamemanager.launchPollInterval);
    },updateCoopLobby: function(coopGame) {
        S.debug("got coop update!");
        S.debug(coopGame);
        gamemanager.coopState = coopGame;
        gamemanager.coopState.name = gamemanager.states.INVITE_STARTED;
        S.debug("Before save");
        S.debug(gamemanager.coopState);
        gamemanager.isHidden = false;
        gamemanager.saveLocalStorageAndUpdateUI(coopGame.game);
        if (coopGame.status == "ready" && coopGame.ownerId == S.globalContext.session.user.userId) {
            if ($(".gamemanager-coopstate-startjoin-form").length) {
                if (coop.isTabCoopActive(coopGame.id)) {
                    S.debug("COOP: Launching Co-Op game HOST at once");
                    $(".gamemanager-coopstate-startjoin-form:first").submit();
                    $(".gamemanager-coopstate-startjoin-form").hide();
                } else {
                    S.debug("COOP: CO-OP game was NOT ACTIVE in this tab, no launch...");
                }
            }
        }
    },_groupJoinFailedTimeout: false,init: function(template) {
        Push.bind("CoopLobbyUpdate", function(e) {
            var coopGame = e.data;
            gamemanager.updateCoopLobby(coopGame);
        });
        Push.bind("GroupJoinUpdate", function(e) {
            S.debug("got update!");
            S.debug(e.data);
            gamemanager.inviteState = e.data;
            gamemanager.inviteState.name = gamemanager.states.INVITE_STARTED;
            S.debug("Before save");
            S.debug(gamemanager.inviteState);
            gamemanager.isHidden = false;
            gamemanager.saveLocalStorageAndUpdateUI();
        });
        Push.bind("GroupJoinKicked", function(e) {
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
            base.showReceipt("You were kicked from Party Join");
            return false;
        });
        Push.bind("VoiceKicked", function(e) {
            base.showReceipt(e.data);
            sonarui.leaveChannel();
            return false;
        });
        Push.bind("GroupJoinRemoved", function(e) {
            S.debug("got group");
            S.debug(e.data);
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
            base.showReceipt("Party Join was cancelled by host");
        });
        Push.bind("GroupJoinStart", function(e) {
            S.debug("got group start");
            S.debug(e.data);
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
            joinflow._joinServer(e.data.server, 0);
            base.showReceipt("Joining server with Party!");
        });
        Push.bind("GroupJoinStartFailedTimer", function(e) {
            S.debug("got GroupJoinStartFailedTimer slots");
            gamemanager._groupJoinFailedTimeout = setTimeout(function() {
                gamemanager.inviteState = {};
                gamemanager.saveLocalStorage();
                gamemanager.showLoaderError("Sorry, but your Party Join failed.");
            }, 30000);
        }), Push.bind("GroupJoinReserveSlots", function(e) {
            var groupJoinLobby = e.data;
            S.debug("got GroupJoinReserveSlots slots");
            S.debug(groupJoinLobby);
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI(groupJoinLobby.game);
            var leaderPersona = {};
            var groupPersonaIdList = [];
            jQuery.each(groupJoinLobby.players, function(index, groupJoinLobbyUser) {
                if (groupJoinLobby.hostUserId == groupJoinLobbyUser.userId) {
                    leaderPersona.personaId = groupJoinLobbyUser.personaId;
                } else {
                    groupPersonaIdList.push(groupJoinLobbyUser.personaId);
                }
            });
            var server = groupJoinLobby.server;
            server.groupPersonaIdList = groupPersonaIdList;
            joinflow._joinServer(server, null);
            base.showReceipt("Joining server with Party!");
        });
        if (S.globalContext.flushStorage) {
            S.debug("flushed storage, since we found no cookie");
            var storage = $.jStorage.get("gamemanager-sitewide", false);
            var oldCheckboxes = (storage ? storage.checkboxes : false);
            $.jStorage.flush();
            if (oldCheckboxes) {
                $.jStorage.get("gamemanager-sitewide", {"checkboxes": oldCheckboxes});
                gamemanager.checkboxes = oldCheckboxes;
                S.debug("Resetting checkboxes from ls!");
            }
        }
        gamemanager.bindLaunchUpdates();
        Push.bind("CoopStartPublic", function(e) {
            gamemanager.debug("got CoopStartPublic!");
            var coopGame = e.data;
            gamemanager.debug(coopGame);
        });
        Push.bind("CoopHostIsInGame", function(e) {
            gamemanager.debug("got CoopHostIsInGame");
            var coopGameHost = e.data;
            gamemanager.debug(coopGameHost);
            if (coop.isTabCoopActive(coopGameHost.coopGame.id)) {
                S.debug("COOP: Joining host at once in this TAB");
                gamemanager._joinCoOpAsPeer(coopGameHost);
            } else {
                S.debug("COOP: NOT joining host at once in this TAB");
                gamemanager.showModalGm();
                gamemanager.coopState.coopGameHost = coopGameHost;
                base.showReceipt("CO-OP host ready, join now!");
                gamemanager.coopState.status = gamemanager.states.COOP_LAUNCH_PEER;
                gamemanager.saveLocalStorageAndUpdateUI();
            }
        });
        Push.bind("CoopHostIsStarting", function(e) {
            gamemanager.debug("got CoopHostIsStarting!");
            gamemanager.coopState.status = gamemanager.states.COOP_HOST_IS_STARTING;
            gamemanager.saveLocalStorageAndUpdateUI();
        });
        Push.bind("CoopLobbyDeclined", function(e) {
            S.debug("Got CoopLobbyDeclined");
            gamemanager.coopState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
            base.showReceipt("CO-OP game invite was declined.");
        });
        Push.bind("CoopLobbyAborted", function(e) {
            S.debug("Got CoopLobbyAborted");
            gamemanager.removeModalGm();
            gamemanager.coopState.type = "abort";
            gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
            gamemanager.coopState = {};
            gamemanager.saveLocalStorage();
            coop.removeCoopIdFromActive(e.data.id);
            launcher._killGame(S.globalContext.realm.game, 0, function(gameKilled) {
                gamemanager.debug("Killing CO-OP game: " + gameKilled);
                if (gameKilled) {
                }
            });
            base.showReceipt("CO-OP game was cancelled.");
        });
        Push.bind("CoopLobbyCleanup", function(e) {
            S.debug("Got CoopLobbyCleanup");
            gamemanager.coopState.type = "";
            gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
            gamemanager.coopState = {};
            gamemanager.saveLocalStorage();
        });
        $("#gamemanager-plugin-download-again").live("click", function(e) {
            e.preventDefault();
            $("#gamemananger-pluginstate-missing-form").submit();
            return false;
        });
        $("#gamemanager-tryagain-button").live("click", function(e) {
            e.preventDefault();
            gamemanager.continueLoaderRetryLaunch();
            return false;
        });
        $("#gamemanager-keep-trying-button").live("click", function(e) {
            e.preventDefault();
            gamemanager.continueLoaderLaunch();
            return false;
        });
        $("#gamemanager-coop-start-peer").live("click", function() {
            if (gamemanager.coopState.coopGameHost == undefined) {
                base.showReceipt("CO-OP game not found", "skull");
                return;
            }
            var coopGameHost = gamemanager.coopState.coopGameHost;
            gamemanager._joinCoOpAsPeer(coopGameHost);
        });
        $("#gamemanager-coop-cancel").live("click", function() {
            gamemanager._coopAbort();
        });
        $(".gamemanager-coopstate-startjoin-form").live("submit", function(e) {
            e.preventDefault();
            var url = $(this).attr("action");
            $.ajax({url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "COOP_STARTED":
                            comcenter.showReceipt("Starting CO-OP Host");
                            var coopGame = response.data;
                            gamemanager.debug(coopGame);
                            gamemanager.launcherState = {currentGame: coopGame.game,currentLevel: coopGame.level,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO};
                            launcher.createPrivateCoOpServer(S.globalContext.session.currentPersona, coopGame.game, coopGame.level, coopGame.difficulty);
                            gamemanager.launcherState.hidePlatoonRepresenting = true;
                            gamemanager.saveLocalStorageAndUpdateUI();
                            break;
                        case "COOP_NOT_FOUND":
                            comcenter.showReceipt("Found no CO-OP game to launch.", receiptTypes.ERROR);
                            break;
                        case "GAME_NOT_READY":
                            comcenter.showReceipt("Invited friend left.", receiptTypes.ERROR);
                            break;
                    }
                }, false)});
        });
        launcher.registerForEvent("coop.public.ready", function(event, game, personaId, selectedMissionInfo) {
            gamemanager.coopState.level = selectedMissionInfo.levelName;
            gamemanager.coopState.difficulty = selectedMissionInfo.difficulty;
            gamemanager.launcherState.currentGame = game;
            gamemanager.launcherState.currentLevel = selectedMissionInfo.levelName;
            gamemanager.launcherState.title = null;
            if (selectedMissionInfo.isHost) {
            }
            setTimeout(function() {
                launcher._triggerEvent("gameReadyToPlay", [game, personaId]);
            }, 7000);
            gamemanager.saveLocalStorageAndUpdateUI(game);
        });
        launcher.registerForEvent("matchmake.success", function(event, reservation) {
            S.debug(reservation);
            gamemanager.launcherState = {server: reservation.gameServer,currentGame: reservation.game,currentLevel: reservation.gameServer.map,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO};
            gamemanager.saveLocalStorageAndUpdateUI(reservation.game);
            $.jStorage.deleteKey("matchmakeSession");
        });
        launcher.registerForEvent("matchmake.fail", function(event, reservationFail) {
            S.debug("Got matchmake.fail in gm");
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorage();
            $.jStorage.deleteKey("matchmakeSession");
        });
        launcher.registerForEvent("groupjoin.fail", function(event, reservationFail) {
            S.debug("Got groupjoin.fail in gm");
            base.showReceipt("Host could not Party Join", "skull");
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
        });
        launcher.registerForEvent("reservation.ready", function(event, reservation) {
            gamemanager.debug("Got bf.launcher.reservation.ready");
            clearTimeout(gamemanager._groupJoinFailedTimeout);
            if (!gamemanager.isCurrentPersona(reservation.personaId)) {
                return;
            }
            if (reservation.gameServer != undefined) {
                gamemanager.launcherState.server = reservation.gameServer;
            }
            gamemanager.reservation = reservation;
            if (gamemanager.checkboxes && gamemanager.checkboxes["gamemanager-launchstate-fullscreen"]) {
                gamemanager.saveLocalStorage();
                launcher.joinReservation(reservation);
            } else {
                var timeout_time = new Date();
                timeout_time.setSeconds(timeout_time.getSeconds() + reservation.expirationTimeout);
                gamemanager.launcherState.name = gamemanager.states.LAUNCH_READY_WITH_TIMER;
                gamemanager.launcherState.timeout_time = timeout_time;
                gamemanager.saveLocalStorageAndUpdateUI(reservation.game);
                $("#gamemanager-launchstate-timer-launchbutton").live("click", gamemanager.joinReservation);
                soundFX.play(soundFX.GAME_READY, "GAME_READY");
                gamemanager.countdownTimer(function() {
                });
                gamemanager.show();
            }
        });
        $(".gamemanager-invitestate-player-kick").live("click", function() {
            var userId = $(this).parents(".gamemanager-invitestate-player:first").attr("rel");
            var url = $("#kickGroupJoin-urlaction").val().replace("#USERID#", userId);
            base.ajaxPostJson(url, function() {
                base.showReceipt("Player kicked from Party Join");
            });
        });
        $("body").delegate(".gamemanager-invitestate-startjoin-form input[type='button'], .gamemanager-launch-quickmatch", "click", function(e) {
            e.preventDefault();
            var ua = navigator.userAgent;
            if (ua.match(/iPhone|iPad|iPod|Android/)) {
                joinflow.showPopup("tablet", {});
                return;
            }
            var game = S.globalContext["realm"]["game"];
            if (S.globalContext.componentName == "main") {
                omniture_click("", "quickMatchGameBanner_click");
            } else {
                if (S.globalContext.componentName == "serverguide") {
                    omniture_click("", "quickMatchServer_click");
                }
            }
            if (game == games.BFBC2) {
                var url = $(this).attr("url");
                base.ajaxPostJson(url, function(e, r) {
                    switch (r.message) {
                        case "SERVER_FOUND":
                            base.showReceipt("Joining a random server");
                            var serverName = Surface.Modifier.slugify(r.data.name);
                            var joinUrl = $("#serverJoinUrl").val().replace("#GUID#", r.data.guid).replace("#SLUG#", serverName);
                            joinflow.joinServerByUrl(joinUrl, null, function(foundServer) {
                                S.debug("joined server");
                            });
                            break;
                        default:
                            base.showReceipt("Could not find server.", "skull");
                            break;
                    }
                });
            }
            var leaderPersona = {};
            var waiting = 0;
            var groupPersonaIdList = [];
            leaderPersona.personaId = S.globalContext["session"]["currentPersona"]["personaId"];
            leaderPersona.personaName = S.globalContext["session"]["currentPersona"]["personaname"];
            for (var i in gamemanager.inviteState.players) {
                var u = gamemanager.inviteState.players[i];
                if (u.personaId != leaderPersona.personaId) {
                    groupPersonaIdList.push(u.personaId);
                }
                if (u.inviteStatus == gamemanager.states.INVITE_WAITING) {
                    waiting++;
                }
            }
            if (!groupPersonaIdList.length) {
                groupPersonaIdList = null;
            }
            $(".base-general-dropdown-area").hide();
            if (waiting > 0) {
                popup.prompt({"header": "Do you want to continue without everyone?","body": "Players who have not accepted will not be included."}, function() {
                    for (var i in gamemanager.inviteState.players) {
                        var u = gamemanager.inviteState.players[i];
                        if (u.inviteStatus == gamemanager.states.INVITE_WAITING) {
                            gamemanager.inviteState.players.splice(i, 1);
                        }
                    }
                    $(".gamemanager-invitestate-startjoin-form").find("input[type=button]:first").click();
                }, this);
                return false;
            }
            if ($("#gamemanager-groupjoin-current-guid").val() == "quickmatch" || $(e.target).hasClass("gamemanager-launch-quickmatch")) {
                if (joinflow.checkJoinGameRequirements(function(r) {
                    $(".gamemanager-launch-quickmatch:first").click();
                })) {
                    gamemanager.getMatchmakeRules(function(mpMatchMakeRules) {
                        gamemanager.clearLaunchState();
                        gamemanager.launcherState.hideCloseButton = true;
                        gamemanager.launcherState.title = "Quick Match";
                        gamemanager.saveLocalStorageAndUpdateUI();
                        launcher.startMpMatchmaking(leaderPersona, game, mpMatchMakeRules, groupPersonaIdList, function(matchmakingSessionId) {
                            gamemanager.launcherState.hideCloseButton = null;
                            gamemanager.saveLocalStorageAndUpdateUI();
                            $.jStorage.set("matchmakeSession", {"persona": leaderPersona,"game": game,"matchmakeSessionId": matchmakingSessionId});
                            gamemanager.addQuickMatchmakePoll();
                        });
                    });
                    gamemanager.show();
                }
                return false;
            }
            var action = $(".gamemanager-invitestate-startjoin-form").attr("action");
            base.ajaxPostJson(action, function() {
                S.debug("started OK!");
            });
            return false;
        });
        launcher.registerForEvent("queue.reservation", function(event, reservation) {
            gamemanager.debug("Got bf.launcher.queue.reservation");
            clearTimeout(gamemanager._groupJoinFailedTimeout);
            if (!gamemanager.isCurrentPersona(reservation.personaId)) {
                return;
            }
            gamemanager.reservation = reservation;
            if (gamemanager.launcherState) {
                gamemanager.launcherState.currentGame = reservation.game;
                gamemanager.launcherState.server = reservation.gameServer;
            }
            gamemanager.saveLocalStorageAndUpdateUI(reservation.game);
            gamemanager.show();
        });
        $("#gamemanager-coopstate-resend-invite-button").live("click", function(e) {
            S.debug("Send coop invite again");
            var coopId = gamemanager.coopState.id;
            var url = $("#resendInviteCoopGame-urlaction").val().replace("#COOPID#", coopId);
            base.ajaxPostJson(url, function(e, r) {
                switch (r.message) {
                    case "OK":
                        base.showReceipt("Invite was resent!");
                        break;
                    default:
                        base.showReceipt("Could not resend the invite.", "skull");
                        break;
                }
            });
        });
        $("#gamemanager-taskbar-container, .comcenter-gamemanager-title").live("click", function() {
            if ($(this).parents("#gamemanager-taskbar:first").hasClass("active")) {
                gamemanager.hide();
            } else {
                gamemanager.show();
            }
            omniture_click("", "game_manager");
        });
        $("#gamemananger-pluginstate-cancel-installation").live("click", function() {
            gamemanager.pluginState = null;
            gamemanager.patcherState = null;
            gamemanager.gameState = null;
            gamemanager.updateGameStateUI();
            clearInterval(gamemanager.checkPluginInterval);
            clearInterval(gamemanager.checkPatcherInstallInterval);
            clearInterval(gamemanager.checkGameInstallInterval);
            clearInterval(gamemanager.checkGameUpToDateInterval);
            $("#comcenter").removeClass("popuptime");
            $(".comcenter-popup").hide();
        });
        $("#comcenter").delegate("#gamemananger-pluginstate-missing-form", "submit", function(e) {
            omniture_click("", "browserPluginDownload_click");
            gamemanager.debug("Downloading the missing plugin...");
            gamemanager.pluginState.name = gamemanager.states.PLUGIN_INSTALLING;
            gamemanager.saveLocalStorageAndUpdateUI();
            document.location = $(this).attr("action").split("?")[0];
            gamemanager.addPluginPollCheck();
        });
        $("#gamemanager-patcher-state-install").live("click", function(e) {
            omniture_click("", "originClientDownload_click");
            document.location.href = "http://www.origin.com/download";
            gamemanager.debug("Showing Link to patcher");
            gamemanager.patcherState.name = gamemanager.states.PATCHER_INSTALLING;
            gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
            gamemanager.checkPatcherInstallInterval = setInterval(function() {
                gamemanager.debug("Probing for installation complete... ");
                launcher.isPatcherInstalled("origin", function(isInstalled) {
                    if (isInstalled) {
                        if (!gamemanager.patcherState) {
                            gamemanager.patcherState = {};
                        }
                        gamemanager.patcherState.name = gamemanager.states.PATCHER_OK;
                        clearInterval(gamemanager.checkPatcherInstallInterval);
                        gamemanager.saveLocalStorageAndUpdateUI();
                    }
                });
            }, 2000);
            return false;
        });
        var updateOrInstallBuild = function() {
            $(this).attr("disabled", 1);
            gamemanager.gameState.name = gamemanager.states.GAME_INSTALLING;
            gamemanager.saveLocalStorageAndUpdateUI();
            launcher.showInPatcher(games.BF3, "origin", function(result) {
                gamemanager.debug("Got result from patcher: " + result);
            });
            gamemanager.checkGameInstallInterval = setInterval(function() {
                gamemanager.debug("Probing for game installation complete... ");
                launcher.checkForPatchAvailable(gamemanager.gameState.game, gameTypes.ALL, function(game, wasUpToDate) {
                    if (wasUpToDate) {
                        clearInterval(gamemanager.checkGameInstallInterval);
                        gamemanager.gameState = null;
                        gamemanager.updateGameStateUI();
                    }
                });
            }, 2000);
            return false;
        };
        $("#gamemanager-gamestate-update").live("click", updateOrInstallBuild);
        $("#gamemanager-gamestate-install").live("click", updateOrInstallBuild);
        $("#gamemanager-installstate-install").live("click", updateOrInstallBuild);
        $("#gamemanager-installstate-update").live("click", updateOrInstallBuild);
        $(".gamemanager-checkbox").live("change", function() {
            gamemanager._updateCheckboxesInLocalStorage($(this).attr("id"), $(this).attr("checked"));
        });
        $("#gamemanager-state-close").live("click", function(e) {
            gamemanager.clearLaunchState();
            gamemanager.hide();
        });
        $("#gamemanager-launch-cancel").live("click", function() {
            var data = {questionType: "GAMEMANAGER_CLOSE_GAME_QUESTION"};
            var continueCallback = function() {
                gamemanager.cancelGameLaunch(S.globalContext.realm.game);
            };
            popup.prompt(data, continueCallback);
        });
        $("#gamemanager-invite-cancel").live("click", function(e) {
            e.preventDefault();
            gamemanager.debug("Leaving Party Join...");
            base.ajaxPostJson($("#leaveGroupJoin-urlaction").val(), function() {
                gamemanager.debug("Left group!");
                gamemanager.inviteState = {};
                gamemanager.saveLocalStorageAndUpdateUI();
            });
            return false;
        });
        $("#gamemanager-launchstate-launchbutton").live("click", gamemanager.maximiseCurrentGame);
        $("#gamecontrol-game-leavequeuebutton").live("click", gamemanager.leaveQueue);
        if (gamemanager.launcherState && gamemanager.reservation) {
            $("#gamemanager-launchstate-timer-launchbutton").live("click", gamemanager.joinReservation);
        }
        gamemanager._updateFromLocalStorage();
        gamemanager.updateGameStateUI();
        if (gamemanager.pluginState && gamemanager.pluginState.name == gamemanager.states.PLUGIN_INSTALLING) {
            gamemanager.addPluginPollCheck();
        }
        if (gamemanager.gameState && gamemanager.gameState.name == gamemanager.states.GAME_INSTALLING) {
            gamemanager.startCheckForGameUpToDate();
        } else {
            if (gamemanager.gameState && gamemanager.gameState.name == gamemanager.states.GAME_CANT_PROBE) {
                gamemanager.debug("Doing an extra probe, recently installed the plugin?");
                gamemanager.gameState = null;
                gamemanager.updateGameStateUI();
            } else {
                var joinServer = Surface.cookieGet("joinflow.savedServerCookie");
                if (joinServer) {
                    S.debug("Got Server to join from login, but not doing it right now...");
                }
            }
        }
        launcher.registerForEvent("error.patcher", function(event, game, installState, sku, gameType, skuPatchInfo) {
            if (gamemanager.gameState.name == gamemanager.states.GAME_INSTALLING) {
                return gamemanager.debug("Ignoring errors from the patcher while installing game: " + game);
            }
            gamemanager.debug("error.patcher");
            gamemanager.debug("game:" + game + ", installState:" + installState + ", sku:" + sku + ", gameType:" + gameType + ", skuPatchInfo:" + skuPatchInfo + ", gamemanager.installState:" + gamemanager.installState + ", gamemanager.gameState:" + gamemanager.gameState);
            gamemanager.gameState.game = game;
            gamemanager.installState.name = installState;
            gamemanager.installState.sku = sku;
            gamemanager.installState.skuPatchInfo = skuPatchInfo;
            gamemanager.installState.gameType = gameType;
            switch (installState) {
                case launcher.INSTALL_STATE.OUT_OF_DATE:
                    gamemanager.debug("OUT_OF_DATE");
                    if (!gamemanager.gameState.name || (gamemanager.gameState.name && gamemanager.gameState.name != gamemanager.states.GAME_INSTALLING)) {
                        gamemanager.gameState.name = gamemanager.states.GAME_NOT_UPTODATE;
                        gamemanager.updateGameStateUI();
                    }
                    break;
                case launcher.INSTALL_STATE.ERR_VERSION_UNREADABLE:
                    gamemanager.debug("ERR_VERSION_UNREADBLE");
                    gamemanager.gameState.name = gamemanager.states.GAME_CANT_PROBE;
                    gamemanager.updateGameStateUI();
                    break;
                case launcher.INSTALL_STATE.ERR_NO_VERSION_FOUND:
                    gamemanager.debug("ERR_NO_VERSION_FOUND");
                    gamemanager.gameState.name = gamemanager.states.GAME_CANT_PROBE;
                    gamemanager.updateGameStateUI();
                    break;
                case launcher.INSTALL_STATE.ERR_GAME_NOT_FOUND:
                    gamemanager.debug("ERR_GAME_NOT_FOUND");
                    gamemanager.gameState.name = gamemanager.states.GAME_CANT_PROBE;
                    gamemanager.updateGameStateUI();
                    break;
            }
        });
        if (gamemanager.launcherState && gamemanager.launcherState.timeout_time) {
            gamemanager.countdownTimer(function() {
            });
        }
    },pluginState: null,patcherState: null,gameState: null,launcherState: {},inviteState: {},coopState: {},isHidden: true,checkboxes: {"gamemanager-launchstate-fullscreen": true},installState: {},reservation: null,lastUIUpdate: null,states: {PLUGIN_NOT_SUPPORTED: "plugin_not_missing",PLUGIN_MISSING: "plugin_missing",PLUGIN_INSTALLING: "plugin_installing",PLUGIN_OK: "plugin_ok",PATCHER_MISSING: "patcher_missing",PATCHER_INSTALLING: "patcher_installing",PATCHER_OK: "patcher_ok",PATCHER_CANT_PROBE: "patcher_cant_probe",COOP_LAUNCH_PEER: "coop_launchpeer",COOP_HOST_IS_STARTING: "coop_hostisstarting",GAME_INVALID_PERSONA: "game_invalid_persona",GAME_CANT_PROBE: "game_cant_probe",GAME_NOT_OWNED: "game_not_owned",GAME_NOT_INSTALLED: "game_not_installed",GAME_NOT_UPTODATE: "game_not_uptodate",GAME_OK: "game_ok",GAME_INSTALLING: "game_install",LAUNCH_READY: "launch_ready",LAUNCH_READY_WITH_TIMER: "launch_ready_with_timer",LAUNCH_CLOSED_DOWN: "launch_closed_down",LAUNCH_ERROR: "launch_error",LAUNCH_INFOABORT: "launch_infoabort",LAUNCH_INFO: "launch_info",LAUNCH_QUEUE: "launch_queue",LAUNCH_CANCELLING: "launch_cancelling",INVITE_STARTED: "invite_started",INVITE_STARTING: "invite_starting",INVITE_ACCEPTED: "invite_accepted",INVITE_DECLINED: "invite_declined",INVITE_WAITING: "invite_waiting"},resetPluginGameManager: function() {
        gamemanager.pluginState = null;
        gamemanager.patcherState = null;
        gamemanager.gameState = null;
        gamemanager.updateGameStateUI();
    },modalGmTimeout: false,showModalGm: function() {
        gamemanager.show();
        $("#comcenter, #comcenter-gamecontrol").addClass("popuptime");
        $(".comcenter-popup").show();
        $("body").bind("click.hideComCenterPopup", function(e) {
            gamemanager.removeModalGm();
            $("body").unbind("click.hideComCenterPopup");
        });
        gamemanager.modalGmTimeout = setTimeout(function() {
            gamemanager.removeModalGm();
            $("body").unbind("click.hideComCenterPopup");
        }, 10000);
    },removeModalGm: function() {
        clearTimeout(gamemanager.modalGmTimeout);
        $("#comcenter, #comcenter-gamecontrol").removeClass("popuptime");
        $(".comcenter-popup").hide();
    },addPluginPollCheck: function() {
        gamemanager.show();
        $("#comcenter").addClass("popuptime");
        $(".comcenter-popup").show();
        $("body").bind("click.hideComCenterPopup", function(e) {
            if ($(e.target).parents(".gamemanager-plugin-help").length) {
                return true;
            }
            $("#comcenter").removeClass("popuptime");
            $(".comcenter-popup").hide();
            $("body").unbind("click.hideComCenterPopup");
        });
        gamemanager.checkPluginInterval = setInterval(function() {
            gamemanager.debug("Checking for plugin...");
            gamemanager.gameState = null;
            gamemanager.updateGameStateUI();
            if (gamemanager.pluginState && gamemanager.pluginState.name && gamemanager.pluginState.name == gamemanager.states.PLUGIN_OK) {
                gamemanager.debug("Clearing interval...");
                clearInterval(gamemanager.checkPluginInterval);
                sonarui.foundPlugin = true;
                $("#comcenter").removeClass("popuptime");
                $("#gamemanager-taskbar-bubble").hide();
                $(".comcenter-popup").hide();
            }
        }, 2000);
    },getMatchmakeRules: function(callback) {
        var serverguideFilter = {};
        if ($("#serverguide-filter-form").length) {
            serverguideFilter = $("#serverguide-filter-form").serializeObject();
            callback(gamemanager.processMatchmakeRules(serverguideFilter));
        } else {
            if (S.globalContext["session"]["currentPersona"]["personaId"].length) {
                var url = $("#getServerBrowserFilter").val();
                $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                        if (response.message == "filter") {
                            try {
                                serverguideFilter = S.parseJSON(response.data.jsonFilter);
                            } catch (e) {
                            }
                        }
                        callback(gamemanager.processMatchmakeRules(serverguideFilter));
                    }, false)});
            }
        }
    },processMatchmakeRules: function(serverguideFilter) {
        var matchmakeRules = {};
        var gamemodes = [];
        if ("gamemodes" in serverguideFilter && serverguideFilter["gamemodes"].length) {
            jQuery.each(serverguideFilter.gamemodes.split("|"), function(i, gameMode) {
                switch (gameMode) {
                    case "conquestlarge":
                        gamemodes.push("ConquestLarge");
                        break;
                    case "sqrush":
                        gamemodes.push("SquadRush");
                        break;
                    case "conquest":
                        gamemodes.push("ConquestSmall");
                        break;
                    case "rush":
                        gamemodes.push("RushLarge");
                        break;
                    case "sqdm":
                        gamemodes.push("SquadDeathMatch");
                        break;
                    case "teamdeathmatch":
                        gamemodes.push("TeamDeathMatch");
                        break;
                }
            });
        }
        if (!gamemodes.length) {
            gamemodes = ["ConquestSmall", "RushLarge", "TeamDeathMatch"];
        }
        matchmakeRules.gameModes = gamemodes;
        if ("maps" in serverguideFilter && serverguideFilter["maps"].length) {
            matchmakeRules.maps = serverguideFilter["maps"].split("|");
            if (matchmakeRules.maps[0] == "") {
                matchmakeRules.maps.splice(0, 1);
            }
        }
        if ("gameexpansions" in serverguideFilter && serverguideFilter["gameexpansions"].length) {
            matchmakeRules.gameExpansions = serverguideFilter["gameexpansions"].split("|");
            if (matchmakeRules.gameExpansions[0] == "") {
                matchmakeRules.gameExpansions.splice(0, 1);
            }
        } else {
            matchmakeRules.gameExpansions = ["DEFAULT"];
        }
        if ("gamepresets" in serverguideFilter && serverguideFilter["gamepresets"].length) {
            matchmakeRules.gamePresets = serverguideFilter["gamepresets"].split("|");
            if (matchmakeRules.gamePresets[0] == "") {
                matchmakeRules.gamePresets.splice(0, 1);
            }
        }
        return matchmakeRules;
    },startCheckForGameUpToDate: function() {
        gamemanager.checkGameUpToDateInterval = setInterval(function() {
            launcher.checkForPatchAvailable(S.globalContext["realm"]["game"], gameTypes.ALL, function(game, wasUpToDate) {
                gamemanager.debug("Probing for the latest game version...");
                if (wasUpToDate) {
                    clearInterval(gamemanager.checkGameUpToDateInterval);
                    gamemanager.installState = {};
                    gamemanager.gameState.name = gamemanager.states.GAME_OK;
                } else {
                }
                gamemanager.updateGameStateUI();
            });
        }, 2000);
    },updateGameStateUI: function() {
        gamemanager.getState(function(state) {
            if (state.pluginState) {
                gamemanager.pluginState = state.pluginState;
            }
            if (state.patcherState) {
                gamemanager.patcherState = state.patcherState;
            }
            if (state.gameState) {
                gamemanager.gameState = state.gameState;
            }
            if (state.launchState) {
                gamemanager.launcherState = state.launchState;
            }
            gamemanager.saveLocalStorageAndUpdateUI();
            if (S.globalContext.flushStorage && gamemanager.pluginState && gamemanager.pluginState.name == gamemanager.states.PLUGIN_MISSING) {
                $("#gamemanager-taskbar-bubble").show();
            }
        });
    },_updateCheckboxesInLocalStorage: function(name, value) {
        if (!gamemanager.checkboxes) {
            gamemanager.checkboxes = {};
            gamemanager.checkboxes["gamemanager-launchstate-fullscreen"] = true;
        }
        gamemanager.debug("Got id: " + name + " val: " + value);
        if (!value) {
            delete gamemanager.checkboxes[name];
        } else {
            gamemanager.checkboxes[name] = value;
        }
        gamemanager.saveLocalStorage();
    },hide: function() {
        $("#gamemanager-taskbar:first").removeClass("active");
        $("#gamemanager-taskbar-state").html("");
        gamemanager.isHidden = true;
        gamemanager._checkOneTimeMessagesStatus();
        gamemanager.saveLocalStorageAndUpdateUI();
    },show: function() {
        if (comcenter.generalLoadingAjaxRequest) {
            comcenter.generalLoadingAjaxRequest.abort();
        }
        $("#gamemanager-taskbar-bubble").hide();
        comcenter.closePreviewAreas();
        gamemanager.isHidden = false;
        $(this).parents("#gamemanager-taskbar:first").addClass("active");
        gamemanager.updateGameStateUI();
        gamemanager._checkOneTimeMessagesStatus();
        gamemanager.saveLocalStorage();
        common.startSpinners();
    },_checkOneTimeMessagesStatus: function() {
    },setTooltip: function(text) {
        $("#comcenter-gamecontrol").attr("original-title", text);
    },clearTooltip: function() {
        gamemanager.setTooltip("");
    },updateGameStateUIFromState: function(state) {
        gamemanager.lastUIUpdate = new Date().getTime();
        $("#gamemanager-taskbar-state").html($S("gamemanager.state").render({states: gamemanager.states,state: state}));
        if (!state.isHidden && !$("#gamemanager-taskbar").hasClass("active")) {
            $("#gamemanager-taskbar").addClass("active");
        }
        var status = null;
        try {
            if (state.launcherState && state.launcherState.name == gamemanager.states.LAUNCH_READY) {
                status = "Game ready!";
            } else {
                if (state.launcherState && state.launcherState.name == gamemanager.states.LAUNCH_CANCELLING) {
                    status = "Cancelling ...";
                } else {
                    if (state.launcherState && state.launcherState.name == gamemanager.states.LAUNCH_READY_WITH_TIMER) {
                        status = "Game ready!";
                    } else {
                        if (state.launcherState && state.launcherState.name == gamemanager.states.LAUNCH_QUEUE) {
                            status = $(".gamemanager-queue-text").html();
                        } else {
                            if (state.launcherState && state.launcherState.name) {
                                status = state.launcherState.gameStatePretty;
                            } else {
                                if (state.inviteState && state.inviteState.name) {
                                    status = "Party Join";
                                } else {
                                    if (state.coopState && state.coopState.name) {
                                        status = "Coop Lobby";
                                        if ($S("gamemanager-surface-coopState").getState()["coopTitle"] != undefined) {
                                            status = $S("gamemanager-surface-coopState").getState()["coopTitle"];
                                        }
                                    } else {
                                        if (state.gameState && state.gameState.name == gamemanager.states.GAME_NOT_UPTODATE || state.pluginState.name == gamemanager.states.PLUGIN_MISSING || state.patcherState.name == gamemanager.states.PATCHER_MISSING) {
                                            status = "notuptodate";
                                        } else {
                                            if (state.gameState && state.gameState.name == gamemanager.states.GAME_NOT_UPTODATE || state.pluginState.name == gamemanager.states.PLUGIN_INSTALLING) {
                                                status = "installing";
                                            } else {
                                                if (state.gameState && (state.gameState.name == gamemanager.states.GAME_NOT_INSTALLED || state.gameState.name == gamemanager.states.GAME_NOT_OWNED)) {
                                                    status = "foundnogame";
                                                } else {
                                                    if (state.gameState && (state.gameState.name == gamemanager.states.GAME_OK || state.gameState.name == gamemanager.states.GAME_INVALID_PERSONA) && state.pluginState.name == gamemanager.states.PLUGIN_OK) {
                                                        status = "uptodate";
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } catch (e) {
            S.error(e);
            status = "";
        }
        $S("gamemanager-taskbar-surface").update({"state": state,"status": status});
        if (state.launcherState && state.launcherState.logoShow) {
            S.debug("Adding logo changer timeout.");
            clearTimeout(gamemanager.logoShowTimeout);
            gamemanager.logoShowTimeout = setTimeout(function() {
                S.debug("Setting next logo");
                if (gamemanager.launcherState && gamemanager.launcherState.logoShow) {
                    gamemanager.launcherState.logoShow++;
                    if (gamemanager.launcherState.logoShow > 2) {
                        gamemanager.launcherState.logoShow = null;
                    }
                    gamemanager.saveLocalStorageAndUpdateUI();
                }
            }, 2500);
        }
        common.startSpinners();
    },_updateFromLocalStorage: function() {
        gamemanager.debug("Updating game manager from local storage");
        var section = "-section-" + S.globalContext.realm.section;
        var ls = $.jStorage.get("gamemanager" + section, {});
        var sitewide = $.jStorage.get("gamemanager-sitewide", {});
        if (sitewide.launcherState) {
            ls.launcherState = sitewide.launcherState;
        }
        if (sitewide.inviteState) {
            ls.inviteState = sitewide.inviteState;
        }
        if (sitewide.coopState) {
            ls.coopState = sitewide.coopState;
        }
        if (sitewide.checkboxes) {
            ls.checkboxes = sitewide.checkboxes;
        }
        if (sitewide.isHidden != undefined) {
            gamemanager.isHidden = sitewide.isHidden;
        }
        gamemanager.debug(ls);
        if (ls.launcherState) {
            gamemanager.launcherState = ls.launcherState;
        }
        if (ls.pluginState) {
            gamemanager.pluginState = ls.pluginState;
        }
        if (ls.patcherState) {
            gamemanager.patcherState = ls.patcherState;
        }
        if (ls.gameState) {
            gamemanager.gameState = ls.gameState;
        }
        if (ls.checkboxes) {
            gamemanager.checkboxes = ls.checkboxes;
        }
        if (ls.inviteState) {
            gamemanager.inviteState = ls.inviteState;
        }
        if (ls.coopState) {
            gamemanager.coopState = ls.coopState;
        }
        if (ls.installState) {
            gamemanager.installState = ls.installState;
        }
        if (ls.reservation) {
            gamemanager.reservation = ls.reservation;
        }
    },getCurrentStateObject: function() {
        var state = {};
        state.gameState = gamemanager.gameState;
        state.pluginState = gamemanager.pluginState;
        state.patcherState = gamemanager.patcherState;
        state.launcherState = gamemanager.launcherState;
        state.checkboxes = gamemanager.checkboxes;
        state.isHidden = gamemanager.isHidden;
        state.inviteState = gamemanager.inviteState;
        state.coopState = gamemanager.coopState;
        state.installState = gamemanager.installState;
        state.reservation = gamemanager.reservation;
        return state;
    },saveLocalStorage: function(game) {
        var section = game || S.globalContext.realm.section;
        section = "-section-" + section;
        gamemanager.debug("Save current state in ls... " + section);
        var s = gamemanager.getCurrentStateObject();
        gamemanager.debug(s);
        var sitewide = {coopState: s.coopState,inviteState: s.inviteState,checkboxes: s.checkboxes,isHidden: s.isHidden,launcherState: s.launcherState,installState: s.installState};
        delete s.coopState;
        delete s.inviteState;
        delete s.launcherState;
        delete s.isHidden;
        delete s.checkBoxes;
        if (!$.jStorage.set("gamemanager" + section, s)) {
            S.error("Could not set gamemanager in local storage...");
        }
        if (!$.jStorage.set("gamemanager-sitewide", sitewide)) {
            S.error("Could not set gamemanager sitewide in local storage...");
        }
    },createGroupJoinToServer: function(server) {
        var server = server || {};
        var url = $("#createGroupJoin-urlaction").val().replace("#GUID#", server.guid);
        base.ajaxPostJson(url, function(success, response) {
            if (success) {
                gamemanager.show();
            }
        });
    },clearLaunchState: function() {
        gamemanager.debug("Clearing launch state...");
        gamemanager.launcherState = {};
        gamemanager.saveLocalStorage();
    },saveLocalStorageAndUpdateUI: function(game) {
        gamemanager.saveLocalStorage(game);
        gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
    },getState: function(callback) {
        var launchState = gamemanager.launcherState;
        if (launchState && launchState.name != undefined) {
            callback({launchState: launchState});
        } else {
            gamemanager.getPluginState(function(pluginState) {
                gamemanager.getOriginState(function(patcherState) {
                    gamemanager.getGameState(function(gameState) {
                        callback({gameState: gameState,launchState: null,pluginState: pluginState,patcherState: patcherState});
                    });
                });
            });
        }
    },getPluginState: function(callback) {
        gamemanager.debug("Getting plugin state...");
        if (!gamemanager.pluginState) {
            gamemanager.pluginState = {};
        }
        if (gamemanager.verifyPlugin()) {
            gamemanager.pluginState.name = gamemanager.states.PLUGIN_OK;
        } else {
            if (!gamemanager.pluginState.name || gamemanager.pluginState.name != gamemanager.states.PLUGIN_INSTALLING) {
                if (!navigator.userAgent.match(/Windows/)) {
                    gamemanager.pluginState.name = gamemanager.states.PLUGIN_NOT_SUPPORTED;
                } else {
                    gamemanager.pluginState.name = gamemanager.states.PLUGIN_MISSING;
                }
            }
        }
        callback(gamemanager.pluginState);
    },getOriginState: function(callback) {
        var gm = gamemanager;
        gamemanager.debug("Getting origin state...");
        if (!gm.patcherState) {
            gm.patcherState = {};
        }
        if (gamemanager.pluginState.name != gamemanager.states.PLUGIN_OK) {
            gm.patcherState.name = gm.states.PATCHER_CANT_PROBE;
            return callback(gm.patcherState);
        } else {
            launcher.isPatcherInstalled("origin", function(isInstalled) {
                if (isInstalled) {
                    gm.patcherState.name = gm.states.PATCHER_OK;
                } else {
                    if (!gm.patcherState.name || gm.patcherState.name != gm.states.PATCHER_INSTALLING) {
                        gm.patcherState.name = gm.states.PATCHER_MISSING;
                    }
                }
                return callback(gm.patcherState);
            });
        }
    },getGameState: function(callback) {
        var gm = gamemanager;
        var game = S.globalContext.realm.section;
        if (game == S.globalContext.staticContext.sections.ALL) {
            gm.gameState = {name: null};
            callback(gm.gameState);
            return;
        }
        if (gm.gameState == null) {
            gamemanager.debug("Getting game state... game, ", game);
            if (gm.pluginState.name == gm.states.PLUGIN_MISSING) {
                gamemanager.debug("Returning n/a in game since we found no plugin");
                gm.gameState = {name: gm.states.GAME_CANT_PROBE,game: game};
                callback(gm.gameState);
                return;
            }
            var namespaces = S.globalContext.staticContext.nucleusNamespaces;
            var currentPersona = S.globalContext["session"]["currentPersona"];
            if (!currentPersona || (currentPersona["namespace"] != namespaces.BATTLEFIELD && currentPersona["namespace"] != namespaces.CEM_EA_ID)) {
                gamemanager.debug("Returning invalid persona");
                gm.gameState = {name: gm.states.GAME_INVALID_PERSONA,game: game};
                callback(gm.gameState);
                return;
            }
            if (base.ownsGame(game, S.globalContext.staticContext.platforms.PC)) {
                launcher.isGameInstalled(game, function(gameInstalled) {
                    if (!gm.gameState) {
                        gm.gameState = {};
                    }
                    if (gameInstalled) {
                        launcher.checkForPatchAvailable(game, gameTypes.ALL, function(game, wasUpToDate) {
                            if (wasUpToDate) {
                                gm.gameState = {name: gm.states.GAME_OK,game: game};
                                callback(gm.gameState);
                            }
                        });
                    } else {
                        gm.gameState = {name: gm.states.GAME_NOT_INSTALLED,game: game};
                        callback(gm.gameState);
                    }
                });
            } else {
                gm.gameState = {name: gm.states.GAME_NOT_OWNED,game: game};
                callback(gm.gameState);
            }
        } else {
            callback(gm.gameState);
        }
    },verifyPlugin: function() {
        var plugin = launcher.getInstance();
        if (!plugin) {
            gamemanager.debug("No launcher");
            return false;
        }
        var sonarOk = true;
        try {
            new SonarVoice("SONAR2|Sk0t0r", {expectedVersion: "" + S.globalContext.staticContext.voice.version});
        } catch (err) {
            if (err.name == "SonarPluginError" || err.name == "SonarOutdatedVersion") {
                gamemanager.debug("No sonar: " + err.name);
                sonarOk = false;
            }
        }
        if (!sonarOk) {
            return false;
        }
        if (!launcher.checkVersion()) {
            gamemanager.debug("Found Launcher but not the correct version");
            return false;
        }
        return true;
    },inviteToCurrentServer: function(userId) {
        try {
            var guid = gamemanager.launcherState.server.guid;
        } catch (e) {
            base.showReceipt("Could not find server.", "skull");
            return false;
        }
        var url = "/comcenter/inviteToServer/" + userId + "/" + guid;
        base.ajaxPostJson(url, function(success, response) {
            if (success) {
                S.debug(response);
            }
        });
    },launchAndJoin: function(server, friendPersonaId) {
        if (launcher.killGameTimeout) {
            S.debug("CLEARED KILLGAME TIMEOUT");
            clearTimeout(launcher.killGameTimeout);
        }
        gamemanager.resetQuickMatchPoll();
        var launchState = {"friendPersonaId": friendPersonaId,server: server,currentGame: server.game,currentLevel: server.map,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO,friendId: friendPersonaId,currentPersona: null,password: null,expansion: null};
        launchState.logoShow = 1;
        var currentPersona = S.globalContext["session"]["currentPersona"];
        if (!currentPersona) {
            UserMessageBox.showTop("You need to set an active soldier in your profile before joining.", UserMessageBox.MSG_INFORMATION);
            return false;
        }
        launchState.currentPersona = currentPersona;
        if (server.gameExpansion != null) {
            launchState.expansion = base.gameExpansionToString(server.gameExpansion);
        }
        if (S.globalContext["session"]["serverPassword"] != null) {
            launchState.password = S.globalContext["session"]["serverPassword"];
            S.globalContext["session"]["serverPassword"] = null;
        }
        var joinOptions = {};
        if (launchState.password != null && launchState.password != undefined && launchState.password.length > 0) {
            joinOptions.password = launchState.password;
        }
        if (launchState.expansion != null && launchState.expansion != undefined && launchState.expansion.length > 0) {
            joinOptions.expansion = launchState.expansion;
        }
        if (server.game == games.BFBC2) {
            if (launchState.currentPersona.clanTag == null || launchState.currentPersona.clanTag == undefined || launchState.currentPersona.clanTag.length == 0) {
                launchState.currentPersona.clanTag = " ";
            } else {
                launchState.currentPersona.clanTag = $.trim(launchState.currentPersona.clanTag);
            }
            joinOptions.clanTag = launchState.currentPersona.clanTag;
        }
        joinOptions.putInSquad = true;
        var joinServer = function() {
            if (parseInt(friendPersonaId) > 0) {
                launcher.joinMpFriend(launchState.currentPersona, launchState.server.game, launchState.friendPersonaId, joinOptions, function(reservation) {
                    gamemanager.reservation = reservation;
                });
            } else {
                var groupPersonaIdList = server.groupPersonaIdList || null;
                launcher.joinMpServer(launchState.currentPersona, launchState.server.game, launchState.server.gameId, joinOptions, groupPersonaIdList, function(reservation) {
                    gamemanager.reservation = reservation;
                });
            }
        };
        if (gamemanager.reservation) {
            launcher.cancelReservation(gamemanager.reservation, function(wasCanceled) {
                joinServer();
            });
        } else {
            joinServer();
        }
        gamemanager.isHidden = false;
        gamemanager.launcherState = launchState;
        gamemanager.saveLocalStorageAndUpdateUI();
    },leaveQueue: function() {
        gamemanager.debug("LEAVE QUEUE");
        if (gamemanager.reservation) {
            launcher.leaveQueue({"personaId": gamemanager.reservation.personaId}, gamemanager.reservation.game, gamemanager.reservation.gameId);
            gamemanager.clearLaunchState();
        }
        return false;
    },_showLoaderTimeout: false,bindLaunchUpdates: function() {
        launcher.registerForEvent("gameStatus", function(event, game, currentState, personaId) {
            gamemanager.debug("GOT GAMESTATUS - game: " + game + " , " + currentState + ": " + currentState);
            if (!gamemanager.isCurrentPersona(personaId)) {
                gamemanager.debug("Not current persona, ignoring: " + personaId);
                return;
            }
            if (currentState.indexOf("State_") != -1 && gamemanager.launcherState && (gamemanager.launcherState.name == gamemanager.states.LAUNCH_CLOSED_DOWN || gamemanager.launcherState.name == gamemanager.states.LAUNCH_CANCELLING || gamemanager.launcherState.name == gamemanager.states.LAUNCH_READY)) {
                gamemanager.debug("Not updating, since we are in state " + gamemanager.launcherState.name + " and State_* ...");
                return false;
            }
            if (currentState == launcher.STATE.READY || currentState == launcher.STATE.GAMEISGONE) {
                gamemanager.debug("Not updating. state:" + currentState);
                return false;
            }
            if (gamemanager.launcherState && gamemanager.launcherState.gameState && gamemanager.launcherState.gameState.indexOf("State_") !== -1 && currentState != launcher.STATE.GAMEISGONE && currentState.indexOf("State_") == -1) {
                gamemanager.debug("Not updating, since in State_* and got state: " + currentState);
                return false;
            }
            var currentLaunchState = gamemanager.states.LAUNCH_INFO;
            switch (currentState) {
                case launcher.STATE.ERROR:
                    currentLaunchState = gamemanager.states.LAUNCH_ERROR;
                    break;
            }
            gamemanager.launcherState.name = currentLaunchState;
            gamemanager.launcherState.gameState = currentState;
            gamemanager.launcherState.gameStatePretty = gamemanager.gameStatePretty(currentState);
            gamemanager.saveLocalStorageAndUpdateUI(game);
            switch (currentState) {
                case launcher.STATE.GAMEISGONE:
                case launcher.STATE.ERROR:
                    gamemanager.clearLaunchState();
                    break;
            }
        });
        launcher.registerForEvent("gameReadyToPlay", function(event, game, personaId) {
            gamemanager.debug("GOT GAMESTATUS - bf.launcher.gameReadyToPlay");
            if (!gamemanager.isCurrentPersona(personaId)) {
                return;
            }
            if (gamemanager.launcherState) {
                gamemanager.launcherState.currentGame = game;
                if (gamemanager.reservation) {
                    gamemanager.reservation = null;
                    gamemanager.saveLocalStorage();
                }
                if (gamemanager.checkboxes && gamemanager.checkboxes["gamemanager-launchstate-fullscreen"]) {
                    gamemanager.maximiseCurrentGame();
                } else {
                    gamemanager.isHidden = false;
                    gamemanager.launcherState.name = gamemanager.states.LAUNCH_READY;
                    gamemanager.saveLocalStorageAndUpdateUI(game);
                    $.titleAlert("Game ready!", {requireBlur: true,stopOnFocus: true,duration: 10000,interval: 2000});
                }
            }
            return false;
        });
        launcher.registerForEvent("gameIsGone", function() {
            S.debug(gamemanager.launcherState);
            gamemanager._coopAbort();
            if ((gamemanager.launcherState == null && gamemanager.launcherState == undefined) || gamemanager.launcherState.name != gamemanager.states.LAUNCH_ERROR) {
                gamemanager.launcherState.name = null;
                gamemanager.hide();
            }
        });
        launcher.registerForEvent("serverQueuePosition", function(event, game, personaId, positionInQueue) {
            gamemanager.debug("Got bf.launcher.serverQueuePosition");
            if (!gamemanager.isCurrentPersona(personaId)) {
                return;
            }
            var beforeYou = (positionInQueue - 1);
            gamemanager.launcherState.name = gamemanager.states.LAUNCH_QUEUE;
            gamemanager.launcherState.queue = {beforeYou: beforeYou};
            gamemanager.saveLocalStorageAndUpdateUI();
        });
        launcher.registerForEvent("leftServerQueue", function(event, game, personaId) {
            if (!gamemanager.isCurrentPersona(personaId)) {
                return;
            }
            gamemanager.debug("Got bf.launcher.leftServerQueue");
            gamemanager.debug("Got leftServerQueue...");
        });
        launcher.registerForEvent("error.anotherGameRunning", function(event, game, gameRunning) {
            gamemanager.showLoaderError("You are already running another Battlefield game, please exit this game first");
        });
        launcher.registerForEvent("error.gameNeedsManualKill", function(event, game) {
            gamemanager.showLoaderError("Game running in the background needs to be closed");
        });
        launcher.registerForEvent("error.patcherRunning", function(event) {
            gamemanager.showLoaderError("Not possible to start game while patcher is running");
        });
        launcher.registerForEvent("error.gameCrashed", function(event, game) {
            gamemanager.showLoaderError("Could not complete server join since game closed unexpectedly, please try again");
        });
        launcher.registerForEvent("error.generic", function(event, game, personaId, errorType, errorCode) {
            gamemanager.handleErrors(game, personaId, errorType, errorCode);
        });
        launcher.registerForEvent("warning.generic", function(event, game, personaId, warningType, warningCode) {
            gamemanager.handleWarnings(game, personaId, warningType, warningCode);
        });
        launcher.registerForEvent("error.pluginRequired", function(event) {
            gamemanager.showLoaderError("You need to install a plugin to be able to launch games from the web");
        });
        launcher.registerForEvent("error.gameUpdateRequired", function(event, game) {
            gamemanager.showLoaderError("You need to update your game client");
        });
        launcher.registerForEvent("error.gameNotLaunched", function(event, game) {
            gamemanager.showLoaderError("Could not launch game. Please make sure it's installed correctly.");
        });
        launcher.registerForEvent("error.gameNotResponding", function(event, game) {
            gamemanager.showLoaderError("Could not communicate with running game. Please make sure it was not launched outside of the web.");
        });
    },gameStatePretty: function(gameState) {
        var statePrettyName = gameState;
        switch (gameState) {
            case launcher.STATE.NA:
            case launcher.STATE.NONE:
                statePrettyName = "Idle";
                break;
            case launcher.STATE.READY:
                statePrettyName = "Initialized";
                break;
            case launcher.STATE.INIT:
            case launcher.STATE.PENDING:
                statePrettyName = "Initializing...";
                break;
            case launcher.STATE.GAMEISGONE:
                statePrettyName = "Closed Down";
                break;
            case launcher.STATE.STARTING:
                statePrettyName = "Starting...";
                break;
            case launcher.STATE.ERROR:
                statePrettyName = "Error";
                break;
            case launcher.STATE.MENU_READY:
                statePrettyName = "Idling";
                break;
            case launcher.STATE.MATCHMAKE_COOP:
            case launcher.STATE.MATCHMAKING:
                statePrettyName = "Matchmaking...";
                break;
            case launcher.STATE.CONNECT_TO_USERID:
                statePrettyName = "Joining Friend...";
                break;
            case launcher.STATE.CONNECT_TO_GAMEID:
                statePrettyName = "Joining Server...";
                break;
            case launcher.STATE.CONNECTING:
                statePrettyName = "Connecting...";
                break;
            case launcher.STATE.WAIT_FOR_LEVEL:
            case launcher.STATE.GAME_LOADING:
                statePrettyName = "Loading Level...";
                break;
            case launcher.STATE.GAME:
                statePrettyName = "Playing!";
                break;
            case launcher.STATE.NOT_LOGGED_IN:
                statePrettyName = "Logging in...";
                break;
            case launcher.STATE.GAME_LEAVING:
                statePrettyName = "Leaving Level...";
                break;
            case launcher.STATE.IN_QUEUE:
                statePrettyName = "Server Queue";
                break;
            case launcher.STATE.CREATE_COOP_PEER:
                statePrettyName = "Setting up host...";
                break;
            case launcher.STATE.WAIT_FOR_PEER_CLIENT:
                statePrettyName = "Waiting for Player 2...";
                break;
            case launcher.STATE.PEER_CLIENT_CONNECTED:
                statePrettyName = "Other player has joined";
                break;
            case launcher.STATE.MATCHMAKE_RESULT_HOST:
                statePrettyName = "Match found. You are hosting.";
                break;
            case launcher.STATE.MATCHMAKE_RESULT_JOIN:
                statePrettyName = "Match found. Joining the host.";
                break;
            case launcher.STATE.RESERVING_SLOT:
                statePrettyName = "Reserving a slot...";
                break;
            case launcher.STATE.CLAIM_RESERVATION:
                statePrettyName = "Claiming reservation...";
                break;
        }
        return statePrettyName;
    },maximiseCurrentGame: function() {
        gamemanager.debug("Showing game window...");
        gamemanager.launcherState.name = gamemanager.states.LAUNCH_INFO;
        gamemanager.launcherState.gameState = launcher.STATE.GAME;
        gamemanager.launcherState.gameStatePretty = "Playing!";
        gamemanager.saveLocalStorageAndUpdateUI();
        try {
            var game = gamemanager.launcherState.currentGame;
            launcher.restoreWindow(game);
        } catch (e) {
            S.error(e);
        }
    },cancelGameLaunch: function(game) {
        if (gamemanager.launcherState && gamemanager.launcherState.name && gamemanager.launcherState.name == gamemanager.states.LAUNCH_CANCELLING) {
            gamemanager.debug("Pressed second time on cancel!");
            return;
        }
        if (!gamemanager.launcherState || !gamemanager.launcherState.name) {
            return false;
        }
        clearTimeout(gamemanager._groupJoinFailedTimeout);
        clearTimeout(gamemanager._showLoaderTimeout);
        gamemanager.inviteState = {};
        gamemanager._coopAbort();
        gamemanager.resetQuickMatchPoll();
        gamemanager.isHidden = true;
        gamemanager.launcherState = {};
        $("#gamemanager-taskbar:first").removeClass("active");
        gamemanager.launcherState.logoShow = null;
        gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
        var matchmakeSession = $.jStorage.get("matchmakeSession", null);
        if (matchmakeSession != null) {
            S.debug("Cancelling matchmaking!");
            launcher.cancelMpMatchmaking(matchmakeSession.persona, matchmakeSession.game, matchmakeSession.matchmakeSessionId, function(canceled) {
                $.jStorage.deleteKey("matchmakeSession");
                if (canceled) {
                    gamemanager.clearLaunchState();
                    gamemanager.updateGameStateUI();
                }
            });
        } else {
            var killGame = function() {
                if (gamemanager.launcherState.gameState == "State_Matchmaking") {
                    S.debug("Matchmaking.. no kill of game..");
                    gamemanager.clearLaunchState();
                    gamemanager.updateGameStateUI();
                    return;
                }
                launcher._killGame(game, 0, function(gameKilled) {
                    gamemanager.debug("Killing game: " + gameKilled);
                    if (gameKilled) {
                    }
                });
            };
            if (gamemanager.reservation) {
                launcher.cancelReservation(gamemanager.reservation, function(wasCanceled) {
                    gamemanager.reservation = null;
                    gamemanager.saveLocalStorage();
                    killGame();
                });
            } else {
                killGame();
            }
        }
    },isCurrentPersona: function(personaId) {
        if (personaId == undefined || personaId == "0" || personaId == "") {
            return true;
        }
        var currentPersona = S.globalContext["session"]["currentPersona"];
        if (!currentPersona) {
            gamemanager.debug("Could not find a currentPersona in session");
            return false;
        }
        return (parseInt(currentPersona.personaId) == parseInt(personaId));
    },handleErrors: function(game, personaId, errorType, errorCode) {
        if (!gamemanager.isCurrentPersona(personaId)) {
            return;
        }
        switch (errorType) {
            case launcher.ALERT.ERR_LOGIN_INVALIDTOKEN:
            case launcher.ALERT.ERR_LOGIN_EXPIREDTOKEN:
                gamemanager.showLoaderError("Your game session has expired, please log out and then log in again");
                break;
            case launcher.ALERT.ERR_LOGIN_ACCOUNT:
                gamemanager.showLoaderError("Game could not login to EA Online backend.");
                break;
            case launcher.ALERT.ERR_LAUNCH_DISABLED:
                gamemanager.showLoaderError("Launching is currently disabled. Please try again later.");
                break;
            case launcher.ALERT.ERR_EMPTY_JOINSTATE:
                gamemanager.showLoaderError("Error when reserving slot in EA backend. Please try again.");
                break;
            case launcher.ALERT.ERR_FAILED_PERSONACALL:
                gamemanager.showLoaderError("Temporary problem fetching your soldier. Please try again.");
                break;
            case launcher.ALERT.ERR_BACKEND_HTTP:
                gamemanager.showLoaderError("Failed contact with EA backend. Please try again later.");
                break;
            case launcher.ALERT.ERR_BACKEND_ROUTE:
                gamemanager.showLoaderError("No contact with EA backend. Please try again later.");
                break;
            case launcher.ALERT.ERR_TOO_MANY_ATTEMPTS:
                gamemanager.showLoaderError("Too many attempts to join, take it easy soldier!");
                break;
            case launcher.ALERT.ERR_LOGIN_PERSONA:
                gamemanager.showLoaderError("Please select a valid PC soldier");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_SERVERFULL:
            case launcher.ALERT.ERR_SERVERCONNECT_FULL:
                gamemanager.showLoaderError("Could not join server since it's full");
                break;
            case launcher.ALERT.ERR_SERVER_QUEUE_FULL:
                gamemanager.showLoaderError("Could not join server, since both the server and its queue is full");
                break;
            case launcher.ALERT.ERR_SERVERCONNECT:
                gamemanager.showLoaderError("Server disconnected unexpectedly. Do you have the latest version of the game?");
                break;
            case launcher.ALERT.ERR_SERVERCONNECT_WRONGPASSWORD:
                var myss = {name: "apa",game: 1};
                joinflow.showPasswordPromptPopup(myss);
                gamemanager.showLoaderError("You've tried to connect to a password protected server and have entered the wrong password");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_KICKED:
            case launcher.ALERT.ERR_SERVER_KICKED:
                gamemanager.showLoaderError("You were kicked from the server by an administrator.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_BANNED:
            case launcher.ALERT.ERR_SERVERCONNECT_BANNED:
                gamemanager.showLoaderError("You are banned from this server and may not enter.");
                break;
            case launcher.ALERT.ERR_SERVERCONNECT_INVALIDGAME:
            case launcher.ALERT.ERR_PARAM_INVALIDGAMEID:
                if (errorCode == launcher.ALERT.ERR_PLAYER_ACTION.LEAVING) {
                    gamemanager.showLoaderError("Couldn't remove you from the queue since you've already left.");
                } else {
                    gamemanager.showLoaderError("Could not join server since it couldn't be found.");
                }
                break;
            case launcher.ALERT.ERR_PARAM_INVALIDUSERID:
                if (errorCode == launcher.ALERT.ERR_PLAYER_ACTION.LEAVING) {
                    gamemanager.showLoaderError("Couldn't remove you from the queue since you've already left.");
                } else {
                    gamemanager.showLoaderError("Sorry, can't find friend to join them.");
                }
                break;
            case launcher.ALERT.ERR_PARAM_INVALIDMISSION:
                gamemanager.showLoaderError("Level not found.");
                break;
            case launcher.ALERT.ERR_SHOW_TOS:
                launcher.restoreWindow(game);
                break;
            case launcher.ALERT.ERR_CAMPAIGN_NOSAVE:
                gamemanager.showLoaderError("Can't resume Campaign, no savefile found.");
                break;
            case launcher.ALERT.ERR_CAMPAIGN_LOADSAVE:
                gamemanager.showLoaderError("Can't resume Campaign, savefile couldn't be loaded.");
                break;
            case launcher.ALERT.ERR_ALREADY_IN_QUEUE:
                gamemanager.showLoaderError("You are already in a queue to this server.");
                break;
            case launcher.ALERT.ERR_CONFIG_MISSMATCH:
                gamemanager.showLoaderError("Configuration mismatch on the web server, come back later. (" + errorCode + ")");
                break;
            case launcher.ALERT.ERR_RESERVATION_ALREADY_EXIST:
                gamemanager.showLoaderError("You have already reserved a slot on this server.");
                break;
            case launcher.ALERT.ERR_ALREADY_GAME_MEMBER:
                gamemanager.showLoaderError("You have already joined this server.");
                break;
            case launcher.ALERT.ERR_GENERIC:
                var errorMsg = "";
                switch (errorCode) {
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.BACKEND:
                        errorMsg = "An error was reported from the EA backend";
                        break;
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.UNKNOWN:
                        errorMsg = "Something went wrong, please try again later";
                        break;
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.INTERNAL_SERVER_ERROR:
                        errorMsg = "Internal server error, please try again later";
                        break;
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.AJAX_ERROR:
                        errorMsg = "Could not contact Battlelog, please try again";
                        break;
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.MANGLED_RESPONSE:
                        errorMsg = "Error contacting Battlelog, please try again";
                        break;
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.SERVICE_UNAVAILABLE:
                        errorMsg = "Temporary technical error, please try again in a while";
                        break;
                    default:
                    case launcher.ALERT.ERR_GENERIC_ERROR_CODE.DEFAULT:
                        errorMsg = "Unknown error, please try again later";
                        break;
                }
                gamemanager.showLoaderError(errorMsg);
                break;
            case launcher.ALERT.ERR_MATCHMAKE.SESSION_TIMED_OUT:
                gamemanager.showLoaderError("Found no game matching your filter settings. Please try again or change your filter.");
                break;
            case launcher.ALERT.ERR_GROUP_JOIN.FAILED_TO_RESERVE_SLOTS:
                gamemanager.showLoaderError("Host in Party Join failed to reserve slots, Party Join cancelled.");
                break;
            case launcher.ALERT.ERR_GROUP_JOIN.GAME_SERVER_NOT_FOUND:
                gamemanager.showLoaderError("Host tried to join a server that currently is unavailable. Party Join cancelled.");
                break;
            case launcher.ALERT.ERR_MATCHMAKE.START_MATCHMAKING_FAILED:
                gamemanager.showLoaderError("Could not start matchmaking, please try again.");
                break;
            case launcher.ALERT.ERR_MATCHMAKE.REQUIRED_FILTER_MISSING:
                gamemanager.showLoaderError("Missing required filters (Mode or Game), for Quick Match to find any games.");
                break;
            case launcher.ALERT.ERR_MATCHMAKE.MAX_REQUESTS:
                gamemanager.showLoaderError("You are already matchmaking, please wait for that to complete.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_WRONGPROTOCOLVERSION:
                gamemanager.showLoaderError("Your game is out of date and can't join this server. Please update it.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_NOREPLY:
                gamemanager.showLoaderError("Could not get a connection to the server.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_TIMEDOUT:
                gamemanager.showLoaderError("Your connection to the server has timed out.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME:
                gamemanager.showLoaderError("You were disconnected from the server.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_BLAZE:
                gamemanager.showLoaderError("You were disconnected from the login server.");
                break;
            case launcher.ALERT.ERR_DISCONNECT_GAME_BADCONTENT:
                gamemanager.showLoaderError("You are missing levels or expansion packs needed to join this server.");
                break;
            case launcher.ALERT.ERR_LOGIN_PERSONANOTFOUND:
                gamemanager.showLoaderError("Your soldier was not found, please choose another.");
                break;
            case launcher.ALERT.ERR_INVALID_GAME_STATE_ACTION:
                gamemanager.showLoaderError("Can't join, this server is changing map, please try again soon.");
                break;
            case launcher.ALERT.ERR_PING_PINGSITES:
                gamemanager.showLoaderError("Could not ping servers to establish your location, you might end up on a server far away from you.");
                break;
            case launcher.ALERT.ERR_NO_PINGSITE_LIST:
                gamemanager.showLoaderError("Failed to initialize matchmaking, please try again.");
                break;
            default:
                gamemanager.showLoaderError("Something strange happened, please report this issue: " + errorType);
                break;
        }
    },showLoaderError: function(errorMessage) {
        gamemanager.clearLaunchState();
        clearTimeout(gamemanager._groupJoinFailedTimeout);
        clearTimeout(gamemanager._showLoaderTimeout);
        gamemanager._coopAbort();
        gamemanager.coopState = {};
        gamemanager.debug("Showing error: " + errorMessage);
        gamemanager.launcherState.logoShow = null;
        gamemanager.launcherState.name = gamemanager.states.LAUNCH_ERROR;
        gamemanager.launcherState.gameStatePretty = "Error";
        gamemanager.launcherState.errorMessage = errorMessage;
        gamemanager.isHidden = false;
        gamemanager.launcherState.hidePlatoonRepresenting = true;
        gamemanager.saveLocalStorageAndUpdateUI();
    },continueLoaderRetryLaunch: function() {
        try {
            var server = gamemanager.launcherState.server;
            var friendPersonaId = gamemanager.launcherState.friendPersonaId || false;
            gamemanager.launchAndJoin(server, friendPersonaId);
        } catch (e) {
            gamemanager.showLoaderError("Could not rejoin the server. Please try manually.");
        }
    },continueLoaderLaunch: function() {
        try {
            gamemanager.launcherState.name = gamemanager.launcherState.oldStateName;
            gamemanager.saveLocalStorageAndUpdateUI();
        } catch (e) {
            S.debug(e);
        }
    },showLoaderInfo: function() {
        gamemanager.debug("showLoaderInfo called!");
        gamemanager.launcherState.oldStateName = gamemanager.launcherState.name;
        gamemanager.launcherState.name = gamemanager.states.LAUNCH_INFOABORT;
        gamemanager.isHidden = false;
        gamemanager.updateGameStateUIFromState(gamemanager.getCurrentStateObject());
    },handleWarnings: function(game, personaId, warningType, warningCode) {
        if (!gamemanager.isCurrentPersona(personaId)) {
            return;
        }
        switch (warningType) {
            case launcher.ALERT.ERR_PING_PINGSITES:
                gamemanager.showLoaderWarning("Could not ping servers to establish your location, you might end up on a server far away from you.");
                break;
            case launcher.JOIN_STATE.GROUP_PARTIALLY_JOINED:
                gamemanager.showLoaderWarning("Some of the group members could not connect join the server. They're in the queue or got disconnected.");
                break;
            case launcher.ALERT.ERR_PARAM_MISSINGPERSONA:
                gamemanager.showLoaderWarning("Congratulations, you have now activated your game. Please launch the game again.");
                break;
            case launcher.ALERT.ERR_GENERIC:
                gamemanager.showLoaderError("Something went wrong when leaving queue. ( code: " + warningCode + " )");
                break;
        }
    },showLoaderWarning: function(message) {
        $S("game_manager_notifications").insert({"id": 0,"message": message});
    },launchCampaign: function(game) {
        if (joinflow.checkJoinGameRequirements(function() {
            gamemanager.launchCampaign(game);
        })) {
            if (launcher.killGameTimeout) {
                S.debug("CLEARED KILLGAME TIMEOUT");
                clearTimeout(launcher.killGameTimeout);
            }
            gamemanager.launcherState = {currentGame: game,title: "Campaign",hidePlatoonRepresenting: true,currentLevel: "sp_menu",gameState: launcher.STATE.LOADING,gameStatePretty: "Launching Campaign...",name: gamemanager.states.LAUNCH_INFO};
            gamemanager.show();
            var currentPersona = S.globalContext["session"]["currentPersona"];
            launcher.launchCampaignMenu(currentPersona, game);
        }
    },loadMission: function(game, level, difficulty) {
        var currentPersona = S.globalContext["session"]["currentPersona"];
        if (!currentPersona) {
            UserMessageBox.showTop("You need to set an active soldier in your profile before joining.", UserMessageBox.MSG_INFORMATION);
            return false;
        }
        gamemanager.launcherState = {currentGame: game,currentLevel: level,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO};
        gamemanager.show();
        launcher.loadMission(currentPersona, game, level, difficulty);
    },resumeMission: function(game, level) {
        var currentPersona = S.globalContext["session"]["currentPersona"];
        if (!currentPersona) {
            UserMessageBox.showTop("You need to set an active soldier in your profile before joining.", UserMessageBox.MSG_INFORMATION);
            return false;
        }
        gamemanager.launcherState = {currentGame: game,currentLevel: level,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO};
        gamemanager.show();
        launcher.resumeCampaign(currentPersona, game);
    },countdownTimer: function(callback) {
        if (!gamemanager.launcherState || !gamemanager.launcherState.name) {
            return;
        }
        var current_date = new Date();
        var timeout_time = new Date(gamemanager.launcherState.timeout_time);
        var time_left = Math.round((timeout_time - current_date) / 1000);
        if (time_left && (time_left > 0) && (time_left != "NaN")) {
            $(".gamemanager-currentstate .timer_time").html(Surface.Modifier.sectotime(time_left));
            var t = setTimeout(function() {
                gamemanager.countdownTimer(callback);
            }, 1000);
        } else {
            $(".gamemanager-currentstate .gamemanager-queue-text").html("Reservation timed out.");
            $("#gamemanager-launchstate-timer-launchbutton").remove();
            $(".gamemanager-state-close-hidden").show();
        }
    },joinReservation: function() {
        if (gamemanager.reservation) {
            gamemanager.inviteState = {};
            gamemanager.saveLocalStorageAndUpdateUI();
            S.debug("Got join reservation, checking game requirements");
            if (gamemanager.reservation && gamemanager.reservation.gameServer) {
                var server = gamemanager.reservation.gameServer;
                S.debug("Found server!");
                S.debug(server);
                if (joinflow.checkJoinGameRequirements(function(r) {
                    gamemanager.joinReservation();
                })) {
                    S.debug("Game requirements met!");
                    if (server.hasPassword && (S.globalContext["session"]["serverPassword"] == null || typeof (S.globalContext["session"]["serverPassword"]) == "undefined")) {
                        joinflow.showPasswordPromptPopup(server, function() {
                            gamemanager.joinReservation();
                        });
                        return;
                    }
                    S.debug("Joining reservation...");
                    gamemanager.launcherState.logoShow = 1;
                    launcher.joinReservation(gamemanager.reservation);
                }
            } else {
                S.debug("Joining reservation without Server!");
                gamemanager.launcherState.logoShow = 1;
                launcher.joinReservation(gamemanager.reservation);
            }
        }
    },_coopAbort: function() {
        if (gamemanager.coopState && gamemanager.coopState.id) {
            var url = $("#coopLeave-urlaction").val().replace("#COOPID#", gamemanager.coopState.id);
            base.ajaxPostJson(url, function(s, r) {
                switch (r.message) {
                    case "NOT_FOUND":
                        base.showReceipt("CO-OP game not found");
                        gamemanager.coopState = {};
                        gamemanager.saveLocalStorageAndUpdateUI();
                        break;
                }
            });
        }
        gamemanager.coopState = {};
    },coopPublicStart: function(coopGame) {
        S.debug("got coopPublicStart!");
        gamemanager.updateCoopLobby(coopGame);
        var coopMatchmakeRules = {"mission": coopGame.level,"difficulty": coopGame.difficulty};
        gamemanager.clearLaunchState();
        launcher.startPublicCoOpMatchmaking(S.globalContext.session.currentPersona, coopGame.game, coopMatchmakeRules);
        if (coopGame.level == "any") {
            gamemanager.launcherState.title = "CO-OP Quick match";
        } else {
            gamemanager.launcherState.title = "CO-OP Quick match";
        }
        gamemanager.launcherState.hidePlatoonRepresenting = true;
        gamemanager.launcherState.currentLevel = coopGame.level;
        gamemanager.saveLocalStorage();
    },_joinCoOpAsPeer: function(coopGameHost) {
        gamemanager.launcherState = {title: "CO-OP",currentGame: coopGameHost.coopGame.game,currentLevel: coopGameHost.coopGame.level,gameState: launcher.STATE.LOADING,gameStatePretty: "...",name: gamemanager.states.LAUNCH_INFO};
        gamemanager.launcherState.hidePlatoonRepresenting = true;
        gamemanager.debug("Start up this peer");
        launcher.joinPrivateCoOpServer(S.globalContext.session.currentPersona, coopGameHost.hostUserPresence.game, coopGameHost.coopGame.ownerPersonaId);
    },_quickMatchMakePoll: false,_quickMatchMakeRequest: false,_quickMatchCount: 0,addQuickMatchmakePoll: function() {
        S.debug("Adding addQuickMatchmakePoll");
        gamemanager._quickMatchCount = 0;
        clearInterval(gamemanager._quickMatchMakePoll);
        gamemanager._quickMatchMakePoll = setInterval(function() {
            if (++gamemanager._quickMatchCount > 2) {
                S.debug("Clearing quickmatchcount");
                gamemanager.resetQuickMatchPoll();
                return false;
            }
            var matchmakeSession = $.jStorage.get("matchmakeSession", null);
            if (matchmakeSession != null) {
                S.debug("Polling for quickmatch!");
                var mId = matchmakeSession.matchmakeSessionId;
                var url = "/" + base.gameToSection(matchmakeSession.game) + "/launcher/fetchQuickMatchStatus/" + mId;
                if (gamemanager._quickMatchMakeRequest) {
                    gamemanager._quickMatchMakeRequest.abort();
                }
                gamemanager._quickMatchMakeRequest = $.ajax({url: url,dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                        S.debug("Got qm result");
                        S.debug(response);
                        switch (response.message) {
                            case "NOT_FOUND":
                                break;
                            case "NO_MATCH":
                                launcher._matchmakeFail(response);
                                break;
                            case "FOUND_MATCH":
                                launcher._matchmakeSuccessful(response);
                                break;
                        }
                    }, false)});
            } else {
                S.debug("Clearing interval since no matchmakesession was found");
                clearInterval(gamemanager._quickMatchMakePoll);
            }
        }, 10000);
    },resetQuickMatchPoll: function() {
        clearInterval(gamemanager._quickMatchMakePoll);
        if (gamemanager._quickMatchMakeRequest) {
            gamemanager._quickMatchMakeRequest.abort();
        }
    }};
var gather = {ajaxLoaderImg: '<img width="16" class="gather-ajaxloader" height="16" src="/public/base/shared/loading16x16.gif" />',isDropped: false,currentUpdate: function(data) {
        $S("gather").update(data);
        gather.setupDrag();
    },onPageShow: function() {
    },init: function(template) {
        ESN.Sonar.ensureConnectedToServer(function() {
        });
        Push.bind("GatherUpdated", function(event) {
            if ($("#openGathers").length) {
                $S("openGathers").update(event.data);
                $S("runningGathers").update(event.data);
            } else {
                gather.currentUpdate({gather: event.data});
            }
        });
        Push.bind("GatherCreated", function(event) {
            if ($("#openGathers").length) {
                $S("openGathers").insert(event.data);
            }
        });
        Push.bind("GatherEnded", function(event) {
            if ($("#openGathers").length) {
                $S("runningGathers").remove(event.data);
            } else {
                gather.currentUpdate({gather: event.data});
            }
        });
        Push.bind("GatherStarted", function(event) {
            if ($("#openGathers").length) {
                $S("openGathers").remove(event.data);
                $S("runningGathers").insert(event.data);
            } else {
                gather.currentUpdate({gather: event.data});
            }
        });
        Push.bind("GatherDeleted", function(event) {
            if ($("#openGathers").length) {
                $S("openGathers").remove(event.data);
                $S("runningGathers").remove(event.data);
            } else {
                alert("This gather has been removed");
                base.redirect("/bfbc2/gather/");
            }
        });
        Push.bind("GatherChatMessageIncoming", function(event) {
            if (event.data.fromUserId == S.globalContext.session.user.userId) {
                return false;
            }
            gather.chatInsertMsg(event.data);
        });
        $("#gather-chat-form").submit(function(e) {
            e.preventDefault();
            message = $.trim($("#gather-chat-input-message").val());
            if (message.length == 0) {
                return false;
            }
            m = {};
            m.timestamp = Math.round(new Date().getTime() / 1000);
            m.fromUser = S.globalContext.session.user;
            m.fromUserId = S.globalContext.session.user.userId;
            m.message = message;
            m.gatherId = $(this).find("input[name=gatherId]").val();
            gather.chatInsertMsg(m);
            base.ajaxPost(this);
            $("#gather-chat-input-message").val("");
            return false;
        });
        $("#gather-chat-input-message").focus(function() {
            if ($(this).val() == $(this).attr("placeholder")) {
                $(this).val("");
            }
        });
        $("#gather-chat-input-message").blur(function() {
            if ($(this).val() == "") {
                $(this).val($(this).attr("placeholder"));
            }
        });
        gather.setupDrag();
        $(".gather-playerrow-kick").live("click", function() {
            var adminActionUrl = $("input[name=adminActionUrl]").val();
            var userId = $(this).parent().attr("data-id");
            var groupId = $(this).parent().parent().attr("data-id");
            $(this).replaceWith(gather.ajaxLoaderImg);
            $.post(adminActionUrl, {"post-check-sum": S.globalContext.session.postChecksum,action: "kick",userId: userId,groupId: groupId});
        });
        $(".gather-playerrow-groupkick").live("click", function() {
            var userId = $(this).parent().attr("data-id");
            var groupId = $(this).parent().parent().attr("data-id");
            $(this).replaceWith(gather.ajaxLoaderImg);
            gather.action("kickFromGroup", {userId: userId,groupId: groupId});
        });
        $(".gather-playerrow-groupdeny").live("click", function() {
            var userId = $(this).parent().attr("data-id");
            var groupId = $(this).parent().parent().attr("data-id");
            $(this).replaceWith(gather.ajaxLoaderImg);
            gather.action("leaveGroup", {userId: userId,groupId: groupId});
        });
        $(".gather-playerrow-groupaccept").live("click", function() {
            var userId = $(this).parent().attr("data-id");
            $(this).replaceWith(gather.ajaxLoaderImg);
            gather.action("goReady", {userId: userId});
        });
        $(".gather-playerrow-gounready").live("click", function() {
            var userId = $(this).parent().attr("data-id");
            $(this).replaceWith(gather.ajaxLoaderImg);
            gather.action("goUnready", {userId: userId});
        });
        gather.chatInsertMsg();
    },onComcenterDrag: function(userId) {
        var found = false;
        $("#gather-group-dropzone").filter(function() {
            found = true;
            return 1;
        }).addClass("dragging").droppable({tolerance: "pointer",drop: function(event, ui) {
                gather.action("inviteToGroup", {userId: userId});
            }});
        return found;
    },chatInsertMsg: function(data) {
        chatLog = $("#gather-chat-log");
        scroller = $("#gather-chat .gather-chat-log-scroller");
        doAutoScroll = (scroller.scrollTop() == scroller.find("ul").outerHeight(true) - scroller.outerHeight(true) || scroller.scrollTop() == 0);
        if (data) {
            chatLog.append($S("gather.chatmessage").render({"message": data}));
        }
        if (doAutoScroll || !data) {
            scroller.scrollTop(scroller.find("ul").outerHeight(true) - scroller.outerHeight(true));
        }
    },adminAction: function(inp, action, team) {
        var form = $(inp).parents("form");
        var data = {"post-check-sum": S.globalContext.session.postChecksum,userId: form.find("input[name=userId]").val()};
        data["action"] = action;
        if (team) {
            data["team"] = team;
        }
        var url = form.attr("action");
        S.log(data);
        $.post(url, data, function(data) {
        }, "json");
    },joinServer: function(gameUrl) {
        S.log("Joining server: " + gameUrl);
        joinflow.joinServerByUrl(gameUrl, null, function(foundServer) {
        });
    },ajaxpost: function(url) {
        $.post(url, {"post-check-sum": S.globalContext.session.postChecksum}, function() {
        }, "json");
    },action: function(action, data) {
        var form = $("#gather-action");
        var data = data || {};
        data.action = action;
        data["post-check-sum"] = S.globalContext.session.postChecksum;
        $.post(form.attr("action"), data, function(response) {
            S.log(response);
            if (response.status == "fail") {
                if (response.reason == "MATCHSERVER_NOT_AVAILABLE") {
                    alert("All game servers are currently occupied. Please wait a moment and then try again.");
                } else {
                    alert(response.reason);
                }
            }
        }, "json");
    },_getDropInfo: function(e) {
        return $(e).find(".gather-teamcontainer-dropinfo");
    },_getSource: function(e) {
        for (var i = 0; i < 5; i++) {
            if ($(e).hasClass("gather-draggable-" + i)) {
                return "#gather-droppable-" + i;
            }
        }
    },setupDrag: function() {
        var adminActionUrl = $("input[name=adminActionUrl]").val();
        $(".gather-group-droparea").droppable();
        for (var i = 0; i < 5; i++) {
            var acceptlist = [];
            for (var j = 0; j < 5; j++) {
                if (j != i) {
                    acceptlist.push(".gather-draggable-" + j);
                }
            }
            $(".gather-draggable-" + i).draggable({revert: "invalid",zIndex: 2800,revertDuration: 1,start: function() {
                    $("#gather-droppable-0").droppable("option", "disabled", $(this).hasClass("gather-playerrow-leader"));
                    $(".gather-teamcontainer-full").not($(this).parent()).droppable("option", "disabled", true);
                    $(this).data("startPosition", $(this).parent().parent().parent().position());
                },stop: function() {
                    if (!gather.isDropped) {
                        $("#gather-droppable-0, .gather-teamcontainer-full").droppable("option", "disabled", false);
                    }
                    gather.isDropped = false;
                }}).disableSelection();
            $("#gather-droppable-" + i).droppable({accept: acceptlist.join(","),over: function(event, ui) {
                    var slot = this.id.replace("gather-droppable-", "");
                    var containerSlotsFree = $("input[name=gather-freeslots-" + slot + "]").val();
                    var groupId = new String($(ui.draggable).attr("id")).replace("gather-group-", "");
                    var groupSize = $("input[name=gather-groupsize-" + groupId + "]").val();
                    if (!parseInt(slot) || !groupSize || containerSlotsFree >= groupSize) {
                        $(this).addClass("gather-teamcontainer-onover");
                    }
                },out: function(event, ui) {
                    $(this).removeClass("gather-teamcontainer-onover");
                },drop: function(event, ui) {
                    var slot = this.id.replace("gather-droppable-", "");
                    var containerSlotsFree = $("input[name=gather-freeslots-" + slot + "]").val();
                    var groupId = new String($(ui.draggable).attr("id")).replace("gather-group-", "");
                    var groupSize = $("input[name=gather-groupsize-" + groupId + "]").val();
                    if (parseInt(slot) && groupSize && containerSlotsFree < groupSize) {
                        $(ui.draggable).animate($(ui.draggable).data("startPosition"), 500);
                        return false;
                    }
                    gather.isDropped = true;
                    gather._getDropInfo(this).html(gather.ajaxLoaderImg);
                    gather._getDropInfo(gather._getSource(ui.draggable)).find(".gather-teamcontainer-dropinfo").html(gather.ajaxLoaderImg);
                    var userId = new String($(ui.draggable).attr("id")).replace("gather-player-", "");
                    var teamId = new String($(this).attr("id")).replace("gather-droppable-", "");
                    $(ui.draggable).hide();
                    $.post(adminActionUrl, {"post-check-sum": S.globalContext.session.postChecksum,action: "setTeam",userId: userId,team: teamId});
                    $("#gather-droppable-0, #gather-droppable-1, #gather-droppable-2, #gather-droppable-3, #gather-droppable-4").droppable("option", "disabled", true);
                }});
        }
    }};
var joinflow = {currentServerInfo: null,test: "no",onPageShow: function() {
    },init: function(template) {
        $("#joinflow-registration").live("click", function() {
            joinflow.hidePopup(true);
        });
    },joinFriend: function(form) {
        var formValues = {};
        $(form).find(":input").each(function() {
            formValues[this.name] = $(this).val();
        });
        friendPersonaId = formValues.friendPersonaId;
        joinflow.joinServerByUrl($(form).attr("action"), friendPersonaId, function(foundServer) {
        });
        return false;
    },joinServerByUrl: function(url, friendPersonaId, callback) {
        var serverUrl = url;
        if (serverUrl.indexOf("?") == -1) {
            serverUrl += "?";
        } else {
            serverUrl += "&";
        }
        serverUrl += "json=1&join=true";
        S.debug(serverUrl);
        $.ajax({url: serverUrl,dataType: "json",complete: base.onComplete(function(success, response, xmlHttpRequest) {
                if (success) {
                    joinflow._joinServer(response.data, friendPersonaId);
                } else {
                    S.debug("No server info returned: " + response);
                    if (xmlHttpRequest.status == 404) {
                        return joinflow.showPopup("serveroffline", {});
                    } else {
                        return base.showReceipt("Could not to join server.", receiptTypes.ERROR);
                    }
                }
                if (callback) {
                    callback(success);
                }
            }, false)});
    },hasValidPlugin: function() {
        return gamemanager.verifyPlugin(S.globalContext.realm.section);
    },checkJoinCoopRequirements: function(callback) {
        if (!joinflow.checkJoinGameRequirements()) {
            callback(false);
            return;
        }
        launcher.isGameRunning(S.globalContext.realm.game, function(isGameRunning) {
            if (isGameRunning) {
                launcher._killGame(S.globalContext.realm.game, 0, function(gameKilled) {
                    if (gameKilled) {
                        callback(true);
                    } else {
                        base.showReceipt("Please exit the game before starting CO-OP", receiptTypes.ERROR);
                        callback(false);
                    }
                });
            } else {
                callback(true);
            }
        });
    },checkJoinGameRequirements: function(callback, server, friendPersonaId) {
        var callback = callback || null;
        var server = server || null;
        var friendPersonaId = friendPersonaId || 0;
        var namespaces = S.globalContext.staticContext.nucleusNamespaces;
        if (!S.globalContext["session"]["isLoggedIn"]) {
            joinflow.showLoginPopup(server, friendPersonaId);
            return false;
        }
        if (!S.globalContext["session"]["currentPersona"] || (S.globalContext["session"]["currentPersona"]["namespace"] != namespaces.BATTLEFIELD && S.globalContext["session"]["currentPersona"]["namespace"] != namespaces.CEM_EA_ID)) {
            joinflow.showNotValidPersonaPopup(server, friendPersonaId, callback);
            return false;
        }
        var ua = navigator.userAgent;
        if (ua.match(/Origin/)) {
            joinflow.showPopup("origin", {});
            return false;
        }
        if (!joinflow.hasValidPlugin()) {
            joinflow.showPluginPopup(server, friendPersonaId, callback);
            return false;
        }
        if (!gamemanager.patcherState.name || gamemanager.patcherState.name != gamemanager.states.PATCHER_OK) {
            joinflow.showPatcherPopup(server, friendPersonaId, callback);
            return false;
        }
        if (gamemanager.inviteState && gamemanager.inviteState.name == gamemanager.states.INVITE_STARTED) {
            if (server && server.guid && (server.guid != gamemanager.inviteState.server.guid)) {
                joinflow.showGroupJoinPopup(server, friendPersonaId, callback);
                return false;
            }
        }
        if (gamemanager.gameState && gamemanager.gameState.name != gamemanager.states.GAME_OK) {
            joinflow.showInstallGameButton(server, friendPersonaId, callback);
            return false;
        }
        return true;
    },_joinServer: function(server, friendPersonaId) {
        var friendPersonaId = friendPersonaId || false;
        S.debug("_joinServer in joinflow.js");
        S.debug(server);
        if (!joinflow.checkJoinGameRequirements(null, server, friendPersonaId)) {
            S.debug("Could not join game since all requirements is not set...");
            return false;
        }
        joinflow._saveCurrentServer(server.game, server.guid, friendPersonaId);
        if (server && !server.online) {
            joinflow._deleteCurrentServer();
            joinflow.showPopup("serveroffline", {server: server});
            return false;
        }
        if (server.hasPassword && (S.globalContext["session"]["serverPassword"] == null || typeof (S.globalContext["session"]["serverPassword"]) == "undefined")) {
            joinflow.showPasswordPromptPopup(server, function() {
                joinflow._joinServer(server, friendPersonaId);
            });
            return;
        }
        launcher.isGameInstalled(server.game, function(installed) {
            var platforms = S.globalContext.staticContext["platforms"];
            var gameExpansions = S.globalContext.staticContext["gameExpansions"];
            if (installed) {
                if (server.gameExpansion && !base.ownsGameExpansion(server.gameExpansion, platforms.PC)) {
                    joinflow.showBuyPopup(server);
                } else {
                    launcher.checkForPatchAvailable(server.game, gameTypes.MP, function(game, wasUpToDate) {
                        if (wasUpToDate === true) {
                            joinflow.launch(server, friendPersonaId);
                        } else {
                            popup.render("installstate", gamemanager.getCurrentStateObject());
                        }
                    });
                }
            } else {
                if (base.ownsGame(server.game, platforms.PC)) {
                    if (server.game == games.BFBC2) {
                        joinflow.showBFBC2ExePopup(server);
                    } else {
                        joinflow.showInstallGameButton(server.game, friendPersonaId, function(game, wasUpToDate) {
                            joinflow._joinServer(server);
                        });
                    }
                } else {
                    joinflow.showBuyPopup(server);
                }
            }
        });
    },launch: function(server, friendPersonaId) {
        S.debug("Launching ");
        joinflow.hidePopup(true);
        gamemanager.launchAndJoin(server, friendPersonaId);
    },hidePopup: function(conf) {
        if (conf) {
            S.debug("trying to hide install popup..");
            joinflow._deleteCurrentServer();
            $("#joinflow-popup-container").hide();
            $S("joinflow-popup").update({"show": 0});
        }
    },showPopup: function(name, state) {
        $S("joinflow-popup").update({"show": 1,"name": name,"state": state});
        $("#joinflow-popup-container").show();
        $("#joinflow-popup .common-popup-close").click(function() {
            joinflow.hidePopup(true);
        });
    },showPasswordPromptPopup: function(server, callback) {
        joinflow.showPopup("passwordPrompt", {"server": server});
        $("#joinflow-passwordprompt-serverpassword").val("").focus();
        var onSubmitClick = function() {
            var pass = $("#joinflow-passwordprompt-serverpassword").val();
            launcher.verifyPassword(server.game, server.guid, pass, function(passwordOk) {
                if (passwordOk) {
                    S.globalContext["session"]["serverPassword"] = $("#joinflow-passwordprompt-serverpassword").val();
                    $(".common-popup-close").trigger("click");
                    callback();
                } else {
                    base.showReceipt("Wrong password!", "skull");
                    $("#joinflow-passwordprompt-serverpassword").val("").focus();
                }
            });
        };
        $("#joinflow-passwordprompt-submit").click(onSubmitClick);
        $("#joinflow-passwordprompt-serverpassword").bind("keypress", function(e) {
            if (e.keyCode == 13) {
                onSubmitClick();
            }
        });
    },showJoinPartyInsteadPopup: function(data, callback) {
        popup.render("joinpartygame", data);
        $(".chat-party-create-join-button").bind("click", callback);
    },showNotValidPersonaPopup: function(server, friendPersonaId, callback) {
        S.debug("Show showNotValidPersonaPopup :");
        S.debug(server);
        var section = S.globalContext["realm"]["section"];
        var sections = S.globalContext.staticContext.sections;
        joinflow.showPopup("notvalidpersona", {server: server,notCorrectSection: section == sections.ALL});
        joinflow._saveCurrentServerCookie(server, friendPersonaId);
        $("#joinflow-pluginpopup-continuebutton").click(function() {
            joinflow.hidePopup(true);
            if (server) {
                joinflow._joinServer(server, friendPersonaId);
            }
            if (typeof (callback) == "function") {
                S.debug("Doing popup callback..");
                callback();
            }
        });
        $("#base-header-personacontainer").click();
    },showPersonaPopup: function(server, friendPersonaId) {
        var setCurrentPersona = function(personaId, personaName, clanTag, platform) {
            joinflow.showLoadingPopup(server);
            $.ajax({type: "POST",url: "/all/profile/updatepersonas",data: {personaId: personaId,gameId: server.game},complete: base.onComplete(function(success, response) {
                    if (success) {
                        S.globalContext["session"]["currentPersona"] = {personaId: personaId,personaName: personaName,clanTag: clanTag,platform: S.globalContext.staticContext["platforms"]["PC"]};
                    } else {
                        base.showMessageBoxFromResponse(success, response);
                    }
                    joinflow._joinServer(server, friendPersonaId);
                }, false)});
        };
        var onSelectClick = function() {
            var personaId = parseInt($("#joinflow-personapopup-selectbox").val());
            var personaName = $("#joinflow-personapopup-selectbox :selected").text();
            var clanTag = $("#joinflow-personapopup-clantag").val();
            setCurrentPersona(personaId, personaName, clanTag, S.globalContext.staticContext["platforms"]["PC"]);
        };
        joinflow.showLoadingPopup(server);
    },showLoadingPopup: function(server) {
        joinflow.showPopup("loading", {server: server});
    },showGroupJoinPopup: function(server, friendPersonaId, callback) {
        joinflow.showPopup("groupjoin", {server: server});
        $("#joinflow-groupjoin-continuebutton").click(function() {
            joinflow.hidePopup(true);
            if (server) {
                $("#gamemanager-invite-cancel").click();
                gamemanager.inviteState = {};
                gamemanager.saveLocalStorage();
                joinflow._joinServer(server, friendPersonaId);
            }
            if (typeof (callback) == "function") {
                S.debug("Doing popup callback..");
                callback();
            }
        });
    },showPluginPopup: function(server, friendPersonaId, callback) {
        var ua = navigator.userAgent;
        if (ua.match(/iPhone|iPad|iPod|Android/)) {
            joinflow.showPopup("tablet", {});
            return;
        }
        gamemanager.resetPluginGameManager();
        joinflow.showPopup("plugin", {server: server});
        $("#joinflow-show-gamemanager").click(function() {
            gamemanager.show();
        });
        $("#joinflow-pluginpopup-continuebutton").click(function() {
            joinflow.hidePopup(true);
            if (server) {
                joinflow._joinServer(server, friendPersonaId);
            }
            if (typeof (callback) == "function") {
                S.debug("Doing popup callback..");
                callback();
            }
        });
    },showPatcherPopup: function(server, friendPersonaId, callback) {
        gamemanager.resetPluginGameManager();
        joinflow.showPopup("patcher", {server: server});
        $("#joinflow-show-gamemanager").click(function() {
            gamemanager.show();
        });
        $("#joinflow-pluginpopup-continuebutton").click(function() {
            joinflow.hidePopup(true);
            if (server) {
                joinflow._joinServer(server, friendPersonaId);
            }
            if (typeof (callback) == "function") {
                S.debug("Doing popup callback..");
                callback();
            }
        });
    },showBFBC2ExePopup: function(server) {
        joinflow.showPopup("bfbc2exe", {server: server});
        $("#joinflow-bfbc2exepopup-continuebutton").click(function() {
            joinflow._joinServer(server);
        });
    },showBC2PatchingNeededPopup: function() {
        var checkGameVersion = function() {
            launcher.checkForPatchAvailable(games.BFBC2, gameTypes.MP, function(game, wasUpToDate) {
                if (wasUpToDate) {
                    joinflow.showPopup("exesuccess", {});
                    $("#joinflow-exesuccesspopup-continuebutton").click(function() {
                        if (!joinflow._joinCurrentServer()) {
                            joinflow.hidePopup(1);
                        }
                    });
                }
            });
        };
        var popupState = $S("joinflow-popup").getState();
        if (popupState.name != "bfbc2patching") {
            joinflow.showPopup("bfbc2patching", {});
        }
        setTimeout(checkGameVersion, 1000);
    },showInstallGameButton: function(server, friendPersonaId, callback) {
        gamemanager.resetPluginGameManager();
        joinflow.showPopup("install", {});
        $("#joinflow-show-gamemanager").click(function() {
            gamemanager.show();
        });
        $("#joinflow-pluginpopup-continuebutton").click(function() {
            joinflow.hidePopup(true);
            if (server) {
                joinflow._joinServer(server, friendPersonaId);
            }
            if (typeof (callback) == "function") {
                S.debug("Doing popup callback..");
                callback();
            }
        });
    },showPatchSuccessPopup: function(server) {
        joinflow.showPopup("exesuccess", {server: server});
        $("#joinflow-exesuccesspopup-continuebutton").click(function() {
            joinflow._joinServer(server);
        });
    },showLoginPopup: function(server, friendPersonaId) {
        joinflow.showPopup("login", {server: server});
        $("#joinflow-email").focus();
        $("#joinflow-loginpopup-form input[type=submit]").click(function() {
            var form = $("#joinflow-loginpopup-form");
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    if (success) {
                        joinflow._saveCurrentServerCookie(server, friendPersonaId);
                        window.location.reload();
                    } else {
                        base.showMessageBoxFromResponse(success, response);
                        joinflow.showLoginPopup(server, friendPersonaId);
                    }
                }, false)});
            joinflow.showLoadingPopup(server);
        });
    },showPurchaseGameButton: function() {
        $S("gameStatus").update({state: "buygame",statePrettyName: "Buy game",patcherButton: "purchase"});
        $("#patcherButton-purchase").click(function() {
            joinflow.showBuyView(this);
        });
    },showBuyPopup: function(server) {
        joinflow.showPopup("buy", {server: server});
        $("#buy-game-button").show().click(function() {
            joinflow.showBuyView(this);
        });
    },showBuyView: function(element) {
        var url = $(element).attr("action");
        $.ajax({url: url,dataType: "json",success: function(response) {
                $.each(response.data.urls, function(locale, url) {
                    window.open(url);
                    return false;
                });
            },error: function() {
                alert("No store URLs found");
                S.debug("No store URLs found");
            },complete: null});
    },_saveCurrentServerCookie: function(server, friendPersonaId) {
        S.debug("Not saving server cookie for now");
        return false;
        server.friendPersonaId = friendPersonaId;
        S.debug("Saved server cookie!");
        Surface.cookieSet("joinflow.savedServerCookie", S.encodeJSON(server), 0.007);
    },_saveCurrentServer: function(serverGame, serverGuid, friendPersonaId) {
        joinflow.currentServerInfo = {guid: serverGuid,game: serverGame,friendPersonaId: friendPersonaId};
        $.jStorage.set("joinflow.savedServer", joinflow.currentServerInfo);
    },_joinCurrentServer: function() {
        var server = joinflow._getCurrentServer();
        if (server.guid && server.game) {
            var gameUrl = "/" + base.gameToSection(server.game) + "/serverguide/show/" + server.guid;
            joinflow.joinServerByUrl(gameUrl, server.friendPersonaId, function(foundServer) {
                if (!foundServer) {
                    joinflow._deleteCurrentServer();
                }
            });
            return true;
        }
        return false;
    },_getCurrentServer: function() {
        var server = {};
        if (joinflow.currentServerInfo != null) {
            server = joinflow.currentServerInfo;
        } else {
            var savedServer = $.jStorage.get("joinflow.savedServer", null);
            if (savedServer != null) {
                server = savedServer;
            }
        }
        return server;
    },_deleteCurrentServer: function() {
        joinflow.currentServerInfo = null;
        $.jStorage.deleteKey("joinflow.savedServer");
    }};
var keybinding = {init: function() {
    },onPageShow: function() {
        $.each(["infantry", "heli", "jet", "vehicle"], function(i, setup) {
            $("#tab_" + setup).pageBind("click", function(e) {
                $(".keytable").hide();
                $("#keytable_" + setup).show();
            });
        });
    }};
var leaderboard = {onPageShow: function() {
        var lbFetch = $("#leaderboard-fetch-url");
        if (lbFetch.length) {
            var url = lbFetch.find("input").val();
            S.debug("loading " + url);
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        var html = $S("leaderboard.rows").render(response.data);
                        lbFetch.replaceWith($(html));
                        common.startSpinners();
                    }
                }, false)});
        }
        lbFetch = $("#leaderboard-overview-fetch-url");
        if (lbFetch.length) {
            url = lbFetch.attr("url");
            S.debug("lbloading " + url);
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success && response.message == "OK") {
                        $S("leaderboardOverview").update(response.data);
                    } else {
                        $S("leaderboardOverview").update({"ladders": [],"message": "Unable to load leaderboard, please try again in a bit."});
                    }
                }, false)});
        }
        lbFetch = $("#leaderboard-specific-fetch-url");
        if (lbFetch.length) {
            url = lbFetch.attr("url");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success && response.message == "OK") {
                        $S("leaderboardSpecific").render(response.data);
                        $S("leaderboardSpecific").refresh();
                    } else {
                        response.data["stats"] = [];
                        response.data["message"] = "Unable to load leaderboard, please try again in a bit.";
                        $S("leaderboardSpecific").render(response.data);
                        $S("leaderboardSpecific").refresh();
                    }
                }, false)});
        }
    },dropdownSelected: function(ob) {
        var val = $(".leaderboard-goto").val();
        Surface.ajaxNavigation.navigateTo(val);
    },init: function(template) {
    }};
var like = {onPageShow: function() {
    },init: function(template) {
    }};
$(".main-login-button").click(function() {
    $("#main-login-ajax-loader").show();
});
$("#main-login-email").focus();
$("#main-newsletter-signup").click(function(e) {
    e.preventDefault();
    var load = window.open("http://preferences.ea.com/newsletter/signup/Battlefield-franchise?locale=en_US", "", "scrollbars=no,menubar=no,height=770,width=580,resizable=no,toolbar=no,location=no,status=no");
});
$("#main-newsletter-view").click(function(e) {
    e.preventDefault();
    var load = window.open("http://ebm.em.ea.com/c/tag/hBLx6H5B7uauvB8HGuSDwLjSk5H/doc.html", "", "scrollbars=yes,menubar=no,height=1000,width=700,resizable=yes,toolbar=no,location=no,status=no");
});
var main = {beaconPush: null,currentAjaxLoader: null,pageLoading: false,ajaxOrbitDebug: false,ajaxBefore: function(url) {
        $.unbindPage();
        try {
            main.isLoggedIn = S.globalContext.session.isLoggedIn;
        } catch (e) {
            S.error(e);
        }
        $(".tipsy").hide();
        try {
            serverguideList.serversPingQueue = [];
        } catch (e) {
        }
        $(".common-popup-remove").remove();
        main.pageLoading = true;
        clearTimeout(main.currentAjaxLoader);
        main.currentAjaxLoader = setTimeout(function() {
            if (main.pageLoading) {
                $("#base-ajax-loading").show();
            }
        }, 1000);
    },curBodyClass: "",clearLoader: function(url, data) {
        main.pageLoading = false;
        clearTimeout(main.currentAjaxLoader);
        $("#base-ajax-loading").hide();
    },ajaxAfter: function(url, data) {
        $(".tipsy").hide();
        main.clearLoader();
        $("#content").html(data);
        if (document.getElementById("esnlaunch_container") == null) {
            S.error("Plugin container missing, please make sure all tags are closed on the previous page");
        }
        $(document).scrollTop(0);
        if (Surface.globalContext.hideFooter) {
            $("#footer-wrapper").hide();
        } else {
            $("#footer-wrapper").show();
        }
        if (main.curBodyClass != "") {
            $("body").removeClass(main.curBodyClass);
        }
        main.curBodyClass = $("#base-ajaxindex-bodyclass").val();
        if (main.curBodyClass != "") {
            $("body").addClass(main.curBodyClass);
        }
        document.title = $("#base-ajaxindex-pagetitle").val();
        $S("base-header-menu").refresh();
        base.initMenuDropdowns();
        try {
            if (main.isLoggedIn != S.globalContext.session.isLoggedIn) {
                document.location.reload();
            }
        } catch (e) {
            S.error(e);
        }
        base.omnitureTrackPage();
        if (S.globalContext.useExperimentalPush) {
            var channels = [], pc = S.globalContext.pushConnections;
            for (var i = 0; i < pc.length; i++) {
                for (var j = 0; j < pc[i].channelsWithAuth.length; j++) {
                    channels.push(pc[i].channelsWithAuth[j]);
                }
            }
            main.beaconPush.setSubscriptions(channels, Push.listener);
        } else {
            Push.reinit(Surface.globalContext.pushConnections, main.ajaxOrbitDebug);
        }
    },ajaxError: function(url, data) {
        base.showReceipt("Error loading page...", "skull");
        main.clearLoader();
    },onPageShow: function() {
        var loginRedirect = $("input[name=main-login-redirect]").val();
        if (loginRedirect) {
            base.redirect(loginRedirect);
            return;
        }
        var pleasewait = $("#main-login-pleasewait");
        if (pleasewait.length > 0) {
            var counter = function() {
                var length = parseInt(pleasewait.attr("data"));
                pleasewait.find("span").html(length);
                length--;
                pleasewait.attr("data", length);
                if (length > 0) {
                    setTimeout(counter, 1000);
                } else {
                    $("#main-login-button").removeAttr("disabled");
                    pleasewait.hide(500);
                }
            };
            counter();
        }
        var statsFetch = $("#main-stats-fetch-url");
        var unlocksArea = $("#main-unlocks-area");
        if (statsFetch.length) {
            var url = statsFetch.val();
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        var statsHtml = $S("main.loggedinstatsbox").render(response.data);
                        var statsHtmlObj = "<div></div>";
                        try {
                            statsHtmlObj = $(statsHtml);
                        } catch (err) {
                        }
                        statsFetch.replaceWith(statsHtmlObj);
                        var unlocksHtml = $S("main.loggedinunlocksbox").render(response.data);
                        var unlocksHtmlObj = "<div></div>";
                        try {
                            unlocksHtmlObj = $(unlocksHtml);
                        } catch (err) {
                        }
                        unlocksArea.replaceWith(unlocksHtmlObj);
                    }
                }, false)});
        }
        $(".main-targetsunlocks").pageDelegate(".main-targetstaken-closeform", "submit", function(e) {
            var form = $(this);
            var url = $("#main-removeTargetURL").val();
            $.ajax({url: url,dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "REMOVED_OK":
                        case "REMOVED_ERROR":
                            form.parents(".main-targetsunlocks-box:first").fadeOut();
                            break;
                    }
                }, false)});
            return false;
        });
        $("#main-loggedin-wb-info-icon-gameupdates").pageBind("click", function() {
            $("#comcenter-icon-game").click();
        });
        $("#main-loggedin-wb-info-icon-inbox").pageBind("click", function() {
            $("#comcenter-icon-inbox").click();
        });
        $("#main-loggedin-wb-info-icon-notifications").pageBind("click", function() {
            $("#comcenter-icon-notifications").click();
            $(this).removeClass("unread");
        });
        $(".main-view-friends-view-link").pageLive("click", function(e) {
            e.preventDefault();
            if ($("#comcenter-area").is(":hidden")) {
                comcenter.toggleComcenterFriendlist();
            }
        });
        $(".main-loggedin-header-puff:not(.puff-disabled)").pageLive("click", function(e) {
            if (this.id == "main-loggedin-header-puff-multiplayer") {
                omniture_click("", "multiplayerBanner_click");
            }
            if (e.target.tagName == "IMG" || e.target.tagName == "A" || e.target.tagName == "BUTTON") {
                return true;
            }
            base.redirect($(this).attr("data-href"));
        });
        if (S.globalContext.session.isLoggedIn) {
            main.updateFriendSurfaces();
        }
    },updateFriendSurfaces: function() {
        if ($("#user-friends-surface").length) {
            var friends = comcenter.getFriendsListFromLs();
            var onlinefriends = [];
            var playingfriends = [];
            var coopfriends = [];
            for (var i in friends) {
                if (friends[i].presence && friends[i].presence.isOnline) {
                    onlinefriends.push(friends[i]);
                }
                if (friends[i].presence && friends[i].presence.isPlaying && friends[i].presence.playingMode == 1) {
                    playingfriends.push(friends[i]);
                }
                if (friends[i].presence && friends[i].presence.isPlaying && friends[i].presence.playingMode == 4) {
                    coopfriends.push(friends[i]);
                }
            }
            $S("user-friends-surface").getState()["friends"] = onlinefriends;
            $S("user-friends-surface").refresh();
            if ($S("surface-main-multiplayer").rendered()) {
                $S("surface-main-multiplayer").getState()["friendsPlaying"] = playingfriends;
                $S("surface-main-multiplayer").refresh();
                $S("surface-main-coop").getState()["coopFriendsPlaying"] = coopfriends;
                $S("surface-main-coop").refresh();
            }
        }
    },init: function(template) {
        Push.bind("LoginLive", main.handleLoginLiveEvent);
    },flickAnimation: function(flick) {
        var element;
        if ($(".main-loggedin-ani").length) {
            element = $(".main-loggedin-ani");
        } else {
            return false;
        }
        element.show();
        $(element).animate({opacity: flick}, 40, function() {
            if (flick == 1) {
                flick = 0;
                $(this).css("opacity", 0);
            } else {
                flick = 1;
            }
            setTimeout("main.flickAnimation(" + flick + ")", 3000);
        });
    },handleLoginLiveEvent: function(e) {
        if ($("#loginfeed-avatars").length == 0) {
            return;
        }
        $("#loginfeed-avatars").prepend(profile.gravatar.render({"user": e.data,"gravatarSize": 30}));
        $("#loginfeed-avatars").css({"left": "-43px"}).animate({"left": "0px"});
        if ($("#loginfeed-avatars .base-avatar-container").length > 24) {
            $("#loginfeed-avatars .base-avatar-container:last").remove();
        }
    }};
var matchlobby = {init: function() {
    },joinServer: function(server) {
        joinflow._joinServer(server);
    }};
var mobile = {init: function() {
    }};
var notification = {onPageShow: function() {
        $("body").pageDelegate(".platoon-request-accept-form", "submit", function(e) {
            var form = $(this);
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "ACCESS_DENIED":
                            S.info("Access denied");
                            $(form).parents(".comcenter-notification:first").remove();
                            notification.decrementUnreadNotification();
                            break;
                        case "WRONG_PLATFORM":
                            S.info("Wrong platform!");
                            base.showReceipt("Your active solder must use  the same platform as the platoon.");
                            break;
                        case "MEMBER_KICKED":
                            $(form).parents(".comcenter-notification:first").remove();
                            notification.decrementUnreadNotification();
                            break;
                        case "MEMBER_ACCEPTED":
                            $(form).parents(".comcenter-notification:first").remove();
                            notification.decrementUnreadNotification();
                            break;
                        case "MEMBER_INVITED":
                            $(form).parents(".comcenter-notification:first").remove();
                            notification.decrementUnreadNotification();
                            break;
                    }
                }, false)});
            return false;
        });
        $("#comcenter").delegate(".gather-notification-form", "submit", function() {
            var form = $(this);
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.status) {
                        case "ok":
                            S.info($(form).parents(".comcenter-notification:first"));
                            $(form).parents(".comcenter-notification:first").remove();
                            notification.decrementUnreadNotification();
                            if ((response.action == "join" || response.action == "view") && response.gatherUrl) {
                                base.redirect(response.gatherUrl);
                            }
                            break;
                    }
                }, false)});
            return false;
        });
    },init: function(template) {
        Push.bind("NotificationMessage", notification.handleNotificationMessage);
        $(".comcenter-notifications-one-click").live("mouseover", function() {
            $(this).find("a[href]").removeAttr("href");
        });
        $(".comcenter-notifications-one-click").live("click", function(e) {
            e.preventDefault();
            var url = $(this).attr("rel");
            base.redirect(url);
            comcenter.closePreviewAreas();
            return false;
        });
    },updateClickEvents: function() {
        return false;
    },incrementUnreadOrInsertNotification: function(item) {
        $("#comcenter-icon-notifications").addClass("unread").show();
        notification.updateClickEvents();
    },decrementUnreadNotification: function() {
        $("#comcenter-taskbar-notifications").removeClass("unread");
    },loadNotifications: function() {
        $("#comcenter-icon-notifications").addClass("open");
        $("#comcenter-notifications").show();
        if (comcenter.generalLoadingAjaxRequest) {
            comcenter.generalLoadingAjaxRequest.abort();
        }
        comcenter.generalLoadingAjaxRequest = $.ajax({url: $("#notifications-urlaction").val(),dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},success: function(response) {
                $("#comcenter-notifications .base-preview-area-loader").hide();
                var notifications = response.data.notifications;
                $("#comcenter-icon-notifications").addClass("open");
                $("#comcenter-notifications").show();
                $("#comcenter-notification-count").html("");
                var state = $S("notifications").getState();
                state.notifications = [];
                state.numUnread = response.data.numUnread;
                state.platoons = response.data.platoons;
                for (var i = 0; i < notifications.length; i++) {
                    var notification = notifications[i];
                    state.notifications.push(notification);
                }
                state.gotEvent = true;
                $S("notifications").setState(state);
                $S("notifications").refresh();
                $("body").bind("click.notificationClick", function(e) {
                    if ($(e.target).parents("#comcenter-notifications").length) {
                        S.info("clicked on notifications");
                        return true;
                    }
                    comcenter.closeNotifications();
                    $("body").unbind("click.notificationClick");
                });
            }});
    },handleNotificationMessage: function(event) {
        var notificationItem = event.data;
        soundFX.play(soundFX.BLEEP, "NOTIFICATION");
        notification.incrementUnreadOrInsertNotification(notificationItem);
    }};
var notificationevent = {init: function() {
        Push.bind("NotificationEventUserCameOnline", notificationevent.handleUserCameOnline);
        Push.bind("NotificationEventUserStartedPlaying", notificationevent.handleUserStartedPlaying);
        Push.bind("NotificationEventVoiceInvite", notificationevent.handleVoiceInvite);
        Push.bind("NotificationEventGameInvite", notificationevent.handleGameInvite);
        Push.bind("NotificationEventGroupInvite", notificationevent.handleGroupInvite);
        Push.bind("NotificationEventCoopInvite", notificationevent.handleCoopInvite);
        Push.bind("NotificationEventChatPartyInvite", notificationevent.handleChatPartyInvite);
        Push.bind("NotificationEventGatherInvite", notificationevent.handleGatherInvite);
    },handleGameInvite: function(gameInvite) {
        S.debug("Got game invite");
        S.debug(gameInvite);
        popup.render("gameinvite", gameInvite);
        if (gameInvite.data && gameInvite.data.server) {
            var pingResult = function(event, serverLatencys) {
                launcher.unregisterForEvent("pingResult", pingResult);
                S.debug("Got ping result");
                S.debug(serverLatencys);
                jQuery.each(serverLatencys, function(serverId, ping) {
                    if (ping > 0) {
                        $("." + serverId).html(ping + " ms");
                    }
                });
            };
            launcher.registerForEvent("pingResult", pingResult);
            var server = gameInvite.data.server;
            var pingServer = {};
            pingServer["ping-" + server.name] = server.ip;
            launcher.pingServers(pingServer);
        }
    },handleGroupInvite: function(gameInvite) {
        S.debug("Got group invite");
        popup.render("groupjoininvite", gameInvite);
        if (gameInvite.data.server) {
            var server = gameInvite.data.server;
            var pingResult = function(event, serverLatencys) {
                launcher.unregisterForEvent("pingResult", pingResult);
                jQuery.each(serverLatencys, function(serverId, ping) {
                    if (ping > 0) {
                        $("." + serverId).html(ping + " ms");
                    }
                });
            };
            launcher.registerForEvent("pingResult", pingResult);
            var pingServer = {};
            pingServer["ping-" + server.name] = server.ip;
            launcher.pingServers(pingServer);
        }
    },handleUserStartedPlaying: function(event) {
        var html = $S("notificationevent.userstartedplaying").render({"user": event.data});
        base.showReceipt(html, "none", 10000);
    },handleUserCameOnline: function(event) {
        var html = $S("notificationevent.usercameonline").render({"user": event.data});
        base.showReceipt(html, "none", 15000);
    },handleVoiceInvite: function(event) {
        popup.render("voiceinvite", event);
    },handleCoopInvite: function(event) {
        S.info("Got COOP invite: ");
        S.info(event);
        popup.render("coopinvite", event);
    },handleChatPartyInvite: function(event) {
        popup.render("chatparty", event);
    },handleGatherInvite: function(gatherInvite) {
    },debug: {userCameOnline: function() {
            var user = {"username": "BestPlayer","userId": 1337};
            notificationevent.handleUserCameOnline(user);
        },userStartedPlaying: function() {
            var user = {"username": "BestPlayer","userId": 1337,presence: {serverGuid: 1337,serverName: "Best Server",playingMode: 1,game: 2,platform: 1}};
            notificationevent.handleUserStartedPlaying(user);
        },voiceInvite: function() {
            var event = {user: {username: "BestPlayer",userId: 1337},createdAt: parseInt((new Date()).getTime() / 1000),invite: {channel: {description: "Best Channel",channelId: "1234"},fromUserId: 1337}};
            notificationevent.handleVoiceInvite(event);
        },gameInvite: function() {
            var gameInvite = {fromUserId: 1337,createdAt: parseInt((new Date()).getTime() / 1000),fromUser: {username: "BestPlayer",userId: 1337},server: {name: "Best Server",maxPlayers: 32,ip: "127.0.0.1",port: 1337,map: "MP_Metro",ranked: true,mapMode: 1,game: 2,guid: "abcd"}};
            notificationevent.handleGameInvite(gameInvite);
        },coopInvite: function() {
            var event = {createdAt: parseInt((new Date()).getTime() / 1000),coopGame: {level: "MP_006",owner: {username: "BestPlayer",userId: 1337}}};
            notificationevent.handleCoopInvite(event);
        }}};
var platoon = {init: function(template) {
        Push.bind("platoonFansChanged", function(event) {
            var platoonInfoSidebarFansList = $S("platoon-info-sidebar-fans-list");
            if (platoonInfoSidebarFansList.rendered()) {
                $S("platoon-info-head-fans-count").getState()["platoon"].fanCounter = event.data.fansCount;
                $S("platoon-info-head-fans-count").refresh();
                $S("platoon-info-menu-row-fans").getState()["platoon"].fanCounter = event.data.fansCount;
                $S("platoon-info-menu-row-fans").refresh();
                var fans = platoonInfoSidebarFansList.getState()["fans"];
                if (event.data.addFan) {
                    fans[event.data.addFan.userId] = event.data.addFan;
                }
                if (event.data.removeFan) {
                    delete fans[event.data.removeFan];
                }
                var platoonListfans = $S("platoon-listfans");
                if (platoonListfans.rendered()) {
                    platoonListfans.getState()["fans"] = fans;
                    platoonListfans.refresh();
                }
                platoonInfoSidebarFansList.getState()["platoon"].fanCounter = event.data.fansCount;
                platoonInfoSidebarFansList.refresh();
            }
        });
        Push.bind("platoonMembershipAdded", function(event) {
            var platoonOverview = $S("platoon-overview");
            if (platoonOverview.rendered()) {
                var members = platoonOverview.getState()["platoon"]["members"];
                members[event.data.membership.userId] = event.data.membership;
                platoonOverview.refresh();
            }
        });
        Push.bind("platoonMembershipRemoved", function(event) {
            var platoonOverview = $S("platoon-overview");
            if (platoonOverview.rendered()) {
                var members = platoonOverview.getState()["platoon"]["members"];
                delete members[event.data.memberId];
                platoonOverview.refresh();
            }
        });
        Push.bind("platoonMembershipLevelChanged", function(event) {
            var platoonOverview = $S("platoon-overview");
            if (platoonOverview.rendered()) {
                var member = platoonOverview.getState()["platoon"]["members"][event.data.receiverId];
                member.membershipLevel = event.data.membershipLevel;
                platoonOverview.refresh();
            }
        });
    },inviteToPlatoon: function(userId) {
        S.info("Inviting " + userId + " to platoon");
        var platoonId = $("#platoon-currentId").val();
        $.ajax({url: $("#invitePlatoon-urlaction").val(),dataType: "json",type: "POST",data: {"platoonId": platoonId,"userId": userId,"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                switch (response.message) {
                    case "MEMBER_ACCEPTED":
                        base.showReceipt("Platoon member accepted");
                        break;
                    case "success":
                        base.showReceipt("Member invited to the platoon");
                        $S("platoon-member-invites-invited-members").insert(response.member);
                        break;
                    case "ALREADY_MEMBER":
                        base.showReceipt("User is already a member", "skull");
                        break;
                    case "ALREADY_INVITED":
                        base.showReceipt("User is already a invited", "skull");
                        break;
                    case "ACCESS_DENIED":
                        base.showReceipt("You do not have the rank to invite members", "skull");
                        break;
                    case "PLATOON_NOT_FOUND":
                        base.showReceipt("Could not find the platoon", "skull");
                        break;
                    case "UNKNOWN_ERROR":
                        base.showReceipt("Unable to invite user", "skull");
                        break;
                    case "NO_PERSONA":
                        base.showReceipt("User is not eligible jo join this platoon.", "skull");
                        break;
                }
            }, false)});
    },onPageShow: function() {
        (function() {
            var $this = $("#platoon-cancelapply");
            preText = $this.html();
            if ($("#refreshPlatoons").length) {
                $this.find(".base-dropdown-area").remove();
            }
            $this.pageBind("mouseenter mouseleave", function(e) {
                if (e.type == "mouseenter") {
                    $this.html("Cancel");
                } else {
                    $this.html(preText);
                }
            });
        })();
        $("#platoon-create-form").pageBind("submit", function(e) {
            e.preventDefault();
            var $this = $(this);
            $.ajax({url: $this.attr("action"),type: "POST",data: $this.serialize(),complete: base.onComplete(function(success, response) {
                    if (response.message == "PLATOON_CREATED") {
                        base.redirect(response.data.redirectTo);
                    } else {
                        base.showReceipt(response.message, response.type === "error" ? receiptTypes.ERROR : receiptTypes.OK);
                    }
                }, false)});
        });
        $("#platoon-makeprimary").click(function(e) {
            e.preventDefault();
            $.ajax({url: $("#platoon-makeprimary").attr("href"),type: "GET",complete: base.onComplete(function(success, response) {
                    if (response.message == "OK") {
                        S.globalContext.userContext.activePlatoon = response.data;
                        $S("base-dropdown-menu-your-platoons").refresh();
                        $("#platoon-makeprimary").parent().hide();
                        base.showReceipt("Primary platoon set");
                    } else {
                        base.showReceipt(response.message);
                    }
                }, false)});
        });
        $("#platoon-invite-form").submit(function(e) {
            e.preventDefault();
            $.ajax({url: $("#platoon-invite-form").attr("action"),dataType: "json",type: "POST",data: $("#platoon-invite-form").serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "success":
                            if (response["success"].length) {
                                base.showReceipt(response["success"].length + " requests sent successfully.", "checkbox");
                            }
                            for (var lst in response["errors"]) {
                                var err = response["errors"][lst];
                                switch (err.error) {
                                    case "MEMBER_ACCEPTED":
                                        base.showReceipt("Platoon member accepted");
                                        break;
                                    case "ACCESS_INVITED":
                                        base.showReceipt("User is already applying or has been invited to this platoon", "skull");
                                        break;
                                    case "PLATOON_MAX_CLUBS_REACHED":
                                        base.showReceipt(err.username + " not invited, the user already reached the maximum number of platoons.");
                                        break;
                                    case "ALREADY_MEMBER":
                                        base.showReceipt("User is already a member", "skull");
                                        break;
                                    case "ALREADY_INVITED":
                                        base.showReceipt("Member invited to the platoon", "skull");
                                        break;
                                    case "ACCESS_DENIED":
                                        base.showReceipt("You do not have the rank to invite members", "skull");
                                        break;
                                    case "PLATOON_NOT_FOUND":
                                        base.showReceipt("Could not find the platoon", "skull");
                                        break;
                                    case "UNKNOWN_ERROR":
                                        base.showReceipt("Unable to invite user", "skull");
                                        break;
                                    case "WRONG_PLATFORM":
                                        base.showReceipt("Unable to invite user, wrong platform.", "skull");
                                        break;
                                    case "NO_PERSONA":
                                        base.showReceipt("User is not eligible jo join this platoon.", "skull");
                                        break;
                                    case "NEW_MEMBERS_NOT_ALLOWED":
                                        base.showReceipt("User not invited, new members disabled by founder.");
                                        break;
                                }
                            }
                    }
                }, false)});
        }).find("input[type=checkbox]").change(function(e) {
            var wrap = $(this).closest(".platoon-member-invites");
            if (wrap.find("input[type=checkbox]):checked").length) {
                wrap.find(".button-invite-submit").removeAttr("disabled");
            } else {
                wrap.find(".button-invite-submit").attr("disabled", "disabled");
            }
        });
        if ($("#platoon-editbadge-page").length > 0) {
            platoon.editBadge(S.globalContext.platoonBadgeData);
        }
        $(".platoon-become-fan").pageLive("click", function(e) {
            var url = $(this).attr("url");
            var platoonId = $(this).attr("platoonId");
            $.ajax({url: url,dataType: "json",type: "POST",data: {"platoonId": platoonId,"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                    if (success) {
                        base.showReceipt("You are now a fan of this platoon");
                        $(".platoon-become-fan").hide();
                        $(".platoon-leave-fan").show();
                    } else {
                        base.showReceipt("Could not become a fan of this platoon", "skull");
                    }
                }, false)});
        });
        $(".platoon-leave-fan").pageLive("click", function(e) {
            var url = $(this).attr("url");
            var platoonId = $(this).attr("platoonId");
            $.ajax({url: url,dataType: "json",type: "POST",data: {"platoonId": platoonId,"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                    if (success) {
                        base.showReceipt("You are no longer a fan of this platoon");
                        $(".platoon-leave-fan").hide();
                        $(".platoon-become-fan").show();
                    }
                }, false)});
        });
        $(".platoon-leave-link").pageLive("click", function(e) {
            e.preventDefault();
            popup.prompt({"header": "Are you sure you want to leave this platoon?"}, function() {
                var url = $(this).attr("url");
                var platoonId = $(this).attr("platoonId");
                var userId = $(this).attr("userId");
                $.ajax({url: url,dataType: "json",type: "POST",data: {"platoonId": platoonId,"userId": userId,"post-check-sum": S.globalContext.session.postChecksum},beforeSend: function(xmlHttpRequest, settings) {
                        xmlHttpRequest.setRequestHeader("X-AjaxNavigation", "1");
                        return true;
                    },complete: base.onComplete(function(success, json) {
                        if (!success) {
                            S.log("Not ok.", json);
                        } else {
                            if ($S("base-dropdown-menu-your-platoons").rendered()) {
                                var state = $S("base-dropdown-menu-your-platoons").getState();
                                var platoons = state["platoons"];
                                for (var i = 0; i < platoons.length; i++) {
                                    if (platoons[i].id == platoonId) {
                                        platoons.splice(i, 1);
                                        $S("base-dropdown-menu-your-platoons").setState(state);
                                        break;
                                    }
                                }
                            }
                            if (json.location) {
                                base.redirect(json.location);
                            } else {
                                if (json.template && json.context && json.globalContext) {
                                    Surface.globalContext = json.globalContext;
                                    Surface.globalContext.staticContext = base.staticContext;
                                    Surface.globalContext.userContext = base.userContext;
                                    Surface.Renderer.state.usedComponents = [];
                                    var html = $S(json.template).render(json.context);
                                    Surface.ajaxNavigation.afterCallback(document.location.href, html);
                                    Surface.Renderer.invokeUsedComponents(Surface.Renderer.state.usedComponents);
                                }
                            }
                        }
                    }, false)});
            }, this);
        });
        $(".platoon-apply").pageLive("click", function(e) {
            if ($(this).hasClass("disabled")) {
                return false;
            }
            var url = $(this).attr("url");
            var platoonId = $(this).attr("platoonId");
            $.ajax({url: url,dataType: "json",type: "POST",data: {"platoonId": platoonId,"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                    if (success) {
                        switch (response) {
                            case "success":
                                base.showReceipt("Application to join platoon sent");
                                $(".platoon-apply").hide();
                                break;
                            case "maxmembersreached":
                                base.showReceipt("Maximum members reached in this platoon", "skull");
                                $(".platoon-apply").hide();
                                break;
                            case "newmembersdisabled":
                                base.showReceipt("New members disabled by founder.", "skull");
                                $(".platoon-apply").hide();
                                break;
                            case "noplatoon":
                                base.showReceipt("Could not find the platoon", "skull");
                                $(".platoon-apply").hide();
                                break;
                            case "wrongplatform":
                                base.showReceipt("You cannot apply to this platoon with your currently selected soldier", "skull");
                                $(".platoon-apply").hide();
                                break;
                            case "maxclubs":
                                base.showReceipt("You have reached the maximum amount platoon memberships", "skull");
                                $(".platoon-apply").hide();
                                break;
                            case "fail":
                                base.showReceipt("Already applied to this platoon", "skull");
                                $(".platoon-apply").hide();
                                break;
                        }
                    }
                }, false)});
        });
        $(".platoon-member-memberslist-user-actions-kick").pageLive("click", function(e) {
            e.preventDefault();
            popup.prompt({"header": "Are you sure you want to kick this member?"}, function() {
                var anchor = $(this);
                $.ajax({url: anchor.attr("href"),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                        if (success && response.message == "MEMBER_KICKED") {
                            base.showReceipt("Member kicked");
                            anchor.parents(".platoon-member-memberslist-user:first").remove();
                        } else {
                            if (response.message == "MEMBER_LAST") {
                                base.showReceipt("You cannot kick the last member", "skull");
                            } else {
                                if (response.message == "LAST_GM") {
                                    base.showReceipt("You cannot kick the last admin", "skull");
                                } else {
                                    if (response.message == "NOT_MEMBER") {
                                        base.showReceipt("User not a member", "skull");
                                    }
                                }
                            }
                        }
                    }, false)});
            }, this);
            return false;
        });
        $("#platoon-meberlist-lists").pageDelegate(".platoon-member-memberslist-user-actions-demote, .platoon-member-memberslist-user-actions-promote", "click", function(e) {
            e.preventDefault();
            var $this = $(this);
            $.ajax({url: $this.attr("href"),complete: base.onComplete(function(success, response) {
                    if (success) {
                        $this.parent().parent().remove();
                        $(".tipsy").hide();
                        if (response.message == "FAILED_DEMOTE") {
                            base.showReceipt("Unable to demote member at this time", "skull");
                            return true;
                        } else {
                            if (response.message == "UNABLE_DEMOTE_YOURSELF") {
                                base.showReceipt("Unable to demote member at this time", "skull");
                                return true;
                            } else {
                                if (response.message == "FAILED_PROMOTE") {
                                    base.showReceipt("Unable to promote member", "skull");
                                    return true;
                                }
                            }
                        }
                        var member = response.data.member, membershipLevels = response.data.membershipLevels, listMembers = $("#platoon-memberlist-members"), listMembersWrapper = listMembers.parent().parent().parent().parent(), listAdmins = $("#platoon-memberlist-admins"), listAdminsWrapper = listAdmins.parent().parent().parent().parent(), listCreators = $("#platoon-memberlist-creators"), listCreatorsWrapper = listCreators.parent().parent().parent().parent();
                        if (member.membershipLevel == membershipLevels.MEMBER) {
                            listMembers.append($S("platoon.listmembersUser").render({"member": member,"membershipLevels": membershipLevels}));
                            if (listMembersWrapper.css("display") == "none") {
                                listMembersWrapper.stop(true, true).slideDown();
                            }
                        } else {
                            if (member.membershipLevel == membershipLevels.ADMIN) {
                                listAdmins.append($S("platoon.listmembersUser").render({"member": member,"membershipLevels": membershipLevels}));
                                if (listAdminsWrapper.css("display") == "none") {
                                    listAdminsWrapper.stop(true, true).slideDown();
                                }
                            } else {
                                if (member.membershipLevel == membershipLevels.CREATOR) {
                                    listCreators.append($S("platoon.listmembersUser").render({"member": member,"membershipLevels": membershipLevels}));
                                    if (listCreatorsWrapper.css("display") == "none") {
                                        listCreatorsWrapper.stop(true, true).slideDown();
                                    }
                                }
                            }
                        }
                        if (listMembers.find(".platoon-member-memberslist-user").length == 0) {
                            listMembersWrapper.stop(true, true).slideUp();
                        }
                        if (listAdmins.find(".platoon-member-memberslist-user").length == 0) {
                            listAdminsWrapper.stop(true, true).slideUp();
                        }
                        if (listCreators.find(".platoon-member-memberslist-user").length == 0) {
                            listCreatorsWrapper.stop(true, true).slideUp();
                        }
                    } else {
                        base.showReceipt("Unable to perform operation at this time, please try again later.", "skull");
                    }
                }, false)});
            return false;
        });
        $("#platoon-landing-search").pageBind("submit", function() {
            $("#platoon-landing-search-results").html("Loading results...");
            var form = $(this);
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    if (success) {
                        $("#platoon-landing-search-results").html("");
                        var responseLength = response.length;
                        if (responseLength > 0) {
                            for (var i = 0; i < responseLength; i++) {
                                $("#platoon-landing-search-results").prepend($S("platoon.platooncard").render({platoon: response[i]}));
                            }
                        } else {
                            $("#platoon-landing-search-results").html("No platoons found.");
                        }
                    } else {
                        $("#platoon-landing-search-results").html("No platoons found.");
                    }
                }, false)});
            return false;
        });
        (function() {
            var waitingMemberCheckboxes = $(".platoon-member-invites-waiting-member-check");
            var waitingMemberCheckboxesAll = $("#platoon-member-invites-waiting-actions-select-all");
            waitingMemberCheckboxesAll.pageLive("click", function() {
                if ($(this).is(":checked")) {
                    waitingMemberCheckboxes.attr("checked", "checked");
                } else {
                    waitingMemberCheckboxes.removeAttr("checked");
                }
            });
            waitingMemberCheckboxes.pageLive("click", function() {
                if ($(".platoon-member-invites-waiting-member-check:checked").length == waitingMemberCheckboxes.length) {
                    waitingMemberCheckboxesAll.attr("checked", "checked");
                } else {
                    waitingMemberCheckboxesAll.removeAttr("checked");
                }
            });
        })();
        (function() {
            var $action = $("#platoon-member-invites-waiting-action"), $form = $("#platoon-member-invites-waiting-form");
        })();
        statsFetch = $("#platoonmember-stats-fetch-url");
        if (statsFetch.length) {
            url = statsFetch.val();
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        var areas = ["general", "topplayers", "kitandvehicles"];
                        $.each(areas, function(index, name) {
                            var html = $S("platoon.stats" + name).render(response.data);
                            var htmlObj = "<div></div>";
                            try {
                                htmlObj = $(html);
                            } catch (err) {
                            }
                            $("#platoon-" + name + "-stats-replace").replaceWith(htmlObj);
                        });
                    }
                }, false)});
        }
    },editBadge: function(badgeData) {
        $.getScript("/public/base/js/fabric.js", function() {
            var $canvas = $("#platoon-editbadge-editframe-badge"), $canvasWidth = $canvas.attr("width"), $canvasHeight = $canvas.attr("height"), $overlayLoader = $("#platoon-editbadge-overlay-loader"), $objectsCountCurrent = $("#platoon-editbadge-count-objects-current"), $objectsCountMax = $("#platoon-editbadge-count-objects-max"), $layersList = $("#platoon-editbadge-list-layers"), $layersListObjects = $layersList.find("li"), $layersListBackground = $("#platoon-editbadge-layer-row-background"), $badgeBackgroundColorReference = $("#platoon-editbadge-badge-background-color"), objectsMax = 20, defaultObjectColor = "#353535", $availableObjectsList = $("#platoon-editbadge-list-items"), badgeIsSaving = false, lastBadgeSaveData = badgeData, $colorpickerInput = $("#platoon-editbadge-colorpicker"), $colorpickerInputWrapper = $("#platoon-editbadge-colorpicker-wrapper"), $editorHelpSentence = $("#platoon-editbadge-addlayer-info"), $editorActionButtons = $(".platoon-editbadge-action-button");
            try {
                var colorpickerElement = document.getElementById("platoon-editbadge-colorpicker");
                var colorpicker = new jscolor.color(colorpickerElement, {"pickerPosition": "top"});
                $colorpickerInputWrapper.show();
                $colorpickerInput.focus(function() {
                    $colorpickerInput.select();
                });
                $("#platoon-editbadge-colorpicker-edit-icon").pageBind("click", function() {
                    $colorpickerInput.focus();
                });
            } catch (e) {
                S.log("Could not init colorpicker");
            }
            $objectsCountMax.html(objectsMax);
            if ($.browser.msie && (parseInt($.browser.version, 10) < 9 || document.documentMode < 9)) {
                var userAgent = navigator.userAgent.toLowerCase();
                $canvas.hide();
                $("#platoon-editbadge-fallback-badge").show();
                $("#platoon-editbadge-editframe-badge-save").hide();
                $("#platoon-editbadge-fallback-overlay-msg").show();
                $colorpickerInputWrapper.hide();
                $editorHelpSentence.hide();
                if (userAgent.indexOf("windows nt 6.") !== -1 || userAgent.indexOf("windows nt 7.") !== -1) {
                    $("#platoon-editbadge-fallback-msg-v").show();
                } else {
                    $("#platoon-editbadge-fallback-msg-xp").show();
                }
                $overlayLoader.fadeOut(300);
                return;
            }
            var badge = new fabric.Canvas("platoon-editbadge-editframe-badge", {backgroundColor: "#F4F4F4",CANVAS_WIDTH: 320,CANVAS_HEIGHT: 320});
            badge.setOverlayImage("/public/platoon/emblem-texture.png", function() {
                badge.renderAll();
            });
            var actionObjectsCount = function() {
                $objectsCountMax.html(objectsMax);
                $objectsCountCurrent.html(badge._objects.length);
                if (badge._objects.length >= objectsMax && !$availableObjectsList.hasClass("disabled")) {
                    $availableObjectsList.addClass("disabled");
                    $availableObjectsList.each(function() {
                        $(this).battleBubble("Max (" + objectsMax + ") objects reached");
                    });
                } else {
                    if ($availableObjectsList.hasClass("disabled")) {
                        $availableObjectsList.removeClass("disabled");
                    }
                }
            };
            var listObjects = function() {
                $("#platoon-editbadge-list-layers li").remove();
                $layersListBackground.removeClass("active");
                for (var index in badge._objects) {
                    var object = badge._objects[index];
                    var extraClass = "";
                    if (object === badge.getActiveObject()) {
                        extraClass += " active";
                    }
                    if (!object.selectable) {
                        extraClass += " locked";
                    }
                    try {
                        var layer = {"title": S.globalContext.badgeParts[object.partId].title,"img": S.globalContext.badgeParts[object.partId].src + ".png","object": object,"id": index};
                    } catch (e) {
                        S.log(e);
                        var layer = {"title": "N/A","img": "/public/platoon/platoon-noicon.png","object": object,"id": index};
                    }
                    var layerRow = $($S("platoon.editbadgeLayersListItem").render({"layer": layer,"extraClass": extraClass}));
                    layerRow.prependTo("#platoon-editbadge-list-layers");
                }
                $("#platoon-editbadge-list-layers").sortable("refresh");
            };
            var setObjectColor = function(color, object) {
                object = arguments.length > 1 ? object : badge.getActiveObject();
                color = "#" + S.Modifier.replace(color, "#", "");
                if (object) {
                    object.set("fill", color);
                    var activeIndex = badge._objects.indexOf(object);
                    $("#platoon-editbadge-list-layers li[data-objectid=" + activeIndex + "] .platoon-editbadge-layer-object-color").css("background-color", color);
                }
                badge.renderAll();
            };
            var addObject = function(e, posX, posY) {
                if (badge._objects.length >= objectsMax) {
                    return false;
                }
                $editorHelpSentence.hide();
                var $part = $(e), $partId = $part.data("partid"), $partSrc = S.globalContext.badgeParts[$partId].src + ".svg";
                posX = posX || parseInt($canvasWidth / 2, 10);
                posY = posY || parseInt($canvasHeight / 2, 10);
                fabric.loadSVGFromURL($partSrc, function(objects, options) {
                    var loadedObject;
                    if (objects.length > 1) {
                        loadedObject = new fabric.PathGroup(objects, options);
                    } else {
                        loadedObject = objects[0];
                    }
                    loadedObject.scaleToWidth(81).scaleToHeight(81).setCoords();
                    loadedObject.set("left", posX).set("top", posY).setCoords();
                    loadedObject.partId = $partId;
                    badge.add(loadedObject);
                    var color = S.Modifier.replace($colorpickerInput.val(), "#", "").toLowerCase();
                    var backgroundColor = S.Modifier.replace(badge.backgroundColor, "#", "").toLowerCase();
                    if (color == backgroundColor) {
                        color = defaultObjectColor;
                    }
                    setObjectColor(color, loadedObject);
                    badge.setActiveObject(loadedObject);
                    listObjects();
                    actionObjectsCount();
                });
            };
            if (badgeData != "") {
                $editorHelpSentence.hide();
                var badgeDataJson = S.parseJSON(badgeData);
                var workingObjects = [];
                S.log(badgeDataJson.objects, badgeDataJson.objects.length);
                for (var i = 0; i < badgeDataJson.objects.length; i++) {
                    var object = badgeDataJson.objects[i];
                    for (var t in S.globalContext.badgePartsAvailable.types) {
                        var type = S.globalContext.badgePartsAvailable.types[t];
                        if (type == object.partId) {
                            workingObjects.push(object);
                        }
                    }
                }
                badgeDataJson.objects = workingObjects;
                S.log(badgeDataJson.objects);
                if (badgeDataJson.objects.length > 0) {
                    try {
                        badge.loadFromJSON(S.encodeJSON(badgeDataJson), function() {
                            for (var object in badgeDataJson.objects) {
                                badge._objects[object].partId = badgeDataJson.objects[object].partId;
                            }
                            listObjects();
                            actionObjectsCount();
                            $overlayLoader.hide();
                            $editorHelpSentence.css("color", $colorpickerInput.css("color"));
                        });
                    } catch (e) {
                        S.log("An error occurred while loading emblem shapes. Please report this if problem occurs again after you've saved a new emblem.");
                        S.log(e);
                        badge.clear();
                        $overlayLoader.hide();
                    }
                } else {
                    $overlayLoader.hide();
                }
            }
            $badgeBackgroundColorReference.css("background-color", badge.backgroundColor);
            badge.observe("object:selected", function(e) {
                var activeIndex = badge._objects.indexOf(e.memo.target);
                $layersListBackground.removeClass("active");
                $editorActionButtons.removeClass("disabled");
                $("#platoon-editbadge-list-layers li").removeClass("active");
                $("#platoon-editbadge-list-layers li[data-objectid=" + activeIndex + "]").addClass("active");
                try {
                    colorpicker.fromString(S.Modifier.replace(e.memo.target.fill, "#", ""));
                } catch (e) {
                    S.log("Could not set colorpicker color");
                }
            });
            badge.observe("before:selection:cleared", function(e) {
                var activeIndex = badge._objects.indexOf(e.memo.target);
                $("#platoon-editbadge-list-layers li[data-objectid=" + activeIndex + "]").removeClass("active");
                $editorActionButtons.addClass("disabled");
            });
            badge.observe("after:render", function() {
                if (!badgeIsSaving) {
                    $("#platoon-editbadge-editframe-badge-save button").removeAttr("disabled");
                }
            });
            $("html").pageBind("mousedown", function(e) {
                var $target = $(e.target);
                if ($target.hasClass("keep-active-badgepart") || $target.parents().hasClass("keep-active-badgepart")) {
                    return;
                }
                $layersListBackground.removeClass("active");
                badge.deactivateAllWithDispatch();
                badge.renderAll();
            });
            $colorpickerInput.pageLive("change keyup", function() {
                if ($layersListBackground.hasClass("active")) {
                    var color = "#" + S.Modifier.replace($colorpickerInput.val(), "#", "");
                    badge.backgroundColor = color;
                    badge.renderAll();
                    $badgeBackgroundColorReference.css("background-color", color);
                    $editorHelpSentence.css("color", $colorpickerInput.css("color"));
                } else {
                    setObjectColor($colorpickerInput.val());
                }
            });
            $availableObjectsList.pageDelegate("img", "click", function() {
                addObject(this);
            });
            $layersListObjects.pageLive("click", function(e) {
                var $this = $(this);
                if ($(e.target).parent().hasClass("platoon-editbadge-layer-actions")) {
                    return;
                }
                var newActiveLayer = badge.item(parseInt($this.attr("data-objectid")));
                $("#platoon-editbadge-list-layers li").removeClass("active");
                $layersListBackground.removeClass("active");
                $this.addClass("active");
                $editorActionButtons.removeClass("disabled");
                badge.setActiveObject(newActiveLayer);
            });
            $layersListBackground.pageLive("click", function() {
                $layersListObjects.removeClass("active");
                $layersListBackground.addClass("active");
                $editorActionButtons.addClass("disabled");
                try {
                    colorpicker.fromString(S.Modifier.replace(badge.backgroundColor, "#", ""));
                } catch (e) {
                    S.log("Could not set colorpicker color");
                }
            });
            $("#platoon-editbadge-list-layers").sortable({items: "li",placeholder: "ui-state-highlight",axis: "y",distance: 8,update: function(e, ui) {
                    var id = ui.item.attr("data-objectid"), newId = (badge._objects.length - 1) - ui.item.index(), object = badge.item(id);
                    fabric.util.removeFromArray(badge._objects, object);
                    badge._objects.splice(newId, 0, object);
                    badge.renderAll();
                    listObjects();
                }});
            $availableObjectsList.find(".platoon-editbadge-list-items-item img").draggable({revert: "invalid",helper: "clone",opacity: 0.8,zIndex: 2700,distance: 10,appendTo: $("#platoon-badge-draggables"),start: function() {
                    $layersListBackground.removeClass("active");
                    badge.deactivateAllWithDispatch();
                    badge.renderAll();
                }});
            $("#platoon-editbadge-editframe-badge").droppable({accept: "#platoon-editbadge-list-items .platoon-editbadge-list-items-item img",drop: function(event, ui) {
                    var pos = $("#platoon-editbadge-editframe-badge").offset(), dropPosLeft = ui.offset.left - pos.left + 41, dropPosTop = ui.offset.top - pos.top + 41;
                    addObject(ui.draggable, dropPosLeft, dropPosTop);
                }});
            $("#platoon-editbadge-list-layers").pageDelegate(".platoon-editbadge-layer-action", "click", function(e) {
                e.preventDefault();
                var $this = $(this), actionDelete = $this.hasClass("platoon-editbadge-layer-action-delete"), actionLock = $this.hasClass("platoon-editbadge-layer-action-lock"), actionDuplicate = $this.hasClass("platoon-editbadge-layer-action-duplicate"), objectsListRow = $this.closest("li"), objectId = parseInt(objectsListRow.attr("data-objectid")), object = badge.item(objectId);
                if (actionDelete) {
                    badge.remove(object);
                    actionObjectsCount();
                    listObjects();
                    if (badge._objects.length === 0) {
                        $editorHelpSentence.show();
                    }
                }
                if (actionLock) {
                    if (!objectsListRow.hasClass("locked")) {
                        object.selectable = false;
                        objectsListRow.addClass("locked");
                    } else {
                        object.selectable = true;
                        objectsListRow.removeClass("locked");
                    }
                }
                if (actionDuplicate) {
                    var clone = object.clone();
                    clone.partId = object.partId;
                    clone.set("left", parseInt($canvasWidth / 2, 10)).set("top", parseInt($canvasHeight / 2, 10)).setCoords();
                    badge.add(clone);
                    badge.setActiveObject(clone);
                    listObjects();
                    actionObjectsCount();
                }
                $(".tipsy").remove();
            });
            $("#platoon-editbadge-actions .platoon-editbadge-action-button").pageBind("click", function(e) {
                e.preventDefault();
                var $this = $(this), actionFlipX = $this.hasClass("platoon-editbadge-action-flipx"), actionFlipY = $this.hasClass("platoon-editbadge-action-flipy"), actionRotate = $this.hasClass("platoon-editbadge-action-rotate"), object = badge.getActiveObject();
                if (!object) {
                    return;
                }
                if (actionFlipX) {
                    object.flipX = !object.flipX;
                }
                if (actionFlipY) {
                    object.flipY = !object.flipY;
                }
                if (actionRotate) {
                    if (object.angle >= 270 || object.angle < 0) {
                        object.setAngle(0);
                    } else {
                        if (object.angle >= 180) {
                            object.setAngle(270);
                        } else {
                            if (object.angle >= 90) {
                                object.setAngle(180);
                            } else {
                                if (object.angle >= 0) {
                                    object.setAngle(90);
                                }
                            }
                        }
                    }
                }
                badge.renderAll();
            });
            $("#platoon-editbadge-editframe-badge-save").pageBind("submit", function(e) {
                e.preventDefault();
                $layersListBackground.removeClass("active");
                badge.deactivateAllWithDispatch();
                badge.renderAll();
                var $this = $(this), $statusBox = $this.find("#platoon-editbadge-save-status"), $button = $this.find("button"), badgeUrl, badgeSmallBase64, badgeBase64;
                badgeIsSaving = true;
                $button.attr("disabled", "disabled");
                $button.html('<img src="/public/base/shared/loading16x16.gif" />');
                try {
                    badgeUrl = badge.toDataURL("jpeg").replace(/^data:image\/jpeg;base64,/, "");
                    badgeUrl60x = badge.toDataURLWithMultiplier("jpeg", 60 / 320).replace(/^data:image\/jpeg;base64,/, "");
                    badgeUrl36x = badge.toDataURLWithMultiplier("jpeg", 36 / 320).replace(/^data:image\/jpeg;base64,/, "");
                    badgeUrl26x = badge.toDataURLWithMultiplier("jpeg", 26 / 320).replace(/^data:image\/jpeg;base64,/, "");
                    badgeSmallBase64 = badge.toDataURLWithMultiplier("jpeg", 100 / 320);
                } catch (e) {
                    S.warn(e);
                    badgeUrl = false;
                    badgeUrl60x = false;
                    badgeUrl36x = false;
                    badgeUrl26x = false;
                    badgeSmallBase64 = false;
                }
                var badgeData = badge.toJSON();
                for (var object in badgeData.objects) {
                    badgeData.objects[object].partId = badge._objects[object].partId;
                }
                var postData = {badge: badgeUrl !== false ? encodeURIComponent(badgeUrl) : "",badge60x: badgeUrl !== false ? encodeURIComponent(badgeUrl60x) : "",badge36x: badgeUrl !== false ? encodeURIComponent(badgeUrl36x) : "",badge26x: badgeUrl !== false ? encodeURIComponent(badgeUrl26x) : "",badgeSmall: badgeSmallBase64 !== false ? encodeURIComponent(badgeSmallBase64) : "",badgeData: badge._objects.length > 0 ? S.encodeJSON(badgeData) : ""};
                if (postData.badgeData === lastBadgeSaveData) {
                    base.showReceipt("This emblem is already saved", "checkbox");
                    badgeIsSaving = false;
                    $button.html("Save emblem");
                    return;
                }
                postData["post-check-sum"] = S.globalContext.session.postChecksum;
                postData["tofeed"] = $("#platoon-editbadge-save-tofeed").is(":checked") ? "post" : false;
                $.ajax({url: $this.attr("action"),type: "POST",data: postData,complete: base.onComplete(function(status, response) {
                        if ((response.type || false) == "success" && status) {
                            if (response.message == "OK") {
                                if (badgeUrl !== false) {
                                    base.showReceipt("Successfully saved emblem", "checkbox");
                                    $statusBox.stop(true, true).fadeIn(80);
                                    setTimeout(function() {
                                        $statusBox.stop(true, true).fadeOut(800);
                                    }, 20000);
                                    $("img.platoon-badge-item").each(function() {
                                        var $this = $(this);
                                        var timestamp = new Date().getTime();
                                        $this.attr("src", $this.attr("src").split("?")[0] + "?badgev=" + timestamp);
                                    });
                                } else {
                                    base.showReceipt("Could not generate emblem image", "skull", 15100);
                                    base.showReceipt("All changes were saved however", "checkbox", 15200);
                                    base.showReceipt("Update your web browser and try again", "checkbox", 15300);
                                }
                            } else {
                                if (response.message == "TOO_MANY_CONCURRENT_CONNECTIONS") {
                                    base.showReceipt("Could not save emblem. Too many concurrent connections to Akamai. Please try again", "skull");
                                } else {
                                    base.showReceipt(response.message, "skull");
                                }
                            }
                        } else {
                            base.showReceipt("Could not save emblem, please try again", "skull");
                        }
                        $button.html("Save emblem");
                        lastBadgeSaveData = postData.badgeData;
                        badgeIsSaving = false;
                    }, false)});
            });
            if (badgeData == "") {
                $overlayLoader.hide();
            }
        });
        $("#platoon-editbadge-editframe-badge").disableSelection();
    },toggleSelectAllForInvite: function() {
        var obs = $.find("#platoon-invite-form input:checkbox");
        if (obs[0].checked) {
            $(obs).attr("checked", false);
        } else {
            $(obs).attr("checked", true);
        }
        $("#selectall").attr("checked", false);
        $(obs[0]).trigger("change");
    },loadPlatoons: function(page, friends, clear) {
        $(".platoon-container-buttons li").removeClass("selected");
        $($(".platoon-container-buttons li").get(friends)).addClass("selected");
        if (clear) {
            $S("platoonList").render({"loading": 1});
            $S("platoonList").refresh({});
            common.startSpinners();
        }
        $.ajax({url: $("#loadMorePlatoons-urlaction").val().replace(/#PAGE#/, page).replace(/#FRIENDS#/, parseInt(friends) ? "friends" : ""),dataType: "json",type: "POST",data: {"post-check-sum": S.globalContext.session.postChecksum},complete: base.onComplete(function(success, response) {
                for (var idx in response.data["platoonList"]) {
                    var p = response.data["platoonList"][idx];
                    S.debug(p);
                    $S("platoonList").insert(p, {"location": Surface.Location.bottom});
                }
                var state = $S("platoonList").getState();
                state["friends"] = response.data["friends"];
                state["page"] = response.data["page"];
                state["perPage"] = response.data["perPage"];
                state["platoonCount"] = response.data["platoonCount"];
                delete state["loading"];
                $S("platoonList").refresh();
            }, false)});
    }};
var poll = {init: function(template) {
    },prepareSubmit: function() {
        $("input:[name=pollRedirectUrl]").val(S.globalContext.currentUrl);
        return true;
    }};
var popup = {onPageShow: function() {
        var introInput = $("#popup-showintro");
        if (introInput.length && S.globalContext.session && S.globalContext.session.isLoggedIn) {
            var section = introInput.val();
            var bit = null;
            if (section == "main") {
                bit = 1;
            }
            if (section == "profile") {
                bit = 2;
            }
            if (section == "serverguide") {
                bit = 4;
            }
            if (section == "platoon") {
                bit = 8;
            }
            introSectionBits = S.globalContext.session.introSectionBits;
            if (bit && (introSectionBits & bit) == 0) {
                S.globalContext.session.introSectionBits = introSectionBits | bit;
                popup.showIntroPopup(section, introInput.attr("data"), bit);
            }
        }
    },init: function(template) {
        Push.bind("GameInviteStatus", function(e) {
            var ls = $.jStorage.get("serverguide-invites", {});
            var userId = e.data.userId;
            var foundGuid = false;
            $.each(ls, function(guid, value) {
                var invites = value.invites;
                for (var i in invites) {
                    var u = invites[i];
                    if (u.userId == userId) {
                        foundGuid = guid;
                        if (e.data.status == "true") {
                            value.invites[i].inviteStatus = "1";
                        } else {
                            value.invites[i].inviteStatus = "3";
                        }
                        break;
                    }
                }
            });
            $.jStorage.set("serverguide-invites", ls);
            if ($("#serverguide-invite-list").length) {
                $S("serverguide-invite-list").setState(ls[foundGuid]);
                $S("serverguide-invite-list").refresh();
            }
            if (serverguide) {
                serverguide.removeOldStatesInInviteList();
            }
        });
        $("#footer-change-lang").live("click", function(e) {
            e.preventDefault();
            S.log("Open lang popup");
            popup.render("selectlang", {"preferredLang": S.globalContext.staticContext.preferredLang});
        });
        $("#popup-selectlang-form-submit").live("click", function(e) {
            e.preventDefault();
            S.log("Submit lang form");
            $("#popup-selectlang-form").submit();
        });
        $(".popup-loginpopup-form").submit(function() {
            var form = $(this);
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    if (success) {
                        window.location.reload();
                    } else {
                        base.showMessageBoxFromResponse(success, response);
                        joinflow.showLoginPopup(server, friendPersonaId);
                    }
                }, false)});
        });
        $(".common-popup-close, .common-popup-close-container, .common-popup-close-button").live("click", function() {
            var id = $(this).parents(".common-popup:first").attr("id");
            if (id == "##RANDOM_ID##") {
                $(this).parents(".common-popup:first").remove();
            } else {
                popup.closePopup(id);
            }
        });
        if (S.cookieGet("comcenter.isInSync") != "") {
            popup.renderFromStorage();
        }
        $(".common-popup").live("click", function() {
            $(".common-popup").css("z-index", 1001);
            $(this).css("z-index", 1002);
            popup.setAsActive($(this).attr("id"));
        });
        $(".common-popup:not(.common-popup-big)").live("mouseover", function() {
            $(this).draggable({handle: ".common-popup-handle",start: function(event, ui) {
                    $(".common-popup").css("z-index", 1001);
                    $(this).css("z-index", 1002);
                },stop: function(event, ui) {
                    popup.storePosition($(ui));
                }});
        });
        $(".popup-gameinvite-accepted-button").live("click", function() {
            var userId = $(this).attr("rel");
            $.ajax({url: $("#sendInviteGameStatus-urlaction").val().replace("#USERID#", userId).replace("#STATUS#", true),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                })});
        });
        $(".chat-party-join-button").live("click", function() {
            var chatId = $(this).attr("rel");
            comcenter.joinPartyChat(chatId);
        });
        $(".popup-gameinvite-declined-button").live("click", function() {
            var userId = $(this).attr("rel");
            if (userId == undefined) {
                userId = $(this).parents(".common-popup:first").find(".popup-gameinvite-accepted-button:first").attr("rel");
            }
            $.ajax({url: $("#sendInviteGameStatus-urlaction").val().replace("#USERID#", userId).replace("#STATUS#", false),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                })});
        });
        var acceptGroupJoin = function(e, userId) {
            var userId = userId || $(this).attr("rel");
            if (joinflow.checkJoinGameRequirements(function(r) {
                acceptGroupJoin(e, userId);
            })) {
                launcher.isGameRunning(S.globalContext.realm.game, function(isGameRunning) {
                    if (isGameRunning) {
                        var data = {questionType: "GAMEMANAGER_CLOSE_GAME_QUESTION"};
                        var continueCallback = function() {
                            gamemanager.cancelGameLaunch(S.globalContext.realm.game);
                            setTimeout(function() {
                                acceptGroupJoin(false, userId);
                            }, 1500);
                        };
                        popup.prompt(data, continueCallback);
                    } else {
                        $.ajax({url: $("#sendStatusGroupJoin-urlaction").val().replace("#GROUPID#", userId).replace("#STATUS#", true),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                                if (response.message == "NOT_FOUND") {
                                    base.showReceipt("Party Join was not found.", "skull");
                                }
                            })});
                    }
                });
            }
        };
        $(".popup-groupjoininvite-accepted-button").live("click", acceptGroupJoin);
        $("#partypopup-continuebutton").live("click", function(e) {
            $(".comcenter-chat-party").each(function() {
                var chatToRemove = $(this).parents(".comcenter-chat-taskbar:first");
                chatToRemove.next().remove();
                chatToRemove.remove();
            });
            comcenter._doJoinPartyChat($(this).attr("data-chatId"));
        });
        $(".popup-coopinvite-declined-button").live("click", function() {
            var coopId = $(this).attr("rel");
            if (coopId == undefined) {
                coopId = $(this).parents(".common-popup:first").find(".popup-coopinvite-content:first").attr("rel");
            }
            $.ajax({url: $("#coopDecline-urlaction").val().replace("#COOPID#", coopId),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "NOT_FOUND":
                            base.showReceipt("CO-OP game was not found");
                            break;
                        default:
                            base.showReceipt("CO-OP invite declined");
                            coop.removeCoopIdFromActive(coopId);
                    }
                })});
        });
        $(".popup-groupjoininvite-declined-button").live("click", function() {
            var userId = $(this).attr("rel");
            if (userId == undefined) {
                userId = $(this).parents(".common-popup:first").find(".popup-groupjoininvite-content:first").attr("rel");
            }
            $.ajax({url: $("#sendStatusGroupJoin-urlaction").val().replace("#GROUPID#", userId).replace("#STATUS#", false),dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (response.message == "NOT_FOUND") {
                    }
                })});
        });
        $("#popup-server-url").focus().select();
    },closeOnePopup: function() {
        var p = $(".common-popup:last");
        if (p) {
            popup.closePopup(p.attr("id"));
        }
    },setAsActive: function(id) {
        if (id == "##RANDOM_ID##") {
            return false;
        }
        $.jStorage.set("active-popup", id);
    },storePosition: function(ui) {
        S.debug("Storing!");
        var id = $(ui).attr("helper").attr("id");
        try {
            var popups = $.jStorage.get("popups");
        } catch (e) {
            var popups = [];
        }
        for (var i in popups) {
            var p = popups[i];
            if (p.randomId == id) {
                popups[i].data.position = ui.attr("position");
                break;
            }
        }
        $.jStorage.set("popups", popups);
        popup.setAsActive(id);
    },closePopup: function(id) {
        var popups = $.jStorage.get("popups", false);
        if (popups) {
            for (var i in popups) {
                var popup = popups[i];
                if (popup.randomId == id) {
                    popups.splice(i, 1);
                    break;
                }
            }
            var popups = $.jStorage.set("popups", popups);
        }
        $("#" + id).remove();
    },render: function(template, data, straightInject, saveToLs) {
        var data = data.data || data || {};
        var randomId = ("popup-" + Math.random()).replace(".", "");
        straightInject = arguments.length > 2 ? straightInject : false;
        saveToLs = arguments.length > 3 ? saveToLs : true;
        if (!saveToLs) {
            data.removeOnPageLoad = true;
        }
        var popupContent = $($S("popup." + template).render(straightInject ? data : {"data": data}).replace("##RANDOM_ID##", randomId));
        var r = popupContent.appendTo(".base-center-popups");
        if (saveToLs) {
            try {
                var popups = $.jStorage.get("popups");
            } catch (e) {
                var popups = [];
            }
            if (popups == null) {
                popups = [];
            }
            var newPopupObject = {"randomId": randomId,"template": template};
            if (straightInject) {
                $.extend(newPopupObject, data);
            } else {
                newPopupObject.data = data;
            }
            popups.push(newPopupObject);
            if (!$.jStorage.set("popups", popups)) {
            }
        }
        $("#popup-server-url").focus().select();
        return r;
    },prompt: function(data, callback, newThis) {
        var newThisSet = arguments.length > 2;
        popup.render("question", {"data": data}, false, false).find(".popup-prompt-button-continue:first").bind("click", function() {
            $(this).parents(".common-popup:first").remove();
            if (newThisSet) {
                callback.call(newThis);
            } else {
                callback();
            }
        });
    },renderFromStorage: function() {
        var popups = $.jStorage.get("popups", false);
        if (!popups || popups == null || popups.length == 0) {
            return;
        }
        S.debug("Rendering popups from storage");
        for (var i in popups) {
            var popup = popups[i];
            var popupContent = $S("popup." + popup.template).render(popup).replace("##RANDOM_ID##", popup.randomId);
            $(".base-center-popups").append(popupContent);
        }
        var activePopup = $.jStorage.get("active-popup", false);
        if (activePopup && activePopup.length) {
            S.debug("Got active popup, " + activePopup);
            $(".common-popup").css("z-index", 1001);
            $("#" + activePopup).css("z-index", 1002);
        }
    },showIntroPopup: function(section, url, bit) {
        var activeIntro = 0, introScene = $("#popup-intro-scene"), introPopup = $("#popup-intro-" + section), contents = introPopup.find(".popup-intro-content"), titles = introPopup.find(".popup-intro-title"), introLength = titles.length - 1, continueButton = introPopup.find(".popup-intro-goto-next"), fixContinueButton = function() {
            introPopup.find(".common-popup-footer .popup-intro-goto-next").html(S.translations["ID_WEB_COMMON_BUTTON_CLOSE"]);
        };
        introPopup.find(".common-popup-footer .popup-intro-goto-next").html(S.translations["ID_WEB_COMMON_BUTTON_NEXT"]);
        contents.eq(0).show();
        titles.eq(0).show();
        if (introLength == 0) {
            fixContinueButton();
        }
        $(".popup-intro-footer-info").pageBind("click", function() {
            contents.eq(activeIntro).hide();
            titles.eq(activeIntro).hide();
            activeIntro = 0;
            introScene.hide();
            introPopup.hide();
        });
        continueButton.die("click");
        continueButton.pageBind("click", function(e) {
            e.preventDefault();
            contents.eq(activeIntro).hide();
            titles.eq(activeIntro).hide();
            if (activeIntro + 1 > introLength) {
                activeIntro = 0;
                introScene.hide();
                introPopup.hide();
                $.post(url, {"post-check-sum": S.globalContext.session.postChecksum,"bit": bit});
                return false;
            }
            activeIntro++;
            if (activeIntro == introLength) {
                fixContinueButton();
            }
            contents.eq(activeIntro).show();
            titles.eq(activeIntro).show();
            return false;
        });
        introScene.show();
        introPopup.css("z-index", "1337");
        introPopup.show();
    }};
var profile = {oFriendsCall: function() {
        var oFriends = $("#originLoad");
        if (oFriends.length) {
            S.debug("Loading.");
            var url = oFriends.attr("url");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        if (response.message == "OK") {
                            S.log(response);
                            if (response.data.validFriendsToInvite && response.data.validFriendsToInvite.length > 0) {
                                S.log("found valid origin friends to invite");
                                S.log($S("profile-import-friends").getState());
                                $S("profile-import-friends").getState()["importType"] = "origin";
                                $S("profile-import-friends").refresh();
                                profile.typeFriendsCall();
                            } else {
                                $S("oFriends").update(response.data);
                            }
                        } else {
                            $S("oFriends").update({"validFriendsToInvite": [],"originUsers": [],"originUsersOnSite": [],"originFriendsOnSite": [],"message": "Failed to get Origin Friends. Please try again later."});
                        }
                    }
                }, false)});
        }
    },typeFriendsCall: function() {
        var oFriends = $("#originTypeLoad");
        if (oFriends.length) {
            S.debug("Loading.");
            var url = oFriends.attr("url");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        if (response.message == "OK") {
                            $S("typeFriends").update(response.data);
                        } else {
                            $S("typeFriends").update({"originFriends": [],"message": "Failed to get Origin Friends. Please try again later."});
                        }
                    }
                }, false)});
        }
    },onPageShow: function() {
        profile.oFriendsCall();
        profile.typeFriendsCall();
        var soldierStatsFetch = $("#profile-stats-fetch-url");
        if (soldierStatsFetch.length) {
            var url = soldierStatsFetch.attr("url");
            $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        response.data.personaName = $.trim($(".profile-venicestats-header-soldier-info-name span").text());
                        var html = $S(response.data.statsTemplate).render(response.data);
                        soldierStatsFetch.replaceWith($(html));
                        $(".profile-stats-type-container .statisticstable").tablesorter({sortInitialOrder: "desc",textExtraction: function(node) {
                                var $node = $(node);
                                var nodeAttr = $node.attr("data-sortValue");
                                if (typeof nodeAttr !== "undefined" && nodeAttr !== false) {
                                    return nodeAttr;
                                } else {
                                    if ($node.find(".common-percentbar-container").length > 0 && $node.find(".item-object[data-count]").length > 0) {
                                        var myProgress = parseInt($node.find(".common-percentbar-container:first div").css("width"), 10) / 100;
                                        myProgress += parseInt($node.find(".item-object").attr("data-count"), 10);
                                        return myProgress;
                                    } else {
                                        if ($node.find(".common-percentbar-container").length > 0) {
                                            return $node.find(".common-percentbar-container:first div").css("width").replace("px", "");
                                        } else {
                                            if ($node.find(".item-object").length > 0) {
                                                return $node.find(".item-object").text();
                                            } else {
                                                if ($node.find("p.item-name").length > 0) {
                                                    return $node.find("p.item-name").text().trim();
                                                } else {
                                                    return $node.text();
                                                }
                                            }
                                        }
                                    }
                                }
                            }});
                        profile.showDogTags($("#dogtag1-render").data("url"), $("#dogtag2-render").data("url"));
                    }
                }, false)});
        }
        var dogtagBodyFetch = $("#dogtag-create-fetch-url");
        if (dogtagBodyFetch.length) {
            var createdogtagUrl = dogtagBodyFetch.data("url");
            $.ajax({url: createdogtagUrl,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                    if (success) {
                        var context = response.data;
                        context["dogtags"] = $S.callFunction("common.getDogtagsVenice");
                        var html = $S("profile.createdogtagfetch").render(context);
                        dogtagBodyFetch.replaceWith($(html));
                        profile.showDogTags($("#dogtag1-render").data("url"), $("#dogtag2-render").data("url"));
                    }
                }, false)});
        }
        $("#dogtags-list .profile-stats-type-container-filters li").pageLive("click", function() {
            var $this = $(this);
            var filter = $this.children("div").attr("class");
            $(".profile-stats-dogtags-dogtag").show();
            if (filter == "filter-taken") {
                $(".profile-stats-dogtags-dogtag:not(.taken)").hide();
            } else {
                if (filter == "filter-unlocked") {
                    $(".profile-stats-dogtags-dogtag:not(.unlocked)").hide();
                }
            }
            $this.siblings().removeClass("selected");
            $this.addClass("selected");
        });
        $(".profile-button-chat").live("click", function() {
            var userId = $(this).data("userId");
            S.debug("Opening chat through profile with " + userId);
            $("#comcenter-" + userId).click();
        });
        $("#profile-edit-full-form").submit(function(e) {
            e.preventDefault();
            $("#profile-edit-full-form-loader").show();
            $("#profile-edit-full-form-submit").attr("disabled", "disabled");
            base.ajaxPost($(this), profile.onEditProfileSubmitResponse);
        });
        $("#profile-main-column").pageDelegate("#friendRequestForm", "submit", function(e) {
            e.preventDefault();
            $.ajax({url: $("#friendRequestForm").attr("action"),dataType: "json",type: "POST",data: $("#friendRequestForm").serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "OK":
                            if (response.data["success"].length) {
                                base.showReceipt(response.data["success"].length + " requests sent successfully.", "checkbox");
                            }
                            for (var lst in response.data["errors"]) {
                                var err = response.data["errors"][lst];
                                switch (err.error) {
                                    case "FRIENDSHIPREQUEST_EXISTS":
                                        base.showReceipt("Invite to %x not sent: Request already sent.".replace("%x", err.username), "skull");
                                        break;
                                    case "ALREADY_FRIENDS":
                                        base.showReceipt("Invite to %x not sent: Already friends.".replace("%x", err.username), "skull");
                                        break;
                                    case "TOO_MANY_ACCEPTED":
                                        base.showReceipt("Invite to %x not sent: You have too many friends.".replace("%x", err.username), "skull");
                                        break;
                                    case "TOO_MANY_OUTGOING":
                                        base.showReceipt("Invite to %x not sent: You have too many pending requests.".replace("%x", err.username), "skull");
                                        break;
                                    case "NOT_ALLOWED":
                                        base.showReceipt("Invite to %x not sent: Not allowed.".replace("%x", err.username), "skull");
                                        break;
                                    case "TOO_MANY_ACCEPTED_AND_OUTGOING":
                                        base.showReceipt("Invite to %x not sent: You have sent too many requests.".replace("%x", err.username), "skull");
                                        break;
                                    case "UNKNOWN_FRIENDSHIPEXCEPTION":
                                    case "GENERIC_EXCEPTION":
                                        base.showReceipt("Invite to %x not sent: Unknown error, please try again in a bit.".replace("%x", err.username), "skull");
                                        break;
                                        break;
                                }
                            }
                            break;
                    }
                }, false)});
        });
        if (navigator.userAgent.toLowerCase().indexOf("msie 7") >= 0) {
            var statsHovers = $(".profile-stats-awarditem, .profile-stats-gadgetitem");
            statsHovers.pageBind("mouseover", function(e) {
                statsHovers.css("z-index", "");
                $(this).css("z-index", "20");
            });
        }
        var parts = S.globalContext.currentUrl.split("|");
        var key = "";
        if (parts.length > 4) {
            key = (parts.length < 6 ? parts[4] : parts[5]);
            key = parts[4];
            $(".profile-venicestats-tab").removeClass("active");
            $(".profile-venicestats-tab." + key).addClass("active");
        }
        if ($("#profile-user ul#soldier-list li").length > 2) {
            $("#profile-user .view-all-soldiers").show().click(function(e) {
                e.preventDefault();
                $(this).hide();
                $("#profile-user ul#soldier-list li.hidden").show();
                return false;
            });
        }
        var soldierList = $("#soldier-list");
        if (soldierList.length) {
            var url = soldierList.attr("data");
            if (url) {
                $.ajax({url: url,dataType: "json",type: "GET",complete: base.onComplete(function(success, response) {
                        if (success) {
                            var html = $S("profile.overviewsoldierbox").render(response.data);
                            soldierList.replaceWith($(html));
                        }
                    }, false)});
            }
        }
        var soldierEdit = $("#soldier-getStats");
        if (soldierEdit.length) {
            var url = soldierEdit.attr("action");
            if (url) {
                $.ajax({url: url,dataType: "json",type: "POST",data: soldierEdit.serialize(),complete: base.onComplete(function(success, response) {
                        if (success) {
                            for (var personaId in response.data.stats) {
                                var personaStats = response.data.stats[personaId];
                                var html = $S("profile.showrank").render({"rank_game": response.data.currentGame,"rank_size": "tiny","rank": personaStats.rank});
                                $("#profile-rank-" + personaId).html(html);
                            }
                        }
                    }, false)});
            }
        }
        $("#profile-main-column").pageDelegate(".ajax-mytargetsform", "submit", function() {
            var form = $(this);
            var button = form.find(".profile-mytarget:first");
            if (button.hasClass("stored")) {
                var url = $("#profile-removeTargetURL").val();
            } else {
                var url = $("#profile-addTargetURL").val();
            }
            $.ajax({url: url,dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    switch (response.message) {
                        case "ALREADY_ADDED":
                        case "ADDED_OK":
                            form.parents(".profilestats-item").find(".profile-mytarget").addClass("stored");
                            base.showReceipt("Stats target added!");
                            break;
                        case "REMOVED_OK":
                        case "REMOVED_ERROR":
                            form.parents(".profilestats-item").find(".profile-mytarget").removeClass("stored");
                            base.showReceipt("Stats target removed.");
                            break;
                    }
                }, false)});
            return false;
        });
        if ($("#newSoldierPersonaName").length) {
            $("#newSoldierPersonaName").focus();
        }
        $(".profile-friends-remove").pageBind("click", function() {
            var row = $(this).parent("li");
            var friend = $(this).attr("id");
            friend = friend.split("-");
            $("#profile-friends-count").html(parseInt($("#profile-friends-count").html()) - 1);
            var url = $(this).attr("rel");
            $.ajax({type: "GET",dataType: "json",url: url,success: function(response) {
                    if (response["type"] == "success") {
                        $(row).remove();
                        var friendstate = $S("comcenter-surface-friends").getState();
                        var newfriends = [];
                        S.debug("Newfriends is ");
                        S.debug(newfriends);
                        for (var n = 0; n < friendstate.friendscomcenter.length; n++) {
                            S.debug(("" + friendstate.friendscomcenter[n].userId) + " vs " + response["data"]["id"]);
                            if ("" + friendstate.friendscomcenter[n].userId != response["data"]["id"]) {
                                newfriends.push(friendstate.friendscomcenter[n]);
                            }
                        }
                        S.debug("Setting friendscomcenter to ");
                        S.debug(newfriends);
                        friendstate.friendscomcenter = newfriends;
                        $S("comcenter-surface-friends").setState(friendstate);
                        comcenter.updateLocalStorage();
                        $S("comcenter-surface-friends").refresh();
                    } else {
                        alert("Error: Could not remove friend.");
                    }
                }});
        });
        var wallMessageExpanded = 0;
        $(".wall-message").pageBind("click", function() {
            if (wallMessageExpanded == 0) {
                $(this).addClass("wall-message-expanded").val("");
                $(".base-button-arrow-small.wall-message-button").show();
                wallMessageExpanded = 1;
            }
        });
        $("#feed-optionsbutton-container").pageLive("click", function(e) {
            $("#feed-optionsbutton-dropdown").show();
        });
        $("#feed-optionsbutton-container").pageLive("mouseout", function() {
            $("#feed-optionsbutton-dropdown").hide();
        });
        $(".feed-story-delete").pageLive("click", function(e) {
            popup.prompt({"header": "Are you sure you want to delete this feed entry?"}, function() {
                var feedEntry = $(this).parents("li:first");
                var storyUrl = $(this).attr("storyUrl");
                var data = $(this).siblings(".feed-story-ids").find("input[name='feed-eventIds[]']").serialize();
                data += "&post-check-sum=" + S.globalContext.session.postChecksum;
                $.ajax({url: storyUrl,type: "POST",data: data,complete: base.onComplete(function(success, response) {
                        if (success && response == "Deleted") {
                            feedEntry.fadeOut("fast", function() {
                                feedEntry.fadeOut("fast", function() {
                                    feedEntry.remove();
                                });
                            });
                            base.showReceipt("Entry deleted", "checkbox");
                        } else {
                            base.showReceipt("Could not delete entry", "skull");
                        }
                    }, false)});
            }, this);
        });
        $(".feed-story-comment-delete").pageLive("click", function(e) {
            popup.prompt({"header": "Are you sure you want to delete this comment?"}, function() {
                var feedComment = $(this).parents(".feed-comments-item");
                var commentId = $(this).attr("commentId");
                var commentUrl = $(this).attr("commentUrl");
                var data = {"post-check-sum": S.globalContext.session.postChecksum,"commentId": commentId};
                $.ajax({url: commentUrl,type: "POST",data: data,complete: base.onComplete(function(success, response) {
                        if (success && response == "Deleted") {
                            feedComment.fadeOut("fast", function() {
                                feedComment.remove();
                            });
                            base.showReceipt("Comment deleted", "checkbox");
                        } else {
                            base.showReceipt("Could not delete comment", "skull");
                        }
                    }, false)});
            }, this);
        });
        $("body").pageDelegate("form.wallpost", "submit", function(event) {
            event.preventDefault();
            wallMessageExpanded = 0;
            var form = $(this);
            var $wall_message = $(form).find(".wall-message");
            var wall_message_text = $.trim($wall_message.val());
            if (wall_message_text.length > 1) {
                $wall_message.addClass("disabled");
                $(".base-button-arrow-small.wall-message-button").hide();
                $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                        $(form).find(".feed-textlimit-counter").text("");
                        $wall_message.removeClass("disabled wall-message-expanded").val("Leave a message in this Battle Log...");
                    }, false)});
            } else {
                base.showReceipt("Please write a bit longer text than that.", "skull");
            }
        });
        $(".textlimit-count").pageLive("keydown", function() {
            var max_text_length = 1000;
            var max_text_length_warning = max_text_length / 2;
            var textLength = $(this).val().length;
            var remaining = max_text_length - textLength;
            if (remaining < 1) {
                presentation_text = $(this).val();
                remaining = 0;
                $(this).val(presentation_text.substr(0, max_text_length - 1));
            }
            if (remaining < max_text_length_warning) {
                $(this).siblings(".textlimit-counter").text(remaining.toString() + " characters remaining");
            } else {
                $(this).siblings(".textlimit-counter").text("");
            }
        });
        $("#profile-status-message").pageDelegate("#profile-status-message-area, #profile-edit-status-button", "click", function() {
            if ($("#profile-edit-status-button").length) {
                $(".profile-toggle-edit").toggle();
                $("#profile-status-message-edit").select();
                var message = $("#profile-status-message-edit .profile-status-message-text").val();
                var messagearea = $.trim($("#profile-status-message-area").html());
                $("body").bind("click.profileEditClick", function(e) {
                    if ($(e.target).parents("#profile-status-message").length) {
                        return true;
                    } else {
                        $("body").unbind("click.profileEditClick");
                        $(".profile-toggle-edit").toggle();
                    }
                });
            }
        });
        $("#profile-stats-awards-upcoming-table").tablesorter({textExtraction: function(node) {
                return $(node).find(".common-sorting-value").html();
            }});
        if (S.globalContext.session.isLoggedIn) {
            $(".profile-add-friend").delegate("form.friendship", "submit", function(event) {
                event.preventDefault ? event.preventDefault() : event.returnValue = false;
                $.post($(this).attr("action"), $(this).serialize());
                $(this).find(".base-button-addfriend-wide").attr("disabled", 1).val("Request sent");
                base.showReceipt("Friend request sent!");
            });
            $(".profile-accept-friendship").delegate("form.friendship", "submit", function(event) {
                event.preventDefault ? event.preventDefault() : event.returnValue = false;
                $.post($(this).attr("action"), $(this).serialize());
                $(this).find(".base-button-addfriend-wide").attr("disabled", 1).val("Request accepted");
                base.showReceipt("Friend request accepted!");
            });
        }
        $("#profile-edit-row-clantag .profile-edit-picture").click(function() {
            var $this = $(this);
            var soldierId = $this.parent().attr("id");
            var $current_portrait = $this.find(".soldier-picture-input").val();
            popup.render("profileSoldierImage", {"soldierId": soldierId,"position": {"top": "180","left": "50%"}});
            profile.setProfilePortrait($current_portrait);
        });
        $(".unlockFilterByKitButton").pageLive("click", function(e) {
            var state = $S("unlocks").getState();
            state["filterByKit"] = $(this).attr("filterByKit");
            $S("unlocks").refresh();
        });
        $(".filterByKitButton").pageLive("click", function(e) {
            var kitId = $(this).attr("filterByKit");
            if (kitId == "Other") {
                $(".filterByKit").show();
            } else {
                $(".filterByKit").hide();
                $(".filterByKit_" + kitId).show();
            }
        });
        $(".profile-gamereport-bar-column-body").each(function() {
            var $this = $(this);
            $this.tipsy({live: false,html: true,gravity: "s",fallback: $S("battlereport.minicard").render($this.data("report"))});
        });
        $(".profile-stats-type-container-filters .common-selector li").live("click", function() {
            $(this).addClass("selected").siblings().removeClass("selected");
        });
        $(".profile-add-friend input.allow-add").removeAttr("disabled");
        search.initUserSearch("#profile-friends-user-search-form");
        profile.showAddFriends();
        profile.showDogTags();
    },init: function(template) {
        Push.bind("UserRemovedFriend", profile.handleUserRemovedFriend);
        Push.bind("FeedReceivedStatusmessage", function(e) {
            if ($("#profile-identifer-" + e.data.ownerId).length) {
                if (e.data.STATUSMESSAGE.statusMessage != "") {
                    $("#profile-status-message-area").text(e.data.STATUSMESSAGE.statusMessage);
                }
            }
        });
    },showAddFriends: function(e) {
        if ($("#profile-friends-content").length < 1) {
            return;
        }
        var friends = comcenter.getFriendsListFromLs();
        var displayedFriends = $S("profile_friends_list").getState().friends;
        for (var i = 0; i < displayedFriends.length; i++) {
            var showMe = true;
            for (var j = 0; j < friends.length; j++) {
                if (friends[j].userId == displayedFriends[i].userId) {
                    showMe = false;
                    break;
                }
            }
            if (showMe) {
                $("#profile_friends_list_" + displayedFriends[i].userId + " .profile-add-friend-friendlist").show();
            }
        }
    },handleUserRemovedFriend: function(e) {
        $(".mayaddfriends").addClass("yes");
    },setProfilePortrait: function(current_portrait) {
        if (current_portrait) {
            $("#soldierportraits-container li").removeClass("selected");
            $("#" + current_portrait).addClass("selected");
        }
        $("#soldierportraits-container li").click(function() {
            var $this = $(this);
            $("#soldierportraits-container li").removeClass("selected");
            $this.addClass("selected");
        });
        $(".popup-soldierportrait form").submit(function(e) {
            e.preventDefault();
            var soldier_id = $("#soldierportraits-container input#soldier").attr("value");
            var soldier_portrait = $("#soldierportraits-container li.selected").attr("id");
            var soldier_img_html = $S("profile.showsoldierpic").render({"picture": soldier_portrait,"size": "small"});
            $("li#" + soldier_id + " div.profile-solder-picture").html(soldier_img_html);
            $("li#" + soldier_id + " input.soldier-picture-input").val(soldier_portrait);
            var popup_id = $("div.popup-soldierportrait").attr("id");
            popup.closePopup(popup_id);
            return true;
        });
    },showDogTags: function(dogtag1_image, dogtag2_image) {
        if ($("#createdogtag").length) {
            var dogtag1, dogtag1_bg, dogtag2, dogtag2_bg;
            function put_name_on_dogtag() {
                var font_size = 21;
                var font_weight = "normal";
                var persona_clan_tag = $("#createdogtag #profile-dogtags-form-tag").val();
                var persona_display_name = $("#createdogtag #profile-dogtags-form-persona").val();
                if (persona_display_name.length > 13) {
                    font_size = 15;
                    font_weight = "bold";
                }
                if (persona_clan_tag.length > 0) {
                    persona_clan_tag = "[" + persona_clan_tag + "]";
                    persona_display_name = persona_clan_tag + "\n" + persona_display_name;
                }
                var dogtag_highlight = dogtag1.text(83, 97, persona_display_name);
                var dogtag_name = dogtag1.text(81, 95, persona_display_name);
                dogtag_highlight.attr({"font-size": font_size,"font-weight": font_weight,"font-family": "Arial","text-anchor": "start","fill": "#ffffff","opacity": "0.6"});
                dogtag_name.attr({"font-size": font_size,"font-weight": font_weight,"font-family": "Arial","text-anchor": "start","fill": "#353535","opacity": "0.7"});
                dogtag_name.rotate(10);
                dogtag_highlight.rotate(10);
            }
            function put_stat_on_dogtag(stat_name, stat_value) {
                if (stat_name && stat_value) {
                    var stat_text = stat_value + "\n" + stat_name;
                    var dogtag_highlight = dogtag2.text(237, 107, stat_text);
                    var dogtag_name = dogtag2.text(235, 105, stat_text);
                    dogtag_highlight.attr({"font-size": 16,"font-family": "Arial","text-anchor": "end","fill": "#ffffff","opacity": "0.6"});
                    dogtag_name.attr({"font-size": 16,"font-family": "Arial","text-anchor": "end","fill": "#353535","opacity": "0.7"});
                }
            }
            function show_first_selected_dogtag() {
                $("div#first-dogtag .profile-dogtags-dogtagslist li.profile-dogtags-dogtag.selected").trigger("click");
            }
            function show_second_selected_dogtag() {
                $("div#second-dogtag .profile-dogtags-dogtagslist li.profile-dogtags-dogtag.selected").trigger("click");
            }
            $.getScript("/public/profile/bf3/raphael-min.js", function() {
                dogtag2 = Raphael("dogtag2-render", 320, 200, 0, 0);
                dogtag1 = Raphael("dogtag1-render", 320, 200, 0, 0);
                if (dogtag1_image && dogtag2_image) {
                    dogtag2_bg = dogtag2.image(dogtag2_image, 10, 0, 256, 148);
                    var stat_name = $("#dogtag2-render").data("statunit");
                    var stat_value = $("#dogtag2-render").data("statvalue");
                    put_stat_on_dogtag(stat_name, stat_value);
                    dogtag1_bg = dogtag1.image(dogtag1_image, 10, 0, 278, 191);
                    put_name_on_dogtag();
                } else {
                    show_second_selected_dogtag();
                    show_first_selected_dogtag();
                }
            });
            $("#first-dogtag .common-box-tab-content:not(:first)").hide();
            $("#second-dogtag .common-box-tab-content:not(:first)").hide();
            $("#createdogtag .common-box-tab-content li").click(function(e) {
                var $this = $(this);
                var $this_id = $this.attr("id");
                var $this_img = $this.data("image");
                var $this_index = $this.data("index");
                $this.siblings().removeClass("selected");
                $this.addClass("selected");
                if ($this.data("side") == 1) {
                    dogtag1.clear();
                    dogtag1_bg = dogtag1.image($this_img, 10, 0, 278, 191);
                    put_name_on_dogtag();
                    $("#createdogtag #profile-dogtags-form-basic").val($this_index);
                } else {
                    var dogtag_stat_name = $this.data("statunit");
                    var dogtag_stat_value = $this.data("statvalue");
                    dogtag2.clear();
                    dogtag2_bg = dogtag2.image($this_img, 10, 0, 256, 148);
                    if (dogtag_stat_name && dogtag_stat_value) {
                        put_stat_on_dogtag(dogtag_stat_name, dogtag_stat_value);
                    }
                    $("#createdogtag #profile-dogtags-form-advanced").val($this_index);
                    show_first_selected_dogtag();
                }
            });
            $("#createdogtag .common-box-tab-nav li div").click(function(e) {
                $this = $(this);
                $this.parent().siblings().removeClass("selected");
                $this.parent().addClass("selected");
                tab_dog_tag_category = $this.data("dt-category");
                if (tab_dog_tag_category == "") {
                    $this.parents(".common-box-tab").find(".profile-dogtags-dogtagslist li.profile-dogtags-dogtag").show();
                } else {
                    $this.parents(".common-box-tab").find(".profile-dogtags-dogtagslist li.profile-dogtags-dogtag").hide();
                    $this.parents(".common-box-tab").find(".profile-dogtags-dogtagslist li.profile-dogtags-dogtag.profile-dogtags-category-" + tab_dog_tag_category).show();
                }
            });
            $("#dogtag-set form").submit(function(e) {
                e.preventDefault();
                var $this = $(this);
                $.ajax({url: $this.attr("action"),dataType: "json",type: "POST",data: $this.serialize(),complete: base.onComplete(function(success, response) {
                        if (success) {
                            base.showReceipt("Dog Tags saved", "checkbox");
                        }
                    }, false)});
            });
        }
    },toggleSelectAllFrends: function() {
        var obs = $.find("#friendRequestForm input:checkbox");
        if (obs[0].checked) {
            $(obs).attr("checked", false);
            $("#selectall").attr("checked", false);
        } else {
            $(obs).attr("checked", true);
            $("#selectall").attr("checked", true);
        }
    },onEditProfileSubmitResponse: function(success, response) {
        $("#profile-edit-full-form-loader").hide();
        $("#profile-edit-full-form-submit").removeAttr("disabled");
        base.showReceipt("Profile saved", "checkbox");
        if (response.data.message == "TAG_MISMATCH") {
            base.showReceipt("Found invalid tag names", receiptTypes.ERROR);
        }
        setTimeout(function() {
            document.location.href = document.location.href;
        }, 500);
    }};
var registration = {onPageShow: function() {
    },init: function(template) {
        $("#registration-username").focus();
        var usernameField = $("#registration-username");
        usernameField.blur(function() {
            if ($(this).val().length < 4 && $(this).val().length > 0) {
                $S("usernameAcceptable").update({"usernameAllowed": "False","reason": "Origin ID too short"});
                return;
            }
            var url = "/registration/usernameAcceptableDo/" + $(this).val();
            base.ajaxPostJson(url, function(success, data) {
                if (success) {
                    if (data == "True") {
                        $S("usernameAcceptable").update({"usernameAllowed": "True"});
                    } else {
                        $S("usernameAcceptable").update({"usernameAllowed": "False","reason": "Origin ID is already taken. Try another one."});
                    }
                }
            });
        });
        $(".register-new-eaid").focus(function() {
            $("#existing-persona-x").attr("checked", true);
        });
        var pwdRegExp = new RegExp("^.*(?=.{8,})(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*$");
        var noSpacesRegExp = new RegExp("\\s");
        var passwordField = $("#registration-password");
        passwordField.keyup(function() {
            if (noSpacesRegExp.exec(passwordField.val()) != null) {
                $S("passwordValidates").update({"passwordValidates": "False","reason": "Password can not contain any spaces"});
            } else {
                if (passwordField.val().length < 8) {
                    $S("passwordValidates").update({"passwordValidates": "False","reason": "Password is too short"});
                } else {
                    if (pwdRegExp.exec(passwordField.val()) == null) {
                        $S("passwordValidates").update({"passwordValidates": "False","reason": "Password must contain one digit, one lower- and one uppecase character"});
                    } else {
                        $S("passwordValidates").update({"passwordValidates": "True"});
                    }
                }
            }
        });
    }};
var runconfig = {onComponentReady: function() {
    },init: function(template) {
    }};
var search = {initUserSearch: function(form) {
        var $form = $(form);
        var $wrapper = $form.parents(".common-user-search-wrapper:first"), $input = $form.find("input[name='username']"), $failMsg = $wrapper.find(".common-user-search-failmsg"), $spinner = $wrapper.find(".common-user-search-spinner"), $resultsContainer = $wrapper.find(".common-user-search-results"), $resultsWrapper = $wrapper.find(".common-user-search-results-wrapper"), blockResultsClose = false;
        $resultsContainer.undelegate();
        $resultsContainer.pageDelegate("li", "mouseover", function() {
            blockResultsClose = true;
            var $this = $(this);
            $this.parent().find("li.active").removeClass("active");
            $this.addClass("active");
        }).pageDelegate("li", "mouseout", function() {
            blockResultsClose = false;
            $(this).removeClass("active");
        }).pageDelegate("li", "click", function() {
            base.redirect($(this).data("path"));
            setTimeout(function() {
                $input.val("");
                $resultsWrapper.hide();
                $resultsContainer.html("");
            }, 30);
        });
        var listNavigate = function(direction) {
            var $resultsList = $resultsContainer.find("ul"), $resultsListItems = $resultsList.find("li"), $currentActiveItem = $resultsList.find("li.active"), currentActiveItemIndex = $currentActiveItem.index(), $nextActiveItem;
            var nextActiveItemIndex = currentActiveItemIndex + direction;
            if (currentActiveItemIndex < 0 || nextActiveItemIndex < 0 || nextActiveItemIndex > $resultsListItems.length - 1) {
                $nextActiveItem = $resultsList.find("li:" + (direction > 0 ? "first" : "last"));
            } else {
                $nextActiveItem = $resultsListItems.eq(nextActiveItemIndex);
            }
            $currentActiveItem.removeClass("active");
            $nextActiveItem.addClass("active");
        };
        $input.unbind();
        $input.pageBind("focus", function() {
            $resultsWrapper.show();
        }).pageBind("blur", function() {
            if (!blockResultsClose) {
                $resultsWrapper.hide();
            }
        }).pageBind("keyup", function(e) {
            if (e.keyCode != $.ui.keyCode.DOWN && e.keyCode != $.ui.keyCode.UP && e.keyCode != $.ui.keyCode.TAB) {
                return;
            }
            e.preventDefault ? e.preventDefault() : e.returnValue = false;
            switch (e.keyCode) {
                case $.ui.keyCode.DOWN:
                    listNavigate(1);
                    break;
                case $.ui.keyCode.UP:
                    listNavigate(-1);
                    break;
            }
            return false;
        });
        $form.unbind();
        $form.pageBind("submit", function(e) {
            if ($input.val() === "") {
                $resultsWrapper.hide();
                $resultsContainer.html("");
                return false;
            }
            var $activeItem = $resultsContainer.find("li.active:first");
            if ($activeItem.length > 0) {
                base.redirect($activeItem.data("path"));
                $input.val("");
                $resultsWrapper.hide();
                $resultsContainer.html("");
            } else {
                $spinner.show();
                $.ajax({url: $form.attr("action"),type: $form.attr("method"),data: $form.serialize(),complete: base.onComplete(function(success, response) {
                        $spinner.hide();
                        if (response.message == "MATCHES", response.data.matches.length > 0) {
                            $failMsg.stop(true, true).hide();
                            if (response.data.matches.length === 1) {
                                base.redirect($($S("base.searchresults").render({"results": response.data.matches})).find("li:first").data("path"));
                                $input.val("");
                                $resultsWrapper.hide();
                                $resultsContainer.html("");
                            } else {
                                var resultsListHtml = $S("base.searchresults").render({"results": response.data.matches});
                                $resultsContainer.html(resultsListHtml);
                                $resultsWrapper.show();
                            }
                        } else {
                            $failMsg.stop(true, true).slideDown(150);
                            setTimeout(function() {
                                $failMsg.stop(true, true).hide();
                            }, 8000);
                            $resultsContainer.html("");
                            $input.select();
                        }
                    }, false)});
            }
            return false;
        });
    }};
var serverguide = {hasPluginAndGame: false,filterSearchTimeout: false,rowSelect: false,active_scoreboard: false,serverHighlightIndex: 0,init: function() {
        var scrollTo = function(element) {
            $("html,body").animate({scrollTop: $(element).offset().top - 250}, {duration: "fast",easing: "swing"});
        };
        $("#selected-server-info table tr").last().html($(".serverguide-bodycells.active > .serverguide-cell-ping").text() + " ms ping").css({"font-weight": "bold"});
        var pingResult = function(event, serverLatencys) {
            jQuery.each(serverLatencys, function(serverId, latency) {
                try {
                    var surf = $S("serverguide-server-" + serverId);
                    if (surf) {
                        surf.getState()["ping"] = (parseInt(latency) < 0 ? "-" : latency);
                        surf.refresh();
                    }
                } catch (e) {
                }
            });
            serverguide.refreshHighlight();
        };
        launcher.registerForEvent("pingResult", pingResult);
    },serverRailer: false,highlightServerIndex: function(idx) {
        S.log("Highlighting server " + idx + " (prev: " + serverguide.serverHighlightIndex + ")");
        serverguide.serverHighlightIndex = idx;
        serverguide.refreshHighlight();
    },refreshHighlight: function() {
        $(".serverguide-bodycells").removeClass("active");
        $("#serverguide-server-" + serverguide.serverHighlightIndex + " .serverguide-bodycells").addClass("active");
    },onPageShow: function() {
        serverguide.initSearchField();
        serverguide.disableNotOwnedExpansion();
        serverguide.greyOutGameSelectionMaps();
        serverguideList.setServerShowPosition();
        serverguideList.setServerShowHeight();
        if ($.jStorage.get("serverfilter-hidden")) {
            $("#serverguide-filtertoggle").removeClass("serverguide-filtertoggle-expanded").addClass("serverguide-filtertoggle-contracted");
            $("#serverguide-filters").css({"display": "none"});
            $("#serverguide-apply-filters").css({"display": "none"});
        }
        serverguide.serverRailer = $("#serverguide-show-column").railer($("#serverguide-list-outer-wrapper"), $(".serverguide-list:first"));
        $(".serverguide-apply-filter-button").click(function() {
            $(".serverguide-list").hide();
            $("#serverguide-show-column").hide();
            $("#serverguide-loading-list-indicator").show();
            omniture_click("", "viewServers_click");
        });
        $(".show-all-scoreboard").live("click", function() {
            popup.render("serverplayers", {"scoreboard": {}});
            server_scoreboard();
        });
        $(".serverguide-add-favorite").pageLive("click", function() {
            $(".serverguide-add-favorite-toggle").hide();
            $(".serverguide-add-favorite-loading").show();
            var form = $(this).children("form");
            var url = form.attr("action");
            var guid = form.children("input").val();
            serverguide.addFavorite(url, guid);
        });
        $(".serverguide-server-link").pageLive("click", function(e) {
            e.preventDefault();
            popup.render("serverurl", $(this).attr("href"));
        });
        $(".serverguide-server-link-field").pageLive("click", function(e) {
            $(this).focus().select();
        });
        $("#serverguide-show-friends-with-server-toggle").pageLive("click", function() {
            $("#serverguide-show-friends-with-server").toggle();
        });
        $(".base-button-dropdown-joinnow").pageLive("click", function(e) {
            e.preventDefault();
            $("#serverguide-show-joinserver-form").submit();
        });
        $(".base-button-dropdown a").pageLive("click", function(e) {
            $(this).parents(".base-button-dropdown:first").hide();
            return false;
        });
        $("#serverguide-result .serverguide-bodycell, #serverguide-result .serverguide-cell-name a").pageLive("click", function(e) {
            if (e.target.tagName == "A") {
                e.preventDefault();
            }
            if (e.target.tagName == "INPUT") {
                return;
            }
            if (serverguide.rowSelect) {
                serverguide.rowSelect.abort();
            }
            var serverRow = $(e.target).parents(".serverguide-bodycells");
            var idx = serverRow.attr("idx");
            var guid = serverRow.attr("guid");
            var url = $("#serverguide-numplayers-url").val().replace("%GUID%", guid);
            var ping = serverRow.children(".serverguide-cell-ping").children("span").html();
            var rowSurface = $S("serverguide-server-" + idx);
            var showserverinfo = $.jStorage.get("serverinfo-more-info-visible");
            if (showserverinfo) {
                $("#serverinfo-more-info-expanded").show();
            }
            var friends = comcenter.getFriendsPlayingOnServer(guid);
            serverguide.highlightServerIndex(idx);
            var server = rowSurface.getState().server;
            $S("serverguide-show").update({serverinfo: server,friends: friends});
            try {
                serverguide.serverRailer.sendToHook();
            } catch (e) {
                S.log(e);
            }
            serverguide.rowSelect = base.ajaxGetJson(url, function(success, response) {
                if (success && response.mapMode) {
                    var updatedInfo = {numPlayers: response.players,numQueued: response.queued,map: response.map,mapMode: response.mapMode};
                    $S("serverguide-show").update({loading: false,serverinfo: updatedInfo});
                    var mapinfo = $S.callFunction("serverguide.mapinfo", server.game, response.map);
                    $S("serverguide-server-" + idx).update({server: updatedInfo,mapinfo: mapinfo});
                    serverguide.refreshHighlight();
                }
            });
            return false;
        });
        $(".serverguide-reset-filter-button").pageBind("click", serverguide.resetFilters);
        if ($("#serverguide-filters").length) {
            serverguide.initGuideFilters();
        }
        if ($("#serverguide-result").length) {
            serverguideList.initServerListing();
            serverguideSort.initSortColumns();
        }
        $("body").pageDelegate(".serverguide-join-server", "submit", function(e) {
            e.preventDefault();
            $("#gamecontrol-game-launcher").show();
            joinflow.joinServerByUrl($(this).attr("action"), null, function(foundServer) {
            });
            return false;
        });
        if ($("#serverguide-autobrowse-on").length > 0 && $(".serverguide-bodycells").length >= 30) {
            serverguideList.setServerListAutoBrowse();
        }
        if ($("#serverguide-show-serverjoin").length) {
            serverguideShow.initServerShow();
        }
        if ($("#serverguide-plugin-not-found").length) {
            serverguide.registerForEvent("plugin", function(event, result) {
                if (!result) {
                    $("#serverguide-plugin-not-found").show();
                }
            });
            serverguide.registerForEvent("game", function(event, result) {
                if (!result) {
                    $("#serverguide-game-not-found").show();
                }
            });
        }
        serverguide.toggleRemoveFavorite();
        $("#serverguide-server-0 .serverguide-bodycell:first").click();
        $(serverguide.initPlugin);
        var currentServerGuid = false;
        if ($("#serverguide-show").length) {
            try {
                var sgshow = $S("serverguide-show");
                if (sgshow && sgshow.getState() && sgshow.getState().serverinfo && sgshow.getState().serverinfo.guid) {
                    currentServerGuid = $S("serverguide-show").getState().serverinfo.guid;
                }
            } catch (e) {
            }
        }
        serverguide.updateInviteList(currentServerGuid);
        (function() {
            $("#serverinfo-more-info-view").pageLive("click", function() {
                $("#serverinfo-more-info-view").hide();
                $("#serverinfo-more-info-hide").show();
                $.jStorage.set("serverinfo-more-info-visible", true);
                $("#serverinfo-more-info-expanded").stop(true, true).slideDown(150);
            });
            $("#serverinfo-more-info-hide").pageLive("click", function() {
                $("#serverinfo-more-info-hide").hide();
                $("#serverinfo-more-info-view").show();
                $.jStorage.deleteKey("serverinfo-more-info-visible");
                $("#serverinfo-more-info-expanded").stop(true, true).slideUp(150);
            });
        })();
        if (S.globalContext.session.isLoggedIn) {
            $("#serverguide-friends-tab-playing").html(comcenter.getFriendsPlayingCount());
            $(".serverguide-friends-tab").pageLive("click", function(e) {
                var friends = comcenter.getFriendsListFromLs();
                var guids = [];
                for (var i in friends) {
                    if (friends[i].presence && friends[i].presence.isPlaying) {
                        guids.push(friends[i].presence.serverGuid);
                    }
                }
                var url = $(this).attr("rel").replace("#GUIDS#", guids.join(","));
                Surface.ajaxNavigation.navigateTo(url);
            });
            if (S.globalContext.isAjaxNavigation) {
                serverguide.updateFriendsPlayingOnServers();
            } else {
                setTimeout(serverguide.updateFriendsPlayingOnServers, 1000);
            }
        }
        (function() {
            $("#serverinfo-players-all-view").pageLive("click", function() {
                $("#serverinfo-players-all-view").hide();
                $("#serverinfo-players-all-wrapper").html($S("serverguide.serverplayerlist").render({})).show();
                common.startSpinners();
                var guid = $(this).attr("data");
                var numPlayers = $(this).attr("data-numPlayers");
                var url = $("#serverguide-players-url").val().replace("%GUID%", guid);
                base.ajaxGetJson(url, function(success, response) {
                    var players = [];
                    if (success) {
                        players = response.players;
                    }
                    $("#serverinfo-players-all-hide").show();
                    $("#serverinfo-players-all-wrapper").html($S("serverguide.serverplayerlist").render({players: players,numPlayers: numPlayers}));
                    try {
                        serverguide.serverRailer.sendToHook();
                    } catch (e) {
                    }
                });
            });
            $("#serverinfo-players-all-hide").pageLive("click", function() {
                $("#serverinfo-players-all-hide").hide();
                $("#serverinfo-players-all-view").show();
                $("#serverinfo-players-all-wrapper").stop(true, true).slideUp(150, function() {
                    try {
                        serverguide.serverRailer.sendToHook();
                    } catch (e) {
                    }
                });
            });
        })();
    },updateFriendsPlayingOnServers: function() {
        var el = $("#serverguide-listcontainer");
        if (el.length) {
            var playingFriends = comcenter.getFriendsPlaying();
            var surfaces = el.find(".serverguide-surface-finder").parent();
            var surfaceCount = surfaces.length;
            for (var i = 0; i < surfaceCount; i++) {
                var surface = $S(surfaces[i].id);
                var state = surface.getState();
                surface.update({"friendsOnServer": playingFriends[state.server.guid]});
            }
        }
        serverguide.refreshHighlight();
    },toggleRemoveFavorite: function() {
    },addFavorite: function(url, guid) {
        var surf = $S("serverguide-show");
        $.ajax({url: url,dataType: "json",type: "POST",data: "guid=" + guid + "&post-check-sum=" + S.globalContext.session.postChecksum,complete: base.onComplete(function(success, response) {
                if (success) {
                    var favorite_row_id = ".serverguide-favorites-list div[guid='" + guid + "']";
                    if (response.message == "GAMESERVERBOOKMARK_REMOVED") {
                        base.showReceipt("Removed server from favourites", "checkbox");
                        if ($(favorite_row_id).length) {
                            $(favorite_row_id).fadeOut();
                        }
                    } else {
                        base.showReceipt("Added server to favourites", "checkbox");
                        if ($(favorite_row_id).length) {
                            $(favorite_row_id).fadeIn();
                        }
                    }
                    S.globalContext.favGuids.push(guid);
                    surf.refresh();
                    serverguide.toggleRemoveFavorite();
                } else {
                    surf.refresh();
                }
                $(".serverguide-add-favorite-loading").hide();
                $(".serverguide-add-favorite-toggle").show();
                if (response.message == "GAMESERVERBOOKMARK_REMOVED") {
                    $(".base-secondary-right-column .serverguide-add-favorite-toggle").removeClass("isFavorite");
                }
            }, false)});
    },updateInviteList: function(guid) {
        S.debug("Update with guid: " + guid);
        var state = false;
        if (!$("#serverguide-invite-list").length) {
            return false;
        }
        state = $S("serverguide-invite-list").getState();
        var ls = $.jStorage.get("serverguide-invites", {});
        if (state.invites == null || state.invites.length == 0 && ls[guid] != null) {
            $S("serverguide-invite-list").setState({"invites": ls[guid].invites,"serverGuid": guid});
            $S("serverguide-invite-list").refresh();
        }
        var state = $S("serverguide-invite-list").getState();
        ls[guid] = state;
        var ls = $.jStorage.set("serverguide-invites", ls);
        $S("serverguide-invite-list").refresh();
        serverguide.removeOldStatesInInviteList();
    },removeOldStatesInInviteList: function() {
        clearTimeout(serverguide.invitesTimeout);
        serverguide.invitesTimeout = setTimeout(function() {
            if (!$("#serverguide-invite-list").length) {
                return false;
            }
            var state = $S("serverguide-invite-list").getState();
            for (var i in state.invites) {
                var u = state.invites[i];
                if (u.inviteStatus == "1" || u.inviteStatus == "3") {
                    $("#serverguide-invite-item-" + u.userId).slideToggle();
                    state.invites.splice(i, 1);
                }
            }
            var ls = $.jStorage.get("serverguide-invites", {});
            ls[state.serverGuid] = state;
            $.jStorage.set("serverguide-invites", ls);
            $S("serverguide-invite-list").setState(state);
            $S("serverguide-invite-list").refresh();
        }, 5555);
    },resetFilters: function(element) {
        $.jStorage.set("serverguide-filter-localstorage", "");
        $(".serverguide-selectable.serverguide-include").removeClass(".serverguide-include").click();
        $("#serverguide-search-input").val("");
        S.globalContext.searchQuery = "";
        var resetUrl = $(element).attr("reseturl");
        $S("serverguide-filterstring").update({searchQuery: false});
        base.redirect(resetUrl);
    },data: {},setFilterDescription: function() {
        $("#serverguide-filter-saved").hide();
        serverguide.data.gameexpansions = $(".serverguide-selectable[filter=gameexpansions]").filter(".serverguide-include").map(function() {
            return $(this).children("div").children("img").attr("alt");
        }).toArray();
        serverguide.data.maxGameexpansions = $(".serverguide-selectable[filter=gameexpansions]").length;
        serverguide.data.gamemodes = $(".serverguide-selectable[filter=gamemodes]").filter(".serverguide-include").map(function() {
            return $(this).children("span").text();
        }).toArray();
        serverguide.data.maxGamemodes = $(".serverguide-selectable[filter=gamemodes]").length;
        serverguide.data.regions = $(".serverguide-selectable[filter=regions]").filter(".serverguide-include").map(function() {
            return $(this).children("span").text();
        }).toArray();
        serverguide.data.maxRegions = $(".serverguide-selectable[filter=regions]").length;
        serverguide.data.gamepresets = $(".serverguide-selectable[filter=gamepresets]").filter(".serverguide-include").map(function() {
            return $(this).children("span").text();
        }).toArray();
        serverguide.data.maxGamepresets = $(".serverguide-selectable[filter=presets]").length;
        serverguide.data.ranked = $(".serverguide-selectable[filter=ranked]").filter(".serverguide-include").map(function() {
            return $(this).attr("value");
        }).toArray();
        serverguide.data.maxRanked = $(".serverguide-selectable[filter=ranked]").length;
        serverguide.data.evented = $(".serverguide-selectable[filter=evented]").filter(".serverguide-include").map(function() {
            return $(this).attr("value");
        }).toArray();
        serverguide.data.maxEvented = $(".serverguide-selectable[filter=evented]").length;
        serverguide.data.punkbuster = $(".serverguide-selectable[filter=punkbuster]").filter(".serverguide-include").map(function() {
            return $(this).attr("value");
        }).toArray();
        serverguide.data.maxPunkbuster = $(".serverguide-selectable[filter=punkbuster]").length;
        serverguide.data.maps = $(".serverguide-selectable[filter=maps]").filter(".serverguide-include").map(function() {
            return $(this).children("span").text();
        }).toArray();
        serverguide.data.slots = $("input[name=slots]").siblings(".serverguide-include").map(function() {
            var returnValue = $(this).children("span").text();
            return returnValue;
        }).toArray();
        serverguide.data.maxSlots = $(".serverguide-selectable[filter=slots]").length;
        if ($("#serverguide-filter-form").length) {
            $.jStorage.set("serverguide-filter-localstorage", S.encodeJSON(serverguide.data));
            $S("serverguide-filterstring").update(serverguide.data);
        }
    },initSearchField: function() {
        var q = $("#serverguide-search-input");
        var clear = function() {
            if (q.val() == q.attr("title")) {
                q.val("");
            }
        };
        var submitfilter = function() {
            $("#serverguide-filter-saved").stop(true, true).fadeIn(200);
            clear();
        };
        var fill = function() {
            if (q.val() == "") {
                q.val(q.attr("title"));
            }
        };
        q.pageBind("focus", clear);
        q.pageBind("blur", function() {
            serverguide.setFilterDescription();
            fill;
        });
        $("#serverguide-filter-form").pageBind("submit", submitfilter);
        fill();
    },initPlugin: function() {
        if ($("#serverguide-plugin-not-found")) {
            if (launcher.getInstance()) {
                serverguide._triggerEvent("plugin", [true]);
            } else {
                serverguide._triggerEvent("plugin", [false]);
            }
        }
    },filterSurfaceTimeout: 0,initGuideFilters: function() {
        $("#serverguide-search-input").pageBind("focus", function() {
            $(".serverguide-apply-filter-button").attr("disabled", false);
        });
        $("#serverguide-filtertoggle").pageBind("click", function(e) {
            if ($(e.target).hasClass("serverguide-reset-filter-button")) {
                serverguide.resetFilters(e.target);
                return false;
            }
            if (!$(e.target).is("input[type='submit']") && !$(e.target).hasClass("serverguide-apply-filter-button") && !$(e.target).parent().hasClass("serverguide-apply-filter-button")) {
                var elements = $("#serverguide-filters, #serverguide-apply-filters");
                if ($("#serverguide-filters").is(":visible")) {
                    $("#serverguide-filters").hide();
                    $("#serverguide-apply-filters").hide();
                    $("#serverguide-filtertoggle").addClass("serverguide-filtertoggle-contracted").removeClass("serverguide-filtertoggle-expanded");
                    $("#serverguide-filter-form").addClass("serverguide-filter-form-contracted");
                    $("#serverguide-change-link").show();
                    $.jStorage.set("serverfilter-hidden", true);
                } else {
                    $("#serverguide-filters").show();
                    $("#serverguide-apply-filters").show();
                    $("#serverguide-filtertoggle").removeClass("serverguide-filtertoggle-contracted").addClass("serverguide-filtertoggle-expanded");
                    $("#serverguide-filter-form").removeClass("serverguide-filter-form-contracted");
                    $("#serverguide-change-link").hide();
                    $("#serverguide-search-input").focus();
                    $.jStorage.deleteKey("serverfilter-hidden");
                }
            }
        });
        serverguide.setFilterDescription();
        $("input[type=hidden]").pageLive("newvalue", function(e) {
            serverguide.setFilterDescription();
        });
        $(".serverguide-selectable").each(function() {
            var filter = $(this).attr("filter");
            if (!filter) {
                return;
            }
            $(this).pageBind("mousedown", function() {
                if ($(this).hasClass("serverguide-disabled")) {
                    return;
                }
                var isSelected = $(this).hasClass("serverguide-include");
                if (isSelected) {
                    $(this).removeClass("serverguide-include").addClass("serverguide-exclude");
                } else {
                    $(this).removeClass("serverguide-exclude").addClass("serverguide-include");
                }
                var value = $(this).attr("value");
                var inp = $("input[name=" + filter + "]");
                var elements = inp.val().split("|");
                if (inp.val() == "") {
                    elements = [];
                }
                S.debug("isSelected: " + isSelected);
                if (isSelected) {
                    var index = $.inArray(value, elements);
                    S.debug("value: " + value + " elements: " + elements + " index: " + index);
                    if (index > -1) {
                        elements.splice(index, 1);
                    }
                } else {
                    elements.push(value);
                }
                inp.val(elements.join("|"));
                if (filter == "gamemodes") {
                    var noGameModesSelected = true;
                    $(".serverguide-selectable[filter='gamemodes']").each(function() {
                        if ($(this).hasClass("serverguide-include")) {
                            noGameModesSelected = false;
                        }
                    });
                    if (noGameModesSelected) {
                        $(".serverguide-filter-gamemode input[name='gamemodes']").val("");
                        $(".serverguide-selectable[filter='maps']").removeClass("serverguide-disabled");
                    }
                    if (!noGameModesSelected) {
                        $(".serverguide-selectable[filter='maps']").each(function() {
                            var mapmode = false;
                            var mapmodes = $(this).attr("modes").toLowerCase();
                            for (i = 0; i <= elements.length; i++) {
                                if (elements[i] === undefined) {
                                    continue;
                                }
                                if (mapmodes.indexOf(elements[i].toLowerCase()) > -1) {
                                    mapmode = true;
                                }
                            }
                            if (mapmode) {
                                $(this).removeClass("serverguide-disabled");
                            } else {
                                $(this).addClass("serverguide-disabled");
                            }
                        });
                    }
                }
                var self = $(this);
                clearTimeout(serverguide.filterSurfaceTimeout);
                serverguide.filterSurfaceTimeout = setTimeout(function() {
                    serverguide.setFilterDescription();
                    if (self.attr("value") == "bfbc2" || self.attr("value") == "bfbc2nam") {
                        serverguide.greyOutGameSelectionMaps();
                    }
                }, ($.browser.msie ? 800 : 200));
            });
        });
        $("#serverguide-join-random").pageBind("click", function() {
            var itemCount = $("#serverguide-result .serverguide-cell-join form").size();
            var idx = Math.floor(Math.random() * itemCount);
            $("#serverguide-server-" + idx + " .serverguide-cell-join form input[type=submit]").click();
        });
    },greyOutGameSelectionMaps: function() {
        var bc2 = $(".serverguide-selectable[value='bfbc2']").hasClass("serverguide-include");
        var nam = $(".serverguide-selectable[value='bfbc2nam']").hasClass("serverguide-include");
        $("[filter='maps']").removeClass("serverguide-disabled");
        if (bc2 && !nam) {
            $(".serverguide-include[value*='NAM']").trigger("click");
            $("div[value*='NAM']").addClass("serverguide-disabled").removeClass("serverguide-include").addClass("serverguide-exclude");
        }
        if (!bc2 && nam) {
            $(".serverguide-include[filter='maps']:not([value*='NAM'])").trigger("click");
            $("[filter='maps']:not([value*='NAM'])").addClass("serverguide-disabled").removeClass("serverguide-include").addClass("serverguide-exclude");
            $("div[value*='NAM']").removeClass("serverguide-disabled");
        }
        var maps = "";
        $(".serverguide-selectable[filter='maps']").filter(".serverguide-include").each(function() {
            maps = maps + "|" + $(this).attr("value");
        });
        $("input[name='maps']").val(maps);
        serverguide.setFilterDescription();
        serverguide.disableNotOwnedExpansion();
    },disableNotOwnedExpansion: function() {
        var platforms = S.globalContext.staticContext["platforms"];
        var gameExpansion = S.globalContext.staticContext["gameExpansions"];
        var userId = S.globalContext["session"]["userId"];
        if (userId != null && !base.ownsGameExpansion(gameExpansion.BFBC2NAM, platforms.PC)) {
            $("div[filter='gameexpansions'][value='bfbc2nam']").addClass("serverguide-disabled");
            $("div[value*='NAM']").addClass("serverguide-disabled");
        }
    },showQueryServerResult: function(game, server) {
        S.debug("QueryServerResults: " + server);
    },inviteToServer: function(userId, guid) {
        var url = "/comcenter/inviteToServer/" + userId + "/" + guid;
        base.ajaxPostJson(url, function(success, response) {
            if (success) {
                S.debug(response);
            }
        });
    },update_server_scoreboard: function() {
        var guid = $("#server-guid").attr("value");
        var url = $("#serverguide-show-url").val().replace("%GUID%", guid);
        base.ajaxGetJson(url, function(success, response) {
            if (success) {
                var serverinfo = response["message"]["SERVER_INFO"];
                $S("serverguide-scoreboard").update({"scoreboard": serverinfo});
            }
        });
    },live_update_server_scoreboard: function() {
        serverguide.update_server_scoreboard();
        active_scoreboard = setTimeout(serverguide.live_update_server_scoreboard, 5000);
    },stop_update_server_scoreboard: function() {
        clearTimeout(active_scoreboard);
    },registerForEvent: function(event, callback) {
        jQuery("#esnlaunch_container").pageBind("bf.serverguide." + event, callback);
    },_triggerEvent: function(event, data) {
        jQuery("#esnlaunch_container").triggerHandler("bf.serverguide." + event, data);
    }};
var session = {onPageShow: function() {
    },init: function(template) {
    }};
var settings = {setCaptureMode: function(state) {
        $(".voice-setting-mode").removeClass("active");
        $(".voice-settings-voice-info").hide();
        if (state == ESN.Sonar.CAPTURE_MODE_PUSH_TO_TALK) {
            $("#voice-settings-mode-push").addClass("active");
            $("#voice-settings-mode-push-info").show();
        } else {
            $("#voice-settings-mode-voice").addClass("active");
            $("#voice-settings-mode-voice-info").show();
        }
        base.showReceipt("Capture mode updated!");
    },setSettingsAfterSonarInit: function() {
        ESN.Sonar.addAudioCallback();
        try {
            $("#voice-sensitivity-slider").slider("value", 100 - (ESN.Sonar.getVoiceSensitivity() * 100));
            $("#voice-volume-slider").slider("value", ESN.Sonar.getCaptureVolume() * 100);
            $("#voice-speaker-volumn-slider").slider("value", ESN.Sonar.getVolume() * 100);
        } catch (e) {
            S.debug("Could not set sliders...");
        }
        $("#settings-voice-toggle-block").attr("checked", ESN.Sonar.client.blockPushToTalkKey());
        var voiceActivation = ESN.Sonar.getVoiceActivationEnabled();
        if (voiceActivation) {
            $(".voiceSetMode:first").addClass("selected");
            $("#voice-settings-mode-voice-info").show();
        } else {
            $(".voiceSetMode:last").addClass("selected");
            $("#voice-settings-mode-push-info").show();
        }
        ESN.Sonar.debug("Setting settings");
        $("#voice-settings-ppt-key").html(ESN.Sonar.getPushToTalkKey());
        var devices = ESN.Sonar.getPlaybackDevices();
        var currentDevice = ESN.Sonar.getCurrentPlaybackDevice();
        for (var i in devices) {
            if (devices[i].deviceId == currentDevice) {
                devices[i].active = true;
            }
        }
        $S("playbackDevices").update({"devices": devices});
        var devices = ESN.Sonar.getCaptureDevices();
        var currentDevice = ESN.Sonar.getCurrentCaptureDevice();
        for (var i = 0; i < devices.length; i++) {
            if (devices[i].deviceId == currentDevice) {
                devices[i].active = true;
            }
        }
        $S("captureDevices").update({"devices": devices});
        var loopBack = ESN.Sonar.getAudioLoopbackEnabled();
        $(".sonar-audio-checkbox").attr("checked", loopBack);
    },onPageShow: function() {
        $(function() {
            if (!ESN.Sonar.ensureConnectedToServer(function() {
                S.debug("Sonar started");
                setTimeout(settings.setSettingsAfterSonarInit, 1000);
            })) {
                S.error("Could not start Voice in settings.");
            }
        });
        $(".voiceSetMode").pageBind("click", function(e) {
            if ($(this).attr("data-mode") == ESN.Sonar.CAPTURE_MODE_VOICE_ACTIVATION) {
                ESN.Sonar.setCaptureMode(ESN.Sonar.CAPTURE_MODE_VOICE_ACTIVATION);
            }
            if ($(this).attr("data-mode") == ESN.Sonar.CAPTURE_MODE_PUSH_TO_TALK) {
                ESN.Sonar.setCaptureMode(ESN.Sonar.CAPTURE_MODE_PUSH_TO_TALK);
            }
            $(".voiceSetMode").removeClass("selected");
            $(this).addClass("selected");
        });
        $("#settings-voice-toggle-block").pageBind("change", function() {
            var checked = $(this).attr("checked");
            S.debug("Setting blocked to: " + checked);
            ESN.Sonar.client.blockPushToTalkKey(checked);
        });
        $("#voice-change-ppt-button").pageBind("click", function() {
            $("#voice-settings-ppt-key").html("Click a key or combination to set. (Esc to cancel)");
            $(".sonar-ppt-status").removeClass("active");
            setTimeout(function() {
                ESN.Sonar.catchNextKeyAndSetAsPushToTalk();
            }, 100);
        });
        $("#voice-volume-slider").slider({slide: function(event, ui) {
                var setMicVolume = parseFloat($(ui).attr("value")) / 100;
                ESN.Sonar.setCaptureVolume(setMicVolume);
            },animate: true,max: 100,min: 0,range: "min",value: ESN.Sonar.getCaptureVolume()});
        $("#voice-sensitivity-slider").slider({slide: function(event, ui) {
                var value = (100 - parseInt($(ui).attr("value"))) / 100;
                S.info("set value" + value);
                ESN.Sonar.setVoiceSensitivity(value);
            },animate: true,max: 100,min: 0,value: ESN.Sonar.getVoiceSensitivity()});
        $("#voice-speaker-volumn-slider").slider({slide: function(event, ui) {
                var setMicVolume = parseFloat($(ui).attr("value"));
                ESN.Sonar.setVolume(setMicVolume / 100);
                if ($(".comcenter-sonar-slider").length) {
                    $(".comcenter-sonar-slider").slider("value", setMicVolume);
                }
            },animate: true,max: 100,min: 0,value: 0,range: "min"});
        $(".settings-uninstall-venice").pageBind("click", function() {
            patcher.launch(games.BF3, "-uninstall -shutdown");
        });
        $(".settings-install-venice").pageBind("click", function(installDoneCallback) {
            patcher.installGame(games.BF3, installDoneCallback);
        });
    },init: function(template) {
        launcher.isGameInstalled(games.BF3, function(installed) {
            if (installed) {
                $(".settings-uninstall-venice").show();
            } else {
                $(".settings-install-venice").show();
            }
        });
    },gotAudio: function(v) {
        $(".voice-sending-status").attr("className", v.xmit ? "voice-sending-status active" : "voice-sending-status not-sending");
        var avg = 0 + parseInt(v.avgAmp);
        var voiceHeight = avg * 0.044;
        if (voiceHeight > 314) {
            voiceHeight = 314;
        }
        var voiceSens = ESN.Sonar.getVoiceSensitivity();
        sensAmp = ((100 - voiceSens) * 80) * 0.044;
        if (v.xmit && v.vaState && voiceHeight < sensAmp) {
        }
        $(".voice-settings-volume-bar").css("width", voiceHeight);
    }};
var sonar = {init: function(template) {
        Push.bind("UserJoinedChannel", function(e) {
            comcenter.partyUpdateChannel(e.data.user.userId, e.data.channel.channelId);
            S.debug("Done with UserJoinedChannel");
            return false;
        });
        Push.bind("YouJoinedChannel", function(e) {
            S.debug("Got YouJoinedChannel");
            S.debug(e.data);
            if (comcenter.refreshCall) {
                clearTimeout(comcenter.refreshCall);
                comcenter.refreshCall = 0;
            }
            if (!S.globalContext.userContext.voice) {
                S.globalContext.userContext.voice = {};
            }
            S.globalContext.userContext.voice.channel = e.data.channel;
            comcenter.partyUpdateChannel(S.globalContext.session.user.userId, e.data.channel.channelId);
            $S("comcenter-party-voice").refresh();
            $("#comcenter-area").removeClass("comcenter-not-in-voice");
            comcenter.updatePPTkey();
            S.debug("Done with you joined channel!");
        });
        Push.bind("UserLeftChannel", function(e) {
            comcenter.partyUpdateChannel(e.data.user.userId, 0);
        });
    }};
var store = {onPageShow: function() {
    },init: function(template) {
    }};
var teammatch = {count: 0,onPageShow: function() {
    },init: function(template) {
        Push.bind("TeamMatchUpdate", function(event) {
            $S("match").update({match: event.data});
        });
        Push.bind("TeamMatchEvents", function(event) {
            var list = $(".teammatch-show-events-list");
            var doScroll = (list.scrollTop() < 10);
            var personaTeams = $S("teammatch-personateams").getState()["personaTeams"];
            var html = "";
            for (var i in event.data) {
                var e = event.data[i];
                e.event = S.parseJSON(e.event);
                html = $S("teammatch.matchevent").render({"matchevent": e,"personaTeams": personaTeams}) + html;
            }
            $(html).prependTo($(".teammatch-show-events-list"));
            if (doScroll) {
                list.scrollTop(0);
            }
        });
        Push.bind("TeamMatchKillGame", function(event) {
            S.log("Team match is over, killing game " + event.data);
            launcher._killGame(event.data, 0, function() {
            });
        });
    },joinServer: function(gameUrl) {
        S.log("Joining server: " + gameUrl);
        joinflow.joinServerByUrl(gameUrl, null, function(foundServer) {
        });
    }};
var terms = {init: function(template) {
    }};
var viewcontent = {onPageShow: function() {
        var feeds = $("#feedContent");
        if (!feeds.length) {
            return;
        }
        var focusItem = $("#comments-for-" + S.globalContext.feedId + "_" + S.globalContext.commentId);
        $(".viewcontent-comments #comments-for-" + S.globalContext.feedId).children().each(function(x, item) {
            var surf = $S(item.id).getState();
            if (surf.comment.hidden) {
                $('<span class="viewcontent-state">State: Hidden</span>').insertBefore($(":eq(1)", item));
                $(item).find(".feed-comment-body>i").html(surf.comment.body);
            } else {
                $('<span class="viewcontent-state">State: Visible</span>').insertBefore($(":eq(1)", item));
            }
        });
        if (focusItem.length) {
            $(focusItem.children()[0]).css("border", "1px solid #f00").css("margin-bottom", "1px");
        }
    }};
var wall = {onPageShow: function() {
    },init: function(template) {
    }};
gadgetsLocale = {"kititems": {"ID_P_INAME_M67": {"name": "ID_P_INAME_M67","desc": "ID_P_IDESC_M67","image": "m67-grenade","image_path": "UI/Art/Persistence/Weapons/Fancy/m67 grenade"},"ID_P_INAME_UGS": {"name": "ID_P_INAME_UGS","desc": "ID_P_IDESC_UGS","image": "tugs","image_path": "UI/Art/Persistence/KitItem/Fancy/tugs"},"ID_P_INAME_SOFLAM": {"name": "ID_P_INAME_SOFLAM","desc": "ID_P_IDESC_SOFLAM","image": "soflam---beta","image_path": "UI/Art/Persistence/KitItem/soflam - Beta"},"ID_P_INAME_CLAYMORE": {"name": "ID_P_INAME_CLAYMORE","desc": "ID_P_IDESC_CLAYMORE","image": "claymore","image_path": "UI/Art/Persistence/KitItem/Fancy/claymore"},"ID_P_INAME_MORTAR": {"name": "ID_P_INAME_MORTAR","desc": "ID_P_IDESC_MORTAR","image": "m224-mortar---beta","image_path": "UI/Art/Persistence/KitItem/m224 mortar - Beta"},"ID_P_INAME_C4": {"name": "ID_P_INAME_C4","desc": "ID_P_IDESC_C4","image": "c4","image_path": "UI/Art/Persistence/KitItem/Fancy/c4"},"ID_P_INAME_MAV": {"name": "ID_P_INAME_MAV","desc": "ID_P_IDESC_MAV","image": "mav","image_path": "UI/Art/Persistence/KitItem/Fancy/mav"},"ID_P_INAME_MINE": {"name": "ID_P_INAME_MINE","desc": "ID_P_IDESC_MINE","image": "mine","image_path": "UI/Art/Persistence/KitItem/Fancy/mine"},"ID_P_INAME_DEFIB": {"name": "ID_P_INAME_DEFIB","desc": "ID_P_IDESC_DEFIB","image": "defib","image_path": "UI/Art/Persistence/KitItem/Fancy/defib"},"ID_P_INAME_EOD": {"name": "ID_P_INAME_EOD","desc": "ID_P_IDESC_EOD","image": "eod","image_path": "UI/Art/Persistence/KitItem/Fancy/eod"}},"weaponaccessory": {"ID_P_ANAME_SGA_SLUG": {"name": "ID_P_ANAME_SGA_SLUG","desc": "ID_P_ADESC_SGA_SLUG","image": "placeholder","image_path": ""},"ID_P_ANAME_FOREGRIP": {"name": "ID_P_ANAME_FOREGRIP","desc": "ID_P_ADESC_FOREGRIP","image": "foregrip","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/foregrip"},"ID_P_ANAME_RX01": {"name": "ID_P_ANAME_RX01","desc": "ID_P_ADESC_RX01","image": "rx01","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/rx01"},"ID_P_ANAME_PKS": {"name": "ID_P_ANAME_PKS","desc": "ID_P_ADESC_PKS","image": "pks07","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/pks07"},"ID_P_ANAME_FLECHETTE": {"name": "ID_P_ANAME_FLECHETTE","desc": "ID_P_ADESC_FLECHETTE","image": "placeholder","image_path": ""},"ID_P_ANAME_BARREL": {"name": "ID_P_ANAME_BARREL","desc": "ID_P_ADESC_BARREL","image": "heavybarrel","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/heavybarrel"},"ID_P_ANAME_SLUG": {"name": "ID_P_ANAME_SLUG","desc": "ID_P_ADESC_SLUG","image": "placeholder","image_path": ""},"ID_P_ANAME_BOLT": {"name": "ID_P_ANAME_BOLT","desc": "ID_P_ADESC_BOLT","image": "straightbolt","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/straightbolt"},"ID_P_ANAME_RIFLE": {"name": "ID_P_ANAME_RIFLE","desc": "ID_P_ADESC_RIFLE","image": "riflescope","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/riflescope"},"ID_P_ANAME_PKA": {"name": "ID_P_ANAME_PKA","desc": "ID_P_ADESC_PKA","image": "pka","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/pka"},"ID_P_ANAME_PKAS": {"name": "ID_P_ANAME_PKAS","desc": "ID_P_ADESC_PKAS","image": "pkas","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/pkas"},"ID_P_ANAME_EOTECH": {"name": "ID_P_ANAME_EOTECH","desc": "ID_P_ADESC_EOTECH","image": "eotech","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/eotech"},"ID_P_ANAME_LIGHT": {"name": "ID_P_ANAME_LIGHT","desc": "ID_P_ADESC_LIGHT","image": "flashlight","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/flashlight"},"ID_P_ANAME_SUPPRESS": {"name": "ID_P_ANAME_SUPPRESS","desc": "ID_P_ADESC_SUPPRESS","image": "flashsuppressor","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/flashsuppressor"},"ID_P_ANAME_LASER": {"name": "ID_P_ANAME_LASER","desc": "ID_P_ADESC_LASER","image": "targetpointer","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/targetpointer"},"ID_P_ANAME_IRNV": {"name": "ID_P_ANAME_IRNV","desc": "ID_P_ADESC_IRNV","image": "irnv","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/irnv"},"ID_P_ANAME_BIPOD": {"name": "ID_P_ANAME_BIPOD","desc": "ID_P_ADESC_BIPOD","image": "bipod","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/bipod"},"ID_P_ANAME_KOBRA": {"name": "ID_P_ANAME_KOBRA","desc": "ID_P_ADESC_KOBRA","image": "kobra","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/kobra"},"ID_P_ANAME_BALL": {"name": "ID_P_ANAME_BALL","desc": "ID_P_ADESC_BALL","image": "ballistic","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/ballistic"},"ID_P_ANAME_SILENCER": {"name": "ID_P_ANAME_SILENCER","desc": "ID_P_ADESC_SILENCER","image": "soundsuppressor","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/soundsuppressor"},"ID_P_ANAME_PSO": {"name": "ID_P_ANAME_PSO","desc": "ID_P_ADESC_PSO","image": "pso","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/pso"},"ID_P_ANAME_ACOG": {"name": "ID_P_ANAME_ACOG","desc": "ID_P_ADESC_ACOG","image": "acog","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/acog"},"ID_P_ANAME_SNIPERRIFLE": {"name": "ID_P_ANAME_SNIPERRIFLE","desc": "ID_P_ADESC_SNIPERRIFLE","image": "riflescope","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/riflescope"},"ID_P_ANAME_MAG": {"name": "ID_P_ANAME_MAG","desc": "ID_P_ADESC_MAG","image": "ext_mag01","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/ext_mag01"},"ID_P_ANAME_FRAG": {"name": "ID_P_ANAME_FRAG","desc": "ID_P_ADESC_FRAG","image": "placeholder","image_path": ""},"ID_P_ANAME_M145": {"name": "ID_P_ANAME_M145","desc": "ID_P_ADESC_M145","image": "m145","image_path": "UI/Art/Persistence/WeaponAccessory/Fancy/m145"},"ID_P_ANAME_SGA_FLECH": {"name": "ID_P_ANAME_SGA_FLECH","desc": "ID_P_ADESC_SGA_FLECH","image": "placeholder","image_path": ""}},"soldierspecializations": {"ID_P_SNAME_Sprint2": {"name": "ID_P_SNAME_Sprint2","desc": "ID_P_SDESC_Sprint2","image": "sprint2","image_path": "UI/art/Persistence/Specializations/Fancy/Sprint2"},"ID_P_SNAME_Expl2": {"name": "ID_P_SNAME_Expl2","desc": "ID_P_SDESC_Expl2","image": "explosives2","image_path": "UI/art/Persistence/Specializations/Fancy/Explosives2"},"ID_P_SNAME_Expl": {"name": "ID_P_SNAME_Expl","desc": "ID_P_SDESC_Expl","image": "explosives","image_path": "UI/art/Persistence/Specializations/Fancy/Explosives"},"ID_P_SNAME_Sprint": {"name": "ID_P_SNAME_Sprint","desc": "ID_P_SDESC_Sprint","image": "sprint","image_path": "UI/art/Persistence/Specializations/Fancy/Sprint"},"ID_P_SNAME_Gren": {"name": "ID_P_SNAME_Gren","desc": "ID_P_SDESC_Gren","image": "grenades","image_path": "UI/art/Persistence/Specializations/Fancy/Grenades"},"ID_P_SNAME_SuppRes2": {"name": "ID_P_SNAME_SuppRes2","desc": "ID_P_SDESC_SuppRes2","image": "supprresist2","image_path": "UI/art/Persistence/Specializations/Fancy/SupprResist2"},"ID_P_SNAME_Clips": {"name": "ID_P_SNAME_Clips","desc": "ID_P_SDESC_Clips","image": "ammo","image_path": "UI/art/Persistence/Specializations/Fancy/Ammo"},"ID_P_SNAME_Suppr": {"name": "ID_P_SNAME_Suppr","desc": "ID_P_SDESC_Suppr","image": "suppression","image_path": "UI/art/Persistence/Specializations/Fancy/Suppression"},"ID_P_SNAME_Gren2": {"name": "ID_P_SNAME_Gren2","desc": "ID_P_SDESC_Gren2","image": "grenades2","image_path": "UI/art/Persistence/Specializations/Fancy/Grenades2"},"ID_P_SNAME_Clips2": {"name": "ID_P_SNAME_Clips2","desc": "ID_P_SDESC_Clips2","image": "ammo2","image_path": "UI/art/Persistence/Specializations/Fancy/Ammo2"},"ID_P_SNAME_ExplRes": {"name": "ID_P_SNAME_ExplRes","desc": "ID_P_SDESC_ExplRes","image": "explresist","image_path": "UI/art/Persistence/Specializations/Fancy/ExplResist"},"ID_P_SNAME_Suppr2": {"name": "ID_P_SNAME_Suppr2","desc": "ID_P_SDESC_Suppr2","image": "suppression2","image_path": "UI/art/Persistence/Specializations/Fancy/Suppression2"},"ID_P_SNAME_ExplRes2": {"name": "ID_P_SNAME_ExplRes2","desc": "ID_P_SDESC_ExplRes2","image": "explresist2","image_path": "UI/art/Persistence/Specializations/Fancy/ExplResist2"},"ID_P_SNAME_SuppRes": {"name": "ID_P_SNAME_SuppRes","desc": "ID_P_SDESC_SuppRes","image": "supprresist","image_path": "UI/art/Persistence/Specializations/Fancy/SupprResist"}},"vehicles": {"jaA10": {"label": "Vehicle Air Jet Attack A10","name": "ID_P_VNAME_A10","desc": "ID_P_VDESC_A10","image": "a10","image_path": "UI/Art/Persistence/Vehicle/A10"},"trITV": {"label": "Vehicle Jeep Growler ITV","name": "ID_P_VNAME_GROWLER","desc": "ID_P_VDESC_GROWLER","image": "growler","image_path": "UI/Art/Persistence/Vehicle/GROWLER"},"shAH6": {"label": "Vehicle Air Helicopter Scout AH6","name": "ID_P_VNAME_AH6","desc": "ID_P_VDESC_AH6","image": "ah6","image_path": "UI/Art/Persistence/Vehicle/AH6"},"mbtT90": {"label": "Vehicle MBT T90","name": "ID_P_VNAME_T90","desc": "ID_P_VDESC_T90","image": "t90","image_path": "UI/Art/Persistence/Vehicle/T90"},"ifvBMP": {"label": "Vehicle IFV BMP","name": "ID_P_VNAME_BMP2","desc": "ID_P_VDESC_BMP2","image": "bmp2","image_path": "UI/Art/Persistence/Vehicle/BMP2"},"trVDV": {"label": "Vehicle Jeep VDV","name": "ID_P_VNAME_VDV","desc": "ID_P_VDESC_VDV","image": "vdv","image_path": "UI/Art/Persistence/Vehicle/VDV"},"atTOW": {"label": "Stationary AT TOW","name": "ID_P_VNAME_TOW","desc": "ID_P_VDESC_TOW","image": "tow","image_path": "UI/Art/Persistence/Vehicle/TOW"},"saaCRAM": {"label": "Stationary AA Centurion C-RAM","name": "ID_P_VNAME_CENTURION","desc": "ID_P_VDESC_CENTURION","image": "centurion","image_path": "UI/Art/Persistence/Vehicle/CENTURION"},"trHum": {"label": "Vehicle Jeep Humvee","name": "ID_P_VNAME_HUMVEE","desc": "ID_P_VDESC_HUMVEE","image": "humvee","image_path": "UI/Art/Persistence/Vehicle/HUMVEE"},"saaPant": {"label": "Stationary AA Pantsir-S1","name": "ID_P_VNAME_PANTSIR","desc": "ID_P_VDESC_PANTSIR","image": "pantsir","image_path": "UI/Art/Persistence/Vehicle/PANTSIR"},"sKorn": {"label": "Stationary AT Kornet","name": "ID_P_VNAME_KORNET","desc": "ID_P_VDESC_KORNET","image": "kornet","image_path": "UI/Art/Persistence/Vehicle/KORNET"},"trRIB": {"label": "Vehicle Transport RIB Boat","name": "ID_P_VNAME_RIB","desc": "ID_P_VDESC_RIB","image": "rhib","image_path": "UI/Art/Persistence/Vehicle/RHIB"},"ahAH1Z": {"label": "Vehicle Air Helicopter Attack AH1Z","name": "ID_P_VNAME_AH1Z","desc": "ID_P_VDESC_AH1Z","image": "ah1z","image_path": "UI/Art/Persistence/Vehicle/AH1Z"},"trUH1": {"label": "Vehicle Transport UH-1Y Venom","name": "ID_P_VNAME_UH1Y","desc": "ID_P_VDESC_UH1Y","image": "venom","image_path": "UI/Art/Persistence/Vehicle/VENOM"},"aaLAV": {"label": "Vehicle AA LAV-AD","name": "ID_P_VNAME_LAVAD","desc": "ID_P_VDESC_LAVAD","image": "lav-ad","image_path": "UI/Art/Persistence/Vehicle/LAV-AD"},"trVod": {"label": "Vehicle Jeep Vodnik","name": "ID_P_VNAME_VODNIK","desc": "ID_P_VDESC_VODNIK","image": "vodnik","image_path": "UI/Art/Persistence/Vehicle/VODNIK"},"jaSU25": {"label": "Vehicle Air Jet Attack SU25","name": "ID_P_VNAME_SU39","desc": "ID_P_VDESC_SU39","image": "su39","image_path": "UI/Art/Persistence/Vehicle/SU39"},"ahMi28": {"label": "Vehicle Air Helicopter Attack Mi28","name": "ID_P_VNAME_MI28","desc": "ID_P_VDESC_MI28","image": "mi28","image_path": "UI/Art/Persistence/Vehicle/MI28"},"aa9k22": {"label": "Vehicle AA 9K22 Tunguska","name": "ID_P_VNAME_9K22","desc": "ID_P_VDESC_9K22","image": "tunguska","image_path": "UI/Art/Persistence/Vehicle/TUNGUSKA"},"trKA60": {"label": "Vehicle Transport KA-60","name": "ID_P_VNAME_KA60","desc": "ID_P_VDESC_KA60","image": "ka60","image_path": "UI/Art/Persistence/Vehicle/KA60"},"mbtM1A": {"label": "Vehicle MBT M1 Abrams","name": "ID_P_VNAME_M1ABRAMS","desc": "ID_P_VDESC_M1ABRAMS","image": "m1a2","image_path": "UI/Art/Persistence/Vehicle/M1A2"},"shz11": {"label": "Vehicle Air Helicopter Scout z11","name": "ID_P_VNAME_Z11","desc": "ID_P_VDESC_Z11","image": "z11","image_path": "UI/Art/Persistence/Vehicle/Z11"},"jfF18": {"label": "Vehicle Air Jet Fighter F18","name": "ID_P_VNAME_F18","desc": "ID_P_VDESC_F18","image": "f18","image_path": "UI/Art/Persistence/Vehicle/F18"},"jfSu35": {"label": "Vehicle Air Jet Fighter SU35","name": "ID_P_VNAME_SU35","desc": "ID_P_VDESC_SU35","image": "su35","image_path": "UI/Art/Persistence/Vehicle/SU35"},"trAAV": {"label": "Vehicle Transport AAV-7A1","name": "ID_P_VNAME_AAV","desc": "ID_P_VDESC_AAV","image": "aav","image_path": "UI/Art/Persistence/Vehicle/AAV"},"ifvLAV": {"label": "Vehicle IFV LAV-25","name": "ID_P_VNAME_LAV25","desc": "ID_P_VDESC_LAV25","image": "lav-25","image_path": "UI/Art/Persistence/Vehicle/LAV-25"}},"weapons": {"wahUSG": {"label": "Underslung Shotgun","name": "ID_P_WNAME_M26Mass","desc": "ID_P_WDESC_M26Mass","ammo": "5 [12 gauge]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m26mass","icon": "m26mass_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m26mass"},"pM1911L": {"label": "M1911 LIT","name": "ID_P_WNAME_M1911LIT","desc": "ID_P_WDESC_M1911LIT","ammo": "9 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m1911","icon": "m1911_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m1911"},"pM1911S": {"label": "M1911 SILENCED","name": "ID_P_WNAME_M1911SILENCED","desc": "ID_P_WDESC_M1911SILENCED","ammo": "9 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m1911","icon": "m1911_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m1911"},"sgM1014": {"label": "M1014","name": "ID_P_WNAME_M1014","desc": "ID_P_WDESC_M1014","ammo": "4 [12 gauge]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m1014","icon": "m1014_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m1014"},"pTaur": {"label": "Taurus 44","name": "ID_P_WNAME_Taurus44","desc": "ID_P_WDESC_Taurus44","ammo": "6 [.44 Magnum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "taurus44","icon": "taurus44_small","image_path": "UI/Art/Persistence/Weapons/Fancy/taurus44"},"caM4": {"label": "M4A1","name": "ID_P_WNAME_M4A1","desc": "ID_P_WDESC_M4A1","ammo": "30 [5.56x45mm NATO]","rateOfFire": "800","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "m4a1","icon": "m4a1_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m4a1"},"pM1911T": {"label": "M1911 Tactical","name": "ID_P_WNAME_M1911TACTICAL","desc": "ID_P_WDESC_M1911TACTICAL","ammo": "9 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m1911","icon": "m1911_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m1911"},"mgT88": {"label": "Type88","name": "ID_P_WNAME_Type88","desc": "ID_P_WDESC_Type88","ammo": "200 [5.8x42mm DAP-87]","rateOfFire": "700","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "true","image": "type88","icon": "type88_small","image_path": "UI/Art/Persistence/Weapons/Fancy/type88"},"arAK74": {"label": "AK74M","name": "ID_P_WNAME_AK74M","desc": "ID_P_WDESC_AK74M","ammo": "30 [5.45x39mm WP]","rateOfFire": "650","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "ak74m","icon": "ak74m_small","image_path": "UI/Art/Persistence/Weapons/Fancy/ak74m"},"caSG553": {"label": "SG553","name": "ID_P_WNAME_553","desc": "ID_P_WDESC_553","ammo": "30 [5.56x45mm NATO]","rateOfFire": "700","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "sg553lb","icon": "sg553_small","image_path": "UI/Art/Persistence/Weapons/Fancy/sg553lb"},"smUMP": {"label": "UMP","name": "ID_P_WNAME_UMP45","desc": "ID_P_WDESC_UMP45","ammo": "25 [.45ACP]","rateOfFire": "600","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "ump","icon": "ump_small","image_path": "UI/Art/Persistence/Weapons/Fancy/ump"},"pg18S": {"label": "Glock 18 Silenced","name": "ID_P_WNAME_GLOCK18SILENCED","desc": "ID_P_WDESC_GLOCK18SILENCED","ammo": "20 [9x19mm Parabellum]","rateOfFire": "1100","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "glock18","icon": "glock18_small","image_path": "UI/Art/Persistence/Weapons/Fancy/glock18"},"smMP7": {"label": "MP7","name": "ID_P_WNAME_MP7","desc": "ID_P_WDESC_MP7","ammo": "20 [4.6x30mm]","rateOfFire": "950","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "mp7","icon": "mp7_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mp7"},"pG17S": {"label": "Glock 17 Silenced","name": "ID_P_WNAME_GLOCK17SILENCED","desc": "ID_P_WDESC_GLOCK17SILENCED","ammo": "17 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "glock17","icon": "glock17_small","image_path": "UI/Art/Persistence/Weapons/Fancy/glock17"},"srSKS": {"label": "SKS","name": "ID_P_WNAME_SKS","desc": "ID_P_WDESC_SKS","ammo": "10 [7.62x39mm WP]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "sks","icon": "sks_small","image_path": "UI/Art/Persistence/Weapons/Fancy/sks"},"arM416": {"label": "M416","name": "ID_P_WNAME_M416","desc": "ID_P_WDESC_M416","ammo": "30 [5.56x45mm NATO]","rateOfFire": "750","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "m416","icon": "m416_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m416"},"smP90": {"label": "P90","name": "ID_P_WNAME_P90","desc": "ID_P_WDESC_P90","ammo": "50 [5.7x28mm]","rateOfFire": "900","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "p90","icon": "p90_small","image_path": "UI/Art/Persistence/Weapons/Fancy/p90"},"sg870": {"label": "870","name": "ID_P_WNAME_870","desc": "ID_P_WDESC_870","ammo": "4 [12 gauge]","rateOfFire": "ID_P_FRATE_PUMP","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "remington870","icon": "remington_small","image_path": "UI/Art/Persistence/Weapons/Fancy/remington870"},"pMP443L": {"label": "MP443 LIT","name": "ID_P_WNAME_MP443LIT","desc": "ID_P_WDESC_MP443LIT","ammo": "18 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "mp443_grach","icon": "mp443_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mp443_grach"},"arG3": {"label": "G3A4","name": "ID_P_WNAME_G3","desc": "ID_P_WDESC_G3","ammo": "20 [7.62x51mm NATO]","rateOfFire": "500","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "g3","icon": "g3_small","image_path": "UI/Art/Persistence/Weapons/Fancy/G3"},"pM9": {"label": "M9","name": "ID_P_WNAME_M9","desc": "ID_P_WDESC_M9","ammo": "15 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m9","icon": "m9_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m9"},"pG17": {"label": "Glock 17","name": "ID_P_WNAME_Glock17","desc": "ID_P_WDESC_Glock17","ammo": "17 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "glock17","icon": "glock17_small","image_path": "UI/Art/Persistence/Weapons/Fancy/glock17"},"pMP443": {"label": "MP 443","name": "ID_P_WNAME_MP443","desc": "ID_P_WDESC_MP443","ammo": "18 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "mp443_grach","icon": "mp443_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mp443_grach"},"caSCAR": {"label": "SCAR","name": "ID_P_WNAME_SCARH","desc": "ID_P_WDESC_SCARH","ammo": "20 [7.62x51mm NATO]","rateOfFire": "600","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "scarh","icon": "scarh_small","image_path": "UI/Art/Persistence/Weapons/Fancy/scarh"},"wasK": {"label": "Knife","name": "ID_P_WNAME_knife","desc": "ID_P_WDESC_knife","ammo": "None","rateOfFire": "None","range": "None","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "false","image": "knife","icon": "knife_small","image_path": "UI/Art/Persistence/Weapons/Fancy/knife"},"mgM240": {"label": "M240","name": "ID_P_WNAME_M240","desc": "ID_P_WDESC_M240","ammo": "100 [7.62x51mm NATO]","rateOfFire": "750","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "true","image": "m240","icon": "m240_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m240"},"wLATSMAW": {"label": "Mk153 SMAW","name": "ID_P_WNAME_SMAW","desc": "ID_P_WDESC_SMAW","ammo": "1 [83mm HEDP Rocket]","rateOfFire": "ID_P_FRATE_BREACH","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "smaw","icon": "smaw_small","image_path": "UI/Art/Persistence/Weapons/Fancy/smaw"},"pTaurS": {"label": "Taurus 44 scoped","name": "ID_P_WNAME_Taurus44SCOPED","desc": "ID_P_WDESC_Taurus44SCOPED","ammo": "6 [.44 Magnum]","rateOfFire": "2","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "taurus44","icon": "taurus44_small","image_path": "UI/Art/Persistence/Weapons/Fancy/taurus44"},"pM93R": {"label": "M93R","name": "ID_P_WNAME_M93R","desc": "ID_P_WDESC_M93R","ammo": "20 [9x19mm Parabellum]","rateOfFire": "1100","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "false","image": "m93r","icon": "m93r_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m93r"},"mgM249": {"label": "M249","name": "ID_P_WNAME_M249","desc": "ID_P_WDESC_M249","ammo": "200 [5.56x45mm NATO]","rateOfFire": "800","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "true","image": "m249","icon": "m249_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m249"},"pg18": {"label": "Glock 18","name": "ID_P_WNAME_Glock18","desc": "ID_P_WDESC_Glock18","ammo": "20 [9x19mm Parabellum]","rateOfFire": "1100","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "glock18","icon": "glock18_small","image_path": "UI/Art/Persistence/Weapons/Fancy/glock18"},"srMK11": {"label": "MK11","name": "ID_P_WNAME_Mk11","desc": "ID_P_WDESC_Mk11","ammo": "10 [7.62x51mm NATO]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "mk11","icon": "mk11_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mk11"},"sgUSAS": {"label": "USAS","name": "ID_P_WNAME_USAS12","desc": "ID_P_WDESC_USAS12","ammo": "6 [12 gauge]","rateOfFire": "300","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "usas12","icon": "usas12_small","image_path": "UI/Art/Persistence/Weapons/Fancy/usas12"},"srM40": {"label": "M40A5","name": "ID_P_WNAME_M40A5","desc": "ID_P_WDESC_M40A5","ammo": "5 [7.62x51mm NATO]","rateOfFire": "ID_P_FRATE_BOLT","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m40a5","icon": "m40a5_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m40a5"},"srSVD": {"label": "SVD","name": "ID_P_WNAME_SVD","desc": "ID_P_WDESC_SVD","ammo": "10 [7.62x54mm R]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "svd","icon": "svd_small","image_path": "UI/Art/Persistence/Weapons/Fancy/svd"},"pM9F": {"label": "M9 Flashlight","name": "ID_P_WNAME_M9LIT","desc": "ID_P_WDESC_M9LIT","ammo": "15 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m9","icon": "m9_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m9"},"smPDR": {"label": "PDR","name": "ID_P_WNAME_PDR","desc": "ID_P_WDESC_PDR","ammo": "30 [5.56x45mm NATO]","rateOfFire": "750","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "magpul","icon": "pdr_small","image_path": "UI/Art/Persistence/Weapons/Fancy/magpul"},"smPP2000": {"label": "PP2000","name": "ID_P_WNAME_PP2000","desc": "ID_P_WDESC_PP2000","ammo": "20 [9x19mm Parabellum]","rateOfFire": "600","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "pp2000","icon": "pp2000_small","image_path": "UI/Art/Persistence/Weapons/Fancy/pp2000"},"wahUGL": {"label": "Underslung Launcher","name": "ID_P_WNAME_40MM","desc": "ID_P_WDESC_40MM","ammo": "1 [40mm]","rateOfFire": "ID_P_FRATE_BREACH","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m320","icon": "m320_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m320"},"wLAAIGL": {"label": "SA-18 IGLA AA","name": "ID_P_WNAME_IGLA","desc": "ID_P_WDESC_IGLA","ammo": "1","rateOfFire": "ID_P_FRATE_BREACH","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "sa18igla","icon": "igla_small","image_path": "UI/Art/Persistence/Weapons/Fancy/sa18igla"},"sgSaiga": {"label": "Saiga","name": "ID_P_WNAME_Saiga12","desc": "ID_P_WDESC_Saiga12","ammo": "6 [12 gauge]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "saiga12","icon": "saiga12_small","image_path": "UI/Art/Persistence/Weapons/Fancy/saiga12"},"arM16": {"label": "M16A4","name": "ID_P_WNAME_M16A4","desc": "ID_P_WDESC_M16A4","ammo": "30 [5.56x45mm NATO]","rateOfFire": "800rpm","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "m16a4","icon": "m16a4_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m16a4"},"pM1911": {"label": "M1911","name": "ID_P_WNAME_M1911","desc": "ID_P_WDESC_M1911","ammo": "9 [.45ACP]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m1911","icon": "m1911_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m1911"},"caAKS": {"label": "AKS74U","name": "ID_P_WNAME_AKS74u","desc": "ID_P_WDESC_AKS74u","ammo": "30 [5.45x39mm WP]","rateOfFire": "650","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "aks74u","icon": "aks74u_small","image_path": "UI/Art/Persistence/Weapons/Fancy/aks74u"},"caG36": {"label": "G36C","name": "ID_P_WNAME_G36C","desc": "ID_P_WDESC_G36C","ammo": "30 [5.56x45mm NATO]","rateOfFire": "750","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "g36c","icon": "g36c_small","image_path": "UI/Art/Persistence/Weapons/Fancy/g36c"},"mgPech": {"label": "Pecheneg","name": "ID_P_WNAME_Pecheng","desc": "ID_P_WDESC_Pecheng","ammo": "100 [7.62x54mm R]","rateOfFire": "650","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "true","image": "pecheneg","icon": "pecheneg_small","image_path": "UI/Art/Persistence/Weapons/Fancy/pecheneg"},"mgRPK": {"label": "RPK","name": "ID_P_WNAME_RPK","desc": "ID_P_WDESC_RPK","ammo": "45 [5.45x39mm WP]","rateOfFire": "600","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "rpk","icon": "rpk_small","image_path": "UI/Art/Persistence/Weapons/Fancy/rpk"},"pM9S": {"label": "M9 Silenced","name": "ID_P_WNAME_M9SILENCED","desc": "ID_P_WDESC_M9SILENCED","ammo": "15 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m9","icon": "m9_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m9"},"arAN94": {"label": "AN94","name": "ID_P_WNAME_AN94","desc": "ID_P_WDESC_AN94","ammo": "30 [5.45x39mm WP]","rateOfFire": "600","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "an94","icon": "an94_small","image_path": "UI/Art/Persistence/Weapons/Fancy/an94"},"caA91": {"label": "A91","name": "ID_P_WNAME_A91","desc": "ID_P_WDESC_A91","ammo": "30 [7.62x39mm WP]","rateOfFire": "800","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "a91","icon": "a91_small","image_path": "UI/Art/Persistence/Weapons/Fancy/a91"},"arKH": {"label": "KH2002","name": "ID_P_WNAME_KH2002","desc": "ID_P_WDESC_KH2002","ammo": "30 [5.56x45mm NATO]","rateOfFire": "850","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "true","fireModeAuto": "true","image": "kh2002","icon": "kh2002_small","image_path": "UI/Art/Persistence/Weapons/Fancy/kh2002"},"mgM60": {"label": "M60","name": "ID_P_WNAME_M60","desc": "ID_P_WDESC_M60","ammo": "100 [7.62x51mm NATO]","rateOfFire": "500","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "false","fireModeBurst": "false","fireModeAuto": "true","image": "m60","icon": "m60_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m60"},"arF2": {"label": "F2000","name": "ID_P_WNAME_F2000","desc": "ID_P_WDESC_F2000","ammo": "30 [5.56x45mm NATO]","rateOfFire": "850","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "f2000","icon": "f2000_small","image_path": "UI/Art/Persistence/Weapons/Fancy/f2000"},"srM98": {"label": "M98B","name": "ID_P_WNAME_M98B","desc": "ID_P_WDESC_M98B","ammo": "5 [.338 Magnum]","rateOfFire": "ID_P_FRATE_BOLT","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m98b","icon": "m98_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m98b"},"wLATRPG": {"label": "RPG-7","name": "ID_P_WNAME_RPG7","desc": "ID_P_WDESC_RPG7","ammo": "1 [85mm PG-7VL grenade]","rateOfFire": "ID_P_FRATE_BREACH","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "rpg7","icon": "rpg7_small","image_path": "UI/Art/Persistence/Weapons/Fancy/rpg7"},"mgM27": {"label": "M27","name": "ID_P_WNAME_M27","desc": "ID_P_WDESC_M27","ammo": "45 [5.56x45mm NATO]","rateOfFire": "750","range": "ID_P_RANGE_MEDIUM","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "m27","icon": "m27_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m27"},"wLAAFIM": {"label": "FIM-92 STINGER AA","name": "ID_P_WNAME_Stinger","desc": "ID_P_WDESC_Stinger","ammo": "1","rateOfFire": "ID_P_FRATE_BREACH","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "fim92a_stinger","icon": "stinger_small","image_path": "UI/Art/Persistence/Weapons/Fancy/fim92a_stinger"},"srSV98": {"label": "SV98","name": "ID_P_WNAME_SV98","desc": "ID_P_WDESC_SV98","ammo": "10 [7.62x54mm R]","rateOfFire": "ID_P_FRATE_BOLT","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "sv98","icon": "sv98_small","image_path": "UI/Art/Persistence/Weapons/Fancy/sv98"},"pMP443S": {"label": "MP443 Silenced","name": "ID_P_WNAME_MP443SILENCED","desc": "ID_P_WDESC_MP443SILENCED","ammo": "18 [9x19mm Parabellum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "mp443_grach","icon": "mp443_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mp443_grach"},"arAEK": {"label": "AEK971","name": "ID_P_WNAME_AEK971","desc": "ID_P_WDESC_AEK971","ammo": "30 [5.45x39mm WP]","rateOfFire": "750","range": "ID_P_RANGE_LONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "aek971","icon": "aek97_small","image_path": "UI/Art/Persistence/Weapons/Fancy/aek971"},"srM39": {"label": "M39","name": "ID_P_WNAME_M39","desc": "ID_P_WDESC_M39","ammo": "20 [7.62x51mm NATO]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_VLONG","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "m39","icon": "m39ebr_small","image_path": "UI/Art/Persistence/Weapons/Fancy/m39"},"sgDAO": {"label": "DAO","name": "ID_P_WNAME_DAO12","desc": "ID_P_WDESC_DAO12","ammo": "12 [12 gauge]","rateOfFire": "ID_P_FRATE_SEMI","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "dao12","icon": "dao12_small","image_path": "UI/Art/Persistence/Weapons/Fancy/dao12"},"wahsmVAL": {"label": "_US VAL","name": "ID_P_WNAME_ASVal","desc": "ID_P_WDESC_ASVal","ammo": "30 [9x39mm]","rateOfFire": "900","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "true","image": "asval","icon": "asval_small","image_path": "UI/Art/Persistence/Weapons/Fancy/asval"},"pM412": {"label": "M412 Rex","name": "ID_P_WNAME_M412Rex","desc": "ID_P_WDESC_M412Rex","ammo": "6 [.357 Magnum]","rateOfFire": "2","range": "ID_P_RANGE_SHORT","fireModeSingle": "true","fireModeBurst": "false","fireModeAuto": "false","image": "mp412rex","icon": "rex_small","image_path": "UI/Art/Persistence/Weapons/Fancy/mp412rex"}},"vehicleunlocks": {"ID_P_VUNAME_SHFLARE": {"name": "ID_P_VUNAME_SHFLARE","desc": "ID_P_VUDESC_SHFLARE","image": "scoutflares","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/ScoutFlares"},"ID_P_VUNAME_AHSTEALTH": {"name": "ID_P_VUNAME_AHSTEALTH","desc": "ID_P_VUDESC_AHSTEALTH","image": "attackhelistealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliStealth"},"ID_P_VUNAME_MBTPREVENT": {"name": "ID_P_VUNAME_MBTPREVENT","desc": "ID_P_VUDESC_MBTPREVENT","image": "mbtpreventive","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTPreventive"},"ID_P_VUNAME_IFVENVG": {"name": "ID_P_VUNAME_IFVENVG","desc": "ID_P_VUDESC_IFVENVG","image": "ifvenvg","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVENVG"},"ID_P_VUNAME_JETECM": {"name": "ID_P_VUNAME_JETECM","desc": "ID_P_VUDESC_JETECM","image": "jetecm","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetECM"},"ID_P_VUNAME_AAARADAR": {"name": "ID_P_VUNAME_AAARADAR","desc": "ID_P_VUDESC_AAARADAR","image": "aaradar","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AARadar"},"ID_P_VUNAME_AHZOOM": {"name": "ID_P_VUNAME_AHZOOM","desc": "ID_P_VUDESC_AHZOOM","image": "attackhelizoom","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliZoom"},"ID_P_VUNAME_JETSTEALTH": {"name": "ID_P_VUNAME_JETSTEALTH","desc": "ID_P_VUDESC_JETSTEALTH","image": "jetstealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetStealth"},"ID_P_VUNAME_AHECM": {"name": "ID_P_VUNAME_AHECM","desc": "ID_P_VUDESC_AHECM","image": "attackheliecm","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliECM"},"ID_P_VUNAME_MBTSMOKE": {"name": "ID_P_VUNAME_MBTSMOKE","desc": "ID_P_VUDESC_MBTSMOKE","image": "mbtsmoke","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTSmoke"},"ID_P_VUNAME_AASTEALTH": {"name": "ID_P_VUNAME_AASTEALTH","desc": "ID_P_VUDESC_AASTEALTH","image": "aastealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAStealth"},"ID_P_VUNAME_JETARADAR": {"name": "ID_P_VUNAME_JETARADAR","desc": "ID_P_VUDESC_JETARADAR","image": "jetradar","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetRadar"},"ID_P_VUNAME_SHSTEALTH": {"name": "ID_P_VUNAME_SHSTEALTH","desc": "ID_P_VUDESC_SHSTEALTH","image": "scoutstealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/ScoutStealth"},"ID_P_VUNAME_AAPROX": {"name": "ID_P_VUNAME_AAPROX","desc": "ID_P_VUDESC_AAPROX","image": "aaproximity","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAProximity"},"ID_P_VUNAME_MBTENVG": {"name": "ID_P_VUNAME_MBTENVG","desc": "ID_P_VUDESC_MBTENVG","image": "mbtenvg","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTENVG"},"ID_P_VUNAME_SHFIREEX": {"name": "ID_P_VUNAME_SHFIREEX","desc": "ID_P_VUDESC_SHFIREEX","image": "extinguisher","image_path": "UI/Art/Persistence/VehicleAccessory/extinguisher"},"ID_P_VUNAME_IFVSMOKE": {"name": "ID_P_VUNAME_IFVSMOKE","desc": "ID_P_VUDESC_IFVSMOKE","image": "ifvsmoke","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVSmoke"},"ID_P_VUNAME_MBTWPNEFF": {"name": "ID_P_VUNAME_MBTWPNEFF","desc": "ID_P_VUDESC_MBTWPNEFF","image": "mbtweaponeff","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTWeaponEff"},"ID_P_VUNAME_JETFIREEX": {"name": "ID_P_VUNAME_JETFIREEX","desc": "ID_P_VUDESC_JETFIREEX","image": "jetextinguisher","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetExtinguisher"},"ID_P_VUNAME_SHECM": {"name": "ID_P_VUNAME_SHECM","desc": "ID_P_VUDESC_SHECM","image": "ecm","image_path": "UI/Art/Persistence/VehicleAccessory/ECM"},"ID_P_VUNAME_AAPREVENT": {"name": "ID_P_VUNAME_AAPREVENT","desc": "ID_P_VUDESC_AAPREVENT","image": "aapreventive","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAPreventive"},"ID_P_VUNAME_JETMAVER": {"name": "ID_P_VUNAME_JETMAVER","desc": "ID_P_VUDESC_JETMAVER","image": "jetmaverik","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetMaverik"},"ID_P_VUNAME_MBTCANISTER": {"name": "ID_P_VUNAME_MBTCANISTER","desc": "ID_P_VUDESC_MBTCANISTER","image": "mbtcanister","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTCanister"},"ID_P_VUNAME_SHPREV": {"name": "ID_P_VUNAME_SHPREV","desc": "ID_P_VUDESC_SHPREV","image": "preventive","image_path": "UI/Art/Persistence/VehicleAccessory/Preventive"},"ID_P_VUNAME_MBTCOAX": {"name": "ID_P_VUNAME_MBTCOAX","desc": "ID_P_VUDESC_MBTCOAX","image": "mbtcoax","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTCoax"},"ID_P_VUNAME_AHPREV": {"name": "ID_P_VUNAME_AHPREV","desc": "ID_P_VUDESC_AHPREV","image": "attackhelipreventive","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliPreventive"},"ID_P_VUNAME_AAARMOR": {"name": "ID_P_VUNAME_AAARMOR","desc": "ID_P_VUDESC_AAARMOR","image": "aaarmor","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAArmor"},"ID_P_VUNAME_IFVPROX": {"name": "ID_P_VUNAME_IFVPROX","desc": "ID_P_VUDESC_IFVPROX","image": "ifvproximity","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVProximity"},"ID_P_VUNAME_IFVSTEALTH": {"name": "ID_P_VUNAME_IFVSTEALTH","desc": "ID_P_VUDESC_IFVSTEALTH","image": "ifvstealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVStealth"},"ID_P_VUNAME_IFVCOAX": {"name": "ID_P_VUNAME_IFVCOAX","desc": "ID_P_VUDESC_IFVCOAX","image": "ifvcoax","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVCoax"},"ID_P_VUNAME_SHARADAR": {"name": "ID_P_VUNAME_SHARADAR","desc": "ID_P_VUDESC_SHARADAR","image": "radar","image_path": "UI/Art/Persistence/VehicleAccessory/Radar"},"ID_P_VUNAME_AHFIREEX": {"name": "ID_P_VUNAME_AHFIREEX","desc": "ID_P_VUDESC_AHFIREEX","image": "attackheliextinguisher","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliExtinguisher"},"ID_P_VUNAME_MBTATGM": {"name": "ID_P_VUNAME_MBTATGM","desc": "ID_P_VUDESC_MBTATGM","image": "mbtatgm","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTATGM"},"ID_P_VUNAME_AHWPNEFF": {"name": "ID_P_VUNAME_AHWPNEFF","desc": "ID_P_VUDESC_AHWPNEFF","image": "attackheliweaponefficiency","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliWeaponEfficiency"},"ID_P_VUNAME_MBTARMOR": {"name": "ID_P_VUNAME_MBTARMOR","desc": "ID_P_VUDESC_MBTARMOR","image": "mbtarmor","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTArmor"},"ID_P_VUNAME_SHPROX": {"name": "ID_P_VUNAME_SHPROX","desc": "ID_P_VUDESC_SHPROX","image": "proximity","image_path": "UI/Art/Persistence/VehicleAccessory/Proximity"},"ID_P_VUNAME_JETAVIONIC": {"name": "ID_P_VUNAME_JETAVIONIC","desc": "ID_P_VUDESC_JETAVIONIC","image": "jetavionics","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetAvionics"},"ID_P_VUNAME_AHPROX": {"name": "ID_P_VUNAME_AHPROX","desc": "ID_P_VUDESC_AHPROX","image": "attackheliproximity","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliProximity"},"ID_P_VUNAME_AAZOOM": {"name": "ID_P_VUNAME_AAZOOM","desc": "ID_P_VUDESC_AAZOOM","image": "aazoom","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAZoom"},"ID_P_VUNAME_IFVHELL": {"name": "ID_P_VUNAME_IFVHELL","desc": "ID_P_VUDESC_IFVHELL","image": "ifvhellfire","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVHellfire"},"ID_P_VUNAME_SHAA": {"name": "ID_P_VUNAME_SHAA","desc": "ID_P_VUDESC_SHAA","image": "scoutsidewinder","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/ScoutSidewinder"},"ID_P_VUNAME_AASMOKE": {"name": "ID_P_VUNAME_AASMOKE","desc": "ID_P_VUDESC_AASMOKE","image": "aasmoke","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AASmoke"},"ID_P_VUNAME_AHAA": {"name": "ID_P_VUNAME_AHAA","desc": "ID_P_VUDESC_AHAA","image": "attackhelisidewinders","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliSidewinders"},"ID_P_VUNAME_AHGUIDE": {"name": "ID_P_VUNAME_AHGUIDE","desc": "ID_P_VUDESC_AHGUIDE","image": "rocketguide_beta","image_path": "UI/Art/Persistence/VehicleAccessory/RocketGuide_beta"},"ID_P_VUNAME_MBTZOOM": {"name": "ID_P_VUNAME_MBTZOOM","desc": "ID_P_VUDESC_MBTZOOM","image": "mbtzoom","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTZoom"},"ID_P_VUNAME_AHTVG": {"name": "ID_P_VUNAME_AHTVG","desc": "ID_P_VUDESC_AHTVG","image": "rocketguide_beta","image_path": "UI/Art/Persistence/VehicleAccessory/RocketGuide_beta"},"ID_P_VUNAME_IFVPREVENT": {"name": "ID_P_VUNAME_IFVPREVENT","desc": "ID_P_VUDESC_IFVPREVENT","image": "ifvpreventive","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVPreventive"},"ID_P_VUNAME_AAWPNEFF": {"name": "ID_P_VUNAME_AAWPNEFF","desc": "ID_P_VUDESC_AAWPNEFF","image": "aaweaponefficiency","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAWeaponEfficiency"},"ID_P_VUNAME_MBTPROX": {"name": "ID_P_VUNAME_MBTPROX","desc": "ID_P_VUDESC_MBTPROX","image": "mbtproximity","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTProximity"},"ID_P_VUNAME_IFVWPNEFF": {"name": "ID_P_VUNAME_IFVWPNEFF","desc": "ID_P_VUDESC_IFVWPNEFF","image": "ifvweaponefficiency","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVWeaponEfficiency"},"ID_P_VUNAME_IFVZOOM": {"name": "ID_P_VUNAME_IFVZOOM","desc": "ID_P_VUDESC_IFVZOOM","image": "ifvzoom","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVZoom"},"ID_P_VUNAME_IFVAPFSDS": {"name": "ID_P_VUNAME_IFVAPFSDS","desc": "ID_P_VUDESC_IFVAPFSDS","image": "ifvapfsds-t","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVAPFSDS-T"},"ID_P_VUNAME_IFVAT": {"name": "ID_P_VUNAME_IFVAT","desc": "ID_P_VUDESC_IFVAT","image": "ifvtow","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVTOW"},"ID_P_VUNAME_SHWPNEFF": {"name": "ID_P_VUNAME_SHWPNEFF","desc": "ID_P_VUDESC_SHWPNEFF","image": "scoutweaponefficiency","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/ScoutWeaponEfficiency"},"ID_P_VUNAME_AAENVG": {"name": "ID_P_VUNAME_AAENVG","desc": "ID_P_VUDESC_AAENVG","image": "aaenvg","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAENVG"},"ID_P_VUNAME_SHLASER": {"name": "ID_P_VUNAME_SHLASER","desc": "ID_P_VUDESC_SHLASER","image": "laser","image_path": "UI/Art/Persistence/VehicleAccessory/Laser"},"ID_P_VUNAME_IFVARMOR": {"name": "ID_P_VUNAME_IFVARMOR","desc": "ID_P_VUDESC_IFVARMOR","image": "ifvarmor","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/IFVArmor"},"ID_P_VUNAME_JETPROX": {"name": "ID_P_VUNAME_JETPROX","desc": "ID_P_VUDESC_JETPROX","image": "jetproximity","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetProximity"},"ID_P_VUNAME_JETAA": {"name": "ID_P_VUNAME_JETAA","desc": "ID_P_VUDESC_JETAA","image": "jetsidewinder","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetSidewinder"},"ID_P_VUNAME_SHHELL": {"name": "ID_P_VUNAME_SHHELL","desc": "ID_P_VUDESC_SHHELL","image": "hellfire","image_path": "UI/Art/Persistence/VehicleAccessory/Hellfire"},"ID_P_VUNAME_JETFLARE": {"name": "ID_P_VUNAME_JETFLARE","desc": "ID_P_VUDESC_JETFLARE","image": "jetflares","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetFlares"},"ID_P_VUNAME_AHARADAR": {"name": "ID_P_VUNAME_AHARADAR","desc": "ID_P_VUDESC_AHARADAR","image": "radar_beta","image_path": "UI/Art/Persistence/VehicleAccessory/Radar_beta"},"ID_P_VUNAME_MBTSTEALTH": {"name": "ID_P_VUNAME_MBTSTEALTH","desc": "ID_P_VUDESC_MBTSTEALTH","image": "mbtstealth","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTStealth"},"ID_P_VUNAME_AHFLARE": {"name": "ID_P_VUNAME_AHFLARE","desc": "ID_P_VUDESC_AHFLARE","image": "attackheliflares","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliFlares"},"ID_P_VUNAME_AHENVG": {"name": "ID_P_VUNAME_AHENVG","desc": "ID_P_VUDESC_AHENVG","image": "attackhelienvg","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliENVG"},"ID_P_VUNAME_JETPREV": {"name": "ID_P_VUNAME_JETPREV","desc": "ID_P_VUDESC_JETPREV","image": "jetpreventive","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetPreventive"},"ID_P_VUNAME_AHLASER": {"name": "ID_P_VUNAME_AHLASER","desc": "ID_P_VUDESC_AHLASER","image": "laser_beta","image_path": "UI/Art/Persistence/VehicleAccessory/Laser_beta"},"ID_P_VUNAME_JETWPNEFF": {"name": "ID_P_VUNAME_JETWPNEFF","desc": "ID_P_VUDESC_JETWPNEFF","image": "jetweaponefficiency","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/JetWeaponEfficiency"},"ID_P_VUNAME_MBTHMG": {"name": "ID_P_VUNAME_MBTHMG","desc": "ID_P_VUDESC_MBTHMG","image": "mbthmg","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/MBTHMG"},"ID_P_VUNAME_AHGHELL": {"name": "ID_P_VUNAME_AHGHELL","desc": "ID_P_VUDESC_AHGHELL","image": "attackhelihellfire","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AttackHeliHellfire"},"ID_P_VUNAME_AAAA": {"name": "ID_P_VUNAME_AAAA","desc": "ID_P_VUDESC_AAAA","image": "aastinger","image_path": "UI/Art/Persistence/VehicleAccessory/Fancy/AAStinger"}},"awards": {"r01": {"label": "ID_P_AWARD_R01_NAME","name": "ID_P_AWARD_R01_NAME","desc": "ID_P_AWARD_R01_DESC","image": "r01","image_path": "UI/Art/Persistence/Award/Ribbons/r01"},"sshaarAK74": {"label": "ID_P_WSTAR_NAME_AK74M","name": "ID_P_WSTAR_NAME_AK74M","desc": "ID_P_WSTAR_DESC_AK74M","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r03": {"label": "ID_P_AWARD_R03_NAME","name": "ID_P_AWARD_R03_NAME","desc": "ID_P_AWARD_R03_DESC","image": "r03","image_path": "UI/Art/Persistence/Award/Ribbons/r03"},"r02": {"label": "ID_P_AWARD_R02_NAME","name": "ID_P_AWARD_R02_NAME","desc": "ID_P_AWARD_R02_DESC","image": "r02","image_path": "UI/Art/Persistence/Award/Ribbons/r02"},"r05": {"label": "ID_P_AWARD_R05_NAME","name": "ID_P_AWARD_R05_NAME","desc": "ID_P_AWARD_R05_DESC","image": "r05","image_path": "UI/Art/Persistence/Award/Ribbons/r05"},"r04": {"label": "ID_P_AWARD_R04_NAME","name": "ID_P_AWARD_R04_NAME","desc": "ID_P_AWARD_R04_DESC","image": "r04","image_path": "UI/Art/Persistence/Award/Ribbons/r04"},"r07": {"label": "ID_P_AWARD_R07_NAME","name": "ID_P_AWARD_R07_NAME","desc": "ID_P_AWARD_R07_DESC","image": "r07","image_path": "UI/Art/Persistence/Award/Ribbons/r07"},"r06": {"label": "ID_P_AWARD_R06_NAME","name": "ID_P_AWARD_R06_NAME","desc": "ID_P_AWARD_R06_DESC","image": "r06","image_path": "UI/Art/Persistence/Award/Ribbons/r06"},"r09": {"label": "ID_P_AWARD_R09_NAME","name": "ID_P_AWARD_R09_NAME","desc": "ID_P_AWARD_R09_DESC","image": "r09","image_path": "UI/Art/Persistence/Award/Ribbons/r09"},"r08": {"label": "ID_P_AWARD_R08_NAME","name": "ID_P_AWARD_R08_NAME","desc": "ID_P_AWARD_R08_DESC","image": "r08","image_path": "UI/Art/Persistence/Award/Ribbons/r08"},"ssclbe": {"label": "ID_P_CLASS_STAR_NAME_ENGINEER","name": "ID_P_CLASS_STAR_NAME_ENGINEER","desc": "ID_P_CLASS_STAR_DESC_ENGINEER","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m50": {"label": "ID_P_AWARD_M50_NAME","name": "ID_P_AWARD_M50_NAME","desc": "ID_P_AWARD_M50_DESC","image": "m50","image_path": "UI/Art/Persistence/Award/Medals/m50"},"sshasgUSAS": {"label": "ID_P_WSTAR_NAME_USAS12","name": "ID_P_WSTAR_NAME_USAS12","desc": "ID_P_WSTAR_DESC_USAS12","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasmPP2000": {"label": "ID_P_WSTAR_NAME_PP2000","name": "ID_P_WSTAR_NAME_PP2000","desc": "ID_P_WSTAR_DESC_PP2000","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapMP443L": {"label": "ID_P_WSTAR_NAME_MP443LIT","name": "ID_P_WSTAR_NAME_MP443LIT","desc": "ID_P_WSTAR_DESC_MP443LIT","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapg18": {"label": "ID_P_WSTAR_NAME_GLOCK18","name": "ID_P_WSTAR_NAME_GLOCK18","desc": "ID_P_WSTAR_DESC_GLOCK18","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasgDAO": {"label": "ID_P_WSTAR_NAME_DAO12","name": "ID_P_WSTAR_NAME_DAO12","desc": "ID_P_WSTAR_DESC_DAO12","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r16": {"label": "ID_P_AWARD_R16_NAME","name": "ID_P_AWARD_R16_NAME","desc": "ID_P_AWARD_R16_DESC","image": "r16","image_path": "UI/Art/Persistence/Award/Ribbons/r16"},"r17": {"label": "ID_P_AWARD_R17_NAME","name": "ID_P_AWARD_R17_NAME","desc": "ID_P_AWARD_R17_DESC","image": "r17","image_path": "UI/Art/Persistence/Award/Ribbons/r17"},"r14": {"label": "ID_P_AWARD_R14_NAME","name": "ID_P_AWARD_R14_NAME","desc": "ID_P_AWARD_R14_DESC","image": "r14","image_path": "UI/Art/Persistence/Award/Ribbons/r14"},"r15": {"label": "ID_P_AWARD_R15_NAME","name": "ID_P_AWARD_R15_NAME","desc": "ID_P_AWARD_R15_DESC","image": "r15","image_path": "UI/Art/Persistence/Award/Ribbons/r15"},"r12": {"label": "ID_P_AWARD_R12_NAME","name": "ID_P_AWARD_R12_NAME","desc": "ID_P_AWARD_R12_DESC","image": "r12","image_path": "UI/Art/Persistence/Award/Ribbons/r12"},"r13": {"label": "ID_P_AWARD_R13_NAME","name": "ID_P_AWARD_R13_NAME","desc": "ID_P_AWARD_R13_DESC","image": "r13","image_path": "UI/Art/Persistence/Award/Ribbons/r13"},"r10": {"label": "ID_P_AWARD_R10_NAME","name": "ID_P_AWARD_R10_NAME","desc": "ID_P_AWARD_R10_DESC","image": "r10","image_path": "UI/Art/Persistence/Award/Ribbons/r10"},"r11": {"label": "ID_P_AWARD_R11_NAME","name": "ID_P_AWARD_R11_NAME","desc": "ID_P_AWARD_R11_DESC","image": "r11","image_path": "UI/Art/Persistence/Award/Ribbons/r11"},"r18": {"label": "ID_P_AWARD_R18_NAME","name": "ID_P_AWARD_R18_NAME","desc": "ID_P_AWARD_R18_DESC","image": "r18","image_path": "UI/Art/Persistence/Award/Ribbons/r18"},"r19": {"label": "ID_P_AWARD_R19_NAME","name": "ID_P_AWARD_R19_NAME","desc": "ID_P_AWARD_R19_DESC","image": "r19","image_path": "UI/Art/Persistence/Award/Ribbons/r19"},"sshawLATSMAW": {"label": "ID_P_WSTAR_NAME_SMAW","name": "ID_P_WSTAR_NAME_SMAW","desc": "ID_P_WSTAR_DESC_SMAW","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarKH": {"label": "ID_P_WSTAR_NAME_KH2002","name": "ID_P_WSTAR_NAME_KH2002","desc": "ID_P_WSTAR_DESC_KH2002","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m11": {"label": "ID_P_AWARD_M11_NAME","name": "ID_P_AWARD_M11_NAME","desc": "ID_P_AWARD_M11_DESC","image": "m11","image_path": "UI/Art/Persistence/Award/Medals/m11"},"m48": {"label": "ID_P_AWARD_M48_NAME","name": "ID_P_AWARD_M48_NAME","desc": "ID_P_AWARD_M48_DESC","image": "m48","image_path": "UI/Art/Persistence/Award/Medals/m48"},"m49": {"label": "ID_P_AWARD_M49_NAME","name": "ID_P_AWARD_M49_NAME","desc": "ID_P_AWARD_M49_DESC","image": "m49","image_path": "UI/Art/Persistence/Award/Medals/m49"},"m10": {"label": "ID_P_AWARD_M10_NAME","name": "ID_P_AWARD_M10_NAME","desc": "ID_P_AWARD_M10_DESC","image": "m10","image_path": "UI/Art/Persistence/Award/Medals/m10"},"m42": {"label": "ID_P_AWARD_M42_NAME","name": "ID_P_AWARD_M42_NAME","desc": "ID_P_AWARD_M42_DESC","image": "m42","image_path": "UI/Art/Persistence/Award/Medals/m42"},"m43": {"label": "ID_P_AWARD_M43_NAME","name": "ID_P_AWARD_M43_NAME","desc": "ID_P_AWARD_M43_DESC","image": "m43","image_path": "UI/Art/Persistence/Award/Medals/m43"},"m40": {"label": "ID_P_AWARD_M40_NAME","name": "ID_P_AWARD_M40_NAME","desc": "ID_P_AWARD_M40_DESC","image": "m40","image_path": "UI/Art/Persistence/Award/Medals/m40"},"m41": {"label": "ID_P_AWARD_M41_NAME","name": "ID_P_AWARD_M41_NAME","desc": "ID_P_AWARD_M41_DESC","image": "m41","image_path": "UI/Art/Persistence/Award/Medals/m41"},"m46": {"label": "ID_P_AWARD_M46_NAME","name": "ID_P_AWARD_M46_NAME","desc": "ID_P_AWARD_M46_DESC","image": "m46","image_path": "UI/Art/Persistence/Award/Medals/m46"},"m47": {"label": "ID_P_AWARD_M47_NAME","name": "ID_P_AWARD_M47_NAME","desc": "ID_P_AWARD_M47_DESC","image": "m47","image_path": "UI/Art/Persistence/Award/Medals/m47"},"m44": {"label": "ID_P_AWARD_M44_NAME","name": "ID_P_AWARD_M44_NAME","desc": "ID_P_AWARD_M44_DESC","image": "m44","image_path": "UI/Art/Persistence/Award/Medals/m44"},"m45": {"label": "ID_P_AWARD_M45_NAME","name": "ID_P_AWARD_M45_NAME","desc": "ID_P_AWARD_M45_DESC","image": "m45","image_path": "UI/Art/Persistence/Award/Medals/m45"},"ssclvIFV": {"label": "ID_P_CLASS_STAR_NAME_IFV","name": "ID_P_CLASS_STAR_NAME_IFV","desc": "ID_P_CLASS_STAR_DESC_IFV","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m15": {"label": "ID_P_AWARD_M15_NAME","name": "ID_P_AWARD_M15_NAME","desc": "ID_P_AWARD_M15_DESC","image": "m15","image_path": "UI/Art/Persistence/Award/Medals/m15"},"m14": {"label": "ID_P_AWARD_M14_NAME","name": "ID_P_AWARD_M14_NAME","desc": "ID_P_AWARD_M14_DESC","image": "m14","image_path": "UI/Art/Persistence/Award/Medals/m14"},"sshawLATJAV": {"label": "ID_P_WSTAR_NAME_JAVELIN","name": "ID_P_WSTAR_NAME_JAVELIN","desc": "ID_P_WSTAR_DESC_JAVELIN","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r43": {"label": "ID_P_AWARD_R43_NAME","name": "ID_P_AWARD_R43_NAME","desc": "ID_P_AWARD_R43_DESC","image": "r43","image_path": "UI/Art/Persistence/Award/Ribbons/r43"},"m16": {"label": "ID_P_AWARD_M16_NAME","name": "ID_P_AWARD_M16_NAME","desc": "ID_P_AWARD_M16_DESC","image": "m16","image_path": "UI/Art/Persistence/Award/Medals/m16"},"sshamgM249": {"label": "ID_P_WSTAR_NAME_M249","name": "ID_P_WSTAR_NAME_M249","desc": "ID_P_WSTAR_DESC_M249","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasmP90": {"label": "ID_P_WSTAR_NAME_P90","name": "ID_P_WSTAR_NAME_P90","desc": "ID_P_WSTAR_DESC_P90","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgM240": {"label": "ID_P_WSTAR_NAME_M240","name": "ID_P_WSTAR_NAME_M240","desc": "ID_P_WSTAR_DESC_M240","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrSVD": {"label": "ID_P_WSTAR_NAME_SVD","name": "ID_P_WSTAR_NAME_SVD","desc": "ID_P_WSTAR_DESC_SVD","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapg18S": {"label": "ID_P_WSTAR_NAME_GLOCK18SILENCED","name": "ID_P_WSTAR_NAME_GLOCK18SILENCED","desc": "ID_P_WSTAR_DESC_GLOCK18SILENCED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshawahsmVAL": {"label": "ID_P_WSTAR_NAME_ASVAL","name": "ID_P_WSTAR_NAME_ASVAL","desc": "ID_P_WSTAR_DESC_ASVAL","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrM40": {"label": "ID_P_WSTAR_NAME_M40A5","name": "ID_P_WSTAR_NAME_M40A5","desc": "ID_P_WSTAR_DESC_M40A5","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m39": {"label": "ID_P_AWARD_M39_NAME","name": "ID_P_AWARD_M39_NAME","desc": "ID_P_AWARD_M39_DESC","image": "m39","image_path": "UI/Art/Persistence/Award/Medals/m39"},"m38": {"label": "ID_P_AWARD_M38_NAME","name": "ID_P_AWARD_M38_NAME","desc": "ID_P_AWARD_M38_DESC","image": "m38","image_path": "UI/Art/Persistence/Award/Medals/m38"},"m37": {"label": "ID_P_AWARD_M37_NAME","name": "ID_P_AWARD_M37_NAME","desc": "ID_P_AWARD_M37_DESC","image": "m37","image_path": "UI/Art/Persistence/Award/Medals/m37"},"m36": {"label": "ID_P_AWARD_M36_NAME","name": "ID_P_AWARD_M36_NAME","desc": "ID_P_AWARD_M36_DESC","image": "m36","image_path": "UI/Art/Persistence/Award/Medals/m36"},"m35": {"label": "ID_P_AWARD_M35_NAME","name": "ID_P_AWARD_M35_NAME","desc": "ID_P_AWARD_M35_DESC","image": "m35","image_path": "UI/Art/Persistence/Award/Medals/m35"},"m34": {"label": "ID_P_AWARD_M34_NAME","name": "ID_P_AWARD_M34_NAME","desc": "ID_P_AWARD_M34_DESC","image": "m34","image_path": "UI/Art/Persistence/Award/Medals/m34"},"m33": {"label": "ID_P_AWARD_M33_NAME","name": "ID_P_AWARD_M33_NAME","desc": "ID_P_AWARD_M33_DESC","image": "m33","image_path": "UI/Art/Persistence/Award/Medals/m33"},"m32": {"label": "ID_P_AWARD_M32_NAME","name": "ID_P_AWARD_M32_NAME","desc": "ID_P_AWARD_M32_DESC","image": "m32","image_path": "UI/Art/Persistence/Award/Medals/m32"},"m31": {"label": "ID_P_AWARD_M31_NAME","name": "ID_P_AWARD_M31_NAME","desc": "ID_P_AWARD_M31_DESC","image": "m31","image_path": "UI/Art/Persistence/Award/Medals/m31"},"m30": {"label": "ID_P_AWARD_M30_NAME","name": "ID_P_AWARD_M30_NAME","desc": "ID_P_AWARD_M30_DESC","image": "m30","image_path": "UI/Art/Persistence/Award/Medals/m30"},"sshacaSG553": {"label": "ID_P_WSTAR_NAME_SG553","name": "ID_P_WSTAR_NAME_SG553","desc": "ID_P_WSTAR_DESC_SG553","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sscobc": {"label": "ID_P_COOP_STAR_NAME_COOP","name": "ID_P_COOP_STAR_NAME_COOP","desc": "ID_P_COOP_STAR_DESC_COOP","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclbas": {"label": "ID_P_CLASS_STAR_NAME_ASSAULT","name": "ID_P_CLASS_STAR_NAME_ASSAULT","desc": "ID_P_CLASS_STAR_DESC_ASSAULT","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarM16": {"label": "ID_P_WSTAR_NAME_M16A4","name": "ID_P_WSTAR_NAME_M16A4","desc": "ID_P_WSTAR_DESC_M16A4","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrMK11": {"label": "ID_P_WSTAR_NAME_MK11","name": "ID_P_WSTAR_NAME_MK11","desc": "ID_P_WSTAR_DESC_MK11","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapG17S": {"label": "ID_P_WSTAR_NAME_GLOCK17SILENCED","name": "ID_P_WSTAR_NAME_GLOCK17SILENCED","desc": "ID_P_WSTAR_DESC_GLOCK17SILENCED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarF2": {"label": "ID_P_WSTAR_NAME_F2000","name": "ID_P_WSTAR_NAME_F2000","desc": "ID_P_WSTAR_DESC_F2000","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshawahUSG": {"label": "ID_P_WSTAR_NAME_M26","name": "ID_P_WSTAR_NAME_M26","desc": "ID_P_WSTAR_DESC_M26","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarAN94": {"label": "ID_P_WSTAR_NAME_AN94","name": "ID_P_WSTAR_NAME_AN94","desc": "ID_P_WSTAR_DESC_AN94","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m28": {"label": "ID_P_AWARD_M28_NAME","name": "ID_P_AWARD_M28_NAME","desc": "ID_P_AWARD_M28_DESC","image": "m28","image_path": "UI/Art/Persistence/Award/Medals/m28"},"m29": {"label": "ID_P_AWARD_M29_NAME","name": "ID_P_AWARD_M29_NAME","desc": "ID_P_AWARD_M29_DESC","image": "m29","image_path": "UI/Art/Persistence/Award/Medals/m29"},"sshapMP443S": {"label": "ID_P_WSTAR_NAME_MP443SILENCED","name": "ID_P_WSTAR_NAME_MP443SILENCED","desc": "ID_P_WSTAR_DESC_MP443SILENCED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m24": {"label": "ID_P_AWARD_M24_NAME","name": "ID_P_AWARD_M24_NAME","desc": "ID_P_AWARD_M24_DESC","image": "m24","image_path": "UI/Art/Persistence/Award/Medals/m24"},"m25": {"label": "ID_P_AWARD_M25_NAME","name": "ID_P_AWARD_M25_NAME","desc": "ID_P_AWARD_M25_DESC","image": "m25","image_path": "UI/Art/Persistence/Award/Medals/m25"},"m26": {"label": "ID_P_AWARD_M26_NAME","name": "ID_P_AWARD_M26_NAME","desc": "ID_P_AWARD_M26_DESC","image": "m26","image_path": "UI/Art/Persistence/Award/Medals/m26"},"m27": {"label": "ID_P_AWARD_M27_NAME","name": "ID_P_AWARD_M27_NAME","desc": "ID_P_AWARD_M27_DESC","image": "m27","image_path": "UI/Art/Persistence/Award/Medals/m27"},"m20": {"label": "ID_P_AWARD_M20_NAME","name": "ID_P_AWARD_M20_NAME","desc": "ID_P_AWARD_M20_DESC","image": "m20","image_path": "UI/Art/Persistence/Award/Medals/m20"},"m21": {"label": "ID_P_AWARD_M21_NAME","name": "ID_P_AWARD_M21_NAME","desc": "ID_P_AWARD_M21_DESC","image": "m21","image_path": "UI/Art/Persistence/Award/Medals/m21"},"m22": {"label": "ID_P_AWARD_M22_NAME","name": "ID_P_AWARD_M22_NAME","desc": "ID_P_AWARD_M22_DESC","image": "m22","image_path": "UI/Art/Persistence/Award/Medals/m22"},"m23": {"label": "ID_P_AWARD_M23_NAME","name": "ID_P_AWARD_M23_NAME","desc": "ID_P_AWARD_M23_DESC","image": "m23","image_path": "UI/Art/Persistence/Award/Medals/m23"},"sshapM412": {"label": "ID_P_WSTAR_NAME_M412REX","name": "ID_P_WSTAR_NAME_M412REX","desc": "ID_P_WSTAR_DESC_M412REX","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclvAH": {"label": "ID_P_CLASS_STAR_NAME_AHELI","name": "ID_P_CLASS_STAR_NAME_AHELI","desc": "ID_P_CLASS_STAR_DESC_AHELI","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrM39": {"label": "ID_P_WSTAR_NAME_M39","name": "ID_P_WSTAR_NAME_M39","desc": "ID_P_WSTAR_DESC_M39","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclvAA": {"label": "ID_P_CLASS_STAR_NAME_AA","name": "ID_P_CLASS_STAR_NAME_AA","desc": "ID_P_CLASS_STAR_DESC_AA","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarG3": {"label": "ID_P_WSTAR_NAME_G3A4","name": "ID_P_WSTAR_NAME_G3A4","desc": "ID_P_WSTAR_DESC_G3A4","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM1911L": {"label": "ID_P_WSTAR_NAME_M1911LIT","name": "ID_P_WSTAR_NAME_M1911LIT","desc": "ID_P_WSTAR_DESC_M1911LIT","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapG17": {"label": "ID_P_WSTAR_NAME_GLOCK17","name": "ID_P_WSTAR_NAME_GLOCK17","desc": "ID_P_WSTAR_DESC_GLOCK17","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasgM1014": {"label": "ID_P_WSTAR_NAME_M1014","name": "ID_P_WSTAR_NAME_M1014","desc": "ID_P_WSTAR_DESC_M1014","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r45": {"label": "ID_P_AWARD_R45_NAME","name": "ID_P_AWARD_R45_NAME","desc": "ID_P_AWARD_R45_DESC","image": "r45","image_path": "UI/Art/Persistence/Award/Ribbons/r45"},"r44": {"label": "ID_P_AWARD_R44_NAME","name": "ID_P_AWARD_R44_NAME","desc": "ID_P_AWARD_R44_DESC","image": "r44","image_path": "UI/Art/Persistence/Award/Ribbons/r44"},"m13": {"label": "ID_P_AWARD_M13_NAME","name": "ID_P_AWARD_M13_NAME","desc": "ID_P_AWARD_M13_DESC","image": "m13","image_path": "UI/Art/Persistence/Award/Medals/m13"},"m12": {"label": "ID_P_AWARD_M12_NAME","name": "ID_P_AWARD_M12_NAME","desc": "ID_P_AWARD_M12_DESC","image": "m12","image_path": "UI/Art/Persistence/Award/Medals/m12"},"r41": {"label": "ID_P_AWARD_R41_NAME","name": "ID_P_AWARD_R41_NAME","desc": "ID_P_AWARD_R41_DESC","image": "r41","image_path": "UI/Art/Persistence/Award/Ribbons/r41"},"r40": {"label": "ID_P_AWARD_R40_NAME","name": "ID_P_AWARD_R40_NAME","desc": "ID_P_AWARD_R40_DESC","image": "r40","image_path": "UI/Art/Persistence/Award/Ribbons/r40"},"m17": {"label": "ID_P_AWARD_M17_NAME","name": "ID_P_AWARD_M17_NAME","desc": "ID_P_AWARD_M17_DESC","image": "m17","image_path": "UI/Art/Persistence/Award/Medals/m17"},"r42": {"label": "ID_P_AWARD_R42_NAME","name": "ID_P_AWARD_R42_NAME","desc": "ID_P_AWARD_R42_DESC","image": "r42","image_path": "UI/Art/Persistence/Award/Ribbons/r42"},"m19": {"label": "ID_P_AWARD_M19_NAME","name": "ID_P_AWARD_M19_NAME","desc": "ID_P_AWARD_M19_DESC","image": "m19","image_path": "UI/Art/Persistence/Award/Medals/m19"},"m18": {"label": "ID_P_AWARD_M18_NAME","name": "ID_P_AWARD_M18_NAME","desc": "ID_P_AWARD_M18_DESC","image": "m18","image_path": "UI/Art/Persistence/Award/Medals/m18"},"sshapM9S": {"label": "ID_P_WSTAR_NAME_M9SILENCED","name": "ID_P_WSTAR_NAME_M9SILENCED","desc": "ID_P_WSTAR_DESC_M9SILENCED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasmUMP": {"label": "ID_P_WSTAR_NAME_UMP","name": "ID_P_WSTAR_NAME_UMP","desc": "ID_P_WSTAR_DESC_UMP","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarM416": {"label": "ID_P_WSTAR_NAME_M416","name": "ID_P_WSTAR_NAME_M416","desc": "ID_P_WSTAR_DESC_M416","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapMP443": {"label": "ID_P_WSTAR_NAME_MP443","name": "ID_P_WSTAR_NAME_MP443","desc": "ID_P_WSTAR_DESC_MP443","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgM27": {"label": "ID_P_WSTAR_NAME_M27","name": "ID_P_WSTAR_NAME_M27","desc": "ID_P_WSTAR_DESC_M27","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclvMBT": {"label": "ID_P_CLASS_STAR_NAME_MBT","name": "ID_P_CLASS_STAR_NAME_MBT","desc": "ID_P_CLASS_STAR_DESC_MBT","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasg870": {"label": "ID_P_WSTAR_NAME_870","name": "ID_P_WSTAR_NAME_870","desc": "ID_P_WSTAR_DESC_870","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrM98": {"label": "ID_P_WSTAR_NAME_M98B","name": "ID_P_WSTAR_NAME_M98B","desc": "ID_P_WSTAR_DESC_M98B","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapTaurS": {"label": "ID_P_WSTAR_NAME_TAURUS44SCOPED","name": "ID_P_WSTAR_NAME_TAURUS44SCOPED","desc": "ID_P_WSTAR_DESC_TAURUS44SCOPED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m06": {"label": "ID_P_AWARD_M06_NAME","name": "ID_P_AWARD_M06_NAME","desc": "ID_P_AWARD_M06_DESC","image": "m06","image_path": "UI/Art/Persistence/Award/Medals/m06"},"m07": {"label": "ID_P_AWARD_M07_NAME","name": "ID_P_AWARD_M07_NAME","desc": "ID_P_AWARD_M07_DESC","image": "m07","image_path": "UI/Art/Persistence/Award/Medals/m07"},"m04": {"label": "ID_P_AWARD_M04_NAME","name": "ID_P_AWARD_M04_NAME","desc": "ID_P_AWARD_M04_DESC","image": "m04","image_path": "UI/Art/Persistence/Award/Medals/m04"},"m05": {"label": "ID_P_AWARD_M05_NAME","name": "ID_P_AWARD_M05_NAME","desc": "ID_P_AWARD_M05_DESC","image": "m05","image_path": "UI/Art/Persistence/Award/Medals/m05"},"m02": {"label": "ID_P_AWARD_M02_NAME","name": "ID_P_AWARD_M02_NAME","desc": "ID_P_AWARD_M02_DESC","image": "m02","image_path": "UI/Art/Persistence/Award/Medals/m02"},"m03": {"label": "ID_P_AWARD_M03_NAME","name": "ID_P_AWARD_M03_NAME","desc": "ID_P_AWARD_M03_DESC","image": "m03","image_path": "UI/Art/Persistence/Award/Medals/m03"},"sshasmPDR": {"label": "ID_P_WSTAR_NAME_PDR","name": "ID_P_WSTAR_NAME_PDR","desc": "ID_P_WSTAR_DESC_PDR","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m01": {"label": "ID_P_AWARD_M01_NAME","name": "ID_P_AWARD_M01_NAME","desc": "ID_P_AWARD_M01_DESC","image": "m01","image_path": "UI/Art/Persistence/Award/Medals/m01"},"ssclvmaJ": {"label": "ID_P_CLASS_STAR_NAME_JET","name": "ID_P_CLASS_STAR_NAME_JET","desc": "ID_P_CLASS_STAR_DESC_JET","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclvSH": {"label": "ID_P_CLASS_STAR_NAME_SHELI","name": "ID_P_CLASS_STAR_NAME_SHELI","desc": "ID_P_CLASS_STAR_DESC_SHELI","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"m08": {"label": "ID_P_AWARD_M08_NAME","name": "ID_P_AWARD_M08_NAME","desc": "ID_P_AWARD_M08_DESC","image": "m08","image_path": "UI/Art/Persistence/Award/Medals/m08"},"m09": {"label": "ID_P_AWARD_M09_NAME","name": "ID_P_AWARD_M09_NAME","desc": "ID_P_AWARD_M09_DESC","image": "m09","image_path": "UI/Art/Persistence/Award/Medals/m09"},"sshawLATRPG": {"label": "ID_P_WSTAR_NAME_RPG7","name": "ID_P_WSTAR_NAME_RPG7","desc": "ID_P_WSTAR_DESC_RPG7","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclbsu": {"label": "ID_P_CLASS_STAR_NAME_SUPPORT","name": "ID_P_CLASS_STAR_NAME_SUPPORT","desc": "ID_P_CLASS_STAR_DESC_SUPPORT","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgPech": {"label": "ID_P_WSTAR_NAME_PECHENEG","name": "ID_P_WSTAR_NAME_PECHENEG","desc": "ID_P_WSTAR_DESC_PECHENEG","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasrSV98": {"label": "ID_P_WSTAR_NAME_SV98","name": "ID_P_WSTAR_NAME_SV98","desc": "ID_P_WSTAR_DESC_SV98","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshacaSCAR": {"label": "ID_P_WSTAR_NAME_SCARH","name": "ID_P_WSTAR_NAME_SCARH","desc": "ID_P_WSTAR_DESC_SCARH","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM9": {"label": "ID_P_WSTAR_NAME_M9","name": "ID_P_WSTAR_NAME_M9","desc": "ID_P_WSTAR_DESC_M9","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"ssclbr": {"label": "ID_P_CLASS_STAR_NAME_RECON","name": "ID_P_CLASS_STAR_NAME_RECON","desc": "ID_P_CLASS_STAR_DESC_RECON","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshawahUGL": {"label": "ID_P_WSTAR_NAME_M320HE","name": "ID_P_WSTAR_NAME_M320HE","desc": "ID_P_WSTAR_DESC_M320HE","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r29": {"label": "ID_P_AWARD_R29_NAME","name": "ID_P_AWARD_R29_NAME","desc": "ID_P_AWARD_R29_DESC","image": "r29","image_path": "UI/Art/Persistence/Award/Ribbons/r29"},"r28": {"label": "ID_P_AWARD_R28_NAME","name": "ID_P_AWARD_R28_NAME","desc": "ID_P_AWARD_R28_DESC","image": "r28","image_path": "UI/Art/Persistence/Award/Ribbons/r28"},"r27": {"label": "ID_P_AWARD_R27_NAME","name": "ID_P_AWARD_R27_NAME","desc": "ID_P_AWARD_R27_DESC","image": "r27","image_path": "UI/Art/Persistence/Award/Ribbons/r27"},"r26": {"label": "ID_P_AWARD_R26_NAME","name": "ID_P_AWARD_R26_NAME","desc": "ID_P_AWARD_R26_DESC","image": "r26","image_path": "UI/Art/Persistence/Award/Ribbons/r26"},"r25": {"label": "ID_P_AWARD_R25_NAME","name": "ID_P_AWARD_R25_NAME","desc": "ID_P_AWARD_R25_DESC","image": "r25","image_path": "UI/Art/Persistence/Award/Ribbons/r25"},"r24": {"label": "ID_P_AWARD_R24_NAME","name": "ID_P_AWARD_R24_NAME","desc": "ID_P_AWARD_R24_DESC","image": "r24","image_path": "UI/Art/Persistence/Award/Ribbons/r24"},"r23": {"label": "ID_P_AWARD_R23_NAME","name": "ID_P_AWARD_R23_NAME","desc": "ID_P_AWARD_R23_DESC","image": "r23","image_path": "UI/Art/Persistence/Award/Ribbons/r23"},"r22": {"label": "ID_P_AWARD_R22_NAME","name": "ID_P_AWARD_R22_NAME","desc": "ID_P_AWARD_R22_DESC","image": "r22","image_path": "UI/Art/Persistence/Award/Ribbons/r22"},"r21": {"label": "ID_P_AWARD_R21_NAME","name": "ID_P_AWARD_R21_NAME","desc": "ID_P_AWARD_R21_DESC","image": "r21","image_path": "UI/Art/Persistence/Award/Ribbons/r21"},"r20": {"label": "ID_P_AWARD_R20_NAME","name": "ID_P_AWARD_R20_NAME","desc": "ID_P_AWARD_R20_DESC","image": "r20","image_path": "UI/Art/Persistence/Award/Ribbons/r20"},"sshawLAAIGL": {"label": "ID_P_WSTAR_NAME_IGLA","name": "ID_P_WSTAR_NAME_IGLA","desc": "ID_P_WSTAR_DESC_IGLA","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshacaAKS": {"label": "ID_P_WSTAR_NAME_AKS74U","name": "ID_P_WSTAR_NAME_AKS74U","desc": "ID_P_WSTAR_DESC_AKS74U","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshacaG36": {"label": "ID_P_WSTAR_NAME_G36C","name": "ID_P_WSTAR_NAME_G36C","desc": "ID_P_WSTAR_DESC_G36C","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM1911": {"label": "ID_P_WSTAR_NAME_M1911","name": "ID_P_WSTAR_NAME_M1911","desc": "ID_P_WSTAR_DESC_M1911","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgRPK": {"label": "ID_P_WSTAR_NAME_RPK","name": "ID_P_WSTAR_NAME_RPK","desc": "ID_P_WSTAR_DESC_RPK","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshacaA91": {"label": "ID_P_WSTAR_NAME_A91","name": "ID_P_WSTAR_NAME_A91","desc": "ID_P_WSTAR_DESC_A91","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshawasK": {"label": "ID_P_WSTAR_NAME_KNIFE","name": "ID_P_WSTAR_NAME_KNIFE","desc": "ID_P_WSTAR_DESC_KNIFE","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM1911T": {"label": "ID_P_WSTAR_NAME_M1911TACTICAL","name": "ID_P_WSTAR_NAME_M1911TACTICAL","desc": "ID_P_WSTAR_DESC_M1911TACTICAL","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasmMP7": {"label": "ID_P_WSTAR_NAME_MP7","name": "ID_P_WSTAR_NAME_MP7","desc": "ID_P_WSTAR_DESC_MP7","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM93R": {"label": "ID_P_WSTAR_NAME_M93R","name": "ID_P_WSTAR_NAME_M93R","desc": "ID_P_WSTAR_DESC_M93R","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapM1911S": {"label": "ID_P_WSTAR_NAME_M1911SILENCED","name": "ID_P_WSTAR_NAME_M1911SILENCED","desc": "ID_P_WSTAR_DESC_M1911SILENCED","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgM60": {"label": "ID_P_WSTAR_NAME_M60","name": "ID_P_WSTAR_NAME_M60","desc": "ID_P_WSTAR_DESC_M60","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshapTaur": {"label": "ID_P_WSTAR_NAME_TAURUS44","name": "ID_P_WSTAR_NAME_TAURUS44","desc": "ID_P_WSTAR_DESC_TAURUS44","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"r38": {"label": "ID_P_AWARD_R38_NAME","name": "ID_P_AWARD_R38_NAME","desc": "ID_P_AWARD_R38_DESC","image": "r38","image_path": "UI/Art/Persistence/Award/Ribbons/r38"},"r39": {"label": "ID_P_AWARD_R39_NAME","name": "ID_P_AWARD_R39_NAME","desc": "ID_P_AWARD_R39_DESC","image": "r39","image_path": "UI/Art/Persistence/Award/Ribbons/r39"},"r34": {"label": "ID_P_AWARD_R34_NAME","name": "ID_P_AWARD_R34_NAME","desc": "ID_P_AWARD_R34_DESC","image": "r34","image_path": "UI/Art/Persistence/Award/Ribbons/r34"},"r35": {"label": "ID_P_AWARD_R35_NAME","name": "ID_P_AWARD_R35_NAME","desc": "ID_P_AWARD_R35_DESC","image": "r35","image_path": "UI/Art/Persistence/Award/Ribbons/r35"},"r36": {"label": "ID_P_AWARD_R36_NAME","name": "ID_P_AWARD_R36_NAME","desc": "ID_P_AWARD_R36_DESC","image": "r36","image_path": "UI/Art/Persistence/Award/Ribbons/r36"},"r37": {"label": "ID_P_AWARD_R37_NAME","name": "ID_P_AWARD_R37_NAME","desc": "ID_P_AWARD_R37_DESC","image": "r37","image_path": "UI/Art/Persistence/Award/Ribbons/r37"},"r30": {"label": "ID_P_AWARD_R30_NAME","name": "ID_P_AWARD_R30_NAME","desc": "ID_P_AWARD_R30_DESC","image": "r30","image_path": "UI/Art/Persistence/Award/Ribbons/r30"},"r31": {"label": "ID_P_AWARD_R31_NAME","name": "ID_P_AWARD_R31_NAME","desc": "ID_P_AWARD_R31_DESC","image": "r31","image_path": "UI/Art/Persistence/Award/Ribbons/r31"},"r32": {"label": "ID_P_AWARD_R32_NAME","name": "ID_P_AWARD_R32_NAME","desc": "ID_P_AWARD_R32_DESC","image": "r32","image_path": "UI/Art/Persistence/Award/Ribbons/r32"},"r33": {"label": "ID_P_AWARD_R33_NAME","name": "ID_P_AWARD_R33_NAME","desc": "ID_P_AWARD_R33_DESC","image": "r33","image_path": "UI/Art/Persistence/Award/Ribbons/r33"},"sshasrSKS": {"label": "ID_P_WSTAR_NAME_SKS","name": "ID_P_WSTAR_NAME_SKS","desc": "ID_P_WSTAR_DESC_SKS","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshamgT88": {"label": "ID_P_WSTAR_NAME_TYPE88","name": "ID_P_WSTAR_NAME_TYPE88","desc": "ID_P_WSTAR_DESC_TYPE88","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshacaM4": {"label": "ID_P_WSTAR_NAME_M4A1","name": "ID_P_WSTAR_NAME_M4A1","desc": "ID_P_WSTAR_DESC_M4A1","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshasgSaiga": {"label": "ID_P_WSTAR_NAME_SAIGA","name": "ID_P_WSTAR_NAME_SAIGA","desc": "ID_P_WSTAR_DESC_SAIGA","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshaarAEK": {"label": "ID_P_WSTAR_NAME_AEK971","name": "ID_P_WSTAR_NAME_AEK971","desc": "ID_P_WSTAR_DESC_AEK971","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"},"sshawLAAFIM": {"label": "ID_P_WSTAR_NAME_STINGER","name": "ID_P_WSTAR_NAME_STINGER","desc": "ID_P_WSTAR_DESC_STINGER","image": "servicestar","image_path": "UI/Art/Persistence/Award/ServiceStar"}}};
var serverguideList = {autobrowseCount: 30,windowWidth: jQuery(window).width(),windowHeight: jQuery(window).height(),fixPosition: 0,initServerListing: function() {
        serverguideList.fixPosition = (serverguideList.windowWidth - 992) / 2 + 656;
        var isResized = false;
        var keepPolling = false;
        var poller = setInterval(function() {
            if (!isResized) {
                return;
            }
            isResized = false;
            serverguideList.onResize();
        }, 350);
        $.leavePage(function() {
            clearInterval(poller);
        });
        $.leavePage(function() {
            $("#serverguide-listcontainer").autobrowse("unbind");
        });
        $(window).pageBind("resize", function() {
            isResized = true;
        });
        $(".serverguide-join-server input[type=submit]").removeAttr("disabled");
        serverguideSort.getAllServerSurfaceIds();
        for (var i in serverguideSort.serverguideSurfaceIds) {
            $S(serverguideSort.serverguideSurfaceIds[i]).getState()["formEnabled"] = 1;
        }
        serverguide.registerForEvent("plugin", function(event, result) {
            if (result) {
                serverguideList.pingServerList();
            }
        });
    },debugPingServers: function(ips) {
        var obj = launcher.getInstance();
        obj.pingBatch("LOG_INSTEAD_OF_CALLBACK", ips);
    },debugMakeIps: function(n, prefix) {
        if (!prefix) {
            prefix = "192.168.1.";
        }
        ips = [];
        for (var i = 0; i < n; i++) {
            ips.push(prefix + i);
        }
        return ips;
    },pingServerList: function(randomPings) {
        var serversToPing = {};
        $("#serverguide-result .serverguide-bodycells").each(function() {
            var item = $(this);
            serversToPing[item.attr("idx")] = item.attr("ip");
        });
        launcher.pingServers(serversToPing);
    },measureSurfUpdate: function() {
        var serverIds = [];
        $("#serverguide-result .serverguide-bodycells").each(function() {
            serverIds.push($(this).attr("idx"));
        });
        var times = [];
        for (var i in serverIds) {
            var idx = serverIds[i];
            var surf = $S("serverguide-server-" + idx);
            if (surf.rendered()) {
                surf.getState()["ping"] = parseInt(Math.random() * 100);
                var start = new Date();
                surf.refresh();
                var end = new Date();
                times.push(end - start);
            }
        }
        S.log(times);
    },onResize: function() {
        serverguideList.windowWidth = jQuery(window).width();
        serverguideList.windowHeight = jQuery(window).height();
    },setServerShowPosition: function() {
    },setServerShowHeight: function() {
        var initialContentHeight = $("#serverguide-middle").height();
        if (initialContentHeight < 615) {
            initialContentHeight = 615;
        }
        $("#serverguide-middle").css("min-height", initialContentHeight + "px");
    },setServerListAutoBrowse: function() {
        var pingServers = {};
        var ipArray = new Array();
        $("#serverguide-listcontainer").autobrowse({url: function(offset, count) {
                var urlParts = Surface.ajaxNavigation.getCurrentUrl().split("?");
                var addParams = urlParts.length > 1 ? ("&" + urlParts[1]) : "";
                var request = $("#serverguide-autobrowse-url").val() + "?offset=" + offset + "&count=" + count + addParams;
                return request;
            },template: function(response) {
                var markup = "<div class='serverguide-autobrowse-divider'></div>";
                var surfaceIds = serverguideSort.getAllServerSurfaceIds();
                var currentTopSurfaceId = 0;
                for (var i = 0; i < surfaceIds.length; i++) {
                    var sId = surfaceIds[i];
                    var id = parseInt(sId.split("-")[2]);
                    currentTopSurfaceId = Math.max(id, currentTopSurfaceId);
                }
                var playingFriends = comcenter.getFriendsPlaying();
                for (var i = 0; i < response.data.length; i++) {
                    var idx = i + parseInt(currentTopSurfaceId) + 1;
                    pingServers[idx] = response.data[i]["ip"];
                    var serverGame = response.data[i].game;
                    var serverMap = response.data[i].map;
                    var mapInfo = serverguide.function_mapinfo(serverGame, serverMap);
                    var gameModeMap = S.globalContext["globalGameModeMap"];
                    var friendsOnServer = playingFriends[response.data[i].guid];
                    var server = {server: response.data[i],ping: "-",isFavourite: false,friendsOnServer: friendsOnServer,formEnabled: 0,mapinfo: mapInfo,idx: idx,iteration: parseInt(idx) + 1,gameModeMap: gameModeMap};
                    markup += $S("serverguide.serverrow").render(server);
                }
                return markup;
            },itemsReturned: function(response) {
                S.debug(response);
                return response.data.length;
            },onComplete: function() {
                launcher.pingServers(pingServers);
                serverguideSort.refreshSortings();
                serverguideSort.getAllServerSurfaceIds();
                pingServers = {};
            },count: serverguideList.autobrowseCount,offset: 30,totalCount: 150,loader: '<div class="loader"></div>',useCache: false,sensitivity: 0});
    }};
var serverguideShow = {initServerShow: function() {
        $("#serverguide-show-serverjoin form input[type=submit]").removeAttr("disabled");
        if (!$("#serverguide-show-serverjoin").length) {
            S.debug("Not a valid server.");
            return;
        }
        var refreshPing = function() {
            try {
                var ip = $("#server-info").attr("ip");
            } catch (e) {
                S.error(e);
                return false;
            }
            var pingResult = function(event, serverLatencys) {
                launcher.unregisterForEvent("pingResult", pingResult);
                jQuery.each(serverLatencys, function(serverId, latency) {
                    if (serverId == ip && latency >= 0) {
                        var surf = $S("serverguide-show-info");
                        if (surf) {
                            surf.getState()["server"]["ping"] = (parseInt(latency) < 0 ? "-" : latency);
                            surf.refresh();
                            $("#server-info-maprotation-slider-wrapper").sodaSlider({centered: false});
                        }
                    }
                });
            };
            launcher.registerForEvent("pingResult", pingResult);
            var pingServer = {};
            pingServer[ip] = ip;
            launcher.pingServers(pingServer);
        };
        $("#serverguide-show-favorite").pageLive("click", function() {
            $(this).hide();
            $("#serverguide-show-favorite-loader").show();
            var form = $(this).children("form");
            $.ajax({url: form.attr("action"),dataType: "json",type: "POST",data: form.serialize(),complete: base.onComplete(function(success, response) {
                    if (success) {
                        surf.update({"isFavorite": response.message == "GAMESERVERBOOKMARK_ADDED"});
                    } else {
                        surf.refresh();
                    }
                }, false)});
        });
        serverguide.registerForEvent("plugin", function(event, result) {
            if (!result) {
                refreshPing = function() {
                };
                return;
            }
            refreshPing();
        });
        serverguide.registerForEvent("game", function(event, result) {
            surf.update({formEnabled: result});
        });
        $("#serverguide-show-refresh").pageLive("click", function() {
            refreshPing();
        });
        var doJoin = function() {
            joinflow.joinServerByUrl($("#serverguide-show-joinserver-form").attr("action"), null, function(foundServer) {
            });
        };
        $("#serverguide-content").pageDelegate("#serverguide-show-serverjoin form", "submit", function(e) {
            e.preventDefault();
            doJoin();
            return false;
        });
        $("#serverguide-content").pageDelegate($("#showServer")[0], "submit", function(e) {
            e.preventDefault();
            doJoin();
            return false;
        });
        $(".serverguide-show-friendrow form input[type=submit]").pageLive("click", function(e) {
            e.preventDefault();
            var server = surf.getState()["server"];
            var friendPersonaId = parseInt($(this).find("input[name=friendPersonaId]").val());
            joinflow.joinServerByUrl($(this).attr("action"), friendPersonaId, function(foundServer) {
            });
            return false;
        });
        if ($("#serverguide-show-serverjoin form input[name=action]").val() == "launch") {
            doJoin();
        }
    }};
var serverguideSort = {serverguideSurfaceIds: [],serverguideSortings: [],initSortColumns: function() {
        serverguideSort.refreshSortings();
        serverguideSort.performSort();
    },refreshSortings: function() {
        var smallToBig = false;
        var bigToSmall = !smallToBig;
        serverguideSort.serverguideSortings = [["friend", bigToSmall, function(state) {
                    if (state["friendsOnServer"]) {
                        return state["friendsOnServer"].length;
                    }
                    return 0;
                }], ["name", smallToBig, function(state) {
                    return state["server"]["name"];
                }], ["players", smallToBig, function(state) {
                    return state["server"]["numPlayers"];
                }], ["map", smallToBig, function(state) {
                    return S.translations[state["mapinfo"]["name"]];
                }], ["mode", smallToBig, function(state) {
                    return state["server"]["mapMode"];
                }], ["ranked", bigToSmall, function(state) {
                    return state["server"]["ranked"];
                }], ["pb", bigToSmall, function(state) {
                    return state["server"]["punkbuster"];
                }], ["type", smallToBig, function(state) {
                    return state["server"]["hardcore"];
                }], ["ping", smallToBig, function(state) {
                    return state["ping"];
                }]];
    },performSort: function() {
        var container = $("#serverguide-listcontainer");
        var sortings = serverguideSort.serverguideSortings;
        for (var i in sortings) {
            (function(sorting) {
                var cls = sorting[0];
                var defaultReverse = sorting[1];
                var path = sorting[2];
                var hcell = $(".serverguide-sorting-" + cls);
                var $list = $(".serverguide-list");
                hcell.css("cursor", "pointer");
                hcell.pageBind("click", function() {
                    if ($(".serverguide-autobrowse-divider").length) {
                        $(".serverguide-autobrowse-divider").remove();
                    }
                    var reverse = $(this).hasClass("serverguide-sort-up");
                    if (!reverse && !$(this).hasClass("serverguide-sort-down")) {
                        reverse = defaultReverse;
                    }
                    $(".serverguide-sorter").removeClass("serverguide-sort-down").removeClass("serverguide-sort-up");
                    $(this).addClass(reverse ? "serverguide-sort-down" : "serverguide-sort-up");
                    $list.attr("data-sorting", cls);
                    serverguideSort.sortSurfaces(container, serverguideSort.getAllServerSurfaceIds(), path, reverse);
                });
            })(sortings[i]);
        }
    },getAllServerSurfaceIds: function() {
        var ids = [];
        $("#serverguide-listcontainer").children().each(function() {
            var thisId = $(this).attr("id");
            thisId = thisId.split("-");
            if (thisId[2] != undefined) {
                ids.push("serverguide-server-" + thisId[2]);
            }
        });
        serverguideSort.serverguideSurfaceIds = ids;
        return ids;
    },sortSurfaces: function(containerElement, surfaceIds, getStateValue, reverse) {
        surfaceIds.sort(function(surfA, surfB) {
            var stateA = $S(surfA).getState();
            var stateB = $S(surfB).getState();
            var valA = getStateValue(stateA);
            var valB = getStateValue(stateB);
            typeof valA === "undefined" && typeof valB === "string" && (valA = "");
            typeof valB === "undefined" && typeof valA === "string" && (valB = "");
            typeof valA === "undefined" && typeof valB === "undefined" && (valA = 9999, valB = 9998);
            if (valA == "-") {
                valA = 9999;
            }
            if (valB == "-") {
                valB = 9998;
            }
            var cmp = surfA > surfB ? 1 : -1;
            if (valA > valB) {
                cmp = 1;
            }
            if (valA < valB) {
                cmp = -1;
            }
            return cmp;
        });
        var elements = [];
        for (var i in surfaceIds) {
            var surfaceId = surfaceIds[i];
            elements.push($("#" + surfaceId).detach());
        }
        if (reverse) {
            elements.reverse();
        }
        for (var i in elements) {
            elements[i].appendTo(containerElement);
        }
    }};
if (typeof admin == "undefined") {
    var admin = {};
}
var surf_admin_component = new Surface.Component("admin");
surf_admin_component.extend(admin);
admin = surf_admin_component;
admin.addTemplate(new Surface.Template("functions"));
var block_admin_index = new Surface.BlockConfig("base.ajaxindex", {"adminPreambleHeader": "admin.index.block_adminPreambleHeader","adminPreambleDescription": "admin.index.block_adminPreambleDescription","adminPreamble": "admin.index.block_adminPreamble","adminMessage": "admin.index.block_adminMessage","adminContent": "admin.index.block_adminContent","mainContent": "admin.index.block_mainContent"});
admin.addTemplate(new Surface.Template("index"));
admin.addTemplate(new Surface.Template("languagedropdown"));
admin.addTemplate(new Surface.Template("languageselect"));
var block_admin_listdevblogs = new Surface.BlockConfig("devblog.base", {"main": "admin.listdevblogs.block_main"});
admin.addTemplate(new Surface.Template("listdevblogs"));
var block_admin_populate = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "admin.populate.block_mainContent"});
admin.addTemplate(new Surface.Template("populate"));
admin.populate.surface_7_10 = new Surface.SingleSurface("admin.populate.surface_7_10");
admin.populate.surface_7_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_admin_populate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("admin");
    Surface.Renderer.addUsedTemplate("admin.populate");
    c.push('<surf:container id="');
    c.push("adminpopulate");
    c.push('">');
    var l_for_admin_populate_16_18_list;
    c.push(" <br>\n ");
    if (o.running) {
        c.push("Populating!");
    } else {
        c.push("Idle");
    }
    c.push('\n <br>\n <input type="button" value="Start!" onclick="$.get(\'');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/admin/startpopulate/{speed}/", Surface.urlContext)));
    c.push('\' + $(\'input[name=speed]\').val());">\n <input type="button" value="Stop!" onclick="$.get(\'');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/admin/stoppopulate/", Surface.urlContext)));
    c.push('\');"><br>\n Speed: <input type="text" style="width: 50px;" value="');
    c.push(Surface.valOut(o.runnerSpeed));
    c.push('" ');
    if (o.running) {
        c.push("disabled");
    }
    c.push(' name="speed" />\n <br>\n <table>\n');
    l_for_admin_populate_16_18_list = o.status;
    if ((S.Modifier.count(l_for_admin_populate_16_18_list) > 0)) {
        for (var l_key in l_for_admin_populate_16_18_list) {
            if (!Surface.isValidLoopItem(l_for_admin_populate_16_18_list[l_key])) {
                continue;
            }
            var l_value = l_for_admin_populate_16_18_list[l_key];
            c.push(" <tr><td>");
            c.push(Surface.valOut(l_key));
            c.push("</td><td>&nbsp;&nbsp;</td><td>");
            c.push(Surface.valOut(l_value.num));
            c.push(" / ");
            c.push(Surface.valOut(S.Modifier.get(o.maxNum, l_key)));
            c.push("</td></tr>\n");
        }
    }
    c.push(" </table>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("admin.populate", "surface_7_10", "adminpopulate", o, b);
    return c.join("");
};
var block_admin_populateblogs = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "admin.populateblogs.block_mainContent"});
admin.addTemplate(new Surface.Template("populateblogs"));
var block_admin_populateforums = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "admin.populateforums.block_mainContent"});
admin.addTemplate(new Surface.Template("populateforums"));
var block_admin_populatepolls = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "admin.populatepolls.block_mainContent"});
admin.addTemplate(new Surface.Template("populatepolls"));
admin.addTemplate(new Surface.Template("sectioncheckbox"));
if (typeof adminapiaccess == "undefined") {
    var adminapiaccess = {};
}
var surf_adminapiaccess_component = new Surface.Component("adminapiaccess");
surf_adminapiaccess_component.extend(adminapiaccess);
adminapiaccess = surf_adminapiaccess_component;
var block_adminapiaccess_grantAccess = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminapiaccess.grantAccess.block_adminPreambleHeader","adminContent": "adminapiaccess.grantAccess.block_adminContent"});
adminapiaccess.addTemplate(new Surface.Template("grantAccess"));
var block_adminapiaccess_index = new Surface.BlockConfig("base.index", {"main": "adminapiaccess.index.block_main"});
adminapiaccess.addTemplate(new Surface.Template("index"));
var block_adminapiaccess_revokeAccess = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminapiaccess.revokeAccess.block_adminPreambleHeader","adminContent": "adminapiaccess.revokeAccess.block_adminContent"});
adminapiaccess.addTemplate(new Surface.Template("revokeAccess"));
if (typeof adminbetakeys == "undefined") {
    var adminbetakeys = {};
}
var surf_adminbetakeys_component = new Surface.Component("adminbetakeys");
surf_adminbetakeys_component.extend(adminbetakeys);
adminbetakeys = surf_adminbetakeys_component;
adminbetakeys.addTemplate(new Surface.Template("betamail"));
var block_adminbetakeys_importExternalUsers = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminbetakeys.importExternalUsers.block_adminPreambleHeader","adminPreambleDescription": "adminbetakeys.importExternalUsers.block_adminPreambleDescription","adminContent": "adminbetakeys.importExternalUsers.block_adminContent"});
adminbetakeys.addTemplate(new Surface.Template("importExternalUsers"));
var block_adminbetakeys_importKeys = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminbetakeys.importKeys.block_adminPreambleHeader","adminPreambleDescription": "adminbetakeys.importKeys.block_adminPreambleDescription","adminContent": "adminbetakeys.importKeys.block_adminContent"});
adminbetakeys.addTemplate(new Surface.Template("importKeys"));
var block_adminbetakeys_importUsers = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminbetakeys.importUsers.block_adminPreambleHeader","adminPreambleDescription": "adminbetakeys.importUsers.block_adminPreambleDescription","adminContent": "adminbetakeys.importUsers.block_adminContent"});
adminbetakeys.addTemplate(new Surface.Template("importUsers"));
var block_adminbetakeys_index = new Surface.BlockConfig("base.index", {"main": "adminbetakeys.index.block_main"});
adminbetakeys.addTemplate(new Surface.Template("index"));
var block_adminbetakeys_sendInviteMail = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminbetakeys.sendInviteMail.block_adminPreambleHeader","adminPreambleDescription": "adminbetakeys.sendInviteMail.block_adminPreambleDescription","adminContent": "adminbetakeys.sendInviteMail.block_adminContent"});
adminbetakeys.addTemplate(new Surface.Template("sendInviteMail"));
if (typeof admindevblog == "undefined") {
    var admindevblog = {};
}
var surf_admindevblog_component = new Surface.Component("admindevblog");
surf_admindevblog_component.extend(admindevblog);
admindevblog = surf_admindevblog_component;
var block_admindevblog_form = new Surface.BlockConfig("admindevblog.index", {"adminContent": "admindevblog.form.block_adminContent"});
admindevblog.addTemplate(new Surface.Template("form"));
var block_admindevblog_form_use_4_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "admindevblog.form._use_4_6_block_content","title": "admindevblog.form._use_4_6_block_title"});
var block_admindevblog_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "admindevblog.index.block_adminPreambleHeader","adminPreambleDescription": "admindevblog.index.block_adminPreambleDescription","adminContent": "admindevblog.index.block_adminContent"});
admindevblog.addTemplate(new Surface.Template("index"));
var block_admindevblog_postfailed = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "admindevblog.postfailed.block_adminPreambleHeader","adminPreambleDescription": "admindevblog.postfailed.block_adminPreambleDescription","adminContent": "admindevblog.postfailed.block_adminContent"});
admindevblog.addTemplate(new Surface.Template("postfailed"));
if (typeof adminfilemanager == "undefined") {
    var adminfilemanager = {};
}
var surf_adminfilemanager_component = new Surface.Component("adminfilemanager");
surf_adminfilemanager_component.extend(adminfilemanager);
adminfilemanager = surf_adminfilemanager_component;
var block_adminfilemanager_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminfilemanager.index.block_adminPreambleHeader","adminPreambleDescription": "adminfilemanager.index.block_adminPreambleDescription","adminContent": "adminfilemanager.index.block_adminContent"});
adminfilemanager.addTemplate(new Surface.Template("index"));
if (typeof adminforum == "undefined") {
    var adminforum = {};
}
var surf_adminforum_component = new Surface.Component("adminforum");
surf_adminforum_component.extend(adminforum);
adminforum = surf_adminforum_component;
var block_adminforum_form = new Surface.BlockConfig("adminforum.index", {"adminContent": "adminforum.form.block_adminContent"});
adminforum.addTemplate(new Surface.Template("form"));
var block_adminforum_form_use_4_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "adminforum.form._use_4_6_block_content","title": "adminforum.form._use_4_6_block_title"});
var block_adminforum_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminforum.index.block_adminPreambleHeader","adminPreambleDescription": "adminforum.index.block_adminPreambleDescription","adminContent": "adminforum.index.block_adminContent"});
adminforum.addTemplate(new Surface.Template("index"));
var block_adminforum_index_use_66_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "adminforum.index._use_66_14_block_content","titleContainer": "adminforum.index._use_66_14_block_titleContainer"});
var block_adminforum_index_use_19_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "adminforum.index._use_19_10_block_content","title": "adminforum.index._use_19_10_block_title"});
if (typeof adminlog == "undefined") {
    var adminlog = {};
}
var surf_adminlog_component = new Surface.Component("adminlog");
surf_adminlog_component.extend(adminlog);
adminlog = surf_adminlog_component;
var block_adminlog_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminlog.index.block_adminPreambleHeader","adminPreambleDescription": "adminlog.index.block_adminPreambleDescription","adminContent": "adminlog.index.block_adminContent"});
adminlog.addTemplate(new Surface.Template("index"));
adminlog.index.surface_24_14 = new Surface.SurfaceList("adminlog.index.surface_24_14", "logitems", "logitem", "logitem.id");
adminlog.index.surface_25_18 = new Surface.SingleSurface("adminlog.index.surface_25_18");
adminlog.index.surface_25_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_adminlog_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("adminlog");
    Surface.Renderer.addUsedTemplate("adminlog.index");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("logitem", S.Modifier.concat("_", o.logitem.id)));
    c.push('">');
    c.push(' <tr class="admin-common-table-row">\n <td class="admin-common-table-cell adminlog-list-body-user"><a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.logitem.user.username})));
    c.push('" target="_blank">');
    c.push(Surface.valOut(o.logitem.user.username));
    c.push('</a></td>\n <td class="admin-common-table-cell adminlog-list-body-date">');
    c.push(Surface.valOut(o.logitem.date));
    c.push('</td>\n <td class="admin-common-table-cell adminlog-list-body-action">');
    c.push(Surface.valOut(o.logitem.actionName));
    c.push('</td>\n <td class="admin-common-table-cell adminlog-list-body-contextid">');
    c.push(Surface.valOut(o.logitem.contextId));
    c.push('</td>\n <td class="admin-common-table-cell adminlog-list-body-meta">');
    c.push(Surface.valOut(o.logitem.meta));
    c.push('</td>\n <td class="admin-common-table-cell adminlog-list-body-revert"><a href="#">Revert</a></td>\n </tr>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("adminlog.index", "surface_25_18", S.Modifier.concat("logitem", S.Modifier.concat("_", o.logitem.id)), o, b);
    return c.join("");
};
adminlog.index.surface_24_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_adminlog_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("adminlog");
    Surface.Renderer.addUsedTemplate("adminlog.index");
    c.push('<surf:container id="');
    c.push("logitem");
    c.push('">');
    var l_for_adminlog_index_24_14_list;
    l_for_adminlog_index_24_14_list = o.logitems;
    if ((S.Modifier.count(l_for_adminlog_index_24_14_list) > 0)) {
        for (var l_for_adminlog_index_24_14_key in l_for_adminlog_index_24_14_list) {
            if (!Surface.isValidLoopItem(l_for_adminlog_index_24_14_list[l_for_adminlog_index_24_14_key])) {
                continue;
            }
            var l_logitem = l_for_adminlog_index_24_14_list[l_for_adminlog_index_24_14_key];
            c.push(adminlog.index.surface_25_18.render({"logitem": ((typeof (l_logitem) != "undefined" && l_logitem !== null) ? l_logitem : null)}, b, kwargs));
        }
    } else {
        c.push(' <tr class="admin-common-table-row">\n <td class="admin-common-table-cell adminlog-list-body-noitems" colspan="6">No log items found. Please come again!</td>\n </tr>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("adminlog.index", "surface_24_14", "logitem", o, b);
    return c.join("");
};
if (typeof adminnotice == "undefined") {
    var adminnotice = {};
}
var surf_adminnotice_component = new Surface.Component("adminnotice");
surf_adminnotice_component.extend(adminnotice);
adminnotice = surf_adminnotice_component;
adminnotice.addTemplate(new Surface.Template("edit"));
var block_adminnotice_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminnotice.index.block_adminPreambleHeader","adminPreambleDescription": "adminnotice.index.block_adminPreambleDescription"});
adminnotice.addTemplate(new Surface.Template("index"));
var block_adminnotice_list = new Surface.BlockConfig("adminnotice.index", {"adminContent": "adminnotice.list.block_adminContent"});
adminnotice.addTemplate(new Surface.Template("list"));
if (typeof adminpoll == "undefined") {
    var adminpoll = {};
}
var surf_adminpoll_component = new Surface.Component("adminpoll");
surf_adminpoll_component.extend(adminpoll);
adminpoll = surf_adminpoll_component;
var block_adminpoll_answer = new Surface.BlockConfig("", {});
adminpoll.addTemplate(new Surface.Template("answer"));
adminpoll.answer.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_adminpoll_answer;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("adminpoll");
    Surface.Renderer.addUsedTemplate("adminpoll.answer");
    c.push('\n<li>\n <input type="hidden" name="answerId[]" value="');
    c.push(Surface.valOut(o.id));
    c.push('" />\n <input type="text" class="admin-form-input answer" name="answer[]" value="');
    c.push(Surface.valOut(o.text));
    c.push('"/>\n <a href="#" class="delete-button">X</a>\n</li>');
    return c.join("");
};
var block_adminpoll_form = new Surface.BlockConfig("adminpoll.index", {"adminContent": "adminpoll.form.block_adminContent"});
adminpoll.addTemplate(new Surface.Template("form"));
var block_adminpoll_form_use_4_5 = new Surface.BlockConfig("common.boxwideclean", {"content": "adminpoll.form._use_4_5_block_content","title": "adminpoll.form._use_4_5_block_title"});
var block_adminpoll_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminpoll.index.block_adminPreambleHeader","adminPreambleDescription": "adminpoll.index.block_adminPreambleDescription"});
adminpoll.addTemplate(new Surface.Template("index"));
var block_adminpoll_list = new Surface.BlockConfig("adminpoll.index", {"adminContent": "adminpoll.list.block_adminContent"});
adminpoll.addTemplate(new Surface.Template("list"));
if (typeof adminsystemparams == "undefined") {
    var adminsystemparams = {};
}
var surf_adminsystemparams_component = new Surface.Component("adminsystemparams");
surf_adminsystemparams_component.extend(adminsystemparams);
adminsystemparams = surf_adminsystemparams_component;
var block_adminsystemparams_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminsystemparams.index.block_adminPreambleHeader","adminPreambleDescription": "adminsystemparams.index.block_adminPreambleDescription","adminContent": "adminsystemparams.index.block_adminContent"});
adminsystemparams.addTemplate(new Surface.Template("index"));
var block_adminsystemparams_index_use_7_7 = new Surface.BlockConfig("common.boxwideclean", {"content": "adminsystemparams.index._use_7_7_block_content","title": "adminsystemparams.index._use_7_7_block_title"});
if (typeof adminuser == "undefined") {
    var adminuser = {};
}
var surf_adminuser_component = new Surface.Component("adminuser");
surf_adminuser_component.extend(adminuser);
adminuser = surf_adminuser_component;
adminuser.addTemplate(new Surface.Template("access"));
var block_adminuser_index = new Surface.BlockConfig("admin.index", {"adminPreambleHeader": "adminuser.index.block_adminPreambleHeader","adminPreambleDescription": "adminuser.index.block_adminPreambleDescription","adminContent": "adminuser.index.block_adminContent"});
adminuser.addTemplate(new Surface.Template("index"));
adminuser.index.surface_18_10 = new Surface.SingleSurface("adminuser.index.surface_18_10");
adminuser.index.surface_18_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_adminuser_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("adminuser");
    Surface.Renderer.addUsedTemplate("adminuser.index");
    c.push('<surf:container id="');
    c.push("adminUserSearchResult");
    c.push('">');
    var l_for_adminuser_index_19_14_list;
    l_for_adminuser_index_19_14_list = o.users;
    if ((S.Modifier.count(l_for_adminuser_index_19_14_list) > 0)) {
        c.push("<ul>\n ");
        for (var l_for_adminuser_index_19_14_key in l_for_adminuser_index_19_14_list) {
            if (!Surface.isValidLoopItem(l_for_adminuser_index_19_14_list[l_for_adminuser_index_19_14_key])) {
                continue;
            }
            var l_user = l_for_adminuser_index_19_14_list[l_for_adminuser_index_19_14_key];
            c.push(' <li>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminuser/show/{userId}/", Surface.urlContext, l_user)));
            c.push('">');
            c.push(Surface.valOut(l_user.username));
            c.push("</a>\n </li>\n ");
        }
        c.push("</ul>\n");
    } else {
        if ((o.hide == 0)) {
            c.push(" No users matched the criteria\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("adminuser.index", "surface_18_10", "adminUserSearchResult", o, b);
    return c.join("");
};
var block_adminuser_show = new Surface.BlockConfig("admin.index", {"adminPreamble": "adminuser.show.block_adminPreamble","adminContent": "adminuser.show.block_adminContent"});
adminuser.addTemplate(new Surface.Template("show"));
adminuser.addTemplate(new Surface.Template("tags"));
adminuser.addTemplate(new Surface.Template("writeban"));
if (typeof agegate == "undefined") {
    var agegate = {};
}
var surf_agegate_component = new Surface.Component("agegate");
surf_agegate_component.extend(agegate);
agegate = surf_agegate_component;
var block_agegate_index = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "agegate.index.block_titleComponent","mainContent": "agegate.index.block_mainContent"});
agegate.addTemplate(new Surface.Template("index"));
var block_agegate_index_use_9_13 = new Surface.BlockConfig("common.boxwideclean", {"content": "agegate.index._use_9_13_block_content","title": "agegate.index._use_9_13_block_title","extraClassInner": "agegate.index._use_9_13_block_extraClassInner","extraClass": "agegate.index._use_9_13_block_extraClass"});
if (typeof apiaccount == "undefined") {
    var apiaccount = {};
}
var surf_apiaccount_component = new Surface.Component("apiaccount");
surf_apiaccount_component.extend(apiaccount);
apiaccount = surf_apiaccount_component;
var block_apiaccount_access = new Surface.BlockConfig("apiaccount.base", {"apiaccountSidebar": "apiaccount.access.block_apiaccountSidebar","apiaccountContent": "apiaccount.access.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("access"));
var block_apiaccount_access_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.access._use_4_6_block_content","shadow": "apiaccount.access._use_4_6_block_shadow","titleContainer": "apiaccount.access._use_4_6_block_titleContainer","extraClass": "apiaccount.access._use_4_6_block_extraClass"});
var block_apiaccount_base = new Surface.BlockConfig("base.ajaxindex", {"apiaccountSidebar": "apiaccount.base.block_apiaccountSidebar","apiaccountContent": "apiaccount.base.block_apiaccountContent","mainContent": "apiaccount.base.block_mainContent"});
apiaccount.addTemplate(new Surface.Template("base"));
apiaccount.addTemplate(new Surface.Template("bfxlink"));
var block_apiaccount_guideAPI = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideAPI.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideAPI"));
var block_apiaccount_guideAPI_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideAPI._use_4_6_block_content","shadow": "apiaccount.guideAPI._use_4_6_block_shadow","titleContainer": "apiaccount.guideAPI._use_4_6_block_titleContainer","extraClass": "apiaccount.guideAPI._use_4_6_block_extraClass"});
var block_apiaccount_guideContributions = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideContributions.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideContributions"));
var block_apiaccount_guideContributions_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideContributions._use_4_6_block_content","shadow": "apiaccount.guideContributions._use_4_6_block_shadow","titleContainer": "apiaccount.guideContributions._use_4_6_block_titleContainer","extraClass": "apiaccount.guideContributions._use_4_6_block_extraClass"});
var block_apiaccount_guideEmbed = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideEmbed.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideEmbed"));
var block_apiaccount_guideEmbed_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideEmbed._use_4_6_block_content","shadow": "apiaccount.guideEmbed._use_4_6_block_shadow","titleContainer": "apiaccount.guideEmbed._use_4_6_block_titleContainer","extraClass": "apiaccount.guideEmbed._use_4_6_block_extraClass"});
var block_apiaccount_guideFAQ = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideFAQ.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideFAQ"));
var block_apiaccount_guideFAQ_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideFAQ._use_4_6_block_content","shadow": "apiaccount.guideFAQ._use_4_6_block_shadow","titleContainer": "apiaccount.guideFAQ._use_4_6_block_titleContainer","extraClass": "apiaccount.guideFAQ._use_4_6_block_extraClass"});
var block_apiaccount_guideIntroduction = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideIntroduction.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideIntroduction"));
var block_apiaccount_guideIntroduction_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideIntroduction._use_4_6_block_content","shadow": "apiaccount.guideIntroduction._use_4_6_block_shadow","titleContainer": "apiaccount.guideIntroduction._use_4_6_block_titleContainer","extraClass": "apiaccount.guideIntroduction._use_4_6_block_extraClass"});
var block_apiaccount_guideSupport = new Surface.BlockConfig("apiaccount.start", {"apiaccountContent": "apiaccount.guideSupport.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("guideSupport"));
var block_apiaccount_guideSupport_use_4_6 = new Surface.BlockConfig("common.boxwide", {"content": "apiaccount.guideSupport._use_4_6_block_content","shadow": "apiaccount.guideSupport._use_4_6_block_shadow","titleContainer": "apiaccount.guideSupport._use_4_6_block_titleContainer","extraClass": "apiaccount.guideSupport._use_4_6_block_extraClass"});
apiaccount.addTemplate(new Surface.Template("login"));
apiaccount.addTemplate(new Surface.Template("personaselected"));
apiaccount.addTemplate(new Surface.Template("selectpersona"));
var block_apiaccount_start = new Surface.BlockConfig("apiaccount.base", {"apiaccountSidebar": "apiaccount.start.block_apiaccountSidebar","apiaccountContent": "apiaccount.start.block_apiaccountContent"});
apiaccount.addTemplate(new Surface.Template("start"));
if (typeof arena == "undefined") {
    var arena = {};
}
var surf_arena_component = new Surface.Component("arena");
surf_arena_component.extend(arena);
arena = surf_arena_component;
var block_arena_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "arena.index.block_mainContent"});
arena.addTemplate(new Surface.Template("index"));
if (typeof authentication == "undefined") {
    var authentication = {};
}
var surf_authentication_component = new Surface.Component("authentication");
surf_authentication_component.extend(authentication);
authentication = surf_authentication_component;
var block_authentication_index = new Surface.BlockConfig("base.index", {"main": "authentication.index.block_main"});
authentication.addTemplate(new Surface.Template("index"));
if (typeof base == "undefined") {
    var base = {};
}
var surf_base_component = new Surface.Component("base");
surf_base_component.extend(base);
base = surf_base_component;
var block_base_ago = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("ago"));
base.ago.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_ago;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.ago");
    c.push("\n");
    c.push(S.Modifier.agoElement(o.datetime, ["%s minute ago", "%s hour ago", "%s day ago", "%s week ago", "%s month ago", "%s year ago"], ["%s minutes ago", "%s hours ago", "%s days ago", "%s weeks ago", "%s months ago", "%s years ago"]));
    return c.join("");
};
var block_base_ajaxindex = new Surface.BlockConfig("base.index", {"titleSite": "base.ajaxindex.block_titleSite","document": "base.ajaxindex.block_document","titleComponent": "base.ajaxindex.block_titleComponent","bodyClass": "base.ajaxindex.block_bodyClass","titleItem": "base.ajaxindex.block_titleItem","mainContent": "base.ajaxindex.block_mainContent","titleSection": "base.ajaxindex.block_titleSection"});
base.addTemplate(new Surface.Template("ajaxindex"));
base.ajaxindex.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_ajaxindex;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.ajaxindex");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.index", o, b, kwargs);
};
base.ajaxindex.block_titleItem = new Surface.Block("base.ajaxindex.block_titleItem");
base.ajaxindex.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(block_base_ajaxindex.get(".parentBlock").get("titleItem")(o, b, kwargs));
    return c.join("");
};
base.ajaxindex.block_titleComponent = new Surface.Block("base.ajaxindex.block_titleComponent");
base.ajaxindex.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(block_base_ajaxindex.get(".parentBlock").get("titleComponent")(o, b, kwargs));
    return c.join("");
};
base.ajaxindex.block_titleSite = new Surface.Block("base.ajaxindex.block_titleSite");
base.ajaxindex.block_titleSite.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(block_base_ajaxindex.get(".parentBlock").get("titleSite")(o, b, kwargs));
    return c.join("");
};
base.ajaxindex.block_titleSection = new Surface.Block("base.ajaxindex.block_titleSection");
base.ajaxindex.block_titleSection.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(block_base_ajaxindex.get(".parentBlock").get("titleSection")(o, b, kwargs));
    return c.join("");
};
base.ajaxindex.block_bodyClass = new Surface.Block("base.ajaxindex.block_bodyClass");
base.ajaxindex.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.ajaxindex.block_mainContent = new Surface.Block("base.ajaxindex.block_mainContent");
base.ajaxindex.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.ajaxindex.block_document = new Surface.Block("base.ajaxindex.block_document");
base.ajaxindex.block_document.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    if (!(Surface.globalContext.isAjaxNavigation)) {
        c.push(" ");
        c.push(block_base_ajaxindex.get(".parentBlock").get("document")(o, b, kwargs));
        c.push("\n");
    } else {
        c.push(' <input type="hidden" id="base-ajaxindex-pagetitle" value="');
        c.push(b.get("titleItem")(o, b, kwargs));
        c.push(b.get("titleComponent")(o, b, kwargs));
        c.push(b.get("titleSite")(o, b, kwargs));
        c.push(b.get("titleSection")(o, b, kwargs));
        c.push('" />\n <input type="hidden" id="base-ajaxindex-bodyclass" value="');
        c.push(b.get("bodyClass")(o, b, kwargs));
        c.push('" />\n');
        c.push(b.get("mainContent")(o, b, kwargs));
        c.push(" ");
        c.push(Surface.importTemplate(("surfaceframework" + ("." + "index")), o, null, kwargs));
        c.push("\n");
    }
    return c.join("");
};
var block_base_box1x = new Surface.BlockConfig("base.ajaxindex", {"boxContent": "base.box1x.block_boxContent","boxSubHeader": "base.box1x.block_boxSubHeader","mainContent": "base.box1x.block_mainContent","boxHeader": "base.box1x.block_boxHeader"});
base.addTemplate(new Surface.Template("box1x"));
var block_base_box2x = new Surface.BlockConfig("base.ajaxindex", {"boxContent": "base.box2x.block_boxContent","boxSubHeader": "base.box2x.block_boxSubHeader","mainContent": "base.box2x.block_mainContent","boxHeader": "base.box2x.block_boxHeader"});
base.addTemplate(new Surface.Template("box2x"));
var block_base_box3x = new Surface.BlockConfig("base.ajaxindex", {"boxContent": "base.box3x.block_boxContent","boxSubHeader": "base.box3x.block_boxSubHeader","mainContent": "base.box3x.block_mainContent","boxHeader": "base.box3x.block_boxHeader"});
base.addTemplate(new Surface.Template("box3x"));
var block_base_box3xsecondary = new Surface.BlockConfig("base.ajaxindex", {"boxContent": "base.box3xsecondary.block_boxContent","boxSubHeader": "base.box3xsecondary.block_boxSubHeader","mainContent": "base.box3xsecondary.block_mainContent","boxHeader": "base.box3xsecondary.block_boxHeader"});
base.addTemplate(new Surface.Template("box3xsecondary"));
var block_base_chartbeat = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("chartbeat"));
base.chartbeat.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_chartbeat;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.chartbeat");
    c.push("\n<script type=\"text/javascript\">\nvar _sf_async_config={ uid:3575,domain:\"battlelog.battlefield.com\" };\n(function(){\n function loadChartbeat() {\n window._sf_endpt=(new Date()).getTime();\n var e = document.createElement('script');\n e.setAttribute('language', 'javascript');\n e.setAttribute('type', 'text/javascript');\n e.setAttribute('src',\n ((\"https:\" == document.location.protocol) ? \"https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/\" : \"http://static.chartbeat.com/\") +\n \"js/chartbeat.js\");\n document.body.appendChild(e);\n }\n var oldonload = window.onload;\n window.onload = (typeof window.onload != 'function') ?\n loadChartbeat : function() { oldonload(); loadChartbeat(); };\n})();\n<\/script>\n");
    return c.join("");
};
var block_base_friendslist = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("friendslist"));
base.friendslist.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_friendslist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.friendslist");
    c.push('\n<div id="base-loggedin-friends-list-container" ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : false)) {
        c.push('class="avatar-only"');
    }
    c.push(" >\n");
    c.push(base.friendslist.surface_4_10.render({"addFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.addFriends) != "undefined" && o.addFriends !== null) ? o.addFriends : null),"avatarOnly": ((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : null),"capFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null) ? o.capFriends : null),"deleteFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"useSurfaceId": ((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : null),"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : null)}, b, kwargs));
    c.push('\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
base.friendslist.surface_4_10 = new Surface.SurfaceList("base.friendslist.surface_4_10", "friends", "friend", "friend.user.userId");
base.friendslist.surface_6_14 = new Surface.SingleSurface("base.friendslist.surface_6_14");
base.friendslist.surface_6_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_friendslist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.friendslist");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat(((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : "noListId"), S.Modifier.concat("_", o.friend.user.userId)));
    c.push('">');
    if (((o.for_base_friendslist_4_10_iteration < 15) || !((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null)))) {
        c.push(" <li ");
        if (!(o.for_base_friendslist_4_10_hasNext)) {
            c.push('class="last"');
        }
        c.push(" >\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : false)) {
            c.push(' <div class="base-friends-avatar-only">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend.user,"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
            c.push("\n </div>\n");
        } else {
            c.push('\n <div class="base-friends-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend.user,"gravatarSize": 30}, null, kwargs));
            c.push('\n </div>\n <div class="base-friends-username" ');
            if (!(((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.user) != "undefined" && o.friend.user !== null && typeof (o.friend.user.presence) != "undefined" && o.friend.user.presence !== null && typeof (o.friend.user.presence.isPlaying) != "undefined" && o.friend.user.presence.isPlaying !== null) ? o.friend.user.presence.isPlaying : false))) {
                c.push('style="line-height: 35px;"');
            }
            c.push(">\n ");
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.friend.user.userId,"username": o.friend.user.username}, null, kwargs));
            c.push("\n");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.user) != "undefined" && o.friend.user !== null && typeof (o.friend.user.presence) != "undefined" && o.friend.user.presence !== null && typeof (o.friend.user.presence.isPlaying) != "undefined" && o.friend.user.presence.isPlaying !== null) ? o.friend.user.presence.isPlaying : false)) {
                c.push(' <br>\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.friend.user.presence.game, o.friend.user.presence.platform, o.friend.user.presence.gameExpansion, b, kwargs)));
                c.push(' main-friendlist-playing"></span>\n ');
                c.push(Surface.importTemplate(("common" + ("." + "playing")), {"showPlayingMode": false,"first": 14,"limit": 28,"presence": o.friend.user.presence}, null, kwargs));
                c.push("\n");
            }
            c.push(" </div>\n");
            if (((((typeof (o) != "undefined" && o !== null && typeof (o.addFriends) != "undefined" && o.addFriends !== null) ? o.addFriends : false) && (typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null && typeof (Surface.globalContext.session.user.userId) != "undefined" && Surface.globalContext.session.user.userId !== null)) && (Surface.globalContext.session.user.userId != o.friend.user.userId))) {
                c.push(' <div class="profile-add-friend profile-add-friend-friendlist">\n <form action="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/requestFriendship/{id}/", Surface.urlContext, {"id": o.friend.user.userId})));
                c.push('" method="post" class="friendship profile-friendship">\n ');
                c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
                c.push('\n <input class="base-button-addfriend-wide" type="submit" value="');
                c.push(Surface.valOut("Add as friend"));
                c.push('" />\n </form>\n </div>\n');
            }
            if (((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : false)) {
                c.push(' <div rel="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/removeFriend/{id}/", Surface.urlContext, {"id": o.friend.user.userId})));
                c.push('" class="profile-friends-remove" id="removeFriend-');
                c.push(Surface.valOut(o.friend.user.userId));
                c.push('"></div>\n');
            }
            c.push("\n");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.user) != "undefined" && o.friend.user !== null && typeof (o.friend.user.presence) != "undefined" && o.friend.user.presence !== null && typeof (o.friend.user.presence.isPlaying) != "undefined" && o.friend.user.presence.isPlaying !== null) ? o.friend.user.presence.isPlaying : false)) {
                c.push(' <div class="base-friends-joinbutton">\n ');
                c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"friendPersonaId": o.friend.user.presence.personaId,"presence": o.friend.user.presence}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' <div class="base-clear"></div>\n');
        }
        c.push(" </li>\n");
    }
    if ((((o.for_base_friendslist_4_10_iteration > 14) && (typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null)) && !(o.for_base_friendslist_4_10_hasNext))) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, o.user)));
        c.push('">');
        c.push(Surface.valOut("View all"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.count(o.friends)));
        c.push(" ");
        c.push(Surface.valOut("friends"));
        c.push("</a>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.friendslist", "surface_6_14", S.Modifier.concat(((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : "noListId"), S.Modifier.concat("_", o.friend.user.userId)), o, b);
    return c.join("");
};
base.friendslist.surface_4_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_friendslist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.friendslist");
    c.push('<surf:container id="');
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : "noListId"));
    c.push('">');
    var l_for_base_friendslist_4_10_count;
    var l_for_base_friendslist_4_10_hasNext;
    var l_for_base_friendslist_4_10_list;
    var l_for_base_friendslist_4_10_iteration;
    l_for_base_friendslist_4_10_list = S.Modifier.multisort(o.friends, "user.presence.isPlaying", "desc", "user.presence.isOnline", "desc", "user.username", "asc");
    l_for_base_friendslist_4_10_count = S.Modifier.count(l_for_base_friendslist_4_10_list);
    l_for_base_friendslist_4_10_iteration = 0;
    if ((S.Modifier.count(l_for_base_friendslist_4_10_list) > 0)) {
        c.push(" <ul>\n");
        for (var l_for_base_friendslist_4_10_key in l_for_base_friendslist_4_10_list) {
            if (!Surface.isValidLoopItem(l_for_base_friendslist_4_10_list[l_for_base_friendslist_4_10_key])) {
                continue;
            }
            var l_friend = l_for_base_friendslist_4_10_list[l_for_base_friendslist_4_10_key];
            l_for_base_friendslist_4_10_iteration = (l_for_base_friendslist_4_10_iteration + 1);
            l_for_base_friendslist_4_10_hasNext = (l_for_base_friendslist_4_10_iteration < l_for_base_friendslist_4_10_count);
            c.push(base.friendslist.surface_6_14.render({"addFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.addFriends) != "undefined" && o.addFriends !== null) ? o.addFriends : null),"avatarOnly": ((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : null),"capFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null) ? o.capFriends : null),"deleteFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : null),"for_base_friendslist_4_10_hasNext": ((typeof (l_for_base_friendslist_4_10_hasNext) != "undefined" && l_for_base_friendslist_4_10_hasNext !== null) ? l_for_base_friendslist_4_10_hasNext : null),"for_base_friendslist_4_10_iteration": ((typeof (l_for_base_friendslist_4_10_iteration) != "undefined" && l_for_base_friendslist_4_10_iteration !== null) ? l_for_base_friendslist_4_10_iteration : null),"friend": ((typeof (l_friend) != "undefined" && l_friend !== null) ? l_friend : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"useSurfaceId": ((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : null),"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : null)}, b, kwargs));
        }
        c.push(" </ul>\n");
    } else {
        c.push(' <div class="profile-info-empty-message">');
        c.push(Surface.valOut("No friends here, soldier."));
        c.push('</div>\n <div class="base-clear"></div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.friendslist", "surface_4_10", ((typeof (o) != "undefined" && o !== null && typeof (o.useSurfaceId) != "undefined" && o.useSurfaceId !== null) ? o.useSurfaceId : "noListId"), o, b);
    return c.join("");
};
var block_base_functions = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("functions"));
base.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.functions");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
base.function_country = function(l_l, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_l == 1)) {
        return "en";
    }
    if ((l_l == 2)) {
        return "DE";
    }
    if ((l_l == 4)) {
        return "FR";
    }
    if ((l_l == 8)) {
        return "ES";
    }
    if ((l_l == 16)) {
        return "IT";
    }
    if ((l_l == 32)) {
        return "PL";
    }
    if ((l_l == 64)) {
        return "RU";
    }
    if ((l_l == 128)) {
        return "JA";
    }
    if ((l_l == 256)) {
        return "KO";
    }
    if ((l_l == 512)) {
        return "zh";
    }
    if ((l_l == 1024)) {
        return "cs";
    }
    return S.Modifier.concat("Unknown country: ", l_l);
};
base.function_language = function(l_l, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_l == 1)) {
        return "en";
    }
    if ((l_l == 2)) {
        return "de";
    }
    if ((l_l == 4)) {
        return "fr";
    }
    if ((l_l == 8)) {
        return "es";
    }
    if ((l_l == 16)) {
        return "it";
    }
    if ((l_l == 32)) {
        return "pl";
    }
    if ((l_l == 64)) {
        return "ru";
    }
    if ((l_l == 128)) {
        return "jp";
    }
    if ((l_l == 256)) {
        return "kr";
    }
    if ((l_l == 512)) {
        return "zh";
    }
    if ((l_l == 1024)) {
        return "cz";
    }
    return S.Modifier.concat("Unknown language: ", l_l);
};
base.function_locale = function(l_l, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_l == 1)) {
        return "en_US";
    }
    if ((l_l == 2)) {
        return "de_DE";
    }
    if ((l_l == 4)) {
        return "fr_FR";
    }
    if ((l_l == 8)) {
        return "es_ES";
    }
    if ((l_l == 16)) {
        return "it_IT";
    }
    if ((l_l == 32)) {
        return "pl_PL";
    }
    if ((l_l == 64)) {
        return "ru_RU";
    }
    if ((l_l == 128)) {
        return "ja_JP";
    }
    if ((l_l == 256)) {
        return "ko_KR";
    }
    if ((l_l == 512)) {
        return "zh_CN";
    }
    if ((l_l == 1024)) {
        return "cs_CZ";
    }
    return S.Modifier.concat("Unknown language: ", l_l);
};
base.function_platform = function(l_platform, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_platform == 1)) {
        return "PC";
    }
    if ((l_platform == 2)) {
        return "XBOX360";
    }
    if ((l_platform == 4)) {
        return "PS3";
    }
    if ((l_platform == 8)) {
        return "XBOX";
    }
    return S.Modifier.concat("Unknown section: ", l_platform);
};
base.function_fromPlatform = function(l_platform, b, kwargs) {
    var o = {};
    var c = [];
    var l_platform;
    if (((l_platform == "battlefield") || (l_platform == "cem_ea_id"))) {
        l_platform = "1";
    } else {
        if ((l_platform == "xbox")) {
            l_platform = "2";
        } else {
            if ((l_platform == "ps3")) {
                l_platform = "4";
            }
        }
    }
    return l_platform;
};
base.function_game = function(l_s, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_s == 1)) {
        return "bfbc2";
    }
    if ((l_s == 2)) {
        return "bf3";
    }
    if ((l_s == 4)) {
        return "bf1942";
    }
    if ((l_s == 8)) {
        return "bf1943";
    }
    if ((l_s == 16)) {
        return "bfvietnam";
    }
    if ((l_s == 32)) {
        return "bf2";
    }
    if ((l_s == 64)) {
        return "bf2142";
    }
    if ((l_s == 128)) {
        return "bfbc";
    }
    if ((l_s == 256)) {
        return "bfheroes";
    }
    if ((l_s == 512)) {
        return "bfmc";
    }
    if ((l_s == 1024)) {
        return "bfp4f";
    }
    return S.Modifier.concat("Unknown game: ", l_s);
};
base.function_gameTitle = function(l_s, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_s == 1)) {
        return "Battlefield Bad Company 2";
    }
    if ((l_s == 2)) {
        return "Battlefield 3";
    }
    if ((l_s == 4)) {
        return "Battlefield 1942";
    }
    if ((l_s == 8)) {
        return "Battlefield 1943";
    }
    if ((l_s == 16)) {
        return "Battlefield Vietnam";
    }
    if ((l_s == 32)) {
        return "Battlefield 2";
    }
    if ((l_s == 64)) {
        return "Battlefield 2142";
    }
    if ((l_s == 128)) {
        return "Battlefield Bad Company";
    }
    if ((l_s == 256)) {
        return "Battlefield Heroes";
    }
    if ((l_s == 512)) {
        return "Battlefield Modern Combat";
    }
    if ((l_s == 1024)) {
        return "Battlefield Play 4 Free";
    }
    return S.Modifier.concat("Unknown game: ", l_s);
};
base.function_gameExpansion = function(l_s, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_s == 1)) {
        return "Road To Rome";
    }
    if ((l_s == 2)) {
        return "Secret Weapons of World War II";
    }
    if ((l_s == 4)) {
        return "Northern Strike";
    }
    if ((l_s == 8)) {
        return "Armored Fury";
    }
    if ((l_s == 16)) {
        return "Euro Force";
    }
    if ((l_s == 32)) {
        return "Special Forces";
    }
    if ((l_s == 64)) {
        return "BFBC 360 Demo";
    }
    if ((l_s == 128)) {
        return "BFBC PS3 Demo";
    }
    if ((l_s == 256)) {
        return "Vietnam";
    }
    if ((l_s == 512)) {
        return "Back To Karkand";
    }
    return S.Modifier.concat("Unknown game expansion: ", l_s);
};
base.function_section = function(l_s, b, kwargs) {
    var o = {};
    var c = [];
    if (((l_s == 536870912) || !(l_s))) {
        return "all";
    }
    if ((l_s == 1073741824)) {
        return "general";
    }
    return $S.callFunction("base.game", l_s, b, kwargs);
};
base.function_statsType = function(l_s, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_s == 1)) {
        return "awards";
    }
    if ((l_s == 2)) {
        return "pins";
    }
    if ((l_s == 4)) {
        return "achievements";
    }
    if ((l_s == 8)) {
        return "gadgets";
    }
    if ((l_s == 32)) {
        return "specializations";
    }
    if ((l_s == 64)) {
        return "weapons";
    }
    if ((l_s == 128)) {
        return "vehicles";
    }
};
base.function_countryFromCountryCode = function(l_cc, b, kwargs) {
    var o = {};
    var c = [];
};
base.function_numberToString = function(l_n, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_n == 1)) {
        return "one";
    } else {
        if ((l_n == 2)) {
            return "two";
        } else {
            if ((l_n == 3)) {
                return "three";
            } else {
                if ((l_n == 4)) {
                    return "four";
                } else {
                    if ((l_n == 5)) {
                        return "five";
                    } else {
                        if ((l_n == 6)) {
                            return "six";
                        } else {
                            if ((l_n == 7)) {
                                return "seven";
                            } else {
                                if ((l_n == 8)) {
                                    return "eight";
                                } else {
                                    if ((l_n == 9)) {
                                        return "nine";
                                    } else {
                                        if ((l_n == 10)) {
                                            return "ten";
                                        } else {
                                            if ((l_n == 11)) {
                                                return "eleven";
                                            } else {
                                                if ((l_n == 12)) {
                                                    return "twelve";
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return l_n;
};
base.function_soundFxMap = function(b, kwargs) {
    var o = {};
    var c = [];
    return {"NONE": 0,"CHAT_MESSAGE": 1,"NOTIFICATION": 2,"BATTLE_REPORT": 4,"FRIEND_REQUEST": 8,"GAME_READY": 16};
};
base.addTemplate(new Surface.Template("googleanalytics"));
base.addTemplate(new Surface.Template("header"));
var block_base_index = new Surface.BlockConfig("", {"footer": "base.index.block_footer","titleSite": "base.index.block_titleSite","document": "base.index.block_document","titleComponent": "base.index.block_titleComponent","bodyClass": "base.index.block_bodyClass","mainHeader": "base.index.block_mainHeader","titleItem": "base.index.block_titleItem","mainContent": "base.index.block_mainContent","head": "base.index.block_head","titleSection": "base.index.block_titleSection"});
base.addTemplate(new Surface.Template("index"));
base.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.index");
    c.push("\n");
    c.push("\n");
    c.push(b.get("document")(o, b, kwargs));
    return c.join("");
};
base.index.block_titleItem = new Surface.Block("base.index.block_titleItem");
base.index.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.index.block_titleComponent = new Surface.Block("base.index.block_titleComponent");
base.index.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.index.block_titleSite = new Surface.Block("base.index.block_titleSite");
base.index.block_titleSite.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Battlelog");
    return c.join("");
};
base.index.block_titleSection = new Surface.Block("base.index.block_titleSection");
base.index.block_titleSection.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((typeof (o) != "undefined" && o !== null && typeof (o.titleSection) != "undefined" && o.titleSection !== null)) {
        c.push(" / ");
        c.push(Surface.valOut(o.titleSection));
    }
    return c.join("");
};
base.index.block_head = new Surface.Block("base.index.block_head");
base.index.block_head.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    c.push(' <meta http-equiv="X-UA-Compatible" content="ie=edge;chrome=1" />\n');
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n <script type="text/javascript">\n var regexp = new RegExp("(http.*?\\/\\/.*?)/.*?#!(.*)", "im");\n (function(m) { if (m) document.location.href = m[1] + decodeURIComponent(m[2]); })(document.location.href.match(regexp));\n <\/script>\n <script type="text/javascript">var _sf_startpt=(new Date()).getTime();<\/script>\n <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />\n <title>\n');
    c.push(b.get("titleItem")(o, b, kwargs));
    c.push(b.get("titleComponent")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("titleSite")(o, b, kwargs));
    c.push("\n");
    c.push(b.get("titleSection")(o, b, kwargs));
    c.push('\n </title>\n <link type="text/css" rel="stylesheet" href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/css/ui-lightness/jquery-ui-1.8.custom.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n');
    c.push('<link type="text/css" rel="stylesheet" href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_3368002062.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n');
    c.push('<script type="text/javascript" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/en_US/bundle_base_index_3368002062.js", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"><\/script>\n');
    c.push("\n");
    c.push('<link type="text/css" rel="stylesheet" href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_3382017817.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n');
    c.push("\n");
    c.push('<link type="text/css" rel="stylesheet" href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_2673680925.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n');
    if ((l_realm.lang == 64)) {
        c.push('<link type="text/css" rel="stylesheet" href="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_4079160665.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    } else {
        c.push('<link type="text/css" rel="stylesheet" href="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_3638168734.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    }
    c.push("\n <script type=\"text/javascript\" id=\"base-head-webfontload\">\n var foutBrowser = ( ($.browser.mozilla && document.documentElement.style.MozTransform === '') || $.browser.opera );\n if(foutBrowser) {\n var dde = document.documentElement;\n if(!dde.className) { dde.className = 'wf-_fout'; } else { dde.className = dde.className + ' wf-_fout '; }\n }\n WebFont.load({\n custom: {\n families: ['BebasNeueRegular'],\n urls : ['/public/base/fonts/bebasNeueRegular.css']\n }\n });\n <\/script>\n <!-- Game specific style -->\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
        c.push('<link type="text/css" rel="stylesheet" href="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_736756993.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    }
    c.push("\n");
    if (((l_realm.section == Surface.globalContext.staticContext.sections.ALL) || !(l_realm.section))) {
        c.push('<link type="text/css" rel="stylesheet" href="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/bundle_base_index_757335359.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
        c.push("\n");
    } else {
        c.push("\n");
    }
    c.push('\n <!--[if lt IE 9]>\n <link href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ielt9.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" rel="stylesheet" type="text/css" />\n <![endif]-->\n <!--[if IE 7]>\n <link href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ie7.css", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" rel="stylesheet" type="text/css" />\n <![endif]-->\n <!--[if IE]>\n <style>\n input[type=password]{ padding-right: 0px;}\n </style>\n <![endif]-->\n ');
    return c.join("");
};
base.index.block_bodyClass = new Surface.Block("base.index.block_bodyClass");
base.index.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.index.block_mainHeader = new Surface.Block("base.index.block_mainHeader");
base.index.block_mainHeader.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("base" + ("." + "header")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("base" + ("." + "menu")), o, null, kwargs));
    c.push("\n");
    return c.join("");
};
base.index.block_mainContent = new Surface.Block("base.index.block_mainContent");
base.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
base.index.block_footer = new Surface.Block("base.index.block_footer");
base.index.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("footer" + ("." + "index")), o, null, kwargs));
    c.push("\n");
    return c.join("");
};
base.index.block_document = new Surface.Block("base.index.block_document");
base.index.block_document.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_bp_channels;
    var l_for_base_index_301_26_list;
    var l_bp_token;
    var l_realm;
    var l_session;
    var l_bp_user;
    var l_for_base_index_278_26_list;
    var l_for_base_index_279_30_list;
    var l_bp_log;
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    o.sectionString = $S.callFunction("base.section", l_realm.section, b, kwargs);
    c.push('\n <!DOCTYPE html>\n <html xmlns:surf="" id="base-');
    c.push(Surface.valOut(o.sectionString));
    c.push('-html">\n <head>\n');
    c.push(b.get("head")(o, b, kwargs));
    c.push('\n </head>\n <body id="base-');
    c.push(Surface.valOut(o.sectionString));
    c.push('-body" class="new-base-');
    c.push(Surface.valOut(o.sectionString));
    c.push("-body ");
    if ((l_realm.section != Surface.globalContext.staticContext.sections.BF3)) {
        c.push(" base-content-full-width");
    }
    c.push(" ");
    c.push(b.get("bodyClass")(o, b, kwargs));
    c.push('">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.userecho) != "undefined" && Surface.globalContext.staticContext.userecho !== null) ? Surface.globalContext.staticContext.userecho : false))) {
        c.push(' <div id="base-feedback-tab">\n <a onmouseover="UE.Popin.preload();" href="#" onclick="UE.Popin.show(); return false;"></a>\n </div>\n');
    }
    c.push(b.get("mainHeader")(o, b, kwargs));
    c.push(' <div id="base-wrapper">\n <div class="base-center-popups">\n <div id="base-ajax-loading">\n <div id="base-ajax-loading-inner">\n <div class="common-spinner" data-size="small"></div> ');
    c.push(Surface.valOut("Loading"));
    c.push('\n </div>\n </div>\n <div id="base-receipts"></div>\n ');
    c.push(Surface.importTemplate(("joinflow" + ("." + "popups")), o, null, kwargs));
    c.push('\n </div>\n <div id="lang">');
    c.push(Surface.valOut((l_realm.lang == 64)));
    c.push('</div>\n <div id="content-container">\n <div id="content">\n');
    c.push(b.get("mainContent")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("footer")(o, b, kwargs));
    c.push(' </div>\n <div id="popup-intro-scene"></div>\n ');
    c.push(Surface.importTemplate(("popup" + ("." + "introMain")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "introServerguide")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "introProfile")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "introPlatoon")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("notification" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("notificationevent" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("battlereport" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("sonar" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("launcher" + ("." + "empty")), o, null, kwargs));
    c.push("\n");
    c.push('<script type="text/javascript" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/generated/en_US/bundle_base_index_3507823582.js", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"><\/script>\n');
    c.push('\n <img style="display:none" src="http://api.nanigans.com/event.php?app_id=4492&type=install&name=download" />\n <script type="text/javascript" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace((("/public/generated/" + $S.callFunction("base.locale", l_realm.lang, b, kwargs)) + "/surfacetranslations.js"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"><\/script>\n ');
    c.push(Surface.importTemplate(("surfaceframework" + ("." + "index")), o, null, kwargs));
    c.push("\n");
    if (Surface.globalContext.useExperimentalPush) {
        c.push(' <script type="text/javascript" src="');
        c.push(Surface.valOut(S.Modifier.replace(Surface.globalContext.pushJavascriptUrl, "client-2.js", "client-3.js")));
        c.push('"><\/script>\n <script>\n');
        l_bp_channels = [];
        l_bp_user = "";
        l_bp_token = "";
        l_bp_log = false;
        c.push("\n");
        l_for_base_index_278_26_list = Surface.globalContext.pushConnections;
        if ((S.Modifier.count(l_for_base_index_278_26_list) > 0)) {
            for (var l_for_base_index_278_26_key in l_for_base_index_278_26_list) {
                if (!Surface.isValidLoopItem(l_for_base_index_278_26_list[l_for_base_index_278_26_key])) {
                    continue;
                }
                var l_connection = l_for_base_index_278_26_list[l_for_base_index_278_26_key];
                l_for_base_index_279_30_list = l_connection.channelsWithAuth;
                if ((S.Modifier.count(l_for_base_index_279_30_list) > 0)) {
                    for (var l_for_base_index_279_30_key in l_for_base_index_279_30_list) {
                        if (!Surface.isValidLoopItem(l_for_base_index_279_30_list[l_for_base_index_279_30_key])) {
                            continue;
                        }
                        var l_channel = l_for_base_index_279_30_list[l_for_base_index_279_30_key];
                        l_bp_channels = S.Modifier.append(l_bp_channels, l_channel);
                    }
                }
                l_bp_user = l_connection.user;
                l_bp_token = l_connection.token;
                l_bp_log = l_connection.log;
            }
        }
        c.push('\n function isIos() {\n var agent = navigator.userAgent.toLowerCase();\n var isIphone = agent.indexOf("iphone") != -1;\n var isIpad = agent.indexOf("ipad") != -1;\n var isIpod = agent.indexOf("ipod") != -1;\n return isIphone || isIpad || isIpod;\n }\n function shouldForceFlash() {\n return !isIos();\n }\n main.beaconPush = new ShardedBeaconpush(\'planet\', ');
        c.push(S.Modifier.json(Surface.globalContext.pushServers));
        c.push(', { "flashForce": shouldForceFlash(), "port": ');
        c.push(S.Modifier.json(Surface.globalContext.pushPorts));
        c.push(', "swfUrl": "');
        c.push(Surface.valOut(S.Modifier.replace(Surface.globalContext.pushFlashUrl, "/clients/client-1.swf", "/clients/web-socket.swf")));
        c.push('", "log": ');
        c.push(Surface.valOut(S.Modifier.json(l_bp_log)));
        c.push(', "user": "');
        c.push(Surface.valOut(l_bp_user));
        c.push('", "token": "');
        c.push(Surface.valOut(l_bp_token));
        c.push('" });\n');
        l_for_base_index_301_26_list = l_bp_channels;
        if ((S.Modifier.count(l_for_base_index_301_26_list) > 0)) {
            for (var l_for_base_index_301_26_key in l_for_base_index_301_26_list) {
                if (!Surface.isValidLoopItem(l_for_base_index_301_26_list[l_for_base_index_301_26_key])) {
                    continue;
                }
                var l_channel = l_for_base_index_301_26_list[l_for_base_index_301_26_key];
                c.push(" main.beaconPush.subscribe('");
                c.push(Surface.valOut(l_channel));
                c.push("').bind(Push.listener);\n");
            }
        }
        c.push("\n main.beaconPush.connect();\n <\/script>\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("surfaceframework" + ("." + "push")), o, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div id="esnlaunch_container"></div>\n </div>\n ');
    c.push(Surface.importTemplate(("comcenter" + ("." + "index")), o, null, kwargs));
    c.push('\n <div id="draggables"></div>\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null)) {
        c.push('\n <script>\n $(function() {\n base.showReceipt("');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null && typeof (o.userMessageBox.message) != "undefined" && o.userMessageBox.message !== null) ? o.userMessageBox.message : "")));
        c.push('"');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null && typeof (o.userMessageBox.type) != "undefined" && o.userMessageBox.type !== null) ? o.userMessageBox.type : "information") == "error")) {
            c.push(',"skull"');
        }
        c.push(");\n });\n <\/script>\n");
    }
    c.push('\n <script type="text/javascript">\n Surface.ajaxNavigation.setup(main.ajaxBefore, main.ajaxAfter, main.ajaxError, "!");\n <\/script>\n');
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.getsatisfaction) != "undefined" && Surface.globalContext.staticContext.getsatisfaction !== null) ? Surface.globalContext.staticContext.getsatisfaction : false)) && (S.Modifier.get(Surface.urlContext, "_language", "en") != "fr"))) {
        c.push(' <div id="feedback-popup-opener-tab" data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/popup/feedback/", Surface.urlContext)));
        c.push('"></div>\n <script type="text/javascript" charset="utf-8">\n var feedback_widget_options = {};\n feedback_widget_options.display = "overlay";\n feedback_widget_options.company = "battlefield3";\n feedback_widget_options.placement = "hidden";\n feedback_widget_options.color = "#222";\n feedback_widget_options.style = "idea";\n feedback_widget_options.tag = "Feedback";\n feedback_widget_options.limit = "5";\n var feedback_widget = new GSFN.feedback_widget(feedback_widget_options);\n $("a#fdbk_tab").hide();\n <\/script>\n');
    }
    c.push('\n <div id="soundFxPlayer"></div>\n ');
    c.push(Surface.importTemplate(("base" + ("." + "chartbeat")), o, null, kwargs));
    c.push('\n <div id="dinosaur" rel="vertebrates"></div>\n </body>\n </html>\n');
    return c.join("");
};
var block_base_menu = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("menu"));
base.menu.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menu;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menu");
    c.push('\n<div id="base-submainheader">\n <div id="base-mainheader-menudivider"></div>\n <div id="base-submainheader-content">\n');
    c.push(base.menu.surface_6_10.render({"activeMenu": ((typeof (o) != "undefined" && o !== null && typeof (o.activeMenu) != "undefined" && o.activeMenu !== null) ? o.activeMenu : null),"currentUrl": ((typeof (o) != "undefined" && o !== null && typeof (o.currentUrl) != "undefined" && o.currentUrl !== null) ? o.currentUrl : null),"realm": {"section": ((typeof (o) != "undefined" && o !== null && typeof (o.realm) != "undefined" && o.realm !== null && typeof (o.realm.section) != "undefined" && o.realm.section !== null) ? o.realm.section : null)},"s": ((typeof (o) != "undefined" && o !== null && typeof (o.s) != "undefined" && o.s !== null) ? o.s : null),"session": {"isLoggedIn": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.isLoggedIn) != "undefined" && o.session.isLoggedIn !== null) ? o.session.isLoggedIn : null)}}, b, kwargs));
    c.push('\n <div id="base-header-search" class="common-user-search-wrapper">\n <div id="base-header-search-area">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/search/getMatches/", Surface.urlContext)));
    c.push('" onsubmit="return false;" id="base-header-search-form" method="post">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="text" value="" placeholder="');
    c.push(Surface.valOut("Find soldiers"));
    c.push('" id="base-header-search-field" name="username" autocomplete="off" />\n <div class="base-header-search-field-icon"></div>\n </form>\n <div id="search-ajax-loader" class="common-user-search-spinner"><img width="16" height="16" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="ajax loader" /></div>\n </div>\n <div id="base-search-result-wrapper" class="common-user-search-results-wrapper">\n <div id="base-search-result" class="common-user-search-results">\n </div>\n </div>\n <div id="base-header-search-failmsg" class="common-user-search-failmsg">');
    c.push(Surface.valOut("Found no matching user"));
    c.push("</div>\n </div>\n </div>\n</div>\n");
    return c.join("");
};
base.menu.surface_6_10 = new Surface.SingleSurface("base.menu.surface_6_10");
base.menu.surface_6_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menu;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menu");
    c.push('<surf:container id="');
    c.push("base-header-menu");
    c.push('">');
    var l_currentUrl;
    var l_urlParts;
    var l_partCount;
    var l_activeMenu;
    var l_session;
    var l_realm;
    var l_activeSubMenu;
    l_activeMenu = S.Modifier.get(Surface.globalContext, "activeMenu");
    l_currentUrl = S.Modifier.get(Surface.globalContext, "currentUrl");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push("\n");
    l_urlParts = S.Modifier.explode(l_currentUrl, "|", true);
    l_partCount = S.Modifier.count(l_urlParts);
    if ((l_partCount > 2)) {
        l_activeSubMenu = S.Modifier.get(l_urlParts, 2);
    } else {
        l_activeSubMenu = false;
    }
    c.push('\n <div id="base-sub-navbar">\n');
    if ((l_realm.section == Surface.globalContext.staticContext.games.BFBC2)) {
        c.push(' <ul class="base-section-menu" id="base-section-nav-bfbc2">\n');
        o.s = {"_section": "bfbc2"};
        c.push('\n <li><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, o.s)));
        c.push('" class="base-header-logo base-header-logo-bfbc2"></a></li>\n <li ');
        if ((l_activeMenu == "home")) {
            c.push('class="active"');
        }
        c.push('>\n <a data="home" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Home"));
        c.push("</a>\n </li>\n <li ");
        if ((l_activeMenu == "serverguide")) {
            c.push('class="active"');
        }
        c.push('>\n <a data="serverguide" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Server Browser"));
        c.push("</a>\n </li>\n <li ");
        if ((l_activeMenu == "leaderboard")) {
            c.push('class="active"');
        }
        c.push('>\n <a data="leaderboard" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Leaderboard"));
        c.push('</a>\n </li>\n <li class="');
        if ((l_activeMenu == "devblog")) {
            c.push("active");
        } else {
            if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.showNewsUnread) != "undefined" && Surface.globalContext.showNewsUnread !== null) ? Surface.globalContext.showNewsUnread : false)) {
                c.push("news-unread");
            }
        }
        c.push('">\n <a data="devblog" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/{offset}/", Surface.urlContext, o.s)));
        c.push('" >');
        c.push(Surface.valOut("News"));
        c.push("</a>\n </li>\n <li ");
        if ((l_activeMenu == "forum")) {
            c.push('class="active"');
        }
        c.push('>\n <a data="forum" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Forums"));
        c.push("</a>\n </li>\n");
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && false)) {
            c.push(" <li ");
            if ((l_activeMenu == "admin")) {
                c.push('class="active"');
            }
            c.push('>\n <a class="wfont" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/admin/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Admin"));
            c.push("</a>\n </li>\n");
        }
        c.push(" </ul>\n ");
    }
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.games.BF3)) {
        c.push(' <input id="url-getDropdownMenu" type="hidden" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/getDropdownMenu/{type}/", Surface.urlContext, {"type": "#TYPE#"})));
        c.push('"/>\n <ul class="base-section-menu" id="base-section-nav-bf3">\n');
        o.s = {"_section": "bf3"};
        c.push('\n <li><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, o.s)));
        c.push('" class="base-header-logo base-header-logo-bf3"></a></li>\n <li class="base-section-menu-before-dropdown-link');
        if ((l_activeMenu == "home")) {
            c.push(" active");
        }
        c.push('">\n <a data="home" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Home"));
        c.push('</a>\n </li>\n <li rel="mp" class="base-section-dropdown ');
        if (((l_activeMenu == "serverguide") || ((l_activeMenu == "leaderboard") && !(l_activeSubMenu)))) {
            c.push("active");
        }
        c.push('">\n <div class="base-dropdown-left"></div><div class="base-dropdown-middle">\n <a class="wfont" data="serverguide" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("Multiplayer"));
        c.push('</a>\n </div><div class="base-dropdown-right"></div>\n');
        if (Surface.globalContext.staticContext.isOpenBeta) {
            c.push(' <div class="base-dropdown-spacer"></div>\n');
        }
        c.push(" ");
        c.push(Surface.importTemplate(("base" + ("." + "menudropdown")), {"type": "mp"}, null, kwargs));
        c.push("\n </li>\n");
        if (Surface.globalContext.staticContext.isOpenBeta) {
            c.push(' <li rel="coop">\n <span class="inactive wfont">');
            c.push(Surface.valOut("CO-OP"));
            c.push('</span>\n </li>\n <li rel="campaign" class="base-section-menu-before-dropdown-link">\n <span class="inactive wfont">');
            c.push(Surface.valOut("Campaign"));
            c.push("</span>\n </li>\n");
        } else {
            c.push(' <li rel="coop" class="base-section-dropdown ');
            if (((l_activeMenu == "coop") || ((l_activeMenu == "leaderboard") && (l_activeSubMenu == "coop")))) {
                c.push("active");
            }
            c.push('">\n <div class="base-dropdown-left"></div><div class="base-dropdown-middle">\n <a class="wfont" data="coop" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("CO-OP"));
            c.push('</a>\n </div><div class="base-dropdown-right"></div>\n <div class="base-dropdown-spacer"></div>\n ');
            c.push(Surface.importTemplate(("base" + ("." + "menudropdown")), {"type": "coop"}, null, kwargs));
            c.push('\n </li>\n <li class="base-section-menu-before-dropdown-link');
            if ((l_activeMenu == "campaign")) {
                c.push(" active");
            }
            c.push('">\n <a class="wfont" data="campaign" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/campaign/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Campaign"));
            c.push("</a>\n </li>\n");
        }
        c.push('\n <li rel="platoon" class="base-section-dropdown ');
        if ((l_activeMenu == "platoon")) {
            c.push("active");
        }
        c.push('">\n <div class="base-dropdown-left"></div><div class="base-dropdown-middle">\n');
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
            c.push(' <a class="wfont" data="platoon" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Platoons"));
            c.push("</a>\n");
        } else {
            c.push(' <a class="wfont" data="platoon" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/platoons/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Platoons"));
            c.push("</a>\n");
        }
        c.push(' </div><div class="base-dropdown-right"></div>\n <div class="base-dropdown-spacer"></div>\n ');
        c.push(Surface.importTemplate(("base" + ("." + "menudropdown")), {"type": "platoon","platoons": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.platoons) != "undefined" && Surface.globalContext.userContext.platoons !== null) ? Surface.globalContext.userContext.platoons : []),"invitedPlatoons": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.invitedPlatoons) != "undefined" && Surface.globalContext.userContext.invitedPlatoons !== null) ? Surface.globalContext.userContext.invitedPlatoons : [])}, null, kwargs));
        c.push('\n </li>\n <li class="');
        if ((l_activeMenu == "devblog")) {
            c.push("active");
        }
        c.push('">\n <a data="devblog" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/{offset}/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("News"));
        c.push("\n");
        if (((l_activeMenu != "devblog") && ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.showNewsUnread) != "undefined" && Surface.globalContext.showNewsUnread !== null) ? Surface.globalContext.showNewsUnread : false))) {
            c.push(' <div class="base-menu-news-unread"></div>\n');
        }
        c.push(" </a>\n </li>\n <li ");
        if ((l_activeMenu == "forum")) {
            c.push('class="active"');
        }
        c.push('>\n <a data="forum" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/", Surface.urlContext, o.s)));
        c.push('">');
        c.push(Surface.valOut("Forums"));
        c.push("</a>\n </li>\n </ul>\n ");
    }
    c.push('\n <div class="base-clear"></div>\n </div>\n ');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menu", "surface_6_10", "base-header-menu", o, b);
    return c.join("");
};
var block_base_menudropdown = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("menudropdown"));
base.menudropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<div class="base-dropdown-area">\n <div class="base-dropdown-area-shadow-bottom"></div>\n <div class="base-dropdown-area-inner">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.loading) != "undefined" && o.loading !== null)) {
        c.push(' <div class="base-dropdown-area-loader">\n <img width="16" height="16" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="ajax loader" />\n </div>\n');
    } else {
        c.push(" <ul>\n");
        if ((o.type == "coop")) {
            c.push(' <li class="base-dropdown-menu-item base-dropdown-item-first">\n <div><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Your CO-OP"));
            c.push('</a></div>\n </li>\n <li class="base-dropdown-menu-item">\n <div><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/coop/{group}/{platform}/{friends}/", Surface.urlContext, {"username": ((S.Modifier.get(l_session.user, "username") !== null) ? S.Modifier.get(l_session.user, "username") : "None")})));
            c.push('" >');
            c.push(Surface.valOut("Leaderboards"));
            c.push("</a></div>\n </li>\n");
        } else {
            if ((o.type == "mp")) {
                c.push(' <li class="base-dropdown-menu-item">\n <div><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
                c.push('" >');
                c.push(Surface.valOut("Server Browser"));
                c.push('</a></div>\n </li>\n <li class="base-dropdown-menu-item">\n');
                if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null))) {
                    c.push(' <div><a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"username": ((S.Modifier.get(l_session.user, "username") !== null) ? S.Modifier.get(l_session.user, "username") : "None")})));
                    c.push('" >');
                    c.push(Surface.valOut("Leaderboards"));
                    c.push("</a></div>\n");
                } else {
                    c.push(' <div><a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"username": ((S.Modifier.get(l_session.user, "username") !== null) ? S.Modifier.get(l_session.user, "username") : "None")})));
                    c.push('" >');
                    c.push(Surface.valOut("Leaderboards"));
                    c.push("</a></div>\n");
                }
                c.push(" </li>\n");
                if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
                    c.push(' <li class="base-dropdown-menu-item-highlighted">\n <div class="base-dropdown-item-padder">\n <div data-url="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getJsonFilter/", Surface.urlContext)));
                    c.push('" class="base-dropdown-menu-container base-quickmatch-serverfilter-menu" >\n');
                    c.push(base.menudropdown.surface_64_34.render({"session": {"isLoggedIn": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : null)}}, b, kwargs));
                    c.push(" </div>\n </div>\n </li>\n ");
                }
                c.push("\n");
            } else {
                if ((o.type == "campaign")) {
                    c.push(' <li class="base-dropdown-menu-item base-dropdown-item-first">\n <div><a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/campaign/", Surface.urlContext)));
                    c.push('">');
                    c.push(Surface.valOut("Campaign overview"));
                    c.push("</a></div>\n </li>\n");
                    if (((typeof (l_session) != "undefined" && l_session !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
                        c.push(' <li class="base-dropdown-menu-item-highlighted">\n <div class="base-dropdown-item-padder">\n <button class="launch-campaign-button base-button-arrow-large">');
                        c.push(Surface.valOut("Launch campaign"));
                        c.push("</button>\n </div>\n </li>\n");
                    }
                    c.push("\n");
                } else {
                    if ((o.type == "platoon")) {
                        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
                            c.push(" ");
                            c.push('\n <li class="base-dropdown-menu-item">\n <div><a href="');
                            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": "landing"})));
                            c.push('">');
                            c.push(Surface.valOut("Find or Create Platoon"));
                            c.push("</a></div>\n </li>\n ");
                        }
                        c.push("\n");
                        if (Surface.globalContext.staticContext.venice) {
                            if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
                                c.push('\n <li class="base-dropdown-menu-item-highlighted">\n');
                                c.push(base.menudropdown.surface_156_26.render({"platoons": ((typeof (o) != "undefined" && o !== null && typeof (o.platoons) != "undefined" && o.platoons !== null) ? o.platoons : null)}, b, kwargs));
                                c.push(' </li>\n <li class="base-dropdown-menu-item-highlighted base-dropdown-menu-item-highlighted-texture">\n');
                                c.push(base.menudropdown.surface_171_26.render({"invitedPlatoons": ((typeof (o) != "undefined" && o !== null && typeof (o.invitedPlatoons) != "undefined" && o.invitedPlatoons !== null) ? o.invitedPlatoons : null)}, b, kwargs));
                                c.push(" </li>\n");
                            }
                        }
                        c.push(" ");
                    }
                }
            }
        }
        c.push("\n </ul>\n ");
    }
    c.push('\n <div style="clear:both;"></div>\n </div>\n</div>');
    return c.join("");
};
base.menudropdown.surface_64_34 = new Surface.SingleSurface("base.menudropdown.surface_64_34");
base.menudropdown.surface_64_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    c.push('<surf:container id="');
    c.push("base-dropdown-quickmatch-surface");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <button class="base-button-arrow-large-drop base-button-general-dropdown">');
        c.push(Surface.valOut("Quick match"));
        c.push('</button>\n <div class="base-general-dropdown-area base-dropdown-menu-mp-qm-dropdown">\n <div class="base-button-dropdown-inner">\n <ul>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.isLoggedIn) != "undefined" && o.session.isLoggedIn !== null) ? o.session.isLoggedIn : false)) {
            c.push(' <li>\n <a class="base-no-ajax gamemanager-launch-quickmatch">\n <span class="join-alone"></span> ');
            c.push(Surface.valOut("Join alone"));
            c.push('\n </a>\n </li>\n <li>\n <a id="base-section-nav-bf3-groupjoin" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": "quickmatch"})));
            c.push('" class="base-no-ajax base-button-dropdown-joingroup">\n <span class="join-party"></span> Join with Party\n </a>\n </li>\n');
        }
        c.push(' </ul>\n <div class="base-clear"></div>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n <div class="base-clear"></div>\n');
    } else {
        c.push(' <button class="gamemanager-launch-quickmatch base-button-arrow-large">');
        c.push(Surface.valOut("Quick match"));
        c.push("</button>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menudropdown", "surface_64_34", "base-dropdown-quickmatch-surface", o, b);
    return c.join("");
};
base.menudropdown.surface_156_26 = new Surface.SurfaceList("base.menudropdown.surface_156_26", "platoons", "p", "p.id");
base.menudropdown.surface_158_30 = new Surface.SingleSurface("base.menudropdown.surface_158_30");
base.menudropdown.surface_158_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("base-dropdown-menu-your-platoons", S.Modifier.concat("_", o.p.id)));
    c.push('">');
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.p.id})));
    c.push('" class="base-dropdown-item-platoon">\n');
    if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.activePlatoon) != "undefined" && Surface.globalContext.userContext.activePlatoon !== null) && (o.p.id == Surface.globalContext.userContext.activePlatoon.id))) {
        c.push(' <div class="base-dropdown-item-platoon-active"></div>\n');
    }
    c.push(' <div class="base-dropdown-item-platoon-image">');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.p.id,"bp": o.p.badgePath,"size": 26,"noLink": true}, null, kwargs));
    c.push("</div>\n <span>");
    c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.p.name,"first": 15,"limit": 15}, null, kwargs));
    c.push("</span>\n </a>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menudropdown", "surface_158_30", S.Modifier.concat("base-dropdown-menu-your-platoons", S.Modifier.concat("_", o.p.id)), o, b);
    return c.join("");
};
base.menudropdown.surface_156_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    c.push('<surf:container id="');
    c.push("base-dropdown-menu-your-platoons");
    c.push('">');
    var l_for_base_menudropdown_156_26_list;
    l_for_base_menudropdown_156_26_list = o.platoons;
    if ((S.Modifier.count(l_for_base_menudropdown_156_26_list) > 0)) {
        c.push(' <h4 class="base-dropdown-item-headline">');
        c.push(Surface.valOut("Your Platoons"));
        c.push("</h4>\n");
        for (var l_for_base_menudropdown_156_26_key in l_for_base_menudropdown_156_26_list) {
            if (!Surface.isValidLoopItem(l_for_base_menudropdown_156_26_list[l_for_base_menudropdown_156_26_key])) {
                continue;
            }
            var l_p = l_for_base_menudropdown_156_26_list[l_for_base_menudropdown_156_26_key];
            c.push(base.menudropdown.surface_158_30.render({"p": ((typeof (l_p) != "undefined" && l_p !== null) ? l_p : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menudropdown", "surface_156_26", "base-dropdown-menu-your-platoons", o, b);
    return c.join("");
};
base.menudropdown.surface_171_26 = new Surface.SurfaceList("base.menudropdown.surface_171_26", "invitedPlatoons", "p", "p.id");
base.menudropdown.surface_173_30 = new Surface.SingleSurface("base.menudropdown.surface_173_30");
base.menudropdown.surface_173_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("base-dropdown-menu-your-invited-platoons", S.Modifier.concat("_", o.p.id)));
    c.push('">');
    c.push(' <div class="base-dropdown-item-platoon">\n <div id="platoon-dropdown" class="base-dropdown-item-requestarea">\n <form data-platoonId="');
    c.push(Surface.valOut(o.p.id));
    c.push('" class="platoon-request-form" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/acceptinvite/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="platoonId" value="');
    c.push(Surface.valOut(o.p.id));
    c.push('" />\n <input type="submit" name="submit" value=" " class="comcenter-friend-request-button base-button-yes" />\n </form>\n <form data-platoonId="');
    c.push(Surface.valOut(o.p.id));
    c.push('" class="platoon-request-form" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/declineinvite/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="platoonId" value="');
    c.push(Surface.valOut(o.p.id));
    c.push('" />\n <input type="submit" name="submit" value=" " class="comcenter-friend-request-button base-button-no" />\n </form>\n </div>\n <div class="base-dropdown-item-platoon-image">');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.p.id,"bp": o.p.badgePath,"size": 26,"noLink": true}, null, kwargs));
    c.push('</div>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.p.id})));
    c.push('"><span>');
    c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.p.name,"first": 8,"limit": 8}, null, kwargs));
    c.push("</span></a>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menudropdown", "surface_173_30", S.Modifier.concat("base-dropdown-menu-your-invited-platoons", S.Modifier.concat("_", o.p.id)), o, b);
    return c.join("");
};
base.menudropdown.surface_171_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_menudropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.menudropdown");
    c.push('<surf:container id="');
    c.push("base-dropdown-menu-your-invited-platoons");
    c.push('">');
    var l_for_base_menudropdown_171_26_list;
    l_for_base_menudropdown_171_26_list = o.invitedPlatoons;
    if ((S.Modifier.count(l_for_base_menudropdown_171_26_list) > 0)) {
        c.push(' <h4 class="base-dropdown-item-headline">');
        c.push(Surface.valOut("Pending invites"));
        c.push("</h4>\n");
        for (var l_for_base_menudropdown_171_26_key in l_for_base_menudropdown_171_26_list) {
            if (!Surface.isValidLoopItem(l_for_base_menudropdown_171_26_list[l_for_base_menudropdown_171_26_key])) {
                continue;
            }
            var l_p = l_for_base_menudropdown_171_26_list[l_for_base_menudropdown_171_26_key];
            c.push(base.menudropdown.surface_173_30.render({"p": ((typeof (l_p) != "undefined" && l_p !== null) ? l_p : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("base.menudropdown", "surface_171_26", "base-dropdown-menu-your-invited-platoons", o, b);
    return c.join("");
};
var block_base_omniture = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("omniture"));
base.omniture.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_omniture;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.omniture");
    var l_omniture_page_desc;
    var l_current_page;
    var l_current_platform;
    var l_page_id;
    var l_pages_to_track;
    var l_omniture_page_code;
    var l_http_prefix;
    var l_omniture_page_bucket;
    var l_session;
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.pageid) != "undefined" && o.pageid !== null)) {
        l_page_id = o.pageid;
    } else {
        l_page_id = ((Surface.globalContext.componentName + "-") + Surface.globalContext.actionName);
    }
    c.push("\n");
    l_pages_to_track = $S.callFunction("base.pages_to_track", b, kwargs);
    l_current_page = S.Modifier.get(l_pages_to_track, l_page_id);
    c.push("\n");
    if (l_current_page) {
        c.push("\n");
        l_omniture_page_code = l_current_page.code;
        l_omniture_page_bucket = l_current_page.bucket;
        c.push("\n");
        if ((l_omniture_page_code == "NEWSARTICLE")) {
            if ((typeof (o) != "undefined" && o !== null && typeof (o.blogPost) != "undefined" && o.blogPost !== null)) {
                l_omniture_page_desc = o.blogPost.title;
            } else {
                c.push("\n");
                l_omniture_page_desc = "Degradation";
            }
        } else {
            if ((l_current_page == "FORUMCATEGORY")) {
                l_omniture_page_desc = o.forum.title;
            } else {
                if ((l_current_page == "FORUMTOPIC")) {
                    l_omniture_page_desc = o.thread.title;
                } else {
                    l_omniture_page_desc = l_current_page.desc;
                }
            }
        }
    } else {
        c.push("\n");
        l_omniture_page_code = "";
        l_omniture_page_desc = "";
        l_omniture_page_bucket = "General Info";
    }
    c.push("\n");
    l_session = ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null) ? Surface.globalContext.session : false);
    if (((l_session && l_session.currentPersona) && l_session.currentPersona.namespace)) {
        if (((l_session.currentPersona.namespace == Surface.globalContext.staticContext.nucleusNamespaces.CEM_EA_ID) || (l_session.currentPersona.namespace == Surface.globalContext.staticContext.nucleusNamespaces.BATTLEFIELD))) {
            l_current_platform = "PC";
        } else {
            if ((l_session.currentPersona.namespace == Surface.globalContext.staticContext.nucleusNamespaces.XBOX)) {
                l_current_platform = "XBOX360";
            } else {
                if ((l_session.currentPersona.namespace == Surface.globalContext.staticContext.nucleusNamespaces.PS3)) {
                    l_current_platform = "PS3";
                } else {
                    l_current_platform = "Unknown";
                }
            }
        }
    } else {
        l_current_platform = "Not available";
    }
    c.push("\n");
    if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.isSecure) != "undefined" && Surface.globalContext.isSecure !== null) ? Surface.globalContext.isSecure : false)) {
        l_http_prefix = "https://ssl.";
    } else {
        l_http_prefix = "http://";
    }
    c.push('\n<div id="omnitureWrapper" style="display:none;">\n<script language="JavaScript" src="');
    c.push(Surface.valOut(l_http_prefix));
    c.push('resources.ea.com/omniture/utils.js"><\/script>\n<script language="javascript">\n<!--\nvar s_account=omniCheckHost("eaeacom,eaeacomna,eaeabrandna,eaproductbf3battlelogna");\nvar s_imageDisableFlag=0;\n//-->\n<\/script>\n<script language="JavaScript" src="');
    c.push(Surface.valOut(l_http_prefix));
    c.push('resources.ea.com/omniture/s_code_remote_v02.js"><\/script>\n<script language="JavaScript">\n<!--\ns_ea.pageName="NA:US:GAMES:DICE:MKT:BATTLEFIELD:BF3BATTLELOG:BF3:');
    c.push(Surface.valOut(l_omniture_page_code));
    c.push('";\ns_ea.server="";\ns_ea.channel="";\ns_ea.pageType="";\ns_ea.hier1=\'D=pageName\';\ns_ea.prop1=s_ea.setUserState(\'No ID\');\ns_ea.prop2="BF3";\ns_ea.prop3="GAMES";\ns_ea.prop4="BATTLEFIELD";\ns_ea.prop5="BF3BATTLELOG";\ns_ea.prop6="";\ns_ea.prop7="DICE";\ns_ea.prop9="MKT";\ns_ea.prop10="');
    c.push(Surface.valOut(l_omniture_page_desc));
    c.push('";\ns_ea.prop11="NA";\ns_ea.prop12="en_US";\ns_ea.prop15="');
    c.push(Surface.valOut(l_omniture_page_bucket));
    c.push('";\ns_ea.prop17="US";\ns_ea.prop18=\'D=c17+":"+c5\';\ns_ea.prop35="";\ns_ea.prop66="');
    c.push(Surface.valOut(l_current_platform));
    c.push("\";\n/* E-commerce Variables */\ns_ea.eVar1='D=c1';\ns_ea.eVar3='D=c5';\ns_ea.eVar17='D=c17';\ns_ea.eVar18='D=c11';\ns_ea.eVar21='D=c5';\ns_ea.eVar29=s_ea.setInitValOnce('US:BF3BATTLELOG:BF3');\ns_ea.eVar30='D=c17+\":\"+c5+\":\"+c2';\ns_ea.eVar34='D=c3';\n/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/\nif((typeof (s_imageDisableFlag) == 'undefined') || (s_imageDisableFlag == null) || (!s_imageDisableFlag)){\nvar s_code=s_ea.t();if(s_code)document.write(s_code)\n}\n//-->\n<\/script>\n<script language=\"javascript\" type=\"text/javascript\" src=\"");
    c.push(Surface.valOut(l_http_prefix));
    c.push('resources.ea.com/omniture/omniture_wrapper.js"><\/script>\n</div>\n');
    return c.join("");
};
var block_base_omnitureinfo = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("omnitureinfo"));
base.omnitureinfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_omnitureinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.omnitureinfo");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
base.function_pages_to_track = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_pages;
    l_pages = {"gate-index": {"code": "SIGNIN","desc": "Sign In","bucket": "General Info"},"gate-error": {"code": "SIGNINERROR","desc": "Sign In Error","bucket": "General Info"},"main-index": {"code": "HOME","desc": "Home","bucket": "General Info"},"serverguide-index": {"code": "SERVERBROWSER","desc": "Server Browser","bucket": "Server"},"serverguide-friends": {"code": "SERVERFRIENDS","desc": "Server Friends","bucket": "Server"},"serverguide-history": {"code": "SERVERHISTORY","desc": "Server History","bucket": "Server"},"serverguide-favourites": {"code": "SERVERFAVOURITES","desc": "Server Favourites","bucket": "Server"},"leaderboard-index": {"code": "LEADERBOARDS","desc": "Leaderboards","bucket": "General Info"},"devblog-index": {"code": "NEWSINDEX","desc": "News Index","bucket": "News"},"devblog-view": {"code": "NEWSARTICLE","desc": "[Capture News Article Title]","bucket": "News"},"forum-index": {"code": "FORUMINDEX","desc": "Forum Index","bucket": "Forum"},"forum-view": {"code": "FORUMCATEGORY","desc": "[Capture Forum Category Title]","bucket": "Forum"},"forum-threadview": {"code": "FORUMTOPIC","desc": "[Capture Forum Topic Title]","bucket": "Forum"},"profile-view": {"code": "PROFILEOVERVIEW","desc": "Profile Overview","bucket": "Profile"},"profile-friends": {"code": "PROFILEFRIENDS","desc": "Profile Friends","bucket": "Profile"},"profile-servers": {"code": "PROFILESERVERS","desc": "Profile Servers","bucket": "Profile"},"profile-edit": {"code": "EDITPROFILE","desc": "Edit Profile","bucket": "Profile"},"profile-stats": {"code": "STATS","desc": "Stats and Progression","bucket": "Profile"},"profile-weapons": {"code": "EQUIPMENT","desc": "Weapons and Equipment","bucket": "Profile"},"profile-vehicles": {"code": "VEHICLES","desc": "Vehicles","bucket": "Profile"},"profile-awards": {"code": "AWARDS","desc": "Awards","bucket": "Profile"},"profile-unlocks": {"code": "UNLOCKS","desc": "Upcoming unlocks","bucket": "Profile"}};
    return l_pages;
};
base.addTemplate(new Surface.Template("personaselect"));
base.addTemplate(new Surface.Template("popupnewgameversion"));
var block_base_postChecksum = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("postChecksum"));
base.postChecksum.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_postChecksum;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.postChecksum");
    c.push('\n<input type="hidden" name="post-check-sum" value="');
    c.push(Surface.valOut(((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.postChecksum) != "undefined" && Surface.globalContext.session.postChecksum !== null) ? Surface.globalContext.session.postChecksum : "")));
    c.push('" />');
    return c.join("");
};
var block_base_searchresults = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("searchresults"));
base.searchresults.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_searchresults;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.searchresults");
    var l_for_base_searchresults_5_10_list;
    c.push('\n<div class="base-search-content">\n <ul class="base-search-ul">\n');
    l_for_base_searchresults_5_10_list = ((typeof (o) != "undefined" && o !== null && typeof (o.results) != "undefined" && o.results !== null) ? o.results : []);
    if ((S.Modifier.count(l_for_base_searchresults_5_10_list) > 0)) {
        for (var l_for_base_searchresults_5_10_key in l_for_base_searchresults_5_10_list) {
            if (!Surface.isValidLoopItem(l_for_base_searchresults_5_10_list[l_for_base_searchresults_5_10_key])) {
                continue;
            }
            var l_result = l_for_base_searchresults_5_10_list[l_for_base_searchresults_5_10_key];
            c.push(' <li data-path="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": S.Modifier.get(l_result, "username")})));
            c.push('">');
            c.push(Surface.valOut(S.Modifier.get(l_result, "username")));
            c.push("</li>\n");
        }
    }
    c.push(" </ul>\n</div>");
    return c.join("");
};
var block_base_usermessages = new Surface.BlockConfig("", {});
base.addTemplate(new Surface.Template("usermessages"));
base.usermessages.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_base_usermessages;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("base");
    Surface.Renderer.addUsedTemplate("base.usermessages");
    c.push("\n");
    if ((o.msg == "FRIEND_ADDED")) {
        c.push(Surface.valOut("Friend added"));
        c.push("\n");
    } else {
        if ((o.msg == "GAMESERVERBOOKMARK_FAILED")) {
            c.push(Surface.valOut("Failed to add/remove favourite, please try again"));
            c.push("\n");
        } else {
            if ((o.msg == "GAMESERVERBOOKMARK_ADDED")) {
                c.push(Surface.valOut("Server added to favourites"));
                c.push("\n");
            } else {
                if ((o.msg == "GAMESERVERBOOKMARK_REMOVED")) {
                    c.push(Surface.valOut("Server removed from favourites"));
                    c.push("\n");
                } else {
                    c.push(Surface.valOut(o.msg));
                    c.push("\n");
                }
            }
        }
    }
    return c.join("");
};
if (typeof battlereport == "undefined") {
    var battlereport = {};
}
var surf_battlereport_component = new Surface.Component("battlereport");
surf_battlereport_component.extend(battlereport);
battlereport = surf_battlereport_component;
var block_battlereport_debugeor = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("debugeor"));
battlereport.debugeor.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_debugeor;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.debugeor");
    c.push('\n<div class="base-clear"></div>\n<h1>playerReport</h1>\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.playerReport)));
    c.push('</pre>\n<div class="base-clear"></div>\n<h1>unlocks</h1>\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.unlocks)));
    c.push('</pre>\n<div class="base-clear"></div>\n<h1>rankInfo</h1>\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.rankInfo)));
    c.push('</pre>\n<div class="base-clear"></div>\n<h1>');
    c.push(Surface.valOut(o.gameReport.gameServer.name));
    c.push("</h1>\n<br>\n<br>Gamemode:<br>");
    c.push(Surface.valOut(o.gameReport.gameServer.mapMode));
    c.push("\n<br>\n<br>\n<br>Scores:<br>");
    c.push(Surface.valOut(S.Modifier.dump(o.gameReport.mapModeResult)));
    c.push("\n<br>\n<br>\n<br>Teams:<br>\n");
    c.push(Surface.valOut(S.Modifier.dump(o.gameReport.teamFactionMapping)));
    c.push("\n<br>\n<br>Duration:<br>");
    c.push(Surface.valOut(S.Modifier.duration(o.gameReport.duration)));
    c.push('\n<br>\n<br>Prizes:<br>\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.gameReport.prizes)));
    c.push('</pre>\n<br>\n<br>gameReport:<br>\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.gameReport)));
    c.push("</pre>\n");
    return c.join("");
};
var block_battlereport_debugshow = new Surface.BlockConfig("base.ajaxindex", {"topTitle": "battlereport.debugshow.block_topTitle","bodyClass": "battlereport.debugshow.block_bodyClass","titleItem": "battlereport.debugshow.block_titleItem","mainContent": "battlereport.debugshow.block_mainContent"});
battlereport.addTemplate(new Surface.Template("debugshow"));
var block_battlereport_debugshow_use_76_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "battlereport.debugshow._use_76_22_block_content","extraClassInner": "battlereport.debugshow._use_76_22_block_extraClassInner","titleContainer": "battlereport.debugshow._use_76_22_block_titleContainer","extraClass": "battlereport.debugshow._use_76_22_block_extraClass"});
battlereport.debugshow.surface_17_14 = new Surface.SingleSurface("battlereport.debugshow.surface_17_14");
battlereport.debugshow._use_76_22_block_extraClass = new Surface.Block("battlereport.debugshow._use_76_22_block_extraClass");
battlereport.debugshow._use_76_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-topscores");
    return c.join("");
};
battlereport.debugshow._use_76_22_block_extraClassInner = new Surface.Block("battlereport.debugshow._use_76_22_block_extraClassInner");
battlereport.debugshow._use_76_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-topscores-inner");
    return c.join("");
};
battlereport.debugshow._use_76_22_block_titleContainer = new Surface.Block("battlereport.debugshow._use_76_22_block_titleContainer");
battlereport.debugshow._use_76_22_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
battlereport.debugshow._use_76_22_block_content = new Surface.Block("battlereport.debugshow._use_76_22_block_content");
battlereport.debugshow._use_76_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_scoreHeaderLocale;
    var l_user;
    var l_headerLocale;
    var l_for_battlereport_debugshow_82_30_list;
    l_for_battlereport_debugshow_82_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.prizes) != "undefined" && o.gameReport.prizes !== null) ? o.gameReport.prizes : {});
    if ((S.Modifier.count(l_for_battlereport_debugshow_82_30_list) > 0)) {
        for (var l_for_battlereport_debugshow_82_30_key in l_for_battlereport_debugshow_82_30_list) {
            if (!Surface.isValidLoopItem(l_for_battlereport_debugshow_82_30_list[l_for_battlereport_debugshow_82_30_key])) {
                continue;
            }
            var l_prize = l_for_battlereport_debugshow_82_30_list[l_for_battlereport_debugshow_82_30_key];
            c.push(' <div class="battlereport-topscores-column">\n');
            l_headerLocale = S.Modifier.concat("ID_WEB_BATTLEREPORT_WEBPRIZE_", S.Modifier.upper(S.Modifier.get(l_prize, "type", "UNKNOWN")));
            c.push(" <h3>");
            c.push(Surface.valOut((S.translations[l_headerLocale] || l_headerLocale)));
            c.push("</h3>\n");
            l_user = S.Modifier.get(l_prize, "user", {});
            c.push(' <div class="battlereport-topscores-column-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_user,"gravatarSize": 52}, null, kwargs));
            c.push('\n </div>\n <div class="battlereport-topscores-column-info">\n <div class="battlereport-topscores-column-username">\n');
            if (((typeof (l_prize) != "undefined" && l_prize !== null && typeof (l_prize.persona) != "undefined" && l_prize.persona !== null && typeof (l_prize.persona.personaName) != "undefined" && l_prize.persona.personaName !== null) ? l_prize.persona.personaName : false)) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_prize.persona, ((typeof (l_prize) != "undefined" && l_prize !== null && typeof (l_prize.persona) != "undefined" && l_prize.persona !== null && typeof (l_prize.persona.game) != "undefined" && l_prize.persona.game !== null) ? l_prize.persona.game : 2), ((typeof (l_prize) != "undefined" && l_prize !== null && typeof (l_prize.persona) != "undefined" && l_prize.persona !== null && typeof (l_prize.persona.namespace) != "undefined" && l_prize.persona.namespace !== null) ? l_prize.persona.namespace : 1), b, kwargs))));
                c.push('">');
                c.push(Surface.valOut(((typeof (l_prize) != "undefined" && l_prize !== null && typeof (l_prize.persona) != "undefined" && l_prize.persona !== null && typeof (l_prize.persona.personaName) != "undefined" && l_prize.persona.personaName !== null) ? l_prize.persona.personaName : "Unknown player")));
                c.push("</a>\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut(((typeof (l_prize) != "undefined" && l_prize !== null && typeof (l_prize.persona) != "undefined" && l_prize.persona !== null && typeof (l_prize.persona.personaName) != "undefined" && l_prize.persona.personaName !== null) ? l_prize.persona.personaName : "Unknown player")));
                c.push("\n");
            }
            c.push(" </div>\n");
            l_scoreHeaderLocale = S.Modifier.concat(l_headerLocale, "_SCORE");
            c.push(" <h6>");
            c.push(Surface.valOut((S.translations[l_scoreHeaderLocale] || l_scoreHeaderLocale)));
            c.push("</h6>\n <p>");
            c.push(Surface.valOut(S.Modifier.get(l_prize, "score", "N/A")));
            c.push("</p>\n </div>\n </div>\n");
        }
    }
    c.push('\n <div class="base-clear"></div>\n');
    return c.join("");
};
battlereport.debugshow.surface_17_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_debugshow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.debugshow");
    c.push('<surf:container id="');
    c.push("battlereport");
    c.push('">');
    var l_for_battlereport_debugshow_48_30_iteration;
    var l_gameServer;
    var l_session;
    var l_mapNameLocale;
    var l_for_battlereport_debugshow_48_30_list;
    var l_mapinfo;
    o.squadLetters = {"1": "A","2": "B","3": "C","4": "D","5": "E","6": "F","7": "G","8": "H"};
    c.push('\n <div class="battlereport-header">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        l_gameServer = S.Modifier.get(o.gameReport, "gameServer", {});
        l_mapinfo = $S.callFunction("serverguide.mapinfo", S.Modifier.get(o.gameReport, "game", 2), S.Modifier.get(l_gameServer, "map", "Unknown"), b, kwargs);
        l_mapNameLocale = S.Modifier.get(l_mapinfo, "name", "ABC");
    }
    c.push(' <h1 class="base-big-title wfont">Battle report');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(": ");
        c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1))));
    }
    c.push('</h1>\n <div class="base-clear"></div>\n <p class="base-big-title-info battlereport-header-info">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(' <span class="battlereport-header-info-gameicon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", S.Modifier.get(o.gameReport, "game", 2), S.Modifier.get(o.gameReport, "platform", 1), S.Modifier.get(o.gameReport, "gameExpansion", 0), b, kwargs)));
        c.push('"></span>\n <span>');
        c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(o.gameReport, "createdAt", 1)}, null, kwargs));
        c.push("</span> on\n <span>");
        c.push(Surface.valOut(S.Modifier.get(l_gameServer, "name", "Unknown server")));
        c.push("</span> &bull;\n <span>");
        c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(o.gameReport, "duration", 1))));
        c.push("</span> &bull;\n <span>");
        c.push(Surface.valOut((S.translations[l_mapNameLocale] || l_mapNameLocale)));
        c.push("</span> &bull;\n <span>Up to ");
        c.push(Surface.valOut(S.Modifier.get(l_gameServer, "maxPlayers", "-")));
        c.push(" players</span> &bull;\n <span>PB: ");
        if (S.Modifier.get(l_gameServer, "punkbuster", false)) {
            c.push("On");
        } else {
            c.push("Off");
        }
        c.push("</span> &bull;\n <span>");
        c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", ((typeof (l_gameServer) != "undefined" && l_gameServer !== null && typeof (l_gameServer.preset) != "undefined" && l_gameServer.preset !== null) ? l_gameServer.preset : 1), b, kwargs)));
        c.push("</span> &bull;\n <span>");
        if (S.Modifier.get(l_gameServer, "ranked", false)) {
            c.push("Ranked");
        } else {
            c.push("Unranked");
        }
        c.push("</span>\n");
    }
    c.push(" </p>\n </div>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(' <div id="battlereport-teamscores">\n');
        o.teams = $S.callFunction("battlereport.getTeamNames", S.Modifier.get(o.gameReport, "teamFactionMapping", {}), S.Modifier.get(o.gameReport.mapModeResult, "life", S.Modifier.get(o.gameReport.mapModeResult, "kill", {})), ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1), b, kwargs);
        o.gamemode = ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1);
        c.push(' <div class="battlereport-teamscores-scores');
        if ((S.Modifier.count(o.teams) == 4)) {
            c.push(" big");
        }
        c.push('">\n');
        l_for_battlereport_debugshow_48_30_list = o.teams;
        l_for_battlereport_debugshow_48_30_iteration = 0;
        if ((S.Modifier.count(l_for_battlereport_debugshow_48_30_list) > 0)) {
            for (var l_teamId in l_for_battlereport_debugshow_48_30_list) {
                if (!Surface.isValidLoopItem(l_for_battlereport_debugshow_48_30_list[l_teamId])) {
                    continue;
                }
                var l_team = l_for_battlereport_debugshow_48_30_list[l_teamId];
                l_for_battlereport_debugshow_48_30_iteration = (l_for_battlereport_debugshow_48_30_iteration + 1);
                c.push(' <div data-teamId="');
                c.push(Surface.valOut(l_teamId));
                c.push('" class="battlereport-teamscores-score ');
                if ((Surface.modulo(l_for_battlereport_debugshow_48_30_iteration, 2) == 0)) {
                    c.push(" last");
                }
                if ((S.Modifier.get(o.gameReport, "winner", 0) == l_teamId)) {
                    c.push(" winner");
                }
                c.push('">\n ');
                c.push(Surface.valOut((S.translations[l_team] || l_team)));
                c.push('\n <div class="battlereport-teamscores-score-value">\n');
                if (((o.gamemode == 1) || (o.gamemode == 64))) {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.get(o.gameReport.mapModeResult.life, l_teamId, "N/A")));
                    c.push("\n");
                } else {
                    if (((o.gamemode == 32) || (o.gamemode == 8))) {
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.get(o.gameReport.mapModeResult.kill, l_teamId, "N/A")));
                        c.push("\n");
                    }
                }
                c.push(' </div>\n <div class="battlereport-teamscores-score-msg">\n ');
                if ((l_teamId == S.Modifier.get(o.gameReport, "winner", 0))) {
                    c.push("<p>Winner!</p>");
                }
                c.push('\n <div class="battlereport-teamscores-score-avatar">\n');
                if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null)) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null) ? Surface.globalContext.session.user : false),"gravatarSize": 22}, null, kwargs));
                    c.push("\n");
                }
                c.push(" </div>\n </div>\n </div>\n");
            }
        }
        c.push(" </div>\n </div>\n");
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_battlereport_debugshow_use_76_22, kwargs));
    } else {
        if ((!((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null)) && (o.personaId > 0))) {
            c.push(' <div class="battlereport-header-loadwrapper">\n <div class="battlereport-load-spinner"></div>\n </div>\n');
        }
    }
    c.push('\n <div class="base-clear"></div>\n <div id="battlereport-playerscore-checkpoint"></div>\n');
    if (((o.personaId > 0) || ((typeof (o) != "undefined" && o !== null && typeof (o.playerReport) != "undefined" && o.playerReport !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false) != false)))) {
        c.push(" ");
        c.push(Surface.importTemplate(("battlereport" + ("." + "personalstats")), o, null, kwargs));
        c.push("\n");
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(" ");
        c.push(Surface.importTemplate(("battlereport" + ("." + "teamstats")), o, null, kwargs));
        c.push('\n <div class="battlereport-comment-list">\n');
        l_session = S.Modifier.get(Surface.globalContext, "session");
        o.v = {"comments": o.comments,"session": l_session,"itemInfo": {"id": o.metaId,"type": "battlereport-round-comment"}};
        c.push(" ");
        c.push(Surface.importTemplate(("comment" + ("." + "index")), o.v, null, kwargs));
        c.push("\n </div>\n");
    } else {
        if (!((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null))) {
            c.push(' <div class="battlereport-load-spinner"></div>\n');
        } else {
            c.push(' <div id="serverguide-noservers">\n <h1>Battle Report no longer available</h1>\n <p>Could not find the Battle Report in the Statistics engine</p>\n </div>\n');
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("battlereport.debugshow", "surface_17_14", "battlereport", o, b);
    return c.join("");
};
var block_battlereport_disabled = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "battlereport.disabled.block_mainContent"});
battlereport.addTemplate(new Surface.Template("disabled"));
battlereport.disabled.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_disabled;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.disabled");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
battlereport.disabled.block_mainContent = new Surface.Block("battlereport.disabled.block_mainContent");
battlereport.disabled.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <h1>Battle Reports are currently disabled</h1>\n </div>\n');
    return c.join("");
};
battlereport.addTemplate(new Surface.Template("empty"));
var block_battlereport_functions = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("functions"));
battlereport.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.functions");
    c.push("\n");
    return c.join("");
};
battlereport.function_getAttacker = function(l_scores, b, kwargs) {
    var o = {};
    var c = [];
    if ((S.Modifier.get(l_scores, "2", 0) > S.Modifier.get(l_scores, "1", 0))) {
        return "1";
    } else {
        return "2";
    }
};
battlereport.function_getTeamNames = function(l_teams, l_scores, l_gamemode, b, kwargs) {
    var o = {};
    var c = [];
    var l_attackerTeam;
    var l_for_battlereport_functions_18_10_list;
    var l_r;
    var l_side;
    var l_for_battlereport_functions_27_10_list;
    var l_for_battlereport_functions_14_10_list;
    l_attackerTeam = $S.callFunction("battlereport.getAttacker", l_scores, b, kwargs);
    l_r = {};
    if (((l_gamemode == 1) || (l_gamemode == 64))) {
        l_for_battlereport_functions_14_10_list = l_teams;
        if ((S.Modifier.count(l_for_battlereport_functions_14_10_list) > 0)) {
            for (var l_teamId in l_for_battlereport_functions_14_10_list) {
                if (!Surface.isValidLoopItem(l_for_battlereport_functions_14_10_list[l_teamId])) {
                    continue;
                }
                var l_team = l_for_battlereport_functions_14_10_list[l_teamId];
                c.push(Surface.valOut(S.Modifier.set(l_r, l_teamId, S.Modifier.concat("ID_WEB_BATTLEREPORT_TEAM_", l_team))));
            }
        }
    } else {
        if (((l_gamemode == 2) || (l_gamemode == 4))) {
            l_for_battlereport_functions_18_10_list = l_teams;
            if ((S.Modifier.count(l_for_battlereport_functions_18_10_list) > 0)) {
                for (var l_teamId in l_for_battlereport_functions_18_10_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_functions_18_10_list[l_teamId])) {
                        continue;
                    }
                    var l_team = l_for_battlereport_functions_18_10_list[l_teamId];
                    l_side = "DEFENDER";
                    if ((l_teamId == l_attackerTeam)) {
                        l_side = "ATTACKER";
                    }
                    c.push(Surface.valOut(S.Modifier.set(l_r, l_teamId, S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("ID_WEB_BATTLEREPORT_TEAM_", l_side), "_"), l_team))));
                }
            }
        } else {
            if (((l_gamemode == 32) || (l_gamemode == 8))) {
                l_for_battlereport_functions_27_10_list = l_teams;
                if ((S.Modifier.count(l_for_battlereport_functions_27_10_list) > 0)) {
                    for (var l_teamId in l_for_battlereport_functions_27_10_list) {
                        if (!Surface.isValidLoopItem(l_for_battlereport_functions_27_10_list[l_teamId])) {
                            continue;
                        }
                        var l_team = l_for_battlereport_functions_27_10_list[l_teamId];
                        c.push(Surface.valOut(S.Modifier.set(l_r, l_teamId, S.Modifier.concat("ID_WEB_BATTLEREPORT_TEAM_", l_teamId))));
                    }
                }
            }
        }
    }
    return l_r;
};
var block_battlereport_gamescore = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("gamescore"));
battlereport.gamescore.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_gamescore;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.gamescore");
    c.push("\n");
    o.tow = (S.Modifier.get(o.scores, 1) > S.Modifier.get(o.scores, 2));
    c.push('\n<div id="battlereport-gamescore">\n <div id="battlereport-gamescore-team1">\n <div class="battlereport-gamescore-title icon-flag-');
    c.push(Surface.valOut(S.Modifier.lower(S.Modifier.get(o.teamFactionMapping, 1, "unknown"))));
    c.push('">');
    c.push(Surface.valOut(S.Modifier.get(o.teamFactionMapping, 1)));
    c.push(" ");
    c.push(Surface.valOut("Army"));
    c.push('</div>\n <div class="battlereport-gamescore-score">');
    c.push(Surface.valOut(S.Modifier.get(o.scores, 1)));
    c.push('</div>\n <div class="battlereport-gamescore-winner');
    if (!(o.tow)) {
        c.push(" base-hide");
    }
    c.push('">');
    c.push(Surface.valOut("Winner!"));
    c.push('</div>\n </div>\n <div id="battlereport-gamescore-team2">\n <div class="battlereport-gamescore-title icon-flag-');
    c.push(Surface.valOut(S.Modifier.lower(S.Modifier.get(o.teamFactionMapping, 2, "unknown"))));
    c.push('">');
    c.push(Surface.valOut(S.Modifier.get(o.teamFactionMapping, 2)));
    c.push(" ");
    c.push(Surface.valOut("Army"));
    c.push('</div>\n <div class="battlereport-gamescore-score">');
    c.push(Surface.valOut(S.Modifier.get(o.scores, 2)));
    c.push('</div>\n <div class="battlereport-gamescore-winner');
    if (o.tow) {
        c.push(" base-hide");
    }
    c.push('">');
    c.push(Surface.valOut("Winner!"));
    c.push("</div>\n </div>\n</div>\n");
    return c.join("");
};
var block_battlereport_index = new Surface.BlockConfig("base.ajaxindex", {"topTitle": "battlereport.index.block_topTitle","bodyClass": "battlereport.index.block_bodyClass","titleItem": "battlereport.index.block_titleItem","mainContent": "battlereport.index.block_mainContent"});
battlereport.addTemplate(new Surface.Template("index"));
battlereport.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.index");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
battlereport.index.block_bodyClass = new Surface.Block("battlereport.index.block_bodyClass");
battlereport.index.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-body");
    return c.join("");
};
battlereport.index.block_topTitle = new Surface.Block("battlereport.index.block_topTitle");
battlereport.index.block_topTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Battle Report"));
    return c.join("");
};
battlereport.index.block_titleItem = new Surface.Block("battlereport.index.block_titleItem");
battlereport.index.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Battle Report"));
    c.push(" - ");
    return c.join("");
};
battlereport.index.block_mainContent = new Surface.Block("battlereport.index.block_mainContent");
battlereport.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_info;
    var l_for_battlereport_index_12_9_list;
    c.push('\n<div id="main-login-upper" class="base-upper"></div>\n<div class="base-middle">\n <div style="padding-top: 50px; padding-left: 20px;">\n');
    if ((S.Modifier.count(o.latestPlayerPreviews) > 0)) {
        l_for_battlereport_index_12_9_list = o.latestPlayerPreviews;
        if ((S.Modifier.count(l_for_battlereport_index_12_9_list) > 0)) {
            for (var l_for_battlereport_index_12_9_key in l_for_battlereport_index_12_9_list) {
                if (!Surface.isValidLoopItem(l_for_battlereport_index_12_9_list[l_for_battlereport_index_12_9_key])) {
                    continue;
                }
                var l_preview = l_for_battlereport_index_12_9_list[l_for_battlereport_index_12_9_key];
                l_info = $S.callFunction("serverguide.mapinfo", Surface.globalContext.realm.game, ((typeof (l_preview) != "undefined" && l_preview !== null && typeof (l_preview.mapName) != "undefined" && l_preview.mapName !== null) ? l_preview.mapName : "unknown"), b, kwargs);
                c.push(' <div class="battlereport-bodycells">\n <div class="battlereport-bodycell battlereport-cell-expansion"><span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", 2, S.Modifier.get(l_preview, "platform", 1), S.Modifier.get(l_preview, "expansion", 0), b, kwargs)));
                c.push('"></span></div>\n <div class="battlereport-bodycell battlereport-cell-date">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"gameHistoryId": l_preview.reportId,"platform": l_preview.platform,"personaId": l_preview.personaId})));
                c.push('">\n ');
                c.push(Surface.valOut(Surface.Modifier.dateformat(l_preview.createdAt, "%Y-%m-%d %H:%M:%S")));
                c.push('\n </a>\n </div>\n <div class="battlereport-bodycell battlereport-cell-mode">');
                c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (l_preview) != "undefined" && l_preview !== null && typeof (l_preview.gameMode) != "undefined" && l_preview.gameMode !== null) ? l_preview.gameMode : 1))));
                c.push('</div>\n <div class="battlereport-bodycell battlereport-cell-map">\n <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_info.imageIcon, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="');
                c.push(Surface.valOut(l_info.mapId));
                c.push('" />\n ');
                c.push(Surface.valOut((S.translations[l_info.name] || l_info.name)));
                c.push('\n </div>\n <div class="battlereport-bodycell battlereport-cell-name">\n');
                if ((typeof (l_preview) != "undefined" && l_preview !== null && typeof (l_preview.serverName) != "undefined" && l_preview.serverName !== null)) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": l_preview.serverName,"limit": 64}, null, kwargs));
                    c.push("\n");
                } else {
                    c.push(" N/A\n");
                }
                c.push(" </div>\n </div>\n");
            }
        }
    }
    c.push(" </div>\n</div>\n");
    return c.join("");
};
battlereport.addTemplate(new Surface.Template("listlatest"));
var block_battlereport_minicard = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("minicard"));
battlereport.minicard.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_minicard;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.minicard");
    var l_info;
    c.push('\n<div class="battlereport-minicard');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.anchor) != "undefined" && o.anchor !== null) && o.anchor)) {
        c.push(" battlereport-minicard-anchor");
    }
    if (((typeof (o) != "undefined" && o !== null && typeof (o.onDark) != "undefined" && o.onDark !== null) && o.onDark)) {
        c.push(" dark-bg");
    }
    c.push('">\n');
    l_info = $S.callFunction("serverguide.mapinfo", Surface.globalContext.realm.game, ((typeof (o) != "undefined" && o !== null && typeof (o.gameReportPreview) != "undefined" && o.gameReportPreview !== null && typeof (o.gameReportPreview.mapName) != "undefined" && o.gameReportPreview.mapName !== null) ? o.gameReportPreview.mapName : "unknown"), b, kwargs);
    c.push(' <div class="battlereport-minicard-map">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_info.imageSmall, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut(l_info.mapId));
    c.push('" width="62" height="42" />\n </div>\n <div class="battlereport-minicard-body">\n <div class="battlereport-minicard-body-title">');
    c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (o) != "undefined" && o !== null && typeof (o.gameReportPreview) != "undefined" && o.gameReportPreview !== null && typeof (o.gameReportPreview.gameMode) != "undefined" && o.gameReportPreview.gameMode !== null) ? o.gameReportPreview.gameMode : 1))));
    c.push('</div>\n <div class="battlereport-minicard-body-info">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.onDark) != "undefined" && o.onDark !== null) && o.onDark)) {
        c.push(' <span class="battlereport-minicard-body-info-gameicon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSBrightHorizontal", 2, S.Modifier.get(o.gameReportPreview, "platform", 1), S.Modifier.get(o.gameReportPreview, "expansion", 0), b, kwargs)));
        c.push('"></span>\n');
    } else {
        c.push(' <span class="battlereport-minicard-body-info-gameicon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", 2, S.Modifier.get(o.gameReportPreview, "platform", 1), S.Modifier.get(o.gameReportPreview, "expansion", 0), b, kwargs)));
        c.push('"></span>\n');
    }
    c.push(" <span>");
    c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": (S.translations[l_info.name] || l_info.name),"first": 10,"limit": 10}, null, kwargs));
    c.push('</span>\n </div>\n <div class="battlereport-minicard-body-ago">\n <span>');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.gameReportPreview.createdAt}, null, kwargs));
    c.push("</span>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReportPreview) != "undefined" && o.gameReportPreview !== null && typeof (o.gameReportPreview.serverName) != "undefined" && o.gameReportPreview.serverName !== null) && (S.Modifier.get(o.gameReportPreview, "platform", 1) == 1))) {
        c.push(" <span>on ");
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.gameReportPreview.serverName,"first": 7,"limit": 7}, null, kwargs));
        c.push("</span>\n");
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.anchor) != "undefined" && o.anchor !== null) && o.anchor)) {
        c.push(' <a class="battlereport-minicard-link" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"gameHistoryId": o.gameReportPreview.reportId,"platform": o.gameReportPreview.platform,"personaId": o.gameReportPreview.personaId})));
        c.push('"></a>\n');
    }
    c.push("</div>");
    return c.join("");
};
var block_battlereport_personalstats = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("personalstats"));
battlereport.personalstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_personalstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.personalstats");
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_battlereport_personalstats_use_2_2, kwargs));
    c.push("\n");
    return c.join("");
};
var block_battlereport_personalstats_use_2_2 = new Surface.BlockConfig("common.focusbar", {"content": "battlereport.personalstats._use_2_2_block_content","extraInnerClass": "battlereport.personalstats._use_2_2_block_extraInnerClass","extraClass": "battlereport.personalstats._use_2_2_block_extraClass"});
battlereport.personalstats._use_2_2_block_extraClass = new Surface.Block("battlereport.personalstats._use_2_2_block_extraClass");
battlereport.personalstats._use_2_2_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-playerscore-width");
    return c.join("");
};
battlereport.personalstats._use_2_2_block_extraInnerClass = new Surface.Block("battlereport.personalstats._use_2_2_block_extraInnerClass");
battlereport.personalstats._use_2_2_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-playerscore-width-inner");
    return c.join("");
};
battlereport.personalstats._use_2_2_block_content = new Surface.Block("battlereport.personalstats._use_2_2_block_content");
battlereport.personalstats._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_combatScore;
    var l_me;
    var l_for_battlereport_personalstats_337_46_list;
    var l_description;
    var l_for_battlereport_personalstats_319_46_list;
    var l_title;
    var l_for_battlereport_personalstats_325_46_list;
    var l_playerUser;
    var l_for_battlereport_personalstats_331_46_list;
    var l_for_battlereport_personalstats_313_46_list;
    var l_allUnlocksCount;
    var l_maxScore;
    var l_rankName;
    var l_totalScore;
    var l_for_battlereport_personalstats_307_46_list;
    var l_vehicleScore;
    var l_playerUserId;
    c.push('\n <div class="battlereport-playerscore-content" id="battlereport-playerscore-content">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.playerReport) != "undefined" && o.playerReport !== null) ? o.playerReport : false)) {
        c.push(' <div class="battlereport-playerscore-content-column">\n <h3>\n');
        if (S.Modifier.get(o.playerReport, "user", false)) {
            l_playerUser = S.Modifier.get(o.playerReport, "user");
            l_playerUserId = S.Modifier.get(l_playerUser, "userId", false);
            c.push(' <div rel="');
            c.push(Surface.valOut(l_playerUserId));
            c.push('" class="battlereport-personal-progress-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_playerUser,"gravatarSize": 22}, null, kwargs));
            c.push('\n <span><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": S.Modifier.get(l_playerUser, "username", "")})));
            c.push('">');
            c.push(Surface.valOut(S.Modifier.get(l_playerUser, "username", "Unknown player")));
            c.push("</a>'s progress</span>\n");
            if (l_playerUserId) {
                l_me = ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null) && (Surface.globalContext.session.user.userId == l_playerUserId));
                if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null) && !(l_me))) {
                    c.push(' <button class="base-button-addfriend-narrow battlereport-teamstats-user-addfriend" data-userid="');
                    c.push(Surface.valOut(l_playerUserId));
                    c.push('" data-path="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/requestFriendship/{id}/", Surface.urlContext, {"id": l_playerUserId})));
                    c.push('"');
                    if (S.Modifier.get(o.playerReport, "disableAddButton", false)) {
                        c.push(" disabled");
                    }
                    c.push(">Add</button>\n");
                }
            }
            c.push(" </div>\n");
        } else {
            c.push(" Rank Progress\n");
        }
        c.push(' </h3>\n <div id="battlereport-personal-progress">\n');
        l_maxScore = (S.Modifier.get(S.Modifier.get(o.rankInfo, "nextRank", {}), "pointsNeeded", 0) - S.Modifier.get(S.Modifier.get(o.rankInfo, "currentRank", {}), "pointsNeeded", 0));
        c.push('\n <div class="battlereport-personal-progress-rank">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": S.Modifier.get(o.gameReport, "game", 2),"rank_size": "small","rank": S.Modifier.get(S.Modifier.get(o.rankInfo, "currentRank", {}), "level", 0)}, null, kwargs));
        c.push('\n </div>\n <div id="battlereport-personal-progressbar">\n');
        if ((S.Modifier.get(o.rankInfo, "rankSpanPreviousScore", 0) > 0)) {
            c.push(' <div id="battlereport-personal-progressbar-oldxp" style="width:');
            c.push(Surface.valOut(((S.Modifier.get(o.rankInfo, "rankSpanPreviousScore", 0) / l_maxScore) * 100)));
            c.push('%"></div>\n');
        }
        c.push('\n <div id="battlereport-personal-progressbar-newxp" style="width:');
        if ((S.Modifier.get(o.rankInfo, "rankSpanIncrementScore", 0) > 0)) {
            c.push(Surface.valOut(((S.Modifier.get(o.rankInfo, "rankSpanIncrementScore", 0) / l_maxScore) * 100)));
        } else {
            c.push("0");
        }
        c.push('%">\n');
        if ((S.Modifier.get(o.rankInfo, "rankSpanIncrementScore", 0) > 0)) {
            c.push(' <div id="battlereport-personal-progress-roundscore">+');
            c.push(Surface.valOut(S.Modifier.get(o.rankInfo, "rankSpanIncrementScore", 0)));
            c.push("</div>\n");
        }
        c.push(' </div>\n </div>\n <div class="battlereport-personal-progress-rank-next">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": S.Modifier.get(o.gameReport, "game", 2),"rank_size": "small","rank": S.Modifier.get(S.Modifier.get(o.rankInfo, "nextRank", {}), "level", 0)}, null, kwargs));
        c.push("\n </div>\n");
        l_rankName = S.Modifier.get(S.Modifier.get(o.rankInfo, "currentRank", {}), "name", "Unknown rank");
        c.push(' <div id="battlereport-personal-progress-rankname">');
        c.push(Surface.valOut((S.translations[l_rankName] || l_rankName)));
        c.push('</div>\n <div id="battlereport-personal-progress-rankpoints">');
        c.push(Surface.valOut((S.Modifier.get(o.rankInfo, "rankSpanPreviousScore", 0) + S.Modifier.get(o.rankInfo, "rankSpanIncrementScore", 0))));
        c.push("/");
        c.push(Surface.valOut(l_maxScore));
        c.push('</div>\n </div>\n <div class="base-clear"></div>\n <div id="battlereport-personal-best-weapon">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.topWeapon) != "undefined" && o.topWeapon !== null) ? o.topWeapon : false)) {
            c.push(' <h3>Best Weapon</h3>\n <div class="battlereport-personal-best-image">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", o.topWeapon.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="">\n </div>\n <div class="battlereport-personal-item-head">\n <h4 style="float:left;">');
            c.push(Surface.valOut((S.translations[o.topWeapon.langKeyTitle] || o.topWeapon.langKeyTitle)));
            c.push('</h4>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Kills"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(o.topWeapon.kills));
            c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Accuracy"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(o.topWeapon.accuracy));
            c.push('%</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Time used"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(S.Modifier.duration(o.topWeapon.timeEquipped)));
            c.push("</div>\n </div>\n");
        } else {
            c.push(' <h3>Best Weapon</h3>\n <div class="battlereport-personal-best-image">\n Not available\n </div>\n <div class="battlereport-personal-item-head">\n <h4 style="float:left;"></h4>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Kills"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Accuracy"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Time used"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n');
        }
        c.push(' </div>\n <div id="battlereport-personal-best-vehicle">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.topVehicle) != "undefined" && o.topVehicle !== null) ? o.topVehicle : false)) {
            c.push(' <h3>Best Vehicle</h3>\n <div class="battlereport-personal-best-image">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", o.topVehicle.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="">\n </div>\n <div class="battlereport-personal-item-head">\n <h4 style="float:left;">');
            c.push(Surface.valOut((S.translations[o.topVehicle.langKeyTitle] || o.topVehicle.langKeyTitle)));
            c.push('</h4>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Kills"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(o.topVehicle.kills));
            c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Accuracy"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(o.topVehicle.accuracy));
            c.push('%</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Time used"));
            c.push('</div>\n <div class="battlererport-personal-item-score">');
            c.push(Surface.valOut(S.Modifier.duration(o.topVehicle.timeIn)));
            c.push("</div>\n </div>\n");
        } else {
            c.push(' <h3>Best Vehicle</h3>\n <div class="battlereport-personal-best-image">\n Not available\n </div>\n <div class="battlereport-personal-item-head">\n <h4 style="float:left;"></h4>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Kills"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Accuracy"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
            c.push(Surface.valOut("Time used"));
            c.push('</div>\n <div class="battlererport-personal-item-score">-</div>\n </div>\n');
        }
        c.push(' </div>\n </div>\n <div class="battlereport-playerscore-content-column">\n <div id="battlereport-personal-totalscore">\n <div id="battlereport-personal-stats">\n <h3>');
        c.push(Surface.valOut("Stats"));
        c.push('</h3>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Skill level"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.floatData, "elo", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Kills"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___k_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Deaths"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___d_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("K/D Ratio"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut($S.callFunction("common.calculateRatio", S.Modifier.get(o.playerReport.intData, "c___k_g", 0), S.Modifier.get(o.playerReport.intData, "c___d_g", 0), b, kwargs)));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Kill Assists"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___ka_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Vehicles Destroyed"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c_vA__de_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Vehicle Destroyed Assists"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___deas_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Highest killstreak"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___k_ghvs", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Avenger kills"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___ak_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Savior kills"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___sk_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Nemesis kills"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___nk_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Dogtags taken"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "c___dt_g", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Accuracy"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "accuracy_all", "-")));
        if (S.Modifier.get(o.playerReport.intData, "accuracy_all", false)) {
            c.push("%");
        }
        c.push('</div>\n </div>\n </div>\n <div id="battlereport-personal-score">\n <h3>');
        c.push(Surface.valOut("Score"));
        c.push('</h3>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Award Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_award", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Squad Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_squad", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Team Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_objective", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Objective Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_team", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("General Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_general", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <div style="float:left;">');
        c.push(Surface.valOut("Unlock Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_unlock", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <img width="11" height="17" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/battlereport/assault-sm.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="margin-left:3px;margin-right:8px;" alt="" class="battlereport-personal-score-kiticon"/>\n <div style="float:left;">');
        c.push(Surface.valOut("Assault Score"));
        c.push(' </div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_assault", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <img width="14" height="14" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/battlereport/engineer-sm.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="margin-left:2px;" alt="" class="battlereport-personal-score-kiticon"/>\n <div style="float:left;">');
        c.push(Surface.valOut("Engineer Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_engineer", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <img width="15" height="15" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/battlereport/medic-sm.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="margin-left:2px;" alt="" class="battlereport-personal-score-kiticon"/>\n <div style="float:left;">');
        c.push(Surface.valOut("Support Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_support", "-")));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item">\n <img width="19" height="19" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/battlereport/recon_sm.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="margin-right:5px;" alt="" class="battlereport-personal-score-kiticon"/>\n <div style="float:left;">');
        c.push(Surface.valOut("Recon Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_recon", "-")));
        c.push("</div>\n </div>\n");
        l_vehicleScore = (((((S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehicleifv", 0)) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehiclejet", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehiclesh", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehicleah", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehicleaa", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_vehiclembt", 0)));
        c.push('\n <div class="battlereport-personal-item">\n <img width="16" height="16" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/battlereport/vehicle-sm.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="margin-left:2px;" alt="" class="battlereport-personal-score-kiticon"/>\n <div style="float:left;">');
        c.push(Surface.valOut("Vehicle Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(l_vehicleScore));
        c.push('</div>\n </div>\n <div class="battlereport-personal-item-alt">\n <div style="float:left;">');
        c.push(Surface.valOut("Bonus Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(S.Modifier.get(o.playerReport.intData, "sc_bonus", "-")));
        c.push("</div>\n </div>\n");
        l_combatScore = ((((l_vehicleScore + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_assault", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_engineer", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_support", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_recon", 0)));
        c.push('\n <div class="battlereport-personal-item-alt">\n <div style="float:left;">');
        c.push(Surface.valOut("Combat Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(l_combatScore));
        c.push("</div>\n </div>\n");
        l_totalScore = ((S.Modifier.toint(l_combatScore) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_unlock", 0))) + S.Modifier.toint(S.Modifier.get(o.playerReport.intData, "sc_award", 0)));
        c.push('\n <div class="battlereport-personal-item battlereport-personal-item-total">\n <div style="float:left;">');
        c.push(Surface.valOut("Total Score"));
        c.push('</div>\n <div class="battlererport-personal-item-score">');
        c.push(Surface.valOut(l_totalScore));
        c.push('</div>\n </div>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n');
        l_allUnlocksCount = ((((S.Modifier.count(S.Modifier.get(o.unlocks, "soldierspecializations", [])) + S.Modifier.count(S.Modifier.get(o.unlocks, "vehiclespecs", []))) + S.Modifier.count(S.Modifier.get(S.Modifier.get(o.unlocks, "gadgets", []), "weapons", []))) + S.Modifier.count(S.Modifier.get(o.unlocks, "weaponaddons", []))) + S.Modifier.count(S.Modifier.get(o.unlocks, "awards", [])));
        c.push('\n <div id="battlereport-personal-awards">\n <h3>');
        c.push(Surface.valOut("Awards & Unlocks"));
        c.push(" (");
        c.push(Surface.valOut(l_allUnlocksCount));
        c.push(')</h3>\n <div id="battlereport-personal-awards-container">\n <div id="battlereport-personal-awards-slider-wrapper">\n <div id="battlereport-personal-awards-nav-left" class="battlereport-personal-awards-nav sodaSlider-arrow-left"></div>\n <div id="battlereport-personal-awards-nav-right" class="battlereport-personal-awards-nav sodaSlider-arrow-right"></div>\n <table border="0" cellpadding="0" cellspacing="0" class="sodaSlider-slider" id="battlereport-personal-awards-slider">\n <tr>\n');
        if ((l_allUnlocksCount > 0)) {
            l_for_battlereport_personalstats_307_46_list = S.Modifier.get(o.unlocks, "soldierspecializations", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_307_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_307_46_key in l_for_battlereport_personalstats_307_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_307_46_list[l_for_battlereport_personalstats_307_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_307_46_list[l_for_battlereport_personalstats_307_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    c.push(' <td data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_title] || l_title)));
                    c.push("</b><br>");
                    c.push(Surface.valOut((S.translations[l_description] || l_description)));
                    c.push('" class="battlereport-personal-awards-items bubble-title"><img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></td>\n');
                }
            }
            c.push("\n");
            l_for_battlereport_personalstats_313_46_list = S.Modifier.get(S.Modifier.get(o.unlocks, "gadgets", []), "weapons", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_313_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_313_46_key in l_for_battlereport_personalstats_313_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_313_46_list[l_for_battlereport_personalstats_313_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_313_46_list[l_for_battlereport_personalstats_313_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    c.push(' <td data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_title] || l_title)));
                    c.push("</b><br>");
                    c.push(Surface.valOut((S.translations[l_description] || l_description)));
                    c.push('" class="battlereport-personal-awards-items bubble-title"><img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></td>\n');
                }
            }
            c.push("\n");
            l_for_battlereport_personalstats_319_46_list = S.Modifier.get(o.unlocks, "weapons", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_319_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_319_46_key in l_for_battlereport_personalstats_319_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_319_46_list[l_for_battlereport_personalstats_319_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_319_46_list[l_for_battlereport_personalstats_319_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    c.push(' <td data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_title] || l_title)));
                    c.push("</b><br>");
                    c.push(Surface.valOut((S.translations[l_description] || l_description)));
                    c.push('" class="battlereport-personal-awards-items bubble-title"><img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></td>\n');
                }
            }
            c.push("\n");
            l_for_battlereport_personalstats_325_46_list = S.Modifier.get(o.unlocks, "weaponaddons", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_325_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_325_46_key in l_for_battlereport_personalstats_325_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_325_46_list[l_for_battlereport_personalstats_325_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_325_46_list[l_for_battlereport_personalstats_325_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    c.push(' <td data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_title] || l_title)));
                    c.push("</b><br>");
                    c.push(Surface.valOut((S.translations[l_description] || l_description)));
                    c.push('" class="battlereport-personal-awards-items bubble-title"><img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></td>\n');
                }
            }
            c.push("\n");
            l_for_battlereport_personalstats_331_46_list = S.Modifier.get(o.unlocks, "vehiclespecs", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_331_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_331_46_key in l_for_battlereport_personalstats_331_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_331_46_list[l_for_battlereport_personalstats_331_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_331_46_list[l_for_battlereport_personalstats_331_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    c.push(' <td data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_title] || l_title)));
                    c.push("</b><br>");
                    c.push(Surface.valOut((S.translations[l_description] || l_description)));
                    c.push('" class="battlereport-personal-awards-items bubble-title"><img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></td>\n');
                }
            }
            c.push("\n");
            l_for_battlereport_personalstats_337_46_list = S.Modifier.get(o.unlocks, "awards", []);
            if ((S.Modifier.count(l_for_battlereport_personalstats_337_46_list) > 0)) {
                for (var l_for_battlereport_personalstats_337_46_key in l_for_battlereport_personalstats_337_46_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_personalstats_337_46_list[l_for_battlereport_personalstats_337_46_key])) {
                        continue;
                    }
                    var l_award = l_for_battlereport_personalstats_337_46_list[l_for_battlereport_personalstats_337_46_key];
                    l_title = S.Modifier.get(l_award, "langKeyTitle", "No name available");
                    l_description = S.Modifier.get(l_award, "langKeyDescription", "No description available");
                    if ((S.Modifier.get(l_award, "group") == "AwardGroup_Star")) {
                        c.push(' <td data-battlebubble="<b>');
                        c.push(Surface.valOut((S.translations[l_title] || l_title)));
                        c.push("</b><br>");
                        c.push(Surface.valOut((S.translations[l_description] || l_description)));
                        c.push('" class="battlereport-personal-awards-servicestars bubble-title"><img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/servicestars/94x94/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" /></td>\n');
                    } else {
                        c.push(' <td data-battlebubble="<b>');
                        c.push(Surface.valOut((S.translations[l_title] || l_title)));
                        c.push("</b><br>");
                        c.push(Surface.valOut((S.translations[l_description] || l_description)));
                        c.push('" class="battlereport-personal-awards-ribbons bubble-title"><img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ribbons/m/", S.Modifier.get(l_award, "imageKey", "unknown")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" /></td>\n');
                    }
                }
            }
        } else {
            c.push(' <td class="battlereport-personal-awards-empty-msg">No awards or unlocks this round</td>\n');
        }
        c.push(' </tr>\n </table>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n');
    } else {
        if (!((typeof (o) != "undefined" && o !== null && typeof (o.playerReport) != "undefined" && o.playerReport !== null))) {
            c.push(' <div class="battlereport-load-spinner"><div class="common-spinner" data-size="big"></div></div>\n <div class="battlereport-load-text">Loading Battle Report</div>\n');
        } else {
            c.push(' <div class="battlereport-personal-notfound">No player report found</div>\n');
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
var block_battlereport_playerreport = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("playerreport"));
battlereport.playerreport.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_playerreport;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.playerreport");
    c.push('\n<pre style="width: 100%; word-wrap: break-word;">');
    c.push(Surface.valOut(S.Modifier.dump(o.playerReport)));
    c.push("</pre>");
    return c.join("");
};
var block_battlereport_prizeentry = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("prizeentry"));
battlereport.prizeentry.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_prizeentry;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.prizeentry");
    var l_scoreHeaderLocale;
    var l_user;
    var l_type;
    var l_headerLocale;
    c.push("\n");
    l_type = S.Modifier.get(o.prize, "type", "unknown");
    c.push('<div class="battlereport-topscores-column">\n');
    l_headerLocale = S.Modifier.concat("ID_WEB_BATTLEREPORT_WEBPRIZE_", S.Modifier.upper(l_type));
    c.push(" <h3>");
    c.push(Surface.valOut((S.translations[l_headerLocale] || l_headerLocale)));
    c.push("</h3>\n");
    l_user = S.Modifier.get(o.prize, "user", {});
    c.push(' <div class="battlereport-topscores-column-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_user,"gravatarSize": 52}, null, kwargs));
    c.push('\n </div>\n <div class="battlereport-topscores-column-info">\n <div class="battlereport-topscores-column-username">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.prize) != "undefined" && o.prize !== null && typeof (o.prize.persona) != "undefined" && o.prize.persona !== null && typeof (o.prize.persona.personaName) != "undefined" && o.prize.persona.personaName !== null) ? o.prize.persona.personaName : false)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.prize.persona, ((typeof (o) != "undefined" && o !== null && typeof (o.prize) != "undefined" && o.prize !== null && typeof (o.prize.persona) != "undefined" && o.prize.persona !== null && typeof (o.prize.persona.game) != "undefined" && o.prize.persona.game !== null) ? o.prize.persona.game : 2), ((typeof (o) != "undefined" && o !== null && typeof (o.prize) != "undefined" && o.prize !== null && typeof (o.prize.persona) != "undefined" && o.prize.persona !== null && typeof (o.prize.persona.namespace) != "undefined" && o.prize.persona.namespace !== null) ? o.prize.persona.namespace : 1), b, kwargs))));
        c.push('">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.prize) != "undefined" && o.prize !== null && typeof (o.prize.persona) != "undefined" && o.prize.persona !== null && typeof (o.prize.persona.personaName) != "undefined" && o.prize.persona.personaName !== null) ? o.prize.persona.personaName : "Unknown player")));
        c.push("</a>\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.prize) != "undefined" && o.prize !== null && typeof (o.prize.persona) != "undefined" && o.prize.persona !== null && typeof (o.prize.persona.personaName) != "undefined" && o.prize.persona.personaName !== null) ? o.prize.persona.personaName : "Unknown player")));
        c.push("\n");
    }
    c.push(" </div>\n");
    l_scoreHeaderLocale = S.Modifier.concat(l_headerLocale, "_SCORE");
    c.push(" <h6>");
    c.push(Surface.valOut((S.translations[l_scoreHeaderLocale] || l_scoreHeaderLocale)));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(o.prize, "score", "N/A")));
    if ((l_type == "accuracy")) {
        c.push("%");
    }
    c.push("</p>\n </div>\n</div>\n");
    return c.join("");
};
battlereport.addTemplate(new Surface.Template("result"));
var block_battlereport_serverinfo = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("serverinfo"));
battlereport.serverinfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_serverinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.serverinfo");
    var l_info;
    c.push("\n");
    l_info = $S.callFunction("serverguide.mapinfo", ((typeof (o) != "undefined" && o !== null && typeof (o.game) != "undefined" && o.game !== null) ? o.game : 2), ((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.map) != "undefined" && o.gameServer.map !== null) ? o.gameServer.map : "Unknown"), b, kwargs);
    c.push('\n<div class="battlereport-serverinfo-mapimage">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(((typeof (l_info) != "undefined" && l_info !== null && typeof (l_info.imageSmall) != "undefined" && l_info.imageSmall !== null) ? l_info.imageSmall : "Unknown"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Map Icon" border="0" width="62" height="42" />\n</div>\n<div class="battlereport-serverinfo-main">\n <div class="battlereport-serverinfo-servername">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.name) != "undefined" && o.gameServer.name !== null) ? o.gameServer.name : "N/A")));
    c.push('</div>\n <div class="battlereport-serverinfo-info">\n ');
    c.push(Surface.valOut(((typeof (l_info) != "undefined" && l_info !== null && typeof (l_info.name) != "undefined" && l_info.name !== null) ? l_info.name : "N/A")));
    c.push("  ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.maxPlayers) != "undefined" && o.gameServer.maxPlayers !== null) ? o.gameServer.maxPlayers : "N/A")));
    c.push("\n Players  ");
    c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.mapMode) != "undefined" && o.gameServer.mapMode !== null) ? o.gameServer.mapMode : 1))));
    c.push("  PB: ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.punkbuster) != "undefined" && o.gameServer.punkbuster !== null) ? o.gameServer.punkbuster : false)) {
        c.push("on");
    } else {
        c.push("off");
    }
    c.push(" \n ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.ranked) != "undefined" && o.gameServer.ranked !== null) ? o.gameServer.ranked : false)) {
        c.push("Ranked");
    } else {
        c.push("Unranked");
    }
    c.push(" \n ");
    c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", ((typeof (o) != "undefined" && o !== null && typeof (o.gameServer) != "undefined" && o.gameServer !== null && typeof (o.gameServer.preset) != "undefined" && o.gameServer.preset !== null) ? o.gameServer.preset : 1), b, kwargs)));
    c.push(" \n ");
    c.push(Surface.valOut(o.commentCount));
    c.push(" Comments\n </div>\n</div>\n");
    return c.join("");
};
var block_battlereport_show = new Surface.BlockConfig("base.ajaxindex", {"topTitle": "battlereport.show.block_topTitle","bodyClass": "battlereport.show.block_bodyClass","titleItem": "battlereport.show.block_titleItem","mainContent": "battlereport.show.block_mainContent"});
battlereport.addTemplate(new Surface.Template("show"));
battlereport.show.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.show");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_battlereport_show_use_84_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "battlereport.show._use_84_22_block_content","extraClassInner": "battlereport.show._use_84_22_block_extraClassInner","titleContainer": "battlereport.show._use_84_22_block_titleContainer","extraClass": "battlereport.show._use_84_22_block_extraClass"});
battlereport.show.block_bodyClass = new Surface.Block("battlereport.show.block_bodyClass");
battlereport.show.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-body");
    return c.join("");
};
battlereport.show.block_topTitle = new Surface.Block("battlereport.show.block_topTitle");
battlereport.show.block_topTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Battle Report"));
    return c.join("");
};
battlereport.show.block_titleItem = new Surface.Block("battlereport.show.block_titleItem");
battlereport.show.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Battle Report"));
    c.push(" - ");
    return c.join("");
};
battlereport.show.surface_18_14 = new Surface.SingleSurface("battlereport.show.surface_18_14");
battlereport.show._use_84_22_block_extraClass = new Surface.Block("battlereport.show._use_84_22_block_extraClass");
battlereport.show._use_84_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-topscores");
    return c.join("");
};
battlereport.show._use_84_22_block_extraClassInner = new Surface.Block("battlereport.show._use_84_22_block_extraClassInner");
battlereport.show._use_84_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("battlereport-topscores-inner");
    return c.join("");
};
battlereport.show._use_84_22_block_titleContainer = new Surface.Block("battlereport.show._use_84_22_block_titleContainer");
battlereport.show._use_84_22_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
battlereport.show._use_84_22_block_content = new Surface.Block("battlereport.show._use_84_22_block_content");
battlereport.show._use_84_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_battlereport_show_90_30_list;
    var l_for_battlereport_show_95_30_list;
    var l_classes;
    l_classes = ["assault", "engineer", "recon", "support"];
    l_for_battlereport_show_90_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.prizes) != "undefined" && o.gameReport.prizes !== null) ? o.gameReport.prizes : {});
    if ((S.Modifier.count(l_for_battlereport_show_90_30_list) > 0)) {
        for (var l_class in l_for_battlereport_show_90_30_list) {
            if (!Surface.isValidLoopItem(l_for_battlereport_show_90_30_list[l_class])) {
                continue;
            }
            var l_prize = l_for_battlereport_show_90_30_list[l_class];
            if (!(S.Modifier.contains(l_classes, l_class))) {
                c.push(" ");
                c.push(Surface.importTemplate(("battlereport" + ("." + "prizeentry")), {"prize": l_prize}, null, kwargs));
                c.push("\n");
            }
        }
    }
    l_for_battlereport_show_95_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.prizes) != "undefined" && o.gameReport.prizes !== null) ? o.gameReport.prizes : {});
    if ((S.Modifier.count(l_for_battlereport_show_95_30_list) > 0)) {
        for (var l_class in l_for_battlereport_show_95_30_list) {
            if (!Surface.isValidLoopItem(l_for_battlereport_show_95_30_list[l_class])) {
                continue;
            }
            var l_prize = l_for_battlereport_show_95_30_list[l_class];
            if (S.Modifier.contains(l_classes, l_class)) {
                c.push(" ");
                c.push(Surface.importTemplate(("battlereport" + ("." + "prizeentry")), {"prize": l_prize}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(' <div class="base-clear"></div>\n');
    return c.join("");
};
battlereport.show.surface_18_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.show");
    c.push('<surf:container id="');
    c.push("battlereport");
    c.push('">');
    var l_for_battlereport_show_56_30_iteration;
    var l_for_battlereport_show_56_30_list;
    var l_gameServer;
    var l_session;
    var l_mapNameLocale;
    var l_mapinfo;
    o.squadLetters = {"0": "A","1": "B","2": "C","3": "D","4": "E","5": "F","6": "G","7": "H"};
    c.push('\n <div class="battlereport-header">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        l_gameServer = S.Modifier.get(o.gameReport, "gameServer", {});
        l_mapinfo = $S.callFunction("serverguide.mapinfo", S.Modifier.get(o.gameReport, "game", 2), S.Modifier.get(l_gameServer, "map", "Unknown"), b, kwargs);
        l_mapNameLocale = S.Modifier.get(l_mapinfo, "name", "ABC");
    }
    c.push(' <h1 class="base-big-title wfont">');
    c.push(Surface.valOut("Battle Report"));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(": ");
        c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1))));
    }
    c.push('</h1>\n <div class="base-clear"></div>\n <p class="base-big-title-info battlereport-header-info">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(' <span class="battlereport-header-info-gameicon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", S.Modifier.get(o.gameReport, "game", 2), S.Modifier.get(o.gameReport, "platform", 1), S.Modifier.get(o.gameReport, "gameExpansion", 0), b, kwargs)));
        c.push('"></span>\n <span>');
        c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(o.gameReport, "createdAt", 1)}, null, kwargs));
        c.push("</span>\n ");
        if ((S.Modifier.get(o.gameReport, "platform", 1) == 1)) {
            c.push(Surface.valOut("On"));
            c.push(" <span>");
            c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": S.Modifier.get(l_gameServer, "name", "Unknown server"),"first": 40,"limit": 40}, null, kwargs));
            c.push("</span>");
        }
        c.push("\n &bull; <span>");
        c.push(Surface.valOut("Round time"));
        c.push(": ");
        c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(o.gameReport, "duration", 1))));
        c.push("</span>\n");
    }
    c.push(' </p>\n <div class="base-clear"></div>\n <p class="base-big-title-info battlereport-header-info grey">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(" <span>");
        c.push(Surface.valOut((S.translations[l_mapNameLocale] || l_mapNameLocale)));
        c.push("</span> &bull;\n ");
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false) && (o.gameReport.platform == Surface.globalContext.staticContext.platforms.PC))) {
            c.push("<span>PB: ");
            if (S.Modifier.get(l_gameServer, "punkbuster", false)) {
                c.push(Surface.valOut("On"));
            } else {
                c.push(Surface.valOut("Off"));
            }
            c.push("</span> &bull;");
        }
        c.push("\n <span>");
        c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", ((typeof (l_gameServer) != "undefined" && l_gameServer !== null && typeof (l_gameServer.preset) != "undefined" && l_gameServer.preset !== null) ? l_gameServer.preset : 1), b, kwargs)));
        c.push("</span> &bull;\n <span>");
        if (S.Modifier.get(l_gameServer, "ranked", false)) {
            c.push(Surface.valOut("Ranked"));
        } else {
            c.push(Surface.valOut("Unranked"));
        }
        c.push('</span> &bull;\n <span><a class="battlereport-comments-top-link" href="#battlereport-comments">');
        c.push(Surface.valOut(S.Modifier.replace("%x Comments", "%x", S.Modifier.count(o.comments))));
        c.push("</a></span>\n");
    }
    c.push(" </p>\n </div>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(' <div id="battlereport-teamscores" style="background-image: url(');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_mapinfo.imageLargeWide, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push(');">\n');
        o.teams = $S.callFunction("battlereport.getTeamNames", S.Modifier.get(o.gameReport, "teamFactionMapping", {}), S.Modifier.get(o.gameReport.mapModeResult, "ticket", S.Modifier.get(o.gameReport.mapModeResult, "kill", S.Modifier.get(o.gameReport.mapModeResult, "life", {}))), ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1), b, kwargs);
        o.gamemode = ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null && typeof (o.gameReport.gameServer) != "undefined" && o.gameReport.gameServer !== null && typeof (o.gameReport.gameServer.mapMode) != "undefined" && o.gameReport.gameServer.mapMode !== null) ? o.gameReport.gameServer.mapMode : 1);
        o.totalPlayersCount = 0;
        c.push(' <div class="battlereport-teamscores-scores');
        if ((S.Modifier.count(o.teams) == 4)) {
            c.push(" big");
        }
        c.push('">\n');
        l_for_battlereport_show_56_30_list = o.teams;
        l_for_battlereport_show_56_30_iteration = 0;
        if ((S.Modifier.count(l_for_battlereport_show_56_30_list) > 0)) {
            for (var l_teamId in l_for_battlereport_show_56_30_list) {
                if (!Surface.isValidLoopItem(l_for_battlereport_show_56_30_list[l_teamId])) {
                    continue;
                }
                var l_team = l_for_battlereport_show_56_30_list[l_teamId];
                l_for_battlereport_show_56_30_iteration = (l_for_battlereport_show_56_30_iteration + 1);
                o.totalPlayersCount = (o.totalPlayersCount + S.Modifier.count(S.Modifier.get(S.Modifier.get(o.gameReport, "players", {}), l_teamId, [])));
                c.push(' <div data-teamId="');
                c.push(Surface.valOut(l_teamId));
                c.push('" class="battlereport-teamscores-score ');
                if ((Surface.modulo(l_for_battlereport_show_56_30_iteration, 2) == 0)) {
                    c.push(" last");
                }
                if ((S.Modifier.get(o.gameReport, "winner", 0) == l_teamId)) {
                    c.push(" winner");
                }
                c.push('">\n ');
                c.push(Surface.valOut((S.translations[l_team] || l_team)));
                c.push('\n <div class="battlereport-teamscores-score-value">\n');
                if (((o.gamemode == 1) || (o.gamemode == 64))) {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.get(o.gameReport.mapModeResult.ticket, l_teamId, "N/A")));
                    c.push("\n");
                } else {
                    if (((o.gamemode == 32) || (o.gamemode == 8))) {
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.get(o.gameReport.mapModeResult.kill, l_teamId, "N/A")));
                        c.push("\n");
                    }
                }
                c.push(' </div>\n <div class="battlereport-teamscores-score-msg">\n ');
                if ((l_teamId == S.Modifier.get(o.gameReport, "winner", 0))) {
                    c.push("<p>");
                    c.push(Surface.valOut("Winner!"));
                    c.push("</p>");
                }
                c.push('\n <div class="battlereport-teamscores-score-avatar">\n');
                if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null)) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null) ? Surface.globalContext.session.user : false),"gravatarSize": 22}, null, kwargs));
                    c.push("\n");
                }
                c.push(" </div>\n </div>\n </div>\n");
            }
        }
        c.push(" </div>\n </div>\n");
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_battlereport_show_use_84_22, kwargs));
    } else {
        if ((!((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null)) && (o.personaId > 0))) {
            c.push(' <div class="battlereport-header-loadwrapper">\n <div class="battlereport-load-spinner"><div class="common-spinner" data-size="big"></div></div>\n <div class="battlereport-load-text">');
            c.push(Surface.valOut("Loading Top Players"));
            c.push("</div>\n </div>\n");
        }
    }
    c.push('\n <div class="base-clear"></div>\n <div id="battlereport-playerscore-checkpoint"></div>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push(" ");
        c.push(Surface.importTemplate(("battlereport" + ("." + "teamstats")), o, null, kwargs));
        c.push("\n");
    }
    c.push("\n");
    if (((o.personaId > 0) || ((typeof (o) != "undefined" && o !== null && typeof (o.playerReport) != "undefined" && o.playerReport !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false) != false)))) {
        c.push(" ");
        c.push(Surface.importTemplate(("battlereport" + ("." + "personalstats")), o, null, kwargs));
        c.push("\n");
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : false)) {
        c.push('\n <div id="battlereport-comments" class="battlereport-comment-list">\n');
        l_session = S.Modifier.get(Surface.globalContext, "session");
        o.v = {"comments": o.comments,"totalCommentCount": o.totalCommentCount,"session": l_session,"itemInfo": {"id": o.metaId,"type": "battlereport-round-comment"},"pagination": o.pagination};
        c.push(" ");
        c.push(Surface.importTemplate(("comment" + ("." + "index")), o.v, null, kwargs));
        c.push("\n </div>\n");
    } else {
        if (!((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null))) {
            c.push(' <div class="battlereport-load-spinner"><div class="common-spinner" data-size="big"></div></div>\n <div class="battlereport-load-text">');
            c.push(Surface.valOut("Loading Battle Report"));
            c.push("</div>\n");
        } else {
            c.push(' <div id="serverguide-noservers">\n <h1>');
            c.push(Surface.valOut("Battle Report no longer available"));
            c.push("</h1>\n <p>");
            c.push(Surface.valOut("Could not find the Battle Report in the Statistics engine"));
            c.push("</p>\n </div>\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("battlereport.show", "surface_18_14", "battlereport", o, b);
    return c.join("");
};
battlereport.show.block_mainContent = new Surface.Block("battlereport.show.block_mainContent");
battlereport.show.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content" id="battlereport-content">\n <input type="hidden" id="battlereport-general-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/loadgeneralreport/{reportId}/{platform}/", Surface.urlContext, {"reportId": o.reportId,"platform": o.platform})));
    c.push('">\n <input type="hidden" id="battlereport-player-personaId" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.personaId) != "undefined" && o.personaId !== null) ? o.personaId : 0)));
    c.push('">\n');
    if ((o.personaId > 0)) {
        c.push(' <input type="hidden" id="battlereport-player-url" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/loadplayerreport/{reportId}/{platform}/{personaId}/", Surface.urlContext, {"reportId": o.reportId,"platform": o.platform,"personaId": o.personaId})));
        c.push('">\n');
    }
    c.push("\n");
    c.push(battlereport.show.surface_18_14.render({"comments": ((typeof (o) != "undefined" && o !== null && typeof (o.comments) != "undefined" && o.comments !== null) ? o.comments : null),"gameReport": ((typeof (o) != "undefined" && o !== null && typeof (o.gameReport) != "undefined" && o.gameReport !== null) ? o.gameReport : null),"gamemode": ((typeof (o) != "undefined" && o !== null && typeof (o.gamemode) != "undefined" && o.gamemode !== null) ? o.gamemode : null),"metaId": ((typeof (o) != "undefined" && o !== null && typeof (o.metaId) != "undefined" && o.metaId !== null) ? o.metaId : null),"pagination": ((typeof (o) != "undefined" && o !== null && typeof (o.pagination) != "undefined" && o.pagination !== null) ? o.pagination : null),"personaId": ((typeof (o) != "undefined" && o !== null && typeof (o.personaId) != "undefined" && o.personaId !== null) ? o.personaId : null),"playerReport": ((typeof (o) != "undefined" && o !== null && typeof (o.playerReport) != "undefined" && o.playerReport !== null) ? o.playerReport : null),"session": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null) ? o.session : null),"teams": ((typeof (o) != "undefined" && o !== null && typeof (o.teams) != "undefined" && o.teams !== null) ? o.teams : null),"totalCommentCount": ((typeof (o) != "undefined" && o !== null && typeof (o.totalCommentCount) != "undefined" && o.totalCommentCount !== null) ? o.totalCommentCount : null),"totalPlayersCount": ((typeof (o) != "undefined" && o !== null && typeof (o.totalPlayersCount) != "undefined" && o.totalPlayersCount !== null) ? o.totalPlayersCount : null),"v": ((typeof (o) != "undefined" && o !== null && typeof (o.v) != "undefined" && o.v !== null) ? o.v : null)}, b, kwargs));
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
var block_battlereport_teamstats = new Surface.BlockConfig("", {});
battlereport.addTemplate(new Surface.Template("teamstats"));
battlereport.teamstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_battlereport_teamstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("battlereport");
    Surface.Renderer.addUsedTemplate("battlereport.teamstats");
    var l_for_battlereport_teamstats_97_13_list;
    var l_me;
    var l_topScores;
    var l_for_battlereport_teamstats_34_21_iteration;
    var l_for_battlereport_teamstats_10_5_list;
    var l_topPlayers;
    var l_dnfShow;
    var l_squadScores;
    var l_topSquad;
    var l_hiddenDnfPlayers;
    var l_for_battlereport_teamstats_34_21_list;
    var l_gravatarSize;
    var l_for_battlereport_teamstats_10_5_iteration;
    c.push("\n");
    c.push("\n");
    l_hiddenDnfPlayers = 0;
    c.push('\n<div id="battlereport-teamstats">\n');
    l_topScores = {"1": 0,"2": 0,"3": 0};
    l_topPlayers = {"1": 0,"2": 0,"3": 0};
    c.push("\n");
    l_for_battlereport_teamstats_10_5_list = o.teams;
    l_for_battlereport_teamstats_10_5_iteration = 0;
    if ((S.Modifier.count(l_for_battlereport_teamstats_10_5_list) > 0)) {
        for (var l_teamId in l_for_battlereport_teamstats_10_5_list) {
            if (!Surface.isValidLoopItem(l_for_battlereport_teamstats_10_5_list[l_teamId])) {
                continue;
            }
            var l_team = l_for_battlereport_teamstats_10_5_list[l_teamId];
            l_for_battlereport_teamstats_10_5_iteration = (l_for_battlereport_teamstats_10_5_iteration + 1);
            c.push(' <div class="battlereport-teamstat-column');
            if ((Surface.modulo(l_for_battlereport_teamstats_10_5_iteration, 2) == 0)) {
                c.push(" last");
            }
            c.push('">\n <div id="battlereport-gamescore-team" class="');
            if ((S.Modifier.get(o.gameReport, "winner", 0) == l_teamId)) {
                c.push("winner");
            }
            c.push('">\n <div class="battlereport-gamescore-title icon-flag-');
            c.push(Surface.valOut(S.Modifier.lower(S.Modifier.get(o.gameReport.teamFactionMapping, l_teamId, l_teamId))));
            c.push('">\n ');
            c.push(Surface.valOut((S.translations[l_team] || l_team)));
            c.push("\n </div>\n </div>\n");
            l_squadScores = {};
            c.push('\n <table class="common-table battlereport-teamstats-list');
            if ((S.Modifier.get(o.gameReport, "winner", 0) != l_teamId)) {
                c.push(" winner");
            }
            if ((typeof (o) != "undefined" && o !== null && typeof (o.showDNF) != "undefined" && o.showDNF !== null)) {
                c.push(" showDNF");
            }
            c.push('" cellpadding="0" data-teamId="');
            c.push(Surface.valOut(l_teamId));
            c.push('">\n <thead>\n <tr>\n <th>#</th>\n <th>Sq</th>\n <th class="align-left">');
            c.push(Surface.valOut("Soldier name"));
            c.push("</th>\n <th>");
            c.push(Surface.valOut("K"));
            c.push("</th>\n <th>");
            c.push(Surface.valOut("D"));
            c.push('</th>\n <th class="last">');
            c.push(Surface.valOut("Score"));
            c.push("</th>\n </tr>\n </thead>\n <tbody>\n");
            l_for_battlereport_teamstats_34_21_list = S.Modifier.get(o.gameReport.players, l_teamId, []);
            l_for_battlereport_teamstats_34_21_iteration = 0;
            if ((S.Modifier.count(l_for_battlereport_teamstats_34_21_list) > 0)) {
                for (var l_for_battlereport_teamstats_34_21_key in l_for_battlereport_teamstats_34_21_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_teamstats_34_21_list[l_for_battlereport_teamstats_34_21_key])) {
                        continue;
                    }
                    var l_player = l_for_battlereport_teamstats_34_21_list[l_for_battlereport_teamstats_34_21_key];
                    l_for_battlereport_teamstats_34_21_iteration = (l_for_battlereport_teamstats_34_21_iteration + 1);
                    if ((((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.squadId) != "undefined" && l_player.squadId !== null) ? l_player.squadId : 8) < 8)) {
                        l_squadScores = S.Modifier.set(l_squadScores, l_player.squadId, (S.Modifier.get(l_squadScores, l_player.squadId, 8) + l_player.combatScore));
                    }
                    c.push("\n");
                    if (!(l_player.dnf)) {
                        if ((l_player.combatScore > S.Modifier.get(l_topScores, 1, 0))) {
                            l_topScores = S.Modifier.set(l_topScores, 3, S.Modifier.get(l_topScores, 2, 0));
                            l_topPlayers = S.Modifier.set(l_topPlayers, 3, S.Modifier.get(l_topPlayers, 2, 0));
                            l_topScores = S.Modifier.set(l_topScores, 2, S.Modifier.get(l_topScores, 1, 0));
                            l_topPlayers = S.Modifier.set(l_topPlayers, 2, S.Modifier.get(l_topPlayers, 1, 0));
                            l_topScores = S.Modifier.set(l_topScores, 1, l_player.combatScore);
                            l_topPlayers = S.Modifier.set(l_topPlayers, 1, l_player.personaId);
                        } else {
                            if ((l_player.combatScore > S.Modifier.get(l_topScores, 2, 0))) {
                                l_topScores = S.Modifier.set(l_topScores, 3, S.Modifier.get(l_topScores, 2, 0));
                                l_topPlayers = S.Modifier.set(l_topPlayers, 3, S.Modifier.get(l_topPlayers, 2, 0));
                                l_topScores = S.Modifier.set(l_topScores, 2, l_player.combatScore);
                                l_topPlayers = S.Modifier.set(l_topPlayers, 2, l_player.personaId);
                            } else {
                                if ((l_player.combatScore > S.Modifier.get(l_topScores, 3, 0))) {
                                    l_topScores = S.Modifier.set(l_topScores, 3, l_player.combatScore);
                                    l_topPlayers = S.Modifier.set(l_topPlayers, 3, l_player.personaId);
                                }
                            }
                        }
                    }
                    c.push("\n");
                    l_me = ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null) && (Surface.globalContext.session.user.userId == S.Modifier.get(l_player.user, "userId", false)));
                    l_dnfShow = (((l_for_battlereport_teamstats_34_21_iteration <= S.Modifier.toint((o.totalPlayersCount / S.Modifier.count(o.teams)))) && (l_for_battlereport_teamstats_34_21_iteration <= 32)) || (l_for_battlereport_teamstats_34_21_iteration <= 4));
                    c.push("\n");
                    if ((l_player.dnf && !(l_dnfShow))) {
                        l_hiddenDnfPlayers = (l_hiddenDnfPlayers + 1);
                    }
                    c.push('\n <tr data-personaId="');
                    c.push(Surface.valOut(l_player.personaId));
                    c.push('" data-path="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/loadplayerreport/{reportId}/{platform}/{personaId}/", Surface.urlContext, {"reportId": o.gameReport.id,"platform": o.gameReport.platform,"personaId": l_player.personaId})));
                    c.push('" ');
                    if ((((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.squadId) != "undefined" && l_player.squadId !== null) ? l_player.squadId : 8) != 8)) {
                        c.push(' data-squad="');
                        c.push(Surface.valOut(((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.squadId) != "undefined" && l_player.squadId !== null) ? l_player.squadId : 8)));
                        c.push('"');
                    }
                    c.push(' class="battlereport-teamstats-player-row ');
                    if (l_me) {
                        c.push("myself");
                    }
                    c.push(" ");
                    if (l_player.dnf) {
                        c.push("dnf");
                    }
                    c.push(" ");
                    if ((l_player.dnf && l_dnfShow)) {
                        c.push("dnf-show");
                    }
                    c.push(" ");
                    if ((l_for_battlereport_teamstats_34_21_iteration <= 3)) {
                        c.push("battlereport-teamstats-list-row-top3");
                    }
                    c.push('">\n <td class="battlereport-teamstats-pos"><div class="battlereport-teamstats-pos-inner">');
                    c.push(Surface.valOut(l_for_battlereport_teamstats_34_21_iteration));
                    c.push('</div></td>\n <td class="battlereport-teamstats-squad">\n ');
                    if ((((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.squadId) != "undefined" && l_player.squadId !== null) ? l_player.squadId : 8) != 8)) {
                        c.push('<div class="battlereport-teamstats-squad-box">');
                        c.push(Surface.valOut(S.Modifier.get(o.squadLetters, S.Modifier.get(l_player, "squadId", 8), "")));
                        c.push("</div>");
                    }
                    c.push('\n </td>\n <td class="align-left battlereport-teamstats-user">\n <div class="battlereport-teamstats-user-container">\n');
                    l_gravatarSize = 22;
                    if ((l_for_battlereport_teamstats_34_21_iteration <= 3)) {
                        l_gravatarSize = 30;
                    }
                    c.push(" ");
                    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.user) != "undefined" && l_player.user !== null) ? l_player.user : false),"gravatarSize": l_gravatarSize}, null, kwargs));
                    c.push('\n <div class="battlereport-teamstats-user-personarank">');
                    c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank": S.Modifier.get(l_player, "rank", "0"),"rank_game": S.Modifier.get(o.gameReport, "game", 2),"rank_size": "tiny"}, null, kwargs));
                    c.push('</div>\n <div class="battlereport-teamstats-user-info">\n ');
                    c.push(Surface.importTemplate(("common" + ("." + "playername")), {"user": S.Modifier.get(l_player, "user", false),"persona": S.Modifier.get(l_player, "persona", false),"noLink": true}, null, kwargs));
                    c.push('\n </div>\n </div>\n </td>\n <td class="battlereport-teamstats-kills">');
                    c.push(Surface.valOut(l_player.kills));
                    c.push('</td>\n <td class="battlereport-teamstats-deaths">');
                    c.push(Surface.valOut(l_player.deaths));
                    c.push('</td>\n <td class="battlereport-teamstats-score last">');
                    c.push(Surface.valOut(l_player.combatScore));
                    c.push("</td>\n </tr>\n");
                }
            } else {
                c.push(' <tr><td colspan="6" class="battlereport-teamstats-no-players">No players in this team</td></tr>\n');
            }
            c.push(" </tbody>\n </table>\n");
            l_topSquad = 8;
            l_for_battlereport_teamstats_97_13_list = l_squadScores;
            if ((S.Modifier.count(l_for_battlereport_teamstats_97_13_list) > 0)) {
                for (var l_squadId in l_for_battlereport_teamstats_97_13_list) {
                    if (!Surface.isValidLoopItem(l_for_battlereport_teamstats_97_13_list[l_squadId])) {
                        continue;
                    }
                    var l_score = l_for_battlereport_teamstats_97_13_list[l_squadId];
                    if ((l_score > S.Modifier.get(l_squadScores, l_topSquad, 8))) {
                        l_topSquad = l_squadId;
                    }
                }
            }
            c.push("\n");
            if ((l_topSquad < 8)) {
                c.push('<input type="hidden" value="');
                c.push(Surface.valOut(l_topSquad));
                c.push('" class="battlereport-teamstats-bestsquad" />');
            }
            c.push("\n </div>\n");
        }
    }
    c.push('\n <input type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.get(l_topPlayers, 1, 0)));
    c.push('" id="battlereport-teamstats-topplayer-pos1">\n <input type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.get(l_topPlayers, 2, 0)));
    c.push('" id="battlereport-teamstats-topplayer-pos2">\n <input type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.get(l_topPlayers, 3, 0)));
    c.push('" id="battlereport-teamstats-topplayer-pos3">\n <div class="base-clear"></div>\n');
    if (((l_hiddenDnfPlayers > 0) && !((typeof (o) != "undefined" && o !== null && typeof (o.showDNF) != "undefined" && o.showDNF !== null)))) {
        c.push(' <span class="common-cleanbutton" id="battlereport-teamstats-show-dnf">\n <a>\n <span class="common-cleanbutton-left"></span>\n <span class="common-cleanbutton-middle">View more players</span>\n <span class="common-cleanbutton-right"></span>\n </a>\n </span>\n <div class="base-clear"></div>\n');
    }
    c.push('</div>\n<div class="base-clear"></div>');
    return c.join("");
};
if (typeof benchmark == "undefined") {
    var benchmark = {};
}
var surf_benchmark_component = new Surface.Component("benchmark");
surf_benchmark_component.extend(benchmark);
benchmark = surf_benchmark_component;
benchmark.addTemplate(new Surface.Template("bigworld"));
benchmark.addTemplate(new Surface.Template("helloworld"));
var block_benchmark_index = new Surface.BlockConfig("base.index", {"main": "benchmark.index.block_main"});
benchmark.addTemplate(new Surface.Template("index"));
benchmark.addTemplate(new Surface.Template("model"));
var block_benchmark_modelwithsurface = new Surface.BlockConfig("", {});
benchmark.addTemplate(new Surface.Template("modelwithsurface"));
benchmark.modelwithsurface.surface_1_0 = new Surface.SingleSurface("benchmark.modelwithsurface.surface_1_0");
benchmark.modelwithsurface.surface_1_0.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_benchmark_modelwithsurface;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("benchmark");
    Surface.Renderer.addUsedTemplate("benchmark.modelwithsurface");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("hello", o.item.id));
    c.push('">');
    c.push(" ");
    c.push(Surface.importTemplate(("benchmark" + ("." + "model")), {"item": o.item}, null, kwargs));
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("benchmark.modelwithsurface", "surface_1_0", S.Modifier.concat("hello", o.item.id), o, b);
    return c.join("");
};
var block_benchmark_simple = new Surface.BlockConfig("", {});
benchmark.addTemplate(new Surface.Template("simple"));
benchmark.simple.surface_31_10 = new Surface.SingleSurface("benchmark.simple.surface_31_10");
benchmark.simple.surface_31_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_benchmark_simple;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("benchmark");
    Surface.Renderer.addUsedTemplate("benchmark.simple");
    c.push('<surf:container id="');
    c.push("single");
    c.push('">');
    c.push(" Hello ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.foo) != "undefined" && o.foo !== null) ? o.foo : "bar")));
    c.push(" ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.bench) != "undefined" && o.bench !== null && typeof (o.bench.name) != "undefined" && o.bench.name !== null) ? o.bench.name : "asdf")));
    c.push("\n Ut enim ad minim veniam, quis nostrud exercitation ullamco ");
    c.push(Surface.valOut(o.item));
    c.push(" laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n ");
    c.push(Surface.valOut(S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.items) != "undefined" && o.items !== null) ? o.items : []))));
    c.push(" items\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("benchmark.simple", "surface_31_10", "single", o, b);
    return c.join("");
};
if (typeof campaign == "undefined") {
    var campaign = {};
}
var surf_campaign_component = new Surface.Component("campaign");
surf_campaign_component.extend(campaign);
campaign = surf_campaign_component;
var block_campaign_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "campaign.base.block_titleComponent"});
campaign.addTemplate(new Surface.Template("base"));
campaign.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.base");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
campaign.base.block_titleComponent = new Surface.Block("campaign.base.block_titleComponent");
campaign.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Campaign"));
    c.push(" - ");
    return c.join("");
};
var block_campaign_index = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "campaign.index.block_titleItem","mainContent": "campaign.index.block_mainContent"});
campaign.addTemplate(new Surface.Template("index"));
var block_campaign_indexOld = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "campaign.indexOld.block_titleItem","mainContent": "campaign.indexOld.block_mainContent"});
campaign.addTemplate(new Surface.Template("indexOld"));
var block_campaign_info = new Surface.BlockConfig("campaign.base", {"mainContent": "campaign.info.block_mainContent"});
campaign.addTemplate(new Surface.Template("info"));
var block_campaign_leaderboard = new Surface.BlockConfig("campaign.base", {"titleItem": "campaign.leaderboard.block_titleItem","mainContent": "campaign.leaderboard.block_mainContent"});
campaign.addTemplate(new Surface.Template("leaderboard"));
campaign.addTemplate(new Surface.Template("map"));
var block_campaign_missioninfo = new Surface.BlockConfig("", {});
campaign.addTemplate(new Surface.Template("missioninfo"));
campaign.missioninfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_missioninfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.missioninfo");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
campaign.function_allmissions = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_missions;
    l_missions = [{"level": 1,"name": "SP_Newyork","active": 1,"title": "Semper Fidelis"}, {"level": 2,"name": "SP_Earthquake","title": "momma told johnny not to go downtown"}, {"level": 3,"name": "SP_Jet","title": "halloween"}, {"level": 4,"name": "SP_Bank","title": "operation guillotine"}, {"level": 5,"name": "SP_Paris","title": "all russian"}, {"level": 6,"name": "SP_Tank","title": "ID_WEB_LEVELS_SP_TANK"}, {"level": 7,"name": "SP_Sniper","title": "ID_WEB_LEVELS_SP_SNIPER"}, {"level": 8,"name": "SP_Valley","title": "ID_WEB_LEVELS_SP_VALLEY"}, {"level": 9,"name": "SP_Villa","title": "ID_WEB_LEVELS_SP_VILLA"}, {"level": 10,"name": "SP_Finale","title": "ID_WEB_LEVELS_SP_FINALE"}];
    return l_missions;
};
var block_campaign_missions = new Surface.BlockConfig("campaign.base", {"titleItem": "campaign.missions.block_titleItem","mainContent": "campaign.missions.block_mainContent"});
campaign.addTemplate(new Surface.Template("missions"));
var block_campaign_missions_use_81_21 = new Surface.BlockConfig("common.boxwideclean", {"content": "campaign.missions._use_81_21_block_content","titleContainer": "campaign.missions._use_81_21_block_titleContainer","extraClass": "campaign.missions._use_81_21_block_extraClass"});
var block_campaign_missions_use_64_21 = new Surface.BlockConfig("common.secondarycontent", {"content": "campaign.missions._use_64_21_block_content","titleContainer": "campaign.missions._use_64_21_block_titleContainer","extraClass": "campaign.missions._use_64_21_block_extraClass"});
campaign.missions.surface_39_21 = new Surface.SingleSurface("campaign.missions.surface_39_21");
campaign.missions.surface_39_21.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_missions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.missions");
    c.push('<surf:container id="');
    c.push("campaign-ongoing");
    c.push('">');
    var l_difficulty;
    if (o.currentlevel) {
        c.push(' <h2 class="base-big-title">');
        c.push(Surface.valOut("Current mission"));
        c.push("</h2>\n");
        l_difficulty = "normal";
        c.push('\n <ul id="campaign-current-mission">\n <li class="campaign-missions-mission campaign-mission-');
        c.push(Surface.valOut(S.Modifier.get(o.currentlevel, "title")));
        c.push(' common-active-row">\n <div class="campaign-missions-mission-active common-active-row-marker"></div>\n <div class="campaign-missions-mission-title">\n');
        if ((S.Modifier.count(S.Modifier.get(o.currentlevel, "title")) > 30)) {
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.truncate(S.Modifier.get(o.currentlevel, "title"), 25)));
            c.push("...\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.get(o.currentlevel, "title")));
            c.push("\n");
        }
        c.push(' </div>\n <div class="campaign-missions-mission-grade">');
        c.push(Surface.valOut(S.Modifier.capitalize(l_difficulty)));
        c.push("</div>\n </li>\n </ul>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("campaign.missions", "surface_39_21", "campaign-ongoing", o, b);
    return c.join("");
};
campaign.missions.surface_86_29 = new Surface.SingleSurface("campaign.missions.surface_86_29");
campaign.missions.surface_86_29.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_missions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.missions");
    c.push('<surf:container id="');
    c.push("campaign-mission");
    c.push('">');
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.missingPlugin) != "undefined" && o.missingPlugin !== null) ? o.missingPlugin : false)) {
        c.push(' <p class="campaign-missing-plugin">');
        c.push(Surface.valOut("You need to have plugin installed in order to start a mission."));
        c.push("</p>\n");
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null)) {
            c.push(' <div class="campaign-mission-image">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/campaign/missions/", o.mission.name), "_L.jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n <div class="campaign-mission-titles">\n <div class="campaign-mission-small-title">');
            c.push(Surface.valOut("Mission"));
            c.push(" ");
            c.push(Surface.valOut(o.mission.level));
            c.push('</div>\n <div class="campaign-mission-big-title">\n');
            if ((S.Modifier.count(o.mission.title) > 40)) {
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.truncate(o.mission.title, 40)));
                c.push("...\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut(o.mission.title));
                c.push("\n");
            }
            c.push(' </div>\n </div>\n <div class="campaign-mission-start">\n <form action="" method="POST" id="campaign-load-mission" class="base-no-ajax">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input type="hidden" name="level" value="');
            c.push(Surface.valOut(o.mission.name));
            c.push('" />\n');
            if (o.currentlevel) {
                c.push(' <input name="resume-game" type="submit" class="base-button-arrow-gigantic" value="');
                c.push(Surface.valOut("Resume campaign"));
                c.push('" />\n');
            } else {
                c.push(' <ul id="campaign-difficulty" class="common-selector-alt">\n <li class="first"><div class="easy">');
                c.push(Surface.valOut("Easy"));
                c.push('</div></li>\n <li class="selected"><div class="normal">');
                c.push(Surface.valOut("Normal"));
                c.push('</div></li>\n <li><div class="hard">');
                c.push(Surface.valOut("Hard"));
                c.push('</div></li>\n <li class="last"><div class="hardcore">');
                c.push(Surface.valOut("Hardcore"));
                c.push('</div></li>\n </ul>\n <input name="start-mission" type="submit" class="base-button-arrow-gigantic" value="');
                c.push(Surface.valOut("Start mission"));
                c.push('" />\n');
            }
            c.push('\n </form>\n </div>\n </div>\n <div class="campaign-mission-description">\n ');
            c.push(Surface.valOut(o.mission.description));
            c.push('\n </div>\n <ul class="campaign-mission-difficulty-select">\n <li');
            if (o.completed.easy) {
                c.push(' class="completed"');
            }
            c.push(">");
            c.push(Surface.valOut("Easy"));
            c.push(" <span>1000 ");
            c.push(Surface.valOut("points"));
            c.push("</span></li>\n <li");
            if (o.completed.normal) {
                c.push(' class="completed"');
            }
            c.push(">");
            c.push(Surface.valOut("Normal"));
            c.push(" <span>2000 ");
            c.push(Surface.valOut("points"));
            c.push("</span></li>\n <li");
            if (o.completed.hard) {
                c.push(' class="completed"');
            }
            c.push(">");
            c.push(Surface.valOut("Hard"));
            c.push(" <span>5000 ");
            c.push(Surface.valOut("points"));
            c.push("</span></li>\n <li");
            if (o.completed.hardcore) {
                c.push(' class="completed"');
            }
            c.push(">");
            c.push(Surface.valOut("Hardcore"));
            c.push(" <span>8000 ");
            c.push(Surface.valOut("points"));
            c.push('</span></li>\n </ul>\n <div class="base-clear" style="padding-bottom: 16px;"></div>\n');
        }
        c.push("\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("campaign.missions", "surface_86_29", "campaign-mission", o, b);
    return c.join("");
};
var block_campaign_missionslist = new Surface.BlockConfig("", {});
campaign.addTemplate(new Surface.Template("missionslist"));
campaign.missionslist.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_missionslist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.missionslist");
    c.push('\n<li class="campaign-missions-mission campaign-mission-');
    c.push(Surface.valOut(S.Modifier.get(o.m, "name")));
    c.push(' common-active-row disabled notdone">\n <div class="campaign-missions-mission-active common-active-row-marker"></div>\n <div class="campaign-missions-mission-title">\n');
    if ((S.Modifier.count(S.Modifier.get(o.m, "title")) > 30)) {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.truncate(S.Modifier.get(o.m, "title"), 25)));
        c.push("...\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.get(o.m, "title")));
        c.push("\n");
    }
    c.push(' </div>\n <div class="campaign-missions-mission-grade">');
    c.push(Surface.valOut(S.Modifier.capitalize(o.difficulty)));
    c.push("</div>\n</li>\n");
    return c.join("");
};
var block_campaign_score = new Surface.BlockConfig("", {});
campaign.addTemplate(new Surface.Template("score"));
campaign.score.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_score;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.score");
    c.push("\n");
    c.push(campaign.score.surface_3_2.render({"levelcount": {"EASY": ((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.EASY) != "undefined" && o.levelcount.EASY !== null) ? o.levelcount.EASY : null),"HARD": ((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARD) != "undefined" && o.levelcount.HARD !== null) ? o.levelcount.HARD : null),"HARDCORE": ((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARDCORE) != "undefined" && o.levelcount.HARDCORE !== null) ? o.levelcount.HARDCORE : null),"NORMAL": ((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.NORMAL) != "undefined" && o.levelcount.NORMAL !== null) ? o.levelcount.NORMAL : null)},"score": ((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null) ? o.score : null),"totalscore": ((typeof (o) != "undefined" && o !== null && typeof (o.totalscore) != "undefined" && o.totalscore !== null) ? o.totalscore : null)}, b, kwargs));
    return c.join("");
};
campaign.score.surface_3_2 = new Surface.SingleSurface("campaign.score.surface_3_2");
campaign.score.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_campaign_score;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("campaign");
    Surface.Renderer.addUsedTemplate("campaign.score");
    c.push('<surf:container id="');
    c.push("campaign-score");
    c.push('">');
    if ((S.Modifier.count(o.score) > 0)) {
        c.push(' <div id="campaign-stats-overall" class="base-box-push">\n <div class="base-box-push-inner">\n <div class="section">\n <h3>');
        c.push(Surface.valOut("Action scores"));
        c.push('</h3>\n <table>\n <tr><td class="title">');
        c.push(Surface.valOut("Kills"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.kills) != "undefined" && o.score.kills !== null) ? o.score.kills : "0")));
        c.push('</td><td class="value">10</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.kills) != "undefined" && o.score.kills !== null) ? o.score.kills : "0") * 10)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Headshots"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.headshots) != "undefined" && o.score.headshots !== null) ? o.score.headshots : "0")));
        c.push('</td><td class="value">50</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.headshots) != "undefined" && o.score.headshots !== null) ? o.score.headshots : "0") * 50)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Accuracy kills"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.accuracy_kills) != "undefined" && o.score.accuracy_kills !== null) ? o.score.accuracy_kills : "0")));
        c.push('</td><td class="value">50</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.accuracy_kills) != "undefined" && o.score.accuracy_kills !== null) ? o.score.accuracy_kills : "0") * 50)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Vehicle destroys"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.vehicle_destroys) != "undefined" && o.score.vehicle_destroys !== null) ? o.score.vehicle_destroys : "0")));
        c.push('</td><td class="value">100</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.vehicle_destroys) != "undefined" && o.score.vehicle_destroys !== null) ? o.score.vehicle_destroys : "0") * 100)));
        c.push('</td></tr>\n </table>\n </div>\n <div class="section">\n <h3>');
        c.push(Surface.valOut("Completed missions score"));
        c.push('</h3>\n <table>\n <tr><td class="title">');
        c.push(Surface.valOut("Easy"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.EASY) != "undefined" && o.levelcount.EASY !== null) ? o.levelcount.EASY : "0")));
        c.push('</td><td class="value">1000</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.EASY) != "undefined" && o.levelcount.EASY !== null) ? o.levelcount.EASY : "0") * 1000)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Normal"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.NORMAL) != "undefined" && o.levelcount.NORMAL !== null) ? o.levelcount.NORMAL : "0")));
        c.push('</td><td class="value">2000</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.NORMAL) != "undefined" && o.levelcount.NORMAL !== null) ? o.levelcount.NORMAL : "0") * 2000)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Hard"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARD) != "undefined" && o.levelcount.HARD !== null) ? o.levelcount.HARD : "0")));
        c.push('</td><td class="value">5000</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARD) != "undefined" && o.levelcount.HARD !== null) ? o.levelcount.HARD : "0") * 5000)));
        c.push('</td></tr>\n <tr><td class="title">');
        c.push(Surface.valOut("Hardcore"));
        c.push('</td><td class="multiplier">x');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARDCORE) != "undefined" && o.levelcount.HARDCORE !== null) ? o.levelcount.HARDCORE : "0")));
        c.push('</td><td class="value">10000</td><td class="score">');
        c.push(Surface.valOut((((typeof (o) != "undefined" && o !== null && typeof (o.levelcount) != "undefined" && o.levelcount !== null && typeof (o.levelcount.HARDCORE) != "undefined" && o.levelcount.HARDCORE !== null) ? o.levelcount.HARDCORE : "0") * 10000)));
        c.push('</td></tr>\n </table>\n </div>\n <div class="section">\n <h3>');
        c.push(Surface.valOut("Total campaign score"));
        c.push('</h3>\n <div id="total-score" class="container">\n <div class="progress-icon">\n <img width="52" height="50" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/campaign/mock-grade.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="" />\n <p>');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.score) != "undefined" && o.score !== null && typeof (o.score.star) != "undefined" && o.score.star !== null) ? o.score.star : 0)));
        c.push('</p>\n </div>\n <p class="total-score">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.totalscore) != "undefined" && o.totalscore !== null) ? o.totalscore : 0)));
        c.push("</p>\n </div>\n </div>\n </div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("campaign.score", "surface_3_2", "campaign-score", o, b);
    return c.join("");
};
if (typeof comcenter == "undefined") {
    var comcenter = {};
}
var surf_comcenter_component = new Surface.Component("comcenter");
surf_comcenter_component.extend(comcenter);
comcenter = surf_comcenter_component;
var block_comcenter_area = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("area"));
comcenter.area.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_area;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.area");
    var l_realm;
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push("\n");
    c.push(Surface.importTemplate(("comcenter" + ("." + "list")), o, null, kwargs));
    c.push('\n<div id="comcenter-friendbutton" class="comcenter-item notselectable">\n');
    c.push(comcenter.area.surface_8_6.render({"friendscomcenter": ((typeof (o) != "undefined" && o !== null && typeof (o.friendscomcenter) != "undefined" && o.friendscomcenter !== null) ? o.friendscomcenter : null),"unread": ((typeof (o) != "undefined" && o !== null && typeof (o.unread) != "undefined" && o.unread !== null) ? o.unread : null)}, b, kwargs));
    c.push('\n</div>\n<input id="getChatId-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/getChatId/{friendUserId}/", Surface.urlContext, {"friendUserId": "#USERID#"})));
    c.push(' " type="hidden" />\n<input id="inviteToParty-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/inviteToParty/{userId}/{chatId}/", Surface.urlContext, {"userId": "#USERID#","chatId": "#CHATID#"})));
    c.push(' " type="hidden" />\n<input id="setChatAsActive-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/setChatAsActive/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push(' " type="hidden" />\n<input id="leaveChat-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/leaveChat/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="hideChat-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/hideChat/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="markAllRead-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/markAllRead/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="getToken-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/getToken/", Surface.urlContext)));
    c.push('" type="hidden" />\n<input id="checkIdle-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/checkIdle/", Surface.urlContext)));
    c.push('" type="hidden" />\n<input id="setNotIdle-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/setActive/", Surface.urlContext)));
    c.push('" type="hidden" />\n<input id="inviteGame-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/inviteToCurrentServer/{userId}/", Surface.urlContext, {"userId": "#USERID#"})));
    c.push('" type="hidden" />\n<input id="sendInviteGameStatus-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/sendInviteGameStatus/{userId}/{status}/", Surface.urlContext, {"userId": "#USERID#","status": "#STATUS#"})));
    c.push('" type="hidden" />\n<input id="getChat-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/getChat/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="syncComcenter-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/sync/", Surface.urlContext)));
    c.push('" type="hidden" />\n<input id="inviteCoopGame-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/inviteToCoop/{ownerPersonaId}/{invitedUserId}/{level}/{difficulty}/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_realm.section, b, kwargs),"ownerPersonaId": "#OWNERPERSONAID#","level": "#LEVEL#","invitedUserId": "#USERID#","difficulty": "#DIFFICULTY#"})));
    c.push('" type="hidden" />\n<input id="resendInviteCoopGame-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/resendInviteToCoop/{coopId}/", Surface.urlContext, {"coopId": "#COOPID#"})));
    c.push('" type="hidden" />\n<input id="coopStartPublic-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/startPublic/{level}/{difficulty}/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_realm.section, b, kwargs),"level": "#LEVEL#","difficulty": "#DIFFICULTY#"})));
    c.push('" type="hidden" />\n<input id="coopDecline-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/declineGame/{coopId}/", Surface.urlContext, {"coopId": "#COOPID#"})));
    c.push('" type="hidden" />\n<input id="coopLeave-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/leaveGame/{coopId}/", Surface.urlContext, {"coopId": "#COOPID#"})));
    c.push('" type="hidden" />\n<input id="coopJoinGame-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/acceptInvite/{coopId}/", Surface.urlContext, {"coopId": "#COOPID#"})));
    c.push('" type="hidden" />\n<input id="inviteGroupJoin-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/inviteToGroupJoinServer/{invitedUserId}/", Surface.urlContext, {"invitedUserId": "#USERID#","guid": "#GUID#"})));
    c.push('" type="hidden" />\n<input id="createGroupJoin-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": "#GUID#"})));
    c.push('" type="hidden" />\n<input id="joinChatParty-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/joinChatParty/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="getPartyMembers-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/getPartyMembers/{chatId}/", Surface.urlContext, {"chatId": "#CHATID#"})));
    c.push('" type="hidden" />\n<input id="sendStatusGroupJoin-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/setGroupInviteResponse/{groupId}/{status}/", Surface.urlContext, {"groupId": "#GROUPID#","status": "#STATUS#"})));
    c.push('" type="hidden" />\n<input id="leaveGroupJoin-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/leaveGroupJoin/", Surface.urlContext)));
    c.push('" type="hidden" />\n<input id="kickGroupJoin-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/kickGroupJoin/{userId}/", Surface.urlContext, {"userId": "#USERID#"})));
    c.push('" type="hidden" />\n<input id="profile-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": "#USERNAME#"})));
    c.push('" type="hidden" />\n<input id="getServerBrowserFilter" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getFilter/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_realm.section, b, kwargs)})));
    c.push('" type="hidden" />\n<input id="serverJoinUrl" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": "#GUID#","slug": "#SLUG#"})));
    c.push('" type="hidden" />\n<input id="feedGetComments-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/getComments/{itemId}/", Surface.urlContext, {"itemId": "#ITEMID#"})));
    c.push('" type="hidden" />');
    return c.join("");
};
comcenter.area.surface_8_6 = new Surface.SingleSurface("comcenter.area.surface_8_6");
comcenter.area.surface_8_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_area;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.area");
    c.push('<surf:container id="');
    c.push("comcenter-surface-taskbar");
    c.push('">');
    var l_online;
    var l_party;
    var l_for_comcenter_area_17_22_list;
    var l_playing;
    c.push(' <div class="comcenter-taskbar-inner ');
    if (((Surface.globalContext.userContext.voice && Surface.globalContext.userContext.voice.channel) && S.Modifier.get(Surface.globalContext.userContext.voice.channel, "channelId", false))) {
        c.push("comcenter-in-voice");
    }
    c.push('">\n <div class="comcenter-taskbar-info">\n ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.unread) != "undefined" && o.unread !== null) ? o.unread : false)) {
        c.push('<div class="comcenter-request-unread"></div>');
    }
    c.push('\n <div class="comcenter-button-title">Com center</div>\n');
    l_online = 0;
    l_playing = 0;
    l_party = 0;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.friendscomcenter) != "undefined" && o.friendscomcenter !== null)) {
        l_for_comcenter_area_17_22_list = o.friendscomcenter;
        if ((S.Modifier.count(l_for_comcenter_area_17_22_list) > 0)) {
            for (var l_for_comcenter_area_17_22_key in l_for_comcenter_area_17_22_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_area_17_22_list[l_for_comcenter_area_17_22_key])) {
                    continue;
                }
                var l_friend = l_for_comcenter_area_17_22_list[l_for_comcenter_area_17_22_key];
                if (((typeof (l_friend) != "undefined" && l_friend !== null && typeof (l_friend.presence) != "undefined" && l_friend.presence !== null && typeof (l_friend.presence.isOnline) != "undefined" && l_friend.presence.isOnline !== null) ? l_friend.presence.isOnline : false)) {
                    l_online = (l_online + 1);
                }
                if (((typeof (l_friend) != "undefined" && l_friend !== null && typeof (l_friend.presence) != "undefined" && l_friend.presence !== null && typeof (l_friend.presence.isPlaying) != "undefined" && l_friend.presence.isPlaying !== null) ? l_friend.presence.isPlaying : false)) {
                    l_playing = (l_playing + 1);
                }
                if (((typeof (l_friend) != "undefined" && l_friend !== null && typeof (l_friend.presence) != "undefined" && l_friend.presence !== null && typeof (l_friend.presence.partyId) != "undefined" && l_friend.presence.partyId !== null) && (l_friend.presence.partyId > 0))) {
                    l_party = (l_party + 1);
                }
            }
        }
    }
    o.online = l_online;
    o.playing = l_playing;
    c.push(' <div class="comcenter-button-info">');
    if ((l_playing > 0)) {
        c.push(Surface.valOut(l_playing));
        c.push(" ");
        c.push(Surface.valOut("playing"));
        c.push(" &#149;");
    }
    c.push(" ");
    if ((l_party > 0)) {
        c.push(Surface.valOut(l_party));
        c.push(" ");
        c.push(Surface.valOut("in party"));
        c.push(" &#149;");
    }
    c.push(" ");
    c.push(Surface.valOut(l_online));
    c.push(" ");
    c.push(Surface.valOut("online"));
    c.push("</div>\n </div>\n");
    if (!(Surface.globalContext.isTouchDevice)) {
        c.push(' <div class="comcenter-taskbar-voice-info">\n <div class="comcenter-setting mic">\n </div>\n <div id="comcenter-voice-noise-container" class="comcenter-setting noise">\n <div id="comcenter-voice-slider-container">\n <div class="comcenter-sonar-slider"></div>\n </div>\n </div>\n </div>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.area", "surface_8_6", "comcenter-surface-taskbar", o, b);
    return c.join("");
};
var block_comcenter_chat = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("chat"));
comcenter.chat.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chat;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chat");
    c.push("\n");
    c.push('<div id="comcenter-chat-');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('" rel="');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('" class="comcenter-chat-taskbar ');
    if ((((S.Modifier.get(o.chat, "unreadCount") !== null) ? S.Modifier.get(o.chat, "unreadCount") : 0) > 0)) {
        c.push("unread");
    }
    c.push(" ");
    if (S.Modifier.get(o.chat, "isParty", false)) {
        c.push("comcenter-party-chat");
    }
    c.push('">\n');
    c.push(comcenter.chat.surface_4_2.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null)}, b, kwargs));
    c.push('</div>\n<div class="comcenter-divider-left"></div>');
    return c.join("");
};
comcenter.chat.surface_4_2 = new Surface.SingleSurface("comcenter.chat.surface_4_2");
comcenter.chat.surface_4_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chat;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chat");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("chat-surface-container-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    if (S.Modifier.get(o.chat, "isParty", false)) {
        c.push(" ");
        c.push(Surface.importTemplate(("comcenter" + ("." + "chatparty")), {"chat": o.chat}, null, kwargs));
        c.push("\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("comcenter" + ("." + "chatprivate")), {"chat": o.chat}, null, kwargs));
        c.push("\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chat", "surface_4_2", S.Modifier.concat("chat-surface-container-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
var block_comcenter_chatmessage = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("chatmessage"));
comcenter.chatmessage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatmessage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatmessage");
    var l_locale;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_locale = l_session.locale;
    if ((!((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null && typeof (o.message.fromUsername) != "undefined" && o.message.fromUsername !== null)) || (o.message.fromUsername == "0"))) {
        c.push(' <div class="comcenter-chat-status-message-content">\n');
        if (S.Modifier.get(o.message.message, "userLeftId", false)) {
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.get(o.message.message, "username")));
            c.push(" left\n");
        } else {
            if ((S.Modifier.get(o.message.message, "privacy", "NOWAY") != "NOWAY")) {
                if ((S.Modifier.get(o.message.message, "privacy") == 1)) {
                    c.push(" Party is now Public\n");
                } else {
                    c.push(" Party is now Private\n");
                }
            } else {
                if (S.Modifier.get(o.message.message, "invited", false)) {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.get(o.message.message, "invited")));
                    c.push(" ");
                    c.push(Surface.valOut("was invited"));
                    c.push("\n");
                } else {
                    if (S.Modifier.get(o.message.message, "groupjoin", false)) {
                        c.push(" Party Join started!\n");
                    } else {
                        if (S.Modifier.get(o.message.message, "inviteUsername", false)) {
                            c.push("\n");
                            c.push(Surface.valOut(S.Modifier.get(o.message.message, "inviteUsername")));
                            c.push(" ");
                            c.push(Surface.valOut("joined"));
                            c.push("\n");
                        } else {
                            c.push(" Unknown event: ");
                            c.push(Surface.valOut(S.Modifier.dump(o.message.message)));
                            c.push("\n");
                        }
                    }
                }
            }
        }
        c.push("\n </div>\n");
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.lastChatter) != "undefined" && o.lastChatter !== null) && (o.lastChatter == o.message.fromUsername))) {
            c.push(' <div author="');
            c.push(Surface.valOut(o.message.fromUsername));
            c.push('" class="comcenter-chat-message-content comcenter-chat-same-author">\n ');
            c.push(o.message.message);
            c.push("\n </div>\n");
        } else {
            c.push(' <div author="');
            c.push(Surface.valOut(o.message.fromUsername));
            c.push('" class="comcenter-chat-message">\n');
            if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (o.message.fromUsername == l_session.user.username))) {
                c.push(' <div class="comcenter-chat-username-you">');
                c.push(Surface.valOut("You"));
                c.push("</div>\n");
            } else {
                c.push(' <div class="comcenter-chat-username-other">');
                c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": o.message.fromUsername}, null, kwargs));
                c.push("</div>\n");
            }
            c.push(' <div class="comcenter-chat-timestamp ');
            if (((typeof (o) != "undefined" && o !== null && typeof (o.ownMessage) != "undefined" && o.ownMessage !== null) ? o.ownMessage : false)) {
                c.push("comcenter-chat-ownmessage");
            }
            c.push('">');
            if (o.message.timestamp) {
                c.push(Surface.valOut(S.Modifier.offsetdateformat(o.message.timestamp, l_locale.time, l_locale.offset)));
            }
            c.push('</div>\n <div author="');
            c.push(Surface.valOut(o.message.fromUsername));
            c.push('" class="comcenter-chat-message-content">\n ');
            c.push(o.message.message);
            c.push("\n </div>\n </div>\n");
        }
    }
    return c.join("");
};
var block_comcenter_chatparty = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("chatparty"));
comcenter.chatparty.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    var l_for_comcenter_chatparty_127_10_list;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<div class="comcenter-chat-content comcenter-chat-group comcenter-chat-party">\n <div class="comcenter-chat-header-container">\n');
    c.push(comcenter.chatparty.surface_7_10.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"session": ((typeof (l_session) != "undefined" && l_session !== null) ? l_session : null)}, b, kwargs));
    c.push(" </div>\n");
    c.push('\n <div id = "chat_');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('" class="comcenter-chat-chat" rel="');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('">\n');
    o.lastChatter = "";
    l_for_comcenter_chatparty_127_10_list = S.Modifier.get(o.chat, "messages");
    if ((S.Modifier.count(l_for_comcenter_chatparty_127_10_list) > 0)) {
        for (var l_for_comcenter_chatparty_127_10_key in l_for_comcenter_chatparty_127_10_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_chatparty_127_10_list[l_for_comcenter_chatparty_127_10_key])) {
                continue;
            }
            var l_message = l_for_comcenter_chatparty_127_10_list[l_for_comcenter_chatparty_127_10_key];
            c.push(" ");
            c.push(Surface.importTemplate(("comcenter" + ("." + "chatmessage")), {"message": l_message,"lastChatter": o.lastChatter}, null, kwargs));
            c.push("\n");
            o.lastChatter = l_message.fromUsername;
        }
    }
    c.push(' </div>\n <div class="comcenter-chat-bottom-container">\n');
    c.push(comcenter.chatparty.surface_134_10.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null)}, b, kwargs));
    c.push(' <div class="comcenter-bottom-row"></div>\n </div>\n</div>\n');
    c.push(comcenter.chatparty.surface_147_2.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null)}, b, kwargs));
    return c.join("");
};
comcenter.chatparty.surface_7_10 = new Surface.SingleSurface("comcenter.chatparty.surface_7_10");
comcenter.chatparty.surface_49_18 = new Surface.SingleSurface("comcenter.chatparty.surface_49_18");
comcenter.chatparty.surface_108_26 = new Surface.SurfaceList("comcenter.chatparty.surface_108_26", "voiceUsers", "user", "user.userId");
comcenter.chatparty.surface_109_30 = new Surface.SingleSurface("comcenter.chatparty.surface_109_30");
comcenter.chatparty.surface_109_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-party-voice-icons", S.Modifier.concat("_", o.user.userId)));
    c.push('">');
    c.push(' <div class="comcenter-chat-voice-icon">\n <div id="user-voice-');
    c.push(Surface.valOut(o.user.userId));
    c.push('" class="chat-voice-icon ');
    if ((S.Modifier.contains(S.Modifier.get(o.chat, "channelUsers", []), o.user.userId) || ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.isInVoice) != "undefined" && o.user.isInVoice !== null) ? o.user.isInVoice : false))) {
        c.push("chat-in-voice");
    }
    c.push(" ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.isSpeaking) != "undefined" && o.user.isSpeaking !== null) ? o.user.isSpeaking : false)) {
        c.push("chat-is-speaking");
    }
    c.push(" ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.isMuted) != "undefined" && o.user.isMuted !== null) ? o.user.isMuted : false)) {
        c.push("chat-is-muted");
    }
    c.push('">\n </div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_109_30", S.Modifier.concat("comcenter-party-voice-icons", S.Modifier.concat("_", o.user.userId)), o, b);
    return c.join("");
};
comcenter.chatparty.surface_108_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push("comcenter-party-voice-icons");
    c.push('">');
    var l_for_comcenter_chatparty_108_26_list;
    l_for_comcenter_chatparty_108_26_list = o.voiceUsers;
    if ((S.Modifier.count(l_for_comcenter_chatparty_108_26_list) > 0)) {
        for (var l_for_comcenter_chatparty_108_26_key in l_for_comcenter_chatparty_108_26_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_chatparty_108_26_list[l_for_comcenter_chatparty_108_26_key])) {
                continue;
            }
            var l_user = l_for_comcenter_chatparty_108_26_list[l_for_comcenter_chatparty_108_26_key];
            c.push(comcenter.chatparty.surface_109_30.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"user": ((typeof (l_user) != "undefined" && l_user !== null) ? l_user : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_108_26", "comcenter-party-voice-icons", o, b);
    return c.join("");
};
comcenter.chatparty.surface_49_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push("comcenter-party-voice");
    c.push('">');
    var l_for_comcenter_chatparty_99_30_list;
    var l_slots;
    var l_voiceUsers;
    var l_for_comcenter_chatparty_70_26_list;
    c.push(' <div class="comcenter-chat-group-avatars">\n');
    if ((S.Modifier.get(S.Modifier.get(S.Modifier.get(Surface.globalContext.userContext, "voice", {}), "channel", {}), "channelId", 0) > 0)) {
        c.push(' <div class="comcenter-chat-voiceinfo">\n <span class="comcenter-voice-connection">');
        c.push(Surface.valOut("in voice"));
        c.push('</span>\n </div>\n <div class="comcenter-chat-voicebutton">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall2")), {"extraClass": "base-no-ajax voice-leave-channel-button","text": "Leave voice"}, null, kwargs));
        c.push("\n </div>\n");
    } else {
        c.push(' <div class="comcenter-chat-voiceinfo">\n ');
        c.push(Surface.valOut("Not in voice channel"));
        c.push('\n </div>\n <div class="comcenter-chat-voicebutton">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall2")), {"url": S.Modifier.urlformat("/{_section}/{_language}/comcenter/joinPartyChannel/{chatId}/", Surface.urlContext, {"chatId": S.Modifier.get(o.chat, "chatId")}),"extraClass": "base-no-ajax voice-chat-connect-button","text": "Join voice"}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push(' <div class="base-clear"></div>\n');
    l_for_comcenter_chatparty_70_26_list = S.Modifier.get(o.chat, "users");
    if ((S.Modifier.count(l_for_comcenter_chatparty_70_26_list) > 0)) {
        for (var l_for_comcenter_chatparty_70_26_key in l_for_comcenter_chatparty_70_26_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_chatparty_70_26_list[l_for_comcenter_chatparty_70_26_key])) {
                continue;
            }
            var l_user = l_for_comcenter_chatparty_70_26_list[l_for_comcenter_chatparty_70_26_key];
            c.push(' <div class="comcenter-chat-avatar-multi">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_user,"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
            c.push("\n");
            if (((l_user.userId != o.session.user.userId) && ((S.Modifier.get(o.chat, "partyOwner", 0) == o.session.user.userId) || S.Modifier.contains(S.Modifier.get(o.chat, "channelUsers", []), l_user.userId)))) {
                c.push(' <div class="base-general-dropdown-area">\n <ul>\n');
                if (((S.Modifier.get(o.chat, "partyOwner", 0) == o.session.user.userId) && (l_user.userId != o.session.user.userId))) {
                    c.push(' <li>\n <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/kickUserFromParty/{chatId}/{userId}/", Surface.urlContext, {"chatId": S.Modifier.get(o.chat, "chatId"),"userId": l_user.userId})));
                    c.push('" class="base-no-ajax comcenter-chat-kickparty">\n ');
                    c.push(Surface.valOut("Kick from Party"));
                    c.push("\n </a>\n </li>\n");
                }
                if (((l_user.userId != o.session.user.userId) && S.Modifier.contains(S.Modifier.get(o.chat, "channelUsers", []), l_user.userId))) {
                    c.push(' <li>\n <a data-friendId="');
                    c.push(Surface.valOut(l_user.userId));
                    c.push('" class="base-no-ajax comcenter-chat-toggle-mute">\n ');
                    c.push(Surface.valOut("Toggle mute"));
                    c.push("\n </a>\n </li>\n");
                }
                c.push(" </ul>\n </div>\n");
            }
            c.push(" </div>\n");
        }
    }
    if ((S.Modifier.count(S.Modifier.get(o.chat, "users")) < S.Modifier.get(o.chat, "maxSlots"))) {
        l_slots = (S.Modifier.get(o.chat, "maxSlots") - S.Modifier.count(S.Modifier.get(o.chat, "users")));
        l_for_comcenter_chatparty_99_30_list = S.Modifier.to(1, l_slots);
        if ((S.Modifier.count(l_for_comcenter_chatparty_99_30_list) > 0)) {
            for (var l_for_comcenter_chatparty_99_30_key in l_for_comcenter_chatparty_99_30_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_chatparty_99_30_list[l_for_comcenter_chatparty_99_30_key])) {
                    continue;
                }
                var l_i = l_for_comcenter_chatparty_99_30_list[l_for_comcenter_chatparty_99_30_key];
                c.push(' <div class="comcenter-chat-avatar-multi-free-slot">\n &nbsp;\n </div>\n');
            }
        }
    }
    c.push('\n <div class="base-clear"></div>\n');
    l_voiceUsers = S.Modifier.get(o.chat, "users");
    c.push(comcenter.chatparty.surface_108_26.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"voiceUsers": ((typeof (l_voiceUsers) != "undefined" && l_voiceUsers !== null) ? l_voiceUsers : null)}, b, kwargs));
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_49_18", "comcenter-party-voice", o, b);
    return c.join("");
};
comcenter.chatparty.surface_7_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-header-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    c.push(' <div class="common-droparea comcenter-chat-droppable ');
    if ((S.Modifier.count(S.Modifier.get(o.chat, "messages")) == 0)) {
        c.push("visible");
    }
    c.push('">\n <div class="comcenter-chat-droppable-content ">\n ');
    c.push(Surface.valOut("Drop friends from the Com Center"));
    c.push("<br> ");
    c.push(Surface.valOut("here to invite them to your Party."));
    c.push('\n </div>\n </div>\n <div class="chat-header">\n');
    if ((S.Modifier.get(o.chat, "partyOwner", 0) == o.session.user.userId)) {
        c.push(' <a title="');
        if (S.Modifier.get(o.chat, "partyOpen", false)) {
            c.push(Surface.valOut("Open: Everyone can invite and join"));
        } else {
            c.push(Surface.valOut("Closed: Only you can invite"));
        }
        c.push('" class="bubble-title base-no-ajax chat-toggle-party-privacy ');
        if (S.Modifier.get(o.chat, "partyOpen", false)) {
            c.push("open");
        } else {
            c.push("closed");
        }
        c.push('" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/toggleChatPrivacy/{chatId}/", Surface.urlContext, {"chatId": S.Modifier.get(o.chat, "chatId")})));
        c.push('">&nbsp;</a>\n');
    } else {
        c.push(' <a title="');
        if (S.Modifier.get(o.chat, "partyOpen", false)) {
            c.push(Surface.valOut("Open: Everyone can invite and join"));
        } else {
            c.push(Surface.valOut("Closed: Only owner can invite"));
        }
        c.push('" class="bubble-title base-no-ajax chat-list-party-privacy ');
        if (S.Modifier.get(o.chat, "partyOpen", false)) {
            c.push("open");
        } else {
            c.push("closed");
        }
        c.push('">&nbsp;</a>\n');
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null && typeof (o.chat.platoon) != "undefined" && o.chat.platoon !== null)) {
        c.push(' <div class="comcenter-chat-platoon-badge">\n ');
        c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": S.Modifier.get(S.Modifier.get(o.chat, "platoon"), "id"),"bp": S.Modifier.get(S.Modifier.get(o.chat, "platoon"), "badgePath"),"size": 26,"noLink": true}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push('\n <div class="chat-header-group-chat">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null && typeof (o.chat.platoon) != "undefined" && o.chat.platoon !== null)) {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.get(o.chat.platoon, "name", "")));
        c.push("'s\n");
    }
    c.push(' Party\n </div>\n <div class="comcenter-chat-party-menu">\n <div class="comcenter-chat-party-menu-icon"></div>\n <div class="comcenter-chat-party-menu-dropdown">\n <ul>\n <li><a class="chat-leave">');
    c.push(Surface.valOut("Leave party"));
    c.push('</a></li>\n </ul>\n </div>\n </div>\n <div class="comcenter-chat-contract">&nbsp;</div>\n </div>\n <div class="comcenter-chat-group-header">\n');
    c.push(comcenter.chatparty.surface_49_18.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"session": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null) ? o.session : null)}, b, kwargs));
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_7_10", S.Modifier.concat("comcenter-chat-header-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
comcenter.chatparty.surface_134_10 = new Surface.SingleSurface("comcenter.chatparty.surface_134_10");
comcenter.chatparty.surface_134_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-surface-message-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    c.push(' <div class="comcenter-chat-bottom">\n <form class="noajax-form comcenter-chat-form" method="post" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/sendChatMessage/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input autocomplete="off" value="');
    c.push(Surface.valOut("Chat here..."));
    c.push('" placeholder="');
    c.push(Surface.valOut("Chat here..."));
    c.push('" id="comcenter-chat-input-');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('" name="message" class="comcenter-chat-input" type="text"/>\n <input autocomplete="off" type="hidden" name="chatId" value="');
    c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
    c.push('"/>\n </form>\n <img width="16" height="16" class="comcenter-chat-bottom-loader" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_134_10", S.Modifier.concat("comcenter-chat-surface-message-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
comcenter.chatparty.surface_147_2 = new Surface.SingleSurface("comcenter.chatparty.surface_147_2");
comcenter.chatparty.surface_147_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatparty");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-footer-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    var l_for_comcenter_chatparty_149_7_hasNext;
    var l_for_comcenter_chatparty_149_7_iteration;
    var l_userTitle;
    var l_for_comcenter_chatparty_149_7_count;
    var l_for_comcenter_chatparty_149_7_list;
    l_userTitle = "";
    l_for_comcenter_chatparty_149_7_list = S.Modifier.get(o.chat, "users", []);
    l_for_comcenter_chatparty_149_7_count = S.Modifier.count(l_for_comcenter_chatparty_149_7_list);
    l_for_comcenter_chatparty_149_7_iteration = 0;
    if ((S.Modifier.count(l_for_comcenter_chatparty_149_7_list) > 0)) {
        for (var l_for_comcenter_chatparty_149_7_key in l_for_comcenter_chatparty_149_7_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_chatparty_149_7_list[l_for_comcenter_chatparty_149_7_key])) {
                continue;
            }
            var l_user = l_for_comcenter_chatparty_149_7_list[l_for_comcenter_chatparty_149_7_key];
            l_for_comcenter_chatparty_149_7_iteration = (l_for_comcenter_chatparty_149_7_iteration + 1);
            l_for_comcenter_chatparty_149_7_hasNext = (l_for_comcenter_chatparty_149_7_iteration < l_for_comcenter_chatparty_149_7_count);
            l_userTitle = S.Modifier.concat(l_userTitle, l_user.username);
            if ((l_for_comcenter_chatparty_149_7_iteration > 1)) {
                if ((S.Modifier.count(S.Modifier.get(o.chat, "users", [])) > 2)) {
                    l_userTitle = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_userTitle, " and "), (S.Modifier.count(S.Modifier.get(o.chat, "users", [])) - 2)), " more");
                }
                break;
            } else {
                if (l_for_comcenter_chatparty_149_7_hasNext) {
                    l_userTitle = S.Modifier.concat(l_userTitle, ", ");
                }
            }
            c.push("\n");
        }
    }
    c.push('\n <div title="');
    c.push(Surface.valOut(l_userTitle));
    c.push('" class="bubble-title-inner comcenter-chat-taskbar-button comcenter-chat-group ');
    if ((S.Modifier.get(S.Modifier.get(S.Modifier.get(Surface.globalContext.userContext, "voice", {}), "channel", {}), "channelId", 0) > 0)) {
        c.push("comcenter-chat-voice");
    }
    c.push('">\n <div class="comcenter-chat-taskbar-group">\n <div class="comcenter-chat-group-icon "></div>\n <div class="comcenter-chat-tastkbar-username">\n Party\n');
    if ((S.Modifier.get(S.Modifier.get(S.Modifier.get(Surface.globalContext.userContext, "voice", {}), "channel", {}), "channelId", 0) > 0)) {
        c.push(' <br><span class="comcenter-chat-party-invoice">');
        c.push(Surface.valOut(S.Modifier.capitalize("in voice")));
        c.push("</span>\n");
    }
    c.push(' </div>\n </div>\n <div class="comcenter-chat-unread ');
    if (((S.Modifier.get(o.chat, "unreadCount") !== null) ? S.Modifier.get(o.chat, "unreadCount") : false)) {
        c.push("active");
    }
    c.push('"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatparty", "surface_147_2", S.Modifier.concat("comcenter-chat-footer-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
var block_comcenter_chatprivate = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("chatprivate"));
comcenter.chatprivate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatprivate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatprivate");
    var l_user;
    var l_for_comcenter_chatprivate_55_14_list;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    l_user = false;
    if ((S.Modifier.count(S.Modifier.get(o.chat, "users", [])) == 2)) {
        if ((S.Modifier.get(S.Modifier.get(S.Modifier.get(o.chat, "users"), 0), "userId") == l_session.user.userId)) {
            l_user = S.Modifier.get(S.Modifier.get(o.chat, "users"), 1);
        } else {
            l_user = S.Modifier.get(S.Modifier.get(o.chat, "users"), 0);
        }
        c.push('\n <div class="comcenter-chat-content">\n <div class="comcenter-chat-header-container">\n');
        c.push(comcenter.chatprivate.surface_15_14.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"user": ((typeof (l_user) != "undefined" && l_user !== null) ? l_user : null)}, b, kwargs));
        c.push(' </div>\n <div id = "chat_');
        c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
        c.push('" class="comcenter-chat-chat ');
        if ((((l_user.presence.isPlaying || (S.Modifier.get(l_user.presence, "partyId", 0) > 0)) || ((typeof (l_user) != "undefined" && l_user !== null && typeof (l_user.presence) != "undefined" && l_user.presence !== null && typeof (l_user.presence.isIdle) != "undefined" && l_user.presence.isIdle !== null) ? l_user.presence.isIdle : false)) || !(l_user.presence.isOnline))) {
            c.push("comcenter-chat-minisize");
        }
        c.push('" rel="');
        c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
        c.push('">\n');
        o.lastChatter = "";
        l_for_comcenter_chatprivate_55_14_list = S.Modifier.get(o.chat, "messages");
        if ((S.Modifier.count(l_for_comcenter_chatprivate_55_14_list) > 0)) {
            for (var l_for_comcenter_chatprivate_55_14_key in l_for_comcenter_chatprivate_55_14_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_chatprivate_55_14_list[l_for_comcenter_chatprivate_55_14_key])) {
                    continue;
                }
                var l_message = l_for_comcenter_chatprivate_55_14_list[l_for_comcenter_chatprivate_55_14_key];
                c.push(" ");
                c.push(Surface.importTemplate(("comcenter" + ("." + "chatmessage")), {"message": l_message,"lastChatter": o.lastChatter}, null, kwargs));
                c.push("\n");
                o.lastChatter = l_message.fromUsername;
            }
        }
        c.push(' </div>\n <div class="comcenter-chat-bottom-container">\n');
        c.push(comcenter.chatprivate.surface_62_14.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"user": {"presence": {"isOnline": ((typeof (l_user) != "undefined" && l_user !== null && typeof (l_user.presence) != "undefined" && l_user.presence !== null && typeof (l_user.presence.isOnline) != "undefined" && l_user.presence.isOnline !== null) ? l_user.presence.isOnline : null)}}}, b, kwargs));
        c.push(' <div class="comcenter-bottom-row"></div>\n </div>\n </div>\n');
        c.push(comcenter.chatprivate.surface_79_6.render({"chat": ((typeof (o) != "undefined" && o !== null && typeof (o.chat) != "undefined" && o.chat !== null) ? o.chat : null),"user": ((typeof (l_user) != "undefined" && l_user !== null) ? l_user : null)}, b, kwargs));
        c.push("\n");
    } else {
        c.push("\n");
    }
    c.push("\n");
    return c.join("");
};
comcenter.chatprivate.surface_15_14 = new Surface.SingleSurface("comcenter.chatprivate.surface_15_14");
comcenter.chatprivate.surface_15_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatprivate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatprivate");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-header-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    c.push(' <span id="chat-userId-');
    c.push(Surface.valOut(o.user.userId));
    c.push('"></span>\n <div class="chat-header">\n <div class="comcenter-chat-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-username">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.user.userId,"username": o.user.username}, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-close">&nbsp;</div>\n <div class="comcenter-chat-contract">&nbsp;</div>\n </div>\n');
    if ((((o.user.presence.isPlaying || (S.Modifier.get(o.user.presence, "partyId", 0) > 0)) || ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.isIdle) != "undefined" && o.user.presence.isIdle !== null) ? o.user.presence.isIdle : false)) || !(o.user.presence.isOnline))) {
        c.push(' <div class="comcenter-chat-header">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null))) {
            c.push(' <div data-partyId="');
            c.push(Surface.valOut(S.Modifier.get(o.user.presence, "partyId", 0)));
            c.push('" class="comcenter-interact-party ');
            if ((S.Modifier.get(o.user.presence, "partyId", 0) > 0)) {
                c.push("inParty");
            }
            c.push('"></div>\n');
            if ((o.user.presence.isPlaying && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.serverGuid) != "undefined" && o.user.presence.serverGuid !== null))) {
                c.push(" ");
                c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"friendJoinButton": true,"friendPersonaId": o.user.presence.personaId,"presence": o.user.presence}, null, kwargs));
                c.push("\n");
            }
            if (o.user.presence.isPlaying) {
                c.push(' <div class="comcenter-chat-server">\n <div class="chat-game-logo">\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.user.presence.game, o.user.presence.platform, o.user.presence.gameExpansion, b, kwargs)));
                c.push('"></span>\n </div>\n <div class="comcenter-chat-serverinfo">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "playing")), {"showPlayingMode": false,"presence": o.user.presence,"extraClass": "comcenter-playing-link"}, null, kwargs));
                c.push("\n </div>\n </div>\n");
            } else {
                if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.isIdle) != "undefined" && o.user.presence.isIdle !== null) ? o.user.presence.isIdle : false)) {
                    c.push(' <div class="comcenter-chat-idle">');
                    c.push(Surface.valOut("User is away"));
                    c.push("</div>\n");
                } else {
                    if (!(o.user.presence.isOnline)) {
                        c.push(' <div class="comcenter-chat-offline">');
                        c.push(Surface.valOut("User is offline"));
                        c.push("</div>\n");
                    }
                }
            }
        }
        c.push(" </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatprivate", "surface_15_14", S.Modifier.concat("comcenter-chat-header-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
comcenter.chatprivate.surface_62_14 = new Surface.SingleSurface("comcenter.chatprivate.surface_62_14");
comcenter.chatprivate.surface_62_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatprivate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatprivate");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-surface-message-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    c.push(' <div class="comcenter-chat-bottom ');
    if (!(o.user.presence.isOnline)) {
        c.push("user-is-offline");
    }
    c.push('">\n');
    if (!(o.user.presence.isOnline)) {
        c.push(' <input disabled=1 autocomplete="off" value="User is offline" class="comcenter-chat-input comcenter-chat-input-disabled" type="text"/>\n');
    } else {
        c.push(' <form class="noajax-form comcenter-chat-form" method="post" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/sendChatMessage/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input autocomplete="off" value="Chat here..." placeholder="Chat here..." id="comcenter-chat-input-');
        c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
        c.push('" name="message" class="comcenter-chat-input" type="text"/>\n <input autocomplete="off" type="hidden" name="chatId" value="');
        c.push(Surface.valOut(S.Modifier.get(o.chat, "chatId")));
        c.push('"/>\n </form>\n <img width="16" height="16" class="comcenter-chat-bottom-loader" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatprivate", "surface_62_14", S.Modifier.concat("comcenter-chat-surface-message-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
comcenter.chatprivate.surface_79_6 = new Surface.SingleSurface("comcenter.chatprivate.surface_79_6");
comcenter.chatprivate.surface_79_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_chatprivate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.chatprivate");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-chat-footer-", S.Modifier.get(o.chat, "chatId")));
    c.push('">');
    c.push(' <div class="comcenter-chat-taskbar-button">\n <div class="comcenter-chat-tastkbar-avatar">');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.user,"hideLink": true}, null, kwargs));
    c.push(' </div>\n <div class="comcenter-chat-tastkbar-username">');
    c.push(Surface.valOut(o.user.username));
    c.push('</div>\n <div class="comcenter-close">&nbsp;</div>\n <div class="comcenter-chat-unread ');
    if (((S.Modifier.get(o.chat, "unreadCount") !== null) ? S.Modifier.get(o.chat, "unreadCount") : false)) {
        c.push("active");
    }
    c.push('"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.chatprivate", "surface_79_6", S.Modifier.concat("comcenter-chat-footer-", S.Modifier.get(o.chat, "chatId")), o, b);
    return c.join("");
};
var block_comcenter_dropdown = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("dropdown"));
comcenter.dropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_dropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.dropdown");
    var l_session;
    var l_voice;
    c.push("\n");
    l_voice = S.Modifier.get(Surface.globalContext, "voice");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('<div class="comcenter-dropdown">\n <ul>\n <li class="comcenter-dropdown-profile"><a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.user.username})));
    c.push('">');
    c.push(Surface.valOut("View profile"));
    c.push("</a></li>\n");
    if (o.user.presence.isOnline) {
        c.push(' <li class="comcenter-dropdown-chat"><a>');
        c.push(Surface.valOut("Start chat"));
        c.push("</a></li>\n");
    } else {
        c.push(' <li class="inactive">Chat</li>\n');
    }
    if (((((typeof (l_voice) != "undefined" && l_voice !== null && typeof (l_voice.channel) != "undefined" && l_voice.channel !== null && typeof (l_voice.channel.channelId) != "undefined" && l_voice.channel.channelId !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.channel) != "undefined" && o.user.presence.channel !== null)) && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.channel) != "undefined" && o.user.presence.channel !== null && typeof (o.user.presence.channel.channelId) != "undefined" && o.user.presence.channel.channelId !== null)) && (l_voice.channel.channelId == o.user.presence.channel.channelId))) {
        c.push(' <li class="inactive">');
        c.push(Surface.valOut("Is in channel"));
        c.push("</li>\n");
    } else {
        if (((typeof (l_voice) != "undefined" && l_voice !== null && typeof (l_voice.channel) != "undefined" && l_voice.channel !== null && typeof (l_voice.channel.channelId) != "undefined" && l_voice.channel.channelId !== null) && o.user.presence.isOnline)) {
            c.push(' <li class="comcenter-dropdown-voice"><a>');
            c.push(Surface.valOut("Invite to channel"));
            c.push("</a></li>\n");
        } else {
            c.push(' <li class="inactive">');
            c.push(Surface.valOut("Invite to channel"));
            c.push("</li>\n");
        }
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.channel) != "undefined" && o.user.presence.channel !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.channel) != "undefined" && o.user.presence.channel !== null && typeof (o.user.presence.channel.channelId) != "undefined" && o.user.presence.channel.channelId !== null))) {
        c.push(' <li rel="');
        c.push(Surface.valOut(o.user.presence.channel.channelId));
        c.push('" class="comcenter-dropdown-voice-join voice-connect-button"><a>');
        c.push(Surface.valOut("Join channel"));
        c.push("</a></li>\n");
    } else {
        c.push(' <li class="inactive">');
        c.push(Surface.valOut("Join channel"));
        c.push("</li>\n");
    }
    c.push("\n");
    if ((o.user.presence.isPlaying && (o.user.presence.platform == Surface.globalContext.staticContext.platforms.PC))) {
        c.push(' <li class="comcenter-dropdown-joingame"> ');
        c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"label": "Join game","textButton": true,"friendPersonaId": o.user.presence.personaId,"presence": o.user.presence}, null, kwargs));
        c.push("</li>\n");
    } else {
        c.push(' <li class="inactive">');
        c.push(Surface.valOut("Join game"));
        c.push("</li>\n");
    }
    c.push("\n");
    if ((o.user.presence.isPlaying && (o.user.presence.platform == Surface.globalContext.staticContext.platforms.PC))) {
        c.push(' <li class="comcenter-dropdown-viewserver"><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.user.presence.serverGuid,"slug": S.Modifier.slugify(o.user.presence.serverName)})));
        c.push('">');
        c.push(Surface.valOut("View server"));
        c.push("</a></li>\n");
    } else {
        c.push(' <li class="inactive">');
        c.push(Surface.valOut("View server"));
        c.push("</li>\n");
    }
    c.push("\n");
    if ((l_session.user.presence.isPlaying && (l_session.user.presence.platform == Surface.globalContext.staticContext.platforms.PC))) {
        c.push('}\n <li class="comcenter-dropdown-invitegame"><a>');
        c.push(Surface.valOut("Invite to game"));
        c.push("</a></li>\n");
    } else {
        c.push(' <li class="inactive">');
        c.push(Surface.valOut("Invite to game"));
        c.push("</li>\n");
    }
    c.push("\n </ul>\n</div>\n");
    return c.join("");
};
var block_comcenter_index = new Surface.BlockConfig("", {"main_comcenter": "comcenter.index.block_main_comcenter"});
comcenter.addTemplate(new Surface.Template("index"));
comcenter.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(b.get("main_comcenter")(o, b, kwargs));
    }
    return c.join("");
};
comcenter.index.surface_18_30 = new Surface.SingleSurface("comcenter.index.surface_18_30");
comcenter.index.surface_18_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push("comcenter-gamereport");
    c.push('">');
    c.push(' <div class="comcenter-icon-notifications-container">\n <div title="');
    c.push(Surface.valOut("Battle Reports"));
    c.push('" id="comcenter-icon-game" class="comcenter-taskbar-icon-holder ');
    if ((o.unreadGameReports > 0)) {
        c.push("unread");
    }
    c.push('">\n <div id="comcenter-gamereport-count" class="comcenter-chat-unread"></div>\n </div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_18_30", "comcenter-gamereport", o, b);
    return c.join("");
};
comcenter.index.surface_39_34 = new Surface.SurfaceList("comcenter.index.surface_39_34", "gameReportPreviews", "gameReportPreview", "gameReportPreview.id");
comcenter.index.surface_42_38 = new Surface.SingleSurface("comcenter.index.surface_42_38");
comcenter.index.surface_42_38.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("gamereportupdates", S.Modifier.concat("_", o.gameReportPreview.id)));
    c.push('">');
    c.push('\n <div class="comcenter-notification');
    if (o.gameReportPreview.isUnead) {
        c.push(" not-read");
    }
    c.push('">\n ');
    c.push(Surface.importTemplate(("battlereport" + ("." + "minicard")), {"gameReportPreview": o.gameReportPreview,"anchor": true}, null, kwargs));
    c.push("\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_42_38", S.Modifier.concat("gamereportupdates", S.Modifier.concat("_", o.gameReportPreview.id)), o, b);
    return c.join("");
};
comcenter.index.surface_39_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push("gamereportupdates");
    c.push('">');
    var l_for_comcenter_index_39_34_list;
    l_for_comcenter_index_39_34_list = o.gameReportPreviews;
    if ((S.Modifier.count(l_for_comcenter_index_39_34_list) > 0)) {
        c.push("\n");
        c.push("\n");
        for (var l_for_comcenter_index_39_34_key in l_for_comcenter_index_39_34_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_index_39_34_list[l_for_comcenter_index_39_34_key])) {
                continue;
            }
            var l_gameReportPreview = l_for_comcenter_index_39_34_list[l_for_comcenter_index_39_34_key];
            c.push(comcenter.index.surface_42_38.render({"gameReportPreview": ((typeof (l_gameReportPreview) != "undefined" && l_gameReportPreview !== null) ? l_gameReportPreview : null)}, b, kwargs));
        }
    } else {
        c.push(' <div class="comcenter-notification">');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.gotEvent) != "undefined" && o.gotEvent !== null) ? o.gotEvent : false)) {
            c.push(Surface.valOut("Found no reports"));
        }
        c.push("</div>");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_39_34", "gamereportupdates", o, b);
    return c.join("");
};
comcenter.index.surface_56_26 = new Surface.SingleSurface("comcenter.index.surface_56_26");
comcenter.index.surface_56_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push("comcenter-taskbar-notifications");
    c.push('">');
    c.push(' <div class="comcenter-icon-notifications-container">\n <div title="Updates" id="comcenter-icon-notifications" class="comcenter-taskbar-icon-holder ');
    if ((o.unreadNotifications > 0)) {
        c.push("unread");
    }
    c.push('">\n <div id="comcenter-notification-count" class="comcenter-chat-unread"></div>\n </div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_56_26", "comcenter-taskbar-notifications", o, b);
    return c.join("");
};
comcenter.index.surface_84_38 = new Surface.SurfaceList("comcenter.index.surface_84_38", "notifications", "notification", "notification.id");
comcenter.index.surface_86_42 = new Surface.SingleSurface("comcenter.index.surface_86_42");
comcenter.index.surface_86_42.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("notifications", S.Modifier.concat("_", o.notification.id)));
    c.push('">');
    var l_notificationContent;
    var l_param;
    l_param = {"notification": o.notification,"platoons": o.platoons,"notificationUrl": false};
    l_notificationContent = Surface.importTemplate(("notification" + ("." + "rendernotification")), l_param, null, kwargs);
    c.push(" <div ");
    if (l_param.notificationUrl) {
        c.push('rel="');
        c.push(Surface.valOut(l_param.notificationUrl));
        c.push('"');
    }
    c.push(' class="');
    if (l_param.notificationUrl) {
        c.push("comcenter-notifications-one-click ");
    }
    c.push("comcenter-notification ");
    if ((o.for_comcenter_index_84_38_iteration <= o.numUnread)) {
        c.push("not-read");
    }
    c.push('">\n <div class="comcenter-notification-text">\n ');
    c.push(l_notificationContent);
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_86_42", S.Modifier.concat("notifications", S.Modifier.concat("_", o.notification.id)), o, b);
    return c.join("");
};
comcenter.index.surface_84_38.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.index");
    c.push('<surf:container id="');
    c.push("notifications");
    c.push('">');
    var l_for_comcenter_index_84_38_list;
    var l_for_comcenter_index_84_38_iteration;
    l_for_comcenter_index_84_38_list = o.notifications;
    l_for_comcenter_index_84_38_iteration = 0;
    if ((S.Modifier.count(l_for_comcenter_index_84_38_list) > 0)) {
        c.push(" ");
        c.push("\n");
        for (var l_for_comcenter_index_84_38_key in l_for_comcenter_index_84_38_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_index_84_38_list[l_for_comcenter_index_84_38_key])) {
                continue;
            }
            var l_notification = l_for_comcenter_index_84_38_list[l_for_comcenter_index_84_38_key];
            l_for_comcenter_index_84_38_iteration = (l_for_comcenter_index_84_38_iteration + 1);
            c.push(comcenter.index.surface_86_42.render({"for_comcenter_index_84_38_iteration": ((typeof (l_for_comcenter_index_84_38_iteration) != "undefined" && l_for_comcenter_index_84_38_iteration !== null) ? l_for_comcenter_index_84_38_iteration : null),"notification": ((typeof (l_notification) != "undefined" && l_notification !== null) ? l_notification : null),"numUnread": ((typeof (o) != "undefined" && o !== null && typeof (o.numUnread) != "undefined" && o.numUnread !== null) ? o.numUnread : null),"platoons": ((typeof (o) != "undefined" && o !== null && typeof (o.platoons) != "undefined" && o.platoons !== null) ? o.platoons : null)}, b, kwargs));
        }
    } else {
        c.push(' <div class="comcenter-notification">');
        if (o.gotEvent) {
            c.push(Surface.valOut("Found no updates"));
        }
        c.push("</div>");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.index", "surface_84_38", "notifications", o, b);
    return c.join("");
};
comcenter.index.block_main_comcenter = new Surface.Block("comcenter.index.block_main_comcenter");
comcenter.index.block_main_comcenter.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_platoons;
    var l_session;
    var l_realm;
    var l_paddIt;
    var l_notifications;
    var l_numUnread;
    var l_for_comcenter_index_124_26_list;
    var l_gameReportPreviews;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <div id="comcenter-popup" class="comcenter-popup"></div>\n <div id="comcenter">\n <div id="comcenter-inner">\n <div id="comcenter-popup-inner" class="comcenter-popup"></div>\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(' <div class="comcenter-info">\n <input id="gamereportupdates-urlaction" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/loadLatestPlayerPreviews/{limit}/", Surface.urlContext, {"limit": 5})));
        c.push('" type="hidden" />\n <input id="notifications-urlaction" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/notification/loadNotifications/", Surface.urlContext)));
        c.push('" type="hidden" />\n');
        if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
            c.push("\n");
            c.push(comcenter.index.surface_18_30.render({"unreadGameReports": ((typeof (o) != "undefined" && o !== null && typeof (o.unreadGameReports) != "undefined" && o.unreadGameReports !== null) ? o.unreadGameReports : null)}, b, kwargs));
        }
        c.push('\n <div id="comcenter-gamereportupdates-preview" class="comcenter-preview-area">\n <div class="comcenter-notification-title comcenter-notification-notification-title">\n ');
        c.push(Surface.valOut("Battle Reports"));
        c.push('\n <div class="comcenter-contract">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n <div class="comcenter-notification-content">\n');
        l_gameReportPreviews = [];
        c.push('\n <div class="base-preview-area-loader">\n <img width="16" height="16" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="ajax loader" />\n </div>\n');
        c.push(comcenter.index.surface_39_34.render({"gameReportPreviews": ((typeof (l_gameReportPreviews) != "undefined" && l_gameReportPreviews !== null) ? l_gameReportPreviews : null),"gotEvent": ((typeof (o) != "undefined" && o !== null && typeof (o.gotEvent) != "undefined" && o.gotEvent !== null) ? o.gotEvent : null)}, b, kwargs));
        c.push(' <div class="comcenter-notifications-bottom"></div>\n </div>\n </div>\n <div class="comcenter-divider-left"></div>\n');
        c.push(comcenter.index.surface_56_26.render({"unreadNotifications": ((typeof (o) != "undefined" && o !== null && typeof (o.unreadNotifications) != "undefined" && o.unreadNotifications !== null) ? o.unreadNotifications : null)}, b, kwargs));
        c.push(' <div class="comcenter-divider-left"></div>\n');
        l_paddIt = true;
        if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
            l_paddIt = false;
        }
        c.push(' <div id="comcenter-notifications" class="comcenter-preview-area ');
        if (l_paddIt) {
            c.push("comcenter-notification-padder");
        }
        c.push('">\n <div class="comcenter-notification-title comcenter-notification-notification-title">\n ');
        c.push(Surface.valOut("Updates"));
        c.push('\n <div class="comcenter-contract">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n <div class="comcenter-notification-content">\n');
        l_notifications = [];
        l_platoons = {};
        l_numUnread = 0;
        c.push(' <div class="base-preview-area-loader">\n <img width="16" height="16" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="ajax loader" />\n </div>\n <div class="comcenter-notification-list">\n');
        c.push(comcenter.index.surface_84_38.render({"gotEvent": ((typeof (o) != "undefined" && o !== null && typeof (o.gotEvent) != "undefined" && o.gotEvent !== null) ? o.gotEvent : null),"notifications": ((typeof (l_notifications) != "undefined" && l_notifications !== null) ? l_notifications : null),"numUnread": ((typeof (l_numUnread) != "undefined" && l_numUnread !== null) ? l_numUnread : null),"platoons": ((typeof (l_platoons) != "undefined" && l_platoons !== null) ? l_platoons : null)}, b, kwargs));
        c.push(' </div>\n <div class="comcenter-notifications-moreinfo">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/notification/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("View all"));
        c.push('</a>\n </div>\n <div class="comcenter-notifications-bottom"></div>\n </div>\n </div>\n </div>\n');
    }
    c.push('\n <div id="comcenter-gamecontrol" class="');
    if (Surface.globalContext.isTouchDevice) {
        c.push("base-hide");
    }
    c.push('">\n ');
    c.push(Surface.importTemplate(("gamemanager" + ("." + "index")), o, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-divider-left ');
    if (Surface.globalContext.isTouchDevice) {
        c.push("base-hide");
    }
    c.push('"></div>\n <div class="comcenter-divider"></div>\n <div id="comcenter-friends">\n ');
    c.push(Surface.importTemplate(("comcenter" + ("." + "area")), o, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-divider"></div>\n <div id="comcenter-chats">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.chats) != "undefined" && o.chats !== null)) {
        l_for_comcenter_index_124_26_list = o.chats;
        if ((S.Modifier.count(l_for_comcenter_index_124_26_list) > 0)) {
            for (var l_for_comcenter_index_124_26_key in l_for_comcenter_index_124_26_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_index_124_26_list[l_for_comcenter_index_124_26_key])) {
                    continue;
                }
                var l_chat = l_for_comcenter_index_124_26_list[l_for_comcenter_index_124_26_key];
                c.push(" ");
                c.push(Surface.importTemplate(("comcenter" + ("." + "chat")), {"chat": l_chat}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(" </div>\n </div>\n </div>\n");
    return c.join("");
};
var block_comcenter_list = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("list"));
comcenter.list.surface_2_2 = new Surface.SingleSurface("comcenter.list.surface_2_2");
comcenter.list.surface_27_14 = new Surface.SurfaceList("comcenter.list.surface_27_14", "friendrequests", "friend", "friend.userId");
comcenter.list.surface_34_22 = new Surface.SingleSurface("comcenter.list.surface_34_22");
comcenter.list.surface_34_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-surface-friendrequests", S.Modifier.concat("_", o.friend.userId)));
    c.push('">');
    c.push(' <li class="comcenter-friend" rel="');
    c.push(Surface.valOut(o.friend.userId));
    c.push('">\n <div class="comcenter-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend,"gravatarSize": 22,"hideLink": true}, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-username">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.friend.username})));
    c.push('">');
    c.push(Surface.valOut(o.friend.username));
    c.push('</a>\n </div>\n <div class="comcenter-friendrequestarea">\n <form data-userId="');
    c.push(Surface.valOut(o.friend.userId));
    c.push('" class="comcenter-friendrequest-form" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/acceptFriendship/{id}/", Surface.urlContext, {"id": o.friend.userId})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="submit" name="submit" value=" " class="comcenter-friend-request-button base-button-yes" />\n </form>\n <form data-userId="');
    c.push(Surface.valOut(o.friend.userId));
    c.push('" class="comcenter-friendrequest-form" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/declineFriendship/{id}/", Surface.urlContext, {"id": o.friend.userId})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="submit" name="submit" value=" " class="comcenter-friend-request-button base-button-no" />\n </form>\n </div>\n </li>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_34_22", S.Modifier.concat("comcenter-surface-friendrequests", S.Modifier.concat("_", o.friend.userId)), o, b);
    return c.join("");
};
comcenter.list.surface_27_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push("comcenter-surface-friendrequests");
    c.push('">');
    var l_for_comcenter_list_27_14_list;
    l_for_comcenter_list_27_14_list = ((typeof (o) != "undefined" && o !== null && typeof (o.friendrequests) != "undefined" && o.friendrequests !== null) ? o.friendrequests : []);
    if ((S.Modifier.count(l_for_comcenter_list_27_14_list) > 0)) {
        c.push(' <ul>\n <li id="comcenter-online-separator" class="comcenter-separator">\n <div class="base-left">\n ');
        c.push(Surface.valOut("Friend requests"));
        c.push("\n </div>\n </li>\n");
        for (var l_for_comcenter_list_27_14_key in l_for_comcenter_list_27_14_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_list_27_14_list[l_for_comcenter_list_27_14_key])) {
                continue;
            }
            var l_friend = l_for_comcenter_list_27_14_list[l_for_comcenter_list_27_14_key];
            c.push(comcenter.list.surface_34_22.render({"friend": ((typeof (l_friend) != "undefined" && l_friend !== null) ? l_friend : null)}, b, kwargs));
        }
        c.push(" </ul>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_27_14", "comcenter-surface-friendrequests", o, b);
    return c.join("");
};
comcenter.list.surface_61_14 = new Surface.SurfaceList("comcenter.list.surface_61_14", "friendscomcenter", "friend", "friend.userId");
comcenter.list.surface_95_22 = new Surface.SingleSurface("comcenter.list.surface_95_22");
comcenter.list.surface_95_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comcenter-surface-friends", S.Modifier.concat("_", o.friend.userId)));
    c.push('">');
    var l_foundOfflineUser;
    l_foundOfflineUser = S.Modifier.get(Surface.globalContext, "foundOfflineUser");
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isOnline) != "undefined" && o.friend.presence.isOnline !== null) ? o.friend.presence.isOnline : false)) {
        Surface.globalContext.foundOnlineUser = true;
    }
    if ((!(l_foundOfflineUser) && !(((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isOnline) != "undefined" && o.friend.presence.isOnline !== null) ? o.friend.presence.isOnline : false)))) {
        if (!(Surface.globalContext.foundOnlineUser)) {
            c.push(' <li class="comcenter-found-no-online-friends">');
            c.push(Surface.valOut("Found no online friends"));
            c.push("</li>\n");
        }
        c.push(' <li id="comcenter-offline-separator" class="comcenter-separator ');
        if (o.showingOffline) {
            c.push("showing-offline");
        }
        c.push('">\n <div class="dropdownicon"></div>\n <div class="base-left">\n ');
        c.push(Surface.valOut("Offline friends"));
        c.push("\n </div>\n </li>\n");
        Surface.globalContext.foundOfflineUser = true;
    }
    c.push(' <li id="comcenter-');
    c.push(Surface.valOut(o.friend.userId));
    c.push('" class="comcenter-friend-item comcenter-friend ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false)) {
        c.push("comcenter-friend-playing");
    }
    c.push(" ");
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isOnline) != "undefined" && o.friend.presence.isOnline !== null) ? o.friend.presence.isOnline : false))) {
        c.push("comcenter-friend-offline ");
        if (!(o.showingOffline)) {
            c.push("comcenter-friend-hidden");
        }
    } else {
        c.push("comcenter-friend-online ");
        if (!(o.showingOnline)) {
            c.push("comcenter-friend-hidden");
        }
    }
    c.push('" rel="');
    c.push(Surface.valOut(o.friend.userId));
    c.push('">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isOnline) != "undefined" && o.friend.presence.isOnline !== null) ? o.friend.presence.isOnline : false)) {
        c.push(' <div class="comcenter-friend-draggable"></div>\n');
    } else {
        c.push(' <div class="comcenter-friend-draggable-dummy"></div>\n');
    }
    c.push(' <div class="comcenter-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend,"gravatarSize": 22,"hideLink": true}, null, kwargs));
    c.push('\n </div>\n <div class="comcenter-username');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isIdle) != "undefined" && o.friend.presence.isIdle !== null) ? o.friend.presence.isIdle : false) && !(o.friend.presence.isPlaying))) {
        c.push(" comcenter-username-idle");
    }
    c.push('">\n <a class="comcenter-username-link" data-profile="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.friend.username})));
    c.push('" href="javascript:void(0);">');
    c.push(Surface.valOut(o.friend.username));
    c.push("</a>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false)) {
        c.push(' <div class="comcenter-username-serverinfo">\n <div class="base-left">\n <span class="');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.friend.presence.game, o.friend.presence.platform, o.friend.presence.gameExpansion, b, kwargs)));
        c.push(' comcenter-game-icon"></span>\n </div>\n <div class="base-left">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "playing")), {"showPlayingMode": false,"extraClass": "base-no-ajax comcenter-playing-link","presence": o.friend.presence}, null, kwargs));
        c.push("\n </div>\n </div>\n");
    }
    c.push(" ");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isIdle) != "undefined" && o.friend.presence.isIdle !== null) ? o.friend.presence.isIdle : false) && !(o.friend.presence.isPlaying))) {
        c.push('<div class="comcenter-username-away">');
        c.push(Surface.valOut("Away"));
        c.push("</div>");
    }
    c.push('\n </div>\n <div class="comcenter-interact-container">\n <button data-partyId="');
    c.push(Surface.valOut(S.Modifier.get(o.friend.presence, "partyId", 0)));
    c.push('" class="comcenter-interact-party ');
    if ((S.Modifier.get(o.friend.presence, "partyId", 0) > 0)) {
        c.push("inParty");
    }
    c.push('"></button>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isOnline) != "undefined" && o.friend.presence.isOnline !== null) ? o.friend.presence.isOnline : false)) {
        c.push(' <button title="Chat" class="');
        if (!(Surface.globalContext.isTouchDevice)) {
            c.push("bubble-title-left");
        }
        c.push(' comcenter-interact-chat"></button>\n');
    } else {
        c.push(' <div class="comcenter-interact-chat-offline"></div>\n');
    }
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false)) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"friendJoinButton": true,"friendPersonaId": o.friend.presence.personaId,"presence": o.friend.presence}, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n </li>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_95_22", S.Modifier.concat("comcenter-surface-friends", S.Modifier.concat("_", o.friend.userId)), o, b);
    return c.join("");
};
comcenter.list.surface_61_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push("comcenter-surface-friends");
    c.push('">');
    var l_for_comcenter_list_61_14_list;
    l_for_comcenter_list_61_14_list = S.Modifier.multisort(o.friendscomcenter, "presence.isPlaying", "desc", "presence.isOnline", "desc", "username", "asc");
    if ((S.Modifier.count(l_for_comcenter_list_61_14_list) > 0)) {
        c.push("\n");
        c.push("\n");
        Surface.globalContext.foundOfflineUser = false;
        Surface.globalContext.foundOnlineUser = false;
        c.push("\n");
        if (!((typeof (o) != "undefined" && o !== null && typeof (o.showingOffline) != "undefined" && o.showingOffline !== null))) {
            o.showingOffline = true;
        }
        if (!((typeof (o) != "undefined" && o !== null && typeof (o.showingOnline) != "undefined" && o.showingOnline !== null))) {
            o.showingOnline = true;
        }
        c.push('\n <ul class="comcenter-list">\n <li id="comcenter-online-separator" class="comcenter-separator ');
        if (o.showingOnline) {
            c.push("showing-online");
        }
        c.push('">\n <div class="dropdownicon"></div>\n <div class="base-left">\n ');
        c.push(Surface.valOut("Online friends"));
        c.push("\n </div>\n </li>\n");
        for (var l_for_comcenter_list_61_14_key in l_for_comcenter_list_61_14_list) {
            if (!Surface.isValidLoopItem(l_for_comcenter_list_61_14_list[l_for_comcenter_list_61_14_key])) {
                continue;
            }
            var l_friend = l_for_comcenter_list_61_14_list[l_for_comcenter_list_61_14_key];
            c.push(comcenter.list.surface_95_22.render({"foundOfflineUser": ((typeof (o) != "undefined" && o !== null && typeof (o.foundOfflineUser) != "undefined" && o.foundOfflineUser !== null) ? o.foundOfflineUser : null),"friend": ((typeof (l_friend) != "undefined" && l_friend !== null) ? l_friend : null),"showingOffline": ((typeof (o) != "undefined" && o !== null && typeof (o.showingOffline) != "undefined" && o.showingOffline !== null) ? o.showingOffline : null),"showingOnline": ((typeof (o) != "undefined" && o !== null && typeof (o.showingOnline) != "undefined" && o.showingOnline !== null) ? o.showingOnline : null)}, b, kwargs));
        }
        c.push(' <li rel="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": Surface.globalContext.session.user.username})));
        c.push('" class="comcenter-add-friend">\n ');
        c.push(Surface.valOut("Add a new friend"));
        c.push("\n </li>\n </ul>\n");
    } else {
        if ((S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.friendrequests) != "undefined" && o.friendrequests !== null) ? o.friendrequests : [])) == 0)) {
            c.push(' <div class="comcenter-no-online-friends">\n ');
            c.push(Surface.valOut("You haven't added any friends yet."));
            c.push('<br>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": Surface.globalContext.session.user.username})));
            c.push('">');
            c.push(Surface.valOut("Find your friends now"));
            c.push('</a>\n <div class="base-clear"></div>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": Surface.globalContext.session.user.username})));
            c.push('">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/comcenter/origin-logo-s.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" width="76" height="28" />\n </a>\n </div>\n');
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_61_14", "comcenter-surface-friends", o, b);
    return c.join("");
};
comcenter.list.surface_168_10 = new Surface.SingleSurface("comcenter.list.surface_168_10");
comcenter.list.surface_168_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push("comcenter-party");
    c.push('">');
    c.push(' <div class="comcenter-settings">\n <div class="base-left">\n <a title="');
    c.push(Surface.valOut("Manage your friends"));
    c.push('" class="bubble-title comcenter-manage-friends" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": Surface.globalContext.session.user.username})));
    c.push('"></a>\n </div>\n <div class="base-right">\n');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <div class="comcenter-voice-capture-area">\n');
        if ((!((typeof (o) != "undefined" && o !== null && typeof (o.captureMode) != "undefined" && o.captureMode !== null)) || (S.Modifier.get(S.Modifier.get(S.Modifier.get(Surface.globalContext.userContext, "voice", {}), "channel", {}), "channelId", 0) == 0))) {
            c.push(' <div class="comcenter-voice-voiceactivation-text">');
            c.push(Surface.valOut("Not in Voice"));
            c.push("</div>\n");
        } else {
            if ((o.captureMode == "pushtotalk")) {
                c.push(' <div class="comcenter-voice-ppt-text">');
                c.push(Surface.valOut("PTT key"));
                c.push(': <span id="comcenter-voice-settings-ppt-key" class="comcenter-voice-ppt-area-key">');
                c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.pptkey) != "undefined" && o.pptkey !== null) ? o.pptkey : "Not set")));
                c.push("</span></div>\n");
            } else {
                c.push(' <div class="comcenter-voice-voiceactivation-text">');
                c.push(Surface.valOut("Voice activation enabled"));
                c.push("</div>\n");
            }
        }
        c.push(' </div>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/settings/voice/", Surface.urlContext)));
        c.push('" class="comcenter-voice-ppt-row-link">');
        c.push(Surface.valOut("Settings"));
        c.push("</a>\n");
    } else {
        c.push(' <form class="comcenter-party-create comcenter-create-party-area-button" method="post" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comcenter/createParty/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="partyDesc" value="');
        c.push(Surface.valOut(o.session.user.username));
        c.push(Surface.valOut("s party"));
        c.push('" />\n <input type="submit" class="base-button-party" value="');
        c.push(Surface.valOut("Create Party"));
        c.push('" />\n </form>\n');
    }
    c.push(" </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_168_10", "comcenter-party", o, b);
    return c.join("");
};
comcenter.list.surface_2_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.list");
    c.push('<surf:container id="');
    c.push("surface-comcenter-area");
    c.push('">');
    var l_userContext;
    var l_session;
    var l_voiceChannelUsers;
    var l_voice;
    c.push("\n");
    l_userContext = S.Modifier.get(Surface.globalContext, "userContext");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(" ");
    c.push("\n");
    l_voiceChannelUsers = 0;
    l_voice = S.Modifier.get(l_userContext, "voice");
    if (((l_voice && (typeof (l_voice) != "undefined" && l_voice !== null && typeof (l_voice.channel) != "undefined" && l_voice.channel !== null)) && (typeof (l_voice) != "undefined" && l_voice !== null && typeof (l_voice.channel) != "undefined" && l_voice.channel !== null && typeof (l_voice.channel.users) != "undefined" && l_voice.channel.users !== null))) {
        l_voiceChannelUsers = S.Modifier.count(l_voice.channel.users);
    }
    c.push('\n <div id="comcenter-area" class="');
    if ((l_voiceChannelUsers == 0)) {
        c.push("comcenter-not-in-voice");
    }
    c.push('">\n <div id="friendlist-header">\n <div class="comcenter-contract">&nbsp;</div>\n <p>Com center</p>\n </div>\n <div id="comcenter-loading">\n <div class="comcenter-loading-area"></div>\n </div>\n <div id="comcenter-tab-friends-content" class="comcenter-tab-content">\n');
    c.push(comcenter.list.surface_27_14.render({"friendrequests": ((typeof (o) != "undefined" && o !== null && typeof (o.friendrequests) != "undefined" && o.friendrequests !== null) ? o.friendrequests : null)}, b, kwargs));
    c.push("\n");
    o.friendrequests = o.friendrequests;
    o.friendscomcenter = ((typeof (o) != "undefined" && o !== null && typeof (o.friendscomcenter) != "undefined" && o.friendscomcenter !== null) ? o.friendscomcenter : []);
    c.push(comcenter.list.surface_61_14.render({"foundOfflineUser": ((typeof (o) != "undefined" && o !== null && typeof (o.foundOfflineUser) != "undefined" && o.foundOfflineUser !== null) ? o.foundOfflineUser : null),"friendrequests": ((typeof (o) != "undefined" && o !== null && typeof (o.friendrequests) != "undefined" && o.friendrequests !== null) ? o.friendrequests : null),"friendscomcenter": ((typeof (o) != "undefined" && o !== null && typeof (o.friendscomcenter) != "undefined" && o.friendscomcenter !== null) ? o.friendscomcenter : null),"showingOffline": ((typeof (o) != "undefined" && o !== null && typeof (o.showingOffline) != "undefined" && o.showingOffline !== null) ? o.showingOffline : null),"showingOnline": ((typeof (o) != "undefined" && o !== null && typeof (o.showingOnline) != "undefined" && o.showingOnline !== null) ? o.showingOnline : null)}, b, kwargs));
    c.push(" </div>\n");
    c.push(comcenter.list.surface_168_10.render({"captureMode": ((typeof (o) != "undefined" && o !== null && typeof (o.captureMode) != "undefined" && o.captureMode !== null) ? o.captureMode : null),"pptkey": ((typeof (o) != "undefined" && o !== null && typeof (o.pptkey) != "undefined" && o.pptkey !== null) ? o.pptkey : null),"session": ((typeof (l_session) != "undefined" && l_session !== null) ? l_session : null)}, b, kwargs));
    c.push('\n <div class="comcenter-bottom-row"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.list", "surface_2_2", "surface-comcenter-area", o, b);
    return c.join("");
};
var block_comcenter_voicesettings = new Surface.BlockConfig("", {});
comcenter.addTemplate(new Surface.Template("voicesettings"));
comcenter.voicesettings.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_voicesettings;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.voicesettings");
    c.push('\n<div class="sonar-settings-container">\n <div class="sonar-settings-box">\n <h2>');
    c.push(Surface.valOut("1. Select your input devices"));
    c.push('</h2>\n <div class="sonar-h3">');
    c.push(Surface.valOut("Playback"));
    c.push("</div>\n");
    c.push(comcenter.voicesettings.surface_9_10.render({}, b, kwargs));
    c.push(' <div class="sonar-h3">');
    c.push(Surface.valOut("Capture"));
    c.push("</div>\n");
    c.push(comcenter.voicesettings.surface_19_10.render({}, b, kwargs));
    c.push(' </div>\n <div class="sonar-settings-box">\n <h2>');
    c.push(Surface.valOut("2. Test your sound"));
    c.push('</h2>\n <div id="settings-audio-on" onclick="sonarui.toggleAudio();" >\n <input id="settings-audio-checkbox" class="sonar-audio-checkbox" type="checkbox" style="position:relative;top:-3px;"/><img width="20" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/sonar/loopback_off.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" /><span class="sonar-settings-info">');
    c.push(Surface.valOut("Audio loopback"));
    c.push('</span>\n </div>\n <div style="clear:both"></div>\n </div>\n <div class="sonar-settings-box">\n <h2>');
    c.push(Surface.valOut("3. Select your Push-To-Talk key:"));
    c.push('</h2>\n <div class="sonar-h3">');
    c.push(Surface.valOut("Click input field to set a new key"));
    c.push('</div>\n <input id="recordStroke" onclick="$(\'.sonar-ppt-status\').removeClass(\'active\');ESN.Sonar.setPushToTalkKeyFromInputBox(\'recordStroke\')" type="text" value="');
    c.push(Surface.valOut("Press to set key"));
    c.push('" class="sonar-input" style="width:160px" />\n <div class="sonar-ppt-status active">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n</div>');
    return c.join("");
};
comcenter.voicesettings.surface_9_10 = new Surface.SingleSurface("comcenter.voicesettings.surface_9_10");
comcenter.voicesettings.surface_9_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_voicesettings;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.voicesettings");
    c.push('<surf:container id="');
    c.push("playbackDevices");
    c.push('">');
    var l_for_comcenter_voicesettings_12_22_list;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.devices) != "undefined" && o.devices !== null)) {
        c.push(' <select class="sonar-input" onchange="ESN.Sonar.setPlaybackDevice($(this).val());">\n');
        l_for_comcenter_voicesettings_12_22_list = o.devices;
        if ((S.Modifier.count(l_for_comcenter_voicesettings_12_22_list) > 0)) {
            for (var l_for_comcenter_voicesettings_12_22_key in l_for_comcenter_voicesettings_12_22_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_voicesettings_12_22_list[l_for_comcenter_voicesettings_12_22_key])) {
                    continue;
                }
                var l_device = l_for_comcenter_voicesettings_12_22_list[l_for_comcenter_voicesettings_12_22_key];
                c.push(" <option ");
                if (l_device.active) {
                    c.push("selected");
                }
                c.push(' value="');
                c.push(Surface.valOut(l_device.deviceId));
                c.push('">');
                c.push(Surface.valOut(l_device.deviceName));
                c.push("</option>\n");
            }
        }
        c.push(" </select>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.voicesettings", "surface_9_10", "playbackDevices", o, b);
    return c.join("");
};
comcenter.voicesettings.surface_19_10 = new Surface.SingleSurface("comcenter.voicesettings.surface_19_10");
comcenter.voicesettings.surface_19_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comcenter_voicesettings;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comcenter");
    Surface.Renderer.addUsedTemplate("comcenter.voicesettings");
    c.push('<surf:container id="');
    c.push("captureDevices");
    c.push('">');
    var l_for_comcenter_voicesettings_22_22_list;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.devices) != "undefined" && o.devices !== null)) {
        c.push(' <select class="sonar-input" onchange="ESN.Sonar.setCaptureDevice($(this).val());">\n');
        l_for_comcenter_voicesettings_22_22_list = o.devices;
        if ((S.Modifier.count(l_for_comcenter_voicesettings_22_22_list) > 0)) {
            for (var l_for_comcenter_voicesettings_22_22_key in l_for_comcenter_voicesettings_22_22_list) {
                if (!Surface.isValidLoopItem(l_for_comcenter_voicesettings_22_22_list[l_for_comcenter_voicesettings_22_22_key])) {
                    continue;
                }
                var l_device = l_for_comcenter_voicesettings_22_22_list[l_for_comcenter_voicesettings_22_22_key];
                c.push(" <option ");
                if (l_device.active) {
                    c.push("selected");
                }
                c.push(' value="');
                c.push(Surface.valOut(l_device.deviceId));
                c.push('">');
                c.push(Surface.valOut(l_device.deviceName));
                c.push("</option>\n");
            }
        }
        c.push(" </select>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comcenter.voicesettings", "surface_19_10", "captureDevices", o, b);
    return c.join("");
};
if (typeof comment == "undefined") {
    var comment = {};
}
var surf_comment_component = new Surface.Component("comment");
surf_comment_component.extend(comment);
comment = surf_comment_component;
var block_comment_index = new Surface.BlockConfig("", {});
comment.addTemplate(new Surface.Template("index"));
comment.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comment_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comment");
    Surface.Renderer.addUsedTemplate("comment.index");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    o.data = {"comments": o.comments,"totalCommentCount": ((typeof (o) != "undefined" && o !== null && typeof (o.totalCommentCount) != "undefined" && o.totalCommentCount !== null) ? o.totalCommentCount : S.Modifier.count(o.comments)),"isLoggedIn": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false),"itemInfo": o.itemInfo};
    o.cmt = S.Modifier.concat("comment", o.data.itemInfo.id);
    c.push(comment.index.surface_5_2.render({"cmt": ((typeof (o) != "undefined" && o !== null && typeof (o.cmt) != "undefined" && o.cmt !== null) ? o.cmt : null),"data": {"comments": ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.comments) != "undefined" && o.data.comments !== null) ? o.data.comments : null),"itemInfo": {"id": ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.itemInfo) != "undefined" && o.data.itemInfo !== null && typeof (o.data.itemInfo.id) != "undefined" && o.data.itemInfo.id !== null) ? o.data.itemInfo.id : null),"type": ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.itemInfo) != "undefined" && o.data.itemInfo !== null && typeof (o.data.itemInfo.type) != "undefined" && o.data.itemInfo.type !== null) ? o.data.itemInfo.type : null)},"totalCommentCount": ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.totalCommentCount) != "undefined" && o.data.totalCommentCount !== null) ? o.data.totalCommentCount : null)},"session": {"user": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) ? l_session.user : null)}}, b, kwargs));
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.pagination) != "undefined" && o.pagination !== null) ? o.pagination : false)) {
        c.push(' <div class="comment-pagination">\n');
        c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, block_comment_index_use_58_10, kwargs));
        c.push(" </div>\n");
    }
    if (o.data.isLoggedIn) {
        c.push(' <div class="comment-main">\n');
        if (Surface.globalContext.hasWriteBan) {
            c.push(' <div class="forum-postreply-disabled">');
            c.push(Surface.valOut("You are not allowed to comment until"));
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.offsetdateformat(Surface.globalContext.writeBanUntil, ((Surface.globalContext.session.locale.fulldate + " ") + Surface.globalContext.session.locale.time), Surface.globalContext.session.locale.offset)));
            c.push("</div>\n");
        } else {
            c.push(' <div class="comment-main-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_session.user,"gravatarSize": 52}, null, kwargs));
            c.push('\n </div>\n <div class="comment-post-form-wrapper">\n <a name="comment-field"></a>\n <div class="clear"></div>\n <div class="comment-hasnext"></div>\n <form id="comment-post-form" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comment/postcomment/{id}/{type}/", Surface.urlContext, {"id": o.data.itemInfo.id,"type": o.data.itemInfo.type})));
            c.push('" method="post" class="base-no-ajax">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <textarea class="comment-write-commenttext" maxlength="1000" placeholder="');
            c.push(Surface.valOut("Leave your comment..."));
            c.push('" name="body" id="write-comment-');
            c.push(Surface.valOut(o.data.itemInfo.id));
            c.push('" class="text-input textarea"></textarea>\n <input id="commentPostButton');
            c.push(Surface.valOut(o.data.itemInfo.id));
            c.push('" type="submit" class="base-button-arrow-small" style="float:right;margin-top:10px;" value="Post" onclick="var $ta=$(this).siblings(\'textarea\'); if ($ta.val()==\'\' || $ta.val()==$ta.attr(\'placeholder\')) return; comment.addComment(\'');
            c.push(Surface.valOut(o.data.itemInfo.id));
            c.push("', '");
            c.push(Surface.valOut(o.data.itemInfo.type));
            c.push("', $('#comment-post-form')); return false;\" />\n </form>\n </div>\n");
        }
        c.push(' <div class="clear"></div>\n </div>\n');
    }
    return c.join("");
};
var block_comment_index_use_58_10 = new Surface.BlockConfig("pagination.pagination", {});
comment.index.surface_5_2 = new Surface.SingleSurface("comment.index.surface_5_2");
comment.index.surface_5_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comment_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comment");
    Surface.Renderer.addUsedTemplate("comment.index");
    c.push('<surf:container id="');
    c.push(o.cmt);
    c.push('">');
    var l_for_comment_index_17_10_iteration;
    var l_for_comment_index_17_10_count;
    var l_for_comment_index_17_10_hasNext;
    var l_for_comment_index_17_10_list;
    c.push(' <div class="comment-main comments-listing ');
    c.push('">\n <a name="comments"></a>\n <div class="comment-main-header">\n <h3>');
    c.push(Surface.valOut("Comments"));
    c.push(" (");
    c.push(Surface.valOut(o.data.totalCommentCount));
    c.push(")</h3>\n");
    if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null)) {
        c.push(' <a id="devblog-leave-comment" class="comment-main-header-write-link">');
        c.push(Surface.valOut("Leave a comment"));
        c.push("</a>\n");
    }
    c.push(" </div>\n");
    l_for_comment_index_17_10_list = o.data.comments;
    l_for_comment_index_17_10_count = S.Modifier.count(l_for_comment_index_17_10_list);
    l_for_comment_index_17_10_iteration = 0;
    if ((S.Modifier.count(l_for_comment_index_17_10_list) > 0)) {
        for (var l_for_comment_index_17_10_key in l_for_comment_index_17_10_list) {
            if (!Surface.isValidLoopItem(l_for_comment_index_17_10_list[l_for_comment_index_17_10_key])) {
                continue;
            }
            var l_comment = l_for_comment_index_17_10_list[l_for_comment_index_17_10_key];
            l_for_comment_index_17_10_iteration = (l_for_comment_index_17_10_iteration + 1);
            l_for_comment_index_17_10_hasNext = (l_for_comment_index_17_10_iteration < l_for_comment_index_17_10_count);
            c.push(' <div id="comment');
            c.push(Surface.valOut(l_comment.id));
            c.push('" class="comment-body">\n');
            if ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null)) {
                c.push(' <div class="comment-report-container">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/comment/reportPostDropdown/{id}/{type}/", Surface.urlContext, {"id": l_comment.id,"type": o.data.itemInfo.type})}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push('\n <div class="comment-body-left-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_comment.user,"gravatarSize": 52}, null, kwargs));
            c.push('\n </div>\n <div class="comment-body-left">\n <div class="comment-body-name"><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": ((typeof (l_comment) != "undefined" && l_comment !== null && typeof (l_comment.user) != "undefined" && l_comment.user !== null && typeof (l_comment.user.username) != "undefined" && l_comment.user.username !== null) ? l_comment.user.username : "Player")})));
            c.push('">');
            c.push(Surface.valOut(((typeof (l_comment) != "undefined" && l_comment !== null && typeof (l_comment.user) != "undefined" && l_comment.user !== null && typeof (l_comment.user.username) != "undefined" && l_comment.user.username !== null) ? l_comment.user.username : "Player")));
            c.push('</a></div>\n </div>\n <div class="comment-body-left-text">\n');
            if (l_comment.hidden) {
                c.push(" <i>");
                c.push(Surface.valOut("Comment has been hidden by the Battlelog administrators."));
                c.push("</i>\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut(l_comment.body));
                c.push("\n");
            }
            c.push('\n <div class="comment-ago">');
            c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_comment.creationDate}, null, kwargs));
            c.push('</div>\n </div>\n <div style="clear:both"></div>\n </div>\n');
            if (l_for_comment_index_17_10_hasNext) {
                c.push("\n");
            }
        }
    } else {
        c.push("\n");
    }
    c.push(' <a name="comments-last"></a>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("comment.index", "surface_5_2", o.cmt, o, b);
    return c.join("");
};
var block_comment_reportpostdropdown = new Surface.BlockConfig("", {});
comment.addTemplate(new Surface.Template("reportpostdropdown"));
comment.reportpostdropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_comment_reportpostdropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("comment");
    Surface.Renderer.addUsedTemplate("comment.reportpostdropdown");
    c.push("\n<ul>\n");
    if ((o.type == "devblog-comment")) {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportBlogCommentAbuse/{id}/", Surface.urlContext, {"id": o.id})));
        c.push('">');
        c.push(Surface.valOut("Report abuse"));
        c.push("</a></li>\n");
    } else {
        c.push(" TYpe ");
        c.push(Surface.valOut(o.type));
        c.push('\n <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportForumAbuse/{postId}/", Surface.urlContext, {"id": o.id,"type": o.type})));
        c.push('">');
        c.push(Surface.valOut("Report abuse"));
        c.push("</a></li>\n");
    }
    c.push(" </ul>");
    return c.join("");
};
if (typeof common == "undefined") {
    var common = {};
}
var surf_common_component = new Surface.Component("common");
surf_common_component.extend(common);
common = surf_common_component;
var block_common_ago = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("ago"));
common.ago.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_ago;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.ago");
    c.push(Surface.valOut(S.Modifier.localizedAgo(o.timestamp, ["%s minute ago", "%s hour ago", "%s day ago", "%s week ago", "%s month ago", "%s year ago"], ["%s minutes ago", "%s hours ago", "%s days ago", "%s weeks ago", "%s months ago", "%s years ago"], ["in %s minute", "in %s hour", "in %s day", "in %s week", "in %s month", "in %s year"], ["in %s minutes", "in %s hours", "in %s days", "in %s weeks", "in %s months", "in %s years"])));
    return c.join("");
};
common.addTemplate(new Surface.Template("bbcodeinfo"));
var block_common_bf3kit = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("bf3kit"));
common.bf3kit.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_bf3kit;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.bf3kit");
    c.push("\n");
    if ((o.kit == 1)) {
        o.kit = "assault";
    } else {
        if ((o.kit == 2)) {
            o.kit = "engineer";
        } else {
            if ((o.kit == 4)) {
                o.kit = "support";
            } else {
                if ((o.kit == 8)) {
                    o.kit = "recon";
                } else {
                    if ((o.kit == 32)) {
                        o.kit = "vehicle";
                    } else {
                        o.kit = "none";
                    }
                }
            }
        }
    }
    c.push('\n<div class="common-bf3-kit-icon common-bf3-kit-icon-');
    c.push(Surface.valOut(o.kit));
    c.push('"></div>\n');
    return c.join("");
};
common.addTemplate(new Surface.Template("bf3statsimage"));
var block_common_boxnarrow = new Surface.BlockConfig("", {"content": "common.boxnarrow.block_content","extraClassInner": "common.boxnarrow.block_extraClassInner","title": "common.boxnarrow.block_title","shadow": "common.boxnarrow.block_shadow","titleType": "common.boxnarrow.block_titleType","titleContainer": "common.boxnarrow.block_titleContainer","extraClass": "common.boxnarrow.block_extraClass"});
common.addTemplate(new Surface.Template("boxnarrow"));
common.boxnarrow.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_boxnarrow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.boxnarrow");
    c.push('\n<div class="common-box-narrow common-box-title-');
    c.push(b.get("titleType")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-box-container">\n <div class="common-box-inner-border">\n <div class="common-box-inner ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n </div>\n ");
    c.push(b.get("shadow")(o, b, kwargs));
    c.push('\n <div class="common-box-bottom-border">&nbsp;</div>\n </div>\n</div>');
    return c.join("");
};
common.boxnarrow.block_titleType = new Surface.Block("common.boxnarrow.block_titleType");
common.boxnarrow.block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("solid");
    return c.join("");
};
common.boxnarrow.block_extraClass = new Surface.Block("common.boxnarrow.block_extraClass");
common.boxnarrow.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrow.block_title = new Surface.Block("common.boxnarrow.block_title");
common.boxnarrow.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Topic");
    return c.join("");
};
common.boxnarrow.block_titleContainer = new Surface.Block("common.boxnarrow.block_titleContainer");
common.boxnarrow.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-box-title">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
common.boxnarrow.block_extraClassInner = new Surface.Block("common.boxnarrow.block_extraClassInner");
common.boxnarrow.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrow.block_content = new Surface.Block("common.boxnarrow.block_content");
common.boxnarrow.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrow.block_shadow = new Surface.Block("common.boxnarrow.block_shadow");
common.boxnarrow.block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<div class="common-boxnarrow-shadow"></div>');
    return c.join("");
};
var block_common_boxnarrowclean = new Surface.BlockConfig("", {"content": "common.boxnarrowclean.block_content","extraClassInner": "common.boxnarrowclean.block_extraClassInner","title": "common.boxnarrowclean.block_title","shadow": "common.boxnarrowclean.block_shadow","titleType": "common.boxnarrowclean.block_titleType","titleContainer": "common.boxnarrowclean.block_titleContainer","extraClass": "common.boxnarrowclean.block_extraClass"});
common.addTemplate(new Surface.Template("boxnarrowclean"));
common.boxnarrowclean.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_boxnarrowclean;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.boxnarrowclean");
    c.push('\n<div class="common-box-narrow common-box-title-');
    c.push(b.get("titleType")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n <div class="common-box-container">\n <div class="common-box-inner-border">\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-box-inner ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n </div>\n ");
    c.push(b.get("shadow")(o, b, kwargs));
    c.push('\n <div class="common-box-bottom-border">&nbsp;</div>\n </div>\n</div>');
    return c.join("");
};
common.boxnarrowclean.block_titleType = new Surface.Block("common.boxnarrowclean.block_titleType");
common.boxnarrowclean.block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("clean");
    return c.join("");
};
common.boxnarrowclean.block_extraClass = new Surface.Block("common.boxnarrowclean.block_extraClass");
common.boxnarrowclean.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrowclean.block_title = new Surface.Block("common.boxnarrowclean.block_title");
common.boxnarrowclean.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Topic");
    return c.join("");
};
common.boxnarrowclean.block_titleContainer = new Surface.Block("common.boxnarrowclean.block_titleContainer");
common.boxnarrowclean.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-box-title">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
common.boxnarrowclean.block_extraClassInner = new Surface.Block("common.boxnarrowclean.block_extraClassInner");
common.boxnarrowclean.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrowclean.block_content = new Surface.Block("common.boxnarrowclean.block_content");
common.boxnarrowclean.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxnarrowclean.block_shadow = new Surface.Block("common.boxnarrowclean.block_shadow");
common.boxnarrowclean.block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<div class="common-boxnarrow-shadow"></div>');
    return c.join("");
};
var block_common_boxwide = new Surface.BlockConfig("", {"content": "common.boxwide.block_content","extraClassInner": "common.boxwide.block_extraClassInner","title": "common.boxwide.block_title","shadow": "common.boxwide.block_shadow","extraTitleClass": "common.boxwide.block_extraTitleClass","titleType": "common.boxwide.block_titleType","titleContainer": "common.boxwide.block_titleContainer","contentContainer": "common.boxwide.block_contentContainer","extraClass": "common.boxwide.block_extraClass"});
common.addTemplate(new Surface.Template("boxwide"));
common.boxwide.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_boxwide;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.boxwide");
    c.push('\n<div class="common-box-title-');
    c.push(b.get("titleType")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-box-container">\n');
    c.push(b.get("contentContainer")(o, b, kwargs));
    c.push(b.get("shadow")(o, b, kwargs));
    c.push(' <div class="common-box-bottom-border">&nbsp;</div>\n </div>\n</div>');
    return c.join("");
};
common.boxwide.block_titleType = new Surface.Block("common.boxwide.block_titleType");
common.boxwide.block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("solid");
    return c.join("");
};
common.boxwide.block_extraClass = new Surface.Block("common.boxwide.block_extraClass");
common.boxwide.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwide.block_extraTitleClass = new Surface.Block("common.boxwide.block_extraTitleClass");
common.boxwide.block_extraTitleClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwide.block_title = new Surface.Block("common.boxwide.block_title");
common.boxwide.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Topic");
    return c.join("");
};
common.boxwide.block_titleContainer = new Surface.Block("common.boxwide.block_titleContainer");
common.boxwide.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-box-title ');
    c.push(b.get("extraTitleClass")(o, b, kwargs));
    c.push('">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
common.boxwide.block_extraClassInner = new Surface.Block("common.boxwide.block_extraClassInner");
common.boxwide.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwide.block_content = new Surface.Block("common.boxwide.block_content");
common.boxwide.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwide.block_contentContainer = new Surface.Block("common.boxwide.block_contentContainer");
common.boxwide.block_contentContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-box-inner-border">\n <div class="common-box-inner ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n </div>\n");
    return c.join("");
};
common.boxwide.block_shadow = new Surface.Block("common.boxwide.block_shadow");
common.boxwide.block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_common_boxwideclean = new Surface.BlockConfig("", {"content": "common.boxwideclean.block_content","extraClassInner": "common.boxwideclean.block_extraClassInner","title": "common.boxwideclean.block_title","shadow": "common.boxwideclean.block_shadow","titleType": "common.boxwideclean.block_titleType","titleContainer": "common.boxwideclean.block_titleContainer","extraClass": "common.boxwideclean.block_extraClass"});
common.addTemplate(new Surface.Template("boxwideclean"));
common.boxwideclean.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_boxwideclean;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.boxwideclean");
    c.push('\n<div class="common-box-title-');
    c.push(b.get("titleType")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n <div class="common-box-container">\n <div class="common-box-inner-border">\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-box-inner ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push('\n <div class="base-clear"></div>\n </div>\n </div>\n');
    c.push(b.get("shadow")(o, b, kwargs));
    c.push(' <div class="common-box-bottom-border">&nbsp;</div>\n </div>\n</div>');
    return c.join("");
};
common.boxwideclean.block_titleType = new Surface.Block("common.boxwideclean.block_titleType");
common.boxwideclean.block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("clean");
    return c.join("");
};
common.boxwideclean.block_extraClass = new Surface.Block("common.boxwideclean.block_extraClass");
common.boxwideclean.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwideclean.block_title = new Surface.Block("common.boxwideclean.block_title");
common.boxwideclean.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Topic");
    return c.join("");
};
common.boxwideclean.block_titleContainer = new Surface.Block("common.boxwideclean.block_titleContainer");
common.boxwideclean.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <h2 class="common-box-title">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </h2>\n");
    return c.join("");
};
common.boxwideclean.block_extraClassInner = new Surface.Block("common.boxwideclean.block_extraClassInner");
common.boxwideclean.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwideclean.block_content = new Surface.Block("common.boxwideclean.block_content");
common.boxwideclean.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwideclean.block_shadow = new Surface.Block("common.boxwideclean.block_shadow");
common.boxwideclean.block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_common_boxwidecleaninverted = new Surface.BlockConfig("", {"content": "common.boxwidecleaninverted.block_content","extraClassInner": "common.boxwidecleaninverted.block_extraClassInner","title": "common.boxwidecleaninverted.block_title","shadow": "common.boxwidecleaninverted.block_shadow","titleType": "common.boxwidecleaninverted.block_titleType","titleContainer": "common.boxwidecleaninverted.block_titleContainer","extraClass": "common.boxwidecleaninverted.block_extraClass"});
common.addTemplate(new Surface.Template("boxwidecleaninverted"));
common.boxwidecleaninverted.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_boxwidecleaninverted;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.boxwidecleaninverted");
    c.push('\n<div class="common-box-title-');
    c.push(b.get("titleType")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n <div class="common-box-container">\n <div class="common-box-inner-border">\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-box-inner ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n </div>\n");
    c.push(b.get("shadow")(o, b, kwargs));
    c.push(' <div class="common-box-bottom-border">&nbsp;</div>\n </div>\n</div>');
    return c.join("");
};
common.boxwidecleaninverted.block_titleType = new Surface.Block("common.boxwidecleaninverted.block_titleType");
common.boxwidecleaninverted.block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("clean");
    return c.join("");
};
common.boxwidecleaninverted.block_extraClass = new Surface.Block("common.boxwidecleaninverted.block_extraClass");
common.boxwidecleaninverted.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwidecleaninverted.block_title = new Surface.Block("common.boxwidecleaninverted.block_title");
common.boxwidecleaninverted.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Topic");
    return c.join("");
};
common.boxwidecleaninverted.block_titleContainer = new Surface.Block("common.boxwidecleaninverted.block_titleContainer");
common.boxwidecleaninverted.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-box-title">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
common.boxwidecleaninverted.block_extraClassInner = new Surface.Block("common.boxwidecleaninverted.block_extraClassInner");
common.boxwidecleaninverted.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwidecleaninverted.block_content = new Surface.Block("common.boxwidecleaninverted.block_content");
common.boxwidecleaninverted.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.boxwidecleaninverted.block_shadow = new Surface.Block("common.boxwidecleaninverted.block_shadow");
common.boxwidecleaninverted.block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_common_bubble = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("bubble"));
common.bubble.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_bubble;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.bubble");
    c.push('\n<div class="common-bubble ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
    c.push('">\n <div class="common-bubble-body">');
    c.push(o.body);
    c.push('</div>\n <div class="common-bubble-arrow"></div>\n</div>');
    return c.join("");
};
var block_common_button = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("button"));
common.button.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_button;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.button");
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.dropdown) != "undefined" && o.dropdown !== null) ? o.dropdown : false)) {
        c.push(' <div class="common-button-dropdown');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : false)) {
            c.push(" ");
            c.push(Surface.valOut(o.extraClass));
        }
        c.push('">\n <button type="');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : false)) {
            c.push("submit");
        } else {
            c.push("reset");
        }
        c.push('" class="common-button-');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.style) != "undefined" && o.style !== null) ? o.style : "medium")));
        c.push(' arrow"');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.disabled) != "undefined" && o.disabled !== null) ? o.disabled : false)) {
            c.push(' disabled="disabled"');
        }
        c.push("><p>");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null) ? o.title : "Submit")));
        c.push('</p></button>\n <div class="common-button-dropdown-container">\n <div class="common-button-dropdown-container-inner">\n ');
        c.push(Surface.valOut(o.dropdown));
        c.push("\n </div>\n </div>\n </div>\n");
    } else {
        c.push(' <button type="');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : false)) {
            c.push("submit");
        } else {
            c.push("reset");
        }
        c.push('" class="common-button-');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.style) != "undefined" && o.style !== null) ? o.style : "medium")));
        if (((typeof (o) != "undefined" && o !== null && typeof (o.icon) != "undefined" && o.icon !== null) ? o.icon : false)) {
            c.push(" common-button-icon");
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : false)) {
            c.push(" ");
            c.push(Surface.valOut(o.extraClass));
        }
        c.push('"');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.disabled) != "undefined" && o.disabled !== null) ? o.disabled : false)) {
            c.push(' disabled="disabled"');
        }
        c.push(">\n ");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.icon) != "undefined" && o.icon !== null) ? o.icon : false)) {
            c.push('<div class="common-button-icon-');
            c.push(Surface.valOut(o.icon));
            c.push('"></div>');
        }
        c.push("\n <p>");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null) ? o.title : "Submit")));
        c.push("</p>\n </button>\n");
    }
    return c.join("");
};
var block_common_cleanbutton = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("cleanbutton"));
common.cleanbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_cleanbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.cleanbutton");
    c.push('\n<span class="common-cleanbutton" ');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraId) != "undefined" && o.extraId !== null)) {
        c.push('id="');
        c.push(Surface.valOut(o.extraId));
        c.push('"');
    }
    c.push(">\n <a ");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraLinkId) != "undefined" && o.extraLinkId !== null)) {
        c.push('id="');
        c.push(Surface.valOut(o.extraLinkId));
        c.push('"');
    }
    c.push(' style="text-decoration:none;" class="');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null)) {
        c.push(Surface.valOut(o.extraClass));
    }
    c.push('" ');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null)) {
        c.push('href="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : "")));
        c.push('"');
    }
    c.push(' onclick="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.onclick) != "undefined" && o.onclick !== null) ? o.onclick : "")));
    c.push('">\n <span class="common-cleanbutton-left"></span>\n <span class="common-cleanbutton-middle ');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraInnerClass) != "undefined" && o.extraInnerClass !== null)) {
        c.push(Surface.valOut(o.extraInnerClass));
    }
    c.push('">');
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.rawtext) != "undefined" && o.rawtext !== null) ? o.rawtext : ""));
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.text) != "undefined" && o.text !== null) ? o.text : "")));
    c.push('</span>\n <span class="common-cleanbutton-right"></span>\n </a>\n</span>\n');
    return c.join("");
};
var block_common_cleanbuttonsmall = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("cleanbuttonsmall"));
common.cleanbuttonsmall.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_cleanbuttonsmall;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.cleanbuttonsmall");
    c.push('\n<span class="common-cleanbuttonsmall">\n');
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.disabled) != "undefined" && o.disabled !== null) ? o.disabled : false))) {
        c.push(' <a href="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : "")));
        c.push('" onclick="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.onclick) != "undefined" && o.onclick !== null) ? o.onclick : "")));
        c.push('">\n <span class="common-cleanbuttonsmall-left"></span>\n <span class="common-cleanbuttonsmall-middle"><span>');
        c.push(((typeof (o) != "undefined" && o !== null && typeof (o.rawtext) != "undefined" && o.rawtext !== null) ? o.rawtext : ""));
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.text) != "undefined" && o.text !== null) ? o.text : "")));
        c.push('</span></span>\n <span class="common-cleanbuttonsmall-right"></span>\n </a>\n');
    } else {
        c.push(' <span class="common-cleanbuttonsmall-disabled-left"></span>\n <span class="common-cleanbuttonsmall-disabled-middle"><span>');
        c.push(((typeof (o) != "undefined" && o !== null && typeof (o.rawtext) != "undefined" && o.rawtext !== null) ? o.rawtext : ""));
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.text) != "undefined" && o.text !== null) ? o.text : "")));
        c.push('</span></span>\n <span class="common-cleanbuttonsmall-disabled-right"></span>\n');
    }
    c.push("</span>\n");
    return c.join("");
};
var block_common_cleanbuttonsmall2 = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("cleanbuttonsmall2"));
common.cleanbuttonsmall2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_cleanbuttonsmall2;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.cleanbuttonsmall2");
    c.push('\n<span class="common-cleanbuttonsmall2">\n <a');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null)) {
        c.push(' href="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : "")));
        c.push('"');
    }
    if ((typeof (o) != "undefined" && o !== null && typeof (o.onclick) != "undefined" && o.onclick !== null)) {
        c.push(' onClick="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.onclick) != "undefined" && o.onclick !== null) ? o.onclick : "")));
        c.push('"');
    }
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null)) {
        c.push(' class="');
        c.push(Surface.valOut(o.extraClass));
        c.push('"');
    }
    c.push('>\n <span class="common-cleanbuttonsmall2-left"></span>\n <span class="common-cleanbuttonsmall2-middle">');
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.rawtext) != "undefined" && o.rawtext !== null) ? o.rawtext : ""));
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.text) != "undefined" && o.text !== null) ? o.text : "")));
    c.push('</span>\n <span class="common-cleanbuttonsmall2-right"></span>\n </a>\n</span>\n');
    return c.join("");
};
var block_common_coopchapters = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("coopchapters"));
common.coopchapters.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_coopchapters;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.coopchapters");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
common.function_getCoopChaptersVenice = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_chapters;
    l_chapters = [{"chapterId": "1","levels": [{"cardRank": 5,"missions": {"name": "COOP_007","rank": 2}}, {"cardRank": 6,"missions": {"name": "COOP_006","rank": 3}}],"deckSuit": "spades"}, {"chapterId": "2","levels": [{"cardRank": 7,"missions": {"name": "COOP_009","rank": 6}}],"deckSuit": "spades"}, {"chapterId": "3","levels": [{"cardRank": 8,"missions": {"name": "COOP_002","rank": 7}}, {"cardRank": 9,"missions": {"name": "COOP_003","rank": 9}}],"deckSuit": "spades"}, {"chapterId": "4","levels": [{"cardRank": 10,"missions": {"name": "COOP_010","rank": 10}}],"deckSuit": "spades"}];
    return l_chapters;
};
var block_common_dogtags = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("dogtags"));
common.dogtags.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_dogtags;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.dogtags");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
common.function_getDogtagsVenice = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_dogtags;
    l_dogtags = {"advanced": {"0": {"category": "DTC_Misc","index": 0,"isAdvanced": true,"nameSID": "ID_DT_N_DTB_DEFAULT","image": "defaulttag_right","descriptionSID": "ID_DT_D_DTB_DEFAULT","startedWith": true,"platforms": [1, 4, 2],"statSID": ""},"1": {"category": "DTC_Weapons","index": 1,"isAdvanced": true,"nameSID": "ID_DT_N_DTA001_ASSAULTRIFLE","image": "dta001","descriptionSID": "ID_DT_D_DTA001_ASSAULTRIFLE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A001"},"2": {"category": "DTC_Ribbons","index": 2,"isAdvanced": true,"nameSID": "ID_DT_N_DTA002_CARBINE","image": "dta002","descriptionSID": "ID_DT_D_DTA002_CARBINE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A002"},"3": {"category": "DTC_Medals","index": 3,"isAdvanced": true,"nameSID": "ID_DT_N_DTA003_LIGHTMACHINEGUN","image": "dta003","descriptionSID": "ID_DT_D_DTA003_LIGHTMACHINEGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A003"},"4": {"category": "DTC_Medals","index": 4,"isAdvanced": true,"nameSID": "ID_DT_N_DTA004_SNIPERRIFLE","image": "dta004","descriptionSID": "ID_DT_D_DTA004_SNIPERRIFLE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A004"},"5": {"category": "DTC_Medals","index": 5,"isAdvanced": true,"nameSID": "ID_DT_N_DTA006_SHOTGUN","image": "dta006","descriptionSID": "ID_DT_D_DTA006_SHOTGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A006"},"6": {"category": "DTC_Medals","index": 6,"isAdvanced": true,"nameSID": "ID_DT_N_DTA007_PERSONALDEFENSE","image": "dta007","descriptionSID": "ID_DT_D_DTA007_PERSONALDEFENSE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A007"},"7": {"category": "DTC_Medals","index": 7,"isAdvanced": true,"nameSID": "ID_DT_N_DTA005_HANDGUN","image": "dta005","descriptionSID": "ID_DT_D_DTA005_HANDGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A005"},"8": {"category": "DTC_Medals","index": 8,"isAdvanced": true,"nameSID": "ID_DT_N_DTA008_MELEE","image": "dta008","descriptionSID": "ID_DT_D_DTA008_MELEE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A008"},"9": {"category": "DTC_Medals","index": 9,"isAdvanced": true,"nameSID": "ID_DT_N_DTA037_MORTAR","image": "dta037","descriptionSID": "ID_DT_D_DTA037_MORTAR","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A037"},"10": {"category": "DTC_Ribbons","index": 10,"isAdvanced": true,"nameSID": "ID_DT_N_DTA038_LASERDESIGNATOR","image": "dta038","descriptionSID": "ID_DT_D_DTA038_LASERDESIGNATOR","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A038"},"11": {"category": "DTC_Ribbons","index": 11,"isAdvanced": true,"nameSID": "ID_DT_N_DTA039_CLAYMORE","image": "dta039","descriptionSID": "ID_DT_D_DTA039_CLAYMORE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A039"},"12": {"category": "DTC_Ribbons","index": 12,"isAdvanced": true,"nameSID": "ID_DT_N_DTA040_RADIOBEACON","image": "dta040","descriptionSID": "ID_DT_D_DTA040_RADIOBEACON","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A040"},"13": {"category": "DTC_Medals","index": 13,"isAdvanced": true,"nameSID": "ID_DT_N_DTA033_RESUPPLY","image": "dta033","descriptionSID": "ID_DT_D_DTA033_RESUPPLY","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A033"},"14": {"category": "DTC_Medals","index": 14,"isAdvanced": true,"nameSID": "ID_DT_N_DTA034_MAINTENANCE","image": "dta034","descriptionSID": "ID_DT_D_DTA034_MAINTENANCE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A034"},"15": {"category": "DTC_Medals","index": 15,"isAdvanced": true,"nameSID": "ID_DT_N_DTA035_MEDICAL","image": "dta035","descriptionSID": "ID_DT_D_DTA035_MEDICAL","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A035"},"16": {"category": "DTC_Medals","index": 16,"isAdvanced": true,"nameSID": "ID_DT_N_DTA036_SURVEILANCE","image": "dta036","descriptionSID": "ID_DT_D_DTA036_SURVEILANCE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A036"},"17": {"category": "DTC_Medals","index": 17,"isAdvanced": true,"nameSID": "ID_DT_N_DTA020_TRANSPORTWARFARE","image": "dta020","descriptionSID": "ID_DT_D_DTA020_TRANSPORTWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A020"},"18": {"category": "DTC_Medals","index": 18,"isAdvanced": true,"nameSID": "ID_DT_N_DTA021_ARMORWARFARE","image": "dta021","descriptionSID": "ID_DT_D_DTA021_ARMORWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A021"},"19": {"category": "DTC_Medals","index": 19,"isAdvanced": true,"nameSID": "ID_DT_N_DTA022_AIRWARFARE","image": "dta022","descriptionSID": "ID_DT_D_DTA022_AIRWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A022"},"20": {"category": "DTC_Medals","index": 20,"isAdvanced": true,"nameSID": "ID_DT_N_DTA023_STATIONARY","image": "dta023","descriptionSID": "ID_DT_D_DTA023_STATIONARY","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A023"},"21": {"category": "DTC_Medals","index": 21,"isAdvanced": true,"nameSID": "ID_DT_N_DTA009_ANTIVEHICLE","image": "dta009","descriptionSID": "ID_DT_D_DTA009_ANTIVEHICLE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A009"},"22": {"category": "DTC_Medals","index": 22,"isAdvanced": true,"nameSID": "ID_DT_N_DTA010_MARKSMAN","image": "dta010","descriptionSID": "ID_DT_D_DTA010_MARKSMAN","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A010"},"23": {"category": "DTC_Medals","index": 23,"isAdvanced": true,"nameSID": "ID_DT_N_DTA011_AVENGER","image": "dta011","descriptionSID": "ID_DT_D_DTA011_AVENGER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A011"},"24": {"category": "DTC_Medals","index": 24,"isAdvanced": true,"nameSID": "ID_DT_N_DTA012_SAVIOR","image": "dta012","descriptionSID": "ID_DT_D_DTA012_SAVIOR","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A012"},"25": {"category": "DTC_Medals","index": 25,"isAdvanced": true,"nameSID": "ID_DT_N_DTA013_NEMESIS","image": "dta013","descriptionSID": "ID_DT_D_DTA013_NEMESIS","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A013"},"26": {"category": "DTC_Medals","index": 26,"isAdvanced": true,"nameSID": "ID_DT_N_DTA014_ACCURACY","image": "dta014","descriptionSID": "ID_DT_D_DTA014_ACCURACY","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A014"},"27": {"category": "DTC_Medals","index": 27,"isAdvanced": true,"nameSID": "ID_DT_N_DTA019_COMBAT","image": "dta019","descriptionSID": "ID_DT_D_DTA019_COMBAT","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A019"},"28": {"category": "DTC_Medals","index": 28,"isAdvanced": true,"nameSID": "ID_DT_N_DTA015_MVP","image": "dta015","descriptionSID": "ID_DT_D_DTA015_MVP","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A015"},"29": {"category": "DTC_Medals","index": 29,"isAdvanced": true,"nameSID": "ID_DT_N_DTA016_2NDMVP","image": "dta016","descriptionSID": "ID_DT_D_DTA016_2NDMVP","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A016"},"30": {"category": "DTC_Medals","index": 30,"isAdvanced": true,"nameSID": "ID_DT_N_DTA017_3RDMVP","image": "dta017","descriptionSID": "ID_DT_D_DTA017_3RDMVP","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A017"},"31": {"category": "DTC_Medals","index": 31,"isAdvanced": true,"nameSID": "ID_DT_N_DTA018_ACESQUAD","image": "dta018","descriptionSID": "ID_DT_D_DTA018_ACESQUAD","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A018"},"32": {"category": "DTC_Medals","index": 32,"isAdvanced": true,"nameSID": "ID_DT_N_DTA026_RUSH","image": "dta026","descriptionSID": "ID_DT_D_DTA026_RUSH","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A026"},"33": {"category": "DTC_Medals","index": 33,"isAdvanced": true,"nameSID": "ID_DT_N_DTA024_M-COMATTACKER","image": "dta024","descriptionSID": "ID_DT_D_DTA024_M-COMATTACKER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A024"},"34": {"category": "DTC_Medals","index": 34,"isAdvanced": true,"nameSID": "ID_DT_N_DTA025_M-COMDEFENDER","image": "dta025","descriptionSID": "ID_DT_D_DTA025_M-COMDEFENDER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A025"},"35": {"category": "DTC_Medals","index": 35,"isAdvanced": true,"nameSID": "ID_DT_N_DTA027_CONQUEST","image": "dta027","descriptionSID": "ID_DT_D_DTA027_CONQUEST","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A027"},"36": {"category": "DTC_Medals","index": 36,"isAdvanced": true,"nameSID": "ID_DT_N_DTA031_FLAGATTACKER","image": "dta031","descriptionSID": "ID_DT_D_DTA031_FLAGATTACKER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A031"},"37": {"category": "DTC_Medals","index": 37,"isAdvanced": true,"nameSID": "ID_DT_N_DTA032_FLAGDEFENDER","image": "dta032","descriptionSID": "ID_DT_D_DTA032_FLAGDEFENDER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A032"},"38": {"category": "DTC_Medals","index": 38,"isAdvanced": true,"nameSID": "ID_DT_N_DTA028_TEAMDEATHMATCH","image": "dta028","descriptionSID": "ID_DT_D_DTA028_TEAMDEATHMATCH","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A028"},"39": {"category": "DTC_Medals","index": 39,"isAdvanced": true,"nameSID": "ID_DT_N_DTA029_SQUADRUSH","image": "dta029","descriptionSID": "ID_DT_D_DTA029_SQUADRUSH","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A029"},"40": {"category": "DTC_Medals","index": 40,"isAdvanced": true,"nameSID": "ID_DT_N_DTA030_SQUADDEATHMATCH","image": "dta030","descriptionSID": "ID_DT_D_DTA030_SQUADDEATHMATCH","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A030"},"41": {"category": "DTC_Ranks","index": 41,"isAdvanced": true,"nameSID": "ID_DT_N_DTA051_SECONDLIEUTENANT","image": "dta051","descriptionSID": "ID_DT_D_DTA051_SECONDLIEUTENANT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"42": {"category": "DTC_Ranks","index": 42,"isAdvanced": true,"nameSID": "ID_DT_N_DTA052_FIRSTLIEUTENANT","image": "dta052","descriptionSID": "ID_DT_D_DTA052_FIRSTLIEUTENANT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"43": {"category": "DTC_Ranks","index": 43,"isAdvanced": true,"nameSID": "ID_DT_N_DTA053_CAPTAIN","image": "dta053","descriptionSID": "ID_DT_D_DTA053_CAPTAIN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"44": {"category": "DTC_Ranks","index": 44,"isAdvanced": true,"nameSID": "ID_DT_N_DTA054_MAJOR","image": "dta054","descriptionSID": "ID_DT_D_DTA054_MAJOR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"45": {"category": "DTC_Ranks","index": 45,"isAdvanced": true,"nameSID": "ID_DT_N_DTA055_LIEUTENANTCOLONEL","image": "dta055","descriptionSID": "ID_DT_D_DTA055_LIEUTENANTCOLONEL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"46": {"category": "DTC_Ranks","index": 46,"isAdvanced": true,"nameSID": "ID_DT_N_DTA056_COLONEL","image": "dta056","descriptionSID": "ID_DT_D_DTA056_COLONEL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"47": {"category": "DTC_Ranks","index": 47,"isAdvanced": true,"nameSID": "ID_DT_N_DTA057_COLONELSERVICESTAR5","image": "dta057","descriptionSID": "ID_DT_D_DTA057_COLONELSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"48": {"category": "DTC_Ranks","index": 48,"isAdvanced": true,"nameSID": "ID_DT_N_DTA058_COLONELSERVICESTAR10","image": "dta058","descriptionSID": "ID_DT_D_DTA058_COLONELSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"49": {"category": "DTC_Ranks","index": 49,"isAdvanced": true,"nameSID": "ID_DT_N_DTA059_COLONELSERVICESTAR25","image": "dta059","descriptionSID": "ID_DT_D_DTA059_COLONELSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"50": {"category": "DTC_Ranks","index": 50,"isAdvanced": true,"nameSID": "ID_DT_N_DTA060_COLONELSERVICESTAR50","image": "dta060","descriptionSID": "ID_DT_D_DTA060_COLONELSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"51": {"category": "DTC_Ranks","index": 51,"isAdvanced": true,"nameSID": "ID_DT_N_DTA061_COLONELSERVICESTAR100","image": "dta061","descriptionSID": "ID_DT_D_DTA061_COLONELSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"52": {"category": "DTC_Ranks","index": 52,"isAdvanced": true,"nameSID": "ID_DT_N_DTA041_USARMYSERVICE","image": "dta041","descriptionSID": "ID_DT_D_DTA041_USARMYSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A041"},"53": {"category": "DTC_Ranks","index": 53,"isAdvanced": true,"nameSID": "ID_DT_N_DTA042_RUARMYSERVICE","image": "dta042","descriptionSID": "ID_DT_D_DTA042_RUARMYSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A042"},"54": {"category": "DTC_Ranks","index": 54,"isAdvanced": true,"nameSID": "ID_DT_N_DTA043_ASSAULTSERVICE","image": "dta043","descriptionSID": "ID_DT_D_DTA043_ASSAULTSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A043"},"55": {"category": "DTC_Ranks","index": 55,"isAdvanced": true,"nameSID": "ID_DT_N_DTA044_ENGINEERSERVICE","image": "dta044","descriptionSID": "ID_DT_D_DTA044_ENGINEERSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A044"},"56": {"category": "DTC_Ranks","index": 56,"isAdvanced": true,"nameSID": "ID_DT_N_DTA045_SUPPORTSERVICE","image": "dta045","descriptionSID": "ID_DT_D_DTA045_SUPPORTSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A045"},"57": {"category": "DTC_Ranks","index": 57,"isAdvanced": true,"nameSID": "ID_DT_N_DTA046_RECONSERVICE","image": "dta046","descriptionSID": "ID_DT_D_DTA046_RECONSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A046"},"58": {"category": "DTC_Ranks","index": 58,"isAdvanced": true,"nameSID": "ID_DT_N_DTA047_TANKSSERVICE","image": "dta047","descriptionSID": "ID_DT_D_DTA047_TANKSSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A047"},"59": {"category": "DTC_Ranks","index": 59,"isAdvanced": true,"nameSID": "ID_DT_N_DTA048_HELICOPTERSSERVICE","image": "dta048","descriptionSID": "ID_DT_D_DTA048_HELICOPTERSSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A048"},"60": {"category": "DTC_Ranks","index": 60,"isAdvanced": true,"nameSID": "ID_DT_N_DTA049_JETSSERVICE","image": "dta049","descriptionSID": "ID_DT_D_DTA049_JETSSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A049"},"61": {"category": "DTC_Ranks","index": 61,"isAdvanced": true,"nameSID": "ID_DT_N_DTA050_STATIONARYSERVICE","image": "dta050","descriptionSID": "ID_DT_D_DTA050_STATIONARYSERVICE","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A050"},"62": {"category": "DTC_ServiceStars","index": 62,"isAdvanced": true,"nameSID": "ID_DT_N_DTA087_CO-OPSERVICESTAR5","image": "dta087","descriptionSID": "ID_DT_D_DTA087_CO-OPSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"63": {"category": "DTC_ServiceStars","index": 63,"isAdvanced": true,"nameSID": "ID_DT_N_DTA088_CO-OPSERVICESTAR10","image": "dta088","descriptionSID": "ID_DT_D_DTA088_CO-OPSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"64": {"category": "DTC_ServiceStars","index": 64,"isAdvanced": true,"nameSID": "ID_DT_N_DTA089_CO-OPSERVICESTAR25","image": "dta089","descriptionSID": "ID_DT_D_DTA089_CO-OPSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"65": {"category": "DTC_ServiceStars","index": 65,"isAdvanced": true,"nameSID": "ID_DT_N_DTA090_CO-OPSERVICESTAR50","image": "dta090","descriptionSID": "ID_DT_D_DTA090_CO-OPSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"66": {"category": "DTC_ServiceStars","index": 66,"isAdvanced": true,"nameSID": "ID_DT_N_DTA091_M16A4MASTER","image": "dta092-m16a4","descriptionSID": "ID_DT_D_DTA091_M16A4MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A091"},"67": {"category": "DTC_Weapons","index": 67,"isAdvanced": true,"nameSID": "ID_DT_N_DTA092_AK-74MMASTER","image": "ak-74m","descriptionSID": "ID_DT_D_DTA092_AK-74MMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A092"},"68": {"category": "DTC_Weapons","index": 68,"isAdvanced": true,"nameSID": "ID_DT_N_DTA097_M416MASTER","image": "m416","descriptionSID": "ID_DT_D_DTA097_M416MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A097"},"69": {"category": "DTC_Weapons","index": 69,"isAdvanced": true,"nameSID": "ID_DT_N_DTA094_AEK971MASTER","image": "aek971","descriptionSID": "ID_DT_D_DTA094_AEK971MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A094"},"70": {"category": "DTC_Weapons","index": 70,"isAdvanced": true,"nameSID": "ID_DT_N_DTA099_F2000MASTER","image": "f2000","descriptionSID": "ID_DT_D_DTA099_F2000MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A099"},"71": {"category": "DTC_Weapons","index": 71,"isAdvanced": true,"nameSID": "ID_DT_N_DTA095_AN94ABAKANMASTER","image": "an94-akaban","descriptionSID": "ID_DT_D_DTA095_AN94ABAKANMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A095"},"72": {"category": "DTC_Weapons","index": 72,"isAdvanced": true,"nameSID": "ID_DT_N_DTA096_KH2000MASTER","image": "kh2000","descriptionSID": "ID_DT_D_DTA096_KH2000MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A096"},"73": {"category": "DTC_Weapons","index": 73,"isAdvanced": true,"nameSID": "ID_DT_N_DTA100_G3MASTER","image": "g3","descriptionSID": "ID_DT_D_DTA100_G3MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A100"},"74": {"category": "DTC_Weapons","index": 74,"isAdvanced": true,"nameSID": "ID_DT_N_DTA093_40MMGLMASTER","image": "40mmgl","descriptionSID": "ID_DT_D_DTA093_40MMGLMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A093"},"75": {"category": "DTC_Weapons","index": 75,"isAdvanced": true,"nameSID": "ID_DT_N_DTA101_M4A1MASTER","image": "m4a1","descriptionSID": "ID_DT_D_DTA101_M4A1MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A101"},"76": {"category": "DTC_Weapons","index": 76,"isAdvanced": true,"nameSID": "ID_DT_N_DTA102_AKS74UMASTER","image": "aks74u","descriptionSID": "ID_DT_D_DTA102_AKS74UMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A102"},"77": {"category": "DTC_Weapons","index": 77,"isAdvanced": true,"nameSID": "ID_DT_N_DTA106_SCAR-HCQBMASTER","image": "scar-h","descriptionSID": "ID_DT_D_DTA106_SCAR-HCQBMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A106"},"78": {"category": "DTC_Weapons","index": 78,"isAdvanced": true,"nameSID": "ID_DT_N_DTA105_G36CMASTER","image": "g36c","descriptionSID": "ID_DT_D_DTA105_G36CMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A105"},"79": {"category": "DTC_Weapons","index": 79,"isAdvanced": true,"nameSID": "ID_DT_N_DTA111_SG553MASTER","image": "sg553","descriptionSID": "ID_DT_D_DTA111_SG553MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A111"},"80": {"category": "DTC_Weapons","index": 80,"isAdvanced": true,"nameSID": "ID_DT_N_DTA103_MK153SMAWMASTER","image": "mk153-smaw","descriptionSID": "ID_DT_D_DTA103_MK153SMAWMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A103"},"81": {"category": "DTC_Weapons","index": 81,"isAdvanced": true,"nameSID": "ID_DT_N_DTA104_RPG-7ATMASTER","image": "rpg-7","descriptionSID": "ID_DT_D_DTA104_RPG-7ATMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A104"},"82": {"category": "DTC_Weapons","index": 82,"isAdvanced": true,"nameSID": "ID_DT_N_DTA108_FIM-92STINGERAAMASTER","image": "fim-92-stinger","descriptionSID": "ID_DT_D_DTA108_FIM-92STINGERAAMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A108"},"83": {"category": "DTC_Weapons","index": 83,"isAdvanced": true,"nameSID": "ID_DT_N_DTA109_SA18IGLAAAMASTER","image": "sa18-igla-aa","descriptionSID": "ID_DT_D_DTA109_SA18IGLAAAMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A109"},"84": {"category": "DTC_Weapons","index": 84,"isAdvanced": true,"nameSID": "ID_DT_N_DTA107_FGM-148JAVMASTER","image": "fgm-148-javelin","descriptionSID": "ID_DT_D_DTA107_FGM-148JAVMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A107"},"85": {"category": "DTC_Weapons","index": 85,"isAdvanced": true,"nameSID": "ID_DT_N_DTA110_ATMINESMASTER","image": "at-mines","descriptionSID": "ID_DT_D_DTA110_ATMINESMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A110"},"86": {"category": "DTC_Weapons","index": 86,"isAdvanced": true,"nameSID": "ID_DT_N_DTA112_M27LMGMASTER","image": "m27-lmg","descriptionSID": "ID_DT_D_DTA112_M27LMGMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A112"},"87": {"category": "DTC_Weapons","index": 87,"isAdvanced": true,"nameSID": "ID_DT_N_DTA113_RPK-74MMASTER","image": "rpk-74m","descriptionSID": "ID_DT_D_DTA113_RPK-74MMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A113"},"88": {"category": "DTC_Weapons","index": 88,"isAdvanced": true,"nameSID": "ID_DT_N_DTA115_M249SAWMASTER","image": "m249","descriptionSID": "ID_DT_D_DTA115_M249SAWMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A115"},"89": {"category": "DTC_Weapons","index": 89,"isAdvanced": true,"nameSID": "ID_DT_N_DTA117_PECHENEGMASTER","image": "pecheneg","descriptionSID": "ID_DT_D_DTA117_PECHENEGMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A117"},"90": {"category": "DTC_Weapons","index": 90,"isAdvanced": true,"nameSID": "ID_DT_N_DTA114_M240LMGMASTER","image": "m240","descriptionSID": "ID_DT_D_DTA114_M240LMGMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A114"},"91": {"category": "DTC_Weapons","index": 91,"isAdvanced": true,"nameSID": "ID_DT_N_DTA116_M60E4MASTER","image": "m60e4","descriptionSID": "ID_DT_D_DTA116_M60E4MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A116"},"92": {"category": "DTC_Weapons","index": 92,"isAdvanced": true,"nameSID": "ID_DT_N_DTA118_TYPE88LMGMASTER","image": "typ-88-lmg","descriptionSID": "ID_DT_D_DTA118_TYPE88LMGMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A118"},"93": {"category": "DTC_Weapons","index": 93,"isAdvanced": true,"nameSID": "ID_DT_N_DTA126_C4EXPLMASTER","image": "c4","descriptionSID": "ID_DT_D_DTA126_C4EXPLMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A126"},"94": {"category": "DTC_Weapons","index": 94,"isAdvanced": true,"nameSID": "ID_DT_N_DTA128_CLAYMOREMASTER","image": "claymore","descriptionSID": "ID_DT_D_DTA128_CLAYMOREMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A128"},"95": {"category": "DTC_Weapons","index": 95,"isAdvanced": true,"nameSID": "ID_DT_N_DTA098_60MMMORTARMASTER","image": "mortar","descriptionSID": "ID_DT_D_DTA098_60MMMORTARMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A098"},"96": {"category": "DTC_Weapons","index": 96,"isAdvanced": true,"nameSID": "ID_DT_N_DTA119_MK11SNIPERMASTER","image": "mk11","descriptionSID": "ID_DT_D_DTA119_MK11SNIPERMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A119"},"97": {"category": "DTC_Weapons","index": 97,"isAdvanced": true,"nameSID": "ID_DT_N_DTA120_SVDDRAGUNOVMASTER","image": "svd-dragunov","descriptionSID": "ID_DT_D_DTA120_SVDDRAGUNOVMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A120"},"98": {"category": "DTC_Weapons","index": 98,"isAdvanced": true,"nameSID": "ID_DT_N_DTA122_SV98MASTER","image": "sv98","descriptionSID": "ID_DT_D_DTA122_SV98MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A122"},"99": {"category": "DTC_Weapons","index": 99,"isAdvanced": true,"nameSID": "ID_DT_N_DTA121_SKSSNIPERMASTER","image": "sks","descriptionSID": "ID_DT_D_DTA121_SKSSNIPERMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A121"},"100": {"category": "DTC_Weapons","index": 100,"isAdvanced": true,"nameSID": "ID_DT_N_DTA124_M40SNIPERMASTER","image": "m40","descriptionSID": "ID_DT_D_DTA124_M40SNIPERMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A124"},"101": {"category": "DTC_Weapons","index": 101,"isAdvanced": true,"nameSID": "ID_DT_N_DTA123_MODEL988MASTER","image": "model-98b","descriptionSID": "ID_DT_D_DTA123_MODEL988MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A123"},"102": {"category": "DTC_Weapons","index": 102,"isAdvanced": true,"nameSID": "ID_DT_N_DTA129_M39MBRMASTER","image": "m39-mbr","descriptionSID": "ID_DT_D_DTA129_M39MBRMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A129"},"103": {"category": "DTC_Weapons","index": 103,"isAdvanced": true,"nameSID": "ID_DT_N_DTA127_LASERRANGEFINDERMASTER","image": "laser-range-fighter","descriptionSID": "ID_DT_D_DTA127_LASERRANGEFINDERMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A127"},"104": {"category": "DTC_Weapons","index": 104,"isAdvanced": true,"nameSID": "ID_DT_N_DTA125_MUAVMASTER","image": "muav","descriptionSID": "ID_DT_D_DTA125_MUAVMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A125"},"105": {"category": "DTC_Weapons","index": 105,"isAdvanced": true,"nameSID": "ID_DT_N_DTA130_M9MASTER","image": "m9","descriptionSID": "ID_DT_D_DTA130_M9MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A130"},"106": {"category": "DTC_Weapons","index": 106,"isAdvanced": true,"nameSID": "ID_DT_N_DTA135_M9SILENCEDMASTER","image": "m9-silenced","descriptionSID": "ID_DT_D_DTA135_M9SILENCEDMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A135"},"107": {"category": "DTC_Weapons","index": 107,"isAdvanced": true,"nameSID": "ID_DT_N_DTA131_GRACHMASTER","image": "grach","descriptionSID": "ID_DT_D_DTA131_GRACHMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A131"},"108": {"category": "DTC_Weapons","index": 108,"isAdvanced": true,"nameSID": "ID_DT_N_DTA136_GRACHSILENCEDMASTER","image": "grach-silenced","descriptionSID": "ID_DT_D_DTA136_GRACHSILENCEDMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A136"},"109": {"category": "DTC_Weapons","index": 109,"isAdvanced": true,"nameSID": "ID_DT_N_DTA134_GLOCK17MASTER","image": "glock-17","descriptionSID": "ID_DT_D_DTA134_GLOCK17MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A134"},"110": {"category": "DTC_Weapons","index": 110,"isAdvanced": true,"nameSID": "ID_DT_N_DTA132_GLOCK18MASTER","image": "glock-18","descriptionSID": "ID_DT_D_DTA132_GLOCK18MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A132"},"111": {"category": "DTC_Weapons","index": 111,"isAdvanced": true,"nameSID": "ID_DT_N_DTA133_TAURUSMASTER","image": "taurus","descriptionSID": "ID_DT_D_DTA133_TAURUSMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A133"},"112": {"category": "DTC_Weapons","index": 112,"isAdvanced": true,"nameSID": "ID_DT_N_DTA138_M93RMASTER","image": "m93r","descriptionSID": "ID_DT_D_DTA138_M93RMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A138"},"113": {"category": "DTC_Weapons","index": 113,"isAdvanced": true,"nameSID": "ID_DT_N_DTA139_REXMASTER","image": "rex","descriptionSID": "ID_DT_D_DTA139_REXMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A139"},"114": {"category": "DTC_Weapons","index": 114,"isAdvanced": true,"nameSID": "ID_DT_N_DTA137_M-45MASTER","image": "m45","descriptionSID": "ID_DT_D_DTA137_M-45MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A137"},"115": {"category": "DTC_Weapons","index": 115,"isAdvanced": true,"nameSID": "ID_DT_N_DTA145_870MCSMASTER","image": "870-mcs","descriptionSID": "ID_DT_D_DTA145_870MCSMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A145"},"116": {"category": "DTC_Weapons","index": 116,"isAdvanced": true,"nameSID": "ID_DT_N_DTA147_M1014MASTER","image": "m1014","descriptionSID": "ID_DT_D_DTA147_M1014MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A147"},"117": {"category": "DTC_Weapons","index": 117,"isAdvanced": true,"nameSID": "ID_DT_N_DTA149_SAIGA20KMASTER","image": "saiga-20k","descriptionSID": "ID_DT_D_DTA149_SAIGA20KMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A149"},"118": {"category": "DTC_Weapons","index": 118,"isAdvanced": true,"nameSID": "ID_DT_N_DTA146_DAO12MASTER","image": "dao-12","descriptionSID": "ID_DT_D_DTA146_DAO12MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A146"},"119": {"category": "DTC_Weapons","index": 119,"isAdvanced": true,"nameSID": "ID_DT_N_DTA148_USAS-12MASTER","image": "usa-s12","descriptionSID": "ID_DT_D_DTA148_USAS-12MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A148"},"120": {"category": "DTC_Weapons","index": 120,"isAdvanced": true,"nameSID": "ID_DT_N_DTA141_PP2000MASTER","image": "pp2000","descriptionSID": "ID_DT_D_DTA141_PP2000MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A141"},"121": {"category": "DTC_Weapons","index": 121,"isAdvanced": true,"nameSID": "ID_DT_N_DTA142_UMP-45MASTER","image": "ump-45","descriptionSID": "ID_DT_D_DTA142_UMP-45MASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A142"},"122": {"category": "DTC_Weapons","index": 122,"isAdvanced": true,"nameSID": "ID_DT_N_DTA140_MAGPULMASTER","image": "magpul","descriptionSID": "ID_DT_D_DTA140_MAGPULMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A140"},"123": {"category": "DTC_Weapons","index": 123,"isAdvanced": true,"nameSID": "ID_DT_N_DTA143_P90TRMASTER","image": "p90-tr","descriptionSID": "ID_DT_D_DTA143_P90TRMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A143"},"124": {"category": "DTC_Weapons","index": 124,"isAdvanced": true,"nameSID": "ID_DT_N_DTA144_MP7PDWMASTER","image": "mp7","descriptionSID": "ID_DT_D_DTA144_MP7PDWMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A144"},"125": {"category": "DTC_Weapons","index": 125,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_ASVALMASTER","image": "asval_right","descriptionSID": "ID_DT_D_DTA_ASVALMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_ASVAL"},"126": {"category": "DTC_Weapons","index": 126,"isAdvanced": true,"nameSID": "ID_DT_N_DTA150_MBTMASTER","image": "mbt","descriptionSID": "ID_DT_D_DTA150_MBTMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A150"},"127": {"category": "DTC_Weapons","index": 127,"isAdvanced": true,"nameSID": "ID_DT_N_DTA151_IFVMASTER","image": "ifv","descriptionSID": "ID_DT_D_DTA151_IFVMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A151"},"128": {"category": "DTC_Weapons","index": 128,"isAdvanced": true,"nameSID": "ID_DT_N_DTA152_AAMASTER","image": "aa","descriptionSID": "ID_DT_D_DTA152_AAMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A152"},"129": {"category": "DTC_Weapons","index": 129,"isAdvanced": true,"nameSID": "ID_DT_N_DTA153_ATTACKHELIMASTER","image": "attack-heli","descriptionSID": "ID_DT_D_DTA153_ATTACKHELIMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A153"},"130": {"category": "DTC_Weapons","index": 130,"isAdvanced": true,"nameSID": "ID_DT_N_DTA154_SCOUTHELIMASTER","image": "scout-heli","descriptionSID": "ID_DT_D_DTA154_SCOUTHELIMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A154"},"131": {"category": "DTC_Weapons","index": 131,"isAdvanced": true,"nameSID": "ID_DT_N_DTA155_JETMASTER","image": "jet","descriptionSID": "ID_DT_D_DTA155_JETMASTER","startedWith": false,"platforms": [1, 4, 2],"statSID": "ID_DT_STAT_A155"},"132": {"category": "DTC_Misc","index": 132,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_ALIENWARE","image": "alienware","descriptionSID": "ID_DT_D_DTA_ALIENWARE","startedWith": false,"platforms": [1, 2],"statSID": ""},"133": {"category": "DTC_Misc","index": 133,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_RAZER","image": "dogtags_razer_256","descriptionSID": "ID_DT_D_DTA_RAZER","startedWith": false,"platforms": [1, 2],"statSID": ""},"134": {"category": "DTC_Misc","index": 134,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_PEPPER1","image": "pepper1","descriptionSID": "ID_DT_D_DTA_PEPPER1","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"135": {"category": "DTC_Misc","index": 135,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_PEPPER2","image": "pepper2","descriptionSID": "ID_DT_D_DTA_PEPPER2","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"136": {"category": "DTC_Misc","index": 136,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_PEPPER3","image": "pepper3","descriptionSID": "ID_DT_D_DTA_PEPPER3","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"137": {"category": "DTC_Misc","index": 137,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_PEPPER4","image": "pepper4","descriptionSID": "ID_DT_D_DTA_PEPPER4","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"138": {"category": "DTC_Misc","index": 138,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_PEPPER5","image": "pepper5","descriptionSID": "ID_DT_D_DTA_PEPPER5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"139": {"category": "DTC_Misc","index": 139,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_SPICE1","image": "spice","descriptionSID": "ID_DT_D_DTA_SPICE1","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"140": {"category": "DTC_Misc","index": 140,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_SPICE2","image": "spice2","descriptionSID": "ID_DT_D_DTA_SPICE2","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"141": {"category": "DTC_Misc","index": 141,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_SPICE3","image": "spice3","descriptionSID": "ID_DT_D_DTA_SPICE3","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"142": {"category": "DTC_Misc","index": 142,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_SPICE4","image": "spice4","descriptionSID": "ID_DT_D_DTA_SPICE4","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"143": {"category": "DTC_Misc","index": 143,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_SPICE5","image": "spice5","descriptionSID": "ID_DT_D_DTA_SPICE5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"144": {"category": "DTC_Misc","index": 144,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE1","image": "bundle1","descriptionSID": "ID_DT_D_DTA_BUNDLE1","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"145": {"category": "DTC_Misc","index": 145,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE2","image": "bundle2","descriptionSID": "ID_DT_D_DTA_BUNDLE2","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"146": {"category": "DTC_Misc","index": 146,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE3","image": "bundle3","descriptionSID": "ID_DT_D_DTA_BUNDLE3","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"147": {"category": "DTC_Misc","index": 147,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE4","image": "bundle4","descriptionSID": "ID_DT_D_DTA_BUNDLE4","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"148": {"category": "DTC_Misc","index": 148,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE5","image": "bundle5","descriptionSID": "ID_DT_D_DTA_BUNDLE5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"149": {"category": "DTC_Misc","index": 149,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE6","image": "bundle6","descriptionSID": "ID_DT_D_DTA_BUNDLE6","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"150": {"category": "DTC_Misc","index": 150,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE7","image": "bundle7","descriptionSID": "ID_DT_D_DTA_BUNDLE7","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"151": {"category": "DTC_Misc","index": 151,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE8","image": "bundle8","descriptionSID": "ID_DT_D_DTA_BUNDLE8","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"152": {"category": "DTC_Misc","index": 152,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE9","image": "bundle9","descriptionSID": "ID_DT_D_DTA_BUNDLE9","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"153": {"category": "DTC_Misc","index": 153,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BUNDLE10","image": "bundle10","descriptionSID": "ID_DT_D_DTA_BUNDLE10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"154": {"category": "DTC_Misc","index": 154,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_NFS","image": "nfs","descriptionSID": "ID_DT_D_DTA_NFS","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"155": {"category": "DTC_Misc","index": 155,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_ME1","image": "me3_01","descriptionSID": "ID_DT_D_DTA_ME1","startedWith": true,"platforms": [1, 4, 2],"statSID": ""},"156": {"category": "DTC_Misc","index": 156,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_ME2","image": "me3_02","descriptionSID": "ID_DT_D_DTA_ME2","startedWith": true,"platforms": [1, 4, 2],"statSID": ""},"157": {"category": "DTC_Misc","index": 157,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_DICE","image": "dice","descriptionSID": "ID_DT_D_DTA_DICE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"158": {"category": "DTC_Misc","index": 158,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_1943","image": "bf-1943","descriptionSID": "ID_DT_D_DTA_1943","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"159": {"category": "DTC_Misc","index": 159,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_2142","image": "bf-2142","descriptionSID": "ID_DT_D_DTA_2142","startedWith": false,"platforms": [1, 2],"statSID": ""},"160": {"category": "DTC_Misc","index": 160,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BC","image": "bf-bc","descriptionSID": "ID_DT_D_DTA_BC","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"161": {"category": "DTC_Misc","index": 161,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BC2","image": "bf-bc2","descriptionSID": "ID_DT_D_DTA_BC2","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"162": {"category": "DTC_Misc","index": 162,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_BF2","image": "bf2","descriptionSID": "ID_DT_D_DTA_BF2","startedWith": false,"platforms": [1, 2],"statSID": ""},"163": {"category": "DTC_Misc","index": 163,"isAdvanced": true,"nameSID": "ID_DT_N_DTA_P4F","image": "bf-p4f","descriptionSID": "ID_DT_D_DTA_P4F","startedWith": false,"platforms": [1, 2],"statSID": ""},"164": {"category": "DTC_Misc","index": 164,"isAdvanced": true,"nameSID": "ID_DT_N_DTA161_BFVIETNAMVETERAN","image": "bfv","descriptionSID": "ID_DT_D_DTA161_BFVIETNAMVETERAN","startedWith": false,"platforms": [1, 2],"statSID": ""},"165": {"category": "DTC_Misc","index": 165,"isAdvanced": true,"nameSID": "ID_DT_N_DTA156_TOURNAMENTWINNER","image": "tournament1","descriptionSID": "ID_DT_D_DTA156_TOURNAMENTWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"166": {"category": "DTC_Misc","index": 166,"isAdvanced": true,"nameSID": "ID_DT_N_DTA157_TOURNAMENTRUNNERUP","image": "tournament2","descriptionSID": "ID_DT_D_DTA157_TOURNAMENTRUNNERUP","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"167": {"category": "DTC_Misc","index": 167,"isAdvanced": true,"nameSID": "ID_DT_N_DTA158_TOURNAMENT3RDPLACE","image": "tournament3","descriptionSID": "ID_DT_D_DTA158_TOURNAMENT3RDPLACE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"168": {"category": "DTC_Ranks","index": 168,"isAdvanced": true,"nameSID": "ID_DT_N_DTA062_ASSAULTSERVICESTAR5","image": "dta062","descriptionSID": "ID_DT_D_DTA062_ASSAULTSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"169": {"category": "DTC_Ranks","index": 169,"isAdvanced": true,"nameSID": "ID_DT_N_DTA063_ASSAULTSERVICESTAR10","image": "dta063","descriptionSID": "ID_DT_D_DTA063_ASSAULTSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"170": {"category": "DTC_Ranks","index": 170,"isAdvanced": true,"nameSID": "ID_DT_N_DTA064_ASSAULTSERVICESTAR25","image": "dta064","descriptionSID": "ID_DT_D_DTA064_ASSAULTSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"171": {"category": "DTC_Ranks","index": 171,"isAdvanced": true,"nameSID": "ID_DT_N_DTA065_ASSAULTSERVICESTAR50","image": "dta065","descriptionSID": "ID_DT_D_DTA065_ASSAULTSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"172": {"category": "DTC_Ranks","index": 172,"isAdvanced": true,"nameSID": "ID_DT_N_DTA066_ASSAULTSERVICESTAR100","image": "dta066","descriptionSID": "ID_DT_D_DTA066_ASSAULTSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"173": {"category": "DTC_Ranks","index": 173,"isAdvanced": true,"nameSID": "ID_DT_N_DTA067_ENGINEERSERVICESTAR5","image": "dta067","descriptionSID": "ID_DT_D_DTA067_ENGINEERSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"174": {"category": "DTC_Ranks","index": 174,"isAdvanced": true,"nameSID": "ID_DT_N_DTA068_ENGINEERSERVICESTAR10","image": "dta068","descriptionSID": "ID_DT_D_DTA068_ENGINEERSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"175": {"category": "DTC_Ranks","index": 175,"isAdvanced": true,"nameSID": "ID_DT_N_DTA069_ENGINEERSERVICESTAR25","image": "dta069","descriptionSID": "ID_DT_D_DTA069_ENGINEERSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"176": {"category": "DTC_Ranks","index": 176,"isAdvanced": true,"nameSID": "ID_DT_N_DTA070_ENGINEERSERVICESTAR50","image": "dta070","descriptionSID": "ID_DT_D_DTA070_ENGINEERSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"177": {"category": "DTC_Ranks","index": 177,"isAdvanced": true,"nameSID": "ID_DT_N_DTA071_ENGINEERSERVICESTAR100","image": "dta071","descriptionSID": "ID_DT_D_DTA071_ENGINEERSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"178": {"category": "DTC_Ranks","index": 178,"isAdvanced": true,"nameSID": "ID_DT_N_DTA072_SUPPORTSERVICESTAR5","image": "dta072","descriptionSID": "ID_DT_D_DTA072_SUPPORTSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"179": {"category": "DTC_Ranks","index": 179,"isAdvanced": true,"nameSID": "ID_DT_N_DTA073_SUPPORTSERVICESTAR10","image": "dta073","descriptionSID": "ID_DT_D_DTA073_SUPPORTSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"180": {"category": "DTC_Ranks","index": 180,"isAdvanced": true,"nameSID": "ID_DT_N_DTA074_SUPPORTSERVICESTAR25","image": "dta074","descriptionSID": "ID_DT_D_DTA074_SUPPORTSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"181": {"category": "DTC_Ranks","index": 181,"isAdvanced": true,"nameSID": "ID_DT_N_DTA075_SUPPORTSERVICESTAR50","image": "dta075","descriptionSID": "ID_DT_D_DTA075_SUPPORTSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"182": {"category": "DTC_Ranks","index": 182,"isAdvanced": true,"nameSID": "ID_DT_N_DTA076_SUPPORTSERVICESTAR100","image": "dta076","descriptionSID": "ID_DT_D_DTA076_SUPPORTSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"183": {"category": "DTC_Ranks","index": 183,"isAdvanced": true,"nameSID": "ID_DT_N_DTA077_RECONSERVICESTAR5","image": "dta077","descriptionSID": "ID_DT_D_DTA077_RECONSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"184": {"category": "DTC_Ranks","index": 184,"isAdvanced": true,"nameSID": "ID_DT_N_DTA078_RECONSERVICESTAR10","image": "dta078","descriptionSID": "ID_DT_D_DTA078_RECONSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"185": {"category": "DTC_Ranks","index": 185,"isAdvanced": true,"nameSID": "ID_DT_N_DTA079_RECONSERVICESTAR25","image": "dta079","descriptionSID": "ID_DT_D_DTA079_RECONSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"186": {"category": "DTC_Ranks","index": 186,"isAdvanced": true,"nameSID": "ID_DT_N_DTA080_RECONSERVICESTAR50","image": "dta080","descriptionSID": "ID_DT_D_DTA080_RECONSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"187": {"category": "DTC_Ranks","index": 187,"isAdvanced": true,"nameSID": "ID_DT_N_DTA081_RECONSERVICESTAR100","image": "dta081","descriptionSID": "ID_DT_D_DTA081_RECONSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"188": {"category": "DTC_ServiceStars","index": 188,"isAdvanced": true,"nameSID": "ID_DT_N_TANKSERVICESTAR5","image": "tankservicestar5","descriptionSID": "ID_DT_D_TANKSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"189": {"category": "DTC_ServiceStars","index": 189,"isAdvanced": true,"nameSID": "ID_DT_N_TANKSERVICESTAR10","image": "tankservicestar10","descriptionSID": "ID_DT_D_TANKSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"190": {"category": "DTC_ServiceStars","index": 190,"isAdvanced": true,"nameSID": "ID_DT_N_TANKSERVICESTAR25","image": "tankservicestar25","descriptionSID": "ID_DT_D_TANKSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"191": {"category": "DTC_ServiceStars","index": 191,"isAdvanced": true,"nameSID": "ID_DT_N_TANKSERVICESTAR50","image": "tankservicestar50","descriptionSID": "ID_DT_D_TANKSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"192": {"category": "DTC_ServiceStars","index": 192,"isAdvanced": true,"nameSID": "ID_DT_N_TANKSERVICESTAR100","image": "tankservicestar100","descriptionSID": "ID_DT_D_TANKSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"193": {"category": "DTC_ServiceStars","index": 193,"isAdvanced": true,"nameSID": "ID_DT_N_IFVSERVICESTAR5","image": "ifvservicestar5","descriptionSID": "ID_DT_D_IFVSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"194": {"category": "DTC_ServiceStars","index": 194,"isAdvanced": true,"nameSID": "ID_DT_N_IFVSERVICESTAR10","image": "ifvservicestar10","descriptionSID": "ID_DT_D_IFVSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"195": {"category": "DTC_ServiceStars","index": 195,"isAdvanced": true,"nameSID": "ID_DT_N_IFVSERVICESTAR25","image": "ifvservicestar25","descriptionSID": "ID_DT_D_IFVSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"196": {"category": "DTC_ServiceStars","index": 196,"isAdvanced": true,"nameSID": "ID_DT_N_IFVSERVICESTAR50","image": "ifvservicestar50","descriptionSID": "ID_DT_D_IFVSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"197": {"category": "DTC_ServiceStars","index": 197,"isAdvanced": true,"nameSID": "ID_DT_N_IFVSERVICESTAR100","image": "ifvservicestar100","descriptionSID": "ID_DT_D_IFVSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"198": {"category": "DTC_ServiceStars","index": 198,"isAdvanced": true,"nameSID": "ID_DT_N_AASERVICESTAR5","image": "aaservicestar5","descriptionSID": "ID_DT_D_AASERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"199": {"category": "DTC_ServiceStars","index": 199,"isAdvanced": true,"nameSID": "ID_DT_N_AASERVICESTAR10","image": "aaservicestar10","descriptionSID": "ID_DT_D_AASERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"200": {"category": "DTC_ServiceStars","index": 200,"isAdvanced": true,"nameSID": "ID_DT_N_AASERVICESTAR25","image": "aaservicestar25","descriptionSID": "ID_DT_D_AASERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"201": {"category": "DTC_ServiceStars","index": 201,"isAdvanced": true,"nameSID": "ID_DT_N_AASERVICESTAR50","image": "aaservicestar50","descriptionSID": "ID_DT_D_AASERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"202": {"category": "DTC_ServiceStars","index": 202,"isAdvanced": true,"nameSID": "ID_DT_N_AASERVICESTAR100","image": "aaservicestar100","descriptionSID": "ID_DT_D_AASERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"203": {"category": "DTC_ServiceStars","index": 203,"isAdvanced": true,"nameSID": "ID_DT_N_HELISERVICESTAR5","image": "aheliservicestar5","descriptionSID": "ID_DT_D_HELISERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"204": {"category": "DTC_ServiceStars","index": 204,"isAdvanced": true,"nameSID": "ID_DT_N_HELISERVICESTAR10","image": "aheliservicestar10","descriptionSID": "ID_DT_D_HELISERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"205": {"category": "DTC_Ranks","index": 205,"isAdvanced": true,"nameSID": "ID_DT_N_HELISERVICESTAR25","image": "aheliservicestar25","descriptionSID": "ID_DT_D_HELISERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"206": {"category": "DTC_ServiceStars","index": 206,"isAdvanced": true,"nameSID": "ID_DT_N_HELISERVICESTAR50","image": "aheliservicestar50","descriptionSID": "ID_DT_D_HELISERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"207": {"category": "DTC_ServiceStars","index": 207,"isAdvanced": true,"nameSID": "ID_DT_N_HELISERVICESTAR100","image": "aheliservicestar100","descriptionSID": "ID_DT_D_HELISERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"208": {"category": "DTC_ServiceStars","index": 208,"isAdvanced": true,"nameSID": "ID_DT_N_SCOUTSERVICESTAR5","image": "scoutheliservicestar5","descriptionSID": "ID_DT_D_SCOUTSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"209": {"category": "DTC_ServiceStars","index": 209,"isAdvanced": true,"nameSID": "ID_DT_N_SCOUTSERVICESTAR10","image": "scoutheliservicestar10","descriptionSID": "ID_DT_D_SCOUTSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"210": {"category": "DTC_ServiceStars","index": 210,"isAdvanced": true,"nameSID": "ID_DT_N_SCOUTSERVICESTAR25","image": "scoutheliservicestar25","descriptionSID": "ID_DT_D_SCOUTSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"211": {"category": "DTC_ServiceStars","index": 211,"isAdvanced": true,"nameSID": "ID_DT_N_SCOUTSERVICESTAR50","image": "scoutheliservicestar50","descriptionSID": "ID_DT_D_SCOUTSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"212": {"category": "DTC_ServiceStars","index": 212,"isAdvanced": true,"nameSID": "ID_DT_N_SCOUTSERVICESTAR100","image": "scoutheliservicestar100","descriptionSID": "ID_DT_D_SCOUTSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"213": {"category": "DTC_ServiceStars","index": 213,"isAdvanced": true,"nameSID": "ID_DT_N_JETSERVICESTAR5","image": "jetservicestar5","descriptionSID": "ID_DT_D_JETSERVICESTAR5","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"214": {"category": "DTC_ServiceStars","index": 214,"isAdvanced": true,"nameSID": "ID_DT_N_JETSERVICESTAR10","image": "jetservicestar10","descriptionSID": "ID_DT_D_JETSERVICESTAR10","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"215": {"category": "DTC_ServiceStars","index": 215,"isAdvanced": true,"nameSID": "ID_DT_N_JETSERVICESTAR25","image": "jetservicestar25","descriptionSID": "ID_DT_D_JETSERVICESTAR25","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"216": {"category": "DTC_ServiceStars","index": 216,"isAdvanced": true,"nameSID": "ID_DT_N_JETSERVICESTAR50","image": "jetservicestar50","descriptionSID": "ID_DT_D_JETSERVICESTAR50","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"217": {"category": "DTC_ServiceStars","index": 217,"isAdvanced": true,"nameSID": "ID_DT_N_JETSERVICESTAR100","image": "jetservicestar100","descriptionSID": "ID_DT_D_JETSERVICESTAR100","startedWith": false,"platforms": [1, 4, 2],"statSID": ""}},"basic": {"0": {"category": "DTC_Misc","index": 0,"isAdvanced": false,"nameSID": "ID_DT_N_DTB_DEFAULT","image": "defaulttag_left","descriptionSID": "ID_DT_D_DTB_DEFAULT","startedWith": true,"platforms": [1, 4, 2],"statSID": ""},"1": {"category": "DTC_Ranks","index": 1,"isAdvanced": false,"nameSID": "ID_DT_N_DTB041_PRIVATEFIRSTCLASSI","image": "dtb041","descriptionSID": "ID_DT_D_DTB041_PRIVATEFIRSTCLASSI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"2": {"category": "DTC_Ranks","index": 2,"isAdvanced": false,"nameSID": "ID_DT_N_DTB042_PRIVATEFIRSTCLASSII","image": "dtb042","descriptionSID": "ID_DT_D_DTB042_PRIVATEFIRSTCLASSII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"3": {"category": "DTC_Ranks","index": 3,"isAdvanced": false,"nameSID": "ID_DT_N_DTB043_PRIVATEFIRSTCLASSIII","image": "dtb043","descriptionSID": "ID_DT_D_DTB043_PRIVATEFIRSTCLASSIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"4": {"category": "DTC_Ranks","index": 4,"isAdvanced": false,"nameSID": "ID_DT_N_DTB044_PRIVATEFIRSTCLASSIV","image": "dtb044","descriptionSID": "ID_DT_D_DTB044_PRIVATEFIRSTCLASSIV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"5": {"category": "DTC_Ranks","index": 5,"isAdvanced": false,"nameSID": "ID_DT_N_DTB045_LANCECORPORALI","image": "dtb045","descriptionSID": "ID_DT_D_DTB045_LANCECORPORALI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"6": {"category": "DTC_Ranks","index": 6,"isAdvanced": false,"nameSID": "ID_DT_N_DTB046_LANCECORPORALII","image": "dtb046","descriptionSID": "ID_DT_D_DTB046_LANCECORPORALII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"7": {"category": "DTC_Ranks","index": 7,"isAdvanced": false,"nameSID": "ID_DT_N_DTB047_LANCECORPORALIII","image": "dtb047","descriptionSID": "ID_DT_D_DTB047_LANCECORPORALIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"8": {"category": "DTC_Ranks","index": 8,"isAdvanced": false,"nameSID": "ID_DT_N_DTB048_LANCECORPORALIV","image": "dtb048","descriptionSID": "ID_DT_D_DTB048_LANCECORPORALIV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"9": {"category": "DTC_Ranks","index": 9,"isAdvanced": false,"nameSID": "ID_DT_N_DTB049_CORPORALI","image": "dtb049","descriptionSID": "ID_DT_D_DTB049_CORPORALI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"10": {"category": "DTC_Ranks","index": 10,"isAdvanced": false,"nameSID": "ID_DT_N_DTB050_CORPORALII","image": "dtb050","descriptionSID": "ID_DT_D_DTB050_CORPORALII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"11": {"category": "DTC_Ranks","index": 11,"isAdvanced": false,"nameSID": "ID_DT_N_DTB051_CORPORALIII","image": "dtb051","descriptionSID": "ID_DT_D_DTB051_CORPORALIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"12": {"category": "DTC_Ranks","index": 12,"isAdvanced": false,"nameSID": "ID_DT_N_DTB052_CORPORALIV","image": "dtb052","descriptionSID": "ID_DT_D_DTB052_CORPORALIV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"13": {"category": "DTC_Ranks","index": 13,"isAdvanced": false,"nameSID": "ID_DT_N_DTB053_SERGEANTI","image": "dtb053","descriptionSID": "ID_DT_D_DTB053_SERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"14": {"category": "DTC_Ranks","index": 14,"isAdvanced": false,"nameSID": "ID_DT_N_DTB054_SERGEANTII","image": "dtb054","descriptionSID": "ID_DT_D_DTB054_SERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"15": {"category": "DTC_Ranks","index": 15,"isAdvanced": false,"nameSID": "ID_DT_N_DTB055_SERGEANTIII","image": "dtb055","descriptionSID": "ID_DT_D_DTB055_SERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"16": {"category": "DTC_Ranks","index": 16,"isAdvanced": false,"nameSID": "ID_DT_N_DTB056_SERGEANTIV","image": "dtb056","descriptionSID": "ID_DT_D_DTB056_SERGEANTIV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"17": {"category": "DTC_Ranks","index": 17,"isAdvanced": false,"nameSID": "ID_DT_N_DTB057_STAFFSERGEANTI","image": "dtb057","descriptionSID": "ID_DT_D_DTB057_STAFFSERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"18": {"category": "DTC_Ranks","index": 18,"isAdvanced": false,"nameSID": "ID_DT_N_DTB058_STAFFSERGEANTII","image": "dtb058","descriptionSID": "ID_DT_D_DTB058_STAFFSERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"19": {"category": "DTC_Ranks","index": 19,"isAdvanced": false,"nameSID": "ID_DT_N_DTB059_STAFFSERGEANTIII","image": "dtb059","descriptionSID": "ID_DT_D_DTB059_STAFFSERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"20": {"category": "DTC_Ranks","index": 20,"isAdvanced": false,"nameSID": "ID_DT_N_DTB060_GUNNERYSERGEANTI","image": "dtb060","descriptionSID": "ID_DT_D_DTB060_GUNNERYSERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"21": {"category": "DTC_Ranks","index": 21,"isAdvanced": false,"nameSID": "ID_DT_N_DTB061_GUNNERYSERGEANTII","image": "dtb061","descriptionSID": "ID_DT_D_DTB061_GUNNERYSERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"22": {"category": "DTC_Ranks","index": 22,"isAdvanced": false,"nameSID": "ID_DT_N_DTB062_GUNNERYSERGEANTIII","image": "dtb062","descriptionSID": "ID_DT_D_DTB062_GUNNERYSERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"23": {"category": "DTC_Ranks","index": 23,"isAdvanced": false,"nameSID": "ID_DT_N_DTB063_MASTERSERGEANTI","image": "dtb063","descriptionSID": "ID_DT_D_DTB063_MASTERSERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"24": {"category": "DTC_Ranks","index": 24,"isAdvanced": false,"nameSID": "ID_DT_N_DTB064_MASTERSERGEANTII","image": "dtb064","descriptionSID": "ID_DT_D_DTB064_MASTERSERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"25": {"category": "DTC_Ranks","index": 25,"isAdvanced": false,"nameSID": "ID_DT_N_DTB065_MASTERSERGEANTIII","image": "dtb065","descriptionSID": "ID_DT_D_DTB065_MASTERSERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"26": {"category": "DTC_Ranks","index": 26,"isAdvanced": false,"nameSID": "ID_DT_N_DTB066_FIRSTSERGEANTI","image": "dtb066","descriptionSID": "ID_DT_D_DTB066_FIRSTSERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"27": {"category": "DTC_Ranks","index": 27,"isAdvanced": false,"nameSID": "ID_DT_N_DTB067_FIRSTSERGEANTII","image": "dtb067","descriptionSID": "ID_DT_D_DTB067_FIRSTSERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"28": {"category": "DTC_Ranks","index": 28,"isAdvanced": false,"nameSID": "ID_DT_N_DTB068_FIRSTSERGEANTIII","image": "dtb068","descriptionSID": "ID_DT_D_DTB068_FIRSTSERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"29": {"category": "DTC_Ranks","index": 29,"isAdvanced": false,"nameSID": "ID_DT_N_DTB069_MASTERGUNNERYSERGEANTI","image": "dtb069","descriptionSID": "ID_DT_D_DTB069_MASTERGUNNERYSERGEANTI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"30": {"category": "DTC_Ranks","index": 30,"isAdvanced": false,"nameSID": "ID_DT_N_DTB070_MASTERGUNNERYSERGEANTII","image": "dtb070","descriptionSID": "ID_DT_D_DTB070_MASTERGUNNERYSERGEANTII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"31": {"category": "DTC_Ranks","index": 31,"isAdvanced": false,"nameSID": "ID_DT_N_DTB071_MASTERGUNNERYSERGEANTIII","image": "dtb071","descriptionSID": "ID_DT_D_DTB071_MASTERGUNNERYSERGEANTIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"32": {"category": "DTC_Ranks","index": 32,"isAdvanced": false,"nameSID": "ID_DT_N_DTB072_SERGEANTMAJORI","image": "dtb072","descriptionSID": "ID_DT_D_DTB072_SERGEANTMAJORI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"33": {"category": "DTC_Ranks","index": 33,"isAdvanced": false,"nameSID": "ID_DT_N_DTB073_SERGEANTMAJORII","image": "dtb073","descriptionSID": "ID_DT_D_DTB073_SERGEANTMAJORII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"34": {"category": "DTC_Ranks","index": 34,"isAdvanced": false,"nameSID": "ID_DT_N_DTB074_SERGEANTMAJORIII","image": "dtb074","descriptionSID": "ID_DT_D_DTB074_SERGEANTMAJORIII","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"35": {"category": "DTC_Ranks","index": 35,"isAdvanced": false,"nameSID": "ID_DT_N_DTB075_WARRANTOFFICERONE","image": "dtb075","descriptionSID": "ID_DT_D_DTB075_WARRANTOFFICERONE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"36": {"category": "DTC_Ranks","index": 36,"isAdvanced": false,"nameSID": "ID_DT_N_DTB076_CHIEFWARRANTOFFICERTWO","image": "dtb076","descriptionSID": "ID_DT_D_DTB076_CHIEFWARRANTOFFICERTWO","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"37": {"category": "DTC_Ranks","index": 37,"isAdvanced": false,"nameSID": "ID_DT_N_DTB077_CHIEFWARRANTOFFICERTHREE","image": "dtb077","descriptionSID": "ID_DT_D_DTB077_CHIEFWARRANTOFFICERTHREE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"38": {"category": "DTC_Ranks","index": 38,"isAdvanced": false,"nameSID": "ID_DT_N_DTB078_CHIEFWARRANTOFFICERFOUR","image": "dtb078","descriptionSID": "ID_DT_D_DTB078_CHIEFWARRANTOFFICERFOUR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"39": {"category": "DTC_Ranks","index": 39,"isAdvanced": false,"nameSID": "ID_DT_N_DTB079_CHIEFWARRANTOFFICERFIVE","image": "dtb079","descriptionSID": "ID_DT_D_DTB079_CHIEFWARRANTOFFICERFIVE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"40": {"category": "DTC_Ranks","index": 40,"isAdvanced": false,"nameSID": "ID_DT_N_DTB080_SECONDLIEUTENANT","image": "dtb080","descriptionSID": "ID_DT_D_DTB080_SECONDLIEUTENANT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"41": {"category": "DTC_Ranks","index": 41,"isAdvanced": false,"nameSID": "ID_DT_N_DTB081_FIRSTLIEUTENANT","image": "dtb081","descriptionSID": "ID_DT_D_DTB081_FIRSTLIEUTENANT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"42": {"category": "DTC_Ranks","index": 42,"isAdvanced": false,"nameSID": "ID_DT_N_DTB082_CAPTAIN","image": "dtb082","descriptionSID": "ID_DT_D_DTB082_CAPTAIN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"43": {"category": "DTC_Ranks","index": 43,"isAdvanced": false,"nameSID": "ID_DT_N_DTB083_MAJOR","image": "dtb083","descriptionSID": "ID_DT_D_DTB083_MAJOR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"44": {"category": "DTC_Ranks","index": 44,"isAdvanced": false,"nameSID": "ID_DT_N_DTB084_LIEUTENANTCOLONEL","image": "dtb084","descriptionSID": "ID_DT_D_DTB084_LIEUTENANTCOLONEL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"45": {"category": "DTC_Ribbons","index": 45,"isAdvanced": false,"nameSID": "ID_DT_N_DTB001_ASSAULTRIFLE","image": "dtb001","descriptionSID": "ID_DT_D_DTB001_ASSAULTRIFLE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"46": {"category": "DTC_Ribbons","index": 46,"isAdvanced": false,"nameSID": "ID_DT_N_DTB002_CARBINE","image": "dtb002","descriptionSID": "ID_DT_D_DTB002_CARBINE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"47": {"category": "DTC_Ribbons","index": 47,"isAdvanced": false,"nameSID": "ID_DT_N_DTB003_LIGHTMACHINEGUN","image": "dtb003","descriptionSID": "ID_DT_D_DTB003_LIGHTMACHINEGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"48": {"category": "DTC_Ribbons","index": 48,"isAdvanced": false,"nameSID": "ID_DT_N_DTB004_SNIPERRIFLE","image": "dtb004","descriptionSID": "ID_DT_D_DTB004_SNIPERRIFLE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"49": {"category": "DTC_Ribbons","index": 49,"isAdvanced": false,"nameSID": "ID_DT_N_DTB006_SHOTGUN","image": "dtb006","descriptionSID": "ID_DT_D_DTB006_SHOTGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"50": {"category": "DTC_Ribbons","index": 50,"isAdvanced": false,"nameSID": "ID_DT_N_DTB007_PERSONALDEFENSE","image": "dtb007","descriptionSID": "ID_DT_D_DTB007_PERSONALDEFENSE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"51": {"category": "DTC_Ribbons","index": 51,"isAdvanced": false,"nameSID": "ID_DT_N_DTB005_HANDGUN","image": "dtb005","descriptionSID": "ID_DT_D_DTB005_HANDGUN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"52": {"category": "DTC_Ribbons","index": 52,"isAdvanced": false,"nameSID": "ID_DT_N_DTB008_MELEE","image": "dtb008","descriptionSID": "ID_DT_D_DTB008_MELEE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"53": {"category": "DTC_Ribbons","index": 53,"isAdvanced": false,"nameSID": "ID_DT_N_DTB037_RESUPPLY","image": "dtb039","descriptionSID": "ID_DT_D_DTB037_RESUPPLY","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"54": {"category": "DTC_Ribbons","index": 54,"isAdvanced": false,"nameSID": "ID_DT_N_DTB038_MAINTENANCE","image": "dtb037","descriptionSID": "ID_DT_D_DTB038_MAINTENANCE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"55": {"category": "DTC_Ribbons","index": 55,"isAdvanced": false,"nameSID": "ID_DT_N_DTB039_MEDICAL","image": "dtb038","descriptionSID": "ID_DT_D_DTB039_MEDICAL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"56": {"category": "DTC_Ribbons","index": 56,"isAdvanced": false,"nameSID": "ID_DT_N_DTB040_SURVEILANCE","image": "dtb040","descriptionSID": "ID_DT_D_DTB040_SURVEILANCE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"57": {"category": "DTC_Ribbons","index": 57,"isAdvanced": false,"nameSID": "ID_DT_N_DTB019_TRANSPORTWARFARE","image": "dtb019","descriptionSID": "ID_DT_D_DTB019_TRANSPORTWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"58": {"category": "DTC_Ribbons","index": 58,"isAdvanced": false,"nameSID": "ID_DT_N_DTB020_ARMOREDWARFARE","image": "dtb020","descriptionSID": "ID_DT_D_DTB020_ARMOREDWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"59": {"category": "DTC_Ribbons","index": 59,"isAdvanced": false,"nameSID": "ID_DT_N_DTB022_AIRWARFARE","image": "dtb022","descriptionSID": "ID_DT_D_DTB022_AIRWARFARE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"60": {"category": "DTC_Ribbons","index": 60,"isAdvanced": false,"nameSID": "ID_DT_N_DTB021_STATIONARY","image": "dtb021","descriptionSID": "ID_DT_D_DTB021_STATIONARY","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"61": {"category": "DTC_Ribbons","index": 61,"isAdvanced": false,"nameSID": "ID_DT_N_DTB009_ANTIVEHICLE","image": "dtb009","descriptionSID": "ID_DT_D_DTB009_ANTIVEHICLE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"62": {"category": "DTC_Ribbons","index": 62,"isAdvanced": false,"nameSID": "ID_DT_N_DTB010_MARKSMAN","image": "dtb010","descriptionSID": "ID_DT_D_DTB010_MARKSMAN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"63": {"category": "DTC_Ribbons","index": 63,"isAdvanced": false,"nameSID": "ID_DT_N_DTB011_AVENGER","image": "dtb011","descriptionSID": "ID_DT_D_DTB011_AVENGER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"64": {"category": "DTC_Ribbons","index": 64,"isAdvanced": false,"nameSID": "ID_DT_N_DTB012_SAVIOR","image": "dtb012","descriptionSID": "ID_DT_D_DTB012_SAVIOR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"65": {"category": "DTC_Ribbons","index": 65,"isAdvanced": false,"nameSID": "ID_DT_N_DTB013_NEMESIS","image": "dtb013","descriptionSID": "ID_DT_D_DTB013_NEMESIS","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"66": {"category": "DTC_Ribbons","index": 66,"isAdvanced": false,"nameSID": "ID_DT_N_DTB014_ACCURACY","image": "dtb014","descriptionSID": "ID_DT_D_DTB014_ACCURACY","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"67": {"category": "DTC_Ribbons","index": 67,"isAdvanced": false,"nameSID": "ID_DT_N_DTB015_MVP","image": "dtb015","descriptionSID": "ID_DT_D_DTB015_MVP","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"68": {"category": "DTC_Ribbons","index": 68,"isAdvanced": false,"nameSID": "ID_DT_N_DTB016_2NDMVP","image": "dtb016","descriptionSID": "ID_DT_D_DTB016_2NDMVP","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"69": {"category": "DTC_Ribbons","index": 69,"isAdvanced": false,"nameSID": "ID_DT_N_DTB017_3RDMVP","image": "dtb017","descriptionSID": "ID_DT_D_DTB017_3RDMVP","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"70": {"category": "DTC_Ribbons","index": 70,"isAdvanced": false,"nameSID": "ID_DT_N_DTB018_ACESQUAD","image": "dtb018","descriptionSID": "ID_DT_D_DTB018_ACESQUAD","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"71": {"category": "DTC_Ribbons","index": 71,"isAdvanced": false,"nameSID": "ID_DT_N_DTB030_RUSH","image": "dtb030","descriptionSID": "ID_DT_D_DTB030_RUSH","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"72": {"category": "DTC_Ribbons","index": 72,"isAdvanced": false,"nameSID": "ID_DT_N_DTB025_RUSHWINNER","image": "dtb025","descriptionSID": "ID_DT_D_DTB025_RUSHWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"73": {"category": "DTC_Ribbons","index": 73,"isAdvanced": false,"nameSID": "ID_DT_N_DTB023_M-COMATTACKER","image": "dtb023","descriptionSID": "ID_DT_D_DTB023_M-COMATTACKER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"74": {"category": "DTC_Ribbons","index": 74,"isAdvanced": false,"nameSID": "ID_DT_N_DTB024_M-COMDEFENDER","image": "dtb024","descriptionSID": "ID_DT_D_DTB024_M-COMDEFENDER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"75": {"category": "DTC_Ribbons","index": 75,"isAdvanced": false,"nameSID": "ID_DT_N_DTB026_CONQUESTWINNER","image": "dtb026","descriptionSID": "ID_DT_D_DTB026_CONQUESTWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"76": {"category": "DTC_Ribbons","index": 76,"isAdvanced": false,"nameSID": "ID_DT_N_DTB031_CONQUEST","image": "dtb031","descriptionSID": "ID_DT_D_DTB031_CONQUEST","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"77": {"category": "DTC_Ribbons","index": 77,"isAdvanced": false,"nameSID": "ID_DT_N_DTB035_FLAGATTACKER","image": "dtb035","descriptionSID": "ID_DT_D_DTB035_FLAGATTACKER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"78": {"category": "DTC_Ribbons","index": 78,"isAdvanced": false,"nameSID": "ID_DT_N_DTB036_FLAGDEFENDER","image": "dtb036","descriptionSID": "ID_DT_D_DTB036_FLAGDEFENDER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"79": {"category": "DTC_Ribbons","index": 79,"isAdvanced": false,"nameSID": "ID_DT_N_DTB032_TEAMDEATHMATCH","image": "dtb032","descriptionSID": "ID_DT_D_DTB032_TEAMDEATHMATCH","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"80": {"category": "DTC_Ribbons","index": 80,"isAdvanced": false,"nameSID": "ID_DT_N_DTB027_TEAMDEATHMATCHWINNER","image": "dtb027","descriptionSID": "ID_DT_D_DTB027_TEAMDEATHMATCHWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"81": {"category": "DTC_Ribbons","index": 81,"isAdvanced": false,"nameSID": "ID_DT_N_DTB033_SQUADRUSH","image": "dtb033","descriptionSID": "ID_DT_D_DTB033_SQUADRUSH","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"82": {"category": "DTC_Ribbons","index": 82,"isAdvanced": false,"nameSID": "ID_DT_N_DTB028_SQUADRUSHWINNER","image": "dtb028","descriptionSID": "ID_DT_D_DTB028_SQUADRUSHWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"83": {"category": "DTC_Ribbons","index": 83,"isAdvanced": false,"nameSID": "ID_DT_N_DTB034_SQUADDEATHMATCH","image": "dtb034","descriptionSID": "ID_DT_D_DTB034_SQUADDEATHMATCH","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"84": {"category": "DTC_Ribbons","index": 84,"isAdvanced": false,"nameSID": "ID_DT_N_DTB029_SQUADDEATHMATCHWINNER","image": "dtb029","descriptionSID": "ID_DT_D_DTB029_SQUADDEATHMATCHWINNER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"85": {"category": "DTC_ServiceStars","index": 85,"isAdvanced": false,"nameSID": "ID_DT_N_DTB085_ASSAULT","image": "dtb085","descriptionSID": "ID_DT_D_DTB085_ASSAULT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"86": {"category": "DTC_ServiceStars","index": 86,"isAdvanced": false,"nameSID": "ID_DT_N_DTB086_ENGINEER","image": "dtb086","descriptionSID": "ID_DT_D_DTB086_ENGINEER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"87": {"category": "DTC_ServiceStars","index": 87,"isAdvanced": false,"nameSID": "ID_DT_N_DTB087_SUPPORT","image": "dtb087","descriptionSID": "ID_DT_D_DTB087_SUPPORT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"88": {"category": "DTC_ServiceStars","index": 88,"isAdvanced": false,"nameSID": "ID_DT_N_DTB088_RECON","image": "dtb088","descriptionSID": "ID_DT_D_DTB088_RECON","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"89": {"category": "DTC_ServiceStars","index": 89,"isAdvanced": false,"nameSID": "ID_DT_N_DTB090_CAMPAIGN","image": "dtb090","descriptionSID": "ID_DT_D_DTB090_CAMPAIGN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"90": {"category": "DTC_ServiceStars","index": 90,"isAdvanced": false,"nameSID": "ID_DT_N_DTB091_CO-OP","image": "dtb091","descriptionSID": "ID_DT_D_DTB091_CO-OP","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"91": {"category": "DTC_Weapons","index": 91,"isAdvanced": false,"nameSID": "ID_DT_N_DTB092_M16A4","image": "dtb092","descriptionSID": "ID_DT_D_DTB092_M16A4","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"92": {"category": "DTC_Weapons","index": 92,"isAdvanced": false,"nameSID": "ID_DT_N_DTB093_AK-74M","image": "dtb093","descriptionSID": "ID_DT_D_DTB093_AK-74M","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"93": {"category": "DTC_Weapons","index": 93,"isAdvanced": false,"nameSID": "ID_DT_N_DTB098_M416","image": "dtb098","descriptionSID": "ID_DT_D_DTB098_M416","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"94": {"category": "DTC_Weapons","index": 94,"isAdvanced": false,"nameSID": "ID_DT_N_DTB095_AEK971","image": "dtb095","descriptionSID": "ID_DT_D_DTB095_AEK971","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"95": {"category": "DTC_Weapons","index": 95,"isAdvanced": false,"nameSID": "ID_DT_N_DTB100_F2000","image": "dtb100","descriptionSID": "ID_DT_D_DTB100_F2000","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"96": {"category": "DTC_Weapons","index": 96,"isAdvanced": false,"nameSID": "ID_DT_N_DTB096_AN94ABAKAN","image": "dtb096","descriptionSID": "ID_DT_D_DTB096_AN94ABAKAN","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"97": {"category": "DTC_Weapons","index": 97,"isAdvanced": false,"nameSID": "ID_DT_N_DTB097_KH2000","image": "dtb097","descriptionSID": "ID_DT_D_DTB097_KH2000","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"98": {"category": "DTC_Weapons","index": 98,"isAdvanced": false,"nameSID": "ID_DT_N_DTB101_G3","image": "dtb101","descriptionSID": "ID_DT_D_DTB101_G3","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"99": {"category": "DTC_Weapons","index": 99,"isAdvanced": false,"nameSID": "ID_DT_N_DTB094_40MMGL","image": "dtb094","descriptionSID": "ID_DT_D_DTB094_40MMGL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"100": {"category": "DTC_Weapons","index": 100,"isAdvanced": false,"nameSID": "ID_DT_N_DTB102_M4A1","image": "dtb102","descriptionSID": "ID_DT_D_DTB102_M4A1","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"101": {"category": "DTC_Weapons","index": 101,"isAdvanced": false,"nameSID": "ID_DT_N_DTB103_AKS74U","image": "dtb103","descriptionSID": "ID_DT_D_DTB103_AKS74U","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"102": {"category": "DTC_Weapons","index": 102,"isAdvanced": false,"nameSID": "ID_DT_N_DTB107_SCAR-HCQB","image": "dtb107","descriptionSID": "ID_DT_D_DTB107_SCAR-HCQB","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"103": {"category": "DTC_Weapons","index": 103,"isAdvanced": false,"nameSID": "ID_DT_N_DTB106_G36C","image": "dtb106","descriptionSID": "ID_DT_D_DTB106_G36C","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"104": {"category": "DTC_Weapons","index": 104,"isAdvanced": false,"nameSID": "ID_DT_N_DTB112_SG553","image": "dtb112","descriptionSID": "ID_DT_D_DTB112_SG553","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"105": {"category": "DTC_Weapons","index": 105,"isAdvanced": false,"nameSID": "ID_DT_N_DTB104_MK153SMAW","image": "dtb104","descriptionSID": "ID_DT_D_DTB104_MK153SMAW","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"106": {"category": "DTC_Weapons","index": 106,"isAdvanced": false,"nameSID": "ID_DT_N_DTB105_RPG-7AT","image": "dtb105","descriptionSID": "ID_DT_D_DTB105_RPG-7AT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"107": {"category": "DTC_Weapons","index": 107,"isAdvanced": false,"nameSID": "ID_DT_N_DTB109_FIM-92STINGERAA","image": "dtb109","descriptionSID": "ID_DT_D_DTB109_FIM-92STINGERAA","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"108": {"category": "DTC_Weapons","index": 108,"isAdvanced": false,"nameSID": "ID_DT_N_DTB110_SA18IGLAAA","image": "dtb110","descriptionSID": "ID_DT_D_DTB110_SA18IGLAAA","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"109": {"category": "DTC_Weapons","index": 109,"isAdvanced": false,"nameSID": "ID_DT_N_DTB108_FGM-148JAV","image": "dtb108","descriptionSID": "ID_DT_D_DTB108_FGM-148JAV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"110": {"category": "DTC_Weapons","index": 110,"isAdvanced": false,"nameSID": "ID_DT_N_DTB111_ATMINES","image": "dtb111","descriptionSID": "ID_DT_D_DTB111_ATMINES","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"111": {"category": "DTC_Weapons","index": 111,"isAdvanced": false,"nameSID": "ID_DT_N_DTB113_M27LMG","image": "dtb113","descriptionSID": "ID_DT_D_DTB113_M27LMG","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"112": {"category": "DTC_Weapons","index": 112,"isAdvanced": false,"nameSID": "ID_DT_N_DTB114_RPK-74M","image": "dtb114","descriptionSID": "ID_DT_D_DTB114_RPK-74M","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"113": {"category": "DTC_Weapons","index": 113,"isAdvanced": false,"nameSID": "ID_DT_N_DTB116_M249SAW","image": "dtb116","descriptionSID": "ID_DT_D_DTB116_M249SAW","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"114": {"category": "DTC_Weapons","index": 114,"isAdvanced": false,"nameSID": "ID_DT_N_DTB118_PECHENEG","image": "dtb118","descriptionSID": "ID_DT_D_DTB118_PECHENEG","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"115": {"category": "DTC_Weapons","index": 115,"isAdvanced": false,"nameSID": "ID_DT_N_DTB115_M240LMG","image": "dtb115","descriptionSID": "ID_DT_D_DTB115_M240LMG","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"116": {"category": "DTC_Weapons","index": 116,"isAdvanced": false,"nameSID": "ID_DT_N_DTB117_M60E4","image": "dtb117","descriptionSID": "ID_DT_D_DTB117_M60E4","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"117": {"category": "DTC_Weapons","index": 117,"isAdvanced": false,"nameSID": "ID_DT_N_DTB119_TYPE88LMG","image": "dtb119","descriptionSID": "ID_DT_D_DTB119_TYPE88LMG","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"118": {"category": "DTC_Weapons","index": 118,"isAdvanced": false,"nameSID": "ID_DT_N_DTB127_C4EXPL","image": "dtb127","descriptionSID": "ID_DT_D_DTB127_C4EXPL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"119": {"category": "DTC_Weapons","index": 119,"isAdvanced": false,"nameSID": "ID_DT_N_DTB129_CLAYMORE","image": "dtb129","descriptionSID": "ID_DT_D_DTB129_CLAYMORE","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"120": {"category": "DTC_Weapons","index": 120,"isAdvanced": false,"nameSID": "ID_DT_N_DTB099_60MMMORTAR","image": "dtb099","descriptionSID": "ID_DT_D_DTB099_60MMMORTAR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"121": {"category": "DTC_Weapons","index": 121,"isAdvanced": false,"nameSID": "ID_DT_N_DTB120_MK11SNIPER","image": "dtb120","descriptionSID": "ID_DT_D_DTB120_MK11SNIPER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"122": {"category": "DTC_Weapons","index": 122,"isAdvanced": false,"nameSID": "ID_DT_N_DTB121_SVDDRAGUNOV","image": "dtb121","descriptionSID": "ID_DT_D_DTB121_SVDDRAGUNOV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"123": {"category": "DTC_Weapons","index": 123,"isAdvanced": false,"nameSID": "ID_DT_N_DTB123_SV98","image": "dtb123","descriptionSID": "ID_DT_D_DTB123_SV98","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"124": {"category": "DTC_Weapons","index": 124,"isAdvanced": false,"nameSID": "ID_DT_N_DTB122_SKSSNIPER","image": "dtb122","descriptionSID": "ID_DT_D_DTB122_SKSSNIPER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"125": {"category": "DTC_Weapons","index": 125,"isAdvanced": false,"nameSID": "ID_DT_N_DTB125_M40SNIPER","image": "dtb125","descriptionSID": "ID_DT_D_DTB125_M40SNIPER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"126": {"category": "DTC_Weapons","index": 126,"isAdvanced": false,"nameSID": "ID_DT_N_DTB124_MODEL988","image": "dtb124","descriptionSID": "ID_DT_D_DTB124_MODEL988","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"127": {"category": "DTC_Weapons","index": 127,"isAdvanced": false,"nameSID": "ID_DT_N_DTB130_M39MBR","image": "dtb130","descriptionSID": "ID_DT_D_DTB130_M39MBR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"128": {"category": "DTC_Weapons","index": 128,"isAdvanced": false,"nameSID": "ID_DT_N_DTB128_LASERRANGEFINDER","image": "dtb128","descriptionSID": "ID_DT_D_DTB128_LASERRANGEFINDER","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"129": {"category": "DTC_Weapons","index": 129,"isAdvanced": false,"nameSID": "ID_DT_N_DTB126_MUAV","image": "dtb126","descriptionSID": "ID_DT_D_DTB126_MUAV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"130": {"category": "DTC_Weapons","index": 130,"isAdvanced": false,"nameSID": "ID_DT_N_DTB131_M9","image": "dtb131","descriptionSID": "ID_DT_D_DTB131_M9","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"131": {"category": "DTC_Weapons","index": 131,"isAdvanced": false,"nameSID": "ID_DT_N_DTB136_M9SILENCED","image": "dtb136","descriptionSID": "ID_DT_D_DTB136_M9SILENCED","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"132": {"category": "DTC_Weapons","index": 132,"isAdvanced": false,"nameSID": "ID_DT_N_DTB132_GRACH","image": "dtb132","descriptionSID": "ID_DT_D_DTB132_GRACH","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"133": {"category": "DTC_Weapons","index": 133,"isAdvanced": false,"nameSID": "ID_DT_N_DTB137_GRACHSILENCED","image": "dtb137","descriptionSID": "ID_DT_D_DTB137_GRACHSILENCED","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"134": {"category": "DTC_Weapons","index": 134,"isAdvanced": false,"nameSID": "ID_DT_N_DTB135_GLOCK17","image": "dtb135","descriptionSID": "ID_DT_D_DTB135_GLOCK17","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"135": {"category": "DTC_Weapons","index": 135,"isAdvanced": false,"nameSID": "ID_DT_N_DTB133_GLOCK18","image": "dtb133","descriptionSID": "ID_DT_D_DTB133_GLOCK18","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"136": {"category": "DTC_Weapons","index": 136,"isAdvanced": false,"nameSID": "ID_DT_N_DTB134_TAURUS","image": "dtb134","descriptionSID": "ID_DT_D_DTB134_TAURUS","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"137": {"category": "DTC_Weapons","index": 137,"isAdvanced": false,"nameSID": "ID_DT_N_DTB139_M93R","image": "dtb139","descriptionSID": "ID_DT_D_DTB139_M93R","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"138": {"category": "DTC_Weapons","index": 138,"isAdvanced": false,"nameSID": "ID_DT_N_DTB140_REX","image": "dtb140","descriptionSID": "ID_DT_D_DTB140_REX","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"139": {"category": "DTC_Weapons","index": 139,"isAdvanced": false,"nameSID": "ID_DT_N_DTB138_M-45","image": "dtb138","descriptionSID": "ID_DT_D_DTB138_M-45","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"140": {"category": "DTC_Weapons","index": 140,"isAdvanced": false,"nameSID": "ID_DT_N_DTB146_870MCS","image": "dtb146","descriptionSID": "ID_DT_D_DTB146_870MCS","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"141": {"category": "DTC_Weapons","index": 141,"isAdvanced": false,"nameSID": "ID_DT_N_DTB148_M1014","image": "dtb148","descriptionSID": "ID_DT_D_DTB148_M1014","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"142": {"category": "DTC_Weapons","index": 142,"isAdvanced": false,"nameSID": "ID_DT_N_DTB150_SAIGA20K","image": "dtb150","descriptionSID": "ID_DT_D_DTB150_SAIGA20K","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"143": {"category": "DTC_Weapons","index": 143,"isAdvanced": false,"nameSID": "ID_DT_N_DTB147_DAO12","image": "dtb147","descriptionSID": "ID_DT_D_DTB147_DAO12","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"144": {"category": "DTC_Weapons","index": 144,"isAdvanced": false,"nameSID": "ID_DT_N_DTB149_USAS-12","image": "dtb149","descriptionSID": "ID_DT_D_DTB149_USAS-12","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"145": {"category": "DTC_Weapons","index": 145,"isAdvanced": false,"nameSID": "ID_DT_N_DTB142_PP2000","image": "dtb142","descriptionSID": "ID_DT_D_DTB142_PP2000","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"146": {"category": "DTC_Weapons","index": 146,"isAdvanced": false,"nameSID": "ID_DT_N_DTB143_UMP-45","image": "dtb143","descriptionSID": "ID_DT_D_DTB143_UMP-45","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"147": {"category": "DTC_Weapons","index": 147,"isAdvanced": false,"nameSID": "ID_DT_N_DTB141_MAGPUL","image": "dtb141","descriptionSID": "ID_DT_D_DTB141_MAGPUL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"148": {"category": "DTC_Weapons","index": 148,"isAdvanced": false,"nameSID": "ID_DT_N_DTB144_P90TR","image": "dtb144","descriptionSID": "ID_DT_D_DTB144_P90TR","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"149": {"category": "DTC_Weapons","index": 149,"isAdvanced": false,"nameSID": "ID_DT_N_DTB145_MP7PDW","image": "dtb145","descriptionSID": "ID_DT_D_DTB145_MP7PDW","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"150": {"category": "DTC_ServiceStars","index": 150,"isAdvanced": false,"nameSID": "ID_DT_N_DTB_ASVAL","image": "asval_left","descriptionSID": "ID_DT_D_DTB_ASVAL","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"151": {"category": "DTC_Weapons","index": 151,"isAdvanced": false,"nameSID": "ID_DT_N_DTB151_MBT","image": "dtb151","descriptionSID": "ID_DT_D_DTB151_MBT","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"152": {"category": "DTC_Weapons","index": 152,"isAdvanced": false,"nameSID": "ID_DT_N_DTB152_IFV","image": "dtb152","descriptionSID": "ID_DT_D_DTB152_IFV","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"153": {"category": "DTC_Weapons","index": 153,"isAdvanced": false,"nameSID": "ID_DT_N_DTB153_AA","image": "dtb153","descriptionSID": "ID_DT_D_DTB153_AA","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"154": {"category": "DTC_Weapons","index": 154,"isAdvanced": false,"nameSID": "ID_DT_N_DTB154_ATTACKHELI","image": "dtb154","descriptionSID": "ID_DT_D_DTB154_ATTACKHELI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"155": {"category": "DTC_Weapons","index": 155,"isAdvanced": false,"nameSID": "ID_DT_N_DTB155_SCOUTHELI","image": "dtb155","descriptionSID": "ID_DT_D_DTB155_SCOUTHELI","startedWith": false,"platforms": [1, 4, 2],"statSID": ""},"156": {"category": "DTC_Weapons","index": 156,"isAdvanced": false,"nameSID": "ID_DT_N_DTB156_JET","image": "dtb156","descriptionSID": "ID_DT_D_DTB156_JET","startedWith": false,"platforms": [1, 4, 2],"statSID": ""}}};
    return l_dogtags;
};
var block_common_focusbar = new Surface.BlockConfig("", {"content": "common.focusbar.block_content","extraInnerClass": "common.focusbar.block_extraInnerClass","extraClass": "common.focusbar.block_extraClass"});
common.addTemplate(new Surface.Template("focusbar"));
common.focusbar.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_focusbar;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.focusbar");
    c.push('\n<div class="');
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n <div class="common-focus-bar-line"></div>\n <div class="common-focus-bar ');
    c.push(b.get("extraInnerClass")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n</div>");
    return c.join("");
};
common.focusbar.block_extraClass = new Surface.Block("common.focusbar.block_extraClass");
common.focusbar.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("common-focus-bar-default-width");
    return c.join("");
};
common.focusbar.block_extraInnerClass = new Surface.Block("common.focusbar.block_extraInnerClass");
common.focusbar.block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.focusbar.block_content = new Surface.Block("common.focusbar.block_content");
common.focusbar.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" Content.\n");
    return c.join("");
};
var block_common_focusbartoggle = new Surface.BlockConfig("common.focusbar", {"footer": "common.focusbartoggle.block_footer","content": "common.focusbartoggle.block_content","body": "common.focusbartoggle.block_body","outerFooter": "common.focusbartoggle.block_outerFooter","toggleExtraClass": "common.focusbartoggle.block_toggleExtraClass","header": "common.focusbartoggle.block_header"});
common.addTemplate(new Surface.Template("focusbartoggle"));
common.focusbartoggle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_focusbartoggle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.focusbartoggle");
    c.push("\n");
    return Surface.importTemplate("common.focusbar", o, b, kwargs);
};
common.focusbartoggle.block_toggleExtraClass = new Surface.Block("common.focusbartoggle.block_toggleExtraClass");
common.focusbartoggle.block_toggleExtraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.focusbartoggle.block_header = new Surface.Block("common.focusbartoggle.block_header");
common.focusbartoggle.block_header.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.focusbartoggle.block_body = new Surface.Block("common.focusbartoggle.block_body");
common.focusbartoggle.block_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.focusbartoggle.block_footer = new Surface.Block("common.focusbartoggle.block_footer");
common.focusbartoggle.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.focusbartoggle.block_outerFooter = new Surface.Block("common.focusbartoggle.block_outerFooter");
common.focusbartoggle.block_outerFooter.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-focusbar-footer expanded-show">\n');
    c.push(b.get("footer")(o, b, kwargs));
    c.push(' <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
common.focusbartoggle.block_content = new Surface.Block("common.focusbartoggle.block_content");
common.focusbartoggle.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-focusbartoggle ');
    c.push(b.get("toggleExtraClass")(o, b, kwargs));
    c.push('">\n <div class="common-focusbartoggle-header">\n');
    c.push(b.get("header")(o, b, kwargs));
    c.push(' </div>\n <div class="common-focusbartoggle-body expanded-show">\n');
    c.push(b.get("body")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("outerFooter")(o, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
var block_common_functions = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("functions"));
common.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.functions");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
common.function_presenceIconClass = function(l_user, b, kwargs) {
    var o = {};
    var c = [];
    if (!((typeof (l_user) != "undefined" && l_user !== null && typeof (l_user.presence) != "undefined" && l_user.presence !== null))) {
        return "common-presence-offline";
    }
    if (((typeof (l_user) != "undefined" && l_user !== null && typeof (l_user.presence) != "undefined" && l_user.presence !== null && typeof (l_user.presence.isPlaying) != "undefined" && l_user.presence.isPlaying !== null) ? l_user.presence.isPlaying : false)) {
        return "common-presence-playing";
    } else {
        if (((typeof (l_user) != "undefined" && l_user !== null && typeof (l_user.presence) != "undefined" && l_user.presence !== null && typeof (l_user.presence.isOnlineOrbit) != "undefined" && l_user.presence.isOnlineOrbit !== null) ? l_user.presence.isOnlineOrbit : false)) {
            return "common-presence-online";
        }
    }
    return "common-presence-offline";
};
common.function_gamemodeDescription = function(l_game, l_gamemode, b, kwargs) {
    var o = {};
    var c = [];
    var l_m;
    if ((l_game == Surface.globalContext.staticContext.games.BFBC2)) {
        l_m = {"CONQUEST": "Conquest","RUSH": "Rush","SQRUSH": "Squad Rush","SQDM": "Squad DM"};
        return S.Modifier.get(l_m, l_gamemode, l_gamemode);
    }
    if ((l_game == Surface.globalContext.staticContext.games.BF3)) {
        l_m = {"1": "Rush","2": "Conquest"};
        return S.Modifier.get(l_m, l_gamemode, l_gamemode);
    }
};
common.function_gameexpansionMakeNice = function(l_v, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_v == "Bfbc2")) {
        return "Bad Company 2";
    }
    if ((l_v == "Bfbc2nam")) {
        return "BC2: Vietnam";
    }
    return l_v;
};
common.function_difficultyName = function(l_game, l_difficulty, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_game == Surface.globalContext.staticContext.games.BF3)) {
        if ((l_difficulty == 0)) {
            return "Any";
        }
        if ((l_difficulty == 1)) {
            return "Easy";
        }
        if ((l_difficulty == 2)) {
            return "Normal";
        }
        if ((l_difficulty == 4)) {
            return "Hard";
        }
        if ((l_difficulty == 8)) {
            return "Hardcore";
        }
    }
};
common.function_getGameIconCSS = function(l_game, l_platform, l_expansion, b, kwargs) {
    var o = {};
    var c = [];
    var l_css;
    var l_platform;
    if (((l_platform == "battlefield") || (l_platform == "cem_ea_id"))) {
        l_platform = "1";
    } else {
        if ((l_platform == "xbox")) {
            l_platform = "2";
        } else {
            if ((l_platform == "ps3")) {
                l_platform = "4";
            }
        }
    }
    l_css = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("common-gameicon common-game-", l_game), "-"), l_platform);
    if (((typeof (l_expansion) != "undefined" && l_expansion !== null) && (l_expansion > 0))) {
        return S.Modifier.concat(l_css, "-exp");
    }
    return l_css;
};
common.function_getGameIconCSSHorizontal = function(l_game, l_platform, l_expansion, b, kwargs) {
    var o = {};
    var c = [];
    var l_css;
    var l_platform;
    if (((l_platform == "battlefield") || (l_platform == "cem_ea_id"))) {
        l_platform = "1";
    } else {
        if ((l_platform == "xbox")) {
            l_platform = "2";
        } else {
            if ((l_platform == "ps3")) {
                l_platform = "4";
            }
        }
    }
    l_css = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("common-gameicon-hori common-game-", l_game), "-"), l_platform);
    if (((typeof (l_expansion) != "undefined" && l_expansion !== null) && (l_expansion > 0))) {
        return S.Modifier.concat(l_css, "-exp");
    }
    return l_css;
};
common.function_getGameIconCSSBright = function(l_game, l_platform, l_expansion, b, kwargs) {
    var o = {};
    var c = [];
    var l_css;
    var l_platform;
    if (((l_platform == "battlefield") || (l_platform == "cem_ea_id"))) {
        l_platform = "1";
    } else {
        if ((l_platform == "xbox")) {
            l_platform = "2";
        } else {
            if ((l_platform == "ps3")) {
                l_platform = "4";
            }
        }
    }
    l_css = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("common-gameicon bright common-game-", l_game), "-"), l_platform);
    if (((typeof (l_expansion) != "undefined" && l_expansion !== null) && (l_expansion > 0))) {
        return S.Modifier.concat(l_css, "-exp");
    }
    return l_css;
};
common.function_getGameIconCSSBrightHorizontal = function(l_game, l_platform, l_expansion, b, kwargs) {
    var o = {};
    var c = [];
    var l_css;
    var l_platform;
    if (((l_platform == "battlefield") || (l_platform == "cem_ea_id"))) {
        l_platform = "1";
    } else {
        if ((l_platform == "xbox")) {
            l_platform = "2";
        } else {
            if ((l_platform == "ps3")) {
                l_platform = "4";
            }
        }
    }
    l_css = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("common-gameicon-hori bright common-game-", l_game), "-"), l_platform);
    if (((typeof (l_expansion) != "undefined" && l_expansion !== null) && (l_expansion > 0))) {
        return S.Modifier.concat(l_css, "-exp");
    }
    return l_css;
};
common.function_getWidthAndHeightForStatsImage = function(l_type, l_size, b, kwargs) {
    var o = {};
    var c = [];
    if (("ranks" == l_type)) {
        if (("tiny" == l_size)) {
            return 'width="26" height="26"';
        }
        if (("small" == l_size)) {
            return 'width="60" height="60"';
        }
        if (("medium" == l_size)) {
            return 'width="128" height="128"';
        }
        if (("large" == l_size)) {
            return 'width="256" height="256"';
        }
    }
    if (("stars" == l_type)) {
        if (("small" == l_size)) {
            return 'width="23" height="16"';
        }
        if (("medium" == l_size)) {
            return 'width="42" height="32"';
        }
        if (("large" == l_size)) {
            return 'width="90" height="90"';
        }
    }
    if (("achievements" == l_type)) {
        if (("small" == l_size)) {
            return 'width="54" height="54"';
        }
        if (("medium" == l_size)) {
            return 'width="195" height="195"';
        }
        if (("large" == l_size)) {
            return 'width="240" height="240"';
        }
    }
    if ((("insignias" == l_type) || ("pins" == l_type))) {
        if (("small" == l_size)) {
            return 'width="54" height="54"';
        }
        if (("medium" == l_size)) {
            return 'width="195" height="195"';
        }
        if (("large" == l_size)) {
            return 'width="512" height="512"';
        }
    }
    if ((((("weapons" == l_type) || ("vehicles" == l_type)) || ("specializations" == l_type)) || ("gadgets" == l_type))) {
        if (("tiny" == l_size)) {
            return 'width="47" height="24"';
        }
        if (("small" == l_size)) {
            return 'width="100" height="54"';
        }
        if (("medium" == l_size)) {
            return 'width="240" height="75"';
        }
        if (("large" == l_size)) {
            return 'width="512" height="288"';
        }
    }
    return "";
};
common.function_calculateRatio = function(l_x, l_y, b, kwargs) {
    var o = {};
    var c = [];
    if (((l_y > 0) && (l_x > 0))) {
        return S.Modifier.round((S.Modifier.tofloat(l_x) / S.Modifier.tofloat(l_y)), 3);
    } else {
        return S.Modifier.tofloat(l_x);
    }
};
common.function_namespaceToPlatform = function(l_namespace, b, kwargs) {
    var o = {};
    var c = [];
    if (((l_namespace == Surface.globalContext.staticContext.nucleusNamespaces.CEM_EA_ID) || (l_namespace == Surface.globalContext.staticContext.nucleusNamespaces.BATTLEFIELD))) {
        return "pc";
    } else {
        if ((l_namespace == Surface.globalContext.staticContext.nucleusNamespaces.XBOX)) {
            return "xbox";
        } else {
            if ((l_namespace == Surface.globalContext.staticContext.nucleusNamespaces.PS3)) {
                return "ps3";
            }
        }
    }
};
common.function_platformIntToPlatform = function(l_platformInt, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_platformInt == 1)) {
        return "pc";
    } else {
        if ((l_platformInt == 2)) {
            return "xbox";
        } else {
            if ((l_platformInt == 4)) {
                return "ps3";
            }
        }
    }
};
common.function_licenseNiceText = function(l_license, b, kwargs) {
    var o = {};
    var c = [];
    var l_license;
    l_license = S.Modifier.lower(l_license);
    if ((l_license == "dice")) {
        return "You need to be a DICE employee";
    } else {
        if ((l_license == "pwp")) {
            return "Physical Warfare Pack";
        } else {
            if ((l_license == "speca")) {
                return "Specact";
            }
        }
    }
};
var block_common_gameExpansionImage = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("gameExpansionImage"));
common.gameExpansionImage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_gameExpansionImage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.gameExpansionImage");
    c.push("\n");
    if ((S.Modifier.toint(o.expansion) == 512)) {
        c.push(' <img class="common-gameexpansion common-gameexpansion-');
        c.push(Surface.valOut(o.expansion));
        c.push('" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/exp-b2k.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n');
    }
    return c.join("");
};
var block_common_kittimes = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("kittimes"));
common.kittimes.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_kittimes;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.kittimes");
    var l_kitTimes;
    var l_imgNum;
    var l_for_common_kittimes_9_6_iteration;
    var l_current_kit;
    var l_imgPath;
    var l_prevValue;
    var l_for_common_kittimes_9_6_list;
    c.push('\n<div class="common-kittimes">\n <div class="common-kittime-bg">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/stats-time-bg.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n');
    l_kitTimes = [o.support, o.engineer, o.assault];
    l_prevValue = o.recon;
    l_for_common_kittimes_9_6_list = l_kitTimes;
    l_for_common_kittimes_9_6_iteration = 0;
    if ((S.Modifier.count(l_for_common_kittimes_9_6_list) > 0)) {
        for (var l_for_common_kittimes_9_6_key in l_for_common_kittimes_9_6_list) {
            if (!Surface.isValidLoopItem(l_for_common_kittimes_9_6_list[l_for_common_kittimes_9_6_key])) {
                continue;
            }
            var l_kt = l_for_common_kittimes_9_6_list[l_for_common_kittimes_9_6_key];
            l_for_common_kittimes_9_6_iteration = (l_for_common_kittimes_9_6_iteration + 1);
            if ((l_prevValue >= 96)) {
                l_imgNum = "00";
            } else {
                if ((l_prevValue >= 92)) {
                    l_imgNum = "01";
                } else {
                    if ((l_prevValue >= 88)) {
                        l_imgNum = "02";
                    } else {
                        if ((l_prevValue >= 84)) {
                            l_imgNum = "03";
                        } else {
                            if ((l_prevValue >= 80)) {
                                l_imgNum = "04";
                            } else {
                                if ((l_prevValue >= 76)) {
                                    l_imgNum = "05";
                                } else {
                                    if ((l_prevValue >= 72)) {
                                        l_imgNum = "06";
                                    } else {
                                        if ((l_prevValue >= 68)) {
                                            l_imgNum = "07";
                                        } else {
                                            if ((l_prevValue >= 64)) {
                                                l_imgNum = "08";
                                            } else {
                                                if ((l_prevValue >= 60)) {
                                                    l_imgNum = "09";
                                                } else {
                                                    if ((l_prevValue >= 56)) {
                                                        l_imgNum = "10";
                                                    } else {
                                                        if ((l_prevValue >= 52)) {
                                                            l_imgNum = "11";
                                                        } else {
                                                            if ((l_prevValue >= 48)) {
                                                                l_imgNum = "12";
                                                            } else {
                                                                if ((l_prevValue >= 44)) {
                                                                    l_imgNum = "13";
                                                                } else {
                                                                    if ((l_prevValue >= 40)) {
                                                                        l_imgNum = "14";
                                                                    } else {
                                                                        if ((l_prevValue >= 36)) {
                                                                            l_imgNum = "15";
                                                                        } else {
                                                                            if ((l_prevValue >= 32)) {
                                                                                l_imgNum = "16";
                                                                            } else {
                                                                                if ((l_prevValue >= 28)) {
                                                                                    l_imgNum = "17";
                                                                                } else {
                                                                                    if ((l_prevValue >= 24)) {
                                                                                        l_imgNum = "18";
                                                                                    } else {
                                                                                        if ((l_prevValue >= 20)) {
                                                                                            l_imgNum = "19";
                                                                                        } else {
                                                                                            if ((l_prevValue >= 16)) {
                                                                                                l_imgNum = "20";
                                                                                            } else {
                                                                                                if ((l_prevValue >= 12)) {
                                                                                                    l_imgNum = "21";
                                                                                                } else {
                                                                                                    if ((l_prevValue >= 8)) {
                                                                                                        l_imgNum = "22";
                                                                                                    } else {
                                                                                                        if ((l_prevValue >= 4)) {
                                                                                                            l_imgNum = "23";
                                                                                                        } else {
                                                                                                            if ((l_prevValue >= 0)) {
                                                                                                                l_imgNum = false;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            c.push("\n");
            l_current_kit = (S.Modifier.count(l_kitTimes) - (l_for_common_kittimes_9_6_iteration - 2));
            c.push('\n <div class="common-kittime-');
            c.push(Surface.valOut((l_current_kit - 1)));
            c.push('">\n');
            if (l_imgNum) {
                l_imgPath = S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/stats-time-", (l_current_kit - 1)), (("-" + l_imgNum) + ".png"));
                c.push(' <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_imgPath, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n');
            }
            c.push(" </div>\n");
            if ((l_prevValue >= 96)) {
                break;
            }
            l_prevValue = (l_prevValue + l_kt);
        }
    }
    c.push('\n <div class="common-kittimes-overlay">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.bg) != "undefined" && o.bg !== null)) {
        o.bg = S.Modifier.concat("-", o.bg);
    } else {
        o.bg = "";
    }
    c.push(' <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/stats-time-overlay", o.bg), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n</div>');
    return c.join("");
};
common.addTemplate(new Surface.Template("leaderboard"));
var block_common_leaderboard_use_15_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "common.leaderboard._use_15_6_block_content","extraClassInner": "common.leaderboard._use_15_6_block_extraClassInner","title": "common.leaderboard._use_15_6_block_title","shadow": "common.leaderboard._use_15_6_block_shadow","titleType": "common.leaderboard._use_15_6_block_titleType","titleContainer": "common.leaderboard._use_15_6_block_titleContainer","extraClass": "common.leaderboard._use_15_6_block_extraClass"});
var block_common_mpmaps = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("mpmaps"));
common.mpmaps.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_mpmaps;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.mpmaps");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
common.function_getMapsVenice = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_allMaps;
    l_allMaps = {"MP_Subway": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_SUBWAY","modes": ["ConquestSmall0", "SquadRush0", "TeamDeathMatch0", "RushLarge0", "ConquestLarge0", "ConquestSmall0", "ConquestLarge0", "SquadDeathMatch0", "RushLarge0", "RushLarge0", "ConquestLarge0"]},"MP_001": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_BAZAAR","modes": ["TeamDeathMatch0", "RushLarge0", "ConquestSmall0", "SquadDeathMatch0", "SquadRush0", "ConquestLarge0"]},"MP_003": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_HIGHWAY","modes": ["SquadRush0", "TeamDeathMatch0", "ConquestLarge0", "ConquestSmall0", "ConquestLarge0", "SquadDeathMatch0", "ConquestSmall0", "RushLarge0"]},"MP_007": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_FOREST","modes": ["TeamDeathMatch0", "SquadDeathMatch0", "SquadRush0", "RushLarge0", "ConquestSmall0", "ConquestLarge0", "RushLarge0", "TeamDeathMatch0", "SquadRush0", "SquadDeathMatch0"]},"MP_017": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_CANALS","modes": ["RushLarge0", "SquadDeathMatch0", "ConquestLarge0", "SquadRush0", "TeamDeathMatch0", "ConquestSmall0"]},"MP_013": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_BASEJUMP","modes": ["SquadDeathMatch0", "SquadRush0", "TeamDeathMatch0", "ConquestLarge0", "ConquestSmall0", "RushLarge0"]},"MP_012": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_OILFIELDS","modes": ["SquadRush0", "ConquestSmall0", "ConquestLarge0", "SquadDeathMatch0", "TutorialMP", "TutorialMP_ShootHouse", "RushLarge0", "TutorialMP_Sandbox", "TeamDeathMatch0"]},"MP_011": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_PARIS","modes": ["SquadRush0", "SquadDeathMatch0", "ConquestLarge0", "ConquestSmall0", "RushLarge0", "TeamDeathMatch0"]},"MP_018": {"name": "ID_RP_LEVELNAME_MULTIPLAYER_KHARG","modes": ["SquadDeathMatch0", "SquadRush0", "TeamDeathMatch0", "ConquestSmall0", "ConquestSmall0", "RushLarge0", "ConquestSmall0", "ConquestLarge0", "ConquestLarge0", "ConquestLarge0"]}};
    return l_allMaps;
};
common.function_getMapByName = function(l_name, b, kwargs) {
    var o = {};
    var c = [];
    var l_allMaps;
    l_allMaps = {"ID_RP_LEVELNAME_MULTIPLAYER_BAZAAR": "MP_001","ID_RP_LEVELNAME_MULTIPLAYER_CANALS": "MP_017","ID_RP_LEVELNAME_MULTIPLAYER_SUBWAY": "MP_Subway","ID_RP_LEVELNAME_MULTIPLAYER_KHARG": "MP_018","ID_RP_LEVELNAME_MULTIPLAYER_FOREST": "MP_007","ID_RP_LEVELNAME_MULTIPLAYER_BASEJUMP": "MP_013","ID_RP_LEVELNAME_MULTIPLAYER_PARIS": "MP_011","ID_RP_LEVELNAME_MULTIPLAYER_OILFIELDS": "MP_012","ID_RP_LEVELNAME_MULTIPLAYER_HIGHWAY": "MP_003"};
    return S.Modifier.get(l_allMaps, l_name, "MP_001");
};
common.function_getMapByCode = function(l_code, b, kwargs) {
    var o = {};
    var c = [];
    var l_allMaps;
    l_allMaps = {"MP_Subway": "ID_RP_LEVELNAME_MULTIPLAYER_SUBWAY","MP_001": "ID_RP_LEVELNAME_MULTIPLAYER_BAZAAR","MP_003": "ID_RP_LEVELNAME_MULTIPLAYER_HIGHWAY","MP_007": "ID_RP_LEVELNAME_MULTIPLAYER_FOREST","MP_017": "ID_RP_LEVELNAME_MULTIPLAYER_CANALS","MP_013": "ID_RP_LEVELNAME_MULTIPLAYER_BASEJUMP","MP_012": "ID_RP_LEVELNAME_MULTIPLAYER_OILFIELDS","MP_011": "ID_RP_LEVELNAME_MULTIPLAYER_PARIS","MP_018": "ID_RP_LEVELNAME_MULTIPLAYER_KHARG"};
    return S.Modifier.get(l_allMaps, l_code, "ID_RP_LEVELNAME_MULTIPLAYER_SUBWAY");
};
common.function_getMapCodes = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_mapCodes;
    l_mapCodes = ["MP_Subway", "MP_001", "MP_003", "MP_007", "MP_017", "MP_013", "MP_012", "MP_011", "MP_018"];
    return l_mapCodes;
};
var block_common_multichoice = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("multichoice"));
common.multichoice.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_multichoice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.multichoice");
    var l_val;
    c.push("\n");
    l_val = ((typeof (o) != "undefined" && o !== null && typeof (o.pressed) != "undefined" && o.pressed !== null) ? o.pressed : []);
    c.push('<div class="common-multichoice-container ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.cls) != "undefined" && o.cls !== null) ? o.cls : "")));
    c.push('">\n');
    c.push(common.multichoice.surface_4_6.render({"joinchar": ((typeof (o) != "undefined" && o !== null && typeof (o.joinchar) != "undefined" && o.joinchar !== null) ? o.joinchar : null),"labels": ((typeof (o) != "undefined" && o !== null && typeof (o.labels) != "undefined" && o.labels !== null) ? o.labels : null),"name": ((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : null),"val": ((typeof (l_val) != "undefined" && l_val !== null) ? l_val : null)}, b, kwargs));
    c.push(' <div style="clear:both;"></div>\n</div>\n');
    return c.join("");
};
common.multichoice.surface_4_6 = new Surface.SingleSurface("common.multichoice.surface_4_6");
common.multichoice.surface_4_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_multichoice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.multichoice");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("commonMultichoice", ((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")));
    c.push('">');
    var l_pos;
    var l_for_common_multichoice_6_10_count;
    var l_for_common_multichoice_6_10_list;
    var l_for_common_multichoice_6_10_hasNext;
    var l_for_common_multichoice_6_10_iteration;
    c.push(' <input type="hidden" name="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")));
    c.push('" value="');
    c.push(Surface.valOut(S.Modifier.join(o.val, ((typeof (o) != "undefined" && o !== null && typeof (o.joinchar) != "undefined" && o.joinchar !== null) ? o.joinchar : ","))));
    c.push('" />\n');
    l_for_common_multichoice_6_10_list = o.labels;
    l_for_common_multichoice_6_10_count = S.Modifier.count(l_for_common_multichoice_6_10_list);
    l_for_common_multichoice_6_10_iteration = 0;
    if ((S.Modifier.count(l_for_common_multichoice_6_10_list) > 0)) {
        for (var l_for_common_multichoice_6_10_key in l_for_common_multichoice_6_10_list) {
            if (!Surface.isValidLoopItem(l_for_common_multichoice_6_10_list[l_for_common_multichoice_6_10_key])) {
                continue;
            }
            var l_label = l_for_common_multichoice_6_10_list[l_for_common_multichoice_6_10_key];
            l_for_common_multichoice_6_10_iteration = (l_for_common_multichoice_6_10_iteration + 1);
            l_for_common_multichoice_6_10_hasNext = (l_for_common_multichoice_6_10_iteration < l_for_common_multichoice_6_10_count);
            l_pos = "middle";
            if ((l_for_common_multichoice_6_10_iteration == 1)) {
                l_pos = "left";
            } else {
                if (!(l_for_common_multichoice_6_10_hasNext)) {
                    l_pos = "right";
                }
            }
            c.push('\n <div iteration="');
            c.push(Surface.valOut(l_for_common_multichoice_6_10_iteration));
            c.push('" class="common-multichoice-entry common-multichoice-');
            c.push(Surface.valOut(l_pos));
            c.push(" ");
            if ((S.Modifier.contains(o.val, l_for_common_multichoice_6_10_iteration) > 0)) {
                c.push("common-multichoice-pressed");
            }
            c.push('">\n ');
            c.push(Surface.valOut(l_label));
            c.push("\n </div>\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("common.multichoice", "surface_4_6", S.Modifier.concat("commonMultichoice", ((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")), o, b);
    return c.join("");
};
var block_common_onechoice = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("onechoice"));
common.onechoice.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_onechoice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.onechoice");
    var l_for_common_onechoice_4_6_list;
    c.push('\n<div class="common-onechoice-container ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.cls) != "undefined" && o.cls !== null) ? o.cls : "")));
    c.push('">\n <input type="hidden" name="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")));
    c.push('" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.val) != "undefined" && o.val !== null) ? o.val : "")));
    c.push('" />\n');
    l_for_common_onechoice_4_6_list = o.labels;
    if ((S.Modifier.count(l_for_common_onechoice_4_6_list) > 0)) {
        for (var l_key in l_for_common_onechoice_4_6_list) {
            if (!Surface.isValidLoopItem(l_for_common_onechoice_4_6_list[l_key])) {
                continue;
            }
            var l_value = l_for_common_onechoice_4_6_list[l_key];
            c.push(' <div rel="');
            c.push(Surface.valOut(l_key));
            c.push('" class="common-onechoice-entry ');
            if (((o.val == l_key) || (o.val == l_value))) {
                c.push("common-onechoice-pressed");
            }
            c.push('">\n ');
            c.push(Surface.valOut(l_value));
            c.push("\n </div>\n");
        }
    }
    c.push('<div style="clear:both;"></div>\n<div class="common-onechoice-line"></div>\n</div>\n');
    return c.join("");
};
var block_common_percentbar = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("percentbar"));
common.percentbar.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_percentbar;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.percentbar");
    var l_a;
    var l_b;
    var l_percent;
    c.push("\n");
    if ((o.max == 0)) {
        o.max = 1;
    }
    c.push("\n");
    l_a = S.Modifier.tofloat(((typeof (o) != "undefined" && o !== null && typeof (o.value) != "undefined" && o.value !== null) ? o.value : 0));
    l_b = ((typeof (o) != "undefined" && o !== null && typeof (o.max) != "undefined" && o.max !== null) ? o.max : 100);
    l_percent = ((l_a / l_b) * 100);
    c.push('<div class="common-percentbar-container ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.bright) != "undefined" && o.bright !== null) ? o.bright : false)) {
        c.push("bright");
    }
    c.push('"');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.width) != "undefined" && o.width !== null)) {
        c.push('style="width: ');
        c.push(Surface.valOut(o.width));
        c.push(';"');
    }
    c.push('>\n <div style="width: ');
    c.push(Surface.valOut(S.Modifier.round(l_percent)));
    c.push('%;"></div>\n</div>');
    return c.join("");
};
var block_common_personarank = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("personarank"));
common.personarank.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_personarank;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.personarank");
    var l_currentRank;
    c.push('\n<div class="common-personarank rank-');
    c.push(Surface.valOut(o.rankLevel));
    c.push('">\n');
    l_currentRank = o.rankLevel;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.persona.personaId,"personaName": o.persona.personaName})));
        c.push('">\n');
    }
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": o.rankGame,"rank_size": ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : "medium"),"rank": l_currentRank}, null, kwargs));
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null)) {
        c.push(" </a>\n");
    }
    c.push("</div>\n");
    return c.join("");
};
var block_common_playername = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("playername"));
common.playername.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_playername;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.playername");
    var l_showBothNames;
    var l_isConsolePlayer;
    var l_personaname;
    var l_username;
    c.push("\n");
    l_username = ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null) ? o.user.username : false);
    l_personaname = ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.personaName) != "undefined" && o.persona.personaName !== null) ? o.persona.personaName : false);
    c.push("\n");
    l_isConsolePlayer = ((((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.namespace) != "undefined" && o.persona.namespace !== null) ? o.persona.namespace : false) != Surface.globalContext.staticContext.nucleusNamespaces.CEM_EA_ID) && (((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.namespace) != "undefined" && o.persona.namespace !== null) ? o.persona.namespace : false) != Surface.globalContext.staticContext.nucleusNamespaces.BATTLEFIELD));
    l_showBothNames = (((l_isConsolePlayer && l_username) || (!(l_isConsolePlayer) && (l_username != l_personaname))) && l_username);
    c.push('\n<div class="common-playername-personaname');
    if (!(l_showBothNames)) {
        c.push(" solo");
    }
    if (!(l_personaname)) {
        c.push(" unknown-player");
    }
    c.push('">\n ');
    if (S.Modifier.get(o.persona, "clanTag", false)) {
        c.push("[");
        c.push(Surface.valOut(S.Modifier.get(o.persona, "clanTag", "")));
        c.push("] ");
    }
    c.push("\n");
    if (((l_username && l_personaname) && !(((typeof (o) != "undefined" && o !== null && typeof (o.noLink) != "undefined" && o.noLink !== null) ? o.noLink : false)))) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.persona, ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.game) != "undefined" && o.persona.game !== null) ? o.persona.game : 2), ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.namespace) != "undefined" && o.persona.namespace !== null) ? o.persona.namespace : 1), b, kwargs))));
        c.push('">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.personaName) != "undefined" && o.persona.personaName !== null) ? o.persona.personaName : "Unknown player")));
        c.push("</a>\n");
    } else {
        c.push(' <span class="');
        if (((l_username && l_personaname) && ((typeof (o) != "undefined" && o !== null && typeof (o.noLink) != "undefined" && o.noLink !== null) ? o.noLink : false))) {
            c.push("common-playername-personaname-nolink");
        }
        c.push('">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null && typeof (o.persona.personaName) != "undefined" && o.persona.personaName !== null) ? o.persona.personaName : "Unknown player")));
        c.push("</span>\n");
    }
    c.push('</div>\n<div class="base-clear"></div>\n');
    if (l_showBothNames) {
        c.push(' <div class="common-playername-username">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null) ? o.user.username : "ID_WEB_COMMON_UNKNOWN_USER")));
        c.push("</div>\n");
    }
    return c.join("");
};
var block_common_playing = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("playing"));
common.playing.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_playing;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.playing");
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showPlayingMode) != "undefined" && o.showPlayingMode !== null) ? o.showPlayingMode : true)) {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "playingMode")), {"playingMode": o.presence.playingMode}, null, kwargs));
        c.push("\n");
    }
    c.push('<span class="common-playing-link">\n');
    if ((o.presence.platform == Surface.globalContext.staticContext.platforms.PC)) {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.presence) != "undefined" && o.presence !== null && typeof (o.presence.serverGuid) != "undefined" && o.presence.serverGuid !== null)) {
            c.push(" <a ");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.noTitle) != "undefined" && o.noTitle !== null) ? o.noTitle : true)) {
                c.push('title="');
                c.push(Surface.valOut(o.presence.serverName));
                c.push('"');
            }
            c.push(' class="common-playing-link ');
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
            c.push('" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.presence.serverGuid,"slug": S.Modifier.slugify(o.presence.serverName)})));
            c.push('">');
            c.push(Surface.importTemplate(("common" + ("." + "servername")), {"limit": ((typeof (o) != "undefined" && o !== null && typeof (o.limit) != "undefined" && o.limit !== null) ? o.limit : 18),"first": ((typeof (o) != "undefined" && o !== null && typeof (o.first) != "undefined" && o.first !== null) ? o.first : 8),"name": o.presence.serverName}, null, kwargs));
            c.push("</a>\n");
        } else {
            if ((o.presence.playingMode == 2)) {
                c.push(" ");
                c.push(Surface.valOut("Playing Single Player"));
                c.push("\n");
            } else {
                if ((o.presence.playingMode == 4)) {
                    c.push(" ");
                    c.push(Surface.valOut("CO-OP"));
                    c.push("\n");
                    if ((S.Modifier.count(o.presence.playingWith) == 1)) {
                        c.push(" with ");
                        c.push(Surface.valOut(S.Modifier.get(o.presence.playingWith, 0)));
                        c.push("\n");
                    }
                }
            }
        }
    } else {
        if ((o.presence.playingMode == 1)) {
            c.push(" ");
            c.push(Surface.valOut("Playing Multiplayer"));
            c.push("\n");
        } else {
            if ((o.presence.playingMode == 4)) {
                c.push(" ");
                c.push(Surface.valOut("CO-OP"));
                c.push("\n");
            }
        }
    }
    c.push("</span>");
    return c.join("");
};
var block_common_playingMode = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("playingMode"));
common.playingMode.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_playingMode;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.playingMode");
    var l_type;
    c.push("\n");
    c.push("\n");
    if ((o.playingMode == 1)) {
        o.title = "Multiplayer";
        o.cssType = "mp";
    } else {
        if ((o.playingMode == 2)) {
            o.title = "Singleplayer";
            o.cssType = "sp";
        } else {
            if ((o.playingMode == 4)) {
                o.title = "Cooperative";
                o.cssType = "coop";
            }
        }
    }
    c.push("\n");
    l_type = "black";
    if (((typeof (o) != "undefined" && o !== null && typeof (o.useWhiteIcons) != "undefined" && o.useWhiteIcons !== null) && o.useWhiteIcons)) {
        l_type = "white";
    }
    if ((o.playingMode > 0)) {
        c.push(' <span title="');
        c.push(Surface.valOut(o.title));
        c.push('" class="common-playing-mode common-playing-mode-');
        c.push(Surface.valOut(l_type));
        c.push("-");
        c.push(Surface.valOut(o.cssType));
        c.push(" ");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
        c.push('"></span>\n');
    }
    return c.join("");
};
var block_common_popup = new Surface.BlockConfig("", {"footer": "common.popup.block_footer","content": "common.popup.block_content","extraClassInner": "common.popup.block_extraClassInner","title": "common.popup.block_title","popupId": "common.popup.block_popupId","footerContainer": "common.popup.block_footerContainer","extraClass": "common.popup.block_extraClass","extraCloseButtonClass": "common.popup.block_extraCloseButtonClass"});
common.addTemplate(new Surface.Template("popup"));
common.popup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_popup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.popup");
    c.push('\n<div id="');
    c.push(b.get("popupId")(o, b, kwargs));
    c.push('" class="common-popup ');
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push(" ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.removeOnPageLoad) != "undefined" && o.removeOnPageLoad !== null) ? o.removeOnPageLoad : false)) {
        c.push("common-popup-remove");
    }
    c.push('" style="');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.position) != "undefined" && o.position !== null)) {
        c.push("top:");
        c.push(Surface.valOut(S.Modifier.get(o.position, "top")));
        c.push("px;left:");
        c.push(Surface.valOut(S.Modifier.get(o.position, "left")));
        c.push("px;");
    }
    c.push('">\n <div class="common-popup-title-container">\n <div class="common-popup-title common-popup-handle">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push('\n <div class="common-popup-close-container ');
    c.push(b.get("extraCloseButtonClass")(o, b, kwargs));
    c.push('"><div class="common-popup-close">&nbsp;</div></div>\n </div>\n </div>\n <div class="common-popup-content-container">\n <div class="common-popup-content ');
    c.push(b.get("extraClassInner")(o, b, kwargs));
    c.push('">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(' </div>\n </div>\n <div class="common-popup-footer-container">\n');
    c.push(b.get("footerContainer")(o, b, kwargs));
    c.push(" </div>\n</div>");
    return c.join("");
};
common.popup.block_popupId = new Surface.Block("common.popup.block_popupId");
common.popup.block_popupId.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("##RANDOM_ID##");
    return c.join("");
};
common.popup.block_extraClass = new Surface.Block("common.popup.block_extraClass");
common.popup.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.popup.block_title = new Surface.Block("common.popup.block_title");
common.popup.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Funky popup");
    return c.join("");
};
common.popup.block_extraCloseButtonClass = new Surface.Block("common.popup.block_extraCloseButtonClass");
common.popup.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.popup.block_extraClassInner = new Surface.Block("common.popup.block_extraClassInner");
common.popup.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.popup.block_content = new Surface.Block("common.popup.block_content");
common.popup.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" Popup content\n");
    return c.join("");
};
common.popup.block_footer = new Surface.Block("common.popup.block_footer");
common.popup.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" Popup footer\n");
    return c.join("");
};
common.popup.block_footerContainer = new Surface.Block("common.popup.block_footerContainer");
common.popup.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-popup-line"></div>\n <div class="common-popup-footer">\n');
    c.push(b.get("footer")(o, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
var block_common_pressuremeter = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("pressuremeter"));
common.pressuremeter.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_pressuremeter;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.pressuremeter");
    var l_imgPath;
    var l_width;
    var l_height;
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.kdr) != "undefined" && o.kdr !== null)) {
        o.kdr = S.Modifier.tofloat(o.kdr);
        c.push("\n");
        if ((S.Modifier.toint(o.kdr) == 0)) {
            o.x = 50;
        } else {
            if ((o.kdr <= 1)) {
                o.x = ((o.kdr / 2) * 100);
            } else {
                o.x = ((((o.kdr - 1) / 4) + 0.5) * 100);
            }
        }
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.wins) != "undefined" && o.wins !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.losses) != "undefined" && o.losses !== null))) {
            if ((o.losses > 0)) {
                o.x = ((o.wins / S.Modifier.tofloat((o.wins + o.losses))) * 100);
            } else {
                if (((S.Modifier.toint(o.wins) == 0) && (S.Modifier.toint(o.losses) == 0))) {
                    o.x = 50;
                } else {
                    o.x = 100;
                }
            }
        }
    }
    c.push("\n");
    if ((o.x >= 100)) {
        l_imgPath = "/public/profile/bf3/stats/stats-kd-16.png";
    } else {
        if ((o.x >= 88)) {
            l_imgPath = "/public/profile/bf3/stats/stats-kd-15.png";
        } else {
            if ((o.x >= 77)) {
                l_imgPath = "/public/profile/bf3/stats/stats-kd-14.png";
            } else {
                if ((o.x >= 68)) {
                    l_imgPath = "/public/profile/bf3/stats/stats-kd-13.png";
                } else {
                    if ((o.x >= 61)) {
                        l_imgPath = "/public/profile/bf3/stats/stats-kd-12.png";
                    } else {
                        if ((o.x >= 53)) {
                            l_imgPath = "/public/profile/bf3/stats/stats-kd-11.png";
                        } else {
                            if ((o.x >= 47)) {
                                l_imgPath = "/public/profile/bf3/stats/stats-kd-10.png";
                            } else {
                                if ((o.x >= 39)) {
                                    l_imgPath = "/public/profile/bf3/stats/stats-kd-09.png";
                                } else {
                                    if ((o.x >= 31)) {
                                        l_imgPath = "/public/profile/bf3/stats/stats-kd-08.png";
                                    } else {
                                        if ((o.x >= 24)) {
                                            l_imgPath = "/public/profile/bf3/stats/stats-kd-07.png";
                                        } else {
                                            if ((o.x >= 18)) {
                                                l_imgPath = "/public/profile/bf3/stats/stats-kd-06.png";
                                            } else {
                                                if ((o.x >= 10)) {
                                                    l_imgPath = "/public/profile/bf3/stats/stats-kd-05.png";
                                                } else {
                                                    l_imgPath = "/public/profile/bf3/stats/stats-kd-04.png";
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push("\n");
    o.size = ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : "normal");
    c.push("\n");
    l_width = 100;
    l_height = 51;
    c.push("\n");
    if ((o.size == "mini")) {
        l_width = 56;
        l_height = 31;
    }
    c.push('\n<div class="common-pressuremeter-');
    c.push(Surface.valOut(o.size));
    c.push('" data-x="');
    c.push(Surface.valOut(o.x));
    c.push('">\n <div style="position: absolute; width: 100%; z-index:1;">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_imgPath, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" width="');
    c.push(Surface.valOut(l_width));
    c.push('" height="');
    c.push(Surface.valOut(l_height));
    c.push('" />\n </div>\n <div style="position: absolute; width: 100%;">\n <img width="');
    c.push(Surface.valOut(l_width));
    c.push('" height="');
    c.push(Surface.valOut(l_height));
    c.push('" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/stats-kd-bg.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('">\n </div>\n</div>\n');
    return c.join("");
};
common.addTemplate(new Surface.Template("progress"));
var block_common_progress_use_3_6 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "common.progress._use_3_6_block_content","extraClassInner": "common.progress._use_3_6_block_extraClassInner","title": "common.progress._use_3_6_block_title","shadow": "common.progress._use_3_6_block_shadow","titleType": "common.progress._use_3_6_block_titleType","titleContainer": "common.progress._use_3_6_block_titleContainer","extraClass": "common.progress._use_3_6_block_extraClass"});
common.addTemplate(new Surface.Template("progressfriends"));
var block_common_receipt = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("receipt"));
common.receipt.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_receipt;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.receipt");
    c.push('\n<div class="common-receipt type-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : "checkbox")));
    c.push('">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) && (o.type != "none"))) {
        c.push(' <div class="common-receipt-');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : "checkbox")));
        c.push('"></div>\n');
    }
    c.push(' <div class="common-receipt-message">\n ');
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : "No message set..."));
    c.push('\n </div>\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
var block_common_replyform = new Surface.BlockConfig("", {"extraFields": "common.replyform.block_extraFields"});
common.addTemplate(new Surface.Template("replyform"));
common.replyform.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_replyform;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.replyform");
    c.push('\n<div class="common-replyform ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
    c.push('">\n <div class="common-replyform-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : false),"gravatarSize": 52}, null, kwargs));
    c.push('\n </div>\n <form class="common-replyform-form ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraFormClass) != "undefined" && o.extraFormClass !== null) ? o.extraFormClass : "")));
    c.push('"');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.formId) != "undefined" && o.formId !== null)) {
        c.push(' id="');
        c.push(Surface.valOut(o.formId));
        c.push('"');
    }
    c.push(' action="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.action) != "undefined" && o.action !== null) ? o.action : "/")));
    c.push('" method="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.method) != "undefined" && o.method !== null) ? o.method : "POST")));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <textarea name="body" placeholder="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.placeholder) != "undefined" && o.placeholder !== null) ? o.placeholder : "Leave a reply...")));
    c.push('" class="common-replyform-form-body ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraTextareaClass) != "undefined" && o.extraTextareaClass !== null) ? o.extraTextareaClass : "")));
    c.push('"></textarea>\n');
    c.push(b.get("extraFields")(o, b, kwargs));
    c.push(' <input type="submit" class="base-button-arrow-small common-replyform-form-submit" value="Post" />\n </form>\n</div>');
    return c.join("");
};
common.replyform.block_extraFields = new Surface.Block("common.replyform.block_extraFields");
common.replyform.block_extraFields.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_common_reportbutton = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("reportbutton"));
common.reportbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_reportbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.reportbutton");
    c.push('\n<div rel="');
    c.push(Surface.valOut(o.reportUrl));
    c.push('" class="common-reportbutton-container">\n <div class="common-reportbutton"></div>\n <div class="common-reportbutton-dropdown"><img class="ajax-loader" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ajax-loader.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" /></div>\n</div>\n');
    return c.join("");
};
var block_common_reportpopup = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("reportpopup"));
common.reportpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_reportpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.reportpopup");
    c.push('\n<div style="position: absolute; background: #fff; border: 1px solid #000; width: 400px; height: 150px; top: 200px; left: 200px; padding: 10px;">\n ');
    c.push(Surface.valOut(o.title));
    c.push("<br>\n <form method=POST action='");
    c.push(Surface.valOut(o.url));
    c.push("'>\n ");
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <textarea name=reason style=\'width: 370px; height: 100px;\'></textarea><br>\n <input type=submit name="submit" value="Submit">\n <input type=button name="cancel" value="Cancel" onclick="$(\'#reportPopup\').hide();">\n </form>\n</div>');
    return c.join("");
};
var block_common_secondarycontent = new Surface.BlockConfig("", {"content": "common.secondarycontent.block_content","title": "common.secondarycontent.block_title","titleContainer": "common.secondarycontent.block_titleContainer","extraClass": "common.secondarycontent.block_extraClass"});
common.addTemplate(new Surface.Template("secondarycontent"));
common.secondarycontent.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_secondarycontent;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.secondarycontent");
    c.push('\n<div class="common-secondary-column ');
    c.push(b.get("extraClass")(o, b, kwargs));
    c.push('">\n <div class="common-secondary-column-line"></div>\n');
    c.push(b.get("titleContainer")(o, b, kwargs));
    c.push(' <div class="common-secondary-column-content">\n');
    c.push(b.get("content")(o, b, kwargs));
    c.push(" </div>\n</div>");
    return c.join("");
};
common.secondarycontent.block_extraClass = new Surface.Block("common.secondarycontent.block_extraClass");
common.secondarycontent.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.secondarycontent.block_title = new Surface.Block("common.secondarycontent.block_title");
common.secondarycontent.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Title");
    return c.join("");
};
common.secondarycontent.block_titleContainer = new Surface.Block("common.secondarycontent.block_titleContainer");
common.secondarycontent.block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="common-secondary-column-title">\n ');
    c.push(b.get("title")(o, b, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
common.secondarycontent.block_content = new Surface.Block("common.secondarycontent.block_content");
common.secondarycontent.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
common.addTemplate(new Surface.Template("select"));
var block_common_selectable = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("selectable"));
common.selectable.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_selectable;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.selectable");
    var l_val;
    c.push("\n");
    l_val = ((typeof (o) != "undefined" && o !== null && typeof (o.value) != "undefined" && o.value !== null) ? o.value : -(1));
    c.push('<div class="common-selectable-container ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.cls) != "undefined" && o.cls !== null) ? o.cls : "")));
    c.push('">\n <input type="hidden" name="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")));
    c.push('" value="');
    c.push(Surface.valOut(l_val));
    c.push('" />\n <div class="common-selectable-left ');
    if ((l_val == 1)) {
        c.push("common-selectable-left-pressed");
    }
    c.push('">\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.left) != "undefined" && o.left !== null) ? o.left : "ON")));
    c.push('\n </div>\n <div class="common-selectable-middle"></div>\n <div class="common-selectable-right ');
    if ((l_val == 0)) {
        c.push("common-selectable-right-pressed");
    }
    c.push('">\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.right) != "undefined" && o.right !== null) ? o.right : "OFF")));
    c.push("\n </div>\n</div>");
    return c.join("");
};
var block_common_selectablebig = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("selectablebig"));
common.selectablebig.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_selectablebig;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.selectablebig");
    var l_val;
    c.push("\n");
    l_val = ((typeof (o) != "undefined" && o !== null && typeof (o.value) != "undefined" && o.value !== null) ? o.value : -(1));
    c.push('<div class="common-selectablebig-container ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.cls) != "undefined" && o.cls !== null) ? o.cls : "")));
    c.push('">\n <input id="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.id) != "undefined" && o.id !== null) ? o.id : "")));
    c.push('" type="hidden" name="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : "")));
    c.push('" value="');
    c.push(Surface.valOut(l_val));
    c.push('" />\n <div class="common-selectablebig-left ');
    if ((l_val == 1)) {
        c.push("common-selectablebig-left-pressed");
    }
    c.push('">\n <div class="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.leftInnerClass) != "undefined" && o.leftInnerClass !== null) ? o.leftInnerClass : "")));
    c.push('">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.left) != "undefined" && o.left !== null) ? o.left : "ON")));
    c.push('</div>\n </div>\n <div class="common-selectablebig-middle"></div>\n <div class="common-selectablebig-right ');
    if ((l_val == 0)) {
        c.push("common-selectablebig-right-pressed");
    }
    c.push('">\n <div class="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.rightInnerClass) != "undefined" && o.rightInnerClass !== null) ? o.rightInnerClass : "")));
    c.push('">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.right) != "undefined" && o.right !== null) ? o.right : "OFF")));
    c.push("</div>\n </div>\n</div>");
    return c.join("");
};
var block_common_serverfilter = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("serverfilter"));
common.serverfilter.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_serverfilter;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.serverfilter");
    var l_for_common_serverfilter_29_10_list;
    var l_url;
    var l_m;
    var l_filterText;
    var l_for_common_serverfilter_38_10_list;
    var l_gameexpansion;
    var l_realm;
    var l_for_common_serverfilter_20_10_list;
    c.push("\n");
    l_filterText = "";
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null) && (o.savedFilter != false))) {
        l_filterText = "Using saved filter";
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.gameexpansions) != "undefined" && o.savedFilter.gameexpansions !== null)) {
            l_for_common_serverfilter_20_10_list = o.savedFilter.gameexpansions;
            if ((S.Modifier.count(l_for_common_serverfilter_20_10_list) > 0)) {
                for (var l_for_common_serverfilter_20_10_key in l_for_common_serverfilter_20_10_list) {
                    if (!Surface.isValidLoopItem(l_for_common_serverfilter_20_10_list[l_for_common_serverfilter_20_10_key])) {
                        continue;
                    }
                    var l_v = l_for_common_serverfilter_20_10_list[l_for_common_serverfilter_20_10_key];
                    l_gameexpansion = $S.callFunction("common.gameexpansionMakeNice", l_v, b, kwargs);
                    l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, l_gameexpansion), ", ");
                }
            }
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.gamemodes) != "undefined" && o.savedFilter.gamemodes !== null)) {
            l_filterText = S.Modifier.concat(l_filterText, (("<span>" + "Mode") + ":</span> "));
            l_for_common_serverfilter_29_10_list = o.savedFilter.gamemodes;
            if ((S.Modifier.count(l_for_common_serverfilter_29_10_list) > 0)) {
                for (var l_for_common_serverfilter_29_10_key in l_for_common_serverfilter_29_10_list) {
                    if (!Surface.isValidLoopItem(l_for_common_serverfilter_29_10_list[l_for_common_serverfilter_29_10_key])) {
                        continue;
                    }
                    var l_v = l_for_common_serverfilter_29_10_list[l_for_common_serverfilter_29_10_key];
                    l_m = $S.callFunction("common.gamemodeDescription", l_realm.section, S.Modifier.upper(l_v), b, kwargs);
                    l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, l_m), ", ");
                }
            }
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.gamepresets) != "undefined" && o.savedFilter.gamepresets !== null)) {
            l_filterText = S.Modifier.concat(l_filterText, (("<span>" + "Preset") + ":</span> "));
            l_for_common_serverfilter_38_10_list = o.savedFilter.gamepresets;
            if ((S.Modifier.count(l_for_common_serverfilter_38_10_list) > 0)) {
                for (var l_for_common_serverfilter_38_10_key in l_for_common_serverfilter_38_10_list) {
                    if (!Surface.isValidLoopItem(l_for_common_serverfilter_38_10_list[l_for_common_serverfilter_38_10_key])) {
                        continue;
                    }
                    var l_v = l_for_common_serverfilter_38_10_list[l_for_common_serverfilter_38_10_key];
                    l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, l_v), ", ");
                }
            }
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.maps) != "undefined" && o.savedFilter.maps !== null)) {
            l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, S.Modifier.count(o.savedFilter.maps)), S.Modifier.pluralize(S.Modifier.count(o.savedFilter.maps), ((" " + "Map") + ", "), ((" " + "maps") + ", ")));
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.ranked) != "undefined" && o.savedFilter.ranked !== null)) {
            l_filterText = S.Modifier.concat(l_filterText, (("<span>" + "Ranked") + ":</span> "));
            if ((S.Modifier.count(o.savedFilter.ranked) == 2)) {
                l_filterText = S.Modifier.concat(l_filterText, ("Any" + ", "));
            } else {
                l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, S.Modifier.get(o.savedFilter.ranked, 0)), ", ");
            }
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.evented) != "undefined" && o.savedFilter.evented !== null)) {
            l_filterText = S.Modifier.concat(l_filterText, (("<span>" + "Live") + ":</span> "));
            if ((S.Modifier.count(o.savedFilter.evented) == 2)) {
                l_filterText = S.Modifier.concat(l_filterText, ("Any" + ", "));
            } else {
                l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, S.Modifier.get(o.savedFilter.evented, 0)), ", ");
            }
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null && typeof (o.savedFilter.punkbuster) != "undefined" && o.savedFilter.punkbuster !== null)) {
            l_filterText = S.Modifier.concat(l_filterText, (("<span>" + "PB") + ":</span> "));
            if ((S.Modifier.count(o.savedFilter.punkbuster) == 2)) {
                l_filterText = S.Modifier.concat(l_filterText, ("Any" + ", "));
            } else {
                l_filterText = S.Modifier.concat(S.Modifier.concat(l_filterText, S.Modifier.get(o.savedFilter.punkbuster, 0)), ", ");
            }
        }
        c.push("\n");
        l_filterText = S.Modifier.substring(l_filterText, 0, (S.Modifier.count(l_filterText) - 2));
        c.push("\n");
    }
    l_url = S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext);
    if ((l_filterText == "")) {
        l_filterText = "No filter set";
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.configureLink) != "undefined" && o.configureLink !== null) ? o.configureLink : true)) {
        l_filterText = S.Modifier.concat(l_filterText, (((("<a href='" + l_url) + "?expand=1'>") + "Configure") + "</a>"));
    }
    c.push(l_filterText);
    c.push("\n");
    return c.join("");
};
var block_common_servername = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("servername"));
common.servername.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_servername;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.servername");
    c.push("\n");
    o.limit = S.Modifier.toint(((typeof (o) != "undefined" && o !== null && typeof (o.limit) != "undefined" && o.limit !== null) ? o.limit : 18));
    o.first = S.Modifier.toint(((typeof (o) != "undefined" && o !== null && typeof (o.first) != "undefined" && o.first !== null) ? o.first : 8));
    c.push("\n");
    if ((S.Modifier.count(o.name) > o.limit)) {
        c.push("\n");
        c.push(Surface.valOut(S.Modifier.substring(o.name, 0, (o.limit - 2))));
        c.push("...\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut(o.name));
        c.push("\n");
    }
    return c.join("");
};
var block_common_socialshare = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("socialshare"));
common.socialshare.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_socialshare;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.socialshare");
    c.push('\n<div class="common-social-share-buttons');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null)) {
        c.push(" ");
        c.push(Surface.valOut(o.extraClass));
    }
    c.push('"');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.id) != "undefined" && o.id !== null)) {
        c.push(' id="');
        c.push(Surface.valOut(o.id));
        c.push('"');
    }
    c.push('>\n <iframe src="http://www.facebook.com/plugins/like.php?app_id=127336174026844&amp;href=');
    c.push(Surface.valOut(S.Modifier.urlencode(o.url)));
    c.push('&amp;send=false&amp;layout=button_count&amp;width=95&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:95px; height:21px; float: right;" allowTransparency="true"></iframe>\n <iframe src="http://platform.twitter.com/widgets/tweet_button.html#_=1312276833917&amp;count=horizontal&amp;id=twitter_tweet_button_0&amp;lang=en&amp;text=');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.tweet) != "undefined" && o.tweet !== null) ? o.tweet : "Visit Battlelog")));
    c.push("&amp;url=");
    c.push(Surface.valOut(S.Modifier.urlencode(o.url)));
    c.push('&amp;via=Battlefield" allowtransparency="true" frameborder="0" scrolling="no" class="twitter-share-button twitter-count-horizontal" style="width: 110px; height: 20px; float: right;" title="Twitter For Websites: Tweet Button"></iframe>\n</div>');
    return c.join("");
};
var block_common_square = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("square"));
common.square.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_square;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.square");
    c.push('<img width="3" height="3" class="common-square" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/common-square.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
var block_common_statsCompare = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("statsCompare"));
common.statsCompare.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_statsCompare;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.statsCompare");
    var l_compareDiff;
    var l_val;
    c.push("\n");
    o.compare = S.Modifier.tofloat(((typeof (o) != "undefined" && o !== null && typeof (o.compare) != "undefined" && o.compare !== null) ? o.compare : 0));
    o.to = S.Modifier.tofloat(((typeof (o) != "undefined" && o !== null && typeof (o.to) != "undefined" && o.to !== null) ? o.to : 0));
    c.push("\n");
    if ((S.Modifier.toint(o.to) == 0)) {
        o.to = 1;
        if ((S.Modifier.toint(o.compare) == 0)) {
            o.compare = 1;
        }
    }
    c.push("\n");
    l_compareDiff = (S.Modifier.toint(o.to) - S.Modifier.toint(o.compare));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.compareStatsType) != "undefined" && o.compareStatsType !== null) ? o.compareStatsType : false)) {
        if ((o.compareStatsType == "timestamp")) {
            l_compareDiff = S.Modifier.duration(l_compareDiff);
        }
    }
    c.push('\n<div class="common-statscompare ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showDiff) != "undefined" && o.showDiff !== null) ? o.showDiff : false)) {
        c.push("bubble-title");
    }
    c.push('" ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showDiff) != "undefined" && o.showDiff !== null) ? o.showDiff : false)) {
        c.push('title="');
        c.push(Surface.valOut(l_compareDiff));
        c.push(' difference"');
    }
    c.push(' style="width: ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.width) != "undefined" && o.width !== null) ? o.width : 100)));
    c.push("px;");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.height) != "undefined" && o.height !== null))) {
        c.push(" border: none;");
    }
    c.push(" height: ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.height) != "undefined" && o.height !== null) ? o.height : 0)));
    c.push("px; line-height: ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.height) != "undefined" && o.height !== null) ? o.height : 0)));
    c.push('px;">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.height) != "undefined" && o.height !== null)) {
        c.push(' <div class="wfont common-statscompare-compare">');
        c.push(Surface.valOut(S.Modifier.niceInt(o.compare)));
        c.push('</div>\n <div class="wfont common-statscompare-to');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.showDifference) != "undefined" && o.showDifference !== null) ? o.showDifference : false) == true)) {
            c.push(" base-hide");
        }
        c.push('">');
        c.push(Surface.valOut(S.Modifier.niceInt(o.to)));
        c.push('</div>\n <div class="common-statscompare-difference');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.showDifference) != "undefined" && o.showDifference !== null) ? o.showDifference : false) == false)) {
            c.push(" base-hide");
        }
        c.push('">');
        c.push(Surface.valOut(S.Modifier.niceInt((o.to - o.compare))));
        c.push("</div>\n");
    }
    c.push('\n <div class="common-statscompare-meter');
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.height) != "undefined" && o.height !== null))) {
        c.push("-thick");
    }
    c.push('">\n');
    if ((o.to < o.compare)) {
        l_val = S.Modifier.toint((((o.compare - o.to) / S.Modifier.tofloat(o.compare)) * 100));
        if ((l_val < 0)) {
            l_val = 0;
        }
        if ((l_val > 100)) {
            l_val = 100;
        }
        c.push('\n <div class="common-statscompare-meter-negative">\n <div class="common-statscompare-meter-negative-line" style="width: ');
        c.push(Surface.valOut(l_val));
        c.push('%;"></div>\n');
        if (!(((typeof (o) != "undefined" && o !== null && typeof (o.noSeparator) != "undefined" && o.noSeparator !== null) ? o.noSeparator : false))) {
            c.push(' <div class="common-statscompare-meter-separator"></div>\n');
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    if ((o.to >= o.compare)) {
        l_val = S.Modifier.toint((((o.to - o.compare) / S.Modifier.tofloat(o.to)) * 100));
        if ((l_val < 0)) {
            l_val = 0;
        }
        if ((l_val > 100)) {
            l_val = 100;
        }
        c.push(' <div class="common-statscompare-meter-positive">\n <div class="common-statscompare-meter-positive-line" style="width: ');
        c.push(Surface.valOut(l_val));
        c.push('%;"></div>\n');
        if (!(((typeof (o) != "undefined" && o !== null && typeof (o.noSeparator) != "undefined" && o.noSeparator !== null) ? o.noSeparator : false))) {
            c.push(' <div class="common-statscompare-meter-separator"></div>\n');
        }
        c.push(" </div>\n");
    }
    c.push(" </div>\n</div>");
    return c.join("");
};
var block_common_statsimg = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("statsimg"));
common.statsimg.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_statsimg;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.statsimg");
    c.push("\n");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.game) != "undefined" && o.game !== null) ? o.game : "bfbc2") == "bf3")) {
        c.push("\n <img ");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null)) {
            c.push('title="');
            c.push(Surface.valOut(o.title));
            c.push('"');
        }
        c.push(" ");
        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", o.type, ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : "small"), b, kwargs)));
        c.push(' src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/vehicles/default.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n');
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null)) {
            if ((((o.type == "pins") || (o.type == "achievements")) || (o.type == "insignias"))) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"name": o.imageName,"type": o.type,"personaName": o.persona.personaName,"personaId": o.persona.personaId})));
                c.push('">\n');
            } else {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, {"name": o.imageName,"type": o.type,"personaName": o.persona.personaName,"personaId": o.persona.personaId})));
                c.push('">\n');
            }
        }
        c.push(" <img ");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null)) {
            c.push('title="');
            c.push(Surface.valOut(o.title));
            c.push('"');
        }
        c.push(" ");
        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", o.type, ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : "small"), b, kwargs)));
        c.push(' src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/", ((typeof (o) != "undefined" && o !== null && typeof (o.game) != "undefined" && o.game !== null) ? o.game : "bfbc2")), "/stats/"), o.type), "/"), ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : "small")), "/"), o.imageName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n ');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.persona) != "undefined" && o.persona !== null)) {
            c.push("</a>");
        }
        c.push("\n");
    }
    return c.join("");
};
var block_common_userTitle = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("userTitle"));
common.userTitle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_userTitle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.userTitle");
    c.push('\n<div class="common-usertitle">\n <div class="common-usertitle-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": "52","user": o.user}, null, kwargs));
    c.push('\n </div>\n <div class="common-usertitle-user-info">\n <h1 class="common-usertitle-title">');
    c.push(Surface.valOut(o.user.username));
    c.push("s ");
    c.push(Surface.valOut(o.pageTitle));
    c.push('</h1>\n <div class="common-usertitle-user-info">\n <div class="common-usertitle-user-info-solider-game">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.game, o.persona.namespace, 0, b, kwargs)));
    c.push('"></span>\n </div>\n  <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.persona, o.game, o.persona.namespace, b, kwargs))));
    c.push('">');
    c.push(Surface.valOut(o.persona.personaName));
    c.push("</a>\n </div>\n </div>\n</div>");
    return c.join("");
};
var block_common_usertag = new Surface.BlockConfig("", {});
common.addTemplate(new Surface.Template("usertag"));
common.usertag.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_common_usertag;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("common");
    Surface.Renderer.addUsedTemplate("common.usertag");
    c.push("\n");
    if ((o.userTag == 1)) {
        c.push("\n");
    } else {
        if ((o.userTag == 2)) {
            c.push(' <a href="http://www.dice.se"><img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/tags/dice.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" /></a>\n');
        } else {
            if ((o.userTag == 3)) {
                c.push(' <a href="http://www.ea.com"><img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/tags/ea.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" /></a>\n');
            } else {
                if ((o.userTag == 4)) {
                    c.push(' <img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/tags/mod.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                } else {
                    if ((o.userTag == 5)) {
                        c.push(' <img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/common/tags/battlelog.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                    }
                }
            }
        }
    }
    return c.join("");
};
if (typeof consolefeed == "undefined") {
    var consolefeed = {};
}
var surf_consolefeed_component = new Surface.Component("consolefeed");
surf_consolefeed_component.extend(consolefeed);
consolefeed = surf_consolefeed_component;
var block_consolefeed_index = new Surface.BlockConfig("base.index", {"main": "consolefeed.index.block_main"});
consolefeed.addTemplate(new Surface.Template("index"));
if (typeof coop == "undefined") {
    var coop = {};
}
var surf_coop_component = new Surface.Component("coop");
surf_coop_component.extend(coop);
coop = surf_coop_component;
var block_coop_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "coop.base.block_titleComponent"});
coop.addTemplate(new Surface.Template("base"));
coop.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.base");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
coop.base.block_titleComponent = new Surface.Block("coop.base.block_titleComponent");
coop.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("CO-OP - ");
    return c.join("");
};
var block_coop_create = new Surface.BlockConfig("coop.base", {"bodyClass": "coop.create.block_bodyClass","mainContent": "coop.create.block_mainContent"});
coop.addTemplate(new Surface.Template("create"));
coop.create.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_create;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.create");
    return Surface.importTemplate("coop.base", o, b, kwargs);
};
coop.create.block_bodyClass = new Surface.Block("coop.create.block_bodyClass");
coop.create.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
coop.create.block_mainContent = new Surface.Block("coop.create.block_mainContent");
coop.create.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <input id="coop-getMissionData-urlaction" type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/getMissionData/{personaId}/{level}/", Surface.urlContext, {"personaId": "#PERSONAID#","level": "#LEVEL#"})));
    c.push('" />\n <input id="coop-createBodyFetch-urlaction" type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/createBodyFetch/{userId}/{personaId}/", Surface.urlContext)));
    c.push('" />\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n <div class="coop-container">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.coopUserCurrentSoldier) != "undefined" && o.coopUserCurrentSoldier !== null)) {
        c.push('\n <span id="coop-owner-persona" data-id="');
        c.push(Surface.valOut(o.coopUserCurrentSoldier.personaId));
        c.push('" style="display: none"></span>\n ');
        c.push(Surface.importTemplate(("common" + ("." + "userTitle")), {"pageTitle": "CO-OP","user": o.coopUser,"persona": o.coopUserCurrentSoldier,"game": 2}, null, kwargs));
        c.push("\n");
    } else {
        c.push(" HANDLE THAT NO PERSONA EXISTS HERE\n");
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.coopUserCurrentSoldier) != "undefined" && o.coopUserCurrentSoldier !== null)) {
        c.push(' <div id="coop-body-fetch-url" url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/createBodyFetch/{userId}/{personaId}/", Surface.urlContext, {"userId": o.coopUserCurrentSoldier.userId,"personaId": o.coopUserCurrentSoldier.personaId})));
        c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n </div>\n <div id="coop-mission-container">&nbsp;</div>\n');
    } else {
        c.push(" HANDLE THAT NO PERSONA EXISTS HERE\n");
    }
    c.push(' </div>\n </div>\n </div>\n <!-- Url area -->\n <input id="coop-getmissionaccess-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/getFriendsWithAccess/{level}/{page}/", Surface.urlContext, {"level": "#LEVEL#","page": "#PAGE#"})));
    c.push('" type="hidden" />\n');
    return c.join("");
};
var block_coop_createbody = new Surface.BlockConfig("", {});
coop.addTemplate(new Surface.Template("createbody"));
coop.createbody.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    var l_m;
    var l_for_coop_createbody_7_6_list;
    var l_chapters;
    var l_levels;
    var l_session;
    var l_for_coop_createbody_5_2_list;
    c.push("\n");
    l_chapters = $S.callFunction("common.getCoopChaptersVenice", b, kwargs);
    c.push("\n");
    l_for_coop_createbody_5_2_list = l_chapters;
    if ((S.Modifier.count(l_for_coop_createbody_5_2_list) > 0)) {
        for (var l_for_coop_createbody_5_2_key in l_for_coop_createbody_5_2_list) {
            if (!Surface.isValidLoopItem(l_for_coop_createbody_5_2_list[l_for_coop_createbody_5_2_key])) {
                continue;
            }
            var l_chapter = l_for_coop_createbody_5_2_list[l_for_coop_createbody_5_2_key];
            l_levels = l_chapter.levels;
            l_for_coop_createbody_7_6_list = l_levels;
            if ((S.Modifier.count(l_for_coop_createbody_7_6_list) > 0)) {
                for (var l_for_coop_createbody_7_6_key in l_for_coop_createbody_7_6_list) {
                    if (!Surface.isValidLoopItem(l_for_coop_createbody_7_6_list[l_for_coop_createbody_7_6_key])) {
                        continue;
                    }
                    var l_level = l_for_coop_createbody_7_6_list[l_for_coop_createbody_7_6_key];
                    l_m = S.Modifier.get(l_level, "missions");
                    c.push(' <div class="coop-mission-');
                    c.push(Surface.valOut(l_m.name));
                    c.push('" style="visibility:hidden;display:none;"></div>\n');
                }
            }
        }
    }
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<div id="coop-missions">\n');
    if (o.blazeError) {
        c.push(' <div class="base-usermsg base-usermsg-error base-show">\n <p>\n ');
        c.push(Surface.valOut("We're currently having issues with the EA back end. Please try again later"));
        c.push("\n </p>\n </div>\n");
    }
    c.push('\n <div class="coop-overview-header">\n <div class="coop-overview-header-title">');
    c.push(Surface.valOut("Mission Overview"));
    c.push('</div>\n </div>\n <div id="coop-deckofcards">\n');
    c.push(coop.createbody.surface_78_10.render({"chapters": ((typeof (l_chapters) != "undefined" && l_chapters !== null) ? l_chapters : null),"takenLevels": ((typeof (o) != "undefined" && o !== null && typeof (o.takenLevels) != "undefined" && o.takenLevels !== null) ? o.takenLevels : null),"unlockedLevels": ((typeof (o) != "undefined" && o !== null && typeof (o.unlockedLevels) != "undefined" && o.unlockedLevels !== null) ? o.unlockedLevels : null)}, b, kwargs));
    c.push(' </div>\n <div id="coop-mission-info-wrapper" class="common-box">\n');
    c.push(coop.createbody.surface_123_10.render({"canLaunch": ((typeof (o) != "undefined" && o !== null && typeof (o.canLaunch) != "undefined" && o.canLaunch !== null) ? o.canLaunch : null),"completedDifficulties": ((typeof (o) != "undefined" && o !== null && typeof (o.completedDifficulties) != "undefined" && o.completedDifficulties !== null) ? o.completedDifficulties : null),"friendAccess": ((typeof (o) != "undefined" && o !== null && typeof (o.friendAccess) != "undefined" && o.friendAccess !== null) ? o.friendAccess : null),"friendLevelUnlocked": ((typeof (o) != "undefined" && o !== null && typeof (o.friendLevelUnlocked) != "undefined" && o.friendLevelUnlocked !== null) ? o.friendLevelUnlocked : null),"friendPersona": ((typeof (o) != "undefined" && o !== null && typeof (o.friendPersona) != "undefined" && o.friendPersona !== null) ? o.friendPersona : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"friendsLeaderboard": ((typeof (o) != "undefined" && o !== null && typeof (o.friendsLeaderboard) != "undefined" && o.friendsLeaderboard !== null) ? o.friendsLeaderboard : null),"mission": ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null) ? o.mission : null),"page": ((typeof (o) != "undefined" && o !== null && typeof (o.page) != "undefined" && o.page !== null) ? o.page : null),"pages": ((typeof (o) != "undefined" && o !== null && typeof (o.pages) != "undefined" && o.pages !== null) ? o.pages : null),"session": ((typeof (l_session) != "undefined" && l_session !== null) ? l_session : null)}, b, kwargs));
    c.push('\n <div class="coop-mission-show-difficulty coop-mission-info-difficulty">\n');
    if (o.canLaunch) {
        c.push(' <ul class="common-selector-alt disabled">\n <li class="first">\n <div class="easy">');
        c.push(Surface.valOut("Easy"));
        c.push('</div>\n </li>\n <li class="selected">\n <div class="normal">');
        c.push(Surface.valOut("Normal"));
        c.push('</div>\n </li>\n <li class="last">\n <div class="hard">');
        c.push(Surface.valOut("Hard"));
        c.push("</div>\n </li>\n </ul>\n");
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n</div>\n<div style="clear: both;"></div>');
    return c.join("");
};
coop.createbody.surface_78_10 = new Surface.SingleSurface("coop.createbody.surface_78_10");
coop.createbody.surface_78_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    c.push('<surf:container id="');
    c.push("coop-cards");
    c.push('">');
    var l_for_coop_createbody_83_26_hasNext;
    var l_isCompleted;
    var l_m;
    var l_for_coop_createbody_83_26_iteration;
    var l_for_coop_createbody_83_26_count;
    var l_isUnlocked;
    var l_levels;
    var l_for_coop_createbody_80_14_list;
    var l_for_coop_createbody_83_26_list;
    c.push("\n");
    l_for_coop_createbody_80_14_list = o.chapters;
    if ((S.Modifier.count(l_for_coop_createbody_80_14_list) > 0)) {
        for (var l_for_coop_createbody_80_14_key in l_for_coop_createbody_80_14_list) {
            if (!Surface.isValidLoopItem(l_for_coop_createbody_80_14_list[l_for_coop_createbody_80_14_key])) {
                continue;
            }
            var l_chapter = l_for_coop_createbody_80_14_list[l_for_coop_createbody_80_14_key];
            c.push(' <div class="coop-chapter coop-chapter-');
            c.push(Surface.valOut(l_chapter.chapterId));
            c.push('">\n');
            l_levels = l_chapter.levels;
            l_for_coop_createbody_83_26_list = l_levels;
            l_for_coop_createbody_83_26_count = S.Modifier.count(l_for_coop_createbody_83_26_list);
            l_for_coop_createbody_83_26_iteration = 0;
            if ((S.Modifier.count(l_for_coop_createbody_83_26_list) > 0)) {
                for (var l_for_coop_createbody_83_26_key in l_for_coop_createbody_83_26_list) {
                    if (!Surface.isValidLoopItem(l_for_coop_createbody_83_26_list[l_for_coop_createbody_83_26_key])) {
                        continue;
                    }
                    var l_level = l_for_coop_createbody_83_26_list[l_for_coop_createbody_83_26_key];
                    l_for_coop_createbody_83_26_iteration = (l_for_coop_createbody_83_26_iteration + 1);
                    l_for_coop_createbody_83_26_hasNext = (l_for_coop_createbody_83_26_iteration < l_for_coop_createbody_83_26_count);
                    l_m = S.Modifier.get(l_level, "missions");
                    l_isCompleted = S.Modifier.get(o.takenLevels, S.Modifier.get(l_m, "name"), false);
                    l_isUnlocked = S.Modifier.contains(o.unlockedLevels, S.Modifier.get(l_m, "name"));
                    c.push('\n <div id="coop-mission-');
                    c.push(Surface.valOut(l_m.name));
                    c.push('" data-mission="');
                    c.push(Surface.valOut(l_m.name));
                    c.push('" class="common-box coop-card ');
                    if (((l_for_coop_createbody_83_26_iteration == 1) && l_for_coop_createbody_83_26_hasNext)) {
                        c.push(" first");
                    } else {
                        if (((l_for_coop_createbody_83_26_iteration == 1) && !(l_for_coop_createbody_83_26_hasNext))) {
                            c.push(" solo");
                        }
                    }
                    if (l_isCompleted) {
                        c.push(" unlocked");
                    } else {
                        if (!(l_isUnlocked)) {
                            c.push(" disabled");
                        }
                    }
                    c.push('">\n <div class="coop-card-inner">\n');
                    if (l_isUnlocked) {
                        c.push(' <img width="146" height="79" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.lower(S.Modifier.concat("/public/coop/cards/146x79/", l_m.name)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                    } else {
                        c.push(' <img width="146" height="79" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/coop/cards/146x79/card-classified.jpg", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                    }
                    if (l_isUnlocked) {
                        c.push(' <div class="coop-mission-unlock-difficultys">\n <div class="coop-mission-unlock-diffs coop-mission-unlock-hard');
                        if (S.Modifier.contains(S.Modifier.get(l_isCompleted, "difficulties", []), "HARD")) {
                            c.push("-completed");
                        }
                        c.push('"></div>\n <div class="coop-mission-unlock-diffs coop-mission-unlock-normal');
                        if (S.Modifier.contains(S.Modifier.get(l_isCompleted, "difficulties", []), "NORMAL")) {
                            c.push("-completed");
                        }
                        c.push('"></div>\n <div class="coop-mission-unlock-diffs coop-mission-unlock-easy');
                        if (S.Modifier.contains(S.Modifier.get(l_isCompleted, "difficulties", []), "EASY")) {
                            c.push("-completed");
                        }
                        c.push('"></div>\n </div>\n');
                    }
                    c.push(" </div>\n");
                    if ((l_chapter.chapterId != 4)) {
                        c.push(' <div class="coop-mission-unlock coop-mission-unlock-');
                        if (l_isCompleted) {
                            c.push("true");
                        } else {
                            c.push("false");
                        }
                        c.push(" ");
                        if ((Surface.modulo(l_for_coop_createbody_83_26_iteration, 2) == 0)) {
                            c.push("second");
                        } else {
                            c.push("first");
                        }
                        c.push('"></div>\n');
                    }
                    c.push('\n <div class="coop-card-unlocked-checkbox"></div>\n </div>\n');
                }
            }
            c.push(' <div class="base-clear"></div>\n </div>\n');
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.createbody", "surface_78_10", "coop-cards", o, b);
    return c.join("");
};
coop.createbody.surface_123_10 = new Surface.SingleSurface("coop.createbody.surface_123_10");
coop.createbody.surface_139_34 = new Surface.SingleSurface("coop.createbody.surface_139_34");
coop.createbody.surface_139_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    c.push('<surf:container id="');
    c.push("coop-dropdown-friends");
    c.push('">');
    var l_for_coop_createbody_150_46_hasNext;
    var l_for_coop_createbody_150_46_list;
    var l_for_coop_createbody_150_46_count;
    var l_for_coop_createbody_150_46_iteration;
    c.push(' <ul>\n <li class="coop-start-play-with-random">\n <div class="coop-mission-info-header-launch-dropdown-public-icon"></div>\n <div class="base-left coop-mission-info-header-launch-dropdown-username">\n Public Matchmake\n </div>\n </li>\n');
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null))) {
        c.push(' <li class="last not-selectable">');
        c.push(Surface.valOut("Loading..."));
        c.push("</li>\n");
    } else {
        l_for_coop_createbody_150_46_list = o.friends;
        l_for_coop_createbody_150_46_count = S.Modifier.count(l_for_coop_createbody_150_46_list);
        l_for_coop_createbody_150_46_iteration = 0;
        if ((S.Modifier.count(l_for_coop_createbody_150_46_list) > 0)) {
            for (var l_for_coop_createbody_150_46_key in l_for_coop_createbody_150_46_list) {
                if (!Surface.isValidLoopItem(l_for_coop_createbody_150_46_list[l_for_coop_createbody_150_46_key])) {
                    continue;
                }
                var l_user = l_for_coop_createbody_150_46_list[l_for_coop_createbody_150_46_key];
                l_for_coop_createbody_150_46_iteration = (l_for_coop_createbody_150_46_iteration + 1);
                l_for_coop_createbody_150_46_hasNext = (l_for_coop_createbody_150_46_iteration < l_for_coop_createbody_150_46_count);
                o.friendLevelUnlocked = S.Modifier.get(o.friendAccess, l_user.userId);
                c.push(' <li rel="');
                c.push(Surface.valOut(l_user.userId));
                c.push('" class="coop-start-play-with-friend');
                if (!(l_for_coop_createbody_150_46_hasNext)) {
                    c.push(" last");
                }
                if (!(o.friendLevelUnlocked)) {
                    c.push(" not-selectable");
                }
                c.push('">\n <div class="base-left">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"userpopup": 0,"user": l_user,"gravatarSize": 22,"hideLink": true}, null, kwargs));
                c.push('\n </div>\n <div class="base-left coop-mission-info-header-launch-dropdown-username">');
                c.push(Surface.valOut(l_user.username));
                c.push("</div>\n ");
                if (!(o.friendLevelUnlocked)) {
                    c.push('<div class="locked">Locked</div>');
                }
                c.push("\n </li>\n");
            }
        } else {
            c.push(' <li class="last not-selectable">');
            c.push(Surface.valOut("Found no friends online"));
            c.push("</li>\n");
        }
    }
    c.push("\n </ul>\n");
    if ((o.pages > 1)) {
        c.push(' <div id="friends-pagination" data-page="');
        c.push(Surface.valOut(o.page));
        c.push('">\n <div class="pagination-pagination-right">\n');
        if ((o.page > 0)) {
            c.push(" ");
            c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": "#","enabled": 1,"type": "prev"}, null, kwargs));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": "#","enabled": 0,"type": "prev-disabled"}, null, kwargs));
            c.push("\n");
        }
        c.push("\n");
        if (((o.pages - 1) > o.page)) {
            c.push(" ");
            c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": "#","enabled": 1,"type": "next"}, null, kwargs));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": "#","enabled": 0,"type": "next-disabled"}, null, kwargs));
            c.push("\n");
        }
        c.push(" </div>\n </div>\n");
    }
    c.push('\n <div class="base-button-dropdown-shadow"></div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.createbody", "surface_139_34", "coop-dropdown-friends", o, b);
    return c.join("");
};
coop.createbody.surface_195_26 = new Surface.SingleSurface("coop.createbody.surface_195_26");
coop.createbody.surface_195_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    c.push('<surf:container id="');
    c.push("surface-coop-completion");
    c.push('">');
    var l_completed;
    var l_for_coop_createbody_200_38_list;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.completedDifficulties) != "undefined" && o.completedDifficulties !== null) ? o.completedDifficulties : false)) {
        c.push(' <ul id="difficulty-completed">\n');
        l_for_coop_createbody_200_38_list = ["EASY", "NORMAL", "HARD"];
        if ((S.Modifier.count(l_for_coop_createbody_200_38_list) > 0)) {
            for (var l_for_coop_createbody_200_38_key in l_for_coop_createbody_200_38_list) {
                if (!Surface.isValidLoopItem(l_for_coop_createbody_200_38_list[l_for_coop_createbody_200_38_key])) {
                    continue;
                }
                var l_difficulty = l_for_coop_createbody_200_38_list[l_for_coop_createbody_200_38_key];
                l_completed = S.Modifier.get(o.completedDifficulties, l_difficulty);
                c.push(' <li class="');
                c.push(Surface.valOut(S.Modifier.lower(l_difficulty)));
                c.push(" ");
                if (l_completed) {
                    c.push("completed");
                }
                c.push('"><div>');
                c.push(Surface.valOut(S.Modifier.capitalize(S.Modifier.lower(l_difficulty))));
                c.push("</div></li>\n");
            }
        }
        c.push(" </ul>\n");
    } else {
        c.push(' <div class="coop-mission-got-no-stats">');
        c.push(Surface.valOut("Loading..."));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.createbody", "surface_195_26", "surface-coop-completion", o, b);
    return c.join("");
};
coop.createbody.surface_221_26 = new Surface.SingleSurface("coop.createbody.surface_221_26");
coop.createbody.surface_221_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    c.push('<surf:container id="');
    c.push("surface-coop-friendsleaderboard");
    c.push('">');
    var l_for_coop_createbody_223_34_iteration;
    var l_for_coop_createbody_223_34_list;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friendsLeaderboard) != "undefined" && o.friendsLeaderboard !== null) ? o.friendsLeaderboard : false)) {
        l_for_coop_createbody_223_34_list = o.friendsLeaderboard;
        l_for_coop_createbody_223_34_iteration = 0;
        if ((S.Modifier.count(l_for_coop_createbody_223_34_list) > 0)) {
            for (var l_for_coop_createbody_223_34_key in l_for_coop_createbody_223_34_list) {
                if (!Surface.isValidLoopItem(l_for_coop_createbody_223_34_list[l_for_coop_createbody_223_34_key])) {
                    continue;
                }
                var l_data = l_for_coop_createbody_223_34_list[l_for_coop_createbody_223_34_key];
                l_for_coop_createbody_223_34_iteration = (l_for_coop_createbody_223_34_iteration + 1);
                if ((l_for_coop_createbody_223_34_iteration > 10)) {
                    continue;
                }
                o.friendPersona = S.Modifier.get(l_data, "persona");
                c.push(' <div class="coop-mission-friend-container ">\n <div class="coop-mission-friend-avatar">');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friendPersona.user,"gravatarSize": 22}, null, kwargs));
                c.push('</div>\n <div class="coop-mission-friend-rank">');
                c.push(Surface.valOut(l_for_coop_createbody_223_34_iteration));
                c.push('</div>\n <a class="coop-mission-friend-username" href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.friendPersona, ((typeof (o) != "undefined" && o !== null && typeof (o.friendPersona) != "undefined" && o.friendPersona !== null && typeof (o.friendPersona.game) != "undefined" && o.friendPersona.game !== null) ? o.friendPersona.game : 2), ((typeof (o) != "undefined" && o !== null && typeof (o.friendPersona) != "undefined" && o.friendPersona !== null && typeof (o.friendPersona.namespace) != "undefined" && o.friendPersona.namespace !== null) ? o.friendPersona.namespace : 1), b, kwargs))));
                c.push('">');
                c.push(Surface.valOut(o.friendPersona.personaName));
                c.push('</a>\n <div class="coop-mission-friend-points">');
                c.push(Surface.valOut(S.Modifier.numberformat(S.Modifier.get(l_data, "score"), "'.'", "','", "'3'")));
                c.push(" ");
                c.push(Surface.valOut("pts"));
                c.push("</div>\n </div>\n");
            }
            c.push(' <div class="base-clear"></div>\n <a class="coop-mission-info-leaderboard-link" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/coop/{group}/{platform}/{friends}/", Surface.urlContext, {"group": S.Modifier.lower(o.mission.name),"username": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null && typeof (o.session.user.username) != "undefined" && o.session.user.username !== null) ? o.session.user.username : "None"),"platform": Surface.globalContext.staticContext.platforms.PC,"friends": 1})));
            c.push('">');
            c.push(Surface.valOut("View full leaderboard"));
            c.push("</a>\n");
        } else {
            c.push(' <div class="coop-mission-got-no-stats">');
            c.push(Surface.valOut("No one has finished this mission yet."));
            c.push("</div>\n");
        }
    } else {
        c.push(' <div class="coop-mission-got-no-stats">');
        c.push(Surface.valOut("Loading..."));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.createbody", "surface_221_26", "surface-coop-friendsleaderboard", o, b);
    return c.join("");
};
coop.createbody.surface_123_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createbody;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createbody");
    c.push('<surf:container id="');
    c.push("coop-info-mission");
    c.push('">');
    var l_missionInfoTitle;
    var l_missionInfoDescription;
    var l_missionInfo;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null)) {
        l_missionInfo = $S.callFunction("coop.coopmission", o.mission.name, b, kwargs);
        l_missionInfoTitle = S.Modifier.get(l_missionInfo, "title");
        l_missionInfoDescription = S.Modifier.get(l_missionInfo, "description");
        c.push('\n <input id="coop-current-mission" type="hidden" value="');
        c.push(Surface.valOut(o.mission.name));
        c.push('"/>\n <div class="coop-mission-info-header" style="background-image: url(');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.lower(S.Modifier.concat("/public/coop/cards/652x310/", o.mission.name)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push(');">\n <div class="coop-mission-info-header-body">\n <div class="coop-mission-info-header-title">');
        c.push(Surface.valOut((S.translations[l_missionInfoTitle] || l_missionInfoTitle)));
        c.push('</div>\n <div class="coop-mission-info-header-launch-wrapper">\n <button class="base-button-arrow-large-drop base-button-general-dropdown ');
        if (!(o.canLaunch)) {
            c.push("disabled");
        }
        c.push('" id="coop-mission-info-header-launch">');
        c.push(Surface.valOut("Start mission"));
        c.push('</button>\n <div id="coop-mission-info-header-launch-dropdown" class="base-button-dropdown base-general-dropdown-area">\n');
        c.push(coop.createbody.surface_139_34.render({"friendAccess": ((typeof (o) != "undefined" && o !== null && typeof (o.friendAccess) != "undefined" && o.friendAccess !== null) ? o.friendAccess : null),"friendLevelUnlocked": ((typeof (o) != "undefined" && o !== null && typeof (o.friendLevelUnlocked) != "undefined" && o.friendLevelUnlocked !== null) ? o.friendLevelUnlocked : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"page": ((typeof (o) != "undefined" && o !== null && typeof (o.page) != "undefined" && o.page !== null) ? o.page : null),"pages": ((typeof (o) != "undefined" && o !== null && typeof (o.pages) != "undefined" && o.pages !== null) ? o.pages : null)}, b, kwargs));
        c.push(' </div>\n </div>\n </div>\n </div>\n <div class="coop-mission-info-column">\n <div class="coop-mission-info-column-header">');
        c.push(Surface.valOut("Mission completion"));
        c.push('</div>\n <div class="coop-mission-info-column-body coop-mission-info-difficulties-completion">\n');
        c.push(coop.createbody.surface_195_26.render({"completedDifficulties": ((typeof (o) != "undefined" && o !== null && typeof (o.completedDifficulties) != "undefined" && o.completedDifficulties !== null) ? o.completedDifficulties : null)}, b, kwargs));
        c.push(' <div class="base-clear"></div>\n </div>\n <div class="coop-mission-info-column-header">');
        c.push(Surface.valOut("Mission Briefing"));
        c.push('</div>\n <div class="coop-mission-info-column-body">\n <p class="coop-mission-infodescription">');
        c.push(Surface.valOut((S.translations[l_missionInfoDescription] || l_missionInfoDescription)));
        c.push('</p>\n </div>\n </div>\n <div class="coop-mission-info-column">\n <div class="coop-mission-info-column-header">');
        c.push(Surface.valOut("Friends leaderboard"));
        c.push('</div>\n <div class="coop-mission-info-column-body">\n');
        c.push(coop.createbody.surface_221_26.render({"friendPersona": ((typeof (o) != "undefined" && o !== null && typeof (o.friendPersona) != "undefined" && o.friendPersona !== null) ? o.friendPersona : null),"friendsLeaderboard": ((typeof (o) != "undefined" && o !== null && typeof (o.friendsLeaderboard) != "undefined" && o.friendsLeaderboard !== null) ? o.friendsLeaderboard : null),"mission": ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null) ? o.mission : null),"session": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null) ? o.session : null)}, b, kwargs));
        c.push(" </div>\n </div>\n");
    } else {
        c.push(' <div class="coop-mission-info-header">\n <div class="coop-mission-info-header-body">\n <div class="coop-mission-info-header-title"></div>\n </div>\n </div>\n <div class="coop-mission-info-column">\n <div class="coop-mission-info-column-header">');
        c.push(Surface.valOut("Mission completion"));
        c.push('</div>\n <div class="coop-mission-info-column-body coop-mission-info-difficulties-completion"></div>\n <div class="coop-mission-info-column-header coop-mission-info-description-header">');
        c.push(Surface.valOut("Mission Briefing"));
        c.push('</div>\n </div>\n <div class="coop-mission-info-column">\n <div class="coop-mission-info-column-header">');
        c.push(Surface.valOut("Friends Leaderboard"));
        c.push("</div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.createbody", "surface_123_10", "coop-info-mission", o, b);
    return c.join("");
};
var block_coop_createheader = new Surface.BlockConfig("", {});
coop.addTemplate(new Surface.Template("createheader"));
coop.createheader.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_createheader;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.createheader");
    var l_image;
    var l_weaponsLocale;
    var l_name;
    var l_for_coop_createheader_58_26_list;
    var l_unlockPercentage;
    var l_actionStatsMap;
    var l_ul;
    c.push('\n <div class="coop-head-sideinfo">\n <div class="coop-head-sideinfo-header">\n </div>\n </div>\n <div class="base-clear"></div>\n <div class="base-box-push">\n <div class="base-box-push-inner">\n');
    l_actionStatsMap = {"kills": "Kills","saviorKills": "Savior Kills","headshots": "Headshots","manDownRevives": "Revives","killAssists": "Kill Assists","avengerKills": "Avenger Kills","vehicleDestroys": "Vehicle Destroys"};
    c.push('\n <div class="base-box-push-two-column">\n <h3>');
    c.push(Surface.valOut("Action stats"));
    c.push("</h3>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.actionScores) != "undefined" && o.actionScores !== null)) {
        c.push(' <ul class="common-list coop-actionstats-list">\n');
        l_for_coop_createheader_58_26_list = l_actionStatsMap;
        if ((S.Modifier.count(l_for_coop_createheader_58_26_list) > 0)) {
            for (var l_stat in l_for_coop_createheader_58_26_list) {
                if (!Surface.isValidLoopItem(l_for_coop_createheader_58_26_list[l_stat])) {
                    continue;
                }
                var l_statName = l_for_coop_createheader_58_26_list[l_stat];
                if ((S.Modifier.get(o.actionScores, l_stat) !== null)) {
                    c.push(" <li>");
                    c.push(Surface.valOut(l_statName));
                    c.push("<span>");
                    c.push(Surface.valOut(S.Modifier.get(o.actionScores, l_stat)));
                    c.push("</span></li>\n");
                }
            }
        }
        c.push(" </ul>\n");
    } else {
        c.push(' <div class="coop-head-no-stats">');
        c.push(Surface.valOut("Found no stats"));
        c.push("</div>\n");
    }
    c.push(' </div>\n <div class="base-box-push-four-column">\n <h3>');
    c.push(Surface.valOut("Total CO-OP Campaign score"));
    c.push("</h3>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.coopCampaign) != "undefined" && o.coopCampaign !== null)) {
        c.push(' <div class="base-box-push-column-box">\n <div class="coop-head-stats-campaign-stars">\n <div class="coop-head-stats-campaign-stars-count-outer">\n <img ');
        if ((o.coopCampaign.serviceStars == 0)) {
            c.push('class="coop-service-dimmed bubble-title" title="');
            c.push(Surface.valOut(S.Modifier.numberformat(o.coopCampaign.pointsUntilNext, "'.'", "','", "'3'")));
            c.push(' points left to unlock next Service Star"');
        }
        c.push(' width="43" height="43" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/servicestars/servicestar-43x43.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="">\n');
        if ((o.coopCampaign.serviceStars > 0)) {
            c.push(' <div id="coop-head-stats-campaign-stars-count">');
            c.push(Surface.valOut(o.coopCampaign.serviceStars));
            c.push("</div>\n");
        }
        c.push(' </div>\n </div>\n <div class="coop-head-stats-campaign-score">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.coopCampaign.totalScore, "'.'", "','", "'3'")));
        c.push("</div>\n </div>\n");
    } else {
        c.push(' <div class="coop-head-no-stats">');
        c.push(Surface.valOut("Found no stats"));
        c.push("</div>\n");
    }
    c.push(' </div>\n <div class="base-box-push-four-column">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.upcomingWeaponUnlock) != "undefined" && o.upcomingWeaponUnlock !== null)) {
        l_weaponsLocale = S.Modifier.get(o.bf3GadgetsLocale, "weapons");
        l_unlockPercentage = o.upcomingWeaponUnlock.unlockPercentage;
        l_ul = S.Modifier.get(o.upcomingWeaponUnlock, "weaponUnlock");
        l_name = S.Modifier.get(S.Modifier.get(l_weaponsLocale, l_ul.unlockId), "name");
        l_image = S.Modifier.get(S.Modifier.get(l_weaponsLocale, l_ul.unlockId), "image");
        o.platform = $S.callFunction("common.platformIntToPlatform", o.platformInt, b, kwargs);
        c.push('\n <h3 class="coop-unlock-box-h3">');
        c.push(Surface.valOut("Next Unlock"));
        c.push('</h3>\n <span class="coop-unlock-text">');
        c.push(Surface.valOut((8 - o.unlocksCount)));
        c.push('/7</span>\n <div class="base-box-push-column-box bubble-title" title="Unlock this to use in Multiplayer">\n <div id="coop-head-stats-progress-unlock">\n <div class="coop-head-stats-progress-next-unlock">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.coopPersona.personaName,"statsId": l_ul.unlockId,"statsName": l_name,"personaId": o.coopPersona.personaId})));
        c.push('">\n <img width="90" height="54" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n </a>\n </div>\n <div class="campaign-progress-bar coop-head-stats-progress-bar">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"value": l_unlockPercentage,"max": 100}, null, kwargs));
        c.push('\n <div class="coop-head-stats-progress-bar-nextinfo">\n <div class="coop-head-stats-progress-bar-nextinfo-title">');
        c.push(Surface.valOut((S.translations[l_name] || l_name)));
        c.push('</div>\n <div class="coop-head-stats-progress-bar-nextinfo-score">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.coopCampaign.totalScore, "'.'", "','", "'3'")));
        c.push(" / ");
        c.push(Surface.valOut(S.Modifier.numberformat(l_ul.valueNeeded, "'.'", "','", "'3'")));
        c.push("</div>\n </div>\n </div>\n </div>\n </div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_coop_find = new Surface.BlockConfig("coop.base", {"titleItem": "coop.find.block_titleItem","mainContent": "coop.find.block_mainContent"});
coop.addTemplate(new Surface.Template("find"));
var block_coop_friend = new Surface.BlockConfig("coop.base", {"titleItem": "coop.friend.block_titleItem","mainContent": "coop.friend.block_mainContent"});
coop.addTemplate(new Surface.Template("friend"));
coop.friend.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_friend;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.friend");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("coop.base", o, b, kwargs);
};
var block_coop_friend_use_92_21 = new Surface.BlockConfig("common.boxwideclean", {"content": "coop.friend._use_92_21_block_content","extraClassInner": "coop.friend._use_92_21_block_extraClassInner","titleContainer": "coop.friend._use_92_21_block_titleContainer","extraClass": "coop.friend._use_92_21_block_extraClass"});
var block_coop_friend_use_84_21 = new Surface.BlockConfig("common.secondarycontent", {"content": "coop.friend._use_84_21_block_content","title": "coop.friend._use_84_21_block_title"});
var block_coop_friend_use_50_21 = new Surface.BlockConfig("common.secondarycontent", {"content": "coop.friend._use_50_21_block_content","title": "coop.friend._use_50_21_block_title"});
var block_coop_friend_use_20_25 = new Surface.BlockConfig("common.focusbar", {"content": "coop.friend._use_20_25_block_content","extraClass": "coop.friend._use_20_25_block_extraClass"});
coop.friend.block_titleItem = new Surface.Block("coop.friend.block_titleItem");
coop.friend.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Friends campaigns - ");
    return c.join("");
};
coop.friend.surface_17_17 = new Surface.SingleSurface("coop.friend.surface_17_17");
coop.friend._use_20_25_block_extraClass = new Surface.Block("coop.friend._use_20_25_block_extraClass");
coop.friend._use_20_25_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("coop-player-area last");
    return c.join("");
};
coop.friend._use_20_25_block_content = new Surface.Block("coop.friend._use_20_25_block_content");
coop.friend._use_20_25_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_coopFriend;
    l_coopFriend = S.Modifier.get(Surface.globalContext, "coopFriend");
    c.push(' <div class="coop-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_coopFriend,"gravatarSize": 52}, null, kwargs));
    c.push('\n </div>\n <div class="coop-username">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "link")), l_coopFriend, null, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
coop.friend.surface_17_17.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_friend;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.friend");
    c.push('<surf:container id="');
    c.push("surface-coop-friend");
    c.push('">');
    var l_coopFriend;
    l_coopFriend = S.Modifier.get(Surface.globalContext, "coopFriend");
    if ((typeof (l_coopFriend) != "undefined" && l_coopFriend !== null)) {
        c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_coop_friend_use_20_25, kwargs));
    } else {
        c.push(' <div class="coop-player-area last coop-droparea">\n <div class="coop-friend-invite-info">\n ');
        c.push(Surface.valOut("Drop friend here to invite to play"));
        c.push('\n </div>\n <div class="coop-droparea-droppable">\n <div class="coop-friend-invite-info">\n ');
        c.push(Surface.valOut("Drop friend here to send invite"));
        c.push("\n </div>\n </div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.friend", "surface_17_17", "surface-coop-friend", o, b);
    return c.join("");
};
coop.friend._use_50_21_block_title = new Surface.Block("coop.friend._use_50_21_block_title");
coop.friend._use_50_21_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Current mission"));
    return c.join("");
};
coop.friend.surface_53_29 = new Surface.SingleSurface("coop.friend.surface_53_29");
coop.friend.surface_53_29.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_friend;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.friend");
    c.push('<surf:container id="');
    c.push("coop-area");
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null)) {
        c.push(' <div class="coop-mission-image">\n </div>\n <div class="campaign-mission-small-title">Mission ');
        c.push(Surface.valOut(o.mission.level));
        c.push('</div>\n <div class="campaign-mission-big-title">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null && typeof (o.mission.title) != "undefined" && o.mission.title !== null) ? o.mission.title : "no title...")));
        c.push('</div>\n <div class="campaign-mission-description">\n Aenean gravida, lorem eget tincidunt ullamcorper, nisi nisi auctor velit, eget eleifend elit nibh nec nunc. Donec nec est risus. Quisque arcu est, lobortis eu condimentum et, ullamcorper id purus. Donec laoreet nisi rutrum dolor ultricies vestibulum.\n </div>\n');
        if ((Surface.globalContext.coopUser.userId == Surface.globalContext.session.user.userId)) {
            c.push('\n <div class="campaign-mission-start">\n <form action="" method="POST" id="coop-load-mission">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <div class="coop-mission-difficulty-select">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "multichoice")), {"name": "difficulty","cls": "","joinchar": "|","labels": ["Easy", "Normal", "Hard", "Hardcore"],"pressed": [2]}, null, kwargs));
            c.push('\n </div>\n <input type="hidden" name="level" value="');
            c.push(Surface.valOut(o.mission.name));
            c.push('" />\n <input type="submit" class="base-button-arrow-gigantic" value="');
            c.push(Surface.valOut("Start mission"));
            c.push('" />\n </form>\n </div>\n');
        }
        c.push("\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.friend", "surface_53_29", "coop-area", o, b);
    return c.join("");
};
coop.friend._use_50_21_block_content = new Surface.Block("coop.friend._use_50_21_block_content");
coop.friend._use_50_21_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(coop.friend.surface_53_29.render({"mission": ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null) ? o.mission : null)}, b, kwargs));
    return c.join("");
};
coop.friend._use_84_21_block_title = new Surface.Block("coop.friend._use_84_21_block_title");
coop.friend._use_84_21_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
coop.friend._use_84_21_block_content = new Surface.Block("coop.friend._use_84_21_block_content");
coop.friend._use_84_21_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="coop-mission-leaderboard"></div>\n');
    return c.join("");
};
coop.friend._use_92_21_block_extraClass = new Surface.Block("coop.friend._use_92_21_block_extraClass");
coop.friend._use_92_21_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("campaign-missions-left-container");
    return c.join("");
};
coop.friend._use_92_21_block_extraClassInner = new Surface.Block("coop.friend._use_92_21_block_extraClassInner");
coop.friend._use_92_21_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("coop-block-inner");
    return c.join("");
};
coop.friend._use_92_21_block_titleContainer = new Surface.Block("coop.friend._use_92_21_block_titleContainer");
coop.friend._use_92_21_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
coop.friend._use_92_21_block_content = new Surface.Block("coop.friend._use_92_21_block_content");
coop.friend._use_92_21_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_coop_friend_147_28_iteration;
    var l_for_coop_friend_150_33_list;
    var l_for_coop_friend_154_41_list;
    var l_chapters;
    var l_levels;
    var l_coopGame;
    var l_for_coop_friend_147_28_list;
    l_coopGame = S.Modifier.get(Surface.globalContext, "coopGame");
    l_chapters = [{"chapterName": "Chapter 1","levels": [{"title": "Part 1:1","missions": [{"level": "1:1","name": "COOP_111","title": "You can't handle the truth"}, {"level": "1:2","name": "COOP_112","title": "Here's Looking at you, kid"}]}, {"title": "Part 1:2","missions": [{"level": "1:2","name": "COOP_121","title": "You're gonna need a bigger boat"}, {"level": "1:2","name": "COOP_122","title": "There's no place like home"}]}, {"title": "Part 1:3","missions": [{"level": "-","name": "COOP_131","title": "The rain in Spain stays mainly in the plain"}, {"level": 2,"name": "COOP_132","title": "May the force be with you"}]}]}, {"chapterName": "Chapter 2","levels": [{"title": "Part 2:1","missions": [{"level": 1,"name": "COOP_211","title": "Badges, we don't need no stinkin' badges"}]}, {"title": "Part 2:2","missions": [{"level": 1,"name": "COOP_221","title": "Thank you sir! May I have another!"}]}, {"title": "Part 2:3","missions": [{"level": 1,"name": "COOP_223","title": "Show me the money"}]}]}, {"chapterName": "Chapter 3","levels": [{"title": "Part 3:1","missions": [{"level": 1,"name": "COOP_311","title": "I'm the king of the world"}]}]}];
    c.push("\n");
    l_for_coop_friend_147_28_list = l_chapters;
    l_for_coop_friend_147_28_iteration = 0;
    if ((S.Modifier.count(l_for_coop_friend_147_28_list) > 0)) {
        for (var l_for_coop_friend_147_28_key in l_for_coop_friend_147_28_list) {
            if (!Surface.isValidLoopItem(l_for_coop_friend_147_28_list[l_for_coop_friend_147_28_key])) {
                continue;
            }
            var l_chapter = l_for_coop_friend_147_28_list[l_for_coop_friend_147_28_key];
            l_for_coop_friend_147_28_iteration = (l_for_coop_friend_147_28_iteration + 1);
            c.push(' <div class="coop-chapter-title ');
            if ((l_for_coop_friend_147_28_iteration == 1)) {
                c.push("first");
            }
            c.push('">');
            c.push(Surface.valOut(l_chapter.chapterName));
            c.push("</div>\n");
            l_levels = l_chapter.levels;
            l_for_coop_friend_150_33_list = l_levels;
            if ((S.Modifier.count(l_for_coop_friend_150_33_list) > 0)) {
                for (var l_for_coop_friend_150_33_key in l_for_coop_friend_150_33_list) {
                    if (!Surface.isValidLoopItem(l_for_coop_friend_150_33_list[l_for_coop_friend_150_33_key])) {
                        continue;
                    }
                    var l_level = l_for_coop_friend_150_33_list[l_for_coop_friend_150_33_key];
                    c.push(' <div class="coop-part-missions">\n <div class="coop-part-title">');
                    c.push(Surface.valOut(l_level.title));
                    c.push("</div>\n");
                    l_for_coop_friend_154_41_list = S.Modifier.get(l_level, "missions");
                    if ((S.Modifier.count(l_for_coop_friend_154_41_list) > 0)) {
                        for (var l_for_coop_friend_154_41_key in l_for_coop_friend_154_41_list) {
                            if (!Surface.isValidLoopItem(l_for_coop_friend_154_41_list[l_for_coop_friend_154_41_key])) {
                                continue;
                            }
                            var l_m = l_for_coop_friend_154_41_list[l_for_coop_friend_154_41_key];
                            c.push(' <div id="coop-mission-');
                            c.push(Surface.valOut(l_m.name));
                            c.push('" class="coop-missions-mission ');
                            if (((typeof (l_coopGame) != "undefined" && l_coopGame !== null && typeof (l_coopGame.level) != "undefined" && l_coopGame.level !== null) && (l_m.name == l_coopGame.level))) {
                                c.push("active");
                            }
                            c.push(' locked">\n <div class="coop-mission-map">\n </div>\n <div class="coop-missions-mission-title">\n');
                            if ((Surface.globalContext.coopUser.userId == Surface.globalContext.session.user.userId)) {
                                c.push(" <a>");
                                c.push(Surface.valOut(l_m.title));
                                c.push("</a>\n");
                            } else {
                                c.push(" ");
                                c.push(Surface.valOut(l_m.title));
                                c.push("\n");
                            }
                            c.push(' </div>\n </div>\n <script>\n $("#coop-mission-');
                            c.push(Surface.valOut(l_m.name));
                            c.push('").data({ "mission":');
                            c.push(Surface.valOut(l_m));
                            c.push(" });\n <\/script>\n");
                        }
                    }
                    c.push(" </div>\n");
                }
            }
        }
    }
    c.push("\n");
    return c.join("");
};
coop.friend.block_mainContent = new Surface.Block("coop.friend.block_mainContent");
coop.friend.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="base-big-title coop-big-title">\n ');
    c.push(Surface.valOut("CO-OP"));
    c.push(": 2 ");
    c.push(Surface.valOut("player online"));
    c.push("\n </div>\n");
    c.push(coop.friend.surface_17_17.render({"coopFriend": ((typeof (o) != "undefined" && o !== null && typeof (o.coopFriend) != "undefined" && o.coopFriend !== null) ? o.coopFriend : null)}, b, kwargs));
    c.push('\n <div class="base-clear"></div>\n <div class="base-secondary-right-column">\n');
    c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_coop_friend_use_50_21, kwargs));
    c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_coop_friend_use_84_21, kwargs));
    c.push(' </div>\n <div class="base-main-column">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_coop_friend_use_92_21, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_coop_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "coop.index.block_mainContent"});
coop.addTemplate(new Surface.Template("index"));
var block_coop_index_use_52_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "coop.index._use_52_22_block_content","titleContainer": "coop.index._use_52_22_block_titleContainer","extraClass": "coop.index._use_52_22_block_extraClass"});
var block_coop_index_use_44_22 = new Surface.BlockConfig("common.secondarycontent", {"content": "coop.index._use_44_22_block_content","title": "coop.index._use_44_22_block_title"});
var block_coop_index_use_16_22 = new Surface.BlockConfig("common.secondarycontent", {"content": "coop.index._use_16_22_block_content","title": "coop.index._use_16_22_block_title"});
coop.index.surface_19_30 = new Surface.SingleSurface("coop.index.surface_19_30");
coop.index.surface_19_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.index");
    c.push('<surf:container id="');
    c.push("coop-area");
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null)) {
        c.push(' <div class="campaign-mission-image">\n </div>\n <div class="campaign-mission-small-title">Mission ');
        c.push(Surface.valOut(o.mission.level));
        c.push('</div>\n <div class="campaign-mission-big-title">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.mission) != "undefined" && o.mission !== null && typeof (o.mission.title) != "undefined" && o.mission.title !== null) ? o.mission.title : "no title...")));
        c.push('</div>\n <div class="campaign-mission-description">\n Aenean gravida, lorem eget tincidunt ullamcorper, nisi nisi auctor velit, eget eleifend elit nibh nec nunc. Donec nec est risus. Quisque arcu est, lobortis eu condimentum et, ullamcorper id purus. Donec laoreet nisi rutrum dolor ultricies vestibulum.\n </div>\n <div class="campaign-mission-difficulty-select">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "multichoice")), {"name": "level","cls": "","joinchar": "|","labels": ["Easy", "Normal", "Hard", "Hardcore"],"pressed": [2]}, null, kwargs));
        c.push('\n </div>\n <div class="campaign-mission-start">\n <form action="" method="POST" id="campaign-load-mission" class="base-no-ajax">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="level" value="');
        c.push(Surface.valOut(o.mission.name));
        c.push('" />\n <input type="submit" class="base-button-arrow-gigantic" value="');
        c.push(Surface.valOut("Start mission"));
        c.push('" />\n </form>\n </div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.index", "surface_19_30", "coop-area", o, b);
    return c.join("");
};
var block_coop_invite = new Surface.BlockConfig("base.ajaxindex", {"bodyClass": "coop.invite.block_bodyClass","mainContent": "coop.invite.block_mainContent"});
coop.addTemplate(new Surface.Template("invite"));
var block_coop_invite_use_14_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "coop.invite._use_14_22_block_content","title": "coop.invite._use_14_22_block_title","extraClassInner": "coop.invite._use_14_22_block_extraClassInner","titleContainer": "coop.invite._use_14_22_block_titleContainer","extraClass": "coop.invite._use_14_22_block_extraClass"});
var block_coop_invite_use_30_42 = new Surface.BlockConfig("common.focusbar", {"content": "coop.invite._use_14_22__use_30_42_block_content","extraInnerClass": "coop.invite._use_14_22__use_30_42_block_extraInnerClass","extraClass": "coop.invite._use_14_22__use_30_42_block_extraClass"});
coop.invite.surface_20_30 = new Surface.SingleSurface("coop.invite.surface_20_30");
coop.invite._use_14_22__use_30_42_block_extraClass = new Surface.Block("coop.invite._use_14_22__use_30_42_block_extraClass");
coop.invite._use_14_22__use_30_42_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("coop-player-invite-area");
    return c.join("");
};
coop.invite._use_14_22__use_30_42_block_extraInnerClass = new Surface.Block("coop.invite._use_14_22__use_30_42_block_extraInnerClass");
coop.invite._use_14_22__use_30_42_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("coop-invite-invited");
    return c.join("");
};
coop.invite._use_14_22__use_30_42_block_content = new Surface.Block("coop.invite._use_14_22__use_30_42_block_content");
coop.invite._use_14_22__use_30_42_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    var l_coopGame;
    l_coopGame = S.Modifier.get(Surface.globalContext, "coopGame");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((l_coopGame.ownerId == l_session.user.userId)) {
        if ((l_coopGame.status == "created")) {
            c.push(' <div class="coop-player-waiting">\n <img width="16" height="16" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/coop/waiting-loader.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt=""><br>\n <span>');
            c.push(Surface.valOut("Waiting for player to join"));
            c.push('</span><br><br>\n <form action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/kickFriend/", Surface.urlContext)));
            c.push('" method="POST">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input type="button" class="base-button-arrow-small-grey" id="coop-kick-friend" value="Cancel" />\n </form>\n </div>\n');
        } else {
        }
    }
    c.push(' <div class="base-clear"></div>\n');
    return c.join("");
};
coop.invite.surface_20_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_invite;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.invite");
    c.push('<surf:container id="');
    c.push("surface-coop-friend");
    c.push('">');
    var l_coopGame;
    l_coopGame = S.Modifier.get(Surface.globalContext, "coopGame");
    c.push('\n <div class="coop-invite-title">');
    c.push(Surface.valOut("Invite a friend"));
    c.push('</div>\n <div class="coop-dropzone-container">\n');
    if (((typeof (l_coopGame) != "undefined" && l_coopGame !== null && typeof (l_coopGame.friendId) != "undefined" && l_coopGame.friendId !== null) && (l_coopGame.friendId > 0))) {
        c.push("\n");
        c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_coop_invite_use_30_42, kwargs));
    } else {
        c.push('\n <div class="common-dropzone coop-dropzone bubble-title" title="');
        c.push(Surface.valOut("Drop friend here to send invite"));
        c.push('">\n <div class="common-dropzone-content">\n <div class="common-dropzone-logo"></div>\n </div>\n </div>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.invite", "surface_20_30", "surface-coop-friend", o, b);
    return c.join("");
};
var block_coop_leaderboard = new Surface.BlockConfig("coop.base", {"titleItem": "coop.leaderboard.block_titleItem","mainContent": "coop.leaderboard.block_mainContent"});
coop.addTemplate(new Surface.Template("leaderboard"));
var block_coop_mission = new Surface.BlockConfig("", {});
coop.addTemplate(new Surface.Template("mission"));
coop.mission.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_mission;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.mission");
    var l_missionDescriptionSid;
    var l_missionTitleSid;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('<div id="coop-mission-fixed-container">\n <div id="coop-mission" class="coop-mission">\n <div class="coop-mission-inner">\n <input id="coop-current-mission" type="hidden" value="');
    c.push(Surface.valOut(o.mission.name));
    c.push('"/>\n <div class="coop-mission-close-container">\n <div class="coop-mission-close"></div>\n </div>\n <div class="coop-mission-img">\n <img height="310" width="652"\n src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.lower(S.Modifier.concat("/public/coop/cards/652x310/", o.mission.name)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n </div>\n <div class="coop-mission-header">\n');
    l_missionTitleSid = S.Modifier.get($S.callFunction("coop.coopmission", o.mission.name, b, kwargs), "title");
    l_missionDescriptionSid = S.Modifier.get($S.callFunction("coop.coopmission", o.mission.name, b, kwargs), "description");
    c.push('\n <h1 class="coop-mission-infotitle wfont">');
    c.push(Surface.valOut((S.translations[l_missionTitleSid] || l_missionTitleSid)));
    c.push('</h1>\n <div class="coop-mission-show-difficulty">\n <ul class="common-selector-alt">\n <li>\n <div class="easy">');
    c.push(Surface.valOut("Easy"));
    c.push('</div>\n </li>\n <li class="selected">\n <div class="normal">');
    c.push(Surface.valOut("Normal"));
    c.push('</div>\n </li>\n <li class="last">\n <div class="hard">');
    c.push(Surface.valOut("Hard"));
    c.push('</div>\n </li>\n </ul>\n </div>\n </div>\n <div class="coop-mission-start">\n <div id="coop-play-with-friend-container">\n <input type="button" id="coop-play-with-friend" class="base-button-arrow-almost-gigantic-dropdown base-button-general-dropdown" name="submit" value="');
    c.push(Surface.valOut("Play with friend"));
    c.push('" />\n <div id="hej" class="base-button-dropdown base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n');
    c.push(coop.mission.surface_46_30.render({"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null)}, b, kwargs));
    c.push(' </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n <input id="coop-play-public" type="button" class="base-button-arrow-almost-gigantic"\n value="');
    c.push(Surface.valOut("Play Public"));
    c.push('"/>\n </div>\n <div id="coop-mission-info">\n <div id="coop-mission-completion">\n <h2>');
    c.push(Surface.valOut("Mission Briefing"));
    c.push('</h2>\n <p class="coop-mission-infodescription">\n ');
    c.push(Surface.valOut((S.translations[l_missionDescriptionSid] || l_missionDescriptionSid)));
    c.push("\n </p>\n <h2>");
    c.push(Surface.valOut("Mission completion"));
    c.push("</h2>\n");
    c.push(coop.mission.surface_98_22.render({"completedDifficulties": ((typeof (o) != "undefined" && o !== null && typeof (o.completedDifficulties) != "undefined" && o.completedDifficulties !== null) ? o.completedDifficulties : null)}, b, kwargs));
    c.push(' </div>\n <div id="coop-mission-frienda-leaderboard">\n <div class="coop-mission-stats-inner">\n <h2>');
    c.push(Surface.valOut("Friends leaderboard"));
    c.push("</h2>\n");
    c.push(coop.mission.surface_115_26.render({"friendPersona": {"personaName": ((typeof (o) != "undefined" && o !== null && typeof (o.friendPersona) != "undefined" && o.friendPersona !== null && typeof (o.friendPersona.personaName) != "undefined" && o.friendPersona.personaName !== null) ? o.friendPersona.personaName : null)},"friendsLeaderboard": ((typeof (o) != "undefined" && o !== null && typeof (o.friendsLeaderboard) != "undefined" && o.friendsLeaderboard !== null) ? o.friendsLeaderboard : null),"session": {"user": {"username": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.username) != "undefined" && l_session.user.username !== null) ? l_session.user.username : null)}}}, b, kwargs));
    c.push(" </div>\n </div>\n </div>\n </div>\n </div>\n</div>\n");
    return c.join("");
};
coop.mission.surface_46_30 = new Surface.SingleSurface("coop.mission.surface_46_30");
coop.mission.surface_46_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_mission;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.mission");
    c.push('<surf:container id="');
    c.push("coop-dropdown-friends");
    c.push('">');
    var l_for_coop_mission_52_38_list;
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null))) {
        c.push(' <ul>\n <li class="coop-last-info-li">');
        c.push(Surface.valOut("Loading..."));
        c.push("</li>\n </ul>\n");
    } else {
        l_for_coop_mission_52_38_list = o.friends;
        if ((S.Modifier.count(l_for_coop_mission_52_38_list) > 0)) {
            c.push(" <ul>\n");
            for (var l_for_coop_mission_52_38_key in l_for_coop_mission_52_38_list) {
                if (!Surface.isValidLoopItem(l_for_coop_mission_52_38_list[l_for_coop_mission_52_38_key])) {
                    continue;
                }
                var l_user = l_for_coop_mission_52_38_list[l_for_coop_mission_52_38_key];
                c.push(' <li>\n <a rel="');
                c.push(Surface.valOut(l_user.userId));
                c.push('" class="coop-start-play-with-friend">\n <div class="coop-friend-avatar">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"userpopup": 0,"user": l_user,"gravatarSize": 22,"hideLink": true}, null, kwargs));
                c.push('\n </div>\n <div class="base-left">\n ');
                c.push(Surface.valOut(l_user.username));
                c.push("\n </div>\n </a>\n </li>\n </ul>\n");
            }
            c.push(' <li class="coop-last-info-li">\n ');
            c.push(Surface.valOut("Showing online friends"));
            c.push("\n </li>\n </ul>\n");
        } else {
            c.push(' <ul>\n <li class="coop-last-info-li">');
            c.push(Surface.valOut("Found no online friends with access."));
            c.push("</li>\n </ul>\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.mission", "surface_46_30", "coop-dropdown-friends", o, b);
    return c.join("");
};
coop.mission.surface_98_22 = new Surface.SingleSurface("coop.mission.surface_98_22");
coop.mission.surface_98_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_mission;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.mission");
    c.push('<surf:container id="');
    c.push("surface-coop-completion");
    c.push('">');
    var l_for_coop_mission_101_34_list;
    var l_completed;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.completedDifficulties) != "undefined" && o.completedDifficulties !== null)) {
        c.push(' <ul id="difficulty-completed">\n');
        l_for_coop_mission_101_34_list = ["EASY", "NORMAL", "HARD"];
        if ((S.Modifier.count(l_for_coop_mission_101_34_list) > 0)) {
            for (var l_for_coop_mission_101_34_key in l_for_coop_mission_101_34_list) {
                if (!Surface.isValidLoopItem(l_for_coop_mission_101_34_list[l_for_coop_mission_101_34_key])) {
                    continue;
                }
                var l_difficulty = l_for_coop_mission_101_34_list[l_for_coop_mission_101_34_key];
                l_completed = S.Modifier.get(o.completedDifficulties, l_difficulty);
                c.push(' <li class="');
                c.push(Surface.valOut(S.Modifier.lower(l_difficulty)));
                c.push(" ");
                if (l_completed) {
                    c.push("completed");
                }
                c.push('"><div>');
                c.push(Surface.valOut(S.Modifier.capitalize(l_difficulty)));
                c.push("</div></li>\n");
            }
        }
        c.push(" </ul>\n");
    } else {
        c.push(' <div class="coop-mission-got-no-stats">');
        c.push(Surface.valOut("Loading..."));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.mission", "surface_98_22", "surface-coop-completion", o, b);
    return c.join("");
};
coop.mission.surface_115_26 = new Surface.SingleSurface("coop.mission.surface_115_26");
coop.mission.surface_115_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_mission;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.mission");
    c.push('<surf:container id="');
    c.push("surface-coop-friendsleaderboard");
    c.push('">');
    var l_for_coop_mission_117_34_list;
    var l_for_coop_mission_117_34_iteration;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.friendsLeaderboard) != "undefined" && o.friendsLeaderboard !== null)) {
        l_for_coop_mission_117_34_list = o.friendsLeaderboard;
        l_for_coop_mission_117_34_iteration = 0;
        if ((S.Modifier.count(l_for_coop_mission_117_34_list) > 0)) {
            for (var l_for_coop_mission_117_34_key in l_for_coop_mission_117_34_list) {
                if (!Surface.isValidLoopItem(l_for_coop_mission_117_34_list[l_for_coop_mission_117_34_key])) {
                    continue;
                }
                var l_data = l_for_coop_mission_117_34_list[l_for_coop_mission_117_34_key];
                l_for_coop_mission_117_34_iteration = (l_for_coop_mission_117_34_iteration + 1);
                o.friendPersona = S.Modifier.get(l_data, "persona");
                c.push(' <div class="coop-mission-friend-container ">\n <div class="coop-mission-friend-avatar">(X)</div>\n <div class="coop-mission-friend-rank">');
                c.push(Surface.valOut(l_for_coop_mission_117_34_iteration));
                c.push('</div>\n <div class="coop-mission-friend-username">');
                c.push(Surface.valOut(o.friendPersona.personaName));
                c.push('</div>\n <div class="coop-mission-friend-points">');
                c.push(Surface.valOut(S.Modifier.get(l_data, "score")));
                c.push("</div>\n </div>\n");
            }
            c.push(' <br><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/coop/{group}/{platform}/{friends}/", Surface.urlContext, {"username": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null && typeof (o.session.user.username) != "undefined" && o.session.user.username !== null) ? o.session.user.username : "None")})));
            c.push('">');
            c.push(Surface.valOut("View full leaderboard"));
            c.push("</a>\n");
        } else {
            c.push(' <div class="coop-mission-got-no-stats">');
            c.push(Surface.valOut("No one has finished this mission yet."));
            c.push("</div>\n");
        }
    } else {
        c.push(' <div class="coop-mission-got-no-stats">');
        c.push(Surface.valOut("Loading..."));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("coop.mission", "surface_115_26", "surface-coop-friendsleaderboard", o, b);
    return c.join("");
};
var block_coop_missioninfo = new Surface.BlockConfig("", {});
coop.addTemplate(new Surface.Template("missioninfo"));
coop.missioninfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_coop_missioninfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("coop");
    Surface.Renderer.addUsedTemplate("coop.missioninfo");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
coop.function_coopmissions = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_missions;
    l_missions = {"COOP_002": {"title": "ID_M_LEVELNAME_COOP_002","description": "ID_M_COOP_LOADING_COOP002"},"COOP_003": {"title": "ID_M_LEVELNAME_COOP_003","description": "ID_M_COOP_LOADING_COOP003"},"COOP_006": {"title": "ID_M_LEVELNAME_COOP_006","description": "ID_M_COOP_LOADING_COOP006"},"COOP_007": {"title": "ID_M_LEVELNAME_COOP_007","description": "ID_M_COOP_LOADING_COOP007"},"COOP_009": {"title": "ID_M_LEVELNAME_COOP_009","description": "ID_M_COOP_LOADING_COOP009"},"COOP_010": {"title": "ID_M_LEVELNAME_COOP_010","description": "ID_M_COOP_LOADING_COOP010"}};
    return l_missions;
};
coop.function_coopmission = function(l_level, b, kwargs) {
    var o = {};
    var c = [];
    var l_missions;
    l_missions = $S.callFunction("coop.coopmissions", b, kwargs);
    return S.Modifier.get(l_missions, l_level);
};
var block_coop_nosession = new Surface.BlockConfig("main.index", {"mainContent": "coop.nosession.block_mainContent"});
coop.addTemplate(new Surface.Template("nosession"));
coop.addTemplate(new Surface.Template("public"));
if (typeof debug == "undefined") {
    var debug = {};
}
var surf_debug_component = new Surface.Component("debug");
surf_debug_component.extend(debug);
debug = surf_debug_component;
debug.addTemplate(new Surface.Template("api"));
debug.addTemplate(new Surface.Template("apisignature"));
debug.addTemplate(new Surface.Template("base"));
debug.addTemplate(new Surface.Template("blazecalls"));
debug.addTemplate(new Surface.Template("blazecallxml"));
debug.addTemplate(new Surface.Template("chat"));
debug.addTemplate(new Surface.Template("events"));
debug.addTemplate(new Surface.Template("httpstatus"));
var block_debug_icons = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "debug.icons.block_mainContent"});
debug.addTemplate(new Surface.Template("icons"));
debug.addTemplate(new Surface.Template("images"));
var block_debug_index = new Surface.BlockConfig("base.ajaxindex", {"mainHeader": "debug.index.block_mainHeader","mainContent": "debug.index.block_mainContent"});
debug.addTemplate(new Surface.Template("index"));
var block_debug_loadservers = new Surface.BlockConfig("base.box3x", {"boxContent": "debug.loadservers.block_boxContent","boxSubHeader": "debug.loadservers.block_boxSubHeader","boxHeader": "debug.loadservers.block_boxHeader"});
debug.addTemplate(new Surface.Template("loadservers"));
var block_debug_notification = new Surface.BlockConfig("debug.base", {"debugContent": "debug.notification.block_debugContent"});
debug.addTemplate(new Surface.Template("notification"));
debug.addTemplate(new Surface.Template("orbit"));
debug.addTemplate(new Surface.Template("platoonfetch"));
debug.addTemplate(new Surface.Template("platoonmojjs"));
debug.addTemplate(new Surface.Template("platoonmojjs2"));
var block_debug_plugin = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "debug.plugin.block_mainContent"});
debug.addTemplate(new Surface.Template("plugin"));
var block_debug_popup = new Surface.BlockConfig("base.index", {"mainContent": "debug.popup.block_mainContent"});
debug.addTemplate(new Surface.Template("popup"));
debug.addTemplate(new Surface.Template("querylist"));
debug.addTemplate(new Surface.Template("snowroller"));
debug.addTemplate(new Surface.Template("statisk"));
var block_debug_voice = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "debug.voice.block_mainContent"});
debug.addTemplate(new Surface.Template("voice"));
if (typeof debugfeed == "undefined") {
    var debugfeed = {};
}
var surf_debugfeed_component = new Surface.Component("debugfeed");
surf_debugfeed_component.extend(debugfeed);
debugfeed = surf_debugfeed_component;
var block_debugfeed_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "debugfeed.index.block_mainContent"});
debugfeed.addTemplate(new Surface.Template("index"));
if (typeof demo == "undefined") {
    var demo = {};
}
var surf_demo_component = new Surface.Component("demo");
surf_demo_component.extend(demo);
demo = surf_demo_component;
var block_demo_index = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "demo.index.block_titleItem","mainContent": "demo.index.block_mainContent"});
demo.addTemplate(new Surface.Template("index"));
if (typeof devblog == "undefined") {
    var devblog = {};
}
var surf_devblog_component = new Surface.Component("devblog");
surf_devblog_component.extend(devblog);
devblog = surf_devblog_component;
var block_devblog_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "devblog.base.block_titleComponent"});
devblog.addTemplate(new Surface.Template("base"));
devblog.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.base");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
devblog.base.block_titleComponent = new Surface.Block("devblog.base.block_titleComponent");
devblog.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Blog - ");
    return c.join("");
};
var block_devblog_create = new Surface.BlockConfig("devblog.base", {"main": "devblog.create.block_main"});
devblog.addTemplate(new Surface.Template("create"));
var block_devblog_index = new Surface.BlockConfig("devblog.base", {"titleItem": "devblog.index.block_titleItem","mainContent": "devblog.index.block_mainContent"});
devblog.addTemplate(new Surface.Template("index"));
devblog.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.index");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("devblog.base", o, b, kwargs);
};
var block_devblog_index_use_14_17 = new Surface.BlockConfig("common.boxwideclean", {"content": "devblog.index._use_14_17_block_content","title": "devblog.index._use_14_17_block_title","extraClassInner": "devblog.index._use_14_17_block_extraClassInner","extraClass": "devblog.index._use_14_17_block_extraClass"});
devblog.index.block_titleItem = new Surface.Block("devblog.index.block_titleItem");
devblog.index.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((o.offset == 0)) {
        c.push("Latest posts ");
    } else {
        c.push("Posts ");
        c.push(Surface.valOut((o.offset + 1)));
        c.push("-");
        c.push(Surface.valOut((o.offset + o.amount)));
    }
    c.push(" - ");
    return c.join("");
};
devblog.index._use_14_17_block_extraClass = new Surface.Block("devblog.index._use_14_17_block_extraClass");
devblog.index._use_14_17_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("devblog-list");
    return c.join("");
};
devblog.index._use_14_17_block_extraClassInner = new Surface.Block("devblog.index._use_14_17_block_extraClassInner");
devblog.index._use_14_17_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
devblog.index._use_14_17_block_title = new Surface.Block("devblog.index._use_14_17_block_title");
devblog.index._use_14_17_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((o.offset == 0)) {
        c.push(Surface.valOut("Latest news posts"));
    } else {
        c.push(Surface.valOut("Older news posts"));
    }
    c.push(" ");
    return c.join("");
};
devblog.index._use_14_17_block_content = new Surface.Block("devblog.index._use_14_17_block_content");
devblog.index._use_14_17_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_devblog_index_20_29_count;
    var l_newOffset;
    var l_for_devblog_index_20_29_iteration;
    var l_for_devblog_index_20_29_hasNext;
    var l_for_devblog_index_20_29_list;
    c.push(' <div class="devblog-posts">\n');
    l_for_devblog_index_20_29_list = o.blogPosts;
    l_for_devblog_index_20_29_count = S.Modifier.count(l_for_devblog_index_20_29_list);
    l_for_devblog_index_20_29_iteration = 0;
    if ((S.Modifier.count(l_for_devblog_index_20_29_list) > 0)) {
        for (var l_for_devblog_index_20_29_key in l_for_devblog_index_20_29_list) {
            if (!Surface.isValidLoopItem(l_for_devblog_index_20_29_list[l_for_devblog_index_20_29_key])) {
                continue;
            }
            var l_blogPost = l_for_devblog_index_20_29_list[l_for_devblog_index_20_29_key];
            l_for_devblog_index_20_29_iteration = (l_for_devblog_index_20_29_iteration + 1);
            l_for_devblog_index_20_29_hasNext = (l_for_devblog_index_20_29_iteration < l_for_devblog_index_20_29_count);
            c.push(' <div class="devblog-index-item">\n ');
            c.push(Surface.importTemplate(("devblog" + ("." + "post")), {"blogPost": l_blogPost}, null, kwargs));
            c.push("\n </div>\n");
            if (l_for_devblog_index_20_29_hasNext) {
                c.push(' <div class="devblog-separator" >&nbsp;</div>\n');
            }
        }
    } else {
        c.push(' <div class="devblog-noposts">');
        c.push(Surface.valOut("Nope, no news posts published yet. Check back in a while, will you."));
        c.push("</div>\n");
    }
    c.push(' </div>\n <div class="devblog-list-bottom">\n');
    if ((o.offset > 0)) {
        l_newOffset = (o.offset - o.amount);
        if ((l_newOffset < 0)) {
            l_newOffset = 0;
        }
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/{offset}/", Surface.urlContext, {"offset": l_newOffset})));
        c.push('">');
        c.push(Surface.valOut("View earlier posts"));
        c.push("</a>\n");
    }
    if (o.oldBlogPosts) {
        c.push(' <a style="float:right;" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/{offset}/", Surface.urlContext, {"offset": (o.offset + o.amount)})));
        c.push('">');
        c.push(Surface.valOut("View older posts"));
        c.push("</a>\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
devblog.index.block_mainContent = new Surface.Block("devblog.index.block_mainContent");
devblog.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.blogPosts) != "undefined" && o.blogPosts !== null)) {
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_devblog_index_use_14_17, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("devblog" + ("." + "postlistsmall")), {"title": "MOST COMMENTED POSTS","posts": o.mostCommentedPosts}, null, kwargs));
        c.push("\n");
    } else {
        c.push("\n");
        c.push(Surface.valOut("Sorry, news are temporarily unavailable"));
        c.push("\n");
    }
    c.push(' <div style="clear:both;"></div>\n </div>\n </div>\n <div style="clear:both;"></div>\n');
    return c.join("");
};
devblog.addTemplate(new Surface.Template("oldposts"));
var block_devblog_post = new Surface.BlockConfig("", {});
devblog.addTemplate(new Surface.Template("post"));
devblog.post.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_post;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.post");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.linkTitle) != "undefined" && o.linkTitle !== null) ? o.linkTitle : true)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": o.blogPost.id,"title": S.Modifier.slugify(o.blogPost.title)})));
        c.push('"><h1 class="showunderline">');
        c.push(Surface.valOut(o.blogPost.title));
        c.push("</h1></a>\n");
    } else {
        c.push(" <h1>");
        c.push(Surface.valOut(o.blogPost.title));
        c.push("</h1>\n");
    }
    c.push('<div class="devblog-index-iteminfo">\n <div class="devblog-index-iteminfo-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.blogPost.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n </div>\n <div class="devblog-index-iteminfo-textinfo">\n ');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.blogPost) != "undefined" && o.blogPost !== null && typeof (o.blogPost.user) != "undefined" && o.blogPost.user !== null)) {
        c.push(Surface.valOut("By"));
        c.push(': <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.blogPost.user.username})));
        c.push('">');
        c.push(Surface.valOut(o.blogPost.user.username));
        c.push("</a> ");
    }
    c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("Posted"));
    c.push(": <span>");
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.blogPost.publishDate}, null, kwargs));
    c.push("</span> ");
    c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"scrollToComments": true,"page": 1,"id": o.blogPost.id,"title": S.Modifier.slugify(o.blogPost.title)})));
    c.push('">');
    c.push(Surface.valOut(o.blogPost.devblogCommentCount));
    c.push(" ");
    c.push(Surface.valOut("comments"));
    c.push('</a>\n </div>\n</div>\n<div style="clear:left;"></div>\n<div class="devblog-index-preamble">\n ');
    c.push(o.blogPost.preamble);
    c.push('\n</div>\n<div class="devblog-view-content">\n ');
    c.push(o.blogPost.body);
    c.push("\n</div>");
    return c.join("");
};
var block_devblog_postlistsmall = new Surface.BlockConfig("", {});
devblog.addTemplate(new Surface.Template("postlistsmall"));
devblog.postlistsmall.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_postlistsmall;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.postlistsmall");
    var l_for_devblog_postlistsmall_4_6_count;
    var l_for_devblog_postlistsmall_4_6_list;
    var l_for_devblog_postlistsmall_4_6_hasNext;
    var l_for_devblog_postlistsmall_4_6_iteration;
    c.push('\n<div class="devblog-postlistsmall">\n <h2>');
    c.push(Surface.valOut(o.title));
    c.push("</h2>\n");
    l_for_devblog_postlistsmall_4_6_list = o.posts;
    l_for_devblog_postlistsmall_4_6_count = S.Modifier.count(l_for_devblog_postlistsmall_4_6_list);
    l_for_devblog_postlistsmall_4_6_iteration = 0;
    if ((S.Modifier.count(l_for_devblog_postlistsmall_4_6_list) > 0)) {
        for (var l_for_devblog_postlistsmall_4_6_key in l_for_devblog_postlistsmall_4_6_list) {
            if (!Surface.isValidLoopItem(l_for_devblog_postlistsmall_4_6_list[l_for_devblog_postlistsmall_4_6_key])) {
                continue;
            }
            var l_post = l_for_devblog_postlistsmall_4_6_list[l_for_devblog_postlistsmall_4_6_key];
            l_for_devblog_postlistsmall_4_6_iteration = (l_for_devblog_postlistsmall_4_6_iteration + 1);
            l_for_devblog_postlistsmall_4_6_hasNext = (l_for_devblog_postlistsmall_4_6_iteration < l_for_devblog_postlistsmall_4_6_count);
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": l_post.id,"title": S.Modifier.slugify(l_post.title)})));
            c.push('">');
            c.push(Surface.valOut(l_post.title));
            c.push("</a><br><span>");
            c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_post.publishDate}, null, kwargs));
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
            c.push(" ");
            c.push(Surface.valOut(l_post.devblogCommentCount));
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.pluralize(l_post.devblogCommentCount, "comment", "comments")));
            c.push("</span>\n");
            if (l_for_devblog_postlistsmall_4_6_hasNext) {
                c.push(' <div class="devblog-postlistsmall-hr"></div>\n');
            }
        }
    }
    c.push("</div>");
    return c.join("");
};
devblog.addTemplate(new Surface.Template("rss"));
var block_devblog_square = new Surface.BlockConfig("", {});
devblog.addTemplate(new Surface.Template("square"));
devblog.square.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_square;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.square");
    c.push('\n<img class="devblog-square" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAIAAADZSiLoAAAAK3RFWHRDcmVhdGlvbiBUaW1lAG9uIDI1IGF1ZyAyMDEwIDEzOjMyOjI3ICswMTAw8eWuZwAAAAd0SU1FB9oIGQsjI3KLL88AAAAJcEhZcwAAHsIAAB7CAW7QdT4AAAAEZ0FNQQAAsY8L/GEFAAAAFElEQVR42mPcs2cPAxgwMcAAggUAPigCOhaw42YAAAAASUVORK5CYII=" />');
    return c.join("");
};
var block_devblog_view = new Surface.BlockConfig("devblog.base", {"titleItem": "devblog.view.block_titleItem","mainContent": "devblog.view.block_mainContent"});
devblog.addTemplate(new Surface.Template("view"));
devblog.view.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_devblog_view;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("devblog");
    Surface.Renderer.addUsedTemplate("devblog.view");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("devblog.base", o, b, kwargs);
};
var block_devblog_view_use_18_17 = new Surface.BlockConfig("common.boxwide", {"content": "devblog.view._use_18_17_block_content","titleType": "devblog.view._use_18_17_block_titleType","titleContainer": "devblog.view._use_18_17_block_titleContainer","extraClass": "devblog.view._use_18_17_block_extraClass"});
devblog.view.block_titleItem = new Surface.Block("devblog.view.block_titleItem");
devblog.view.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.truncate(o.blogPost.title, 20)));
    c.push(" - ");
    return c.join("");
};
devblog.view._use_18_17_block_titleContainer = new Surface.Block("devblog.view._use_18_17_block_titleContainer");
devblog.view._use_18_17_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
devblog.view._use_18_17_block_titleType = new Surface.Block("devblog.view._use_18_17_block_titleType");
devblog.view._use_18_17_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("solid-with-line");
    return c.join("");
};
devblog.view._use_18_17_block_extraClass = new Surface.Block("devblog.view._use_18_17_block_extraClass");
devblog.view._use_18_17_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("devblog-box");
    return c.join("");
};
devblog.view._use_18_17_block_content = new Surface.Block("devblog.view._use_18_17_block_content");
devblog.view._use_18_17_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="devblog-index-item">\n ');
    c.push(Surface.importTemplate(("devblog" + ("." + "post")), {"linkTitle": false,"blogPost": o.blogPost}, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
devblog.view.block_mainContent = new Surface.Block("devblog.view.block_mainContent");
devblog.view.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="devblog-sidebar">\n ');
    c.push(Surface.importTemplate(("devblog" + ("." + "postlistsmall")), {"title": "RECENT NEWS POSTS","posts": o.recentPosts}, null, kwargs));
    c.push('\n <div class="common-secondary-column-line"></div>\n ');
    c.push(Surface.importTemplate(("devblog" + ("." + "postlistsmall")), {"title": "MOST COMMENTED POSTS","posts": o.mostCommentedPosts}, null, kwargs));
    c.push('\n </div>\n <div class="devblog-main">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwide")), o, block_devblog_view_use_18_17, kwargs));
    c.push('\n <div class="devblog-comments">\n <div class="devblog-comment-list">\n');
    l_session = S.Modifier.get(Surface.globalContext, "session");
    o.v = {"pagination": o.pagination,"comments": o.blogPost.comments,"session": l_session,"itemInfo": {"id": o.blogPost.id,"type": "devblog-comment"}};
    c.push(" ");
    c.push(Surface.importTemplate(("comment" + ("." + "index")), o.v, null, kwargs));
    c.push('\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    if (o.scrollToComments) {
        c.push(' <script>\n base.scrollTo($(".devblog-comments"));\n <\/script>\n');
    }
    return c.join("");
};
if (typeof errorlogging == "undefined") {
    var errorlogging = {};
}
var surf_errorlogging_component = new Surface.Component("errorlogging");
surf_errorlogging_component.extend(errorlogging);
errorlogging = surf_errorlogging_component;
var block_errorlogging_index = new Surface.BlockConfig("base.index", {"main": "errorlogging.index.block_main"});
errorlogging.addTemplate(new Surface.Template("index"));
if (typeof feed == "undefined") {
    var feed = {};
}
var surf_feed_component = new Surface.Component("feed");
surf_feed_component.extend(feed);
feed = surf_feed_component;
var block_feed_addedfavserver = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.addedfavserver.block_story_avatar","story_heading": "feed.addedfavserver.block_story_heading","story_body": "feed.addedfavserver.block_story_body","story_small_icon": "feed.addedfavserver.block_story_small_icon","story_type": "feed.addedfavserver.block_story_type"});
feed.addTemplate(new Surface.Template("addedfavserver"));
feed.addedfavserver.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_addedfavserver;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.addedfavserver");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.addedfavserver.block_story_type = new Surface.Block("feed.addedfavserver.block_story_type");
feed.addedfavserver.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_favorite.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Added favourite"/>');
    return c.join("");
};
feed.addedfavserver.block_story_small_icon = new Surface.Block("feed.addedfavserver.block_story_small_icon");
feed.addedfavserver.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_favorite.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Added favourite"/>');
    return c.join("");
};
feed.addedfavserver.block_story_avatar = new Surface.Block("feed.addedfavserver.block_story_avatar");
feed.addedfavserver.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.addedfavserver.block_story_heading = new Surface.Block("feed.addedfavserver.block_story_heading");
feed.addedfavserver.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langStr;
    var l_url;
    var l_server;
    var l_username;
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    l_langStr = "[username] added [server] as a favourite server";
    l_url = $S.callFunction("serverguide.showServerUrl", o.item.ADDEDFAVSERVER.serverGuid, o.item.ADDEDFAVSERVER.serverName, b, kwargs);
    l_server = (((("<a href='" + l_url) + "'>") + S.Modifier.htmlspecialchars(o.item.ADDEDFAVSERVER.serverName)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langStr, {"[username]": l_username,"[server]": l_server}));
    c.push("\n");
    return c.join("");
};
feed.addedfavserver.block_story_body = new Surface.Block("feed.addedfavserver.block_story_body");
feed.addedfavserver.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_avatarimage = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("avatarimage"));
feed.avatarimage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_avatarimage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.avatarimage");
    c.push('\n<div class="feed-avatar-container">\n');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.user,"gravatarSize": 30}, null, kwargs));
    c.push("\n</div>");
    return c.join("");
};
var block_feed_base = new Surface.BlockConfig("", {"feedMoreEvents": "feed.base.block_feedMoreEvents"});
feed.addTemplate(new Surface.Template("base"));
feed.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.base");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    o.feedContext = ((typeof (o) != "undefined" && o !== null && typeof (o.feedContext) != "undefined" && o.feedContext !== null) ? o.feedContext : "friend");
    o.showFeedItems = ((typeof (o) != "undefined" && o !== null && typeof (o.showFeedItems) != "undefined" && o.showFeedItems !== null) ? o.showFeedItems : 10);
    c.push('\n<div>\n <!-- events navigation -->\n <div id="feed-container">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.feedDisabled) != "undefined" && o.feedDisabled !== null) && o.feedDisabled)) {
        c.push(' <p class="feed-unavailable">');
        c.push(Surface.valOut("Sorry, Feeds are currently disabled"));
        c.push("</p>\n");
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.feed) != "undefined" && o.feed !== null)) {
            c.push(" ");
            c.push(Surface.importTemplate(("feed" + ("." + "index")), {"feed": o.feed,"sessionUserId": S.Modifier.get(l_session, "userId", 0),"nowTimestamp": o.nowTimestamp,"feedContext": o.feedContext}, null, kwargs));
            c.push("\n");
        } else {
            c.push(' <p class="feed-unavailable">');
            c.push(Surface.valOut("Sorry, this Battle feed is not available right now. Please try again later."));
            c.push("</p>\n");
        }
    }
    c.push(" </div>\n</div>\n");
    c.push(b.get("feedMoreEvents")(o, b, kwargs));
    return c.join("");
};
feed.base.surface_28_14 = new Surface.SingleSurface("feed.base.surface_28_14");
feed.base.surface_28_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.base");
    c.push('<surf:container id="');
    c.push("feed-more-events");
    c.push('">');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.base", "surface_28_14", "feed-more-events", o, b);
    return c.join("");
};
feed.base.block_feedMoreEvents = new Surface.Block("feed.base.block_feedMoreEvents");
feed.base.block_feedMoreEvents.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_url;
    if ((S.Modifier.count(o.feed) > 0)) {
        c.push(' <div style="clear: both;">\n');
        c.push(feed.base.surface_28_14.render({}, b, kwargs));
        c.push(' <div class="feed-view-more-events">\n');
        if ((o.feedContext == "home")) {
            l_url = S.Modifier.urlformat("/{_section}/{_language}/feed/homeevents/", Surface.urlContext);
        } else {
            if ((o.feedContext == "profile")) {
                l_url = S.Modifier.urlformat("/{_section}/{_language}/feed/profileevents/{userId}/", Surface.urlContext, {"userId": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.userId) != "undefined" && o.user.userId !== null) ? o.user.userId : 0)});
            } else {
                if ((o.feedContext == "platoon")) {
                    l_url = S.Modifier.urlformat("/{_section}/{_language}/feed/platoonevents/{platoonId}/", Surface.urlContext, {"platoonId": o.platoonId});
                } else {
                    l_url = S.Modifier.urlformat("/{_section}/{_language}/feed/homeevents/", Surface.urlContext);
                }
            }
        }
        c.push(' <span id="feed-load-more" start="');
        c.push(Surface.valOut(o.showFeedItems));
        c.push('" href="');
        c.push(Surface.valOut(l_url));
        c.push('">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"extraInnerClass": "feed-view-more-events-button","text": "View more events"}, null, kwargs));
        c.push('\n </span>\n </div>\n <div id="feed-view-more-events-loading"></div>\n </div>\n');
    }
    return c.join("");
};
var block_feed_becamefriends = new Surface.BlockConfig("feed.story", {"story_heading": "feed.becamefriends.block_story_heading","story_body": "feed.becamefriends.block_story_body","story_small_icon": "feed.becamefriends.block_story_small_icon"});
feed.addTemplate(new Surface.Template("becamefriends"));
feed.becamefriends.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_becamefriends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.becamefriends");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.becamefriends.block_story_small_icon = new Surface.Block("feed.becamefriends.block_story_small_icon");
feed.becamefriends.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" class="" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_friend.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.becamefriends.block_story_heading = new Surface.Block("feed.becamefriends.block_story_heading");
feed.becamefriends.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_entity;
    var l_username1;
    var l_username2;
    l_langstr = "[username1] and [username2] are now friends";
    l_entity = o.item.BECAMEFRIENDS;
    l_username1 = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs);
    l_username2 = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_entity.friendUser}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username1]": l_username1,"[username2]": l_username2}));
    c.push("\n");
    o.users = S.Modifier.set(o.users, S.Modifier.concat(l_entity.friendUser.userId, ""), l_entity.friendUser);
    return c.join("");
};
feed.becamefriends.block_story_body = new Surface.Block("feed.becamefriends.block_story_body");
feed.becamefriends.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundle = new Surface.BlockConfig("", {"story_heading": "feed.bundle.block_story_heading","story_body": "feed.bundle.block_story_body","story_type": "feed.bundle.block_story_type"});
feed.addTemplate(new Surface.Template("bundle"));
feed.bundle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundle");
    var l_iter;
    var l_session;
    var l_for_feed_bundle_8_14_list;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<li class="feed-bundle ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.noBorder) != "undefined" && o.noBorder !== null) ? o.noBorder : false)) {
        c.push("feed-no-border");
    }
    c.push('">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (o.feedContext != "home"))) {
        c.push(' <div class="feed-story-ids">\n');
        l_iter = false;
        l_for_feed_bundle_8_14_list = o.item.presentedEvents;
        if ((S.Modifier.count(l_for_feed_bundle_8_14_list) > 0)) {
            for (var l_for_feed_bundle_8_14_key in l_for_feed_bundle_8_14_list) {
                if (!Surface.isValidLoopItem(l_for_feed_bundle_8_14_list[l_for_feed_bundle_8_14_key])) {
                    continue;
                }
                var l_event = l_for_feed_bundle_8_14_list[l_for_feed_bundle_8_14_key];
                if ((S.Modifier.count(l_event) && (l_event.ownerId == l_session.user.userId))) {
                    l_iter = true;
                    c.push(' <input type="hidden" value="');
                    c.push(Surface.valOut(l_event.id));
                    c.push('" class="feed-eventIds" name="feed-eventIds[]" />\n');
                }
            }
        }
        c.push(" </div>\n");
        if (l_iter) {
            c.push(' <div class="feed-story-delete" storyUrl="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/delete/", Surface.urlContext)));
            c.push('"></div>\n');
        }
    }
    c.push('\n <div>\n <div class="feed-story-heading">');
    c.push(b.get("story_type")(o, b, kwargs));
    c.push(" ");
    c.push(b.get("story_heading")(o, b, kwargs));
    c.push('</div>\n <div class="feed-story-body">\n');
    c.push(b.get("story_body")(o, b, kwargs));
    c.push(" </div>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.presentedLikeUsers) != "undefined" && o.item.presentedLikeUsers !== null) && S.Modifier.count(o.item.presentedLikeUsers))) {
        c.push(' <div class="feed-bundle-likes">\n <img class="feed-story-small-likeicon" width="18" height="18" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_hooah.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n ');
        c.push(Surface.importTemplate(("feed" + ("." + "splitusers")), {"users": o.item.presentedLikeUsers,"totalcount": o.item.likeCount,"text": (" " + "likes this")}, null, kwargs));
        c.push("\n </div>\n");
    } else {
        c.push(' <div class="feed-bundle-likes" style="display: none;">\n </div>\n');
    }
    c.push('\n <div style="clear: both;"></div>\n </div>\n</li>\n');
    return c.join("");
};
feed.bundle.block_story_type = new Surface.Block("feed.bundle.block_story_type");
feed.bundle.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundle.block_story_heading = new Surface.Block("feed.bundle.block_story_heading");
feed.bundle.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundle.block_story_body = new Surface.Block("feed.bundle.block_story_body");
feed.bundle.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundleaddedfavserver = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundleaddedfavserver.block_story_heading","story_body": "feed.bundleaddedfavserver.block_story_body","story_ago": "feed.bundleaddedfavserver.block_story_ago","story_type": "feed.bundleaddedfavserver.block_story_type"});
feed.addTemplate(new Surface.Template("bundleaddedfavserver"));
feed.bundleaddedfavserver.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundleaddedfavserver;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundleaddedfavserver");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundleaddedfavserver.block_story_type = new Surface.Block("feed.bundleaddedfavserver.block_story_type");
feed.bundleaddedfavserver.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundleaddedfavserver.block_story_heading = new Surface.Block("feed.bundleaddedfavserver.block_story_heading");
feed.bundleaddedfavserver.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_users;
    l_langurl = "[users] added favourite server";
    l_users = Surface.importTemplate(("feed" + ("." + "userbundle")), {"events": o.item.presentedEvents,"eventCount": o.item.eventCount}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[users]": l_users}));
    c.push("\n");
    return c.join("");
};
feed.bundleaddedfavserver.block_story_body = new Surface.Block("feed.bundleaddedfavserver.block_story_body");
feed.bundleaddedfavserver.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_event;
    l_event = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(' <a href="');
    c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_event.ADDEDFAVSERVER.serverGuid, l_event.ADDEDFAVSERVER.serverName, b, kwargs)));
    c.push('" style="font-weight: bold;">\n');
    if (((typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.section) != "undefined" && l_event.section !== null) && (typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.platform) != "undefined" && l_event.platform !== null))) {
        c.push(' <span class="');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_event.section, l_event.platform, 0, b, kwargs)));
        c.push(' feed-addedfavserver-gameicon"></span>\n');
    }
    c.push(" ");
    if ((S.Modifier.count(l_event.ADDEDFAVSERVER.serverName) > 100)) {
        c.push(Surface.valOut(S.Modifier.substring(l_event.ADDEDFAVSERVER.serverName, 0, 97)));
        c.push("...");
    } else {
        c.push(Surface.valOut(l_event.ADDEDFAVSERVER.serverName));
    }
    c.push('\n </a>\n <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_favorite.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("</div>\n");
    return c.join("");
};
feed.bundleaddedfavserver.block_story_ago = new Surface.Block("feed.bundleaddedfavserver.block_story_ago");
feed.bundleaddedfavserver.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlebecamefriends = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlebecamefriends.block_story_heading","story_body": "feed.bundlebecamefriends.block_story_body","story_ago": "feed.bundlebecamefriends.block_story_ago","story_type": "feed.bundlebecamefriends.block_story_type"});
feed.addTemplate(new Surface.Template("bundlebecamefriends"));
feed.bundlebecamefriends.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlebecamefriends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlebecamefriends");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlebecamefriends.block_story_type = new Surface.Block("feed.bundlebecamefriends.block_story_type");
feed.bundlebecamefriends.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundlebecamefriends.block_story_heading = new Surface.Block("feed.bundlebecamefriends.block_story_heading");
feed.bundlebecamefriends.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_for_feed_bundlebecamefriends_16_6_list;
    var l_username1;
    var l_for_feed_bundlebecamefriends_14_6_list;
    var l_for_feed_bundlebecamefriends_14_6_iteration;
    o.feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    c.push("\n");
    l_langstr = "[username1] is now friends with";
    l_username1 = (Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.feedEvent.owner}, null, kwargs) + Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.feedEvent.owner.userId,"username": o.feedEvent.owner.username}, null, kwargs));
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username1]": l_username1}));
    c.push("\n");
    l_for_feed_bundlebecamefriends_14_6_list = o.item.presentedEvents;
    l_for_feed_bundlebecamefriends_14_6_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlebecamefriends_14_6_list) > 0)) {
        for (var l_for_feed_bundlebecamefriends_14_6_key in l_for_feed_bundlebecamefriends_14_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlebecamefriends_14_6_list[l_for_feed_bundlebecamefriends_14_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlebecamefriends_14_6_list[l_for_feed_bundlebecamefriends_14_6_key];
            l_for_feed_bundlebecamefriends_14_6_iteration = (l_for_feed_bundlebecamefriends_14_6_iteration + 1);
            if ((l_event.BECAMEFRIENDS.friendUser.userId != o.feedEvent.owner.userId)) {
                if ((l_for_feed_bundlebecamefriends_14_6_iteration != 1)) {
                    c.push(", ");
                }
                c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": l_event.BECAMEFRIENDS.friendUser.userId,"username": l_event.BECAMEFRIENDS.friendUser.username}, null, kwargs));
            }
        }
    }
    c.push('\n <div class="feed-spacer-bundle">\n');
    l_for_feed_bundlebecamefriends_16_6_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlebecamefriends_16_6_list) > 0)) {
        for (var l_for_feed_bundlebecamefriends_16_6_key in l_for_feed_bundlebecamefriends_16_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlebecamefriends_16_6_list[l_for_feed_bundlebecamefriends_16_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlebecamefriends_16_6_list[l_for_feed_bundlebecamefriends_16_6_key];
            c.push(' <div class="feed-bundle-became-friends-avatar">');
            c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_event.BECAMEFRIENDS.friendUser}, null, kwargs));
            c.push("</div>\n");
        }
    }
    c.push(' </div>\n <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_friend.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
feed.bundlebecamefriends.block_story_body = new Surface.Block("feed.bundlebecamefriends.block_story_body");
feed.bundlebecamefriends.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
feed.bundlebecamefriends.block_story_ago = new Surface.Block("feed.bundlebecamefriends.block_story_ago");
feed.bundlebecamefriends.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_bundlecommentedblog = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlecommentedblog.block_story_heading","story_body": "feed.bundlecommentedblog.block_story_body","story_ago": "feed.bundlecommentedblog.block_story_ago","story_type": "feed.bundlecommentedblog.block_story_type"});
feed.addTemplate(new Surface.Template("bundlecommentedblog"));
feed.bundlecommentedblog.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlecommentedblog;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlecommentedblog");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlecommentedblog.block_story_type = new Surface.Block("feed.bundlecommentedblog.block_story_type");
feed.bundlecommentedblog.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_blog_comment.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.bundlecommentedblog.block_story_heading = new Surface.Block("feed.bundlecommentedblog.block_story_heading");
feed.bundlecommentedblog.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_comment;
    var l_username;
    o.entity = S.Modifier.get(o.item.presentedEvents, 0);
    l_langstr = "[username] commented on the blog [comment]:";
    l_username = Surface.importTemplate(("feed" + ("." + "userbundle")), {"events": o.item.presentedEvents,"eventCount": o.item.eventCount}, null, kwargs);
    l_comment = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": o.entity.itemId})) + '">') + S.Modifier.htmlspecialchars(o.entity.COMMENTEDBLOG.blogTitle)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username]": l_username,"[comment]": l_comment}));
    c.push("\n");
    return c.join("");
};
feed.bundlecommentedblog.block_story_body = new Surface.Block("feed.bundlecommentedblog.block_story_body");
feed.bundlecommentedblog.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlecommentedblog_16_6_list;
    l_for_feed_bundlecommentedblog_16_6_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlecommentedblog_16_6_list) > 0)) {
        for (var l_for_feed_bundlecommentedblog_16_6_key in l_for_feed_bundlecommentedblog_16_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlecommentedblog_16_6_list[l_for_feed_bundlecommentedblog_16_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlecommentedblog_16_6_list[l_for_feed_bundlecommentedblog_16_6_key];
            c.push(" <p>");
            c.push(Surface.valOut(S.Modifier.replacemulti("[username] wrote: [comment]", {"[username]": l_event.owner.username,"comment": l_event.COMMENTEDBLOG.blogCommentBody})));
            c.push("</p>\n");
        }
    }
    return c.join("");
};
feed.bundlecommentedblog.block_story_ago = new Surface.Block("feed.bundlecommentedblog.block_story_ago");
feed.bundlecommentedblog.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_bundlecommentedgamereport = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlecommentedgamereport.block_story_heading","story_ago": "feed.bundlecommentedgamereport.block_story_ago","story_type": "feed.bundlecommentedgamereport.block_story_type"});
feed.addTemplate(new Surface.Template("bundlecommentedgamereport"));
feed.bundlecommentedgamereport.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlecommentedgamereport;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlecommentedgamereport");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlecommentedgamereport.block_story_type = new Surface.Block("feed.bundlecommentedgamereport.block_story_type");
feed.bundlecommentedgamereport.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_blog_comment.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.bundlecommentedgamereport.block_story_heading = new Surface.Block("feed.bundlecommentedgamereport.block_story_heading");
feed.bundlecommentedgamereport.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_eor;
    var l_username;
    o.entity = S.Modifier.get(o.item.presentedEvents, 0);
    l_langstr = "[username] commented on end of round [eor].";
    c.push("\n");
    l_username = Surface.importTemplate(("feed" + ("." + "userbundle")), {"events": o.item.presentedEvents,"eventCount": o.item.eventCount}, null, kwargs);
    c.push("}\n");
    l_eor = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.entity.section, b, kwargs),"gameHistoryId": o.entity.COMMENTEDGAMEREPORT.gameReportHistoryId,"platform": o.entity.platform})) + '">') + S.Modifier.htmlspecialchars(o.entity.COMMENTEDGAMEREPORT.gameReportHistoryId)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username]": l_username,"[eor]": l_eor}));
    c.push("\n");
    return c.join("");
};
feed.bundlecommentedgamereport.block_story_ago = new Surface.Block("feed.bundlecommentedgamereport.block_story_ago");
feed.bundlecommentedgamereport.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_bundledjoinedplatoon = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundledjoinedplatoon.block_story_heading","story_body": "feed.bundledjoinedplatoon.block_story_body","story_ago": "feed.bundledjoinedplatoon.block_story_ago","story_type": "feed.bundledjoinedplatoon.block_story_type"});
feed.addTemplate(new Surface.Template("bundledjoinedplatoon"));
feed.bundledjoinedplatoon.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundledjoinedplatoon;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundledjoinedplatoon");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundledjoinedplatoon.block_story_type = new Surface.Block("feed.bundledjoinedplatoon.block_story_type");
feed.bundledjoinedplatoon.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundledjoinedplatoon.block_story_heading = new Surface.Block("feed.bundledjoinedplatoon.block_story_heading");
feed.bundledjoinedplatoon.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_feedEvent;
    l_feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    if ((typeof (l_feedEvent) != "undefined" && l_feedEvent !== null && typeof (l_feedEvent.owner) != "undefined" && l_feedEvent.owner !== null)) {
        c.push(" ");
        c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_feedEvent.owner}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": l_feedEvent.owner.userId,"username": l_feedEvent.owner.username}, null, kwargs));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.replace("joined [num] platoons.", "[num]", o.item.eventCount)));
        c.push(" joined x platoons.\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": false}, null, kwargs));
        c.push("\n Unknown added ");
        c.push(Surface.valOut(o.item.eventCount));
        c.push(" platoons:\n");
    }
    return c.join("");
};
feed.bundledjoinedplatoon.block_story_body = new Surface.Block("feed.bundledjoinedplatoon.block_story_body");
feed.bundledjoinedplatoon.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundledjoinedplatoon_19_6_count;
    var l_for_feed_bundledjoinedplatoon_19_6_hasNext;
    var l_for_feed_bundledjoinedplatoon_19_6_iteration;
    var l_for_feed_bundledjoinedplatoon_19_6_list;
    c.push(' <div class="feed-spacer-bundle">\n');
    l_for_feed_bundledjoinedplatoon_19_6_list = o.item.presentedEvents;
    l_for_feed_bundledjoinedplatoon_19_6_count = S.Modifier.count(l_for_feed_bundledjoinedplatoon_19_6_list);
    l_for_feed_bundledjoinedplatoon_19_6_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundledjoinedplatoon_19_6_list) > 0)) {
        for (var l_for_feed_bundledjoinedplatoon_19_6_key in l_for_feed_bundledjoinedplatoon_19_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundledjoinedplatoon_19_6_list[l_for_feed_bundledjoinedplatoon_19_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundledjoinedplatoon_19_6_list[l_for_feed_bundledjoinedplatoon_19_6_key];
            l_for_feed_bundledjoinedplatoon_19_6_iteration = (l_for_feed_bundledjoinedplatoon_19_6_iteration + 1);
            l_for_feed_bundledjoinedplatoon_19_6_hasNext = (l_for_feed_bundledjoinedplatoon_19_6_iteration < l_for_feed_bundledjoinedplatoon_19_6_count);
            c.push(' <a href="');
            c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_event.JOINEDPLATOON.id, l_event.ADDEDFAVSERVER.serverName, b, kwargs)));
            c.push('" style="font-weight: bold;">\n');
            if (((typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.section) != "undefined" && l_event.section !== null) && (typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.platform) != "undefined" && l_event.platform !== null))) {
                c.push(' <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_event.section, l_event.platform, 0, b, kwargs)));
                c.push(' feed-addedfavserver-gameicon"></span>\n');
            }
            c.push(" ");
            if ((S.Modifier.count(l_event.ADDEDFAVSERVER.serverName) > 100)) {
                c.push(Surface.valOut(S.Modifier.substring(l_event.ADDEDFAVSERVER.serverName, 0, 97)));
                c.push("...");
            } else {
                c.push(Surface.valOut(l_event.ADDEDFAVSERVER.serverName));
            }
            c.push("\n </a>\n ");
            if ((l_for_feed_bundledjoinedplatoon_19_6_iteration == (o.item.eventCount - 1))) {
                c.push('<span class="feed-addedfavserver-and">and</span> ');
            } else {
                if (l_for_feed_bundledjoinedplatoon_19_6_hasNext) {
                    c.push(", ");
                }
            }
            c.push("\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_hooah.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">');
    c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("</div>\n </div>\n");
    return c.join("");
};
feed.bundledjoinedplatoon.block_story_ago = new Surface.Block("feed.bundledjoinedplatoon.block_story_ago");
feed.bundledjoinedplatoon.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlelevelcomplete = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlelevelcomplete.block_story_heading","story_body": "feed.bundlelevelcomplete.block_story_body","story_ago": "feed.bundlelevelcomplete.block_story_ago","story_type": "feed.bundlelevelcomplete.block_story_type"});
feed.addTemplate(new Surface.Template("bundlelevelcomplete"));
feed.bundlelevelcomplete.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlelevelcomplete;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlelevelcomplete");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlelevelcomplete.block_story_type = new Surface.Block("feed.bundlelevelcomplete.block_story_type");
feed.bundlelevelcomplete.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" class="feed-story-friend-icon" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_friend.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.bundlelevelcomplete.block_story_heading = new Surface.Block("feed.bundlelevelcomplete.block_story_heading");
feed.bundlelevelcomplete.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlelevelcomplete_7_5_hasNext;
    var l_for_feed_bundlelevelcomplete_7_5_list;
    var l_for_feed_bundlelevelcomplete_7_5_count;
    var l_for_feed_bundlelevelcomplete_7_5_iteration;
    var l_for_feed_bundlelevelcomplete_14_5_list;
    l_for_feed_bundlelevelcomplete_7_5_list = o.item.presentedEvents;
    l_for_feed_bundlelevelcomplete_7_5_count = S.Modifier.count(l_for_feed_bundlelevelcomplete_7_5_list);
    l_for_feed_bundlelevelcomplete_7_5_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlelevelcomplete_7_5_list) > 0)) {
        for (var l_for_feed_bundlelevelcomplete_7_5_key in l_for_feed_bundlelevelcomplete_7_5_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlelevelcomplete_7_5_list[l_for_feed_bundlelevelcomplete_7_5_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlelevelcomplete_7_5_list[l_for_feed_bundlelevelcomplete_7_5_key];
            l_for_feed_bundlelevelcomplete_7_5_iteration = (l_for_feed_bundlelevelcomplete_7_5_iteration + 1);
            l_for_feed_bundlelevelcomplete_7_5_hasNext = (l_for_feed_bundlelevelcomplete_7_5_iteration < l_for_feed_bundlelevelcomplete_7_5_count);
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": l_event.owner.userId,"username": l_event.owner.username}, null, kwargs));
            c.push("\n");
            if ((l_for_feed_bundlelevelcomplete_7_5_iteration == (o.item.eventCount - 1))) {
                c.push(" ");
                c.push(Surface.valOut("and"));
                c.push(" ");
            } else {
                if (l_for_feed_bundlelevelcomplete_7_5_hasNext) {
                    c.push(" ,");
                }
            }
            c.push("\n");
        }
    }
    c.push('\n <div style="clear:both;height:5px">&nbsp;</div>\n');
    l_for_feed_bundlelevelcomplete_14_5_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlelevelcomplete_14_5_list) > 0)) {
        for (var l_for_feed_bundlelevelcomplete_14_5_key in l_for_feed_bundlelevelcomplete_14_5_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlelevelcomplete_14_5_list[l_for_feed_bundlelevelcomplete_14_5_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlelevelcomplete_14_5_list[l_for_feed_bundlelevelcomplete_14_5_key];
            c.push(' <div class="feed-bundle-became-friends-avatar">');
            c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_event.owner}, null, kwargs));
            c.push("</div>\n");
        }
    }
    return c.join("");
};
feed.bundlelevelcomplete.block_story_body = new Surface.Block("feed.bundlelevelcomplete.block_story_body");
feed.bundlelevelcomplete.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_entity;
    var l_feedEvent;
    l_feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    l_entity = l_feedEvent.LEVELCOMPLETE;
    l_langurl = "All completed [mode] [levelname] on [difficulty] difficulty.";
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[mode]": Surface.importTemplate(("common" + ("." + "playingMode")), {"playingMode": l_entity.gameType}, null, kwargs),"[levelname]": $S.callFunction("common.levelName", l_feedEvent.section, l_entity.level, b, kwargs),"[difficulty]": $S.callFunction("common.difficultyName", l_feedEvent.section, l_entity.difficulty, b, kwargs)}));
    return c.join("");
};
feed.bundlelevelcomplete.block_story_ago = new Surface.Block("feed.bundlelevelcomplete.block_story_ago");
feed.bundlelevelcomplete.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_bundlerankedup = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlerankedup.block_story_heading","story_body": "feed.bundlerankedup.block_story_body","story_ago": "feed.bundlerankedup.block_story_ago","story_type": "feed.bundlerankedup.block_story_type"});
feed.addTemplate(new Surface.Template("bundlerankedup"));
feed.bundlerankedup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlerankedup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlerankedup");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlerankedup.block_story_type = new Surface.Block("feed.bundlerankedup.block_story_type");
feed.bundlerankedup.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" class="feed-story-friend-icon" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_friend.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.bundlerankedup.block_story_heading = new Surface.Block("feed.bundlerankedup.block_story_heading");
feed.bundlerankedup.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlerankedup_7_5_hasNext;
    var l_for_feed_bundlerankedup_7_5_iteration;
    var l_for_feed_bundlerankedup_14_5_list;
    var l_for_feed_bundlerankedup_7_5_count;
    var l_for_feed_bundlerankedup_7_5_list;
    l_for_feed_bundlerankedup_7_5_list = o.item.presentedEvents;
    l_for_feed_bundlerankedup_7_5_count = S.Modifier.count(l_for_feed_bundlerankedup_7_5_list);
    l_for_feed_bundlerankedup_7_5_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlerankedup_7_5_list) > 0)) {
        for (var l_for_feed_bundlerankedup_7_5_key in l_for_feed_bundlerankedup_7_5_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlerankedup_7_5_list[l_for_feed_bundlerankedup_7_5_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlerankedup_7_5_list[l_for_feed_bundlerankedup_7_5_key];
            l_for_feed_bundlerankedup_7_5_iteration = (l_for_feed_bundlerankedup_7_5_iteration + 1);
            l_for_feed_bundlerankedup_7_5_hasNext = (l_for_feed_bundlerankedup_7_5_iteration < l_for_feed_bundlerankedup_7_5_count);
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": l_event.owner.userId,"username": l_event.owner.username}, null, kwargs));
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.replace("ranked up to [rank]", "[rank]", l_event.RANKEDUP.rank)));
            c.push("\n");
            if ((l_for_feed_bundlerankedup_7_5_iteration == (o.item.eventCount - 1))) {
                c.push(" and ");
            } else {
                if (l_for_feed_bundlerankedup_7_5_hasNext) {
                    c.push(" ,");
                }
            }
            c.push("\n");
        }
    }
    c.push('\n <div style="clear:both;height:5px">&nbsp;</div>\n');
    l_for_feed_bundlerankedup_14_5_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlerankedup_14_5_list) > 0)) {
        for (var l_for_feed_bundlerankedup_14_5_key in l_for_feed_bundlerankedup_14_5_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlerankedup_14_5_list[l_for_feed_bundlerankedup_14_5_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlerankedup_14_5_list[l_for_feed_bundlerankedup_14_5_key];
            c.push(' <div class="feed-bundle-became-friends-avatar">');
            c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_event.owner}, null, kwargs));
            c.push("</div>\n");
        }
    }
    return c.join("");
};
feed.bundlerankedup.block_story_body = new Surface.Block("feed.bundlerankedup.block_story_body");
feed.bundlerankedup.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
feed.bundlerankedup.block_story_ago = new Surface.Block("feed.bundlerankedup.block_story_ago");
feed.bundlerankedup.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_bundlereceivedaward = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlereceivedaward.block_story_heading","story_body": "feed.bundlereceivedaward.block_story_body","story_ago": "feed.bundlereceivedaward.block_story_ago","story_type": "feed.bundlereceivedaward.block_story_type"});
feed.addTemplate(new Surface.Template("bundlereceivedaward"));
feed.bundlereceivedaward.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlereceivedaward;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlereceivedaward");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlereceivedaward.block_story_type = new Surface.Block("feed.bundlereceivedaward.block_story_type");
feed.bundlereceivedaward.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundlereceivedaward.block_story_heading = new Surface.Block("feed.bundlereceivedaward.block_story_heading");
feed.bundlereceivedaward.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_awardLocale;
    var l_for_feed_bundlereceivedaward_11_10_list;
    var l_feedEvent;
    l_awardLocale = S.Modifier.get(Surface.globalContext, "awardLocale");
    l_feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_feedEvent.owner}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.replace("Received [num] awards", "[num]", o.item.eventCount)));
    c.push('\n <div class="feed-bundle-header-spacer">\n');
    l_for_feed_bundlereceivedaward_11_10_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlereceivedaward_11_10_list) > 0)) {
        for (var l_for_feed_bundlereceivedaward_11_10_key in l_for_feed_bundlereceivedaward_11_10_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedaward_11_10_list[l_for_feed_bundlereceivedaward_11_10_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedaward_11_10_list[l_for_feed_bundlereceivedaward_11_10_key];
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"persona": l_event.persona,"title": S.Modifier.get(S.Modifier.get(S.Modifier.get(l_awardLocale, $S.callFunction("base.statsType", l_event.RECEIVEDAWARD.type, b, kwargs)), l_event.RECEIVEDAWARD.imageName), "label"),"game": $S.callFunction("base.game", l_event.section, b, kwargs),"type": $S.callFunction("base.statsType", l_event.RECEIVEDAWARD.type, b, kwargs),"imageName": ((typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.RECEIVEDAWARD) != "undefined" && l_event.RECEIVEDAWARD !== null && typeof (l_event.RECEIVEDAWARD.imageName) != "undefined" && l_event.RECEIVEDAWARD.imageName !== null) ? l_event.RECEIVEDAWARD.imageName : l_event.RECEIVEDAWARD.statName)}, null, kwargs));
            c.push("\n");
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
feed.bundlereceivedaward.block_story_body = new Surface.Block("feed.bundlereceivedaward.block_story_body");
feed.bundlereceivedaward.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedaward_20_6_count;
    var l_for_feed_bundlereceivedaward_20_6_hasNext;
    var l_for_feed_bundlereceivedaward_20_6_list;
    var l_awardLocale;
    var l_for_feed_bundlereceivedaward_20_6_iteration;
    l_awardLocale = S.Modifier.get(Surface.globalContext, "awardLocale");
    c.push(' <div class="feed-spacer-bundle">\n');
    l_for_feed_bundlereceivedaward_20_6_list = o.item.presentedEvents;
    l_for_feed_bundlereceivedaward_20_6_count = S.Modifier.count(l_for_feed_bundlereceivedaward_20_6_list);
    l_for_feed_bundlereceivedaward_20_6_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlereceivedaward_20_6_list) > 0)) {
        for (var l_for_feed_bundlereceivedaward_20_6_key in l_for_feed_bundlereceivedaward_20_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedaward_20_6_list[l_for_feed_bundlereceivedaward_20_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedaward_20_6_list[l_for_feed_bundlereceivedaward_20_6_key];
            l_for_feed_bundlereceivedaward_20_6_iteration = (l_for_feed_bundlereceivedaward_20_6_iteration + 1);
            l_for_feed_bundlereceivedaward_20_6_hasNext = (l_for_feed_bundlereceivedaward_20_6_iteration < l_for_feed_bundlereceivedaward_20_6_count);
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_awardLocale, $S.callFunction("base.statsType", l_event.RECEIVEDAWARD.type, b, kwargs)), l_event.RECEIVEDAWARD.imageName), "label")));
            c.push("\n");
            if ((l_for_feed_bundlereceivedaward_20_6_iteration == (o.item.eventCount - 1))) {
                c.push(" and ");
            } else {
                if (l_for_feed_bundlereceivedaward_20_6_hasNext) {
                    c.push(", ");
                }
            }
            c.push("\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("</div>\n </div>\n");
    return c.join("");
};
feed.bundlereceivedaward.block_story_ago = new Surface.Block("feed.bundlereceivedaward.block_story_ago");
feed.bundlereceivedaward.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlereceivedunlock = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlereceivedunlock.block_story_heading","story_body": "feed.bundlereceivedunlock.block_story_body","story_ago": "feed.bundlereceivedunlock.block_story_ago","story_type": "feed.bundlereceivedunlock.block_story_type"});
feed.addTemplate(new Surface.Template("bundlereceivedunlock"));
feed.bundlereceivedunlock.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlereceivedunlock;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlereceivedunlock");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlereceivedunlock.block_story_type = new Surface.Block("feed.bundlereceivedunlock.block_story_type");
feed.bundlereceivedunlock.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundlereceivedunlock.block_story_heading = new Surface.Block("feed.bundlereceivedunlock.block_story_heading");
feed.bundlereceivedunlock.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedunlock_11_6_list;
    var l_gadgetsLocale;
    var l_feedEvent;
    l_gadgetsLocale = S.Modifier.get(Surface.globalContext, "gadgetsLocale");
    l_feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_feedEvent.owner}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.replace("Received [num] unlocks", "[num]", o.item.eventCount)));
    c.push(':\n <div class="feed-bundle-header-spacer">\n');
    l_for_feed_bundlereceivedunlock_11_6_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlereceivedunlock_11_6_list) > 0)) {
        for (var l_for_feed_bundlereceivedunlock_11_6_key in l_for_feed_bundlereceivedunlock_11_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedunlock_11_6_list[l_for_feed_bundlereceivedunlock_11_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedunlock_11_6_list[l_for_feed_bundlereceivedunlock_11_6_key];
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"persona": l_event.persona,"title": S.Modifier.get(S.Modifier.get(S.Modifier.get(l_gadgetsLocale, $S.callFunction("base.statsType", l_event.RECEIVEDUNLOCK.type, b, kwargs)), l_event.RECEIVEDUNLOCK.imageName), "label"),"game": $S.callFunction("base.game", l_event.section, b, kwargs),"type": $S.callFunction("base.statsType", l_event.RECEIVEDUNLOCK.type, b, kwargs),"imageName": ((typeof (l_event) != "undefined" && l_event !== null && typeof (l_event.RECEIVEDUNLOCK) != "undefined" && l_event.RECEIVEDUNLOCK !== null && typeof (l_event.RECEIVEDUNLOCK.imageName) != "undefined" && l_event.RECEIVEDUNLOCK.imageName !== null) ? l_event.RECEIVEDUNLOCK.imageName : l_event.RECEIVEDUNLOCK.statName)}, null, kwargs));
            c.push("\n");
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
feed.bundlereceivedunlock.block_story_body = new Surface.Block("feed.bundlereceivedunlock.block_story_body");
feed.bundlereceivedunlock.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedunlock_21_10_count;
    var l_gadgetsLocale;
    var l_for_feed_bundlereceivedunlock_21_10_hasNext;
    var l_for_feed_bundlereceivedunlock_21_10_list;
    var l_for_feed_bundlereceivedunlock_21_10_iteration;
    l_gadgetsLocale = S.Modifier.get(Surface.globalContext, "gadgetsLocale");
    c.push('\n <div class="feed-spacer-bundle">\n');
    l_for_feed_bundlereceivedunlock_21_10_list = o.item.presentedEvents;
    l_for_feed_bundlereceivedunlock_21_10_count = S.Modifier.count(l_for_feed_bundlereceivedunlock_21_10_list);
    l_for_feed_bundlereceivedunlock_21_10_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlereceivedunlock_21_10_list) > 0)) {
        for (var l_for_feed_bundlereceivedunlock_21_10_key in l_for_feed_bundlereceivedunlock_21_10_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedunlock_21_10_list[l_for_feed_bundlereceivedunlock_21_10_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedunlock_21_10_list[l_for_feed_bundlereceivedunlock_21_10_key];
            l_for_feed_bundlereceivedunlock_21_10_iteration = (l_for_feed_bundlereceivedunlock_21_10_iteration + 1);
            l_for_feed_bundlereceivedunlock_21_10_hasNext = (l_for_feed_bundlereceivedunlock_21_10_iteration < l_for_feed_bundlereceivedunlock_21_10_count);
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_gadgetsLocale, $S.callFunction("base.statsType", l_event.RECEIVEDUNLOCK.type, b, kwargs)), l_event.RECEIVEDUNLOCK.imageName), "label")));
            c.push("\n");
            if ((l_for_feed_bundlereceivedunlock_21_10_iteration == (o.item.eventCount - 1))) {
                c.push(" and ");
            } else {
                if (l_for_feed_bundlereceivedunlock_21_10_hasNext) {
                    c.push(", ");
                }
            }
            c.push("\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_unlocks.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("</div>\n </div>\n");
    return c.join("");
};
feed.bundlereceivedunlock.block_story_ago = new Surface.Block("feed.bundlereceivedunlock.block_story_ago");
feed.bundlereceivedunlock.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlereceivedwallpost = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlereceivedwallpost.block_story_heading","story_body": "feed.bundlereceivedwallpost.block_story_body","story_ago": "feed.bundlereceivedwallpost.block_story_ago","story_type": "feed.bundlereceivedwallpost.block_story_type"});
feed.addTemplate(new Surface.Template("bundlereceivedwallpost"));
feed.bundlereceivedwallpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlereceivedwallpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlereceivedwallpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlereceivedwallpost.block_story_type = new Surface.Block("feed.bundlereceivedwallpost.block_story_type");
feed.bundlereceivedwallpost.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="25" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/ico-wallpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall"/>');
    return c.join("");
};
feed.bundlereceivedwallpost.block_story_heading = new Surface.Block("feed.bundlereceivedwallpost.block_story_heading");
feed.bundlereceivedwallpost.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    o.entity = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.entity.owner}, null, kwargs));
    c.push(" received wallposts (");
    c.push(Surface.valOut(o.item.eventCount));
    c.push(")\n");
    return c.join("");
};
feed.bundlereceivedwallpost.block_story_body = new Surface.Block("feed.bundlereceivedwallpost.block_story_body");
feed.bundlereceivedwallpost.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedwallpost_12_2_list;
    l_for_feed_bundlereceivedwallpost_12_2_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlereceivedwallpost_12_2_list) > 0)) {
        for (var l_for_feed_bundlereceivedwallpost_12_2_key in l_for_feed_bundlereceivedwallpost_12_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedwallpost_12_2_list[l_for_feed_bundlereceivedwallpost_12_2_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedwallpost_12_2_list[l_for_feed_bundlereceivedwallpost_12_2_key];
            c.push(" <p>");
            c.push(Surface.valOut(l_event.RECEIVEDWALLPOST.writerUser.username));
            c.push(" wrote: ");
            c.push(Surface.valOut(l_event.RECEIVEDWALLPOST.wallBody));
            c.push("</p>\n");
        }
    }
    return c.join("");
};
feed.bundlereceivedwallpost.block_story_ago = new Surface.Block("feed.bundlereceivedwallpost.block_story_ago");
feed.bundlereceivedwallpost.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlereceivedwebprize = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlereceivedwebprize.block_story_heading","story_body": "feed.bundlereceivedwebprize.block_story_body","story_ago": "feed.bundlereceivedwebprize.block_story_ago","story_type": "feed.bundlereceivedwebprize.block_story_type"});
feed.addTemplate(new Surface.Template("bundlereceivedwebprize"));
feed.bundlereceivedwebprize.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlereceivedwebprize;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlereceivedwebprize");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlereceivedwebprize.block_story_type = new Surface.Block("feed.bundlereceivedwebprize.block_story_type");
feed.bundlereceivedwebprize.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.bundlereceivedwebprize.block_story_heading = new Surface.Block("feed.bundlereceivedwebprize.block_story_heading");
feed.bundlereceivedwebprize.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedwebprize_11_10_list;
    var l_feedEvent;
    l_feedEvent = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_feedEvent.owner}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.replace("Received [num] awards", "[num]", o.item.eventCount)));
    c.push(':\n <div class="feed-bundle-header-spacer">\n');
    l_for_feed_bundlereceivedwebprize_11_10_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlereceivedwebprize_11_10_list) > 0)) {
        for (var l_for_feed_bundlereceivedwebprize_11_10_key in l_for_feed_bundlereceivedwebprize_11_10_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedwebprize_11_10_list[l_for_feed_bundlereceivedwebprize_11_10_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedwebprize_11_10_list[l_for_feed_bundlereceivedwebprize_11_10_key];
            c.push(" TYPE: ");
            c.push(Surface.valOut(l_event.RECEIVEDWEBPRIZE.type));
            c.push("\n");
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
feed.bundlereceivedwebprize.block_story_body = new Surface.Block("feed.bundlereceivedwebprize.block_story_body");
feed.bundlereceivedwebprize.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlereceivedwebprize_21_6_list;
    var l_for_feed_bundlereceivedwebprize_21_6_iteration;
    var l_for_feed_bundlereceivedwebprize_21_6_hasNext;
    var l_for_feed_bundlereceivedwebprize_21_6_count;
    c.push(' <div class="feed-spacer-bundle">\n');
    l_for_feed_bundlereceivedwebprize_21_6_list = o.item.presentedEvents;
    l_for_feed_bundlereceivedwebprize_21_6_count = S.Modifier.count(l_for_feed_bundlereceivedwebprize_21_6_list);
    l_for_feed_bundlereceivedwebprize_21_6_iteration = 0;
    if ((S.Modifier.count(l_for_feed_bundlereceivedwebprize_21_6_list) > 0)) {
        for (var l_for_feed_bundlereceivedwebprize_21_6_key in l_for_feed_bundlereceivedwebprize_21_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlereceivedwebprize_21_6_list[l_for_feed_bundlereceivedwebprize_21_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlereceivedwebprize_21_6_list[l_for_feed_bundlereceivedwebprize_21_6_key];
            l_for_feed_bundlereceivedwebprize_21_6_iteration = (l_for_feed_bundlereceivedwebprize_21_6_iteration + 1);
            l_for_feed_bundlereceivedwebprize_21_6_hasNext = (l_for_feed_bundlereceivedwebprize_21_6_iteration < l_for_feed_bundlereceivedwebprize_21_6_count);
            c.push(" TYPE: ");
            c.push(Surface.valOut(l_event.RECEIVEDWEBPRIZE.type));
            c.push("\n");
            if ((l_for_feed_bundlereceivedwebprize_21_6_iteration == (o.item.eventCount - 1))) {
                c.push(" and ");
            } else {
                if (l_for_feed_bundlereceivedwebprize_21_6_hasNext) {
                    c.push(", ");
                }
            }
            c.push("\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n <div class="feed-story-area feed-story-small-icon">\n <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="feed-story-area">');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": S.Modifier.get(S.Modifier.get(o.item.presentedEvents, 0), "creationDate")}, null, kwargs));
    c.push("</div>\n </div>\n");
    return c.join("");
};
feed.bundlereceivedwebprize.block_story_ago = new Surface.Block("feed.bundlereceivedwebprize.block_story_ago");
feed.bundlereceivedwebprize.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlestatusmessage = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlestatusmessage.block_story_heading","story_body": "feed.bundlestatusmessage.block_story_body","story_ago": "feed.bundlestatusmessage.block_story_ago"});
feed.addTemplate(new Surface.Template("bundlestatusmessage"));
feed.bundlestatusmessage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlestatusmessage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlestatusmessage");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlestatusmessage.block_story_heading = new Surface.Block("feed.bundlestatusmessage.block_story_heading");
feed.bundlestatusmessage.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    o.entity = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.entity.owner}, null, kwargs));
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": o.entity.owner.username}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.bundlestatusmessage.block_story_body = new Surface.Block("feed.bundlestatusmessage.block_story_body");
feed.bundlestatusmessage.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlestatusmessage_10_6_list;
    l_for_feed_bundlestatusmessage_10_6_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlestatusmessage_10_6_list) > 0)) {
        for (var l_for_feed_bundlestatusmessage_10_6_key in l_for_feed_bundlestatusmessage_10_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlestatusmessage_10_6_list[l_for_feed_bundlestatusmessage_10_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlestatusmessage_10_6_list[l_for_feed_bundlestatusmessage_10_6_key];
            c.push(" <p>");
            c.push(Surface.valOut(l_event.STATUSMESSAGE.statusMessage));
            c.push(' <span class="feed-ago">');
            c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_event.creationDate}, null, kwargs));
            c.push("</span></p>\n");
        }
    }
    return c.join("");
};
feed.bundlestatusmessage.block_story_ago = new Surface.Block("feed.bundlestatusmessage.block_story_ago");
feed.bundlestatusmessage.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_bundlewroteforumpost = new Surface.BlockConfig("feed.bundle", {"story_heading": "feed.bundlewroteforumpost.block_story_heading","story_body": "feed.bundlewroteforumpost.block_story_body","story_ago": "feed.bundlewroteforumpost.block_story_ago","story_type": "feed.bundlewroteforumpost.block_story_type"});
feed.addTemplate(new Surface.Template("bundlewroteforumpost"));
feed.bundlewroteforumpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_bundlewroteforumpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.bundlewroteforumpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.bundle", o, b, kwargs);
};
feed.bundlewroteforumpost.block_story_type = new Surface.Block("feed.bundlewroteforumpost.block_story_type");
feed.bundlewroteforumpost.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_forumpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Reply"));
    c.push('"/>');
    return c.join("");
};
feed.bundlewroteforumpost.block_story_heading = new Surface.Block("feed.bundlewroteforumpost.block_story_heading");
feed.bundlewroteforumpost.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "userbundle")), {"events": o.item.presentedEvents,"eventCount": o.item.eventCount}, null, kwargs));
    c.push("\n");
    o.entity = S.Modifier.get(o.item.presentedEvents, 0);
    c.push(' wrote posts in the forum thread <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": o.entity.itemId})));
    c.push('">');
    c.push(Surface.valOut(o.entity.WROTEFORUMPOST.threadTitle));
    c.push("</a>\n");
    return c.join("");
};
feed.bundlewroteforumpost.block_story_body = new Surface.Block("feed.bundlewroteforumpost.block_story_body");
feed.bundlewroteforumpost.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_bundlewroteforumpost_13_6_list;
    l_for_feed_bundlewroteforumpost_13_6_list = o.item.presentedEvents;
    if ((S.Modifier.count(l_for_feed_bundlewroteforumpost_13_6_list) > 0)) {
        for (var l_for_feed_bundlewroteforumpost_13_6_key in l_for_feed_bundlewroteforumpost_13_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_bundlewroteforumpost_13_6_list[l_for_feed_bundlewroteforumpost_13_6_key])) {
                continue;
            }
            var l_event = l_for_feed_bundlewroteforumpost_13_6_list[l_for_feed_bundlewroteforumpost_13_6_key];
            c.push(" <p>");
            c.push(Surface.valOut(l_event.owner.username));
            c.push(" wrote: ");
            c.push(Surface.valOut(l_event.WROTEFORUMPOST.postBody));
            c.push("</p>\n");
        }
    }
    return c.join("");
};
feed.bundlewroteforumpost.block_story_ago = new Surface.Block("feed.bundlewroteforumpost.block_story_ago");
feed.bundlewroteforumpost.block_story_ago.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_ccommentitems = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("ccommentitems"));
feed.ccommentitems.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_ccommentitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.ccommentitems");
    var l_for_feed_ccommentitems_5_7_list;
    c.push("\n");
    if (o.isSingle) {
        c.push(' <div class="feed-single-item-comments" style="clear:both;">\n');
        l_for_feed_ccommentitems_5_7_list = S.Modifier.sort(((typeof (o) != "undefined" && o !== null && typeof (o.comments) != "undefined" && o.comments !== null) ? o.comments : []), "creationDate");
        if ((S.Modifier.count(l_for_feed_ccommentitems_5_7_list) > 0)) {
            for (var l_for_feed_ccommentitems_5_7_key in l_for_feed_ccommentitems_5_7_list) {
                if (!Surface.isValidLoopItem(l_for_feed_ccommentitems_5_7_list[l_for_feed_ccommentitems_5_7_key])) {
                    continue;
                }
                var l_comment = l_for_feed_ccommentitems_5_7_list[l_for_feed_ccommentitems_5_7_key];
                c.push(' <div class="feed-comments-item">\n <div class="feed-story-body">\n ');
                c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_comment.owner}, null, kwargs));
                c.push('\n </div>\n <div class="feed-story-body feed-comment-body">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_comment.owner}, null, kwargs));
                c.push("\n");
                if (l_comment.hidden) {
                    c.push(" <i>");
                    c.push(Surface.valOut("This comment has been hidden by the Battlelog Administrators."));
                    c.push("</i>\n");
                } else {
                    c.push(" ");
                    c.push(Surface.valOut(l_comment.body));
                    c.push("\n");
                }
                c.push(' <div style="text-transform:uppercase;" class="feed-story-creationDate">');
                c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_comment.creationDate}, null, kwargs));
                c.push("</div>\n </div>\n </div>\n");
            }
        }
        c.push(" </div>\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.count(o.comments)));
        c.push(" ");
        c.push(Surface.valOut("COMMENTS"));
        c.push("\n");
    }
    c.push("\n");
    return c.join("");
};
var block_feed_commentedblog = new Surface.BlockConfig("feed.story", {"story_heading": "feed.commentedblog.block_story_heading","story_body": "feed.commentedblog.block_story_body","story_small_icon": "feed.commentedblog.block_story_small_icon"});
feed.addTemplate(new Surface.Template("commentedblog"));
feed.commentedblog.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_commentedblog;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.commentedblog");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.commentedblog.block_story_heading = new Surface.Block("feed.commentedblog.block_story_heading");
feed.commentedblog.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_blogpost;
    var l_langurl;
    var l_entity;
    var l_username;
    l_entity = o.item.COMMENTEDBLOG;
    l_langurl = "[username] commented on the blog [blogpost]";
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    l_blogpost = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": o.item.itemId})) + '">') + S.Modifier.htmlspecialchars(l_entity.blogTitle)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[blogpost]": l_blogpost}));
    c.push("\n");
    return c.join("");
};
feed.commentedblog.block_story_body = new Surface.Block("feed.commentedblog.block_story_body");
feed.commentedblog.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    l_entity = o.item.COMMENTEDBLOG;
    c.push(' <div class="wallpost-body">\n ');
    c.push(Surface.valOut(l_entity.blogCommentBody));
    c.push("\n </div>\n");
    return c.join("");
};
feed.commentedblog.block_story_small_icon = new Surface.Block("feed.commentedblog.block_story_small_icon");
feed.commentedblog.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_blogcomment.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_commentedgamereport = new Surface.BlockConfig("feed.story", {"story_heading": "feed.commentedgamereport.block_story_heading","story_body": "feed.commentedgamereport.block_story_body","story_small_icon": "feed.commentedgamereport.block_story_small_icon"});
feed.addTemplate(new Surface.Template("commentedgamereport"));
feed.commentedgamereport.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_commentedgamereport;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.commentedgamereport");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.commentedgamereport.block_story_heading = new Surface.Block("feed.commentedgamereport.block_story_heading");
feed.commentedgamereport.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_report;
    var l_entity;
    var l_mapInfo;
    var l_mapNameLocale;
    var l_username;
    l_entity = o.item.COMMENTEDGAMEREPORT;
    l_mapInfo = $S.callFunction("serverguide.mapinfo", o.item.section, l_entity.map, b, kwargs);
    l_mapNameLocale = S.Modifier.get(l_mapInfo, "name", "");
    l_langurl = "[username] commented on Battle Report [report].";
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    l_report = (((((((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.item.section, b, kwargs),"gameHistoryId": l_entity.gameReportHistoryId,"platform": o.item.platform})) + '">') + S.Modifier.htmlspecialchars(((typeof (l_entity) != "undefined" && l_entity !== null && typeof (l_entity.serverName) != "undefined" && l_entity.serverName !== null) ? l_entity.serverName : ""))) + " ") + (S.translations[l_mapNameLocale] || l_mapNameLocale)) + " ") + S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, ((typeof (l_entity) != "undefined" && l_entity !== null && typeof (l_entity.gameMode) != "undefined" && l_entity.gameMode !== null) ? l_entity.gameMode : 1))) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[report]": l_report}));
    c.push("\n");
    return c.join("");
};
feed.commentedgamereport.block_story_body = new Surface.Block("feed.commentedgamereport.block_story_body");
feed.commentedgamereport.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    l_entity = o.item.COMMENTEDGAMEREPORT;
    c.push(' <div class="wallpost-body">\n ');
    c.push(Surface.valOut(l_entity.gameReportComment));
    if ((S.Modifier.count(l_entity.gameReportComment) == 100)) {
        c.push("...");
    }
    c.push("\n </div>\n");
    return c.join("");
};
feed.commentedgamereport.block_story_small_icon = new Surface.Block("feed.commentedgamereport.block_story_small_icon");
feed.commentedgamereport.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_blogcomment.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_commentitems = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("commentitems"));
feed.commentitems.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_commentitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.commentitems");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((o.minify && (o.numComments > 2))) {
        c.push(' <div class="feed-comments-show" itemId="');
        c.push(Surface.valOut(o.itemId));
        c.push('"> ');
        c.push(Surface.valOut(S.Modifier.replace("Show [num] more...", "[num]", (o.numComments - 2))));
        c.push("</div>\n");
    }
    c.push(feed.commentitems.surface_7_2.render({"comments": ((typeof (o) != "undefined" && o !== null && typeof (o.comments) != "undefined" && o.comments !== null) ? o.comments : null),"itemId": ((typeof (o) != "undefined" && o !== null && typeof (o.itemId) != "undefined" && o.itemId !== null) ? o.itemId : null),"itemOwnerId": ((typeof (o) != "undefined" && o !== null && typeof (o.itemOwnerId) != "undefined" && o.itemOwnerId !== null) ? o.itemOwnerId : null),"session": ((typeof (l_session) != "undefined" && l_session !== null) ? l_session : null)}, b, kwargs));
    return c.join("");
};
feed.commentitems.surface_7_2 = new Surface.SurfaceList("feed.commentitems.surface_7_2", "comments", "comment", "comment.id");
feed.commentitems.surface_8_6 = new Surface.SingleSurface("feed.commentitems.surface_8_6");
feed.commentitems.surface_8_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_commentitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.commentitems");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat(S.Modifier.concat("comments-for-", o.itemId), S.Modifier.concat("_", o.comment.id)));
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.comment) != "undefined" && o.comment !== null && typeof (o.comment.owner) != "undefined" && o.comment.owner !== null)) {
        c.push(' <div class="feed-comments-item">\n');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null) && (o.comment.owner.userId == o.session.user.userId)) || ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null) && (o.itemOwnerId == o.session.user.userId)))) {
            c.push(' <div class="feed-story-comment-delete" commentId="');
            c.push(Surface.valOut(o.comment.id));
            c.push('" commentUrl="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/deleteComment/", Surface.urlContext)));
            c.push('"></div>\n');
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null) && (o.session.user.userId != o.comment.owner.userId))) {
            c.push(' <div class="feed-story-report-container">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/feed/reportPostDropdown/{id}/{commentId}/{type}/", Surface.urlContext, {"id": o.itemId,"commentId": o.comment.id,"type": "comment"})}, null, kwargs));
            c.push("\n </div>\n");
        }
        c.push('\n <div class="feed-story-body">\n ');
        c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.comment.owner}, null, kwargs));
        c.push('\n </div>\n <div class="feed-story-body feed-comment-body">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.comment.owner}, null, kwargs));
        c.push("\n");
        if (o.comment.hidden) {
            c.push(" <i>");
            c.push(Surface.valOut("This comment has been hidden by the Battlelog Administrators."));
            c.push("</i>\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut(o.comment.body));
            c.push("\n");
        }
        c.push(' <div class="feed-story-creationDate">');
        c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.comment.creationDate}, null, kwargs));
        c.push("</div>\n </div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.commentitems", "surface_8_6", S.Modifier.concat(S.Modifier.concat("comments-for-", o.itemId), S.Modifier.concat("_", o.comment.id)), o, b);
    return c.join("");
};
feed.commentitems.surface_7_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_commentitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.commentitems");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("comments-for-", o.itemId));
    c.push('">');
    var l_for_feed_commentitems_7_2_list;
    l_for_feed_commentitems_7_2_list = o.comments;
    if ((S.Modifier.count(l_for_feed_commentitems_7_2_list) > 0)) {
        for (var l_for_feed_commentitems_7_2_key in l_for_feed_commentitems_7_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_commentitems_7_2_list[l_for_feed_commentitems_7_2_key])) {
                continue;
            }
            var l_comment = l_for_feed_commentitems_7_2_list[l_for_feed_commentitems_7_2_key];
            c.push(feed.commentitems.surface_8_6.render({"comment": ((typeof (l_comment) != "undefined" && l_comment !== null) ? l_comment : null),"itemId": ((typeof (o) != "undefined" && o !== null && typeof (o.itemId) != "undefined" && o.itemId !== null) ? o.itemId : null),"itemOwnerId": ((typeof (o) != "undefined" && o !== null && typeof (o.itemOwnerId) != "undefined" && o.itemOwnerId !== null) ? o.itemOwnerId : null),"session": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null) ? o.session : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.commentitems", "surface_7_2", S.Modifier.concat("comments-for-", o.itemId), o, b);
    return c.join("");
};
var block_feed_createdforumthread = new Surface.BlockConfig("feed.story", {"story_heading": "feed.createdforumthread.block_story_heading","story_body": "feed.createdforumthread.block_story_body","story_small_icon": "feed.createdforumthread.block_story_small_icon","story_type": "feed.createdforumthread.block_story_type"});
feed.addTemplate(new Surface.Template("createdforumthread"));
feed.createdforumthread.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_createdforumthread;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.createdforumthread");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.createdforumthread.block_story_type = new Surface.Block("feed.createdforumthread.block_story_type");
feed.createdforumthread.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="25" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/ico-newpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Thread"));
    c.push('"/>');
    return c.join("");
};
feed.createdforumthread.block_story_heading = new Surface.Block("feed.createdforumthread.block_story_heading");
feed.createdforumthread.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_thread;
    var l_username;
    l_langurl = "[username] created the forum thread [thread]";
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    l_thread = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": o.item.itemId})) + '">') + S.Modifier.htmlspecialchars(o.item.CREATEDFORUMTHREAD.threadTitle)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[thread]": l_thread}));
    c.push("\n");
    return c.join("");
};
feed.createdforumthread.block_story_body = new Surface.Block("feed.createdforumthread.block_story_body");
feed.createdforumthread.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="wallpost-body">\n ');
    if ((S.Modifier.count(o.item.CREATEDFORUMTHREAD.threadBody) > 150)) {
        c.push(Surface.valOut(S.Modifier.substring(o.item.CREATEDFORUMTHREAD.threadBody, 0, 150)));
        c.push("...");
    } else {
        c.push(Surface.valOut(o.item.CREATEDFORUMTHREAD.threadBody));
    }
    c.push("\n </div>\n");
    return c.join("");
};
feed.createdforumthread.block_story_small_icon = new Surface.Block("feed.createdforumthread.block_story_small_icon");
feed.createdforumthread.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_forumtopic.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_createdplatoon = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.createdplatoon.block_story_avatar","story_heading": "feed.createdplatoon.block_story_heading","story_body": "feed.createdplatoon.block_story_body","story_small_icon": "feed.createdplatoon.block_story_small_icon","story_type": "feed.createdplatoon.block_story_type"});
feed.addTemplate(new Surface.Template("createdplatoon"));
feed.createdplatoon.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_createdplatoon;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.createdplatoon");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.createdplatoon.block_story_type = new Surface.Block("feed.createdplatoon.block_story_type");
feed.createdplatoon.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Created platoon"/>');
    return c.join("");
};
feed.createdplatoon.block_story_small_icon = new Surface.Block("feed.createdplatoon.block_story_small_icon");
feed.createdplatoon.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Created platoon"/>');
    return c.join("");
};
feed.createdplatoon.block_story_avatar = new Surface.Block("feed.createdplatoon.block_story_avatar");
feed.createdplatoon.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.createdplatoon.block_story_heading = new Surface.Block("feed.createdplatoon.block_story_heading");
feed.createdplatoon.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_platoon;
    var l_username;
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.CREATEDPLATOON) != "undefined" && o.item.CREATEDPLATOON !== null && typeof (o.item.CREATEDPLATOON.platoon) != "undefined" && o.item.CREATEDPLATOON.platoon !== null && typeof (o.item.CREATEDPLATOON.platoon.name) != "undefined" && o.item.CREATEDPLATOON.platoon.name !== null)) {
        l_langstr = "[username] created a platoon named [platoon]";
        l_platoon = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, o.item.CREATEDPLATOON.platoon)) + '">') + S.Modifier.htmlspecialchars(o.item.CREATEDPLATOON.platoon.name)) + "</a>");
    } else {
        l_langstr = "created a platoon";
        l_platoon = "";
    }
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username]": l_username,"[platoon]": l_platoon}));
    c.push("\n");
    return c.join("");
};
feed.createdplatoon.block_story_body = new Surface.Block("feed.createdplatoon.block_story_body");
feed.createdplatoon.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
feed.addTemplate(new Surface.Template("empty"));
var block_feed_filter = new Surface.BlockConfig("base.box3x", {"boxContent": "feed.filter.block_boxContent","boxSubHeader": "feed.filter.block_boxSubHeader","boxHeader": "feed.filter.block_boxHeader"});
feed.addTemplate(new Surface.Template("filter"));
var block_feed_filterfeed = new Surface.BlockConfig("feed.base", {});
feed.addTemplate(new Surface.Template("filterfeed"));
var block_feed_gamereport = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.gamereport.block_story_avatar","story_heading": "feed.gamereport.block_story_heading","story_body": "feed.gamereport.block_story_body","story_small_icon": "feed.gamereport.block_story_small_icon","story_type": "feed.gamereport.block_story_type"});
feed.addTemplate(new Surface.Template("gamereport"));
feed.gamereport.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_gamereport;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.gamereport");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.gamereport.block_story_type = new Surface.Block("feed.gamereport.block_story_type");
feed.gamereport.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_report.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Game report"/>');
    return c.join("");
};
feed.gamereport.block_story_avatar = new Surface.Block("feed.gamereport.block_story_avatar");
feed.gamereport.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.gamereport.block_story_heading = new Surface.Block("feed.gamereport.block_story_heading");
feed.gamereport.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_num;
    var l_username;
    c.push("\n");
    l_num = S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.GAMEREPORT) != "undefined" && o.item.GAMEREPORT !== null && typeof (o.item.GAMEREPORT.statItems) != "undefined" && o.item.GAMEREPORT.statItems !== null) ? o.item.GAMEREPORT.statItems : []));
    if (l_num) {
        l_langurl = "[username] received [num] new items:";
    } else {
        l_langurl = "[username] received [num] new item:";
    }
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[num]": l_num}));
    c.push('\n <div style="clear: both;padding-top: 10px;"></div>\n');
    return c.join("");
};
feed.gamereport.block_story_body = new Surface.Block("feed.gamereport.block_story_body");
feed.gamereport.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_unlocksCount;
    var l_for_feed_gamereport_31_6_iteration;
    var l_for_feed_gamereport_31_6_count;
    var l_for_feed_gamereport_31_6_hasNext;
    var l_for_feed_gamereport_31_6_list;
    var l_personaId;
    var l_platform;
    l_unlocksCount = S.Modifier.count(o.item.GAMEREPORT.statItems);
    l_personaId = ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.personaId) != "undefined" && o.item.personaId !== null) ? o.item.personaId : 0);
    l_platform = $S.callFunction("common.platformIntToPlatform", o.item.platform, b, kwargs);
    c.push("\n");
    l_for_feed_gamereport_31_6_list = S.Modifier.sort(o.item.GAMEREPORT.statItems, "type");
    l_for_feed_gamereport_31_6_count = S.Modifier.count(l_for_feed_gamereport_31_6_list);
    l_for_feed_gamereport_31_6_iteration = 0;
    if ((S.Modifier.count(l_for_feed_gamereport_31_6_list) > 0)) {
        for (var l_for_feed_gamereport_31_6_key in l_for_feed_gamereport_31_6_list) {
            if (!Surface.isValidLoopItem(l_for_feed_gamereport_31_6_list[l_for_feed_gamereport_31_6_key])) {
                continue;
            }
            var l_unlock = l_for_feed_gamereport_31_6_list[l_for_feed_gamereport_31_6_key];
            l_for_feed_gamereport_31_6_iteration = (l_for_feed_gamereport_31_6_iteration + 1);
            l_for_feed_gamereport_31_6_hasNext = (l_for_feed_gamereport_31_6_iteration < l_for_feed_gamereport_31_6_count);
            c.push(' <div class="feed-gamereport-info">\n');
            if ((l_unlock.type == 64)) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId,"statsId": l_unlock.unlockId,"statsName": (S.translations[l_unlock.langKeyTitle] || l_unlock.langKeyTitle)})));
                c.push('">\n <img class="bubble-title" data-battlebubble="<b>');
                c.push(Surface.valOut((S.translations[l_unlock.langKeyTitle] || l_unlock.langKeyTitle)));
                c.push("</b><br>Unlocked by getting <b>");
                c.push(Surface.valOut(((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.codeNeeded) != "undefined" && l_unlock.codeNeeded !== null) ? l_unlock.codeNeeded : "Unknown")));
                c.push("</b> <b>");
                c.push(Surface.valOut(((S.Modifier.round(l_unlock.valueNeeded) !== null) ? S.Modifier.round(l_unlock.valueNeeded) : "Unknown")));
                c.push('</b>" width="79" height="43" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_unlock.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n </a>\n');
            } else {
                if ((l_unlock.type == 256)) {
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId})));
                    c.push('">\n <img class="bubble-title" data-battlebubble="<b>');
                    c.push(Surface.valOut((S.translations[l_unlock.langKeyTitle] || l_unlock.langKeyTitle)));
                    c.push("</b><br>Unlocked for <b>");
                    c.push(Surface.valOut((((S.translations[l_unlock.parentLangKeyTitle] || l_unlock.parentLangKeyTitle) !== null) ? (S.translations[l_unlock.parentLangKeyTitle] || l_unlock.parentLangKeyTitle) : "Unknown weapon")));
                    c.push("</b> by getting <b>");
                    c.push(Surface.valOut(((S.Modifier.round(l_unlock.valueNeeded) !== null) ? S.Modifier.round(l_unlock.valueNeeded) : "unknown amount of")));
                    c.push('</b> kills" width="79" height="43" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_unlock.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n </a>\n');
                } else {
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId})));
                    c.push('">');
                    c.push(Surface.valOut((((S.translations[l_unlock.langKeyTitle] || l_unlock.langKeyTitle) !== null) ? (S.translations[l_unlock.langKeyTitle] || l_unlock.langKeyTitle) : "LANGUAGE KEY MISSING")));
                    c.push("</a> ");
                    if ((l_for_feed_gamereport_31_6_iteration == (l_unlocksCount - 1))) {
                        c.push(" and&nbsp;");
                    } else {
                        if (l_for_feed_gamereport_31_6_hasNext) {
                            c.push(", ");
                        }
                    }
                    c.push("\n");
                }
            }
            c.push("\n </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n');
    return c.join("");
};
feed.gamereport.block_story_small_icon = new Surface.Block("feed.gamereport.block_story_small_icon");
feed.gamereport.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_report.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_index = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("index"));
feed.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.index");
    var l_for_feed_index_4_2_list;
    var l_for_feed_index_19_2_count;
    var l_for_feed_index_19_2_list;
    var l_for_feed_index_19_2_iteration;
    var l_hasNext;
    var l_for_feed_index_19_2_hasNext;
    c.push(" ");
    c.push("\n");
    o.users = {};
    l_for_feed_index_4_2_list = o.feed;
    if ((S.Modifier.count(l_for_feed_index_4_2_list) > 0)) {
        for (var l_for_feed_index_4_2_key in l_for_feed_index_4_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_index_4_2_list[l_for_feed_index_4_2_key])) {
                continue;
            }
            var l_item = l_for_feed_index_4_2_list[l_for_feed_index_4_2_key];
            if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.owner) != "undefined" && l_item.owner !== null)) {
                o.users = S.Modifier.set(o.users, S.Modifier.concat("", l_item.owner.userId), l_item.owner);
            }
            if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.comment1) != "undefined" && l_item.comment1 !== null && typeof (l_item.comment1.owner) != "undefined" && l_item.comment1.owner !== null)) {
                o.users = S.Modifier.set(o.users, S.Modifier.concat("", l_item.comment1.owner.userId), l_item.comment1.owner);
            }
            if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.comment2) != "undefined" && l_item.comment2 !== null && typeof (l_item.comment2.owner) != "undefined" && l_item.comment2.owner !== null)) {
                o.users = S.Modifier.set(o.users, S.Modifier.concat("", l_item.comment2.owner.userId), l_item.comment2.owner);
            }
        }
    }
    if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null)) {
        o.users = S.Modifier.set(o.users, S.Modifier.concat("", Surface.globalContext.session.user.userId), Surface.globalContext.session.user);
    }
    c.push("\n");
    l_for_feed_index_19_2_list = o.feed;
    l_for_feed_index_19_2_count = S.Modifier.count(l_for_feed_index_19_2_list);
    l_for_feed_index_19_2_iteration = 0;
    if ((S.Modifier.count(l_for_feed_index_19_2_list) > 0)) {
        c.push(' <div id="feed-item-likes-popup"></div>\n <ul class="feed-events base-menu">\n');
        for (var l_for_feed_index_19_2_key in l_for_feed_index_19_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_index_19_2_list[l_for_feed_index_19_2_key])) {
                continue;
            }
            var l_item = l_for_feed_index_19_2_list[l_for_feed_index_19_2_key];
            l_for_feed_index_19_2_iteration = (l_for_feed_index_19_2_iteration + 1);
            l_for_feed_index_19_2_hasNext = (l_for_feed_index_19_2_iteration < l_for_feed_index_19_2_count);
            l_hasNext = !(l_for_feed_index_19_2_hasNext);
            c.push("\n");
            o.feedTemplateName = S.Modifier.concat("feed.", l_item.event);
            c.push(" ");
            c.push(Surface.importTemplate(o.feedTemplateName, {"noBorder": l_hasNext,"users": o.users,"item": l_item,"sessionUserId": o.sessionUserId,"feedContext": o.feedContext}, null, kwargs));
            c.push("\n");
        }
        c.push(" </ul>\n");
    } else {
        c.push(' <div class="feed-nothing-happening">\n');
        if ((o.feedContext == "home")) {
            c.push(" <p>");
            c.push(Surface.valOut("Friends' Battle feed is empty. In the Battle feed you'll get updates from all of your Battlefield friends, in real-time."));
            c.push("\n <br /><br />\n <strong>");
            c.push(Surface.valOut("Here are a couple of ways of finding new friends"));
            c.push(':</strong>\n <ul>\n <li><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Find a Server and make some friends"));
            c.push('</a></li>\n <li><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Hang out in the forums"));
            c.push("</a></li>\n </ul>\n </p>\n");
        } else {
            c.push(' <p class="feed-nothing-happening-empty">');
            c.push(Surface.valOut("There are no more events to show"));
            c.push("</p>\n");
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    return c.join("");
};
var block_feed_joinedplatoon = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.joinedplatoon.block_story_avatar","story_heading": "feed.joinedplatoon.block_story_heading","story_body": "feed.joinedplatoon.block_story_body","story_small_icon": "feed.joinedplatoon.block_story_small_icon","story_type": "feed.joinedplatoon.block_story_type"});
feed.addTemplate(new Surface.Template("joinedplatoon"));
feed.joinedplatoon.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_joinedplatoon;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.joinedplatoon");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.joinedplatoon.block_story_type = new Surface.Block("feed.joinedplatoon.block_story_type");
feed.joinedplatoon.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Joined platoon"));
    c.push('"/>');
    return c.join("");
};
feed.joinedplatoon.block_story_small_icon = new Surface.Block("feed.joinedplatoon.block_story_small_icon");
feed.joinedplatoon.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Joined platoon"));
    c.push('"/>');
    return c.join("");
};
feed.joinedplatoon.block_story_avatar = new Surface.Block("feed.joinedplatoon.block_story_avatar");
feed.joinedplatoon.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.joinedplatoon.block_story_heading = new Surface.Block("feed.joinedplatoon.block_story_heading");
feed.joinedplatoon.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_platoon;
    var l_username;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.JOINEDPLATOON) != "undefined" && o.item.JOINEDPLATOON !== null && typeof (o.item.JOINEDPLATOON.platoon) != "undefined" && o.item.JOINEDPLATOON.platoon !== null && typeof (o.item.JOINEDPLATOON.platoon.name) != "undefined" && o.item.JOINEDPLATOON.platoon.name !== null)) {
        l_langurl = "[username] joined the platoon [platoon]";
        l_platoon = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, o.item.JOINEDPLATOON.platoon)) + '">') + S.Modifier.htmlspecialchars(o.item.JOINEDPLATOON.platoon.name)) + "</a>");
    } else {
        l_langurl = "joined a platoon.";
        l_platoon = "";
    }
    c.push("\n");
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[platoon]": l_platoon}));
    c.push("\n");
    return c.join("");
};
feed.joinedplatoon.block_story_body = new Surface.Block("feed.joinedplatoon.block_story_body");
feed.joinedplatoon.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_kickedplatoon = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.kickedplatoon.block_story_avatar","story_heading": "feed.kickedplatoon.block_story_heading","story_body": "feed.kickedplatoon.block_story_body","story_small_icon": "feed.kickedplatoon.block_story_small_icon","story_type": "feed.kickedplatoon.block_story_type"});
feed.addTemplate(new Surface.Template("kickedplatoon"));
feed.kickedplatoon.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_kickedplatoon;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.kickedplatoon");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.kickedplatoon.block_story_type = new Surface.Block("feed.kickedplatoon.block_story_type");
feed.kickedplatoon.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Kicked platoon"/>');
    return c.join("");
};
feed.kickedplatoon.block_story_small_icon = new Surface.Block("feed.kickedplatoon.block_story_small_icon");
feed.kickedplatoon.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Kicked platoon"/>');
    return c.join("");
};
feed.kickedplatoon.block_story_avatar = new Surface.Block("feed.kickedplatoon.block_story_avatar");
feed.kickedplatoon.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.kickedplatoon.block_story_heading = new Surface.Block("feed.kickedplatoon.block_story_heading");
feed.kickedplatoon.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_platoon;
    var l_username;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.JOINEDPLATOON) != "undefined" && o.item.JOINEDPLATOON !== null && typeof (o.item.JOINEDPLATOON.platoon) != "undefined" && o.item.JOINEDPLATOON.platoon !== null && typeof (o.item.JOINEDPLATOON.platoon.name) != "undefined" && o.item.JOINEDPLATOON.platoon.name !== null)) {
        l_langurl = "[username] was kicked from platoon [platoon].";
        l_platoon = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, o.item.KICKEDPLATOON.platoon)) + '">') + S.Modifier.htmlspecialchars(o.item.KICKEDPLATOON.platoon.name)) + "</a>");
    } else {
        l_langurl = "[username] was kicked from a platoon.";
        l_platoon = "";
    }
    c.push("\n");
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[platoon]": l_platoon}));
    c.push("\n");
    return c.join("");
};
feed.kickedplatoon.block_story_body = new Surface.Block("feed.kickedplatoon.block_story_body");
feed.kickedplatoon.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_leftplatoon = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.leftplatoon.block_story_avatar","story_heading": "feed.leftplatoon.block_story_heading","story_body": "feed.leftplatoon.block_story_body","story_small_icon": "feed.leftplatoon.block_story_small_icon","story_type": "feed.leftplatoon.block_story_type"});
feed.addTemplate(new Surface.Template("leftplatoon"));
feed.leftplatoon.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_leftplatoon;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.leftplatoon");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.leftplatoon.block_story_type = new Surface.Block("feed.leftplatoon.block_story_type");
feed.leftplatoon.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Left platoon"));
    c.push('"/>');
    return c.join("");
};
feed.leftplatoon.block_story_small_icon = new Surface.Block("feed.leftplatoon.block_story_small_icon");
feed.leftplatoon.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Left platoon"));
    c.push('"/>');
    return c.join("");
};
feed.leftplatoon.block_story_avatar = new Surface.Block("feed.leftplatoon.block_story_avatar");
feed.leftplatoon.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.leftplatoon.block_story_heading = new Surface.Block("feed.leftplatoon.block_story_heading");
feed.leftplatoon.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_platoon;
    var l_username;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.LEFTPLATOON) != "undefined" && o.item.LEFTPLATOON !== null && typeof (o.item.LEFTPLATOON.platoon) != "undefined" && o.item.LEFTPLATOON.platoon !== null && typeof (o.item.LEFTPLATOON.platoon.name) != "undefined" && o.item.LEFTPLATOON.platoon.name !== null)) {
        l_langurl = "[username] left the platoon [platoon].";
        l_platoon = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, o.item.LEFTPLATOON.platoon)) + '">') + S.Modifier.htmlspecialchars(o.item.LEFTPLATOON.platoon.name)) + "</a>");
    } else {
        l_langurl = "[username] left a platoon";
        l_platoon = "";
    }
    c.push("\n");
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[platoon]": l_platoon}));
    c.push("\n");
    return c.join("");
};
feed.leftplatoon.block_story_body = new Surface.Block("feed.leftplatoon.block_story_body");
feed.leftplatoon.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_levelcomplete = new Surface.BlockConfig("feed.story", {"story_heading": "feed.levelcomplete.block_story_heading","story_body": "feed.levelcomplete.block_story_body","story_small_icon": "feed.levelcomplete.block_story_small_icon"});
feed.addTemplate(new Surface.Template("levelcomplete"));
feed.levelcomplete.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_levelcomplete;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.levelcomplete");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.levelcomplete.block_story_small_icon = new Surface.Block("feed.levelcomplete.block_story_small_icon");
feed.levelcomplete.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" class="" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_friend.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.levelcomplete.block_story_heading = new Surface.Block("feed.levelcomplete.block_story_heading");
feed.levelcomplete.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_friend;
    var l_levelname;
    var l_langurl;
    var l_difficulty;
    var l_entity;
    var l_playmode;
    var l_coopLevel;
    var l_coopLevelTitle;
    var l_username;
    l_entity = o.item.LEVELCOMPLETE;
    if ((l_entity.gameType == 4)) {
        l_coopLevel = $S.callFunction("coop.coopmission", l_entity.level, b, kwargs);
        l_coopLevelTitle = S.Modifier.get(l_coopLevel, "title");
        l_username = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs);
        c.push("\n");
        if ((S.Modifier.get(S.Modifier.get(l_entity, "friend", {}), "username") !== null)) {
            l_langurl = "[username1] and [username2] completed a co-op mission";
            l_friend = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": S.Modifier.get(S.Modifier.get(l_entity, "friend", {}), "username")})) + '">') + S.Modifier.htmlspecialchars(S.Modifier.get(S.Modifier.get(l_entity, "friend", {}), "username", "someone"))) + "</a>");
        } else {
            l_langurl = "[username1] completed a co-op mission";
            l_friend = "";
        }
        c.push("\n");
        c.push(S.Modifier.replacemulti(l_langurl, {"[username1]": l_username,"[username2]": l_friend}));
        c.push('\n <div style="margin-top: 10px;">\n <div class="feed-award-image">\n <div class="common-selected-server-mapimage">\n <div class="feed-coop-level-complete-icon"></div>\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/coop/cards/146x79/", S.Modifier.lower(l_entity.level)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" width="146px" height="79px" style="background-color: black;" />\n </div>\n </div>\n <div class="feed-award-info" style="margin-left: 5px;">\n <div class="feed-info-title">');
        c.push(Surface.valOut((S.translations[l_coopLevelTitle] || l_coopLevelTitle)));
        c.push('</div>\n <div class="feed-info-description">');
        c.push(Surface.valOut(S.Modifier.capitalize((S.translations[l_entity.difficulty] || l_entity.difficulty))));
        c.push("</div>\n </div>\n </div>\n");
    } else {
        c.push("\n");
        l_username = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs);
        c.push("\n");
        l_langurl = "[username] completed [playingmode] [levelname] on [difficulty] difficulty.";
        c.push("\n");
        l_username = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs);
        l_playmode = Surface.importTemplate(("common" + ("." + "playingMode")), {"playingMode": l_entity.gameType}, null, kwargs);
        l_levelname = $S.callFunction("common.levelName", o.item.section, l_entity.level, b, kwargs);
        l_difficulty = $S.callFunction("common.difficultyName", o.item.section, l_entity.difficulty, b, kwargs);
        c.push("\n");
        c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[playmode]": l_playmode,"[levelname]": l_levelname,"[difficulty]": l_difficulty}));
        c.push('\n <div class="">\n <div class="feed-award-image">\n ');
        c.push(Surface.valOut($S.callFunction("common.levelName", o.item.section, l_entity.level, b, kwargs)));
        c.push('\n </div>\n <div class="feed-award-info ">\n <div class="feed-info-title">');
        c.push(Surface.valOut($S.callFunction("common.levelName", o.item.section, l_entity.level, b, kwargs)));
        c.push('</div>\n <div class="feed-info-description">');
        c.push(Surface.valOut($S.callFunction("common.difficultyName", o.item.section, l_entity.difficulty, b, kwargs)));
        c.push("</div>\n </div>\n </div>\n");
    }
    c.push("\n");
    return c.join("");
};
feed.levelcomplete.block_story_body = new Surface.Block("feed.levelcomplete.block_story_body");
feed.levelcomplete.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_likeitems = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("likeitems"));
feed.likeitems.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_likeitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.likeitems");
    c.push("\n");
    c.push(feed.likeitems.surface_2_2.render({"excess": ((typeof (o) != "undefined" && o !== null && typeof (o.excess) != "undefined" && o.excess !== null) ? o.excess : null),"item": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null) ? o.item : null),"totalcount": ((typeof (o) != "undefined" && o !== null && typeof (o.totalcount) != "undefined" && o.totalcount !== null) ? o.totalcount : null),"usercount": ((typeof (o) != "undefined" && o !== null && typeof (o.usercount) != "undefined" && o.usercount !== null) ? o.usercount : null),"users": ((typeof (o) != "undefined" && o !== null && typeof (o.users) != "undefined" && o.users !== null) ? o.users : null)}, b, kwargs));
    return c.join("");
};
feed.likeitems.surface_2_2 = new Surface.SingleSurface("feed.likeitems.surface_2_2");
feed.likeitems.surface_2_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_likeitems;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.likeitems");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("feed-like-surface-", o.item.id));
    c.push('">');
    var l_user;
    var l_for_feed_likeitems_9_18_list;
    var l_for_feed_likeitems_20_18_list;
    var l_for_feed_likeitems_20_18_count;
    var l_likeUsers;
    var l_for_feed_likeitems_20_18_hasNext;
    var l_for_feed_likeitems_20_18_iteration;
    var l_userIdStr;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.likeUserIds) != "undefined" && o.item.likeUserIds !== null) && S.Modifier.count(o.item.likeUserIds))) {
        c.push(' <div class="feed-item-likes" id="feed-item-likes-');
        c.push(Surface.valOut(o.item.id));
        c.push('">\n <div class="feed-story-likes">\n <img class="feed-story-small-likeicon" width="18" height="18" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_hooah.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n');
        l_likeUsers = [];
        l_for_feed_likeitems_9_18_list = o.item.likeUserIds;
        if ((S.Modifier.count(l_for_feed_likeitems_9_18_list) > 0)) {
            for (var l_for_feed_likeitems_9_18_key in l_for_feed_likeitems_9_18_list) {
                if (!Surface.isValidLoopItem(l_for_feed_likeitems_9_18_list[l_for_feed_likeitems_9_18_key])) {
                    continue;
                }
                var l_userId = l_for_feed_likeitems_9_18_list[l_for_feed_likeitems_9_18_key];
                l_userIdStr = S.Modifier.concat("", l_userId);
                l_user = S.Modifier.get(o.users, l_userIdStr, false);
                if ((l_user && (S.Modifier.count(l_likeUsers) < 3))) {
                    l_likeUsers = S.Modifier.append(l_likeUsers, l_user);
                }
            }
        }
        c.push("\n");
        o.usercount = S.Modifier.count(l_likeUsers);
        o.totalcount = S.Modifier.count(o.item.likeUserIds);
        o.excess = (o.totalcount - o.usercount);
        l_for_feed_likeitems_20_18_list = l_likeUsers;
        l_for_feed_likeitems_20_18_count = S.Modifier.count(l_for_feed_likeitems_20_18_list);
        l_for_feed_likeitems_20_18_iteration = 0;
        if ((S.Modifier.count(l_for_feed_likeitems_20_18_list) > 0)) {
            for (var l_for_feed_likeitems_20_18_key in l_for_feed_likeitems_20_18_list) {
                if (!Surface.isValidLoopItem(l_for_feed_likeitems_20_18_list[l_for_feed_likeitems_20_18_key])) {
                    continue;
                }
                var l_likeUser = l_for_feed_likeitems_20_18_list[l_for_feed_likeitems_20_18_key];
                l_for_feed_likeitems_20_18_iteration = (l_for_feed_likeitems_20_18_iteration + 1);
                l_for_feed_likeitems_20_18_hasNext = (l_for_feed_likeitems_20_18_iteration < l_for_feed_likeitems_20_18_count);
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_likeUser}, null, kwargs));
                c.push("\n");
                if (((l_for_feed_likeitems_20_18_iteration == (o.usercount - 1)) && (o.excess < 1))) {
                    c.push(" ");
                    c.push(Surface.valOut("and"));
                    c.push("\n");
                } else {
                    if (l_for_feed_likeitems_20_18_hasNext) {
                        c.push(" ,\n");
                    }
                }
            }
        }
        if (((o.totalcount > 0) && (o.usercount == 0))) {
            c.push('\n <a data-url="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/showlikes/{id}/", Surface.urlContext, o.item)));
            c.push('" class="feed-show-likes">');
            c.push(Surface.valOut(S.Modifier.replace("[num] gave a hooah!", "[num]", o.totalcount)));
            c.push(" </a>\n");
        } else {
            if (o.usercount) {
                c.push(" ");
                if (o.excess) {
                    c.push('and <a data-url="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/showlikes/{id}/", Surface.urlContext, o.item)));
                    c.push('" class="feed-show-likes base-no-ajax">');
                    c.push(Surface.valOut(o.excess));
                    c.push(" other soldier");
                    if ((o.excess > 1)) {
                        c.push("s");
                    }
                    c.push("</a>");
                }
                c.push(" gave a hooah!\n");
            }
        }
        c.push("\n </div>\n </div>\n");
    } else {
        c.push(' <div class="feed-item-likes" id="feed-item-likes-');
        c.push(Surface.valOut(o.item.id));
        c.push('" style="display: none;">\n </div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.likeitems", "surface_2_2", S.Modifier.concat("feed-like-surface-", o.item.id), o, b);
    return c.join("");
};
var block_feed_livefeed = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("livefeed"));
feed.livefeed.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_livefeed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.livefeed");
    var l_events;
    c.push("\n");
    l_events = [];
    c.push(feed.livefeed.surface_5_2.render({"events": ((typeof (l_events) != "undefined" && l_events !== null) ? l_events : null)}, b, kwargs));
    return c.join("");
};
feed.livefeed.surface_5_2 = new Surface.SurfaceList("feed.livefeed.surface_5_2", "events", "event", "event.id");
feed.livefeed.surface_11_6 = new Surface.SingleSurface("feed.livefeed.surface_11_6");
feed.livefeed.surface_11_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_livefeed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.livefeed");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("livefeed", S.Modifier.concat("_", o.event.id)));
    c.push('">');
    c.push(' <div class="feed-livefeed-item" ');
    if ((o.for_feed_livefeed_5_2_iteration == 5)) {
        c.push('style="border-bottom-width: 0;"');
    }
    c.push('>\n <div class="feed-livefeed-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.event.owner,"gravatarSize": 30}, null, kwargs));
    c.push('\n </div>\n <div class="feed-livefeed-content">\n <div class="feed-livefeed-text">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.event.owner}, null, kwargs));
    c.push("\n");
    if ((o.event.event == "receivedwallpost")) {
        c.push(" ");
        c.push(Surface.valOut("received a wall post"));
        c.push("\n");
    } else {
        if ((o.event.event == "becamefriends")) {
            c.push(" ");
            c.push(Surface.valOut("made a new friend"));
            c.push("\n");
        } else {
            if ((o.event.event == "wroteforumpost")) {
                c.push(" ");
                c.push(Surface.valOut("wrote a forum post"));
                c.push("\n");
            } else {
                if ((o.event.event == "createdforumthread")) {
                    c.push(" ");
                    c.push(Surface.valOut("received a wall post"));
                    c.push("\n");
                } else {
                    if ((o.event.event == "commentedblog")) {
                        c.push(" ");
                        c.push(Surface.valOut("commented a blog post"));
                        c.push("\n");
                    } else {
                        if ((o.event.event == "rankedup")) {
                            c.push(" ");
                            c.push(Surface.valOut("ranked up"));
                            c.push("\n");
                        } else {
                            if ((o.event.event == "receivedunlock")) {
                                c.push(" ");
                                c.push(Surface.valOut("received an unlock"));
                                c.push("\n");
                            } else {
                                if ((o.event.event == "receivedaward")) {
                                    c.push(" ");
                                    c.push(Surface.valOut("received an award"));
                                    c.push("\n");
                                } else {
                                    if ((o.event.event == "addedfavserver")) {
                                        c.push(" ");
                                        c.push(Surface.valOut("added a favourite server"));
                                        c.push("\n");
                                    } else {
                                        if ((o.event.event == "levelcomplete")) {
                                            c.push(" ");
                                            c.push(Surface.valOut(S.Modifier.replace("completed a %s round", "%s", S.Modifier.lower(Surface.importTemplate(("common" + ("." + "playingMode")), {"playingMode": o.event.LEVELCOMPLETE.gameType}, null, kwargs)))));
                                            c.push("\n");
                                        } else {
                                            if ((o.event.event == "statusmessage")) {
                                                c.push(" ");
                                                c.push(Surface.valOut("changed status message"));
                                                c.push("\n");
                                            } else {
                                                if ((o.event.event == "platoonbadgesaved")) {
                                                    c.push(" ");
                                                    c.push(Surface.valOut("update a platoon emblem"));
                                                    c.push("\n");
                                                } else {
                                                    if ((o.event.event == "joinedplatoon")) {
                                                        c.push(" ");
                                                        c.push(Surface.valOut("[username] joined a platoon"));
                                                        c.push("\n");
                                                    } else {
                                                        if ((o.event.event == "leftplatoon")) {
                                                            c.push(" ");
                                                            c.push(Surface.valOut("[username] left a platoon"));
                                                            c.push("\n");
                                                        } else {
                                                            if ((o.event.event == "createdplatoon")) {
                                                                c.push(" ");
                                                                c.push(Surface.valOut("created a platoon"));
                                                                c.push("\n");
                                                            } else {
                                                                if ((o.event.event == "receivedplatoonwallpost")) {
                                                                    c.push(" ");
                                                                    c.push(Surface.valOut("received a wall post"));
                                                                    c.push("\n");
                                                                } else {
                                                                    c.push(" ");
                                                                    c.push(Surface.valOut("logged in"));
                                                                    c.push("\n");
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push(' </div>\n <div class="feed-livefeed-ago">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.event.creationDate}, null, kwargs));
    c.push('\n </div>\n </div>\n <div style="clear:both;"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.livefeed", "surface_11_6", S.Modifier.concat("livefeed", S.Modifier.concat("_", o.event.id)), o, b);
    return c.join("");
};
feed.livefeed.surface_5_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_livefeed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.livefeed");
    c.push('<surf:container id="');
    c.push("livefeed");
    c.push('">');
    var l_for_feed_livefeed_5_2_list;
    var l_for_feed_livefeed_5_2_iteration;
    l_for_feed_livefeed_5_2_list = S.Modifier.limit(o.events, "5");
    l_for_feed_livefeed_5_2_iteration = 0;
    if ((S.Modifier.count(l_for_feed_livefeed_5_2_list) > 0)) {
        for (var l_for_feed_livefeed_5_2_key in l_for_feed_livefeed_5_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_livefeed_5_2_list[l_for_feed_livefeed_5_2_key])) {
                continue;
            }
            var l_event = l_for_feed_livefeed_5_2_list[l_for_feed_livefeed_5_2_key];
            l_for_feed_livefeed_5_2_iteration = (l_for_feed_livefeed_5_2_iteration + 1);
            c.push(feed.livefeed.surface_11_6.render({"event": ((typeof (l_event) != "undefined" && l_event !== null) ? l_event : null),"for_feed_livefeed_5_2_iteration": ((typeof (l_for_feed_livefeed_5_2_iteration) != "undefined" && l_for_feed_livefeed_5_2_iteration !== null) ? l_for_feed_livefeed_5_2_iteration : null)}, b, kwargs));
        }
    } else {
        c.push(' <div class="feed-livefeed-text">\n <div style="text-align: center;"><img width="16" height="16" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" /></div>\n </div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("feed.livefeed", "surface_5_2", "livefeed", o, b);
    return c.join("");
};
var block_feed_optionsdropdown = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("optionsdropdown"));
feed.optionsdropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_optionsdropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.optionsdropdown");
    c.push('\n<div rel="" id="feed-optionsbutton-container">\n <div id="feed-optionsbutton"></div>\n <div id="feed-optionsbutton-dropdown">\n <ul>\n <li style="margin:3px;">');
    c.push(Surface.valOut("Delete"));
    c.push('</li>\n <li style="margin:3px;">');
    c.push(Surface.valOut("Report abuse"));
    c.push("</li>\n </ul>\n </div>\n</div>\n");
    return c.join("");
};
var block_feed_platoonbadgesaved = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.platoonbadgesaved.block_story_avatar","story_heading": "feed.platoonbadgesaved.block_story_heading","story_body": "feed.platoonbadgesaved.block_story_body","story_small_icon": "feed.platoonbadgesaved.block_story_small_icon","story_type": "feed.platoonbadgesaved.block_story_type"});
feed.addTemplate(new Surface.Template("platoonbadgesaved"));
feed.platoonbadgesaved.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_platoonbadgesaved;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.platoonbadgesaved");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.platoonbadgesaved.block_story_type = new Surface.Block("feed.platoonbadgesaved.block_story_type");
feed.platoonbadgesaved.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Created platoon"));
    c.push('"/>');
    return c.join("");
};
feed.platoonbadgesaved.block_story_small_icon = new Surface.Block("feed.platoonbadgesaved.block_story_small_icon");
feed.platoonbadgesaved.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon-platoon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Created platoon"));
    c.push('"/>');
    return c.join("");
};
feed.platoonbadgesaved.block_story_avatar = new Surface.Block("feed.platoonbadgesaved.block_story_avatar");
feed.platoonbadgesaved.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.platoonbadgesaved.block_story_heading = new Surface.Block("feed.platoonbadgesaved.block_story_heading");
feed.platoonbadgesaved.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_platoon;
    var l_username;
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    l_langurl = "[username] changed the emblem of the platoon [platoon]";
    l_platoon = Surface.importTemplate(("platoon" + ("." + "link")), {"platoon": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.PLATOONBADGESAVED) != "undefined" && o.item.PLATOONBADGESAVED !== null && typeof (o.item.PLATOONBADGESAVED.platoon) != "undefined" && o.item.PLATOONBADGESAVED.platoon !== null) ? o.item.PLATOONBADGESAVED.platoon : {})}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[platoon]": l_platoon}));
    c.push("\n");
    if (o.item.PLATOONBADGESAVED.badgeBase64) {
        c.push(' <br>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.item.PLATOONBADGESAVED.platoonId})));
        c.push('"><img class="feed-item-platoonbadge comcenter-platoonbadge" src="');
        c.push(Surface.valOut(o.item.PLATOONBADGESAVED.badgeBase64));
        c.push('" width="100" height="100" /></a>\n');
    }
    c.push("\n");
    return c.join("");
};
feed.platoonbadgesaved.block_story_body = new Surface.Block("feed.platoonbadgesaved.block_story_body");
feed.platoonbadgesaved.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_feed_rankedup = new Surface.BlockConfig("feed.story", {"story_heading": "feed.rankedup.block_story_heading","story_body": "feed.rankedup.block_story_body","story_small_icon": "feed.rankedup.block_story_small_icon"});
feed.addTemplate(new Surface.Template("rankedup"));
feed.rankedup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_rankedup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.rankedup");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.rankedup.block_story_small_icon = new Surface.Block("feed.rankedup.block_story_small_icon");
feed.rankedup.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" class="" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_rankup.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />');
    return c.join("");
};
feed.rankedup.block_story_heading = new Surface.Block("feed.rankedup.block_story_heading");
feed.rankedup.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langKeyTitle;
    var l_entity;
    var l_platform;
    l_entity = o.item.RANKEDUP;
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs));
    c.push(' ranked up\n <div class="">\n <div class="feed-award-image">\n');
    l_langKeyTitle = ((typeof (l_entity) != "undefined" && l_entity !== null && typeof (l_entity.langKeyTitle) != "undefined" && l_entity.langKeyTitle !== null) ? l_entity.langKeyTitle : "");
    l_platform = $S.callFunction("common.platformIntToPlatform", o.item.platform, b, kwargs);
    if ((o.item.section == 2)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.personaId) != "undefined" && o.item.personaId !== null) ? o.item.personaId : 0)})));
        c.push('">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": 2,"rank_size": "small","rank": l_entity.rank,"rank_title": (S.translations[l_langKeyTitle] || l_langKeyTitle)}, null, kwargs));
        c.push("\n </a>\n");
    } else {
        if ((l_entity.rank < 10)) {
            l_entity.rank = S.Modifier.concat("0", l_entity.rank);
        }
        c.push(' <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/", $S.callFunction("base.game", o.item.section, b, kwargs)), "/stats/ranks/small/R0"), l_entity.rank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n');
    }
    c.push(' </div>\n <div class="feed-award-info ">\n <div class="feed-info-title">');
    c.push(Surface.valOut((S.translations[l_langKeyTitle] || l_langKeyTitle)));
    c.push(' </div>\n <div class="feed-info-description">');
    c.push(Surface.valOut("Rank"));
    c.push(" ");
    c.push(Surface.valOut(o.item.RANKEDUP.rank));
    c.push("</div>\n </div>\n </div>\n");
    return c.join("");
};
feed.rankedup.block_story_body = new Surface.Block("feed.rankedup.block_story_body");
feed.rankedup.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_receivedaward = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.receivedaward.block_story_avatar","story_heading": "feed.receivedaward.block_story_heading","story_body": "feed.receivedaward.block_story_body","story_small_icon": "feed.receivedaward.block_story_small_icon","story_type": "feed.receivedaward.block_story_type"});
feed.addTemplate(new Surface.Template("receivedaward"));
feed.receivedaward.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_receivedaward;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.receivedaward");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.receivedaward.block_story_type = new Surface.Block("feed.receivedaward.block_story_type");
feed.receivedaward.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall Award"/>');
    return c.join("");
};
feed.receivedaward.block_story_avatar = new Surface.Block("feed.receivedaward.block_story_avatar");
feed.receivedaward.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.receivedaward.block_story_heading = new Surface.Block("feed.receivedaward.block_story_heading");
feed.receivedaward.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_awardCount;
    var l_num;
    var l_username;
    l_awardCount = S.Modifier.count(o.item.RECEIVEDAWARD.statItems);
    if ((l_awardCount == 1)) {
        l_langurl = "[username] received a new award";
        l_num = "";
    } else {
        l_langurl = "[username] received [num] new awards";
        l_num = S.Modifier.concat("", l_awardCount);
    }
    c.push("\n");
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[num]": l_num}));
    c.push("\n");
    return c.join("");
};
feed.receivedaward.block_story_body = new Surface.Block("feed.receivedaward.block_story_body");
feed.receivedaward.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_feed_receivedaward_33_10_count;
    var l_for_feed_receivedaward_33_10_hasNext;
    var l_awardsCount;
    var l_realm;
    var l_for_feed_receivedaward_33_10_iteration;
    var l_awardLocale;
    var l_personaId;
    var l_for_feed_receivedaward_33_10_list;
    var l_platform;
    l_awardLocale = S.Modifier.get(Surface.globalContext, "awardLocale");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    if ((l_realm.section == 2)) {
        l_awardsCount = S.Modifier.count(o.item.RECEIVEDAWARD.statItems);
        l_personaId = ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.personaId) != "undefined" && o.item.personaId !== null) ? o.item.personaId : 0);
        l_platform = $S.callFunction("common.platformIntToPlatform", o.item.platform, b, kwargs);
        l_for_feed_receivedaward_33_10_list = o.item.RECEIVEDAWARD.statItems;
        l_for_feed_receivedaward_33_10_count = S.Modifier.count(l_for_feed_receivedaward_33_10_list);
        l_for_feed_receivedaward_33_10_iteration = 0;
        if ((S.Modifier.count(l_for_feed_receivedaward_33_10_list) > 0)) {
            for (var l_for_feed_receivedaward_33_10_key in l_for_feed_receivedaward_33_10_list) {
                if (!Surface.isValidLoopItem(l_for_feed_receivedaward_33_10_list[l_for_feed_receivedaward_33_10_key])) {
                    continue;
                }
                var l_award = l_for_feed_receivedaward_33_10_list[l_for_feed_receivedaward_33_10_key];
                l_for_feed_receivedaward_33_10_iteration = (l_for_feed_receivedaward_33_10_iteration + 1);
                l_for_feed_receivedaward_33_10_hasNext = (l_for_feed_receivedaward_33_10_iteration < l_for_feed_receivedaward_33_10_count);
                c.push('\n <div title="<b>');
                c.push(Surface.valOut((S.translations[l_award.langKeyTitle] || l_award.langKeyTitle)));
                c.push("</b><br>");
                c.push(Surface.valOut((S.translations[l_award.langKeyDescription] || l_award.langKeyDescription)));
                c.push('" class="bubble-title feed-gamereport-info">\n');
                if ((l_award.type == 1024)) {
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId})));
                    c.push('" >\n <img width="43" height="43" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/medals/s/", l_award.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n </a>\n');
                } else {
                    if ((l_award.type == 2048)) {
                        c.push(' <a href="');
                        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId})));
                        c.push('">\n <img width="75" height="25" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ribbons/s/", l_award.imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" style="margin: 9px 2px 9px 2px;" />\n </a>\n');
                    } else {
                        if ((l_award.type == 8192)) {
                            c.push(' <img width="43" height="43" src="');
                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/servicestars/servicestar-43x43.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                            c.push('" style="margin: 0;" />\n');
                        } else {
                            c.push(' <a href="');
                            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": l_platform,"personaName": o.item.owner.username,"personaId": l_personaId})));
                            c.push('">');
                            c.push(Surface.valOut((((S.translations[l_award.langKeyTitle] || l_award.langKeyTitle) !== null) ? (S.translations[l_award.langKeyTitle] || l_award.langKeyTitle) : "LANGUAGE KEY MISSING")));
                            c.push("</a> ");
                            if ((l_for_feed_receivedaward_33_10_iteration == (l_awardsCount - 1))) {
                                c.push(" and&nbsp;");
                            } else {
                                if (l_for_feed_receivedaward_33_10_hasNext) {
                                    c.push(", ");
                                }
                            }
                            c.push("\n");
                        }
                    }
                }
                c.push(" </div>\n");
            }
        }
        c.push(' <div class="base-clear"></div>\n');
    } else {
        c.push('\n <div class="">\n <div class="feed-award-image">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"title": S.Modifier.get(S.Modifier.get(S.Modifier.get(l_awardLocale, $S.callFunction("base.statsType", o.item.RECEIVEDAWARD.type, b, kwargs)), o.item.RECEIVEDAWARD.imageName), "label"),"game": $S.callFunction("base.game", o.item.section, b, kwargs),"type": $S.callFunction("base.statsType", o.item.RECEIVEDAWARD.type, b, kwargs),"imageName": o.item.RECEIVEDAWARD.imageName}, null, kwargs));
        c.push('\n </div>\n <div class="feed-award-info">\n ');
        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_awardLocale, $S.callFunction("base.statsType", o.item.RECEIVEDAWARD.type, b, kwargs)), o.item.RECEIVEDAWARD.imageName), "label")));
        c.push("\n <br>\n Taken ");
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDAWARD) != "undefined" && o.item.RECEIVEDAWARD !== null && typeof (o.item.RECEIVEDAWARD.count) != "undefined" && o.item.RECEIVEDAWARD.count !== null) ? o.item.RECEIVEDAWARD.count : 1) > 0)) {
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDAWARD) != "undefined" && o.item.RECEIVEDAWARD !== null && typeof (o.item.RECEIVEDAWARD.count) != "undefined" && o.item.RECEIVEDAWARD.count !== null) ? o.item.RECEIVEDAWARD.count : 1)));
            c.push(" times ");
        }
        c.push("\n </div>\n </div>\n");
    }
    c.push("\n");
    return c.join("");
};
feed.receivedaward.block_story_small_icon = new Surface.Block("feed.receivedaward.block_story_small_icon");
feed.receivedaward.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_receivedplatoonwallpost = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.receivedplatoonwallpost.block_story_avatar","story_heading": "feed.receivedplatoonwallpost.block_story_heading","story_body": "feed.receivedplatoonwallpost.block_story_body","story_small_icon": "feed.receivedplatoonwallpost.block_story_small_icon","story_type": "feed.receivedplatoonwallpost.block_story_type"});
feed.addTemplate(new Surface.Template("receivedplatoonwallpost"));
feed.receivedplatoonwallpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_receivedplatoonwallpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.receivedplatoonwallpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.receivedplatoonwallpost.block_story_type = new Surface.Block("feed.receivedplatoonwallpost.block_story_type");
feed.receivedplatoonwallpost.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="25" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/ico-wallpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall"/>');
    return c.join("");
};
feed.receivedplatoonwallpost.block_story_avatar = new Surface.Block("feed.receivedplatoonwallpost.block_story_avatar");
feed.receivedplatoonwallpost.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    l_entity = o.item.RECEIVEDPLATOONWALLPOST;
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_entity.writerUser}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.receivedplatoonwallpost.block_story_heading = new Surface.Block("feed.receivedplatoonwallpost.block_story_heading");
feed.receivedplatoonwallpost.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langstr;
    var l_platoon;
    var l_touser;
    var l_entity;
    var l_colonUser;
    var l_username;
    l_entity = o.item.RECEIVEDPLATOONWALLPOST;
    l_colonUser = {"userId": o.item.owner.userId,"username": o.item.owner.username};
    c.push("\n");
    l_langstr = "[username][to] wrote on the wall for [platoon]:";
    l_username = Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_entity.writerUser}, null, kwargs);
    if ((l_entity.writerUser.userId != l_colonUser.userId)) {
        l_touser = ('<span class="feed-post-to"></span>' + Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_colonUser,"extraLinkContent": ":"}, null, kwargs));
    } else {
        l_touser = "";
    }
    c.push("\n");
    l_platoon = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": l_entity.platoonId})) + '">') + S.Modifier.htmlspecialchars(((typeof (l_entity) != "undefined" && l_entity !== null && typeof (l_entity.platoon) != "undefined" && l_entity.platoon !== null && typeof (l_entity.platoon.name) != "undefined" && l_entity.platoon.name !== null) ? l_entity.platoon.name : "unknown"))) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langstr, {"[username]": l_username,"[to]": l_touser,"[platoon]": l_platoon}));
    c.push("\n");
    return c.join("");
};
feed.receivedplatoonwallpost.block_story_body = new Surface.Block("feed.receivedplatoonwallpost.block_story_body");
feed.receivedplatoonwallpost.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    c.push(' <div class="wallpost-body">\n');
    l_entity = o.item.RECEIVEDPLATOONWALLPOST;
    c.push(" ");
    c.push(Surface.valOut(l_entity.wallBody));
    c.push("\n </div>\n");
    return c.join("");
};
feed.receivedplatoonwallpost.block_story_small_icon = new Surface.Block("feed.receivedplatoonwallpost.block_story_small_icon");
feed.receivedplatoonwallpost.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_receivedunlock = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.receivedunlock.block_story_avatar","story_heading": "feed.receivedunlock.block_story_heading","story_body": "feed.receivedunlock.block_story_body","story_small_icon": "feed.receivedunlock.block_story_small_icon","story_type": "feed.receivedunlock.block_story_type"});
feed.addTemplate(new Surface.Template("receivedunlock"));
feed.receivedunlock.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_receivedunlock;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.receivedunlock");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.receivedunlock.block_story_type = new Surface.Block("feed.receivedunlock.block_story_type");
feed.receivedunlock.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_unlocks.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall"/>');
    return c.join("");
};
feed.receivedunlock.block_story_avatar = new Surface.Block("feed.receivedunlock.block_story_avatar");
feed.receivedunlock.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.receivedunlock.block_story_heading = new Surface.Block("feed.receivedunlock.block_story_heading");
feed.receivedunlock.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("received an unlock"));
    c.push("\n");
    return c.join("");
};
feed.receivedunlock.block_story_body = new Surface.Block("feed.receivedunlock.block_story_body");
feed.receivedunlock.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_gadgetsLocale;
    l_gadgetsLocale = S.Modifier.get(Surface.globalContext, "gadgetsLocale");
    c.push(' <div class="">\n <div class="feed-award-image">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"persona": o.item.persona,"title": S.Modifier.get(S.Modifier.get(S.Modifier.get(l_gadgetsLocale, $S.callFunction("base.statsType", o.item.RECEIVEDUNLOCK.type, b, kwargs)), o.item.RECEIVEDUNLOCK.imageName), "label"),"game": $S.callFunction("base.game", o.item.section, b, kwargs),"type": $S.callFunction("base.statsType", o.item.RECEIVEDUNLOCK.type, b, kwargs),"imageName": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDUNLOCK) != "undefined" && o.item.RECEIVEDUNLOCK !== null && typeof (o.item.RECEIVEDUNLOCK.imageName) != "undefined" && o.item.RECEIVEDUNLOCK.imageName !== null) ? o.item.RECEIVEDUNLOCK.imageName : o.item.RECEIVEDUNLOCK.statName)}, null, kwargs));
    c.push('\n </div>\n <div class="feed-award-info">\n ');
    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_gadgetsLocale, $S.callFunction("base.statsType", o.item.RECEIVEDUNLOCK.type, b, kwargs)), o.item.RECEIVEDUNLOCK.imageName), "label")));
    c.push("\n <br>\n </div>\n </div>\n");
    return c.join("");
};
feed.receivedunlock.block_story_small_icon = new Surface.Block("feed.receivedunlock.block_story_small_icon");
feed.receivedunlock.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_unlocks.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_receivedwallpost = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.receivedwallpost.block_story_avatar","story_body": "feed.receivedwallpost.block_story_body","story_small_icon": "feed.receivedwallpost.block_story_small_icon","story_type": "feed.receivedwallpost.block_story_type"});
feed.addTemplate(new Surface.Template("receivedwallpost"));
feed.receivedwallpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_receivedwallpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.receivedwallpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.receivedwallpost.block_story_type = new Surface.Block("feed.receivedwallpost.block_story_type");
feed.receivedwallpost.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="25" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/ico-wallpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall"/>');
    return c.join("");
};
feed.receivedwallpost.block_story_avatar = new Surface.Block("feed.receivedwallpost.block_story_avatar");
feed.receivedwallpost.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    l_entity = o.item.RECEIVEDWALLPOST;
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": l_entity.writerUser}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.receivedwallpost.block_story_body = new Surface.Block("feed.receivedwallpost.block_story_body");
feed.receivedwallpost.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    var l_colonUser;
    l_entity = o.item.RECEIVEDWALLPOST;
    l_colonUser = {"userId": o.item.owner.userId,"username": o.item.owner.username};
    c.push(' <div class="wallpost-body">');
    c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_entity.writerUser}, null, kwargs));
    if ((l_entity.writerUser.userId != l_colonUser.userId)) {
        c.push('<span class="feed-post-to"></span>');
        c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_colonUser,"extraLinkContent": ":"}, null, kwargs));
    }
    c.push(" ");
    c.push(Surface.valOut(l_entity.wallBody));
    c.push("</div>\n");
    return c.join("");
};
feed.receivedwallpost.block_story_small_icon = new Surface.Block("feed.receivedwallpost.block_story_small_icon");
feed.receivedwallpost.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_receivedwebprize = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.receivedwebprize.block_story_avatar","story_heading": "feed.receivedwebprize.block_story_heading","story_body": "feed.receivedwebprize.block_story_body","story_small_icon": "feed.receivedwebprize.block_story_small_icon","story_type": "feed.receivedwebprize.block_story_type"});
feed.addTemplate(new Surface.Template("receivedwebprize"));
feed.receivedwebprize.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_receivedwebprize;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.receivedwebprize");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.receivedwebprize.block_story_type = new Surface.Block("feed.receivedwebprize.block_story_type");
feed.receivedwebprize.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="Wall Award"/>');
    return c.join("");
};
feed.receivedwebprize.block_story_avatar = new Surface.Block("feed.receivedwebprize.block_story_avatar");
feed.receivedwebprize.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    c.push("\n");
    return c.join("");
};
feed.receivedwebprize.block_story_heading = new Surface.Block("feed.receivedwebprize.block_story_heading");
feed.receivedwebprize.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("received an award"));
    c.push("\n");
    return c.join("");
};
feed.receivedwebprize.block_story_body = new Surface.Block("feed.receivedwebprize.block_story_body");
feed.receivedwebprize.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div class="">\n <div class="feed-award-image">\n TYPE: ');
    c.push(Surface.valOut(o.item.RECEIVEDWEBPRIZE.type));
    c.push('\n </div>\n <div class="feed-award-info">\n TYPE: ');
    c.push(Surface.valOut(o.item.RECEIVEDWEBPRIZE.type));
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
feed.receivedwebprize.block_story_small_icon = new Surface.Block("feed.receivedwebprize.block_story_small_icon");
feed.receivedwebprize.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_award.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_reportpostdropdown = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("reportpostdropdown"));
feed.reportpostdropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_reportpostdropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.reportpostdropdown");
    c.push('\n<ul>\n <li><a class="base-no-ajax report" title="');
    c.push(Surface.valOut("Report abuse"));
    c.push('" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportFeedItemAbuse/{id}/{commentId}/", Surface.urlContext, {"id": o.id,"commentId": o.commentId})));
    c.push('" href="#">');
    c.push(Surface.valOut("Report abuse"));
    c.push("</a></li>\n</ul>");
    return c.join("");
};
var block_feed_show = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "feed.show.block_titleItem","mainContent": "feed.show.block_mainContent"});
feed.addTemplate(new Surface.Template("show"));
var block_feed_show_use_19_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "feed.show._use_19_22_block_content","titleContainer": "feed.show._use_19_22_block_titleContainer","extraClass": "feed.show._use_19_22_block_extraClass"});
var block_feed_splitusers = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("splitusers"));
feed.splitusers.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_splitusers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.splitusers");
    var l_for_feed_splitusers_4_2_count;
    var l_for_feed_splitusers_4_2_list;
    var l_for_feed_splitusers_4_2_hasNext;
    var l_for_feed_splitusers_4_2_iteration;
    c.push("\n");
    o.usercount = S.Modifier.count(o.users);
    o.excess = (o.totalcount - o.usercount);
    l_for_feed_splitusers_4_2_list = o.users;
    l_for_feed_splitusers_4_2_count = S.Modifier.count(l_for_feed_splitusers_4_2_list);
    l_for_feed_splitusers_4_2_iteration = 0;
    if ((S.Modifier.count(l_for_feed_splitusers_4_2_list) > 0)) {
        for (var l_for_feed_splitusers_4_2_key in l_for_feed_splitusers_4_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_splitusers_4_2_list[l_for_feed_splitusers_4_2_key])) {
                continue;
            }
            var l_user = l_for_feed_splitusers_4_2_list[l_for_feed_splitusers_4_2_key];
            l_for_feed_splitusers_4_2_iteration = (l_for_feed_splitusers_4_2_iteration + 1);
            l_for_feed_splitusers_4_2_hasNext = (l_for_feed_splitusers_4_2_iteration < l_for_feed_splitusers_4_2_count);
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_user}, null, kwargs));
            c.push("\n");
            if (((l_for_feed_splitusers_4_2_iteration == (o.usercount - 1)) && (o.excess < 1))) {
                c.push(" and\n");
            } else {
                if (l_for_feed_splitusers_4_2_hasNext) {
                    c.push(" ,\n");
                }
            }
        }
    }
    if ((o.excess > 0)) {
        c.push(" and ");
        c.push(Surface.valOut(o.excess));
        c.push(" other soldier");
        if ((o.excess > 1)) {
            c.push("s");
        }
        c.push("\n");
    }
    c.push(" ");
    c.push(Surface.valOut(o.text));
    c.push("\n");
    return c.join("");
};
var block_feed_statusmessage = new Surface.BlockConfig("feed.story", {"story_avatar": "feed.statusmessage.block_story_avatar","story_heading": "feed.statusmessage.block_story_heading","story_body": "feed.statusmessage.block_story_body","story_small_icon": "feed.statusmessage.block_story_small_icon"});
feed.addTemplate(new Surface.Template("statusmessage"));
feed.statusmessage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_statusmessage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.statusmessage");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.statusmessage.block_story_avatar = new Surface.Block("feed.statusmessage.block_story_avatar");
feed.statusmessage.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    return c.join("");
};
feed.statusmessage.block_story_heading = new Surface.Block("feed.statusmessage.block_story_heading");
feed.statusmessage.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_entity;
    l_entity = o.item.STATUSMESSAGE;
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": o.item.owner}, null, kwargs));
    c.push(' <div class="wallpost-body">');
    if (o.item.hidden) {
        c.push("<i>");
        c.push(Surface.valOut("Status hidden by the Battlelog administrators."));
        c.push("</i>");
    } else {
        c.push(Surface.valOut(l_entity.statusMessage));
    }
    c.push("</div>\n");
    return c.join("");
};
feed.statusmessage.block_story_body = new Surface.Block("feed.statusmessage.block_story_body");
feed.statusmessage.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.statusmessage.block_story_small_icon = new Surface.Block("feed.statusmessage.block_story_small_icon");
feed.statusmessage.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_forumpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
var block_feed_story = new Surface.BlockConfig("", {"story_avatar": "feed.story.block_story_avatar","story_heading": "feed.story.block_story_heading","story_body": "feed.story.block_story_body","story_small_icon": "feed.story.block_story_small_icon"});
feed.addTemplate(new Surface.Template("story"));
feed.story.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_story;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.story");
    var l_comments;
    var l_entity;
    var l_session;
    c.push("\n");
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.owner) != "undefined" && o.item.owner !== null)) {
        c.push('\n <li id="feed-item-');
        c.push(Surface.valOut(o.item.id));
        c.push('" class="feed-single-item ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.noBorder) != "undefined" && o.noBorder !== null) ? o.noBorder : false)) {
            c.push("feed-no-border");
        }
        c.push('">\n');
        if (!(Surface.globalContext.isTouchDevice)) {
            c.push(' <div class="feed-item-interaction-area">\n');
            if ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null)) {
                if (((o.item.ownerId2 == 0) && ((o.item.owner.userId == l_session.user.userId) || ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDWALLPOST) != "undefined" && o.item.RECEIVEDWALLPOST !== null) && (o.item.RECEIVEDWALLPOST.writerUserId == l_session.user.userId))))) {
                    c.push(' <div class="feed-story-delete" storyUrl="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/delete/", Surface.urlContext, {"item": o.item.id})));
                    c.push('"></div>\n <div class="feed-story-ids">\n <input type="hidden" value="');
                    c.push(Surface.valOut(o.item.id));
                    c.push('" class="feed-eventIds" name="feed-eventIds[]" />\n </div>\n');
                }
            }
            if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDWALLPOST) != "undefined" && o.item.RECEIVEDWALLPOST !== null) && (o.item.RECEIVEDWALLPOST.writerUserId != l_session.user.userId)) || ((o.item.ownerId != l_session.user.userId) && !((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDWALLPOST) != "undefined" && o.item.RECEIVEDWALLPOST !== null)))))) {
                c.push(' <div class="feed-story-report-container">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/feed/reportPostDropdown/{id}/{commentId}/{type}/", Surface.urlContext, {"id": o.item.id,"commentId": 0,"type": "feed"})}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(" </div>\n");
        }
        c.push('\n <div class="feed-story">\n ');
        c.push(b.get("story_avatar")(o, b, kwargs));
        c.push('\n <div class="feed-story-content">\n <div class="feed-story-heading">');
        c.push(b.get("story_heading")(o, b, kwargs));
        c.push('</div>\n <div class="feed-story-body ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDWALLPOST) != "undefined" && o.item.RECEIVEDWALLPOST !== null) || (typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.COMMENTEDBLOG) != "undefined" && o.item.COMMENTEDBLOG !== null))) {
            c.push("feed-story-created-content");
        }
        c.push('">\n');
        c.push(b.get("story_body")(o, b, kwargs));
        c.push(' </div>\n <div class="feed-story-infoarea">\n <div class="feed-story-area feed-story-small-icon">\n');
        c.push(b.get("story_small_icon")(o, b, kwargs));
        c.push(' </div>\n <div class="feed-story-area feed-story-creationDate">');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.creationDate) != "undefined" && o.item.creationDate !== null)) {
            c.push('<a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.item.id})));
            c.push('">');
            c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.item.creationDate}, null, kwargs));
            c.push("</a>");
        }
        c.push('</div>\n <div class="feed-story-infoarea-separator">&#149;</div>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.personaId) != "undefined" && o.item.personaId !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.persona) != "undefined" && o.item.persona !== null))) {
            c.push(' <div class="feed-story-area feed-story-area-comment-and-like feed-story-creationDate">\n ');
            c.push(Surface.valOut("Playing as"));
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "linkpersona")), {"persona": o.item.persona}, null, kwargs));
            c.push('\n </div>\n <div class="feed-story-infoarea-separator">&#149;</div>\n');
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.ADDEDFAVSERVER) != "undefined" && o.item.ADDEDFAVSERVER !== null)) {
            c.push(' <div class="feed-story-area feed-story-area-game">\n <span class="');
            c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.item.section, o.item.platform, 0, b, kwargs)));
            c.push('"></span>\n </div>\n <div class="feed-story-infoarea-separator">&#149;</div>\n');
        } else {
            if ((((o.item.section != 536870912) && (o.item.section != 1073741824)) && !((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.RECEIVEDPLATOONWALLPOST) != "undefined" && o.item.RECEIVEDPLATOONWALLPOST !== null)))) {
                c.push(' <div class="feed-story-area feed-story-area-game">\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.item.section, o.item.platform, 0, b, kwargs)));
                c.push('"></span>\n </div>\n <div class="feed-story-infoarea-separator">&#149;</div>\n');
            }
        }
        c.push("\n");
        l_entity = S.Modifier.get(o.item, S.Modifier.upper(o.item.event));
        if ((((typeof (l_entity) != "undefined" && l_entity !== null) && (S.Modifier.get(l_entity, "gameHistoryId", 0) > 0)) && (typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.personaId) != "undefined" && o.item.personaId !== null))) {
            c.push(' <div class="feed-story-area feed-story-area-comment-and-like">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.game", o.item.section, b, kwargs),"gameHistoryId": l_entity.gameHistoryId,"platform": o.item.platform,"personaId": o.item.personaId})));
            c.push('">');
            c.push(Surface.valOut("View Battle Report"));
            c.push('</a>\n </div>\n <div class="feed-story-infoarea-separator">&#149;</div>\n');
        }
        c.push('\n <div class="feed-story-area feed-story-area-comment-and-like">\n');
        if (o.item.isCommentable) {
            c.push(' <a class="base-no-ajax feed-comment-item" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"feedEventId": o.item.id})));
            c.push('">');
            c.push(Surface.valOut("Comment"));
            c.push("</a>\n");
        }
        c.push(" </div>\n");
        if (o.item.isCommentable) {
            c.push(' <div class="feed-story-infoarea-separator">&#149;</div>\n');
        }
        c.push("\n");
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
            c.push(' <div class="feed-story-area feed-story-area-comment-and-like">\n <form class="feed-submitbutton feed-like-item"');
            if (S.Modifier.contains(o.item.likeUserIds, S.Modifier.concat("", l_session.user.userId))) {
                c.push(' style="display:none;"');
            }
            c.push(' method="post" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/like/postlike/{id}/{type}/", Surface.urlContext, {"id": o.item.id,"type": "feed-item-like"})));
            c.push('">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <a>Hooah!</a>\n </form>\n <form class="feed-submitbutton feed-unlike-item"');
            if (!(S.Modifier.contains(o.item.likeUserIds, S.Modifier.concat("", l_session.user.userId)))) {
                c.push(' style="display:none;"');
            }
            c.push(' method="post" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/like/postunlike/{id}/{type}/", Surface.urlContext, {"id": o.item.id,"type": "feed-item-like"})));
            c.push('">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <span>Hooah! <a title="Remove this hooah">');
            c.push(Surface.valOut("Remove"));
            c.push(" hooah</a></span>\n </form>\n </div>\n");
        }
        c.push('\n </div>\n </div>\n </div>\n <div style="clear: both;"></div>\n <div class="feed-item-likescontainer">\n ');
        c.push(Surface.importTemplate(("feed" + ("." + "likeitems")), {"item": o.item,"users": ((typeof (o) != "undefined" && o !== null && typeof (o.users) != "undefined" && o.users !== null) ? o.users : [])}, null, kwargs));
        c.push('\n </div>\n <div style="clear: both;"></div>\n <div class="feed-story-comments ');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.comment1) != "undefined" && o.item.comment1 !== null)) {
            c.push(" feed-show");
        }
        c.push(' ">\n <div class="feed-comments-item-container" id="feed-comments-item-container-');
        c.push(Surface.valOut(o.item.id));
        c.push('">\n');
        l_comments = [];
        if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.comment2) != "undefined" && o.item.comment2 !== null)) {
            l_comments = S.Modifier.append(l_comments, o.item.comment2);
        }
        if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.comment1) != "undefined" && o.item.comment1 !== null)) {
            l_comments = S.Modifier.append(l_comments, o.item.comment1);
        }
        c.push(" ");
        c.push(Surface.importTemplate(("feed" + ("." + "commentitems")), {"numComments": o.item.numComments,"comments": l_comments,"minify": ((typeof (o) != "undefined" && o !== null && typeof (o.minify) != "undefined" && o.minify !== null) ? o.minify : true),"itemId": o.item.id,"itemOwnerId": o.item.ownerId}, null, kwargs));
        c.push('\n </div>\n <div style="clear: both;"></div>\n');
        if (o.item.isCommentable) {
            c.push(' <form method="post" class="feed-comment-form" style="');
            if ((o.item.numComments == 0)) {
                c.push("display:none;");
            }
            c.push('" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/comment/postcomment/{id}/{type}/", Surface.urlContext, {"id": o.item.id,"type": "feed-item-comment"})));
            c.push('" itemId="');
            c.push(Surface.valOut(o.item.id));
            c.push('">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <div>\n <textarea class="feed-comment-text-not-clicked feed-textlimit-count" name="comment">');
            c.push(Surface.valOut("Write a comment"));
            c.push('...</textarea>\n <div class="feed-textlimit-counter"></div>\n </div>\n <div class="feed-comment-submit-button-area">\n <input class="base-button-arrow-tiny feed-comment-button" type="submit" name="feedCommentSubmitBtn" value="Post" />\n </div>\n </form>\n <div style="clear:both;"></div>\n');
        }
        c.push(' </div>\n <div style="clear: both;"></div>\n </li>\n');
    }
    c.push("\n");
    return c.join("");
};
feed.story.block_story_avatar = new Surface.Block("feed.story.block_story_avatar");
feed.story.block_story_avatar.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.importTemplate(("feed" + ("." + "avatarimage")), {"user": o.item.owner}, null, kwargs));
    return c.join("");
};
feed.story.block_story_heading = new Surface.Block("feed.story.block_story_heading");
feed.story.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.story.block_story_body = new Surface.Block("feed.story.block_story_body");
feed.story.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
feed.story.block_story_small_icon = new Surface.Block("feed.story.block_story_small_icon");
feed.story.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_feed_unbundle = new Surface.BlockConfig("base.box3x", {"boxContent": "feed.unbundle.block_boxContent","boxSubHeader": "feed.unbundle.block_boxSubHeader","boxHeader": "feed.unbundle.block_boxHeader"});
feed.addTemplate(new Surface.Template("unbundle"));
var block_feed_userbundle = new Surface.BlockConfig("", {});
feed.addTemplate(new Surface.Template("userbundle"));
feed.userbundle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_userbundle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.userbundle");
    var l_for_feed_userbundle_2_2_count;
    var l_for_feed_userbundle_2_2_list;
    var l_for_feed_userbundle_2_2_iteration;
    var l_for_feed_userbundle_2_2_hasNext;
    c.push("\n");
    l_for_feed_userbundle_2_2_list = o.events;
    l_for_feed_userbundle_2_2_count = S.Modifier.count(l_for_feed_userbundle_2_2_list);
    l_for_feed_userbundle_2_2_iteration = 0;
    if ((S.Modifier.count(l_for_feed_userbundle_2_2_list) > 0)) {
        for (var l_for_feed_userbundle_2_2_key in l_for_feed_userbundle_2_2_list) {
            if (!Surface.isValidLoopItem(l_for_feed_userbundle_2_2_list[l_for_feed_userbundle_2_2_key])) {
                continue;
            }
            var l_event = l_for_feed_userbundle_2_2_list[l_for_feed_userbundle_2_2_key];
            l_for_feed_userbundle_2_2_iteration = (l_for_feed_userbundle_2_2_iteration + 1);
            l_for_feed_userbundle_2_2_hasNext = (l_for_feed_userbundle_2_2_iteration < l_for_feed_userbundle_2_2_count);
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_event.owner}, null, kwargs));
            c.push("\n");
            if ((l_for_feed_userbundle_2_2_iteration == (o.eventCount - 1))) {
                c.push(" @(ID_WEB_COMMON_AND)\n");
            } else {
                if (l_for_feed_userbundle_2_2_hasNext) {
                    c.push(" ,\n");
                }
            }
        }
    }
    return c.join("");
};
var block_feed_wroteforumpost = new Surface.BlockConfig("feed.story", {"story_heading": "feed.wroteforumpost.block_story_heading","story_body": "feed.wroteforumpost.block_story_body","story_small_icon": "feed.wroteforumpost.block_story_small_icon","story_type": "feed.wroteforumpost.block_story_type"});
feed.addTemplate(new Surface.Template("wroteforumpost"));
feed.wroteforumpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_feed_wroteforumpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("feed");
    Surface.Renderer.addUsedTemplate("feed.wroteforumpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("feed.story", o, b, kwargs);
};
feed.wroteforumpost.block_story_type = new Surface.Block("feed.wroteforumpost.block_story_type");
feed.wroteforumpost.block_story_type.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<img width="25" height="20" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/ico-reply.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Reply"));
    c.push('"/>');
    return c.join("");
};
feed.wroteforumpost.block_story_heading = new Surface.Block("feed.wroteforumpost.block_story_heading");
feed.wroteforumpost.block_story_heading.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_langurl;
    var l_thread;
    var l_username;
    l_langurl = "[username] wrote a post in the forum thread [thread]";
    l_username = Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.item.owner.userId,"username": o.item.owner.username}, null, kwargs);
    l_thread = (((('<a href="' + S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": o.item.itemId})) + '">') + S.Modifier.htmlspecialchars(o.item.WROTEFORUMPOST.threadTitle)) + "</a>");
    c.push("\n");
    c.push(S.Modifier.replacemulti(l_langurl, {"[username]": l_username,"[thread]": l_thread}));
    c.push("\n");
    return c.join("");
};
feed.wroteforumpost.block_story_body = new Surface.Block("feed.wroteforumpost.block_story_body");
feed.wroteforumpost.block_story_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="wallpost-body">\n ');
    if ((S.Modifier.count(o.item.WROTEFORUMPOST.postBody) > 150)) {
        c.push(Surface.valOut(S.Modifier.substring(o.item.WROTEFORUMPOST.postBody, 0, 150)));
    } else {
        c.push(Surface.valOut(o.item.WROTEFORUMPOST.postBody));
    }
    c.push("\n </div>\n");
    return c.join("");
};
feed.wroteforumpost.block_story_small_icon = new Surface.Block("feed.wroteforumpost.block_story_small_icon");
feed.wroteforumpost.block_story_small_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <img width="18" height="18" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/feed/icon_forumpost.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n');
    return c.join("");
};
if (typeof footer == "undefined") {
    var footer = {};
}
var surf_footer_component = new Surface.Component("footer");
surf_footer_component.extend(footer);
footer = surf_footer_component;
footer.addTemplate(new Surface.Template("hint"));
var block_footer_index = new Surface.BlockConfig("", {"footer": "footer.index.block_footer"});
footer.addTemplate(new Surface.Template("index"));
var block_footer_index_use_100_26 = new Surface.BlockConfig("main.officialupdateitem", {"content": "footer.index._use_100_26_block_content","icon": "footer.index._use_100_26_block_icon","subcontent": "footer.index._use_100_26_block_subcontent","link": "footer.index._use_100_26_block_link"});
footer.index.surface_11_22 = new Surface.SingleSurface("footer.index.surface_11_22");
footer.index.surface_11_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_footer_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("footer");
    Surface.Renderer.addUsedTemplate("footer.index");
    c.push('<surf:container id="');
    c.push("footer-poll-surface");
    c.push('">');
    var l_for_footer_index_19_30_list;
    var l_session;
    c.push(' <div class="footer-box-header">');
    c.push(Surface.valOut("Weekly Poll"));
    c.push("</div>\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((o.poll && (typeof (o) != "undefined" && o !== null && typeof (o.pollTotalVotes) != "undefined" && o.pollTotalVotes !== null))) {
        c.push(' <div class="footer-poll-title"><h4>');
        c.push(Surface.valOut(o.poll.title));
        c.push("</h4></div>\n");
        if ((o.poll.status == "active")) {
            c.push("\n");
            l_for_footer_index_19_30_list = o.poll.answers;
            if ((S.Modifier.count(l_for_footer_index_19_30_list) > 0)) {
                if ((((typeof (o) != "undefined" && o !== null && typeof (o.poll) != "undefined" && o.poll !== null && typeof (o.poll.allowVote) != "undefined" && o.poll.allowVote !== null) && o.poll.allowVote) && !(((typeof (o) != "undefined" && o !== null && typeof (o.viewResult) != "undefined" && o.viewResult !== null) ? o.viewResult : false)))) {
                    c.push(' <form action="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/poll/vote/", Surface.urlContext)));
                    c.push('" method="post" id="footer-poll-form" onsubmit="return poll.prepareSubmit()">\n <input type=hidden name="pollRedirectUrl" value="">\n ');
                    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
                    c.push("\n");
                }
                for (var l_for_footer_index_19_30_key in l_for_footer_index_19_30_list) {
                    if (!Surface.isValidLoopItem(l_for_footer_index_19_30_list[l_for_footer_index_19_30_key])) {
                        continue;
                    }
                    var l_pa = l_for_footer_index_19_30_list[l_for_footer_index_19_30_key];
                    c.push("\n");
                    if ((((typeof (o) != "undefined" && o !== null && typeof (o.poll) != "undefined" && o.poll !== null && typeof (o.poll.allowVote) != "undefined" && o.poll.allowVote !== null) && o.poll.allowVote) && !(((typeof (o) != "undefined" && o !== null && typeof (o.viewResult) != "undefined" && o.viewResult !== null) ? o.viewResult : false)))) {
                        c.push(' <div class="footer-poll-answer"><input class="footer-pollanswer-radio" type="radio" name="answerId" value="');
                        c.push(Surface.valOut(l_pa.id));
                        c.push('" id="footer-pollanswerid-');
                        c.push(Surface.valOut(l_pa.id));
                        c.push('" /><label for="footer-pollanswerid-');
                        c.push(Surface.valOut(l_pa.id));
                        c.push('">');
                        c.push(Surface.valOut(l_pa.title));
                        c.push("</label></div>\n");
                    } else {
                        c.push(' <div class="footer-poll-novoting">\n <div class="footer-poll-answertitle">\n');
                        o.votePercent = 0;
                        if ((l_pa.votes > 0)) {
                            o.votePercent = S.Modifier.round(((S.Modifier.tofloat(l_pa.votes) / ((typeof (o) != "undefined" && o !== null && typeof (o.pollTotalVotes) != "undefined" && o.pollTotalVotes !== null) ? o.pollTotalVotes : 1)) * 100));
                        }
                        c.push(' <div class="text-answer">');
                        c.push(Surface.valOut(l_pa.title));
                        c.push('</div><div class="answer-percentage">');
                        c.push(Surface.valOut(o.votePercent));
                        c.push("%</div>\n </div>\n ");
                        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "276px","value": l_pa.votes,"max": o.pollTotalVotes}, null, kwargs));
                        c.push("\n </div>\n");
                    }
                }
                if ((((typeof (o) != "undefined" && o !== null && typeof (o.poll) != "undefined" && o.poll !== null && typeof (o.poll.allowVote) != "undefined" && o.poll.allowVote !== null) && o.poll.allowVote) && !(((typeof (o) != "undefined" && o !== null && typeof (o.viewResult) != "undefined" && o.viewResult !== null) ? o.viewResult : false)))) {
                    c.push(' <input type="hidden" name="pollId" value="');
                    c.push(Surface.valOut(o.poll.id));
                    c.push('" />\n <input class="base-button-arrow-tiny" type="submit" value="');
                    c.push(Surface.valOut("Vote"));
                    c.push('"/>\n </form>\n');
                } else {
                    c.push(' <div class="footer-poll-totalvotes">');
                    c.push(Surface.valOut("Total votes"));
                    c.push(": ");
                    c.push(Surface.valOut(o.pollTotalVotes));
                    c.push(" </div>\n");
                    if ((((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (typeof (o) != "undefined" && o !== null && typeof (o.poll) != "undefined" && o.poll !== null && typeof (o.poll.allowVote) != "undefined" && o.poll.allowVote !== null)) && o.poll.allowVote) && ((typeof (o) != "undefined" && o !== null && typeof (o.viewResult) != "undefined" && o.viewResult !== null) ? o.viewResult : false))) {
                        c.push(' <div url="');
                        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/poll/toggleviewresult/", Surface.urlContext)));
                        c.push('" class="footer-show-poll footer-show-poll-vote base-link" pollId="');
                        c.push(Surface.valOut(o.poll.id));
                        c.push('" viewResult="false">Vote</div>\n');
                    }
                    c.push("\n");
                }
                c.push("\n");
            }
        }
        c.push("\n");
        if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
            c.push(' <div class="footer-poll-notloggedin">');
            c.push(Surface.valOut("Please"));
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/login/{redirect}/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("sign in"));
            c.push("</a> ");
            c.push(Surface.valOut("to vote."));
            c.push("</div>\n");
        }
    } else {
        c.push("\n");
        c.push(Surface.valOut("No poll found"));
        c.push("\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("footer.index", "surface_11_22", "footer-poll-surface", o, b);
    return c.join("");
};
if (typeof forum == "undefined") {
    var forum = {};
}
var surf_forum_component = new Surface.Component("forum");
surf_forum_component.extend(forum);
forum = surf_forum_component;
var block_forum_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "forum.base.block_titleComponent"});
forum.addTemplate(new Surface.Template("base"));
forum.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.base");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
forum.base.block_titleComponent = new Surface.Block("forum.base.block_titleComponent");
forum.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Forums"));
    c.push(" - ");
    return c.join("");
};
var block_forum_breadcrumbs = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("breadcrumbs"));
forum.breadcrumbs.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_breadcrumbs;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.breadcrumbs");
    var l_for_forum_breadcrumbs_4_6_list;
    c.push('\n<div class="forum-breadcrumbs">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("Forum Start"));
    c.push("</a>\n");
    l_for_forum_breadcrumbs_4_6_list = o.breadcrumbs;
    if ((S.Modifier.count(l_for_forum_breadcrumbs_4_6_list) > 0)) {
        for (var l_for_forum_breadcrumbs_4_6_key in l_for_forum_breadcrumbs_4_6_list) {
            if (!Surface.isValidLoopItem(l_for_forum_breadcrumbs_4_6_list[l_for_forum_breadcrumbs_4_6_key])) {
                continue;
            }
            var l_breadcrumb = l_for_forum_breadcrumbs_4_6_list[l_for_forum_breadcrumbs_4_6_key];
            c.push(' <span>&gt;</span> <a href="');
            c.push(Surface.valOut(S.Modifier.get(l_breadcrumb, "url", "")));
            c.push('">');
            c.push(Surface.valOut(S.Modifier.get(l_breadcrumb, "text", "")));
            c.push("</a>\n");
        }
    }
    c.push("</div>");
    return c.join("");
};
var block_forum_disabled = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "forum.disabled.block_titleComponent","mainContent": "forum.disabled.block_mainContent"});
forum.addTemplate(new Surface.Template("disabled"));
forum.disabled.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_disabled;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.disabled");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
forum.disabled.block_titleComponent = new Surface.Block("forum.disabled.block_titleComponent");
forum.disabled.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Forums"));
    c.push(" - ");
    return c.join("");
};
forum.disabled.block_mainContent = new Surface.Block("forum.disabled.block_mainContent");
forum.disabled.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <h1>The forum is currently disabled</h1>\n </div>\n');
    return c.join("");
};
var block_forum_editpost = new Surface.BlockConfig("forum.base", {"titleItem": "forum.editpost.block_titleItem","mainContent": "forum.editpost.block_mainContent"});
forum.addTemplate(new Surface.Template("editpost"));
forum.editpost.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_editpost;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.editpost");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_editpost_use_15_17 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.editpost._use_15_17_block_content","extraClassInner": "forum.editpost._use_15_17_block_extraClassInner","title": "forum.editpost._use_15_17_block_title","extraClass": "forum.editpost._use_15_17_block_extraClass"});
forum.editpost.block_titleItem = new Surface.Block("forum.editpost.block_titleItem");
forum.editpost.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Edit post in"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.truncate(o.thread.title, 20)));
    c.push(" - ");
    return c.join("");
};
forum.editpost._use_15_17_block_extraClass = new Surface.Block("forum.editpost._use_15_17_block_extraClass");
forum.editpost._use_15_17_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-postreply-container");
    return c.join("");
};
forum.editpost._use_15_17_block_title = new Surface.Block("forum.editpost._use_15_17_block_title");
forum.editpost._use_15_17_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Edit post in ");
    c.push(Surface.valOut(o.thread.title));
    return c.join("");
};
forum.editpost._use_15_17_block_extraClassInner = new Surface.Block("forum.editpost._use_15_17_block_extraClassInner");
forum.editpost._use_15_17_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-postreply");
    return c.join("");
};
forum.editpost._use_15_17_block_content = new Surface.Block("forum.editpost._use_15_17_block_content");
forum.editpost._use_15_17_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (Surface.globalContext.hasWriteBan) {
        c.push(' <div class="forum-postreply-disabled">');
        c.push(Surface.valOut("You are not allowed to post in the forum until"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.offsetdateformat(Surface.globalContext.writeBanUntil, ((Surface.globalContext.session.locale.fulldate + " ") + Surface.globalContext.session.locale.time), Surface.globalContext.session.locale.offset)));
        c.push("</div>\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_session.user,"gravatarSize": 52}, null, kwargs));
        c.push('\n <form class="forum-ajax-post base-do-ajax" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/updatepost/{id}/", Surface.urlContext, o.post)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <textarea name="body">');
        c.push(Surface.valOut(o.post.body));
        c.push('</textarea>\n <input type="submit" class="base-button-arrow-small" value="POST" />\n');
        if (o.canPostOfficial) {
            c.push(' <div class="forum-editpost-official-selector"><label><input type="checkbox" name="officialPost" ');
            if (o.post.isOfficial) {
                c.push("checked");
            }
            c.push("/> ");
            c.push(Surface.valOut("Official EA post"));
            c.push("</label></div>\n");
        }
        c.push(" </form>\n");
    }
    return c.join("");
};
forum.editpost.block_mainContent = new Surface.Block("forum.editpost.block_mainContent");
forum.editpost.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="forum-start-container">\n');
    o.breadcrumbs = S.Modifier.append(o.breadcrumbs, {"url": S.Modifier.urlformat("/{_section}/{_language}/forum/editpost/{id}/", Surface.urlContext, o.post),"text": "Edit post"});
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_editpost_use_15_17, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
forum.addTemplate(new Surface.Template("exportthread"));
var block_forum_index = new Surface.BlockConfig("forum.base", {"titleItem": "forum.index.block_titleItem","mainContent": "forum.index.block_mainContent"});
forum.addTemplate(new Surface.Template("index"));
forum.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.index");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_index_use_28_25 = new Surface.BlockConfig("common.boxwide", {"content": "forum.index._use_28_25_block_content","extraClassInner": "forum.index._use_28_25_block_extraClassInner","title": "forum.index._use_28_25_block_title","titleType": "forum.index._use_28_25_block_titleType"});
forum.index.block_titleItem = new Surface.Block("forum.index.block_titleItem");
forum.index.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.index._use_28_25_block_titleType = new Surface.Block("forum.index._use_28_25_block_titleType");
forum.index._use_28_25_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("solid-with-line");
    return c.join("");
};
forum.index._use_28_25_block_title = new Surface.Block("forum.index._use_28_25_block_title");
forum.index._use_28_25_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="forum-start-info">\n <div class="forum-start-forum-forum forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Forum"));
    c.push('</p></div>\n <div class="forum-start-forum-posts forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Posts"));
    c.push('</p></div>\n <div class="forum-start-forum-topics forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Topics"));
    c.push('</p></div>\n <div class="forum-start-forum-latest forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Latest reply"));
    c.push("</p></div>\n </div>\n");
    return c.join("");
};
forum.index._use_28_25_block_extraClassInner = new Surface.Block("forum.index._use_28_25_block_extraClassInner");
forum.index._use_28_25_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.index._use_28_25_block_content = new Surface.Block("forum.index._use_28_25_block_content");
forum.index._use_28_25_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_forum_index_41_33_list;
    var l_for_forum_index_41_33_hasNext;
    var l_last;
    var l_for_forum_index_41_33_count;
    var l_for_forum_index_41_33_iteration;
    l_for_forum_index_41_33_list = o.category.forums;
    l_for_forum_index_41_33_count = S.Modifier.count(l_for_forum_index_41_33_list);
    l_for_forum_index_41_33_iteration = 0;
    if ((S.Modifier.count(l_for_forum_index_41_33_list) > 0)) {
        for (var l_for_forum_index_41_33_key in l_for_forum_index_41_33_list) {
            if (!Surface.isValidLoopItem(l_for_forum_index_41_33_list[l_for_forum_index_41_33_key])) {
                continue;
            }
            var l_forum = l_for_forum_index_41_33_list[l_for_forum_index_41_33_key];
            l_for_forum_index_41_33_iteration = (l_for_forum_index_41_33_iteration + 1);
            l_for_forum_index_41_33_hasNext = (l_for_forum_index_41_33_iteration < l_for_forum_index_41_33_count);
            c.push(' <div class="forum-start-forum forum-forumlist">\n <div class="forum-start-forum-title">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/view/{id}/{page}/", Surface.urlContext, l_forum)));
            c.push('">');
            c.push(Surface.valOut(l_forum.title));
            c.push("</a>\n <p>");
            c.push(Surface.valOut(l_forum.description));
            c.push('</p>\n </div>\n <div class="forum-start-forum-posts forum-start-forum-bodycell"><p>');
            c.push(Surface.valOut(l_forum.numberOfPosts));
            c.push('</p></div>\n <div class="forum-start-forum-topics forum-start-forum-bodycell"><p>');
            c.push(Surface.valOut(l_forum.numberOfThreads));
            c.push('</p></div>\n <div class="forum-start-forum-latest forum-start-forum-bodycell">\n');
            if ((typeof (l_forum) != "undefined" && l_forum !== null && typeof (l_forum.lastThread) != "undefined" && l_forum.lastThread !== null)) {
                c.push(' <div class="forum-start-forum-latest-info">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": l_forum.lastThread.id,"page": "last"})));
                c.push('">');
                c.push(Surface.valOut(l_forum.lastThread.title));
                c.push(" (");
                c.push(Surface.valOut(l_forum.lastThread.numberOfPosts));
                c.push(")</a>\n");
                l_last = ((typeof (l_forum) != "undefined" && l_forum !== null && typeof (l_forum.lastThread) != "undefined" && l_forum.lastThread !== null && typeof (l_forum.lastThread.lastForumPost) != "undefined" && l_forum.lastThread.lastForumPost !== null) ? l_forum.lastThread.lastForumPost : l_forum.lastThread);
                c.push(' <div><span class="forum-ago">');
                c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": l_last.creationDate}, null, kwargs));
                c.push('</span><span class="forum-username">');
                c.push(Surface.valOut("By"));
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_last.owner.username})));
                c.push('">');
                c.push(Surface.valOut(((typeof (l_last) != "undefined" && l_last !== null && typeof (l_last.owner) != "undefined" && l_last.owner !== null && typeof (l_last.owner.username) != "undefined" && l_last.owner.username !== null) ? l_last.owner.username : "-")));
                c.push("</a></span></div>\n </div>\n ");
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 22,"user": l_last.owner}, null, kwargs));
                c.push("\n");
            }
            c.push(" </div>\n </div>\n");
            if (l_for_forum_index_41_33_hasNext) {
                c.push(' <div class="forum-start-forum-separator"></div>\n');
            } else {
                c.push(' <div style="height:1px;"></div>\n');
            }
            c.push("\n");
        }
    } else {
        c.push('\n <div style="color: #353535; font-size: 14px;">We haven\'t set up any forums yet. Check back in a while will you.</div>\n');
    }
    return c.join("");
};
forum.index.block_mainContent = new Surface.Block("forum.index.block_mainContent");
forum.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_forum_index_19_17_list;
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n <div class="forum-start-container">\n ');
    c.push(Surface.importTemplate(("forum" + ("." + "searchform")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": ""}, null, kwargs));
    c.push('\n <div class="clear"></div>\n');
    l_for_forum_index_19_17_list = o.categories;
    if ((S.Modifier.count(l_for_forum_index_19_17_list) > 0)) {
        for (var l_for_forum_index_19_17_key in l_for_forum_index_19_17_list) {
            if (!Surface.isValidLoopItem(l_for_forum_index_19_17_list[l_for_forum_index_19_17_key])) {
                continue;
            }
            var l_category = l_for_forum_index_19_17_list[l_for_forum_index_19_17_key];
            if ((S.Modifier.count(l_category.forums) == 0)) {
                continue;
            }
            o.category = l_category;
            c.push(' <div class="forum-start-title">\n <h1>');
            c.push(Surface.valOut(S.Modifier.upper(l_category.title)));
            c.push('</h1>\n </div>\n <div class="forum-start-border">\n');
            c.push(Surface.importTemplate(("common" + ("." + "boxwide")), o, block_forum_index_use_28_25, kwargs));
            c.push(" </div>\n");
        }
    } else {
        c.push(' <div style="color: #353535; font-size: 14px;">');
        c.push(Surface.valOut("We haven't set up any forum categories yet. Check back in a while will you."));
        c.push("</div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
var block_forum_latestthreads = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("latestthreads"));
forum.latestthreads.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_latestthreads;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.latestthreads");
    var l_for_forum_latestthreads_15_10_list;
    var l_for_forum_latestthreads_15_10_count;
    var l_for_forum_latestthreads_15_10_hasNext;
    var l_for_forum_latestthreads_15_10_iteration;
    var l_thread;
    c.push('\n<div class="forum-start-latest-container ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
    c.push('">\n <div class="forum-start-latest-container-inner">\n');
    if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.indexTankApi) != "undefined" && Surface.globalContext.staticContext.indexTankApi !== null)) {
        c.push(" <h2>");
        c.push(Surface.valOut("SEARCH THE FORUMS"));
        c.push('</h2>\n <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/search/", Surface.urlContext)));
        c.push('" method="GET" class="forum-sidebar-search-form">\n <input type="text" value="" name="q" class="forum-sidebar-search-form-input" placeholder="');
        c.push(Surface.valOut("Search for topic or keyword"));
        c.push('" />\n <input type="submit" value="" class="base-button-search" />\n </form>\n <div class="common-secondary-column-line forum-sidebar-search-form-line"></div>\n');
    }
    c.push("\n <h2>");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null) ? o.title : "LATEST THREADS")));
    c.push("</h2>\n");
    l_for_forum_latestthreads_15_10_list = o.latestThreads;
    l_for_forum_latestthreads_15_10_count = S.Modifier.count(l_for_forum_latestthreads_15_10_list);
    l_for_forum_latestthreads_15_10_iteration = 0;
    if ((S.Modifier.count(l_for_forum_latestthreads_15_10_list) > 0)) {
        for (var l_for_forum_latestthreads_15_10_key in l_for_forum_latestthreads_15_10_list) {
            if (!Surface.isValidLoopItem(l_for_forum_latestthreads_15_10_list[l_for_forum_latestthreads_15_10_key])) {
                continue;
            }
            var l_threadStub = l_for_forum_latestthreads_15_10_list[l_for_forum_latestthreads_15_10_key];
            l_for_forum_latestthreads_15_10_iteration = (l_for_forum_latestthreads_15_10_iteration + 1);
            l_for_forum_latestthreads_15_10_hasNext = (l_for_forum_latestthreads_15_10_iteration < l_for_forum_latestthreads_15_10_count);
            l_thread = l_threadStub.thread;
            if (l_thread) {
                c.push(' <div class="forum-start-forum-latest">\n <div class="forum-start-forum-latest-info">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, l_thread)));
                c.push('">');
                c.push(Surface.valOut(l_thread.title));
                c.push(" (");
                c.push(Surface.valOut(l_thread.numberOfPosts));
                c.push(')</a>\n <div><span class="forum-ago">');
                c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_threadStub.lastPostDate}, null, kwargs));
                c.push("</span>");
                if ((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.lastPoster) != "undefined" && l_thread.lastPoster !== null && typeof (l_thread.lastPoster.username) != "undefined" && l_thread.lastPoster.username !== null)) {
                    c.push('<span class="forum-username">');
                    c.push(Surface.valOut("By"));
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_thread.lastPoster.username})));
                    c.push('">');
                    c.push(Surface.valOut(l_thread.lastPoster.username));
                    c.push("</a></span>");
                }
                c.push("</div>\n </div>\n ");
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 22,"user": l_thread.lastPoster}, null, kwargs));
                c.push('\n <div style="clear:both;"></div>\n </div>\n');
                if (l_for_forum_latestthreads_15_10_hasNext) {
                    c.push(' <div class="forum-start-forum-separator"></div>\n');
                }
            }
        }
    } else {
        c.push("\n");
        c.push(Surface.valOut("No threads found"));
        c.push("\n");
    }
    c.push(" </div>\n</div>\n");
    return c.join("");
};
var block_forum_newthread = new Surface.BlockConfig("forum.base", {"titleItem": "forum.newthread.block_titleItem","mainContent": "forum.newthread.block_mainContent"});
forum.addTemplate(new Surface.Template("newthread"));
forum.newthread.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_newthread;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.newthread");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_newthread_use_19_21 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.newthread._use_19_21_block_content","extraClassInner": "forum.newthread._use_19_21_block_extraClassInner","title": "forum.newthread._use_19_21_block_title","extraClass": "forum.newthread._use_19_21_block_extraClass"});
forum.newthread.block_titleItem = new Surface.Block("forum.newthread.block_titleItem");
forum.newthread.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Create new thread - ");
    return c.join("");
};
forum.newthread._use_19_21_block_title = new Surface.Block("forum.newthread._use_19_21_block_title");
forum.newthread._use_19_21_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Create new thread"));
    return c.join("");
};
forum.newthread._use_19_21_block_extraClass = new Surface.Block("forum.newthread._use_19_21_block_extraClass");
forum.newthread._use_19_21_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-newthread");
    return c.join("");
};
forum.newthread._use_19_21_block_extraClassInner = new Surface.Block("forum.newthread._use_19_21_block_extraClassInner");
forum.newthread._use_19_21_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-newthread-height");
    return c.join("");
};
forum.newthread._use_19_21_block_content = new Surface.Block("forum.newthread._use_19_21_block_content");
forum.newthread._use_19_21_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    if (Surface.globalContext.hasWriteBan) {
        c.push(' <div class="forum-postreply-disabled">');
        c.push(Surface.valOut("You are not allowed to post in the forum until"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.offsetdateformat(Surface.globalContext.writeBanUntil, ((Surface.globalContext.session.locale.fulldate + " ") + Surface.globalContext.session.locale.time), Surface.globalContext.session.locale.offset)));
        c.push("</div>\n");
    } else {
        c.push(' <form class="forum-ajax-post base-do-ajax" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/createthread/{id}/", Surface.urlContext, o.forum)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <table cellpadding="0" cellspacing="0" border="0" class="forum-newthread-form-table">\n <tr>\n <td class="forum-newthread-label-cell">\n <label for="forum-newthread-topic" class="forum-newthread-topiclabel">Topic</label>\n </td>\n </tr>\n <tr>\n <td><input maxlength="50" type="text" id="forum-newthread-topic" name="topic" value="');
        c.push(Surface.valOut(o.topic));
        c.push('" /></td>\n </tr>\n <tr>\n <td class="forum-newthread-label-cell vtop">\n <label for="forum-newthread-body" class="forum-newthread-bodylabel">Message</label>\n </td>\n </tr>\n <tr>\n <td><textarea name="body" id="forum-newthread-body">');
        c.push(Surface.valOut(o.body));
        c.push('</textarea></td>\n </tr>\n <tr>\n <td colspan="2" class="forum-newthread-submit-cell">\n <input type="submit" class="base-button-arrow-small" value="POST" />\n');
        if (o.canPostOfficial) {
            c.push(' <div class="forum-newthread-official-selector"><label><input type="checkbox" name="officialPost" /> ');
            c.push(Surface.valOut("Official EA post"));
            c.push("</label></div>\n");
        }
        c.push(" </td>\n </tr>\n </table>\n");
        if ((o.error == "short")) {
            c.push(' <div class="forum-newthread-error">');
            c.push(Surface.valOut("Please fill in both a topic and a message"));
            c.push("</div>\n");
        } else {
            if ((o.error == "cooldown")) {
                c.push(' <div class="forum-newthread-error">Calm down, Soldier! You are only allowed to post one thread per minute.</div>\n');
            }
        }
        c.push(' <div class="base-clear"></div>\n </form>\n');
    }
    return c.join("");
};
forum.newthread.surface_74_17 = new Surface.SingleSurface("forum.newthread.surface_74_17");
forum.newthread.surface_74_17.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_newthread;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.newthread");
    c.push('<surf:container id="');
    c.push("forum-create-thread-search-results");
    c.push('">');
    var l_isSticky;
    var l_for_forum_newthread_78_29_count;
    var l_for_forum_newthread_78_29_list;
    var l_byUsername;
    var l_for_forum_newthread_78_29_iteration;
    var l_for_forum_newthread_78_29_hasNext;
    if ((S.Modifier.count(o.results) > 0)) {
        c.push(' <div class="forum-postsimilarlist">\n <h2>We found some similar topics</h2>\n');
        l_for_forum_newthread_78_29_list = ((typeof (o) != "undefined" && o !== null && typeof (o.results) != "undefined" && o.results !== null) ? o.results : []);
        l_for_forum_newthread_78_29_count = S.Modifier.count(l_for_forum_newthread_78_29_list);
        l_for_forum_newthread_78_29_iteration = 0;
        if ((S.Modifier.count(l_for_forum_newthread_78_29_list) > 0)) {
            for (var l_for_forum_newthread_78_29_key in l_for_forum_newthread_78_29_list) {
                if (!Surface.isValidLoopItem(l_for_forum_newthread_78_29_list[l_for_forum_newthread_78_29_key])) {
                    continue;
                }
                var l_result = l_for_forum_newthread_78_29_list[l_for_forum_newthread_78_29_key];
                l_for_forum_newthread_78_29_iteration = (l_for_forum_newthread_78_29_iteration + 1);
                l_for_forum_newthread_78_29_hasNext = (l_for_forum_newthread_78_29_iteration < l_for_forum_newthread_78_29_count);
                c.push("\n");
                l_isSticky = S.Modifier.get(l_result, "isSticky", false);
                l_byUsername = S.Modifier.get(l_result, "ownerUsername", false);
                c.push("\n");
                if (((typeof (l_isSticky) != "undefined" && l_isSticky !== null) ? l_isSticky : false)) {
                    c.push(' <img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/forum/sticky-icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" width="14" height="15" alt="');
                    c.push(Surface.valOut("Sticky"));
                    c.push('" class="forum-postsimilarlist-sticky" />\n');
                }
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": ((typeof (l_result) != "undefined" && l_result !== null && typeof (l_result.threadId) != "undefined" && l_result.threadId !== null) ? l_result.threadId : l_for_forum_newthread_78_29_iteration)})));
                c.push('">');
                c.push(Surface.valOut(((typeof (l_result) != "undefined" && l_result !== null && typeof (l_result.title) != "undefined" && l_result.title !== null) ? l_result.title : "Teeeest tes ttest")));
                c.push('</a>\n <div class="base-clear"></div>\n <span>');
                c.push(Surface.importTemplate(("common" + ("." + "ago")), l_result, null, kwargs));
                if (l_byUsername) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
                    c.push(' By <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": ((typeof (l_byUsername) != "undefined" && l_byUsername !== null) ? l_byUsername : "Player")})));
                    c.push('">');
                    c.push(Surface.valOut(((typeof (l_byUsername) != "undefined" && l_byUsername !== null) ? l_byUsername : "-")));
                    c.push("</a>");
                }
                c.push("</span>\n");
                if (l_for_forum_newthread_78_29_hasNext) {
                    c.push(' <div class="forum-postsimilarlist-hr"></div>\n');
                }
            }
        }
        c.push(' </div>\n <div class="base-clear"></div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("forum.newthread", "surface_74_17", "forum-create-thread-search-results", o, b);
    return c.join("");
};
forum.newthread.block_mainContent = new Surface.Block("forum.newthread.block_mainContent");
forum.newthread.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="forum-start-container">\n');
    o.breadcrumbs = S.Modifier.append(o.breadcrumbs, {"url": S.Modifier.urlformat("/{_section}/{_language}/forum/newthread/{id}/", Surface.urlContext, o.forum),"text": "New thread"});
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="forum-newthread-container">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_newthread_use_19_21, kwargs));
    c.push(" </div>\n");
    c.push(forum.newthread.surface_74_17.render({"results": ((typeof (o) != "undefined" && o !== null && typeof (o.results) != "undefined" && o.results !== null) ? o.results : null)}, b, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_forum_post = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("post"));
forum.post.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_post;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.post");
    var l_locale;
    var l_session;
    var l_flag;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_locale = l_session.locale;
    c.push('<div class="forum-threadview-post');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null) && o.post.isOfficial)) {
        c.push(" forum-threadview-post-ea");
    }
    c.push('" id="post_');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null && typeof (o.post.id) != "undefined" && o.post.id !== null) ? o.post.id : ((typeof (o) != "undefined" && o !== null && typeof (o.threadId) != "undefined" && o.threadId !== null) ? o.threadId : 0))));
    c.push('">\n <div class="forum-threadview-post-poster">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null)) {
        c.push(' <a class="forum-threadview-post-poster-name" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.user.username})));
        c.push('">');
        c.push(Surface.valOut(o.user.username));
        c.push("</a>\n");
    } else {
        c.push(' <div class="forum-threadview-post-poster-name">');
        c.push(Surface.valOut("Player"));
        c.push("</div>\n");
    }
    if ((o.userIcon > 1)) {
        c.push(' <div class="forum-threadview-post-tag">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "usertag")), {"userTag": o.userIcon}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : false)}, null, kwargs));
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && o.user)) {
        c.push(' <div class="forum-threadview-post-poster-enlisted">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.userLocation) != "undefined" && o.userLocation !== null) && (o.userLocation != ""))) {
            l_flag = S.Modifier.concat(S.Modifier.concat("/public/common/flags/", S.Modifier.lower(o.userLocation)), ".gif");
            c.push(' <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_flag, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut(o.userLocation));
            c.push('" title="');
            c.push(Surface.valOut(S.Modifier.codetocountry(o.userLocation)));
            c.push('" />\n');
        } else {
            c.push("\n");
        }
        c.push(" ");
        c.push(Surface.valOut("Enlisted"));
        c.push(": <em>");
        c.push(Surface.valOut(S.Modifier.offsetdateformat(o.user.createdAt, l_locale.fulldate, l_locale.offset)));
        c.push("</em>\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.canViewLatestPosts) != "undefined" && o.canViewLatestPosts !== null) && o.canViewLatestPosts)) {
            c.push(' <div class="forum-view-latest-posts"><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/userPosts/{userId}/{page}/", Surface.urlContext, o.user)));
            c.push('">Latest posts</a></div>\n');
        }
        c.push(" </div>\n");
    }
    c.push('\n </div>\n <div class="forum-threadview-post-content">\n <div class="forum-threadview-post-ago">\n ');
    c.push(Surface.valOut(S.Modifier.offsetdateformat(o.creationDate, ((l_locale.fulldate + " ") + l_locale.time), l_locale.offset)));
    c.push(" ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null && typeof (o.post.lastEditedDate) != "undefined" && o.post.lastEditedDate !== null) ? o.post.lastEditedDate : false)) {
        c.push(", <em>edited ");
        c.push(Surface.valOut(S.Modifier.offsetdateformat(o.post.lastEditedDate, ((l_locale.fulldate + " ") + l_locale.time), l_locale.offset)));
        c.push(" by ");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null && typeof (o.post.lastEditor) != "undefined" && o.post.lastEditor !== null)) {
            c.push(Surface.valOut(o.post.lastEditor.username));
        } else {
            c.push(Surface.valOut(o.post.owner.username));
        }
        c.push("</em>");
    }
    c.push("\n");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.hideButtons) != "undefined" && o.hideButtons !== null))) {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.canDeletePosts) != "undefined" && o.canDeletePosts !== null) && o.canDeletePosts)) {
            c.push(' <input type="checkbox" class="forum-post-select-checkbox" data-postId="');
            c.push(Surface.valOut(o.post.id));
            c.push('" />\n');
        }
        if (((!((typeof (o) != "undefined" && o !== null && typeof (o.hideQuote) != "undefined" && o.hideQuote !== null)) && (typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null)) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
            if (!(o.post.isCensored)) {
                c.push(' <div class="forum-threadview-post-quote" onclick="forum.quotePost(\'');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/getQuotePostContent/{id}/", Surface.urlContext, o.post)));
                c.push("');return false;\">\n ");
                c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall")), {"text": "Quote","onclick": "return false;"}, null, kwargs));
                c.push("\n </div>\n");
            } else {
                c.push(' <div class="forum-threadview-post-quote">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall")), {"text": "Quote","disabled": true}, null, kwargs));
                c.push("\n </div>\n");
            }
        }
        if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null)) && (typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null && typeof (o.post.ownerId) != "undefined" && o.post.ownerId !== null))) {
            if (((o.post.ownerId == l_session.user.userId) || o.canEditPosts)) {
                c.push(' <div class="forum-threadview-post-edit">\n');
                if (!(o.post.isCensored)) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall")), {"url": S.Modifier.urlformat("/{_section}/{_language}/forum/editpost/{id}/", Surface.urlContext, o.post),"text": "Edit"}, null, kwargs));
                    c.push("\n");
                }
                c.push(" </div>\n");
            }
            if ((o.canViewPostHistory && ((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null && typeof (o.post.lastEditedDate) != "undefined" && o.post.lastEditedDate !== null) ? o.post.lastEditedDate : false))) {
                c.push(' <div class="forum-threadview-post-edit">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "cleanbuttonsmall")), {"url": S.Modifier.urlformat("/{_section}/{_language}/forum/posthistory/{id}/", Surface.urlContext, o.post),"text": "History"}, null, kwargs));
                c.push("\n </div>\n");
            }
            if ((o.post.ownerId != l_session.user.userId)) {
                c.push(' <div class="forum-threadview-post-report">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/forum/reportPostDropdown/{id}/", Surface.urlContext, o.post)}, null, kwargs));
                c.push("\n </div>\n");
            }
        }
    }
    c.push(' </div>\n <div class="forum-threadview-post-text">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null) && o.post.hidden)) {
        c.push(" <i>");
        c.push(Surface.valOut("This post has been hidden by the Battlelog administrators."));
        c.push("</i><br>\n");
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.post) != "undefined" && o.post !== null) && o.post.isCensored)) {
            c.push(" ");
            c.push(Surface.valOut("This post has been censored..."));
            c.push("\n");
        } else {
            if ((o.post.abuseCount > 5)) {
                c.push(' <span class="forum-hidden-post-info">');
                c.push(Surface.valOut("Post hidden due to too many abuse reports."));
                c.push(' <a class="forum-show-hidden-post">');
                c.push(Surface.valOut("Show post anyway"));
                c.push('</a></span>\n <div class="forum-hidden-post">\n');
            }
            c.push(" ");
            c.push(o.content);
            c.push("\n");
            if ((o.post.abuseCount > 5)) {
                c.push(" </div>\n");
            }
        }
    }
    c.push(' </div>\n </div>\n<div style="clear:both;"></div>\n</div>\n<div style="clear:both; height: 1px;"></div>');
    return c.join("");
};
var block_forum_posthistory = new Surface.BlockConfig("forum.base", {"titleItem": "forum.posthistory.block_titleItem","mainContent": "forum.posthistory.block_mainContent"});
forum.addTemplate(new Surface.Template("posthistory"));
forum.posthistory.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_posthistory;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.posthistory");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_posthistory_use_54_30 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.posthistory._use_54_30_block_content","extraClassInner": "forum.posthistory._use_54_30_block_extraClassInner","titleContainer": "forum.posthistory._use_54_30_block_titleContainer","extraClass": "forum.posthistory._use_54_30_block_extraClass"});
var block_forum_posthistory_use_33_26 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.posthistory._use_33_26_block_content","extraClassInner": "forum.posthistory._use_33_26_block_extraClassInner","titleContainer": "forum.posthistory._use_33_26_block_titleContainer","extraClass": "forum.posthistory._use_33_26_block_extraClass"});
forum.posthistory.block_titleItem = new Surface.Block("forum.posthistory.block_titleItem");
forum.posthistory.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("View post history in ");
    c.push(Surface.valOut(S.Modifier.truncate(o.thread.title, 20)));
    c.push(" - ");
    return c.join("");
};
forum.posthistory._use_33_26_block_extraClass = new Surface.Block("forum.posthistory._use_33_26_block_extraClass");
forum.posthistory._use_33_26_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_33_26_block_titleContainer = new Surface.Block("forum.posthistory._use_33_26_block_titleContainer");
forum.posthistory._use_33_26_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_33_26_block_extraClassInner = new Surface.Block("forum.posthistory._use_33_26_block_extraClassInner");
forum.posthistory._use_33_26_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_33_26_block_content = new Surface.Block("forum.posthistory._use_33_26_block_content");
forum.posthistory._use_33_26_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "post")), o.forumPostData, null, kwargs));
    c.push("\n");
    return c.join("");
};
forum.posthistory._use_54_30_block_extraClass = new Surface.Block("forum.posthistory._use_54_30_block_extraClass");
forum.posthistory._use_54_30_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_54_30_block_titleContainer = new Surface.Block("forum.posthistory._use_54_30_block_titleContainer");
forum.posthistory._use_54_30_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_54_30_block_extraClassInner = new Surface.Block("forum.posthistory._use_54_30_block_extraClassInner");
forum.posthistory._use_54_30_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.posthistory._use_54_30_block_content = new Surface.Block("forum.posthistory._use_54_30_block_content");
forum.posthistory._use_54_30_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_log;
    o.forumPostData.post.lastEditedDate = o.history.editDate;
    l_log = S.Modifier.jsonDecode(o.history.log);
    o.forumPostData.content = S.Modifier.get(l_log, "oldBody");
    o.forumPostData.post.lastEditor = S.Modifier.get(o.users, S.Modifier.get(l_log, "oldEditorId"));
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "post")), o.forumPostData, null, kwargs));
    c.push("\n");
    return c.join("");
};
forum.posthistory.block_mainContent = new Surface.Block("forum.posthistory.block_mainContent");
forum.posthistory.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_forum_posthistory_44_18_count;
    var l_userInfo;
    var l_for_forum_posthistory_44_18_list;
    var l_location;
    var l_for_forum_posthistory_44_18_hasNext;
    var l_icon;
    var l_for_forum_posthistory_44_18_iteration;
    c.push("\n");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="forum-start-container">\n');
    o.breadcrumbs = S.Modifier.append(o.breadcrumbs, {"url": S.Modifier.urlformat("/{_section}/{_language}/forum/posthistory/{id}/", Surface.urlContext, o.post),"text": "View post history"});
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="forum-start-title">\n <h1>Forum post history</h1>\n </div>\n');
    l_location = "";
    l_icon = 0;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.userInfos) != "undefined" && o.userInfos !== null)) {
        l_userInfo = S.Modifier.get(o.userInfos, o.post.ownerId, {});
        l_location = S.Modifier.get(l_userInfo, "location", "");
        l_icon = S.Modifier.get(l_userInfo, "icon", 0);
    }
    c.push("\n");
    o.forumPostData = {"user": o.post.owner,"post": o.post,"userEnlisted": "2009-10-02","userIcon": l_icon,"userLocation": l_location,"creationDate": o.post.creationDate,"content": o.post.formattedBody,"postId": o.post.id,"threadId": o.thread.id,"canEditPosts": false,"canViewPostHistory": false,"hideButtons": true};
    c.push('\n <div class="forum-posthistory-container">\n <b>Revision #');
    c.push(Surface.valOut(S.Modifier.count(o.forumPostHistory)));
    c.push(' (current post)</b>\n <div class="forum-start-border">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_posthistory_use_33_26, kwargs));
    c.push(" </div>\n </div>\n");
    l_for_forum_posthistory_44_18_list = o.forumPostHistory;
    l_for_forum_posthistory_44_18_count = S.Modifier.count(l_for_forum_posthistory_44_18_list);
    l_for_forum_posthistory_44_18_iteration = 0;
    if ((S.Modifier.count(l_for_forum_posthistory_44_18_list) > 0)) {
        for (var l_for_forum_posthistory_44_18_key in l_for_forum_posthistory_44_18_list) {
            if (!Surface.isValidLoopItem(l_for_forum_posthistory_44_18_list[l_for_forum_posthistory_44_18_key])) {
                continue;
            }
            var l_h = l_for_forum_posthistory_44_18_list[l_for_forum_posthistory_44_18_key];
            l_for_forum_posthistory_44_18_iteration = (l_for_forum_posthistory_44_18_iteration + 1);
            l_for_forum_posthistory_44_18_hasNext = (l_for_forum_posthistory_44_18_iteration < l_for_forum_posthistory_44_18_count);
            c.push(' <div class="forum-posthistory-container">\n');
            o.history = l_h;
            if (l_for_forum_posthistory_44_18_hasNext) {
                c.push(" <b>Revision #");
                c.push(Surface.valOut((l_for_forum_posthistory_44_18_count - l_for_forum_posthistory_44_18_iteration)));
                c.push("</b>\n");
            } else {
                c.push(" <b>Original post</b>\n");
            }
            c.push('\n <div class="forum-start-border">\n');
            c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_posthistory_use_54_30, kwargs));
            c.push(" </div>\n </div>\n");
        }
    }
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_forum_quote = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("quote"));
forum.quote.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_quote;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.quote");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
        c.push("[quote ");
        c.push(Surface.valOut(o.user.username));
        c.push(" said:]");
        c.push(Surface.valOut(o.post.body));
        c.push("[/quote]");
    }
    c.push("\n");
    return c.join("");
};
var block_forum_reportpostdropdown = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("reportpostdropdown"));
forum.reportpostdropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_reportpostdropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.reportpostdropdown");
    c.push('\n<ul>\n <li><a class="base-no-ajax report" title="Report forum abuse" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportForumAbuse/{postId}/", Surface.urlContext, {"postId": o.id})));
    c.push('" href="#">Report post</a></li>\n');
    if (o.isAdmin) {
        if (o.canDeletePosts) {
            c.push(' <li><a class="report-action-require-confirm report" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "deletePost","id": o.id})));
            c.push('">');
            c.push(Surface.valOut("Remove post"));
            c.push("</a></li>\n");
        }
        c.push("\n");
        if ((o.canDeletePosts && o.canWriteBan)) {
            c.push(' <li><a class="report-action-require-confirm report" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "deletePostAndBan","id": o.id})));
            c.push('">');
            c.push(Surface.valOut("Remove + 4h ban"));
            c.push("</a></li>\n");
        }
        c.push("\n");
        if (o.canCensorPosts) {
            if (o.postCensored) {
                c.push(' <li><a class="report" href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "showPost","id": o.id})));
                c.push('">');
                c.push(Surface.valOut("Uncensor post"));
                c.push("</a></li>\n");
            } else {
                c.push(' <li><a class="report" href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "censorPost","id": o.id})));
                c.push('">');
                c.push(Surface.valOut("Censor post"));
                c.push("</a></li>\n");
            }
        }
    }
    c.push("</ul>");
    return c.join("");
};
var block_forum_reportthreaddropdown = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("reportthreaddropdown"));
forum.reportthreaddropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_reportthreaddropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.reportthreaddropdown");
    c.push("\n<ul>\n");
    if (o.thread.isLocked) {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "unlock","id": o.thread.id})));
        c.push('">Unlock</a></li>\n');
    } else {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "lock","id": o.thread.id})));
        c.push('">Lock</a></li>\n');
    }
    if (!(o.isSticky)) {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "sticky","id": o.thread.id})));
        c.push('">Sticky thread</a></li>\n');
    } else {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "unsticky","id": o.thread.id})));
        c.push('">Unsticky thread</a></li>\n');
    }
    if (o.canMoveThreads) {
        c.push(' <li><a class="report" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/moveThread/{id}/", Surface.urlContext, {"id": o.thread.id})));
        c.push('">Move thread</a></li>\n');
    }
    if (o.canDeletePosts) {
        c.push(' <li><a class="report report-action-require-confirm" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "delete","id": o.thread.id})));
        c.push('">Remove thread</a></li>\n');
    }
    if ((o.canDeletePosts && o.canWriteBan)) {
        c.push(' <li><a class="report report-action-require-confirm" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "deleteAndBan","id": o.thread.id})));
        c.push('">Remove + 4h ban</a></li>\n');
    }
    if (o.canExportThread) {
        c.push(' <li><a class="base-no-ajax" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/exportThread/{id}/", Surface.urlContext, {"id": o.thread.id})));
        c.push('">Export thread</a></li>\n');
    }
    c.push("</ul>");
    return c.join("");
};
var block_forum_search = new Surface.BlockConfig("forum.base", {"titleItem": "forum.search.block_titleItem","mainContent": "forum.search.block_mainContent"});
forum.addTemplate(new Surface.Template("search"));
forum.search.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_search;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.search");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_search_use_23_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.search._use_23_22_block_content","extraClassInner": "forum.search._use_23_22_block_extraClassInner","title": "forum.search._use_23_22_block_title","shadow": "forum.search._use_23_22_block_shadow","extraClass": "forum.search._use_23_22_block_extraClass"});
forum.search.block_titleItem = new Surface.Block("forum.search.block_titleItem");
forum.search.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Search"));
    c.push(" - ");
    return c.join("");
};
forum.search.surface_22_18 = new Surface.SingleSurface("forum.search.surface_22_18");
forum.search._use_23_22_block_extraClass = new Surface.Block("forum.search._use_23_22_block_extraClass");
forum.search._use_23_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.search._use_23_22_block_title = new Surface.Block("forum.search._use_23_22_block_title");
forum.search._use_23_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Search results"));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) && (o.searchQuery != ""))) {
        c.push(" for ");
        c.push(Surface.valOut(o.searchQuery));
        c.push("");
    }
    return c.join("");
};
forum.search._use_23_22_block_extraClassInner = new Surface.Block("forum.search._use_23_22_block_extraClassInner");
forum.search._use_23_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.search._use_23_22_block_content = new Surface.Block("forum.search._use_23_22_block_content");
forum.search._use_23_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_isSticky;
    var l_for_forum_search_59_50_list;
    var l_for_forum_search_30_34_count;
    var l_for_forum_search_30_34_hasNext;
    var l_prefix;
    var l_for_forum_search_30_34_iteration;
    var l_for_forum_search_30_34_list;
    c.push(' <div class="forum-search-results-wrapper">\n');
    l_for_forum_search_30_34_list = ((typeof (o) != "undefined" && o !== null && typeof (o.results) != "undefined" && o.results !== null) ? o.results : []);
    l_for_forum_search_30_34_count = S.Modifier.count(l_for_forum_search_30_34_list);
    l_for_forum_search_30_34_iteration = 0;
    if ((S.Modifier.count(l_for_forum_search_30_34_list) > 0)) {
        for (var l_for_forum_search_30_34_key in l_for_forum_search_30_34_list) {
            if (!Surface.isValidLoopItem(l_for_forum_search_30_34_list[l_for_forum_search_30_34_key])) {
                continue;
            }
            var l_result = l_for_forum_search_30_34_list[l_for_forum_search_30_34_key];
            l_for_forum_search_30_34_iteration = (l_for_forum_search_30_34_iteration + 1);
            l_for_forum_search_30_34_hasNext = (l_for_forum_search_30_34_iteration < l_for_forum_search_30_34_count);
            c.push("\n");
            l_isSticky = S.Modifier.get(l_result, "isSticky", false);
            l_prefix = S.Modifier.substring(l_result.docid, 0, 2);
            c.push('\n <div class="forum-search-results-item');
            if (!(l_for_forum_search_30_34_hasNext)) {
                c.push(" last");
            }
            c.push('">\n <div class="forum-search-results-item-title">\n <div class="forum-search-results-icons">\n ');
            if (((typeof (l_isSticky) != "undefined" && l_isSticky !== null) ? l_isSticky : false)) {
                c.push('<img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/forum/sticky-icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" width="14" height="15" alt="');
                c.push(Surface.valOut("Sticky"));
                c.push('" />');
            }
            c.push('\n </div>\n <h3><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": l_result.threadId})));
            c.push('">');
            c.push(Surface.valOut(l_result.title));
            c.push("</a></h3>\n <span>");
            c.push(Surface.importTemplate(("common" + ("." + "ago")), l_result, null, kwargs));
            c.push('</span>\n <div class="base-clear"></div>\n </div>\n');
            if ((l_prefix == "p_")) {
                c.push(' <div class="base-clear"></div>\n <p class="forum-search-results-item-post">');
                c.push(l_result.snippet_text);
                c.push("</p>\n");
            }
            if ((typeof (l_result) != "undefined" && l_result !== null && typeof (l_result.snippets) != "undefined" && l_result.snippets !== null)) {
                c.push(' <div class="base-clear"></div>\n <p class="forum-search-results-item-post">\n');
                l_for_forum_search_59_50_list = l_result.snippets;
                if ((S.Modifier.count(l_for_forum_search_59_50_list) > 0)) {
                    for (var l_for_forum_search_59_50_key in l_for_forum_search_59_50_list) {
                        if (!Surface.isValidLoopItem(l_for_forum_search_59_50_list[l_for_forum_search_59_50_key])) {
                            continue;
                        }
                        var l_snippet = l_for_forum_search_59_50_list[l_for_forum_search_59_50_key];
                        c.push(" ...");
                        c.push(Surface.valOut(l_snippet));
                        c.push("...\n");
                    }
                }
                c.push(" </p>\n");
            }
            c.push(" </div>\n");
        }
    } else {
        c.push(' <div class="forum-search-results-none">');
        c.push(Surface.valOut("No results found"));
        c.push("</div>\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
forum.search._use_23_22_block_shadow = new Surface.Block("forum.search._use_23_22_block_shadow");
forum.search._use_23_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.search.surface_22_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_search;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.search");
    c.push('<surf:container id="');
    c.push("forum-search-results");
    c.push('">');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), {"searchQuery": ((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) ? o.searchQuery : ""),"results": o.results}, block_forum_search_use_23_22, kwargs));
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("forum.search", "surface_22_18", "forum-search-results", o, b);
    return c.join("");
};
forum.search.block_mainContent = new Surface.Block("forum.search.block_mainContent");
forum.search.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((typeof (o) != "undefined" && o !== null && typeof (o.searchApi) != "undefined" && o.searchApi !== null)) {
        c.push(' <input type="hidden" id="forum-search-api" value="');
        c.push(Surface.valOut(o.searchApi));
        c.push('" />\n');
    }
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n ');
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="forum-start-container">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/search/", Surface.urlContext)));
    c.push('" method="GET" class="form-search-form">\n <input type="text" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) ? o.searchQuery : "")));
    c.push('" name="q" class="form-search-form-input" />\n <input type="submit" value="');
    c.push(Surface.valOut("Search"));
    c.push('" class="base-button-arrow-small-grey" />\n </form>\n');
    c.push(forum.search.surface_22_18.render({"results": ((typeof (o) != "undefined" && o !== null && typeof (o.results) != "undefined" && o.results !== null) ? o.results : null),"searchQuery": ((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) ? o.searchQuery : null)}, b, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_forum_searchform = new Surface.BlockConfig("", {});
forum.addTemplate(new Surface.Template("searchform"));
forum.searchform.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_searchform;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.searchform");
    c.push('\n<div class="forum-search-container">\n');
    if ((true || (typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.indexTankApi) != "undefined" && Surface.globalContext.staticContext.indexTankApi !== null))) {
        c.push(' <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/search/", Surface.urlContext)));
        c.push('" method="GET" class="forum-sidebar-search-form">\n <input type="text" value="" name="q" class="forum-sidebar-search-form-input" placeholder="');
        c.push(Surface.valOut("Search for topic or keyword"));
        c.push('" />\n <input type="submit" value="" class="base-button-search" />\n </form>\n');
    }
    c.push("</div>");
    return c.join("");
};
var block_forum_threadview = new Surface.BlockConfig("forum.base", {"titleItem": "forum.threadview.block_titleItem","mainContent": "forum.threadview.block_mainContent"});
forum.addTemplate(new Surface.Template("threadview"));
forum.threadview.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_threadview;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.threadview");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_threadview_use_98_26 = new Surface.BlockConfig("common.replyform", {"extraFields": "forum.threadview._use_98_26_block_extraFields"});
var block_forum_threadview_use_76_26 = new Surface.BlockConfig("pagination.pagination", {"left": "forum.threadview._use_76_26_block_left"});
var block_forum_threadview_use_47_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.threadview._use_47_22_block_content","extraClassInner": "forum.threadview._use_47_22_block_extraClassInner","titleContainer": "forum.threadview._use_47_22_block_titleContainer","extraClass": "forum.threadview._use_47_22_block_extraClass"});
var block_forum_threadview_use_33_26 = new Surface.BlockConfig("pagination.pagination", {"left": "forum.threadview._use_33_26_block_left"});
forum.threadview.block_titleItem = new Surface.Block("forum.threadview.block_titleItem");
forum.threadview.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.truncate(o.thread.title, 20)));
    c.push(" ");
    if ((o.currentPage > 1)) {
        c.push("page ");
        c.push(Surface.valOut(o.currentPage));
        c.push("/");
        c.push(Surface.valOut(o.numPages));
    }
    c.push(" - ");
    return c.join("");
};
forum.threadview._use_33_26_block_left = new Surface.Block("forum.threadview._use_33_26_block_left");
forum.threadview._use_33_26_block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (o.thread.isLocked) {
        c.push(' <div class="forum-thread-is-locked">\n ');
        c.push(Surface.valOut("Thread is locked."));
        c.push("\n </div>\n");
    } else {
        c.push("\n");
    }
    return c.join("");
};
forum.threadview._use_47_22_block_extraClass = new Surface.Block("forum.threadview._use_47_22_block_extraClass");
forum.threadview._use_47_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.threadview._use_47_22_block_titleContainer = new Surface.Block("forum.threadview._use_47_22_block_titleContainer");
forum.threadview._use_47_22_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.threadview._use_47_22_block_extraClassInner = new Surface.Block("forum.threadview._use_47_22_block_extraClassInner");
forum.threadview._use_47_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.threadview._use_47_22_block_content = new Surface.Block("forum.threadview._use_47_22_block_content");
forum.threadview._use_47_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_userInfo;
    var l_for_forum_threadview_52_30_hasNext;
    var l_location;
    var l_for_forum_threadview_52_30_count;
    var l_for_forum_threadview_52_30_iteration;
    var l_icon;
    var l_for_forum_threadview_52_30_list;
    l_for_forum_threadview_52_30_list = o.posts;
    l_for_forum_threadview_52_30_count = S.Modifier.count(l_for_forum_threadview_52_30_list);
    l_for_forum_threadview_52_30_iteration = 0;
    if ((S.Modifier.count(l_for_forum_threadview_52_30_list) > 0)) {
        for (var l_for_forum_threadview_52_30_key in l_for_forum_threadview_52_30_list) {
            if (!Surface.isValidLoopItem(l_for_forum_threadview_52_30_list[l_for_forum_threadview_52_30_key])) {
                continue;
            }
            var l_post = l_for_forum_threadview_52_30_list[l_for_forum_threadview_52_30_key];
            l_for_forum_threadview_52_30_iteration = (l_for_forum_threadview_52_30_iteration + 1);
            l_for_forum_threadview_52_30_hasNext = (l_for_forum_threadview_52_30_iteration < l_for_forum_threadview_52_30_count);
            l_location = "";
            l_icon = 0;
            if ((typeof (o) != "undefined" && o !== null && typeof (o.userInfos) != "undefined" && o.userInfos !== null)) {
                l_userInfo = S.Modifier.get(o.userInfos, l_post.ownerId, {});
                l_location = S.Modifier.get(l_userInfo, "location", "");
                l_icon = S.Modifier.get(l_userInfo, "icon", 0);
            }
            c.push("\n");
            c.push(Surface.importTemplate(("forum" + ("." + "post")), {"user": l_post.owner,"post": l_post,"userEnlisted": "2009-10-02","userIcon": l_icon,"userLocation": l_location,"creationDate": l_post.creationDate,"content": l_post.formattedBody,"postId": o.postId,"threadId": o.thread.id,"canEditPosts": o.canEditPosts,"canViewPostHistory": o.canViewPostHistory,"canViewLatestPosts": o.canViewLatestPosts,"canDeletePosts": o.canDeletePosts}, null, kwargs));
            c.push("\n");
            if (l_for_forum_threadview_52_30_hasNext) {
                c.push(' <div class="forum-threadview-separator"></div>\n');
            }
        }
    }
    return c.join("");
};
forum.threadview._use_76_26_block_left = new Surface.Block("forum.threadview._use_76_26_block_left");
forum.threadview._use_76_26_block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (o.thread.isLocked) {
        c.push(' <div class="forum-thread-is-locked">\n ');
        c.push(Surface.valOut("Thread is locked."));
        c.push("\n </div>\n");
    } else {
        c.push("\n");
    }
    return c.join("");
};
forum.threadview._use_98_26_block_extraFields = new Surface.Block("forum.threadview._use_98_26_block_extraFields");
forum.threadview._use_98_26_block_extraFields.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (o.canPostOfficial) {
        c.push(' <div class="forum-postreply-official-selector"><label><input type="checkbox" name="officialPost" /> ');
        c.push(Surface.valOut("Official EA post"));
        c.push("</label></div>\n");
    }
    return c.join("");
};
forum.threadview.block_mainContent = new Surface.Block("forum.threadview.block_mainContent");
forum.threadview.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n <div class="forum-start-container">\n ');
    c.push(Surface.importTemplate(("forum" + ("." + "searchform")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="clear"></div>\n <div class="forum-start-title">\n <h1>');
    c.push(Surface.valOut(o.thread.title));
    c.push("</h1>\n");
    if ((o.isAdmin && o.canCensorPosts)) {
        c.push(' <div class="forum-report-container">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/forum/reportThreadDropdown/{threadId}/", Surface.urlContext, {"threadId": o.thread.id})}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push('\n </div>\n <div class="forum-start-border">\n <div class="forum-focus-bar-view-top">\n');
    c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, block_forum_threadview_use_33_26, kwargs));
    c.push(" </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_threadview_use_47_22, kwargs));
    c.push('\n <div class="forum-focus-bar-view-bottom">\n');
    if (o.canDeletePosts) {
        c.push(' <div class="forum-admin-multi-container">\n With selected: <input type="button" value="Remove" data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "deletePosts"})));
        c.push('" id="forum-multi-remove-button" class="base-button-arrow-small" />\n </div>\n');
    }
    c.push("\n");
    c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, block_forum_threadview_use_76_26, kwargs));
    c.push(" </div>\n </div>\n");
    if (Surface.globalContext.hasWriteBan) {
        c.push(' <div class="forum-postreply-disabled">');
        c.push(Surface.valOut("You are not allowed to post in the forum until"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.offsetdateformat(Surface.globalContext.writeBanUntil, ((Surface.globalContext.session.locale.fulldate + " ") + Surface.globalContext.session.locale.time), Surface.globalContext.session.locale.offset)));
        c.push("</div>\n");
    } else {
        if (o.thread.isLocked) {
            c.push(' <div class="forum-postreply-disabled">');
            c.push(Surface.valOut("Thread is locked."));
            c.push("</div>\n");
        } else {
            if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
                if ((o.thread.lastPosterId == ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.userId) != "undefined" && l_session.userId !== null) ? l_session.userId : 0))) {
                    c.push(' <div class="forum-postreply-disabled">You cannot post more replies as long as you are the last poster. Please edit your post instead.</div>\n');
                } else {
                    c.push(Surface.importTemplate(("common" + ("." + "replyform")), {"user": l_session.user,"action": S.Modifier.urlformat("/{_section}/{_language}/forum/createpost/{id}/", Surface.urlContext, o.thread),"extraFormClass": "base-do-ajax forum-ajax-post","canPostOfficial": o.canPostOfficial}, block_forum_threadview_use_98_26, kwargs));
                }
                if ((o.error == "short")) {
                    c.push(' <div class="forum-postreply-error">');
                    c.push(Surface.valOut("Text too short. Please try to write something more!"));
                    c.push("</div>\n");
                }
            }
        }
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_forum_userposts = new Surface.BlockConfig("forum.base", {"titleItem": "forum.userposts.block_titleItem","mainContent": "forum.userposts.block_mainContent"});
forum.addTemplate(new Surface.Template("userposts"));
forum.userposts.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_userposts;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.userposts");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_userposts_use_35_30 = new Surface.BlockConfig("common.boxwideclean", {"content": "forum.userposts._use_35_30_block_content","extraClassInner": "forum.userposts._use_35_30_block_extraClassInner","titleContainer": "forum.userposts._use_35_30_block_titleContainer","extraClass": "forum.userposts._use_35_30_block_extraClass"});
forum.userposts.block_titleItem = new Surface.Block("forum.userposts.block_titleItem");
forum.userposts.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Latest posts for ");
    c.push(Surface.valOut(o.user.username));
    c.push(" - ");
    return c.join("");
};
forum.userposts._use_35_30_block_extraClass = new Surface.Block("forum.userposts._use_35_30_block_extraClass");
forum.userposts._use_35_30_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.userposts._use_35_30_block_titleContainer = new Surface.Block("forum.userposts._use_35_30_block_titleContainer");
forum.userposts._use_35_30_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.userposts._use_35_30_block_extraClassInner = new Surface.Block("forum.userposts._use_35_30_block_extraClassInner");
forum.userposts._use_35_30_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
forum.userposts._use_35_30_block_content = new Surface.Block("forum.userposts._use_35_30_block_content");
forum.userposts._use_35_30_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    o.forumPostData.post = o.post;
    o.forumPostData.content = o.post.formattedBody;
    o.forumPostData.creationDate = o.post.creationDate;
    o.forumPostData.postId = o.post.id;
    o.forumPostData.threadId = o.post.threadId;
    c.push(" ");
    c.push(Surface.importTemplate(("forum" + ("." + "post")), o.forumPostData, null, kwargs));
    c.push("\n");
    return c.join("");
};
forum.userposts.block_mainContent = new Surface.Block("forum.userposts.block_mainContent");
forum.userposts.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_forum_userposts_29_18_list;
    var l_userInfo;
    var l_thread;
    var l_location;
    var l_icon;
    c.push("\n");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="forum-start-container">\n ');
    c.push(Surface.importTemplate(("forum" + ("." + "searchform")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="clear"></div>\n <div class="forum-start-title">\n <h1>Latest posts for ');
    c.push(Surface.valOut(o.user.username));
    c.push("</h1>\n </div>\n");
    l_location = "";
    l_icon = 0;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.userInfos) != "undefined" && o.userInfos !== null)) {
        l_userInfo = S.Modifier.get(o.userInfos, o.post.ownerId, {});
        l_location = S.Modifier.get(l_userInfo, "location", "");
        l_icon = S.Modifier.get(l_userInfo, "icon", 0);
    }
    c.push("\n");
    o.forumPostData = {"user": o.user,"userIcon": l_icon,"userLocation": l_location,"canEditPosts": o.canEditPosts,"canViewPostHistory": o.canViewPostHistory,"canDeletePosts": o.canDeletePosts,"hideQuote": true};
    c.push("\n");
    l_for_forum_userposts_29_18_list = o.posts;
    if ((S.Modifier.count(l_for_forum_userposts_29_18_list) > 0)) {
        for (var l_for_forum_userposts_29_18_key in l_for_forum_userposts_29_18_list) {
            if (!Surface.isValidLoopItem(l_for_forum_userposts_29_18_list[l_for_forum_userposts_29_18_key])) {
                continue;
            }
            var l_p = l_for_forum_userposts_29_18_list[l_for_forum_userposts_29_18_key];
            o.post = l_p;
            c.push(' <div class="forum-posthistory-container">\n');
            l_thread = S.Modifier.get(o.threads, o.post.threadId);
            c.push(' <b>Posted in thread <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/postview/{id}/", Surface.urlContext, o.post)));
            c.push('">');
            c.push(Surface.valOut(l_thread.title));
            c.push('</a></b>\n <div class="forum-start-border">\n');
            c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_forum_userposts_use_35_30, kwargs));
            c.push(" </div>\n </div>\n");
        }
    }
    c.push('\n <div class="forum-focus-bar-view-bottom">\n');
    if (o.canDeletePosts) {
        c.push(' <div class="forum-admin-multi-container">\n With selected: <input type="button" value="Remove" data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/adminforum/performAdminTask/{task}/{id}/", Surface.urlContext, {"task": "deletePosts"})));
        c.push('" id="forum-multi-remove-button" class="base-button-arrow-small" />\n </div>\n');
    }
    c.push("\n");
    c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, null, kwargs));
    c.push('\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_forum_view = new Surface.BlockConfig("forum.base", {"titleItem": "forum.view.block_titleItem","mainContent": "forum.view.block_mainContent"});
forum.addTemplate(new Surface.Template("view"));
forum.view.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_forum_view;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("forum");
    Surface.Renderer.addUsedTemplate("forum.view");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("forum.base", o, b, kwargs);
};
var block_forum_view_use_79_26 = new Surface.BlockConfig("pagination.pagination", {"left": "forum.view._use_79_26_block_left"});
var block_forum_view_use_35_22 = new Surface.BlockConfig("common.boxwide", {"content": "forum.view._use_35_22_block_content","extraClassInner": "forum.view._use_35_22_block_extraClassInner","title": "forum.view._use_35_22_block_title","extraTitleClass": "forum.view._use_35_22_block_extraTitleClass","titleType": "forum.view._use_35_22_block_titleType"});
var block_forum_view_use_27_26 = new Surface.BlockConfig("pagination.pagination", {"left": "forum.view._use_27_26_block_left"});
forum.view.block_titleItem = new Surface.Block("forum.view.block_titleItem");
forum.view.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.truncate(o.forum.title, 20)));
    c.push(" ");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.currentPage) != "undefined" && o.currentPage !== null) ? o.currentPage : 0) > 1)) {
        c.push(Surface.valOut("page"));
        c.push(" ");
        c.push(Surface.valOut(o.currentPage));
        c.push("/");
        c.push(Surface.valOut(o.numPages));
    }
    c.push(" - ");
    return c.join("");
};
forum.view._use_27_26_block_left = new Surface.Block("forum.view._use_27_26_block_left");
forum.view._use_27_26_block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"extraClass": "","text": "Create new thread","url": S.Modifier.urlformat("/{_section}/{_language}/forum/newthread/{id}/", Surface.urlContext, o.forum)}, null, kwargs));
    c.push("\n");
    return c.join("");
};
forum.view._use_35_22_block_titleType = new Surface.Block("forum.view._use_35_22_block_titleType");
forum.view._use_35_22_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("solid-with-line");
    return c.join("");
};
forum.view._use_35_22_block_extraTitleClass = new Surface.Block("forum.view._use_35_22_block_extraTitleClass");
forum.view._use_35_22_block_extraTitleClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-box-title");
    return c.join("");
};
forum.view._use_35_22_block_title = new Surface.Block("forum.view._use_35_22_block_title");
forum.view._use_35_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="forum-start-info">\n <div class="forum-start-forum-forum forum-start-forum-headercell forum-start-forum-headercellleft"><p>');
    c.push(Surface.valOut("Topic"));
    c.push('</p></div>\n <div class="forum-start-forum-latest forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Latest reply"));
    c.push('</p></div>\n <div class="forum-start-forum-topics forum-start-forum-headercell"><p>');
    c.push(Surface.valOut("Replies"));
    c.push("</p></div>\n </div>\n");
    return c.join("");
};
forum.view._use_35_22_block_extraClassInner = new Surface.Block("forum.view._use_35_22_block_extraClassInner");
forum.view._use_35_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("forum-box-thread-view");
    return c.join("");
};
forum.view._use_35_22_block_content = new Surface.Block("forum.view._use_35_22_block_content");
forum.view._use_35_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_forum_view_48_30_list;
    var l_for_forum_view_48_30_iteration;
    var l_for_forum_view_48_30_hasNext;
    var l_for_forum_view_48_30_count;
    l_for_forum_view_48_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.threads) != "undefined" && o.threads !== null) ? o.threads : []);
    l_for_forum_view_48_30_count = S.Modifier.count(l_for_forum_view_48_30_list);
    l_for_forum_view_48_30_iteration = 0;
    if ((S.Modifier.count(l_for_forum_view_48_30_list) > 0)) {
        for (var l_for_forum_view_48_30_key in l_for_forum_view_48_30_list) {
            if (!Surface.isValidLoopItem(l_for_forum_view_48_30_list[l_for_forum_view_48_30_key])) {
                continue;
            }
            var l_thread = l_for_forum_view_48_30_list[l_for_forum_view_48_30_key];
            l_for_forum_view_48_30_iteration = (l_for_forum_view_48_30_iteration + 1);
            l_for_forum_view_48_30_hasNext = (l_for_forum_view_48_30_iteration < l_for_forum_view_48_30_count);
            c.push('\n <div class="forum-start-forum');
            if ((l_thread.numberOfOfficialPosts > 0)) {
                c.push(" forum-start-forum-has-official");
            }
            c.push('">\n <div class="forum-thread-icons">\n ');
            if (((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.isSticky) != "undefined" && l_thread.isSticky !== null) ? l_thread.isSticky : false)) {
                c.push('<img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/forum/sticky-icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" width="14" height="15" alt="');
                c.push(Surface.valOut("Sticky"));
                c.push('" />');
            }
            c.push("\n");
            if (((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.isLocked) != "undefined" && l_thread.isLocked !== null) ? l_thread.isLocked : false)) {
                c.push('<img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/forum/locked-icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" width="8" height="15" alt="');
                c.push(Surface.valOut("Locked"));
                c.push('" />');
            }
            c.push('\n </div>\n <div class="forum-start-forum-title">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, l_thread)));
            c.push('">');
            c.push(Surface.valOut(l_thread.title));
            c.push('</a>\n <p class="forum-start-forum-title-username">');
            c.push(Surface.valOut("By"));
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": ((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.owner) != "undefined" && l_thread.owner !== null && typeof (l_thread.owner.username) != "undefined" && l_thread.owner.username !== null) ? l_thread.owner.username : "Player")})));
            c.push('">');
            c.push(Surface.valOut(((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.owner) != "undefined" && l_thread.owner !== null && typeof (l_thread.owner.username) != "undefined" && l_thread.owner.username !== null) ? l_thread.owner.username : "-")));
            c.push('</a></p>\n </div>\n <div class="forum-start-forum-latest forum-start-forum-bodycell">\n <div class="forum-start-forum-latest-info">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/threadview/{id}/{page}/{scrollTo}/", Surface.urlContext, {"id": l_thread.id,"page": "last"})));
            c.push('">');
            c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_thread.lastPostDate}, null, kwargs));
            c.push('</a>\n <div class="forum-start-forum-title-username">');
            c.push(Surface.valOut("By"));
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": ((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.lastPoster) != "undefined" && l_thread.lastPoster !== null && typeof (l_thread.lastPoster.username) != "undefined" && l_thread.lastPoster.username !== null) ? l_thread.lastPoster.username : "Player")})));
            c.push('">');
            c.push(Surface.valOut(((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.lastPoster) != "undefined" && l_thread.lastPoster !== null && typeof (l_thread.lastPoster.username) != "undefined" && l_thread.lastPoster.username !== null) ? l_thread.lastPoster.username : "-")));
            c.push("</a></div>\n </div>\n ");
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 22,"user": ((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.lastPoster) != "undefined" && l_thread.lastPoster !== null) ? l_thread.lastPoster : false)}, null, kwargs));
            c.push('\n </div>\n <div class="forum-start-forum-topics forum-start-forum-bodycell"><p>');
            c.push(Surface.valOut(((typeof (l_thread) != "undefined" && l_thread !== null && typeof (l_thread.numberOfPosts) != "undefined" && l_thread.numberOfPosts !== null) ? l_thread.numberOfPosts : 0)));
            c.push("</p></div>\n </div>\n ");
            if (l_for_forum_view_48_30_hasNext) {
                c.push('<div class="forum-start-forum-separator"></div>');
            }
            c.push("\n");
        }
    } else {
        c.push(' <h1 class="forum-no-found">');
        c.push(Surface.valOut("No threads found"));
        c.push("</h1>\n");
    }
    return c.join("");
};
forum.view._use_79_26_block_left = new Surface.Block("forum.view._use_79_26_block_left");
forum.view._use_79_26_block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"extraClass": "","text": "Create new thread","url": S.Modifier.urlformat("/{_section}/{_language}/forum/newthread/{id}/", Surface.urlContext, o.forum)}, null, kwargs));
    c.push("\n");
    return c.join("");
};
forum.view.block_mainContent = new Surface.Block("forum.view.block_mainContent");
forum.view.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n <div class="forum-start-container">\n ');
    c.push(Surface.importTemplate(("forum" + ("." + "searchform")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("forum" + ("." + "breadcrumbs")), {"breadcrumbs": o.breadcrumbs}, null, kwargs));
    c.push('\n <div class="clear"></div>\n <div class="forum-page-title">\n <h1>');
    c.push(Surface.valOut(o.forum.title));
    c.push('</h1>\n </div>\n <div class="forum-start-border">\n <div class="forum-focus-bar-view-top">\n');
    c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, block_forum_view_use_27_26, kwargs));
    c.push(' </div>\n <div class="forum-start-info-bottom"></div>\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwide")), o, block_forum_view_use_35_22, kwargs));
    c.push(' <div class="forum-focus-bar-view-bottom">\n');
    c.push(Surface.importTemplate(("pagination" + ("." + "pagination")), o, block_forum_view_use_79_26, kwargs));
    c.push(' </div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
if (typeof friendsync == "undefined") {
    var friendsync = {};
}
var surf_friendsync_component = new Surface.Component("friendsync");
surf_friendsync_component.extend(friendsync);
friendsync = surf_friendsync_component;
var block_friendsync_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "friendsync.index.block_mainContent"});
friendsync.addTemplate(new Surface.Template("index"));
if (typeof gamecontrol == "undefined") {
    var gamecontrol = {};
}
var surf_gamecontrol_component = new Surface.Component("gamecontrol");
surf_gamecontrol_component.extend(gamecontrol);
gamecontrol = surf_gamecontrol_component;
var block_gamecontrol_index = new Surface.BlockConfig("", {});
gamecontrol.addTemplate(new Surface.Template("index"));
gamecontrol.index.surface_12_6 = new Surface.SingleSurface("gamecontrol.index.surface_12_6");
gamecontrol.index.surface_12_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.index");
    c.push('<surf:container id="');
    c.push("gamemanager-subtitle");
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.gamemanagerSubtitle) != "undefined" && o.gamemanagerSubtitle !== null)) {
        c.push(' <div class="gamemanager-subtitle">');
        c.push(Surface.valOut(o.gamemanagerSubtitle));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.index", "surface_12_6", "gamemanager-subtitle", o, b);
    return c.join("");
};
gamecontrol.index.surface_19_6 = new Surface.SingleSurface("gamecontrol.index.surface_19_6");
gamecontrol.index.surface_19_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.index");
    c.push('<surf:container id="');
    c.push("patcher-events-surface");
    c.push('">');
    c.push(' <div id="patcher-events">\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.render) != "undefined" && o.render !== null) ? o.render : false) && (typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null))) {
        c.push(' <div id="patching" class="comcenter-preview-area">\n <div class="comcenter-notification-title comcenter-gamecontrol-title">\n <div class="comcenter-contract">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null) ? o.data : false)) {
            c.push(' <div class="patcher-event-action">\n');
            if ((S.Modifier.lower(o.data.action) == "checkingforpatch")) {
                c.push(" Checking for Patch...\n");
            } else {
                if ((S.Modifier.lower(o.data.action) == "patch")) {
                    c.push(" Patching Game...\n");
                } else {
                    if ((S.Modifier.lower(o.data.action) == "installing")) {
                        c.push(" Installing Game...\n");
                    } else {
                        if ((S.Modifier.lower(o.data.action) == "complete")) {
                            c.push(" Installation complete!\n");
                        }
                    }
                }
            }
            c.push(' </div>\n <div class="patcher-progressbar">\n <div class="patcher-progression" style="width:');
            c.push(Surface.valOut(o.data.progress));
            c.push('%"></div>\n </div>\n <div class="patcher-additional-info">\n');
            if (((o.data.download.file != "") && (S.Modifier.lower(o.data.action) != "complete"))) {
                c.push(" ");
                c.push(Surface.valOut("Downloading file"));
                c.push(": ");
                c.push(Surface.valOut(o.data.download.file));
                c.push(", Size: ");
                c.push(Surface.valOut(o.data.download.size));
                c.push(" MB, ");
                c.push(Surface.valOut("Speed"));
                c.push(": ");
                c.push(Surface.valOut(o.data.download.speed));
                c.push(" kB/s (");
                c.push(Surface.valOut(o.data.download.progress));
                c.push('%)\n <div class="patcher-progressbar" style="margin-left:0; margin-top:5px;">\n <div class="patcher-progression" style="width:');
                c.push(Surface.valOut(o.data.download.progress));
                c.push('%"></div>\n </div>\n');
            } else {
                if (((o.data.filewrite.file != "") && (S.Modifier.lower(o.data.action) != "complete"))) {
                    c.push(" Writing file: ");
                    c.push(Surface.valOut(S.Modifier.wordwrap(o.data.filewrite.file, 25)));
                    c.push(" (");
                    c.push(Surface.valOut(o.data.filewrite.progress));
                    c.push('%)\n <div class="patcher-progressbar" style="margin-left:0; margin-top:5px;">\n <div class="patcher-progression" style="width:');
                    c.push(Surface.valOut(o.data.filewrite.progress));
                    c.push('%"></div>\n </div>\n');
                }
            }
            if ((S.Modifier.lower(o.data.action) == "complete")) {
                c.push(' <img width="54" height="54" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/joinflow/bfbc2/success.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" style="margin-left: 77px; margin-top: 24px;" />\n');
            }
            c.push(" </div>\n");
        }
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null)) {
            c.push(' <div class="gamecontrol-separator">\n <p>');
            c.push(Surface.valOut(o.message));
            c.push("</p>\n </div>\n");
        }
        c.push('\n <div class="gamecontrol-bottom"></div>\n </div>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.index", "surface_19_6", "patcher-events-surface", o, b);
    return c.join("");
};
gamecontrol.index.surface_76_6 = new Surface.SingleSurface("gamecontrol.index.surface_76_6");
gamecontrol.index.surface_76_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.index");
    c.push('<surf:container id="');
    c.push("gamecontrol-event-surface");
    c.push('">');
    var l_mapInfo;
    c.push(' <div id="gamecontrol-game-launcher" ');
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.render) != "undefined" && o.render !== null) ? o.render : false))) {
        c.push('style="display: none;"');
    }
    c.push('>\n <div id="comcenter-joinflow" class="comcenter-preview-area ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
        c.push("askForFullscreen");
    }
    c.push('">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.render) != "undefined" && o.render !== null) ? o.render : false)) {
        c.push('\n <div class="comcenter-notification-title comcenter-gamecontrol-title">\n ');
        if ((S.Modifier.count(o.serverCookieName) > 30)) {
            c.push(Surface.valOut(S.Modifier.substring(o.serverCookieName, 0, 30)));
            c.push("...");
        } else {
            c.push(Surface.valOut(o.serverCookieName));
        }
        c.push('\n <div class="comcenter-contract">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n <div id="gamecontrol-map-container">\n');
        l_mapInfo = $S.callFunction("serverguide.mapinfo", o.game, ((typeof (o) != "undefined" && o !== null && typeof (o.serverCookieMapId) != "undefined" && o.serverCookieMapId !== null) ? o.serverCookieMapId : "unknown"), b, kwargs);
        c.push(' <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_mapInfo.imageJoinflow, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n </div>\n <div id="gamecontrol-event-container">\n <div id="gamecontrol-event-data">\n <span>Error</span>\n <div id="gamecontrol-snowroller">\n ');
        c.push(Surface.valOut(o.statePrettyName));
        c.push('\n </div>\n </div>\n <div id="gamecontrol-event-loader">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
            c.push(' <img width="16" height="16" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/state_ready.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n');
        } else {
            c.push(' <img width="22" height="22" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading_game.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" class="gamecontrol-event-loader-spinner" />\n');
        }
        c.push(" <span>!</span>\n </div>\n </div>\n");
        if (!(((typeof (o) != "undefined" && o !== null && typeof (o.error) != "undefined" && o.error !== null) ? o.error : false))) {
            c.push(' <div id="gamecontrol-autoplay">\n <input id="gamecontrol-checkbox-autoplay" type="checkbox" ');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.serverAutoPlay) != "undefined" && o.serverAutoPlay !== null) ? o.serverAutoPlay : "0") == "1")) {
                c.push("checked");
            }
            c.push('/><label id="gamecontrol-info-autoplay" for="gamecontrol-checkbox-autoplay">Launch when ready</label>\n </div>\n');
        } else {
            c.push(' <div class="gamecontrol-error-message">\n');
            if ((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null)) {
                c.push(" <p>");
                c.push(Surface.valOut(o.message));
                c.push("</p>\n");
            }
            c.push(" </div>\n");
        }
        c.push('\n <div class="gamecontrol-separator">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
            c.push(' <input type="button" id="gamecontrol-game-fullscreenButton" class="base-button-arrow-large" value="Play" />\n');
            o.message = "";
        } else {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.inQueue) != "undefined" && o.inQueue !== null) ? o.inQueue : false)) {
                o.message = "Currently in queue to play";
            }
        }
        c.push('\n <div id="gamecontrol-game-cancelButton-container">\n <span id="gamecontrol-game-cancelButton">');
        c.push(Surface.valOut("Cancel"));
        c.push('</span>\n </div>\n <div id="gamecontrol-message">\n </div>\n </div>\n');
    } else {
        c.push(' <div class="loader"></div>\n');
    }
    c.push(" </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.index", "surface_76_6", "gamecontrol-event-surface", o, b);
    return c.join("");
};
gamecontrol.index.surface_148_6 = new Surface.SingleSurface("gamecontrol.index.surface_148_6");
gamecontrol.index.surface_161_18 = new Surface.SingleSurface("gamecontrol.index.surface_161_18");
gamecontrol.index.surface_161_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.index");
    c.push('<surf:container id="');
    c.push("gamecontrol-queueposition");
    c.push('">');
    if ((o.positionInQueue > 0)) {
        c.push(" ");
        c.push(Surface.valOut(o.positionInQueue));
        c.push(" / ");
        c.push(Surface.valOut(o.queueSize));
        c.push('\n <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/history/", Surface.urlContext)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input class="base-button-arrow-tiny" type="submit" value="Leave" />\n </form>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.index", "surface_161_18", "gamecontrol-queueposition", o, b);
    return c.join("");
};
gamecontrol.index.surface_148_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.index");
    c.push('<surf:container id="');
    c.push("gameStatus");
    c.push('">');
    var l_realm;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <div id="gamecontrol-content" class="');
    if (o.state) {
        c.push(Surface.valOut(S.Modifier.lower(o.state)));
    }
    c.push('">\n <div id="gamecontrol-status">\n <div id="gamecontrol-gamestatus">GAME STATUS</div>\n <div id="gamecontrol-status-text">\n');
    if (((S.Modifier.lower(o.state) != "gameisgone") && o.state)) {
        c.push(" ");
        c.push(Surface.valOut(o.statePrettyName));
        c.push("\n");
        if (((((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null) && (S.Modifier.lower(o.state) != "patchcheckcomplete")) && ((typeof (o) != "undefined" && o !== null && typeof (o.patcher) != "undefined" && o.patcher !== null) ? o.patcher : false)) && (S.Modifier.lower(o.state) != "cancelling"))) {
            c.push(" (");
            c.push(Surface.valOut(o.data.progress));
            c.push("%)\n");
        }
    }
    c.push(" </div>\n");
    c.push(gamecontrol.index.surface_161_18.render({"positionInQueue": ((typeof (o) != "undefined" && o !== null && typeof (o.positionInQueue) != "undefined" && o.positionInQueue !== null) ? o.positionInQueue : null),"queueSize": ((typeof (o) != "undefined" && o !== null && typeof (o.queueSize) != "undefined" && o.queueSize !== null) ? o.queueSize : null)}, b, kwargs));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.patcherButton) != "undefined" && o.patcherButton !== null) && (o.patcherButton != false))) {
        c.push(' <div id="patcherButton">\n');
        if ((o.patcherButton == "update")) {
            c.push(' <div id="patcherButton-update" class="patcherButton-action">\n Update\n </div>\n');
        } else {
            if ((o.patcherButton == "install")) {
                c.push(' <div id="patcherButton-install" class="patcherButton-action">\n Install\n </div>\n');
            } else {
                if ((o.patcherButton == "purchase")) {
                    c.push('\n <div id="patcherButton-purchase" class="patcherButton-action" action="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/store/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_realm.section, b, kwargs)})));
                    c.push('">\n Purchase\n </div>\n');
                }
            }
        }
        c.push(" </div>\n");
    }
    c.push("\n </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.index", "surface_148_6", "gameStatus", o, b);
    return c.join("");
};
var block_gamecontrol_launcher = new Surface.BlockConfig("", {});
gamecontrol.addTemplate(new Surface.Template("launcher"));
gamecontrol.launcher.surface_3_2 = new Surface.SingleSurface("gamecontrol.launcher.surface_3_2");
gamecontrol.launcher.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamecontrol_launcher;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamecontrol");
    Surface.Renderer.addUsedTemplate("gamecontrol.launcher");
    c.push('<surf:container id="');
    c.push("gamecontrol-event-surface");
    c.push('">');
    var l_mapInfo;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.render) != "undefined" && o.render !== null) ? o.render : false)) {
        c.push(' <div class="handle" id="gamecontrol-header-container">\n <h1>');
        c.push(Surface.valOut("Joining"));
        c.push(" ");
        if ((S.Modifier.count(o.serverCookieName) > 30)) {
            c.push(Surface.valOut(S.Modifier.substring(o.serverCookieName, 0, 30)));
            c.push("...");
        } else {
            c.push(Surface.valOut(o.serverCookieName));
        }
        c.push('</h1>\n <div class="gamecontrol-close popup-close"></div>\n </div>\n <div id="gamecontrol-map-container">\n');
        l_mapInfo = $S.callFunction("serverguide.mapinfo", o.game, ((typeof (o) != "undefined" && o !== null && typeof (o.serverCookieMapId) != "undefined" && o.serverCookieMapId !== null) ? o.serverCookieMapId : "unknown"), b, kwargs);
        c.push(' <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_mapInfo.imageWide, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n </div>\n <div id="gamecontrol-event-container">\n <div id="gamecontrol-event-data">\n <span>');
        c.push(Surface.valOut("Error"));
        c.push('</span>\n <div id="gamecontrol-snowroller">\n ');
        c.push(Surface.valOut(o.statePrettyName));
        c.push('\n </div>\n </div>\n <div id="gamecontrol-event-loader">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
            c.push(' <img width="16" height="16" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/state_ready.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n');
        } else {
            c.push(' <img width="30" height="30" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading30x30_dark.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n');
        }
        c.push(" <span>!</span>\n </div>\n </div>\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
            c.push(' <input type="button" id="gamecontrol-game-fullscreenButton" class="ga mecontrol-button-right base-button-arrow-large" value="');
            c.push(Surface.valOut("Play"));
            c.push('" />\n');
            o.message = "";
        } else {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.inQueue) != "undefined" && o.inQueue !== null) ? o.inQueue : false)) {
                o.message = "You are currently in queue to play";
            }
        }
        c.push(' <input type="button" id="gamecontrol-game-cancelButton" class="base-button-arrow-large ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false)) {
            c.push("gamecontrol-button-left");
        } else {
            c.push("gamecontrol-button-right");
        }
        c.push('" value="');
        c.push(Surface.valOut("Cancel"));
        c.push('" />\n <div id="gamecontrol-message">\n <p>');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : "You can close this screen and continue to browse the site while the game is loading...")));
        c.push("</p>\n");
        if (!(((typeof (o) != "undefined" && o !== null && typeof (o.askForFullscreen) != "undefined" && o.askForFullscreen !== null) ? o.askForFullscreen : false))) {
            c.push(' <div id="gamecontrol-autoplay">\n <input id="gamecontrol-checkbox-autoplay" type="checkbox" ');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.serverAutoPlay) != "undefined" && o.serverAutoPlay !== null) ? o.serverAutoPlay : "0") == "1")) {
                c.push("checked");
            }
            c.push('/><label id="gamecontrol-info-autoplay" for="gamecontrol-checkbox-autoplay">');
            c.push(Surface.valOut("Go fullscreen when game is ready"));
            c.push("</label>\n </div>\n");
        }
        c.push(' </div>\n <div style="clear:both;"></div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamecontrol.launcher", "surface_3_2", "gamecontrol-event-surface", o, b);
    return c.join("");
};
if (typeof gamemanager == "undefined") {
    var gamemanager = {};
}
var surf_gamemanager_component = new Surface.Component("gamemanager");
surf_gamemanager_component.extend(gamemanager);
gamemanager = surf_gamemanager_component;
var block_gamemanager_coopstate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("coopstate"));
gamemanager.coopstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_coopstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.coopstate");
    c.push("\n");
    c.push(gamemanager.coopstate.surface_3_2.render(o.state, b, kwargs));
    return c.join("");
};
gamemanager.coopstate.surface_3_2 = new Surface.SingleSurface("gamemanager.coopstate.surface_3_2");
gamemanager.coopstate.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_coopstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.coopstate");
    c.push('<surf:container id="');
    c.push("gamemanager-surface-coopState");
    c.push('">');
    var l_levelNameSid;
    var l_session;
    var l_realm;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <div class="gamemanager-invitestate gamemanager-invitestate-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.name) != "undefined" && o.state.name !== null) ? o.state.name : "")));
    c.push('">\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.type) != "undefined" && o.state.type !== null) ? o.state.type : "") != "abort")) {
        c.push(' <div class="gamemanager-invitestate-servername">\n <div class="base-left">\n');
        l_levelNameSid = S.Modifier.get($S.callFunction("coop.coopmission", ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.level) != "undefined" && o.state.level !== null) ? o.state.level : ""), b, kwargs), "title");
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext, {"coopId": o.state.id})));
        c.push('">');
        c.push(Surface.valOut((S.translations[l_levelNameSid] || l_levelNameSid)));
        c.push('</a>\n </div>\n <div class="base-right">\n <div class="gamemanager-invitestate-cancelbutton">\n');
        if ((l_session.user.userId == o.state.ownerId)) {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"text": "Abort","extraLinkId": "gamemanager-coop-cancel"}, null, kwargs));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"text": "Leave","extraLinkId": "gamemanager-coop-cancel"}, null, kwargs));
            c.push("\n");
        }
        c.push(' </div>\n </div>\n <div class="base-clear"></div>\n </div>\n');
    }
    c.push('\n <div class="gamemanager-coopstate-map" style="background:url(');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.lower(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/base/", $S.callFunction("base.section", l_realm.section, b, kwargs)), "/map_images/300x100/"), o.state.level)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push(');">\n <div class="gamemanager-launchstate-maptitle">\n');
    if ((o.state.type == "abort")) {
        c.push(' <div class="gamemanager-launchstate-errorbg">\n </div>\n <div class="base-left">\n CO-OP game aborted\n </div>\n');
    } else {
        c.push("\n");
        if ((o.state.status != o.states.COOP_LAUNCH_PEER)) {
            c.push("\n");
            if (((o.state.status == "ready") && (o.state.friendId != l_session.user.userId))) {
                c.push("\n");
            } else {
                c.push(' <div class="gamemanager-launchstate-loadingbg">\n <div class="common-spinner" data-size="small"></div>\n </div>\n');
            }
            c.push("\n");
        }
        c.push(' <div class="base-left">\n');
        if ((o.state.type == "public")) {
            c.push(" Matchmaking for Public...\n");
        } else {
            if ((o.state.status == "created")) {
                o.coopTitle = "Waiting for Player 2...";
            } else {
                if ((o.state.status == o.states.COOP_HOST_IS_STARTING)) {
                    o.coopTitle = "Host is launching...";
                } else {
                    if ((o.state.status == o.states.COOP_LAUNCH_PEER)) {
                        o.coopTitle = "CO-OP ready, go go go!";
                    } else {
                        if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.friendId) != "undefined" && o.state.friendId !== null) && (o.state.friendId == l_session.user.userId))) {
                            o.coopTitle = "Waiting for host to start...";
                        } else {
                            o.coopTitle = "CO-OP ready";
                        }
                    }
                }
            }
            c.push(" ");
            c.push(Surface.valOut(o.coopTitle));
            c.push("\n");
        }
        c.push(" </div>\n");
        if ((o.state.status == o.states.COOP_LAUNCH_PEER)) {
            c.push(' <div class="gamemanager-coop-start-peer-container">\n <input id="gamemanager-coop-start-peer" type="button" class="base-button-arrow-large" value="Join CO-OP" />\n </div>\n');
        }
        c.push("\n");
    }
    c.push(" </div>\n </div>\n");
    if ((o.state.type != "abort")) {
        c.push(' <div class="gamemanager-invitestate-players">\n <div rel="');
        c.push(Surface.valOut(o.state.ownerId));
        c.push('" class="gamemanager-invitestate-player">\n <div class="gamemanager-invitestate-player-avatar">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.state.owner,"gravatarSize": 22}, null, kwargs));
        c.push('\n </div>\n <div class="gamemanager-invitestate-player-username">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": o.state.owner.username}, null, kwargs));
        c.push('\n </div>\n <div class="gamemanager-invitestate-player-status">\n <div class="base-left gamemanager-invite-img-joining"></div><span class="gamemanager-invite-status-text">Host</span>\n </div>\n </div>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.friendId) != "undefined" && o.state.friendId !== null) && (o.state.friendId > 0))) {
            c.push(' <div rel="');
            c.push(Surface.valOut(o.state.friendId));
            c.push('" class="gamemanager-coopstate-player">\n <div class="gamemanager-invitestate-player-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.state.friend,"gravatarSize": 22}, null, kwargs));
            c.push('\n </div>\n <div class="gamemanager-invitestate-player-username">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": o.state.friend.username}, null, kwargs));
            c.push('\n </div>\n <div class="gamemanager-invitestate-player-status">\n');
            if ((o.state.status != "created")) {
                c.push(' <div class="base-left gamemanager-invite-img-joining"></div><span class="gamemanager-invite-status-text">Ready</span>\n');
            } else {
                c.push(' <div class="base-left gamemanager-invite-img-waiting"></div><span class="gamemanager-invite-status-text">Waiting...</span>\n');
            }
            c.push(" </div>\n");
            if (((l_session.user.userId == o.state.ownerId) && (o.state.status == "created"))) {
                c.push(' <div class="gamemanager-coopstate-resend-invite">\n <input id="gamemanager-coopstate-resend-invite-button" type="button" value="Resend invite" class="base-button-100x24-grey"/>\n </div>\n');
            }
            c.push(" </div>\n");
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    if ((o.state.type == "abort")) {
        c.push(' <div class="gamemanager-invitestate-startjoinhost">\n <input type="button" id="gamemanager-state-close" class="base-button-arrow-small-grey" value="Close"/>\n </div>\n');
    } else {
        if ((o.state.type == "public")) {
            c.push(' <div class="gamemanager-invitestate-startjoinhost">\n ');
            c.push(Surface.valOut("Searching for a second player..."));
            c.push("\n </div>\n");
        } else {
            if ((((o.state.status == "ready") && (typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.friendId) != "undefined" && o.state.friendId !== null)) && (o.state.friendId != l_session.user.userId))) {
                c.push(' <div class="gamemanager-invitestate-startjoinhost">\n <form method="POST" class="gamemanager-coopstate-startjoin-form" action="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/levelStarted/{coopId}/", Surface.urlContext, {"coopId": o.state.id})));
                c.push('">\n ');
                c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
                c.push('\n <input type="submit" class="base-button-arrow-large" value="Launch CO-OP" />\n </form>\n </div>\n');
            }
        }
    }
    c.push(' <div class="base-clear"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamemanager.coopstate", "surface_3_2", "gamemanager-surface-coopState", o, b);
    return c.join("");
};
var block_gamemanager_gamestate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("gamestate"));
gamemanager.gamestate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_gamestate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.gamestate");
    c.push('\n<div class="gamemanager-state ');
    if ((o.state.gameState.name == o.states.GAME_OK)) {
        c.push("success");
    } else {
        c.push("fail");
    }
    c.push(' gamemanager-gamestate">\n <div class="gamemanager-gamestate-main">\n <div class="gamemanager-game-icon">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", o.state.gameState.game, Surface.globalContext.staticContext.platforms.PC, 0, b, kwargs)));
    c.push('"></span>\n </div>\n <div class="gamemanager-plugin-right">\n <div class="gamemanager-title">\n ');
    c.push(Surface.valOut("Game"));
    c.push(": ");
    c.push(Surface.valOut($S.callFunction("base.gameTitle", o.state.gameState.game, b, kwargs)));
    c.push('\n </div>\n <div class="gamemanager-gamestate-right">\n');
    if ((o.state.gameState.name == o.states.GAME_OK)) {
        c.push(" ");
        c.push(Surface.valOut("Game is up to date."));
        c.push("\n");
    } else {
        if ((o.state.gameState.name == o.states.GAME_INSTALLING)) {
            c.push(" ");
            c.push(Surface.valOut("Installing game"));
            c.push("\n");
        } else {
            if ((o.state.gameState.name == o.states.GAME_NOT_OWNED)) {
                c.push(" ");
                c.push(Surface.valOut("Buy the game to join the action!"));
                c.push("\n");
            } else {
                if ((o.state.gameState.name == o.states.GAME_NOT_INSTALLED)) {
                    c.push(" ");
                    c.push(Surface.valOut("Game not found."));
                    c.push("\n");
                } else {
                    if ((o.state.gameState.name == o.states.GAME_NOT_UPTODATE)) {
                        c.push(" ");
                        c.push(Surface.valOut("Update available."));
                        c.push("\n");
                    } else {
                        if (((o.state.pluginState.name == o.states.PLUGIN_OK) && (o.state.gameState.name == o.states.GAME_CANT_PROBE))) {
                            c.push(" ");
                            c.push(Surface.valOut("Could not verify the game."));
                            c.push("\n");
                        } else {
                            if ((o.state.gameState.name == o.states.GAME_CANT_PROBE)) {
                                c.push(" ");
                                c.push(Surface.valOut("Status N/A, install the plugin first."));
                                c.push("\n");
                            } else {
                                if ((o.state.gameState.name == o.states.GAME_INVALID_PERSONA)) {
                                    c.push(" Change active soldier to a PC-soldier\n");
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push(" </div>\n");
    if ((o.state.gameState.name == o.states.GAME_NOT_OWNED)) {
        c.push(' <div class="gamemanager-gamestate-notowned"></div>\n');
    }
    if (((o.state.gameState.name == o.states.GAME_NOT_UPTODATE) || (o.state.gameState.name == o.states.GAME_NOT_INSTALLED))) {
        if ((o.state.gameState.game == Surface.globalContext.staticContext.games.BF3)) {
            c.push(' <div class="gamemanager-pluginstate-missing-button">\n');
            if ((o.state.gameState.name == o.states.GAME_NOT_INSTALLED)) {
                c.push(' <input type="button" id="gamemanager-gamestate-install" class="base-button-arrow-small-grey" value="');
                c.push(Surface.valOut("Install"));
                c.push('" />\n');
            } else {
                c.push(' <input type="button" id="gamemanager-gamestate-update" class="base-button-arrow-small-grey" value="');
                c.push(Surface.valOut("Update"));
                c.push('" />\n');
            }
            c.push(" </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n');
    if ((o.state.gameState.name == o.states.GAME_INSTALLING)) {
        c.push(' <div class="gamemanager-pluginstate-text gamemanager-gamestate-finish ">\n ');
        c.push(Surface.valOut("Waiting for you to finish the installation..."));
        c.push('\n <div class="gamemanager-pluginstate-finish-download">\n <a id="gamemananger-pluginstate-cancel-installation" href="#">');
        c.push(Surface.valOut("Cancel"));
        c.push("</a>\n </div>\n </div>\n");
    }
    c.push("\n </div>\n</div>\n");
    return c.join("");
};
var block_gamemanager_index = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("index"));
gamemanager.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.index");
    c.push('\n<div id="gamemanager-taskbar">\n <div id="gamemanager-taskbar-bubble" class="tipsy tipsy-s">\n <div class="tipsy-arrow"></div>\n <div class="tipsy-inner">');
    c.push(Surface.valOut("Update available."));
    c.push('</div>\n </div>\n <div id="gamemanager-taskbar-state"></div>\n ');
    c.push(Surface.importTemplate(("gamemanager" + ("." + "taskbarbutton")), o, null, kwargs));
    c.push("\n</div>\n");
    return c.join("");
};
var block_gamemanager_installstate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("installstate"));
gamemanager.installstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_installstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.installstate");
    c.push('\n<div class="gamemanager-state ');
    if ((o.state.gameState.name == o.states.GAME_OK)) {
        c.push("success");
    } else {
        c.push("fail");
    }
    c.push(' gamemanager-gamestate">\n <div class="gamemanager-gamestate-main">\n <div class="gamemanager-game-icon">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", o.state.gameState.game, Surface.globalContext.staticContext.platforms.PC, 0, b, kwargs)));
    c.push('"></span>\n </div>\n <div class="gamemanager-plugin-right">\n <div class="gamemanager-title">\n Game: ');
    c.push(Surface.valOut($S.callFunction("base.gameTitle", o.state.gameState.game, b, kwargs)));
    c.push('\n </div>\n <div class="gamemanager-gamestate-right">\n Game not up to date.\n </div>\n <div class="gamemanager-pluginstate-missing-button">\n');
    if ((o.state.gameState.name == o.states.GAME_NOT_INSTALLED)) {
        c.push(' <input type="button" id="gamemanager-installstate-install" class="base-button-arrow-small-grey" value="Install" />\n');
    } else {
        c.push(' <input type="button" id="gamemanager-installstate-update" class="base-button-arrow-small-grey" value="Update" />\n');
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n</div>\n');
    return c.join("");
};
var block_gamemanager_invitestate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("invitestate"));
gamemanager.invitestate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_invitestate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.invitestate");
    c.push("\n");
    c.push(gamemanager.invitestate.surface_3_2.render(o.state, b, kwargs));
    return c.join("");
};
gamemanager.invitestate.surface_3_2 = new Surface.SingleSurface("gamemanager.invitestate.surface_3_2");
gamemanager.invitestate.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_invitestate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.invitestate");
    c.push('<surf:container id="');
    c.push("gamemanager-surface-inviteState");
    c.push('">');
    var l_session;
    var l_for_gamemanager_invitestate_31_13_list;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div class="gamemanager-invitestate gamemanager-invitestate-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.name) != "undefined" && o.state.name !== null) ? o.state.name : "")));
    c.push('">\n <div class="gamemanager-invitestate-servername">\n <div class="base-left gamemanager-invitestate-serverarea">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.platoon) != "undefined" && o.state.platoon !== null)) {
        c.push(" ");
        c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.state.platoon.id,"extraClass": "comcenter-platoonbadge","bp": o.state.platoon.badgePath,"size": 26}, null, kwargs));
        c.push(" Platoon Join:\n");
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null) ? o.state.server : false)) {
            c.push(" ");
            c.push(Surface.valOut("Party Join"));
            c.push(': <a href="');
            c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.state.server.guid, o.state.server.name, b, kwargs)));
            c.push('"> ');
            c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.state.server.name}, null, kwargs));
            c.push("</a>\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut("Party Join Quick Match"));
            c.push("\n");
        }
    }
    c.push('\n </div>\n <div class="base-right">\n <div class="gamemanager-invitestate-cancelbutton">\n');
    if ((l_session.user.userId == o.state.hostUserId)) {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"text": "Abort","extraLinkId": "gamemanager-invite-cancel"}, null, kwargs));
        c.push("\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"text": "Leave","extraLinkId": "gamemanager-invite-cancel"}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="gamemanager-invitestate-players">\n');
    l_for_gamemanager_invitestate_31_13_list = ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.players) != "undefined" && o.state.players !== null) ? o.state.players : []);
    if ((S.Modifier.count(l_for_gamemanager_invitestate_31_13_list) > 0)) {
        for (var l_for_gamemanager_invitestate_31_13_key in l_for_gamemanager_invitestate_31_13_list) {
            if (!Surface.isValidLoopItem(l_for_gamemanager_invitestate_31_13_list[l_for_gamemanager_invitestate_31_13_key])) {
                continue;
            }
            var l_player = l_for_gamemanager_invitestate_31_13_list[l_for_gamemanager_invitestate_31_13_key];
            c.push(' <div rel="');
            c.push(Surface.valOut(l_player.userId));
            c.push('" class="gamemanager-invitestate-player">\n <div class="gamemanager-invitestate-player-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_player.user,"gravatarSize": 22}, null, kwargs));
            c.push('\n </div>\n <div class="gamemanager-invitestate-player-username">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": l_player.user.username}, null, kwargs));
            c.push('\n </div>\n <div class="gamemanager-invitestate-player-status">\n');
            if ((l_player.userId == o.state.hostUserId)) {
                c.push(' <div class="base-left gamemanager-invite-img-joining"></div><span class="gamemanager-invite-status-text">');
                c.push(Surface.valOut("Host"));
                c.push("</span>\n");
            } else {
                if ((l_player.inviteStatus == o.states.INVITE_WAITING)) {
                    c.push(' <div class="base-left gamemanager-invite-img-waiting"></div><span class="gamemanager-invite-status-text">');
                    c.push(Surface.valOut("Waiting..."));
                    c.push("</span>\n");
                } else {
                    if ((l_player.inviteStatus == o.states.INVITE_DECLINED)) {
                        c.push(' <div class="base-left gamemanager-invite-img-declined"></div><span class="gamemanager-invite-status-text">');
                        c.push(Surface.valOut("Declined"));
                        c.push("</span>\n");
                    } else {
                        if ((l_player.inviteStatus == o.states.INVITE_ACCEPTED)) {
                            c.push(' <div class="base-left gamemanager-invite-img-joining"></div><span class="gamemanager-invite-status-text">');
                            c.push(Surface.valOut("Ready"));
                            c.push("</span>\n");
                        }
                    }
                }
            }
            c.push(" </div>\n");
            if (((l_session.user.userId == o.state.hostUserId) && (l_player.userId != o.state.hostUserId))) {
                c.push(' <div class="gamemanager-invitestate-player-kick"></div>\n');
            }
            c.push(" </div>\n");
        }
    }
    c.push(" </div>\n");
    if ((l_session.user.userId == o.state.hostUserId)) {
        c.push(' <input id="gamemanager-groupjoin-current-guid" type="hidden" value="');
        c.push(Surface.valOut(S.Modifier.get(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null) ? o.state.server : {}), "guid", "quickmatch")));
        c.push('" getGroupUrl="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/getGroup/", Surface.urlContext)));
        c.push('" />\n <div class="gamemanager-invitestate-startjoin">\n <form onsubmit="return false;" class="noajax-form gamemanager-invitestate-startjoin-form" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/joinGroupToServer/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push("\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.platoon) != "undefined" && o.state.platoon !== null)) {
            c.push(' <input type="button" class="base-button-arrow-large" value="');
            c.push(Surface.valOut("Join with Platoon"));
            c.push('" />\n');
        } else {
            c.push(' <input type="button" class="base-button-arrow-large" value="');
            c.push(Surface.valOut("Join with Party"));
            c.push('" />\n');
        }
        c.push(" </form>\n </div>\n");
    } else {
        c.push(' <div class="gamemanager-invitestate-startjoinhost">\n');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.platoon) != "undefined" && o.state.platoon !== null)) {
            c.push(" ");
            c.push(Surface.valOut("Waiting for the host to start Platoon Join."));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut("Waiting for the host to start Party Join."));
            c.push("\n");
        }
        c.push(" </div>\n");
    }
    c.push('\n <div class="base-clear"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamemanager.invitestate", "surface_3_2", "gamemanager-surface-inviteState", o, b);
    return c.join("");
};
var block_gamemanager_launchstate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("launchstate"));
gamemanager.launchstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_launchstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.launchstate");
    c.push("\n");
    if ((o.state.launcherState.name == o.states.LAUNCH_READY)) {
        c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_3_6, kwargs));
        c.push("\n");
    } else {
        if ((o.state.launcherState.name == o.states.LAUNCH_READY_WITH_TIMER)) {
            c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_19_6, kwargs));
            c.push("\n");
        } else {
            if ((o.state.launcherState.name == o.states.LAUNCH_CLOSED_DOWN)) {
                c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_39_6, kwargs));
                c.push("\n");
            } else {
                if ((o.state.launcherState.name == o.states.LAUNCH_QUEUE)) {
                    c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_60_6, kwargs));
                } else {
                    if ((o.state.launcherState.name == o.states.LAUNCH_INFO)) {
                        c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_89_6, kwargs));
                        c.push("\n");
                    } else {
                        if ((o.state.launcherState.name == o.states.LAUNCH_INFOABORT)) {
                            c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_104_6, kwargs));
                        } else {
                            if ((o.state.launcherState.name == o.states.LAUNCH_ERROR)) {
                                c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_123_6, kwargs));
                            } else {
                                if ((o.state.launcherState.name == o.states.LAUNCH_CANCELLING)) {
                                    c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_144_6, kwargs));
                                } else {
                                    c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstatebase")), o, block_gamemanager_launchstate_use_167_6, kwargs));
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return c.join("");
};
var block_gamemanager_launchstate_use_167_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footerContainer": "gamemanager.launchstate._use_167_6_block_footerContainer","checkboxes": "gamemanager.launchstate._use_167_6_block_checkboxes"});
var block_gamemanager_launchstate_use_144_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footer": "gamemanager.launchstate._use_144_6_block_footer","inviteToServer": "gamemanager.launchstate._use_144_6_block_inviteToServer","server": "gamemanager.launchstate._use_144_6_block_server","mapTitle": "gamemanager.launchstate._use_144_6_block_mapTitle","checkboxes": "gamemanager.launchstate._use_144_6_block_checkboxes","extraMapInfo": "gamemanager.launchstate._use_144_6_block_extraMapInfo","platoon": "gamemanager.launchstate._use_144_6_block_platoon"});
var block_gamemanager_launchstate_use_123_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footer": "gamemanager.launchstate._use_123_6_block_footer","inviteToServer": "gamemanager.launchstate._use_123_6_block_inviteToServer","server": "gamemanager.launchstate._use_123_6_block_server","mapTitle": "gamemanager.launchstate._use_123_6_block_mapTitle","checkboxes": "gamemanager.launchstate._use_123_6_block_checkboxes","extraMapInfo": "gamemanager.launchstate._use_123_6_block_extraMapInfo"});
var block_gamemanager_launchstate_use_104_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footer": "gamemanager.launchstate._use_104_6_block_footer"});
var block_gamemanager_launchstate_use_89_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"mapTitle": "gamemanager.launchstate._use_89_6_block_mapTitle","extraMapInfo": "gamemanager.launchstate._use_89_6_block_extraMapInfo"});
var block_gamemanager_launchstate_use_60_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footerContainer": "gamemanager.launchstate._use_60_6_block_footerContainer","mapTitle": "gamemanager.launchstate._use_60_6_block_mapTitle","extraMapInfo": "gamemanager.launchstate._use_60_6_block_extraMapInfo"});
var block_gamemanager_launchstate_use_39_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footer": "gamemanager.launchstate._use_39_6_block_footer","inviteToServer": "gamemanager.launchstate._use_39_6_block_inviteToServer","server": "gamemanager.launchstate._use_39_6_block_server","mapTitle": "gamemanager.launchstate._use_39_6_block_mapTitle","checkboxes": "gamemanager.launchstate._use_39_6_block_checkboxes","extraMapInfo": "gamemanager.launchstate._use_39_6_block_extraMapInfo"});
var block_gamemanager_launchstate_use_19_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"footerContainer": "gamemanager.launchstate._use_19_6_block_footerContainer","mapTitle": "gamemanager.launchstate._use_19_6_block_mapTitle","extraMapInfo": "gamemanager.launchstate._use_19_6_block_extraMapInfo"});
var block_gamemanager_launchstate_use_3_6 = new Surface.BlockConfig("gamemanager.launchstatebase", {"mapTitle": "gamemanager.launchstate._use_3_6_block_mapTitle","extraMapInfo": "gamemanager.launchstate._use_3_6_block_extraMapInfo"});
gamemanager.launchstate._use_3_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_3_6_block_mapTitle");
gamemanager.launchstate._use_3_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="base-left">\n ');
    c.push(Surface.valOut("Game ready!"));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_3_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_3_6_block_extraMapInfo");
gamemanager.launchstate._use_3_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gameready">\n <div class="gamemanager-launchstate-gameready-button">\n <input id="gamemanager-launchstate-launchbutton" type="button" class="base-button-arrow-large" value="');
    c.push(Surface.valOut("Go to game"));
    c.push('" />\n </div>\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_19_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_19_6_block_mapTitle");
gamemanager.launchstate._use_19_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gamereadybg">\n </div>\n <div class="base-left gamemanager-queue-text">\n ');
    c.push(Surface.valOut("Server slot reserved"));
    c.push(' (<span class="timer_time"></span>)\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_19_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_19_6_block_extraMapInfo");
gamemanager.launchstate._use_19_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gameready">\n <div class="gamemanager-launchstate-gameready-button">\n <input id="gamemanager-launchstate-timer-launchbutton" type="button" class="base-button-arrow-large" value="');
    c.push(Surface.valOut("Join server"));
    c.push('" />\n <input id="gamemanager-state-close" type="button" class="gamemanager-state-close-hidden base-button-arrow-small-grey" value="');
    c.push(Surface.valOut("Close"));
    c.push('"/>\n </div>\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_19_6_block_footerContainer = new Surface.Block("gamemanager.launchstate._use_19_6_block_footerContainer");
gamemanager.launchstate._use_19_6_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_checkboxes = new Surface.Block("gamemanager.launchstate._use_39_6_block_checkboxes");
gamemanager.launchstate._use_39_6_block_checkboxes.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_server = new Surface.Block("gamemanager.launchstate._use_39_6_block_server");
gamemanager.launchstate._use_39_6_block_server.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_39_6_block_mapTitle");
gamemanager.launchstate._use_39_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gamereadybg">\n </div>\n <div class="base-left">\n ');
    c.push(Surface.valOut("Game closed down."));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_39_6_block_extraMapInfo");
gamemanager.launchstate._use_39_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_footer = new Surface.Block("gamemanager.launchstate._use_39_6_block_footer");
gamemanager.launchstate._use_39_6_block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-footer">\n ');
    c.push(Surface.valOut("You can close the Game Manager."));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_39_6_block_inviteToServer = new Surface.Block("gamemanager.launchstate._use_39_6_block_inviteToServer");
gamemanager.launchstate._use_39_6_block_inviteToServer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_60_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_60_6_block_mapTitle");
gamemanager.launchstate._use_60_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-loadingbg">\n <div class="common-spinner" data-size="small"></div>\n </div>\n <div class="base-left gamemanager-queue-text">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.queue) != "undefined" && o.state.launcherState.queue !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.queue) != "undefined" && o.state.launcherState.queue !== null && typeof (o.state.launcherState.queue.beforeYou) != "undefined" && o.state.launcherState.queue.beforeYou !== null))) {
        if ((o.state.launcherState.queue.beforeYou == 0)) {
            c.push(" ");
            c.push(Surface.valOut("You are first in queue!"));
            c.push("\n");
        } else {
            if ((o.state.launcherState.queue.beforeYou == 1)) {
                c.push(" ");
                c.push(Surface.valOut("2nd place in queue"));
                c.push("\n");
            } else {
                if ((o.state.launcherState.queue.beforeYou == 2)) {
                    c.push(" ");
                    c.push(Surface.valOut("3rd place in queue"));
                    c.push("\n");
                } else {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.replace("Place in queue: [num]", "[num]", S.Modifier.concat((o.state.launcherState.queue.beforeYou + 1), ""))));
                    c.push("\n");
                }
            }
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_60_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_60_6_block_extraMapInfo");
gamemanager.launchstate._use_60_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gameready">\n <div class="gamemanager-launchstate-gameready-button">\n <input id="gamecontrol-game-leavequeuebutton" type="button" class="base-button-arrow-large" value="Leave queue" />\n </div>\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_60_6_block_footerContainer = new Surface.Block("gamemanager.launchstate._use_60_6_block_footerContainer");
gamemanager.launchstate._use_60_6_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_89_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_89_6_block_mapTitle");
gamemanager.launchstate._use_89_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((o.state.launcherState.gameState != "State_Game")) {
        c.push(' <div class="gamemanager-launchstate-loadingbg">\n <div class="common-spinner" data-size="small"></div>\n </div>\n');
    }
    c.push(' <div class="base-left">\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.gameStatePretty) != "undefined" && o.state.launcherState.gameStatePretty !== null) ? o.state.launcherState.gameStatePretty : ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.gameState) != "undefined" && o.state.launcherState.gameState !== null) ? o.state.launcherState.gameState : "no state found"))));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_89_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_89_6_block_extraMapInfo");
gamemanager.launchstate._use_89_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_104_6_block_footer = new Surface.Block("gamemanager.launchstate._use_104_6_block_footer");
gamemanager.launchstate._use_104_6_block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-infoabort">\n <div class="gamemanager-launchstate-infoabort-title">\n ');
    c.push(Surface.valOut("You have been waiting for a long time"));
    c.push('\n </div>\n <div class="gamemanager-launchstate-infoabort-subtitle">\n ');
    c.push(Surface.valOut("What would you like to to?"));
    c.push('\n </div>\n <input id="gamemanager-tryagain-button" class="base-button-arrow-large" value="');
    c.push(Surface.valOut("Try again"));
    c.push('"/>\n <div class="gamemanager-launchstate-infoabort-keeptrying">\n <a id="gamemanager-keep-trying-button">');
    c.push(Surface.valOut("Keep waiting"));
    c.push('</a>\n </div>\n <div class=""></div>\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_checkboxes = new Surface.Block("gamemanager.launchstate._use_123_6_block_checkboxes");
gamemanager.launchstate._use_123_6_block_checkboxes.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_123_6_block_mapTitle");
gamemanager.launchstate._use_123_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <h2 class="gamemanager-launchstate-errorheader">ERROR!</h2>\n');
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_server = new Surface.Block("gamemanager.launchstate._use_123_6_block_server");
gamemanager.launchstate._use_123_6_block_server.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_123_6_block_extraMapInfo");
gamemanager.launchstate._use_123_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-gameready">\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.errorMessage) != "undefined" && o.state.launcherState.errorMessage !== null) ? o.state.launcherState.errorMessage : "")));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_footer = new Surface.Block("gamemanager.launchstate._use_123_6_block_footer");
gamemanager.launchstate._use_123_6_block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-footer">\n <div class="gamemanager-state-center">\n <input type="button" id="gamemanager-state-close" class="base-button-arrow-small-grey" value="');
    c.push(Surface.valOut("Close"));
    c.push('"/>\n </div>\n </div>\n');
    return c.join("");
};
gamemanager.launchstate._use_123_6_block_inviteToServer = new Surface.Block("gamemanager.launchstate._use_123_6_block_inviteToServer");
gamemanager.launchstate._use_123_6_block_inviteToServer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_server = new Surface.Block("gamemanager.launchstate._use_144_6_block_server");
gamemanager.launchstate._use_144_6_block_server.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_platoon = new Surface.Block("gamemanager.launchstate._use_144_6_block_platoon");
gamemanager.launchstate._use_144_6_block_platoon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_checkboxes = new Surface.Block("gamemanager.launchstate._use_144_6_block_checkboxes");
gamemanager.launchstate._use_144_6_block_checkboxes.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_mapTitle = new Surface.Block("gamemanager.launchstate._use_144_6_block_mapTitle");
gamemanager.launchstate._use_144_6_block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-loadingbg">\n <div class="common-spinner" data-size="small"></div>\n </div>\n <div class="base-left">\n ');
    c.push(Surface.valOut("Cancelling..."));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_extraMapInfo = new Surface.Block("gamemanager.launchstate._use_144_6_block_extraMapInfo");
gamemanager.launchstate._use_144_6_block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_footer = new Surface.Block("gamemanager.launchstate._use_144_6_block_footer");
gamemanager.launchstate._use_144_6_block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="gamemanager-launchstate-footer">\n ');
    c.push(Surface.valOut("Shutting down the game..."));
    c.push("\n </div>\n");
    return c.join("");
};
gamemanager.launchstate._use_144_6_block_inviteToServer = new Surface.Block("gamemanager.launchstate._use_144_6_block_inviteToServer");
gamemanager.launchstate._use_144_6_block_inviteToServer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_167_6_block_footerContainer = new Surface.Block("gamemanager.launchstate._use_167_6_block_footerContainer");
gamemanager.launchstate._use_167_6_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstate._use_167_6_block_checkboxes = new Surface.Block("gamemanager.launchstate._use_167_6_block_checkboxes");
gamemanager.launchstate._use_167_6_block_checkboxes.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_gamemanager_launchstatebase = new Surface.BlockConfig("", {"footer": "gamemanager.launchstatebase.block_footer","inviteToServer": "gamemanager.launchstatebase.block_inviteToServer","server": "gamemanager.launchstatebase.block_server","mapTitle": "gamemanager.launchstatebase.block_mapTitle","checkboxes": "gamemanager.launchstatebase.block_checkboxes","extraMapInfo": "gamemanager.launchstatebase.block_extraMapInfo","platoon": "gamemanager.launchstatebase.block_platoon"});
gamemanager.addTemplate(new Surface.Template("launchstatebase"));
gamemanager.launchstatebase.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_launchstatebase;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.launchstatebase");
    c.push("\n");
    c.push('\n<div class="gamemanager-launchstate gamemanager-launchstate-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.name) != "undefined" && o.state.launcherState.name !== null) ? o.state.launcherState.name : "")));
    c.push('">\n <div class="gamemanager-launchstate-servername">\n');
    c.push(b.get("server")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("checkboxes")(o, b, kwargs));
    c.push(b.get("platoon")(o, b, kwargs));
    c.push(' <div class="gamemanager-launchstate-map" style="background-image: url(/public/base/');
    c.push(Surface.valOut($S.callFunction("base.game", ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.currentGame) != "undefined" && o.state.launcherState.currentGame !== null) ? o.state.launcherState.currentGame : Surface.globalContext.staticContext.games.BF3), b, kwargs)));
    c.push("/map_images/300x100/");
    c.push(Surface.valOut(S.Modifier.lower(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.currentLevel) != "undefined" && o.state.launcherState.currentLevel !== null) ? o.state.launcherState.currentLevel : "sp_menu"))));
    c.push('.jpg);">\n <div class="gamemanager-launchstate-maptitle">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.logoShow) != "undefined" && o.state.launcherState.logoShow !== null)) {
        c.push(' <div class="gamemanager-launchstate-logo-container">\n <div class="gamemanager-launchstate-logo logo-');
        c.push(Surface.valOut(o.state.launcherState.logoShow));
        c.push('"></div>\n </div>\n');
    }
    c.push(b.get("mapTitle")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("extraMapInfo")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("footer")(o, b, kwargs));
    c.push("\n");
    c.push(b.get("inviteToServer")(o, b, kwargs));
    c.push(' <div class="base-clear"></div>\n</div>');
    return c.join("");
};
gamemanager.launchstatebase.block_server = new Surface.Block("gamemanager.launchstatebase.block_server");
gamemanager.launchstatebase.block_server.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_missionNameSid;
    c.push(' <div class="base-left gamemanager-launchstate-servername-title">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.server) != "undefined" && o.state.launcherState.server !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.server) != "undefined" && o.state.launcherState.server !== null && typeof (o.state.launcherState.server.guid) != "undefined" && o.state.launcherState.server.guid !== null))) {
        c.push(' <span class="gamemanager-launchstate-server"></span> <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.state.launcherState.server.guid, o.state.launcherState.server.name, b, kwargs)));
        c.push('">');
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.state.launcherState.server.name}, null, kwargs));
        c.push("</a>\n");
    } else {
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.coopState) != "undefined" && o.state.coopState !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.coopState) != "undefined" && o.state.coopState !== null && typeof (o.state.coopState.name) != "undefined" && o.state.coopState.name !== null)) && !((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.title) != "undefined" && o.state.launcherState.title !== null)))) {
            l_missionNameSid = S.Modifier.get($S.callFunction("coop.coopmission", o.state.coopState.level, b, kwargs), "title");
            c.push(' <span class="gamemanager-launchstate-server"></span><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut((S.translations[l_missionNameSid] || l_missionNameSid)));
            c.push("</a>\n");
        } else {
            if ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.title) != "undefined" && o.state.launcherState.title !== null)) {
                c.push(' <span class="gamemanager-launchstate-server"></span><span class="gamemanager-launchstate-title">');
                c.push(Surface.valOut(o.state.launcherState.title));
                c.push("</span>\n");
            }
        }
    }
    c.push(' </div>\n <div class="base-right">\n');
    if ((!((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.hideCloseButton) != "undefined" && o.state.launcherState.hideCloseButton !== null)) || !(o.state.launcherState.hideCloseButton))) {
        c.push(' <div class="gamemanager-launchstate-cancelbutton">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "cleanbutton")), {"text": "Close game","extraLinkId": "gamemanager-launch-cancel"}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
gamemanager.launchstatebase.block_checkboxes = new Surface.Block("gamemanager.launchstatebase.block_checkboxes");
gamemanager.launchstatebase.block_checkboxes.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((!((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.hideCloseButton) != "undefined" && o.state.launcherState.hideCloseButton !== null)) || !(o.state.launcherState.hideCloseButton))) {
        c.push(' <div class="gamemanager-launchstate-checkboxes">\n <input ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.checkboxes) != "undefined" && o.state.checkboxes !== null) && S.Modifier.get(o.state.checkboxes, "gamemanager-launchstate-fullscreen", false))) {
            c.push("checked");
        }
        c.push(' type="checkbox" id="gamemanager-launchstate-fullscreen" class="gamemanager-checkbox"><label for="gamemanager-launchstate-fullscreen">');
        c.push(Surface.valOut("Go to game when ready"));
        c.push("</label>\n </div>\n");
    }
    return c.join("");
};
gamemanager.launchstatebase.block_platoon = new Surface.Block("gamemanager.launchstatebase.block_platoon");
gamemanager.launchstatebase.block_platoon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null) && (typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.activePlatoon) != "undefined" && Surface.globalContext.userContext.activePlatoon !== null)) && !(S.Modifier.get(o.state.launcherState, "hidePlatoonRepresenting", false)))) {
        c.push(' <div class="gamemanager-launchstate-platoon">\n <div class="gamemanager-launchstate-platoon-badge">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": Surface.globalContext.userContext.activePlatoon.id})));
        c.push('">\n ');
        c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": Surface.globalContext.userContext.activePlatoon.id,"bp": Surface.globalContext.userContext.activePlatoon.badgePath,"size": 26,"noLink": true}, null, kwargs));
        c.push('\n </a>\n </div>\n <h1>Representing</h1>\n <table border="0" cellpadding="0" cellspacing="0" class="gamemanager-launchstate-platoon-title"><tr><td>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": Surface.globalContext.userContext.activePlatoon.id})));
        c.push('">');
        c.push(Surface.valOut(Surface.globalContext.userContext.activePlatoon.name));
        c.push("</a>\n </td></tr></table>\n </div>\n");
    }
    return c.join("");
};
gamemanager.launchstatebase.block_mapTitle = new Surface.Block("gamemanager.launchstatebase.block_mapTitle");
gamemanager.launchstatebase.block_mapTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstatebase.block_extraMapInfo = new Surface.Block("gamemanager.launchstatebase.block_extraMapInfo");
gamemanager.launchstatebase.block_extraMapInfo.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstatebase.block_footer = new Surface.Block("gamemanager.launchstatebase.block_footer");
gamemanager.launchstatebase.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gamemanager.launchstatebase.block_inviteToServer = new Surface.Block("gamemanager.launchstatebase.block_inviteToServer");
gamemanager.launchstatebase.block_inviteToServer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (S.Modifier.get(o.state.launcherState, "server", false)) {
        c.push(' <div id="gamemanager-invite-dropzone" class="gamemanager-dropzone">\n <div class="gamemanager-dropzone-text">');
        c.push(Surface.valOut("Drop a friend from the Com Center to invite."));
        c.push('</div>\n </div>\n <div style="clear: both;"></div>\n');
    }
    return c.join("");
};
var block_gamemanager_patcherstate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("patcherstate"));
gamemanager.patcherstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_patcherstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.patcherstate");
    c.push('\n<div class="gamemanager-state ');
    if ((o.state.patcherState.name == o.states.PATCHER_OK)) {
        c.push("success");
    } else {
        c.push("fail");
    }
    c.push(' gamemanager-pluginstate">\n <div class="gamemanager-plugin-content">\n <div class="gamemanager-plugin-top">\n <div class="gamemanager-plugin-icon"></div>\n <div class="gamemanager-plugin-right">\n <div class="gamemanager-title">\n Origin\n </div>\n');
    if ((o.state.patcherState.name == o.states.PATCHER_CANT_PROBE)) {
        c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
        c.push(Surface.valOut("Install the browser plugin first"));
        c.push("\n </div>\n </div>\n");
    } else {
        if ((o.state.patcherState.name == o.states.PATCHER_MISSING)) {
            c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
            c.push(Surface.valOut("Install"));
            c.push(' Origin\n </div>\n </div>\n <div class="gamemanager-pluginstate-missing-button">\n <input id="gamemanager-patcher-state-install" type="button" class="base-button-arrow-small-grey" value="');
            c.push(Surface.valOut("Download"));
            c.push('" />\n </div>\n');
        } else {
            if ((o.state.patcherState.name == o.states.PATCHER_INSTALLING)) {
                c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
                c.push(Surface.valOut("Installing"));
                c.push(" Origin...\n </div>\n </div>\n");
            }
        }
    }
    c.push(" </div>\n");
    if ((o.state.patcherState.name == o.states.PATCHER_INSTALLING)) {
        c.push(' <div class="gamemanager-pluginstate-text gamemanager-pluginstate-finish">\n ');
        c.push(Surface.valOut("Waiting for you to finish the installation..."));
        c.push('\n <div class="gamemanager-pluginstate-finish-download">\n <a id="gamemananger-pluginstate-cancel-installation" href="#">');
        c.push(Surface.valOut("Cancel"));
        c.push("</a>\n </div>\n </div>\n");
    }
    if ((o.state.patcherState.name == o.states.PATCHER_OK)) {
        c.push(' <div class=" gamemanager-pluginstate-ok">\n <div class="gamemanager-pluginstate-text-ok">\n Origin ');
        c.push(Surface.valOut("is up to date."));
        c.push("\n </div>\n </div>\n");
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
var block_gamemanager_pluginhelp = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("pluginhelp"));
gamemanager.pluginhelp.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_pluginhelp;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.pluginhelp");
    c.push('\n<div class="gamemanager-plugin-help">\n <div class="comcenter-notification-title">\n ');
    c.push(Surface.valOut("Finish the installation"));
    c.push('\n <div id="gamemananger-pluginstate-cancel-installation" class="gamemanager-plugin-close">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n <div class="gamemanager-plugin-step">\n <div class="gamemanager-plugin-stepicon">1</div>\n <div class="gamemanager-plugin-text">\n <span class="gamemanager-plugin-title">');
    c.push(Surface.valOut('Click "Save" to set up'));
    c.push('</span>\n <div class="gamemanager-plugin-description">');
    c.push(Surface.valOut("Can't see it?"));
    c.push(' <a class="gamemanager-plugin-download-again" href="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(Surface.globalContext.staticContext.pluginDownloadUrl, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('">');
    c.push(Surface.valOut("Download again"));
    c.push('</a></div>\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="gamemanager-plugin-step">\n <div class="gamemanager-plugin-stepicon">2</div>\n <div class="gamemanager-plugin-text">\n <span class="gamemanager-plugin-title">');
    c.push(Surface.valOut("Run the downloaded file"));
    c.push('</span>\n <span class="gamemanager-plugin-subtitle">');
    c.push(Surface.valOut("and follow the instructions"));
    c.push('</span>\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="gamemanager-plugin-step last-one">\n <div class="gamemanager-plugin-stepicon">3</div>\n <div class="gamemanager-plugin-text">\n <span class="gamemanager-plugin-title">');
    c.push(Surface.valOut("Once setup is complete,"));
    c.push('</span>\n <span class="gamemanager-plugin-subtitle">');
    c.push(Surface.valOut("you're ready to join Voice Channels and start the game!"));
    c.push('</span>\n </div>\n <div class="base-clear"></div>\n </div>\n</div>\n');
    return c.join("");
};
var block_gamemanager_pluginstate = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("pluginstate"));
gamemanager.pluginstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_pluginstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.pluginstate");
    c.push('\n<div class="gamemanager-state ');
    if ((o.state.pluginState.name == o.states.PLUGIN_OK)) {
        c.push("success");
    } else {
        c.push("fail");
    }
    c.push(' gamemanager-pluginstate">\n <div class="gamemanager-plugin-content">\n <div class="gamemanager-plugin-top">\n <div class="gamemanager-plugin-icon"></div>\n <div class="gamemanager-plugin-right">\n <div class="gamemanager-title">\n ');
    c.push(Surface.valOut("Browser plugin"));
    c.push("\n </div>\n");
    if ((o.state.pluginState.name == o.states.PLUGIN_NOT_SUPPORTED)) {
        c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
        c.push(Surface.valOut("Only Windows is supported"));
        c.push("\n </div>\n </div>\n");
    } else {
        if ((o.state.pluginState.name == o.states.PLUGIN_MISSING)) {
            c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
            c.push(Surface.valOut("Update available."));
            c.push('\n </div>\n </div>\n <div class="gamemanager-pluginstate-missing-button">\n <form id="gamemananger-pluginstate-missing-form" action="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(Surface.globalContext.staticContext.pluginDownloadUrl, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" method="get">\n <input type="submit" class="base-button-arrow-small-grey" value="');
            c.push(Surface.valOut("Download"));
            c.push('" />\n </form>\n </div>\n');
        } else {
            if ((o.state.pluginState.name == o.states.PLUGIN_INSTALLING)) {
                c.push(' <div class="gamemanager-pluginstate-missing">\n <div class="gamemanager-pluginstate-missing-text">\n ');
                c.push(Surface.valOut("Installing"));
                c.push('\n </div>\n </div>\n <div class="gamemanager-pluginstate-missing-button">\n <input disabled=1 type="submit" class="base-button-arrow-small-grey" value="');
                c.push(Surface.valOut("Download"));
                c.push('" />\n </div>\n');
            }
        }
    }
    c.push(" </div>\n");
    if ((o.state.pluginState.name == o.states.PLUGIN_INSTALLING)) {
        c.push("\n");
    }
    if ((o.state.pluginState.name == o.states.PLUGIN_OK)) {
        c.push(' <div class=" gamemanager-pluginstate-ok">\n <div class="gamemanager-pluginstate-text-ok">\n ');
        c.push(Surface.valOut("Plugin is up to date."));
        c.push("\n </div>\n </div>\n");
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
var block_gamemanager_state = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("state"));
gamemanager.state.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_state;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.state");
    var l_game_manager_notifications;
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.pluginState) != "undefined" && o.state.pluginState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.pluginState) != "undefined" && o.state.pluginState !== null && typeof (o.state.pluginState.name) != "undefined" && o.state.pluginState.name !== null) ? o.state.pluginState.name : "") == o.states.PLUGIN_INSTALLING))) {
        c.push(" ");
        c.push(Surface.importTemplate(("gamemanager" + ("." + "pluginhelp")), o, null, kwargs));
        c.push("\n");
    }
    c.push('\n<div class="gamemanager-currentstate ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.isHidden) != "undefined" && o.state.isHidden !== null) && o.state.isHidden)) {
        c.push("gamemanager-currentstate-not-visible");
    }
    c.push(" ");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.testpage) != "undefined" && o.testpage !== null)) {
        c.push("gamemanager-testpage");
    }
    c.push('">\n <div class="comcenter-notification-title comcenter-gamemanager-title">\n ');
    c.push(Surface.valOut("Game manager"));
    c.push('\n <div class="comcenter-contract">&nbsp;</div>\n <div class="base-clear"></div>\n </div>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.launcherState) != "undefined" && o.state.launcherState !== null && typeof (o.state.launcherState.name) != "undefined" && o.state.launcherState.name !== null) ? o.state.launcherState.name : "") != ""))) {
        c.push(" ");
        c.push(Surface.importTemplate(("gamemanager" + ("." + "launchstate")), {"state": o.state,"states": o.states}, null, kwargs));
        c.push("\n");
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.inviteState) != "undefined" && o.state.inviteState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.inviteState) != "undefined" && o.state.inviteState !== null && typeof (o.state.inviteState.name) != "undefined" && o.state.inviteState.name !== null) ? o.state.inviteState.name : "") != ""))) {
            c.push(" ");
            c.push(Surface.importTemplate(("gamemanager" + ("." + "invitestate")), {"state": {"state": o.state.inviteState,"states": o.states}}, null, kwargs));
            c.push("\n");
        } else {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.coopState) != "undefined" && o.state.coopState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.coopState) != "undefined" && o.state.coopState !== null && typeof (o.state.coopState.name) != "undefined" && o.state.coopState.name !== null) ? o.state.coopState.name : "") != ""))) {
                c.push(" ");
                c.push(Surface.importTemplate(("gamemanager" + ("." + "coopstate")), {"state": {"state": o.state.coopState,"states": o.states}}, null, kwargs));
                c.push("\n");
            } else {
                if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.pluginState) != "undefined" && o.state.pluginState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.pluginState) != "undefined" && o.state.pluginState !== null && typeof (o.state.pluginState.name) != "undefined" && o.state.pluginState.name !== null) ? o.state.pluginState.name : "") != ""))) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("gamemanager" + ("." + "pluginstate")), {"state": o.state,"states": o.states}, null, kwargs));
                    c.push("\n");
                }
                if ((((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.patcherState) != "undefined" && o.state.patcherState !== null && typeof (o.state.patcherState.name) != "undefined" && o.state.patcherState.name !== null) ? o.state.patcherState.name : "") != o.states.PATCHER_OK)) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("gamemanager" + ("." + "patcherstate")), {"state": o.state,"states": o.states}, null, kwargs));
                    c.push("\n");
                } else {
                    if (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.gameState) != "undefined" && o.state.gameState !== null) && (((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.gameState) != "undefined" && o.state.gameState !== null && typeof (o.state.gameState.name) != "undefined" && o.state.gameState.name !== null) ? o.state.gameState.name : "") != ""))) {
                        c.push(" ");
                        c.push(Surface.importTemplate(("gamemanager" + ("." + "gamestate")), {"state": o.state,"states": o.states}, null, kwargs));
                        c.push("\n");
                    }
                    c.push("\n");
                }
                c.push("\n");
            }
        }
        c.push("\n");
    }
    c.push("\n");
    l_game_manager_notifications = [];
    c.push("\n");
    c.push(gamemanager.state.surface_42_6.render({"game_manager_notifications": ((typeof (l_game_manager_notifications) != "undefined" && l_game_manager_notifications !== null) ? l_game_manager_notifications : null)}, b, kwargs));
    c.push('\n <div class="comcenter-notifications-bottom"></div>\n</div>\n');
    return c.join("");
};
gamemanager.state.surface_42_6 = new Surface.SurfaceList("gamemanager.state.surface_42_6", "game_manager_notifications", "game_manager_notification", "game_manager_notification.id");
gamemanager.state.surface_43_10 = new Surface.SingleSurface("gamemanager.state.surface_43_10");
gamemanager.state.surface_43_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_state;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.state");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("game_manager_notifications", S.Modifier.concat("_", o.game_manager_notification.id)));
    c.push('">');
    c.push('\n <div class="game_manager_notification">\n <div class="game_manager_notification-icon">\n Warning!\n </div>\n <div class="game_manager_notification-text">\n ');
    c.push(Surface.valOut(o.game_manager_notification.message));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamemanager.state", "surface_43_10", S.Modifier.concat("game_manager_notifications", S.Modifier.concat("_", o.game_manager_notification.id)), o, b);
    return c.join("");
};
gamemanager.state.surface_42_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_state;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.state");
    c.push('<surf:container id="');
    c.push("game_manager_notifications");
    c.push('">');
    var l_for_gamemanager_state_42_6_list;
    l_for_gamemanager_state_42_6_list = o.game_manager_notifications;
    if ((S.Modifier.count(l_for_gamemanager_state_42_6_list) > 0)) {
        for (var l_for_gamemanager_state_42_6_key in l_for_gamemanager_state_42_6_list) {
            if (!Surface.isValidLoopItem(l_for_gamemanager_state_42_6_list[l_for_gamemanager_state_42_6_key])) {
                continue;
            }
            var l_game_manager_notification = l_for_gamemanager_state_42_6_list[l_for_gamemanager_state_42_6_key];
            c.push(gamemanager.state.surface_43_10.render({"game_manager_notification": ((typeof (l_game_manager_notification) != "undefined" && l_game_manager_notification !== null) ? l_game_manager_notification : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamemanager.state", "surface_42_6", "game_manager_notifications", o, b);
    return c.join("");
};
var block_gamemanager_taskbarbutton = new Surface.BlockConfig("", {});
gamemanager.addTemplate(new Surface.Template("taskbarbutton"));
gamemanager.taskbarbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_taskbarbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.taskbarbutton");
    c.push("\n");
    c.push(gamemanager.taskbarbutton.surface_2_2.render({"state": {"patch": {"data": {"progress": ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.patch) != "undefined" && o.state.patch !== null && typeof (o.state.patch.data) != "undefined" && o.state.patch.data !== null && typeof (o.state.patch.data.progress) != "undefined" && o.state.patch.data.progress !== null) ? o.state.patch.data.progress : null)}}},"status": ((typeof (o) != "undefined" && o !== null && typeof (o.status) != "undefined" && o.status !== null) ? o.status : null)}, b, kwargs));
    return c.join("");
};
gamemanager.taskbarbutton.surface_2_2 = new Surface.SingleSurface("gamemanager.taskbarbutton.surface_2_2");
gamemanager.taskbarbutton.surface_2_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gamemanager_taskbarbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gamemanager");
    Surface.Renderer.addUsedTemplate("gamemanager.taskbarbutton");
    c.push('<surf:container id="');
    c.push("gamemanager-taskbar-surface");
    c.push('">');
    c.push('\n <div id="gamemanager-taskbar-container" class="gamemanager-taskbar-status-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.status) != "undefined" && o.status !== null) ? o.status : "")));
    c.push('">\n <div id="gamemanager-taskbar-title">\n ');
    c.push(Surface.valOut(S.Modifier.upper("Game manager")));
    c.push('\n </div>\n <div id="gamemanager-taskbar-description">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.status) != "undefined" && o.status !== null)) {
        if ((o.status == "uptodate")) {
            c.push(" ");
            c.push(Surface.valOut("Up to date"));
            c.push("\n");
        } else {
            if ((o.status == "notuptodate")) {
                c.push(" ");
                c.push(Surface.valOut("Update available"));
                c.push("\n");
            } else {
                if ((o.status == "installing")) {
                    c.push(" ");
                    c.push(Surface.valOut("Installing"));
                    c.push(" ");
                    if (o.state.patch.data.progress) {
                        c.push("( ");
                        c.push(Surface.valOut(o.state.patch.data.progress));
                        c.push(" %)");
                    }
                    c.push("\n");
                } else {
                    if ((o.status == "downloading")) {
                        c.push(" ");
                        c.push(Surface.valOut("Downloading"));
                        c.push(" ");
                        if (o.state.patch.data.progress) {
                            c.push("( ");
                            c.push(Surface.valOut(o.state.patch.data.progress));
                            c.push(" %)");
                        }
                        c.push("\n");
                    } else {
                        if ((o.status == "foundnogame")) {
                            c.push(" ");
                            c.push(Surface.valOut("Install or update the game"));
                            c.push("\n");
                        } else {
                            c.push(" ");
                            c.push(Surface.valOut(o.status));
                            c.push("\n");
                        }
                    }
                }
            }
        }
    }
    c.push(' </div>\n <div id="gamemanager-taskbar-icon">\n </div>\n </div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gamemanager.taskbarbutton", "surface_2_2", "gamemanager-taskbar-surface", o, b);
    return c.join("");
};
var block_gamemanager_test = new Surface.BlockConfig("base.index", {"mainContent": "gamemanager.test.block_mainContent"});
gamemanager.addTemplate(new Surface.Template("test"));
if (typeof gate == "undefined") {
    var gate = {};
}
var surf_gate_component = new Surface.Component("gate");
surf_gate_component.extend(gate);
gate = surf_gate_component;
gate.addTemplate(new Surface.Template("base"));
var block_gate_comingsoon = new Surface.BlockConfig("gate.base", {"title": "gate.comingsoon.block_title","gate_content": "gate.comingsoon.block_gate_content"});
gate.addTemplate(new Surface.Template("comingsoon"));
var block_gate_index = new Surface.BlockConfig("gate.base", {"title": "gate.index.block_title","gate_content": "gate.index.block_gate_content"});
gate.addTemplate(new Surface.Template("index"));
var block_gate_redeem = new Surface.BlockConfig("gate.base", {"gate_content": "gate.redeem.block_gate_content"});
gate.addTemplate(new Surface.Template("redeem"));
var block_gate_register = new Surface.BlockConfig("gate.base", {"title": "gate.register.block_title","gate_content": "gate.register.block_gate_content"});
gate.addTemplate(new Surface.Template("register"));
if (typeof gather == "undefined") {
    var gather = {};
}
var surf_gather_component = new Surface.Component("gather");
surf_gather_component.extend(gather);
gather = surf_gather_component;
var block_gather_base = new Surface.BlockConfig("base.ajaxindex", {"left": "gather.base.block_left","mainContent": "gather.base.block_mainContent","right": "gather.base.block_right","all": "gather.base.block_all"});
gather.addTemplate(new Surface.Template("base"));
var block_gather_chat = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("chat"));
gather.chat.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_chat;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.chat");
    var l_session;
    var l_for_gather_chat_15_30_list;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<div id="gather-chat">\n <div class="gather-chat-headline">');
    c.push(Surface.valOut("Gather Chat"));
    c.push('</div>\n <div class="gather-chat-wrapper1">\n <div class="gather-chat-wrapper2">\n <div class="gather-chat-log-wrapper">\n <div class="gather-chat-log-scroller">\n <ul id="gather-chat-log">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gatherMessages) != "undefined" && o.gatherMessages !== null) && o.gatherMessages)) {
        l_for_gather_chat_15_30_list = o.gatherMessages;
        if ((S.Modifier.count(l_for_gather_chat_15_30_list) > 0)) {
            for (var l_for_gather_chat_15_30_key in l_for_gather_chat_15_30_list) {
                if (!Surface.isValidLoopItem(l_for_gather_chat_15_30_list[l_for_gather_chat_15_30_key])) {
                    continue;
                }
                var l_msg = l_for_gather_chat_15_30_list[l_for_gather_chat_15_30_key];
                c.push(" ");
                c.push(Surface.importTemplate(("gather" + ("." + "chatmessage")), {"message": l_msg}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push('\n </ul>\n </div>\n </div>\n <div class="gather-chat-form-wrapper');
    if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
        c.push(" gather-chat-form-input-disabled");
    }
    c.push('">\n <form method="post" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/sendChatMessage/", Surface.urlContext)));
    c.push('" id="gather-chat-form">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input autocomplete="off" value="');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push("Write something");
    } else {
        c.push("Sign in to write");
    }
    c.push('" placeholder="');
    if (l_session.isLoggedIn) {
        c.push("Write something");
    } else {
        c.push("Sign in to write");
    }
    c.push('" id="gather-chat-input-message" name="message" class="gather-chat-input" type="text"');
    if (!(l_session.isLoggedIn)) {
        c.push(' disabled="disabled" ');
    }
    c.push(' />\n <input autocomplete="off" type="hidden" name="gatherId" value="');
    c.push(Surface.valOut(o.gather.id));
    c.push('" />\n </form>\n </div>\n </div>\n </div>\n</div>');
    return c.join("");
};
var block_gather_chatmessage = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("chatmessage"));
gather.chatmessage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_chatmessage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.chatmessage");
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n<li class="gather-chat-log-item">\n <div>\n <div class="gather-chat-gravatar">');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.message.fromUser}, null, kwargs));
    c.push('</div>\n <div class="gather-chat-message">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (o.message.fromUser.userId == l_session.user.userId))) {
        c.push(' <div class="gather-chat-username-you">You</div>\n');
    } else {
        c.push(' <div class="gather-chat-username-other">');
        c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.message.fromUser.userId,"username": o.message.fromUser.username}, null, kwargs));
        c.push("</div>\n");
    }
    c.push('\n <div class="gather-chat-message-content">\n ');
    c.push(Surface.valOut(o.message.message));
    c.push('\n </div>\n </div>\n <div style="clear:both;"></div>\n </div>\n</li>');
    return c.join("");
};
var block_gather_create = new Surface.BlockConfig("gather.base", {"left": "gather.create.block_left"});
gather.addTemplate(new Surface.Template("create"));
var block_gather_index = new Surface.BlockConfig("gather.base", {"left": "gather.index.block_left","right": "gather.index.block_right"});
gather.addTemplate(new Surface.Template("index"));
var block_gather_list = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("list"));
var block_gather_list_use_2_11 = new Surface.BlockConfig("common.boxwide", {"titleType": "gather.list._use_2_11_block_titleType","titleContainer": "gather.list._use_2_11_block_titleContainer","contentContainer": "gather.list._use_2_11_block_contentContainer"});
gather.list.surface_14_18 = new Surface.SurfaceList("gather.list.surface_14_18", "gathers", "gather", "gather.id");
gather.list.surface_15_22 = new Surface.SingleSurface("gather.list.surface_15_22");
gather.list.surface_15_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.list");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat(o.surfaceId, S.Modifier.concat("_", o.gather.id)));
    c.push('">');
    var l_mapName;
    var l_for_gather_list_35_34_list;
    var l_map;
    var l_slots;
    var l_mapInfo;
    var l_friendInGather;
    var l_for_gather_list_17_26_list;
    var l_gamemode;
    l_map = {};
    l_for_gather_list_17_26_list = o.maps;
    if ((S.Modifier.count(l_for_gather_list_17_26_list) > 0)) {
        for (var l_for_gather_list_17_26_key in l_for_gather_list_17_26_list) {
            if (!Surface.isValidLoopItem(l_for_gather_list_17_26_list[l_for_gather_list_17_26_key])) {
                continue;
            }
            var l_m = l_for_gather_list_17_26_list[l_for_gather_list_17_26_key];
            if ((o.gather.map == S.Modifier.get(l_m, 1))) {
                l_map = l_m;
            }
        }
    }
    l_mapName = S.Modifier.get(l_map, 1, "-");
    l_gamemode = S.Modifier.get(l_map, 0, "-");
    c.push("\n");
    l_slots = 32;
    if ((l_gamemode == "SQRUSH")) {
        l_slots = 8;
    }
    if ((l_gamemode == "SQDM")) {
        l_slots = 16;
    }
    c.push('\n <div class="gather-list-item">\n <div class="gather-list-name">\n <div class="gather-list-name-icon">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSBright", o.gather.game, Surface.globalContext.staticContext.platforms.PC, 0, b, kwargs)));
    c.push('"></span>\n </div>\n');
    l_friendInGather = false;
    l_for_gather_list_35_34_list = o.gather.players;
    if ((S.Modifier.count(l_for_gather_list_35_34_list) > 0)) {
        for (var l_for_gather_list_35_34_key in l_for_gather_list_35_34_list) {
            if (!Surface.isValidLoopItem(l_for_gather_list_35_34_list[l_for_gather_list_35_34_key])) {
                continue;
            }
            var l_p = l_for_gather_list_35_34_list[l_for_gather_list_35_34_key];
            if (S.Modifier.contains(o.friends, l_p.userId)) {
                l_friendInGather = true;
            }
        }
    }
    if (l_friendInGather) {
        c.push(' <img width="16" height="16" class="gather-list-name-friends" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/serverguide/bfbc2/icons/torso_yellow.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="');
        c.push(Surface.valOut("Friends in this gather"));
        c.push('" />\n');
    } else {
        c.push(' <img width="16" height="16" class="gather-list-name-friends" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/serverguide/bfbc2/icons/torso_black.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="" />');
        c.push(Surface.valOut("No friends in this gather"));
        c.push("\n");
    }
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/show/{id}/", Surface.urlContext, o.gather)));
    c.push('">');
    c.push(Surface.valOut(o.gather.name));
    c.push('</a>\n </div>\n <div class="gather-list-slots">\n ');
    c.push(Surface.valOut(S.Modifier.count(S.Modifier.filterlist(o.gather.players, "accepted", true))));
    c.push("/");
    c.push(Surface.valOut(l_slots));
    c.push('\n </div>\n <div class="gather-list-map">\n');
    l_mapInfo = $S.callFunction("serverguide.mapinfo", o.gather.game, l_mapName, b, kwargs);
    c.push(' <div class="gather-list-map-container">\n <div class="gather-list-map-border-inner">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_mapInfo.imageIcon, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n </div>\n ');
    c.push(Surface.valOut(l_mapInfo.name));
    c.push('\n </div>\n <div class="gather-list-mode">\n ');
    c.push(Surface.valOut($S.callFunction("common.gamemodeDescription", o.gather.game, l_gamemode, b, kwargs)));
    c.push('\n </div>\n <div style="clear:both;"></div>\n </div>\n');
    if (o.for_gather_list_14_18_hasNext) {
        c.push(' <div style="width: 100%; border-top:1px solid #efefef;"></div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gather.list", "surface_15_22", S.Modifier.concat(o.surfaceId, S.Modifier.concat("_", o.gather.id)), o, b);
    return c.join("");
};
gather.list.surface_14_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_list;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.list");
    c.push('<surf:container id="');
    c.push(o.surfaceId);
    c.push('">');
    var l_for_gather_list_14_18_list;
    var l_for_gather_list_14_18_hasNext;
    var l_for_gather_list_14_18_iteration;
    var l_for_gather_list_14_18_count;
    l_for_gather_list_14_18_list = o.gathers;
    l_for_gather_list_14_18_count = S.Modifier.count(l_for_gather_list_14_18_list);
    l_for_gather_list_14_18_iteration = 0;
    if ((S.Modifier.count(l_for_gather_list_14_18_list) > 0)) {
        for (var l_for_gather_list_14_18_key in l_for_gather_list_14_18_list) {
            if (!Surface.isValidLoopItem(l_for_gather_list_14_18_list[l_for_gather_list_14_18_key])) {
                continue;
            }
            var l_gather = l_for_gather_list_14_18_list[l_for_gather_list_14_18_key];
            l_for_gather_list_14_18_iteration = (l_for_gather_list_14_18_iteration + 1);
            l_for_gather_list_14_18_hasNext = (l_for_gather_list_14_18_iteration < l_for_gather_list_14_18_count);
            c.push(gather.list.surface_15_22.render({"for_gather_list_14_18_hasNext": ((typeof (l_for_gather_list_14_18_hasNext) != "undefined" && l_for_gather_list_14_18_hasNext !== null) ? l_for_gather_list_14_18_hasNext : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"gather": ((typeof (l_gather) != "undefined" && l_gather !== null) ? l_gather : null),"maps": ((typeof (o) != "undefined" && o !== null && typeof (o.maps) != "undefined" && o.maps !== null) ? o.maps : null),"surfaceId": ((typeof (o) != "undefined" && o !== null && typeof (o.surfaceId) != "undefined" && o.surfaceId !== null) ? o.surfaceId : null)}, b, kwargs));
        }
    } else {
        c.push(' <div class="gather-list-item" style="text-indent: 16px;">');
        c.push(Surface.valOut("No gathers"));
        c.push("</div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gather.list", "surface_14_18", o.surfaceId, o, b);
    return c.join("");
};
var block_gather_ownerMatchControl = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("ownerMatchControl"));
gather.ownerMatchControl.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_ownerMatchControl;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.ownerMatchControl");
    c.push("\n");
    return c.join("");
};
var block_gather_playerrow = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("playerrow"));
gather.playerrow.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_playerrow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.playerrow");
    var l_isMe;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (!(l_session)) {
        l_session = [];
    }
    l_isMe = (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)) == o.player.userId);
    if ((o.player.groupId == "0")) {
        o.player.groupId = 0;
    }
    c.push('\n<div class="gather-playerrow');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.isLeader) != "undefined" && o.isLeader !== null) ? o.isLeader : false) && !(o.player.groupId))) {
        c.push(" gather-playerrow-draggable");
    }
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.player) != "undefined" && o.player !== null && typeof (o.player.accepted) != "undefined" && o.player.accepted !== null) ? o.player.accepted : false))) {
        c.push(" gather-applyingrow");
    }
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.isLeader) != "undefined" && o.isLeader !== null) ? o.isLeader : false) && (o.player.userId == l_session.user.userId))) {
        c.push(" gather-playerrow-leader");
    }
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.isLeader) != "undefined" && o.isLeader !== null) ? o.isLeader : false) && !(o.player.groupId))) {
        c.push(" gather-draggable-");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.player) != "undefined" && o.player !== null && typeof (o.player.team) != "undefined" && o.player.team !== null) ? o.player.team : "0")));
    }
    c.push('" id="gather-player-');
    c.push(Surface.valOut(o.player.userId));
    c.push('" data-id="');
    if (o.player.groupId) {
        c.push(Surface.valOut(o.player.groupId));
    } else {
        c.push(Surface.valOut(o.player.userId));
    }
    c.push('">\n <div class="gather-playerrow-user">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.player.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n <div class="gather-playerrow-info">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.player.user, null, kwargs));
    c.push('\n <div class="gather-playerrow-info-soldier">');
    c.push(Surface.valOut(o.player.persona.personaName));
    c.push("</div>\n </div>\n </div>\n");
    if (!(o.player.groupId)) {
        if (((((typeof (o) != "undefined" && o !== null && typeof (o.isLeader) != "undefined" && o.isLeader !== null) ? o.isLeader : false) && !(l_isMe)) && (o.player.team == "0"))) {
            c.push(' <div class="gather-playerrow-kick" alt="Kick player" title="');
            c.push(Surface.valOut("Kick player"));
            c.push('"></div>\n');
        }
    } else {
        if (!(o.isLeader)) {
            c.push(' <div class="gather-playerrow-status-action">\n');
            if ((o.player.playerState.isGroupLeader && l_isMe)) {
                if ((o.player.playerState.isGroupLeader && (o.player.team == "0"))) {
                    c.push(" ");
                    if (!(S.Modifier.get(o.player, "ready", 0))) {
                        c.push('<div class="gather-playerrow-groupleader">');
                        c.push(Surface.valOut("Group Leader"));
                        c.push("</div>");
                    }
                    c.push("\n");
                } else {
                    if ((o.player.team == "0")) {
                        c.push(' <div class="gather-playerrow-groupkick"></div>\n');
                    }
                }
            } else {
                if (l_isMe) {
                    c.push(' <div class="gather-playerrow-groupdeny" title="Leave"></div>\n ');
                    if (!(o.player.ready)) {
                        c.push('<div class="gather-playerrow-groupaccept" title="Accept invitation">');
                        c.push(Surface.valOut("Accept"));
                        c.push("</div>");
                    }
                    c.push("\n");
                }
            }
            if (S.Modifier.get(o.player, "ready", 0)) {
                c.push(' <div class="gather-playerrow-isready">Ready</div>\n');
            } else {
                if (!(l_isMe)) {
                    c.push(" ");
                    if (o.player.playerState.isGroupLeader) {
                        c.push('<div class="gather-playerrow-groupleader">');
                        c.push(Surface.valOut("Group Leader"));
                        c.push("</div>\n");
                    } else {
                        c.push(' <div class="gather-playerrow-notready">');
                        c.push(Surface.valOut("Pending..."));
                        c.push("</div>\n");
                    }
                }
            }
            c.push(" </div>\n");
        }
    }
    c.push("</div>");
    return c.join("");
};
var block_gather_running = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "gather.running.block_mainContent"});
gather.addTemplate(new Surface.Template("running"));
var block_gather_show = new Surface.BlockConfig("gather.base", {"all": "gather.show.block_all"});
gather.addTemplate(new Surface.Template("show"));
var block_gather_show_use_63_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "gather.show._use_63_14_block_content","extraClassInner": "gather.show._use_63_14_block_extraClassInner","titleContainer": "gather.show._use_63_14_block_titleContainer","extraClass": "gather.show._use_63_14_block_extraClass"});
gather.show.surface_6_10 = new Surface.SingleSurface("gather.show.surface_6_10");
gather.show.surface_25_18 = new Surface.SingleSurface("gather.show.surface_25_18");
gather.show.surface_25_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.show");
    c.push('<surf:container id="');
    c.push("gatherStatus");
    c.push('">');
    c.push(" <h1>\n ");
    if (o.gather.gatherStatus) {
        c.push(Surface.valOut(o.gather.gatherStatus));
        c.push("\n");
    } else {
        if (!(o.gather.started)) {
            if (o.isLeader) {
                c.push(" ");
                c.push(Surface.valOut("Add players to teams & start gather when ready"));
                c.push("\n");
            } else {
                if (o.isInGather) {
                    c.push(" ");
                    c.push(Surface.valOut("Waiting for host to start the gather"));
                    c.push("\n");
                } else {
                    if (o.isInGroup) {
                        c.push(" ");
                        c.push(Surface.valOut("Waiting for host to accept your group"));
                        c.push("\n");
                    }
                }
            }
        } else {
            c.push(" ");
            c.push(Surface.valOut("Gather is starting..."));
            c.push("\n");
        }
    }
    c.push(' </h1>\n <div style="text-align: right;">\n');
    if (!(o.gather.started)) {
        c.push(' <form id="gather-action" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/action/{id}/", Surface.urlContext, o.gather)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push("\n");
        if (o.isLeader) {
            c.push(' <a href="#" onclick="gather.action(\'abort\'); return false;">');
            c.push(Surface.valOut("Cancel gather"));
            c.push("</a>\n");
        } else {
            if (o.isInGather) {
                if (!(o.gather.started)) {
                    c.push(' <a href="#" onclick="gather.action(\'leave\');">');
                    c.push(Surface.valOut("Leave gather"));
                    c.push("</a>\n");
                }
            }
        }
        c.push(" </form>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gather.show", "surface_25_18", "gatherStatus", o, b);
    return c.join("");
};
gather.show._use_63_14_block_extraClass = new Surface.Block("gather.show._use_63_14_block_extraClass");
gather.show._use_63_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("gather-show-playerbox");
    return c.join("");
};
gather.show._use_63_14_block_extraClassInner = new Surface.Block("gather.show._use_63_14_block_extraClassInner");
gather.show._use_63_14_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gather.show._use_63_14_block_titleContainer = new Surface.Block("gather.show._use_63_14_block_titleContainer");
gather.show._use_63_14_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
gather.show._use_63_14_block_content = new Surface.Block("gather.show._use_63_14_block_content");
gather.show._use_63_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("gather" + ("." + "showplayers")), o, null, kwargs));
    c.push("\n");
    return c.join("");
};
gather.show.surface_6_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.show");
    c.push('<surf:container id="');
    c.push("gather");
    c.push('">');
    var l_isInGather;
    var l_for_gather_show_14_14_list;
    var l_for_gather_show_19_46_list;
    var l_for_gather_show_15_18_list;
    var l_session;
    var l_isInGroup;
    var l_for_gather_show_11_14_list;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)) == o.gather.ownerId)) {
        o.isLeader = true;
    } else {
        o.isLeader = false;
    }
    l_isInGather = false;
    l_isInGroup = false;
    l_for_gather_show_11_14_list = o.gather.players;
    if ((S.Modifier.count(l_for_gather_show_11_14_list) > 0)) {
        for (var l_for_gather_show_11_14_key in l_for_gather_show_11_14_list) {
            if (!Surface.isValidLoopItem(l_for_gather_show_11_14_list[l_for_gather_show_11_14_key])) {
                continue;
            }
            var l_player = l_for_gather_show_11_14_list[l_for_gather_show_11_14_key];
            if ((l_player.userId == ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)))) {
                l_isInGather = true;
            }
        }
    }
    l_for_gather_show_14_14_list = o.gather.groupInvites;
    if ((S.Modifier.count(l_for_gather_show_14_14_list) > 0)) {
        for (var l_for_gather_show_14_14_key in l_for_gather_show_14_14_list) {
            if (!Surface.isValidLoopItem(l_for_gather_show_14_14_list[l_for_gather_show_14_14_key])) {
                continue;
            }
            var l_group = l_for_gather_show_14_14_list[l_for_gather_show_14_14_key];
            l_for_gather_show_15_18_list = l_group;
            if ((S.Modifier.count(l_for_gather_show_15_18_list) > 0)) {
                for (var l_for_gather_show_15_18_key in l_for_gather_show_15_18_list) {
                    if (!Surface.isValidLoopItem(l_for_gather_show_15_18_list[l_for_gather_show_15_18_key])) {
                        continue;
                    }
                    var l_player = l_for_gather_show_15_18_list[l_for_gather_show_15_18_key];
                    if ((l_player.userId == ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)))) {
                        l_isInGroup = true;
                    }
                }
            }
        }
    }
    o.gamemode = "CONQUEST";
    l_for_gather_show_19_46_list = o.maps;
    if ((S.Modifier.count(l_for_gather_show_19_46_list) > 0)) {
        for (var l_for_gather_show_19_46_key in l_for_gather_show_19_46_list) {
            if (!Surface.isValidLoopItem(l_for_gather_show_19_46_list[l_for_gather_show_19_46_key])) {
                continue;
            }
            var l_map = l_for_gather_show_19_46_list[l_for_gather_show_19_46_key];
            if ((o.gather.map == S.Modifier.get(l_map, 1))) {
                o.gamemode = S.Modifier.get(l_map, 0);
            }
        }
    }
    c.push(' <div class="gather-debugbuttons">\n <input type="button" onclick="gather.ajaxpost(\'');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/destroy/{id}/", Surface.urlContext, o.gather)));
    c.push("');\" value='Kill' /><input type=\"button\" onclick=\"gather.ajaxpost('");
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/end/{id}/", Surface.urlContext, o.gather)));
    c.push("');\" value='End' /> <input type=\"button\" onclick=\"gather.ajaxpost('");
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/debugadd/{id}/", Surface.urlContext, o.gather)));
    c.push("');\" value='Add debug player' />\n </div>\n <div class=\"gather-status\">\n");
    c.push(gather.show.surface_25_18.render({"gather": ((typeof (o) != "undefined" && o !== null && typeof (o.gather) != "undefined" && o.gather !== null) ? o.gather : null),"isInGather": ((typeof (l_isInGather) != "undefined" && l_isInGather !== null) ? l_isInGather : null),"isInGroup": ((typeof (l_isInGroup) != "undefined" && l_isInGroup !== null) ? l_isInGroup : null),"isLeader": ((typeof (o) != "undefined" && o !== null && typeof (o.isLeader) != "undefined" && o.isLeader !== null) ? o.isLeader : null)}, b, kwargs));
    c.push(" </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_gather_show_use_63_14, kwargs));
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("gather.show", "surface_6_10", "gather", o, b);
    return c.join("");
};
gather.addTemplate(new Surface.Template("showheader"));
var block_gather_showheader_use_2_2 = new Surface.BlockConfig("teammatch.showheader", {"right": "gather.showheader._use_2_2_block_right"});
var block_gather_showplayers = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("showplayers"));
gather.showplayers.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_showplayers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.showplayers");
    var l_for_gather_showplayers_84_10_iteration;
    var l_badge;
    var l_pl;
    var l_groupReady;
    var l_allReady;
    var l_applyingSubtitle;
    var l_session;
    var l_teamname;
    var l_for_gather_showplayers_84_10_list;
    var l_isGroupLeader;
    var l_mygroup;
    var l_for_gather_showplayers_12_2_list;
    var l_teamCount;
    var l_ready;
    var l_isInGroup;
    c.push("\n");
    l_teamCount = 2;
    if ((o.gamemode == "SQDM")) {
        l_teamCount = 4;
    }
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    l_isInGroup = 0;
    l_isGroupLeader = 0;
    l_allReady = 0;
    l_groupReady = 0;
    c.push("\n");
    l_for_gather_showplayers_12_2_list = o.gather.groupInvites;
    if ((S.Modifier.count(l_for_gather_showplayers_12_2_list) > 0)) {
        for (var l_for_gather_showplayers_12_2_key in l_for_gather_showplayers_12_2_list) {
            if (!Surface.isValidLoopItem(l_for_gather_showplayers_12_2_list[l_for_gather_showplayers_12_2_key])) {
                continue;
            }
            var l_group = l_for_gather_showplayers_12_2_list[l_for_gather_showplayers_12_2_key];
            l_mygroup = S.Modifier.filterlist(l_group, "userId", ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)));
            if ((S.Modifier.count(l_mygroup) > 0)) {
                if (S.Modifier.get(S.Modifier.get(l_mygroup, 0), "ready")) {
                }
                l_isInGroup = 1;
                if ((S.Modifier.get(S.Modifier.get(l_group, 0), "groupId") == ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)))) {
                    l_isGroupLeader = 1;
                }
                l_ready = S.Modifier.filterlist(l_group, "ready", true);
                if ((S.Modifier.count(l_group) == S.Modifier.count(l_ready))) {
                    l_allReady = 1;
                    l_groupReady = 1;
                }
                if (((S.Modifier.count(l_group) - 1) == S.Modifier.count(l_ready))) {
                    l_allReady = 1;
                }
            }
        }
    }
    c.push('\n<input type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/adminAction/{id}/", Surface.urlContext, o.gather)));
    c.push('" name="adminActionUrl" />\n<div class="gather-players-');
    c.push(Surface.valOut(l_teamCount));
    c.push('-teams">\n');
    l_applyingSubtitle = "";
    c.push('\n <div class="gather-teamcontainer-team0-wrapper">\n');
    if (o.isLeader) {
        if (!(o.gather.started)) {
            c.push(' <div class="gather-button-container">\n <input type="button" class="base-button-arrow-start gather-button-big" onclick="gather.action(\'start\');" value="');
            c.push(Surface.valOut("Start gather"));
            c.push('" />\n <div style="clear: both;"></div>\n </div>\n');
        }
    } else {
        c.push(' <div class="gather-button-container">\n');
        if ((!(l_isInGroup) && !(S.Modifier.count(S.Modifier.filterlist(o.gather.players, "userId", S.Modifier.get(S.Modifier.get(l_session, "user", []), "userId", 0)))))) {
            c.push(' <input type="button" class="base-button-big-with-dropdown-left gather-button-big-left" ');
            if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null) ? l_session.currentPersona : 0))) {
                c.push('disabled=""');
            }
            c.push(' onclick="gather.action(\'join\');" value="" />');
            c.push(Surface.valOut("Apply to join"));
            c.push('\n <input type="button" class="base-button-big-with-dropdown-right gather-button-big-right" ');
            if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null) ? l_session.currentPersona : 0))) {
                c.push('disabled=""');
            }
            c.push(' onclick="$(\'#gather-popdown\').toggle();" value="" />\n <div id="gather-popdown" class="gather-popdown">\n <div class="gather-popdown-line" onclick="gather.action(\'joinGroup\');">');
            c.push(Surface.valOut("Group apply with friends"));
            c.push("</div>\n </div>\n");
        } else {
            if (l_isGroupLeader) {
                if ((!(l_groupReady) && l_allReady)) {
                    c.push(' <input type="button" class="base-button-arrow-start gather-button-big" onclick="gather.action(\'goReady\')" value="');
                    c.push(Surface.valOut("GROUP READY"));
                    c.push('" />\n');
                } else {
                    if (!(l_groupReady)) {
                        c.push(' <input type="button" class="base-button-arrow-start gather-button-big" disabled="" onclick="" value="');
                        c.push(Surface.valOut("GROUP READY"));
                        c.push('" /><br>\n');
                    } else {
                        c.push(' <input type="button" class="base-button-arrow-start gather-button-big" onclick="gather.action(\'goUnready\')" value="');
                        c.push(Surface.valOut("GROUP READY"));
                        c.push('" />\n');
                    }
                }
            } else {
                if (!(l_groupReady)) {
                    c.push(' <input type="button" class="base-button-arrow-start gather-button-big" disabled="" onclick="" value="');
                    c.push(Surface.valOut("GROUP IS NOT READY"));
                    c.push('" />\n');
                } else {
                    c.push(' <input type="button" class="base-button-arrow-start gather-button-big" disabled="" onclick="" value="');
                    c.push(Surface.valOut("GROUP READY"));
                    c.push('" />\n');
                }
            }
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    l_pl = S.Modifier.filterlist(o.gather.players, "accepted", false);
    c.push(" ");
    c.push(Surface.importTemplate(("gather" + ("." + "teamcontainer")), {"groupInvites": o.gather.groupInvites,"userInvites": o.gather.userInvites,"players": S.Modifier.filterlist(l_pl, "isGroupJoining", false),"isLeader": o.isLeader,"teamCount": l_teamCount,"team": "0","title": (("Applying players" + S.Modifier.concat("(", S.Modifier.count(l_pl))) + ")"),"dropInfo": "to put back as applying.","subtitle": l_applyingSubtitle}, null, kwargs));
    c.push('\n </div>\n <div class="gather-teamcontainer-teams-wrapper">\n');
    l_for_gather_showplayers_84_10_list = S.Modifier.to(1, l_teamCount);
    l_for_gather_showplayers_84_10_iteration = 0;
    if ((S.Modifier.count(l_for_gather_showplayers_84_10_list) > 0)) {
        for (var l_for_gather_showplayers_84_10_key in l_for_gather_showplayers_84_10_list) {
            if (!Surface.isValidLoopItem(l_for_gather_showplayers_84_10_list[l_for_gather_showplayers_84_10_key])) {
                continue;
            }
            var l_team = l_for_gather_showplayers_84_10_list[l_for_gather_showplayers_84_10_key];
            l_for_gather_showplayers_84_10_iteration = (l_for_gather_showplayers_84_10_iteration + 1);
            l_teamname = S.Modifier.get(o.gather.teamNames, S.Modifier.concat(l_team, ""), "-");
            l_badge = S.Modifier.get(l_teamname, "badge", "");
            c.push(" ");
            c.push(Surface.importTemplate(("gather" + ("." + "teamcontainer")), {"groupInvites": o.gather.groupInvites,"players": S.Modifier.filterlist(o.gather.players, "team", S.Modifier.concat("", l_team)),"dropInfo": "to add to team","teamCount": l_teamCount,"isLeader": o.isLeader,"team": l_team,"platoonBadge": l_badge,"title": S.Modifier.concat("Team ", l_teamname)}, null, kwargs));
            c.push("\n");
            if ((Surface.modulo(l_for_gather_showplayers_84_10_iteration, 2) == 0)) {
                c.push('<div class="base-clear"></div>');
            }
            c.push("\n");
        }
    }
    c.push(' </div>\n <div class="base-clear"></div>\n</div>\n');
    return c.join("");
};
var block_gather_teamcontainer = new Surface.BlockConfig("", {});
gather.addTemplate(new Surface.Template("teamcontainer"));
gather.teamcontainer.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_gather_teamcontainer;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("gather");
    Surface.Renderer.addUsedTemplate("gather.teamcontainer");
    var l_for_gather_teamcontainer_55_10_list;
    var l_for_gather_teamcontainer_24_22_list;
    var l_for_gather_teamcontainer_52_6_list;
    var l_slots;
    var l_freeSlots;
    var l_for_gather_teamcontainer_16_6_list;
    var l_groupTeam;
    var l_for_gather_teamcontainer_20_14_list;
    var l_session;
    var l_for_gather_teamcontainer_44_6_list;
    var l_isFull;
    var l_for_gather_teamcontainer_60_18_list;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_slots = (16 / o.teamCount);
    if ((o.team == "0")) {
        l_slots = 10;
    }
    l_freeSlots = (l_slots - S.Modifier.count(o.players));
    c.push('\n<input type="hidden" name="gather-freeslots-');
    c.push(Surface.valOut(o.team));
    c.push('" value="');
    c.push(Surface.valOut(l_freeSlots));
    c.push('">\n<div class="gather-teamcontainer');
    if (o.isLeader) {
        c.push(" gather-teamcontainer-dashed");
    }
    c.push(" gather-teamcontainer-team");
    c.push(Surface.valOut(o.team));
    c.push(" gather-teamcontainer-team");
    c.push(Surface.valOut(o.team));
    c.push("of");
    c.push(Surface.valOut(o.teamCount));
    if ((l_freeSlots == 0)) {
        c.push(" gather-teamcontainer-full");
    }
    c.push('" ');
    if (o.isLeader) {
        c.push('id="gather-droppable-');
        c.push(Surface.valOut(o.team));
        c.push('"');
    }
    c.push(">\n");
    if ((o.team == "0")) {
        c.push(' <div class="gather-teamcontainer-dropzone">\n <img width="61" height="35" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/dropzone-dark.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('">\n </div>\n');
    }
    c.push("\n");
    l_for_gather_teamcontainer_16_6_list = ((typeof (o) != "undefined" && o !== null && typeof (o.groupInvites) != "undefined" && o.groupInvites !== null) ? o.groupInvites : []);
    if ((S.Modifier.count(l_for_gather_teamcontainer_16_6_list) > 0)) {
        for (var l_for_gather_teamcontainer_16_6_key in l_for_gather_teamcontainer_16_6_list) {
            if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_16_6_list[l_for_gather_teamcontainer_16_6_key])) {
                continue;
            }
            var l_group = l_for_gather_teamcontainer_16_6_list[l_for_gather_teamcontainer_16_6_key];
            if (((l_group && (S.Modifier.get(S.Modifier.get(l_group, 0), "groupId", 0) == S.Modifier.get(S.Modifier.get(l_session, "user", []), "userId", 0))) && (S.Modifier.get(S.Modifier.get(l_group, 0), "team", 0) == 0))) {
                l_isFull = true;
                l_groupTeam = S.Modifier.get(S.Modifier.get(l_group, 0), "team");
                l_for_gather_teamcontainer_20_14_list = l_group;
                if ((S.Modifier.count(l_for_gather_teamcontainer_20_14_list) > 0)) {
                    for (var l_for_gather_teamcontainer_20_14_key in l_for_gather_teamcontainer_20_14_list) {
                        if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_20_14_list[l_for_gather_teamcontainer_20_14_key])) {
                            continue;
                        }
                        var l_invite = l_for_gather_teamcontainer_20_14_list[l_for_gather_teamcontainer_20_14_key];
                        if (!(l_invite.ready)) {
                            l_isFull = false;
                        }
                    }
                }
                c.push("\n");
                if (((o.team == l_groupTeam) && !(l_isFull))) {
                    c.push(' <div class="gather-group');
                    if (l_isFull) {
                        c.push("-full");
                    }
                    c.push('">\n');
                    l_for_gather_teamcontainer_24_22_list = l_group;
                    if ((S.Modifier.count(l_for_gather_teamcontainer_24_22_list) > 0)) {
                        for (var l_for_gather_teamcontainer_24_22_key in l_for_gather_teamcontainer_24_22_list) {
                            if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_24_22_list[l_for_gather_teamcontainer_24_22_key])) {
                                continue;
                            }
                            var l_invite = l_for_gather_teamcontainer_24_22_list[l_for_gather_teamcontainer_24_22_key];
                            c.push(" ");
                            c.push(Surface.importTemplate(("gather" + ("." + "playerrow")), {"player": l_invite,"isLeader": o.isLeader}, null, kwargs));
                            c.push("\n");
                        }
                    }
                    c.push("\n");
                    if ((((l_group && (S.Modifier.get(S.Modifier.get(l_group, 0), "groupId", 0) == S.Modifier.get(S.Modifier.get(l_session, "user", []), "userId", 0))) && (S.Modifier.get(S.Modifier.get(l_group, 0), "team", 0) == 0)) && !(l_isFull))) {
                        c.push(' <div id="gather-group-dropzone" class="">\n <div class="common-dropzone-content">\n <div class="gather-dropzone-logo"></div>\n </div>\n </div>\n');
                    }
                    c.push(" </div>\n");
                }
            }
        }
    }
    c.push('\n <div class="gather-teamcontainer-header">\n <strong>');
    c.push(Surface.valOut(o.title));
    c.push("</strong><br>\n ");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.subtitle) != "undefined" && o.subtitle !== null)) {
        c.push(Surface.valOut(o.subtitle));
    } else {
        c.push(Surface.valOut(S.Modifier.count(o.players)));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(o.players), "player", "players")));
    }
    c.push("\n </div>\n");
    l_for_gather_teamcontainer_44_6_list = o.players;
    if ((S.Modifier.count(l_for_gather_teamcontainer_44_6_list) > 0)) {
        for (var l_for_gather_teamcontainer_44_6_key in l_for_gather_teamcontainer_44_6_list) {
            if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_44_6_list[l_for_gather_teamcontainer_44_6_key])) {
                continue;
            }
            var l_p = l_for_gather_teamcontainer_44_6_list[l_for_gather_teamcontainer_44_6_key];
            c.push("\n");
            if (((!(l_p.groupId) || (l_p.groupId == "0")) || (l_p.groupId == "None"))) {
                c.push("\n");
                c.push(Surface.importTemplate(("gather" + ("." + "playerrow")), {"player": l_p,"isLeader": o.isLeader}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push("\n");
    l_for_gather_teamcontainer_52_6_list = ((typeof (o) != "undefined" && o !== null && typeof (o.groupInvites) != "undefined" && o.groupInvites !== null) ? o.groupInvites : []);
    if ((S.Modifier.count(l_for_gather_teamcontainer_52_6_list) > 0)) {
        for (var l_for_gather_teamcontainer_52_6_key in l_for_gather_teamcontainer_52_6_list) {
            if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_52_6_list[l_for_gather_teamcontainer_52_6_key])) {
                continue;
            }
            var l_group = l_for_gather_teamcontainer_52_6_list[l_for_gather_teamcontainer_52_6_key];
            l_isFull = true;
            l_groupTeam = S.Modifier.get(S.Modifier.get(l_group, 0), "team");
            l_for_gather_teamcontainer_55_10_list = l_group;
            if ((S.Modifier.count(l_for_gather_teamcontainer_55_10_list) > 0)) {
                for (var l_for_gather_teamcontainer_55_10_key in l_for_gather_teamcontainer_55_10_list) {
                    if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_55_10_list[l_for_gather_teamcontainer_55_10_key])) {
                        continue;
                    }
                    var l_invite = l_for_gather_teamcontainer_55_10_list[l_for_gather_teamcontainer_55_10_key];
                    if (!(l_invite.ready)) {
                        l_isFull = false;
                    }
                }
            }
            c.push('\n <input type="hidden" name="gather-groupsize-');
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(l_group, 0), "groupId")));
            c.push('" value="');
            c.push(Surface.valOut(S.Modifier.count(l_group)));
            c.push('">\n');
            if ((o.team == l_groupTeam)) {
                c.push(' <div id="gather-group-');
                c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(l_group, 0), "groupId", 0)));
                c.push('" class="gather-group');
                if (o.isLeader) {
                    if (l_isFull) {
                        c.push("-full");
                    }
                    c.push(" gather-draggable-");
                    c.push(Surface.valOut(((S.Modifier.get(S.Modifier.get(l_group, 0), "team") !== null) ? S.Modifier.get(S.Modifier.get(l_group, 0), "team") : "0")));
                }
                c.push('">\n');
                l_for_gather_teamcontainer_60_18_list = l_group;
                if ((S.Modifier.count(l_for_gather_teamcontainer_60_18_list) > 0)) {
                    for (var l_for_gather_teamcontainer_60_18_key in l_for_gather_teamcontainer_60_18_list) {
                        if (!Surface.isValidLoopItem(l_for_gather_teamcontainer_60_18_list[l_for_gather_teamcontainer_60_18_key])) {
                            continue;
                        }
                        var l_invite = l_for_gather_teamcontainer_60_18_list[l_for_gather_teamcontainer_60_18_key];
                        c.push(" ");
                        c.push(Surface.importTemplate(("gather" + ("." + "playerrow")), {"player": l_invite,"isLeader": o.isLeader}, null, kwargs));
                        c.push("\n");
                    }
                }
                c.push(" </div>\n");
            }
        }
    }
    c.push("\n");
    if (((l_freeSlots > 0) && o.isLeader)) {
        c.push(' <div class="gather-teamcontainer-dropinfo">\n');
        if ((l_freeSlots > 1)) {
            c.push(" <br>");
            c.push(Surface.valOut("Drop applying players here"));
            c.push("<br>");
            c.push(Surface.valOut(o.dropInfo));
            c.push("\n");
        }
        c.push(" </div>\n");
    }
    c.push("</div>");
    return c.join("");
};
if (typeof joinflow == "undefined") {
    var joinflow = {};
}
var surf_joinflow_component = new Surface.Component("joinflow");
surf_joinflow_component.extend(joinflow);
joinflow = surf_joinflow_component;
var block_joinflow_bfbc2exepopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("bfbc2exepopup"));
joinflow.bfbc2exepopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_bfbc2exepopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.bfbc2exepopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_bfbc2exepopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_bfbc2exepopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.bfbc2exepopup._use_2_2_block_content","title": "joinflow.bfbc2exepopup._use_2_2_block_title","footerContainer": "joinflow.bfbc2exepopup._use_2_2_block_footerContainer"});
joinflow.bfbc2exepopup._use_2_2_block_title = new Surface.Block("joinflow.bfbc2exepopup._use_2_2_block_title");
joinflow.bfbc2exepopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.bfbc2exepopup._use_2_2_block_content = new Surface.Block("joinflow.bfbc2exepopup._use_2_2_block_content");
joinflow.bfbc2exepopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-missing">\n <div id="joinflow-game-image"></div>\n <div id="joinflow-getexe">\n <h2>');
    c.push(Surface.valOut("You need to have Bad Company 2 installed to be able to play."));
    c.push('</h2>\n <input type="button" id="joinflow-bfbc2exepopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('"\n class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.bfbc2exepopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.bfbc2exepopup._use_2_2_block_footerContainer");
joinflow.bfbc2exepopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_bfbc2patchingpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("bfbc2patchingpopup"));
joinflow.bfbc2patchingpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_bfbc2patchingpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.bfbc2patchingpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_bfbc2patchingpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_bfbc2patchingpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.bfbc2patchingpopup._use_2_2_block_content","title": "joinflow.bfbc2patchingpopup._use_2_2_block_title","footerContainer": "joinflow.bfbc2patchingpopup._use_2_2_block_footerContainer"});
joinflow.bfbc2patchingpopup._use_2_2_block_title = new Surface.Block("joinflow.bfbc2patchingpopup._use_2_2_block_title");
joinflow.bfbc2patchingpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Your BFBC2 game is not up to date"));
    return c.join("");
};
joinflow.bfbc2patchingpopup._use_2_2_block_content = new Surface.Block("joinflow.bfbc2patchingpopup._use_2_2_block_content");
joinflow.bfbc2patchingpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-missing">\n <div id="joinflow-patchingneeded">\n <img width="30" height="30" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading30x30.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"/>\n <h2>');
    c.push(Surface.valOut("Please run the updater manually..."));
    c.push("</h2>\n <br>\n ");
    c.push(Surface.valOut("The join flow will continue when you are up to date."));
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
joinflow.bfbc2patchingpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.bfbc2patchingpopup._use_2_2_block_footerContainer");
joinflow.bfbc2patchingpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_buypopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("buypopup"));
joinflow.buypopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_buypopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.buypopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_buypopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_buypopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.buypopup._use_2_2_block_content","title": "joinflow.buypopup._use_2_2_block_title","footerContainer": "joinflow.buypopup._use_2_2_block_footerContainer"});
joinflow.buypopup._use_2_2_block_title = new Surface.Block("joinflow.buypopup._use_2_2_block_title");
joinflow.buypopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.buypopup._use_2_2_block_content = new Surface.Block("joinflow.buypopup._use_2_2_block_content");
joinflow.buypopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_action;
    l_action = S.Modifier.urlformat("/{_section}/{_language}/store/", Surface.urlContext, {"_section": $S.callFunction("base.game", o.server.game, b, kwargs)});
    if ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.gameExpansion) != "undefined" && o.server.gameExpansion !== null)) {
        l_action = S.Modifier.concat(S.Modifier.concat(l_action, "?expansion="), o.server.gameExpansion);
    }
    c.push('\n <div id="joinflow-game-missing">\n <div id="joinflow-game-image" class="joinflow-game-image-bg-');
    c.push(Surface.valOut(o.server.game));
    if ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.gameExpansion) != "undefined" && o.server.gameExpansion !== null)) {
        c.push("-");
        c.push(Surface.valOut(o.server.gameExpansion));
    }
    c.push('"></div>\n <div id="joinflow-buy">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.gameExpansion) != "undefined" && o.server.gameExpansion !== null)) {
        c.push(" <h2>");
        c.push(Surface.valOut("You need to"));
        c.push(" <span>");
        c.push(Surface.valOut("buy"));
        c.push("</span> ");
        c.push(Surface.valOut("the"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.upper($S.callFunction("base.game", o.server.game, b, kwargs))));
        c.push(": ");
        c.push(Surface.valOut($S.callFunction("base.gameExpansion", o.server.gameExpansion, b, kwargs)));
        c.push(" ");
        c.push(Surface.valOut("expansion to join this server."));
        c.push("</h2>\n");
    } else {
        c.push(" <h2>");
        c.push(Surface.valOut("You need to"));
        c.push(" <span>");
        c.push(Surface.valOut("buy"));
        c.push("</span> ");
        c.push(Surface.valOut(S.Modifier.upper($S.callFunction("base.game", o.server.game, b, kwargs))));
        c.push(" ");
        c.push(Surface.valOut("to join this server."));
        c.push("</h2>\n");
    }
    c.push(' <br>\n <input style="display: none;" type="button" value="');
    c.push(Surface.valOut("Buy"));
    c.push('" class="base-button-arrow-large"\n id="buy-game-button" action="');
    c.push(Surface.valOut(l_action));
    c.push('"/><br>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.buypopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.buypopup._use_2_2_block_footerContainer");
joinflow.buypopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_exesuccesspopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("exesuccesspopup"));
joinflow.exesuccesspopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_exesuccesspopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.exesuccesspopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_exesuccesspopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_exesuccesspopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.exesuccesspopup._use_2_2_block_content","title": "joinflow.exesuccesspopup._use_2_2_block_title","footerContainer": "joinflow.exesuccesspopup._use_2_2_block_footerContainer"});
joinflow.exesuccesspopup._use_2_2_block_title = new Surface.Block("joinflow.exesuccesspopup._use_2_2_block_title");
joinflow.exesuccesspopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.exesuccesspopup._use_2_2_block_content = new Surface.Block("joinflow.exesuccesspopup._use_2_2_block_content");
joinflow.exesuccesspopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-success">\n <div id="joinflow-game-image">\n <div id="joinflow-game-success-mark"></div>\n </div>\n <div id="joinflow-getexe-success">\n <h2><span>');
    c.push(Surface.valOut("Game"));
    c.push("</span> ");
    c.push(Surface.valOut("installed successfully!"));
    c.push('</h2>\n <input type="button" id="joinflow-exesuccesspopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('"\n class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.exesuccesspopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.exesuccesspopup._use_2_2_block_footerContainer");
joinflow.exesuccesspopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_groupjoinpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("groupjoinpopup"));
joinflow.groupjoinpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_groupjoinpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.groupjoinpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_groupjoinpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_groupjoinpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.groupjoinpopup._use_2_2_block_content","title": "joinflow.groupjoinpopup._use_2_2_block_title","footerContainer": "joinflow.groupjoinpopup._use_2_2_block_footerContainer"});
joinflow.groupjoinpopup._use_2_2_block_title = new Surface.Block("joinflow.groupjoinpopup._use_2_2_block_title");
joinflow.groupjoinpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Joining"));
    c.push(" ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null && typeof (o.state.server.name) != "undefined" && o.state.server.name !== null) ? o.state.server.name : "server")));
    return c.join("");
};
joinflow.groupjoinpopup._use_2_2_block_content = new Surface.Block("joinflow.groupjoinpopup._use_2_2_block_content");
joinflow.groupjoinpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("You are currently in a Party Join"));
    c.push("</h2>\n <h2>");
    c.push(Surface.valOut("Please wait for it to start or continue and leave your Party Join."));
    c.push("</h2>\n </div>\n </div>\n");
    return c.join("");
};
joinflow.groupjoinpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.groupjoinpopup._use_2_2_block_footerContainer");
joinflow.groupjoinpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n ');
    c.push(Surface.valOut("Continue only if you want to leave your Party Join and join the server"));
    c.push(' &nbsp;&nbsp;<input type="button" id="joinflow-groupjoin-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('" class="base-button-arrow-tiny gray"/>\n </div>\n');
    return c.join("");
};
var block_joinflow_groupjoinprompt = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("groupjoinprompt"));
joinflow.groupjoinprompt.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_groupjoinprompt;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.groupjoinprompt");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_groupjoinprompt_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_groupjoinprompt_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.groupjoinprompt._use_2_2_block_content","title": "joinflow.groupjoinprompt._use_2_2_block_title","footerContainer": "joinflow.groupjoinprompt._use_2_2_block_footerContainer"});
joinflow.groupjoinprompt._use_2_2_block_title = new Surface.Block("joinflow.groupjoinprompt._use_2_2_block_title");
joinflow.groupjoinprompt._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Party Join"));
    return c.join("");
};
joinflow.groupjoinprompt._use_2_2_block_content = new Surface.Block("joinflow.groupjoinprompt._use_2_2_block_content");
joinflow.groupjoinprompt._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("You currently have waiting players"));
    c.push("</h2>\n <h2>");
    c.push(Surface.valOut("Press continue below to start the Party Join anyway."));
    c.push("</h2>\n </div>\n </div>\n");
    return c.join("");
};
joinflow.groupjoinprompt._use_2_2_block_footerContainer = new Surface.Block("joinflow.groupjoinprompt._use_2_2_block_footerContainer");
joinflow.groupjoinprompt._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n ');
    c.push(Surface.valOut("Continue only if you want to start the Party Join anyway"));
    c.push(' &nbsp;&nbsp;<input type="button" id="joinflow-groupjoinwaiting-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('" class="base-button-arrow-tiny gray"/>&nbsp;\n </div>\n');
    return c.join("");
};
var block_joinflow_index = new Surface.BlockConfig("base.ajaxindex", {"main": "joinflow.index.block_main"});
joinflow.addTemplate(new Surface.Template("index"));
var block_joinflow_installpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("installpopup"));
joinflow.installpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_installpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.installpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_installpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_installpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.installpopup._use_2_2_block_content","title": "joinflow.installpopup._use_2_2_block_title","footerContainer": "joinflow.installpopup._use_2_2_block_footerContainer"});
joinflow.installpopup._use_2_2_block_title = new Surface.Block("joinflow.installpopup._use_2_2_block_title");
joinflow.installpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Install the game"));
    return c.join("");
};
joinflow.installpopup._use_2_2_block_content = new Surface.Block("joinflow.installpopup._use_2_2_block_content");
joinflow.installpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("You need to install the game first."));
    c.push('</h2>\n <input type="button" id="joinflow-show-gamemanager" value="');
    c.push(Surface.valOut("Open Game Manager"));
    c.push('" class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.installpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.installpopup._use_2_2_block_footerContainer");
joinflow.installpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n ');
    c.push(Surface.valOut("When you've installed the game"));
    c.push('&nbsp;&nbsp;<input type="button" id="joinflow-pluginpopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('" class="base-button-arrow-tiny gray"/>\n </div>\n');
    return c.join("");
};
var block_joinflow_loadingpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("loadingpopup"));
joinflow.loadingpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_loadingpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.loadingpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_loadingpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_loadingpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.loadingpopup._use_2_2_block_content","title": "joinflow.loadingpopup._use_2_2_block_title","footerContainer": "joinflow.loadingpopup._use_2_2_block_footerContainer"});
joinflow.loadingpopup._use_2_2_block_title = new Surface.Block("joinflow.loadingpopup._use_2_2_block_title");
joinflow.loadingpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.loadingpopup._use_2_2_block_content = new Surface.Block("joinflow.loadingpopup._use_2_2_block_content");
joinflow.loadingpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-loading">\n <img width="16" height="16" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Loading..."));
    c.push('"/>\n ');
    c.push(Surface.valOut("Loading..."));
    c.push("\n </div>\n");
    return c.join("");
};
joinflow.loadingpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.loadingpopup._use_2_2_block_footerContainer");
joinflow.loadingpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_loginpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("loginpopup"));
joinflow.loginpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_loginpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.loginpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_loginpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_loginpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.loginpopup._use_2_2_block_content","title": "joinflow.loginpopup._use_2_2_block_title","footerContainer": "joinflow.loginpopup._use_2_2_block_footerContainer"});
joinflow.loginpopup._use_2_2_block_title = new Surface.Block("joinflow.loginpopup._use_2_2_block_title");
joinflow.loginpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Sign in"));
    return c.join("");
};
joinflow.loginpopup._use_2_2_block_content = new Surface.Block("joinflow.loginpopup._use_2_2_block_content");
joinflow.loginpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <form id="joinflow-loginpopup-form"\n action="');
    if (Surface.globalContext.staticContext.sslAvailable) {
        c.push(Surface.valOut(Surface.globalContext.staticContext.currentHostSecure));
    }
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/login/", Surface.urlContext)));
    c.push('"\n method="POST" onsubmit="return false;">\n <label for="joinflow-email">');
    c.push(Surface.valOut("Email"));
    c.push('</label>\n <input type="email" name="email" id="joinflow-email" value="" />\n <div class="base-clear"></div>\n <label for="joinflow-password">');
    c.push(Surface.valOut("Password"));
    c.push('</label>\n <input type="password" name="password" id="joinflow-password" value="" />\n <div class="base-clear"></div>\n <input style="margin-bottom:20px" type="submit" value="');
    c.push(Surface.valOut("Sign in"));
    c.push('" class="base-button-arrow-large"/>\n <br><a id="joinflow-registration" style="margin-left:90px" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/registration/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("Register an Account"));
    c.push("</a>\n </form>\n");
    return c.join("");
};
joinflow.loginpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.loginpopup._use_2_2_block_footerContainer");
joinflow.loginpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_notvalidpersonapopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("notvalidpersonapopup"));
joinflow.notvalidpersonapopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_notvalidpersonapopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.notvalidpersonapopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_notvalidpersonapopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_notvalidpersonapopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.notvalidpersonapopup._use_2_2_block_content","title": "joinflow.notvalidpersonapopup._use_2_2_block_title","footerContainer": "joinflow.notvalidpersonapopup._use_2_2_block_footerContainer"});
joinflow.notvalidpersonapopup._use_2_2_block_title = new Surface.Block("joinflow.notvalidpersonapopup._use_2_2_block_title");
joinflow.notvalidpersonapopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Joining ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null && typeof (o.state.server.name) != "undefined" && o.state.server.name !== null) ? o.state.server.name : "server")));
    return c.join("");
};
joinflow.notvalidpersonapopup._use_2_2_block_content = new Surface.Block("joinflow.notvalidpersonapopup._use_2_2_block_content");
joinflow.notvalidpersonapopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("Your active soldier is not ready for duty."));
    c.push("</h2>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notCorrectSection) != "undefined" && o.notCorrectSection !== null) ? o.notCorrectSection : false)) {
        c.push(' <h2 class="joinflow-getplugin-nofat">');
        c.push(Surface.valOut("Navigate to the correct game section to start the game."));
        c.push("</h2>\n");
    } else {
        c.push(' <h2 class="joinflow-getplugin-nofat">');
        c.push(Surface.valOut("Please choose a PC soldier in the top menu."));
        c.push("</h2>\n");
    }
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
joinflow.notvalidpersonapopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.notvalidpersonapopup._use_2_2_block_footerContainer");
joinflow.notvalidpersonapopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n <div class="joinflow-popup-greybottom-text">');
    c.push(Surface.valOut("The join flow will continue when the above requirement is met."));
    c.push("</div>\n </div>\n");
    return c.join("");
};
var block_joinflow_originpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("originpopup"));
joinflow.originpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_originpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.originpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_originpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_originpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.originpopup._use_2_2_block_content","title": "joinflow.originpopup._use_2_2_block_title","footerContainer": "joinflow.originpopup._use_2_2_block_footerContainer"});
joinflow.originpopup._use_2_2_block_title = new Surface.Block("joinflow.originpopup._use_2_2_block_title");
joinflow.originpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("You're using Origin ingame browser"));
    return c.join("");
};
joinflow.originpopup._use_2_2_block_content = new Surface.Block("joinflow.originpopup._use_2_2_block_content");
joinflow.originpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-warning-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("You can't play the game from this browser."));
    c.push("</h2>\n </div>\n </div>\n");
    return c.join("");
};
joinflow.originpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.originpopup._use_2_2_block_footerContainer");
joinflow.originpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n <input type="button" id="joinflow-tabletpopup-closebutton" value="');
    c.push(Surface.valOut("Close"));
    c.push('" class="base-button-arrow-large common-popup-close-button"/>\n </div>\n');
    return c.join("");
};
var block_joinflow_passwordpromptpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("passwordpromptpopup"));
joinflow.passwordpromptpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_passwordpromptpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.passwordpromptpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_passwordpromptpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_passwordpromptpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.passwordpromptpopup._use_2_2_block_content","title": "joinflow.passwordpromptpopup._use_2_2_block_title","footerContainer": "joinflow.passwordpromptpopup._use_2_2_block_footerContainer"});
joinflow.passwordpromptpopup._use_2_2_block_title = new Surface.Block("joinflow.passwordpromptpopup._use_2_2_block_title");
joinflow.passwordpromptpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Enter server password"));
    return c.join("");
};
joinflow.passwordpromptpopup._use_2_2_block_content = new Surface.Block("joinflow.passwordpromptpopup._use_2_2_block_content");
joinflow.passwordpromptpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-passwordprompt">\n <h1 style="font-size: 14px;font-weight:normal;margin-bottom:32px;">To join this server you need the password</h1>\n <input id="joinflow-passwordprompt-serverpassword" type="password"/>\n <input id="joinflow-passwordprompt-submit" class="base-button-arrow-small" type="button" value="');
    c.push(Surface.valOut("Submit"));
    c.push('"/>\n </div>\n');
    return c.join("");
};
joinflow.passwordpromptpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.passwordpromptpopup._use_2_2_block_footerContainer");
joinflow.passwordpromptpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_patcherpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("patcherpopup"));
joinflow.patcherpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_patcherpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.patcherpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_patcherpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_patcherpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.patcherpopup._use_2_2_block_content","title": "joinflow.patcherpopup._use_2_2_block_title","footerContainer": "joinflow.patcherpopup._use_2_2_block_footerContainer"});
joinflow.patcherpopup._use_2_2_block_title = new Surface.Block("joinflow.patcherpopup._use_2_2_block_title");
joinflow.patcherpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Joining"));
    c.push(" ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null && typeof (o.state.server.name) != "undefined" && o.state.server.name !== null) ? o.state.server.name : "server")));
    return c.join("");
};
joinflow.patcherpopup._use_2_2_block_content = new Surface.Block("joinflow.patcherpopup._use_2_2_block_content");
joinflow.patcherpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("Download and install Origin to play the game."));
    c.push('</h2>\n <input type="button" id="joinflow-show-gamemanager" value="');
    c.push(Surface.valOut("Open Game Manager"));
    c.push('" class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.patcherpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.patcherpopup._use_2_2_block_footerContainer");
joinflow.patcherpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n ');
    c.push(Surface.valOut("When you've installed Origin"));
    c.push('&nbsp;&nbsp;<input type="button" id="joinflow-pluginpopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('" class="base-button-arrow-tiny gray"/>\n </div>\n');
    return c.join("");
};
var block_joinflow_patcherrorpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("patcherrorpopup"));
joinflow.patcherrorpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_patcherrorpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.patcherrorpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_patcherrorpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_patcherrorpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.patcherrorpopup._use_2_2_block_content","title": "joinflow.patcherrorpopup._use_2_2_block_title","footerContainer": "joinflow.patcherrorpopup._use_2_2_block_footerContainer"});
joinflow.patcherrorpopup._use_2_2_block_title = new Surface.Block("joinflow.patcherrorpopup._use_2_2_block_title");
joinflow.patcherrorpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.patcherrorpopup._use_2_2_block_content = new Surface.Block("joinflow.patcherrorpopup._use_2_2_block_content");
joinflow.patcherrorpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-missing">\n <div id="joinflow-game-image"></div>\n <div id="joinflow-getexe">\n <h2>');
    c.push(Surface.valOut(o.error));
    c.push('</h2>\n <input type="button" id="joinflow-patcherror-restartpatchbutton" value="');
    c.push(Surface.valOut("Try again"));
    c.push('"\n class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.patcherrorpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.patcherrorpopup._use_2_2_block_footerContainer");
joinflow.patcherrorpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_patchpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("patchpopup"));
joinflow.patchpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_patchpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.patchpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_patchpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_patchpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.patchpopup._use_2_2_block_content","title": "joinflow.patchpopup._use_2_2_block_title","footerContainer": "joinflow.patchpopup._use_2_2_block_footerContainer"});
joinflow.patchpopup._use_2_2_block_title = new Surface.Block("joinflow.patchpopup._use_2_2_block_title");
joinflow.patchpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.patchpopup._use_2_2_block_content = new Surface.Block("joinflow.patchpopup._use_2_2_block_content");
joinflow.patchpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-missing">\n <div id="joinflow-game-image" ></div>\n <div id="joinflow-getexe">\n <h2>');
    c.push(Surface.valOut("You need to"));
    c.push(" <span>");
    c.push(Surface.valOut("download and install"));
    c.push("</span> ");
    c.push(Surface.valOut("the"));
    c.push(" <span>");
    c.push(Surface.valOut("patch"));
    c.push("</span> (");
    c.push(Surface.valOut(o.patchSize));
    c.push(" MB) ");
    c.push(Surface.valOut("to launch the game."));
    c.push('</h2>\n <input type="button" id="joinflow-installpatch-installbutton" value="');
    c.push(Surface.valOut("Install Patch"));
    c.push('"\n class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.patchpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.patchpopup._use_2_2_block_footerContainer");
joinflow.patchpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_patchprogresspopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("patchprogresspopup"));
joinflow.patchprogresspopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_patchprogresspopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.patchprogresspopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_patchprogresspopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_patchprogresspopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.patchprogresspopup._use_2_2_block_content","title": "joinflow.patchprogresspopup._use_2_2_block_title","footerContainer": "joinflow.patchprogresspopup._use_2_2_block_footerContainer"});
joinflow.patchprogresspopup._use_2_2_block_title = new Surface.Block("joinflow.patchprogresspopup._use_2_2_block_title");
joinflow.patchprogresspopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Patch progress"));
    return c.join("");
};
joinflow.patchprogresspopup._use_2_2_block_content = new Surface.Block("joinflow.patchprogresspopup._use_2_2_block_content");
joinflow.patchprogresspopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-loading">\n <img width="30" height="30" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading30x30.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Loading..."));
    c.push('..."/>\n');
    if ((o.data.action == "CheckingForPatch")) {
        c.push(" ");
        c.push(Surface.valOut("Checking for Patch..."));
        c.push("\n");
    } else {
        if ((o.data.action == "Patch")) {
            c.push(" ");
            c.push(Surface.valOut("Patching Game..."));
            c.push("\n");
        } else {
            if ((o.data.action == "Installing")) {
                c.push(" ");
                c.push(Surface.valOut("Installing Game..."));
                c.push("\n");
            }
        }
    }
    if ((o.data.download.file != "")) {
        c.push(" ");
        c.push(Surface.valOut("Downloading file:"));
        c.push(" ");
        c.push(Surface.valOut(o.data.download.file));
        c.push(", ");
        c.push(Surface.valOut("Size:"));
        c.push(" ");
        c.push(Surface.valOut(o.data.download.size));
        c.push(" MB, ");
        c.push(Surface.valOut("Speed:"));
        c.push(" ");
        c.push(Surface.valOut(o.data.download.speed));
        c.push("\n kB/s (");
        c.push(Surface.valOut(o.data.download.progress));
        c.push("%)\n");
    } else {
        if ((o.data.filewrite.file != "")) {
            c.push(" ");
            c.push(Surface.valOut("Writing file:"));
            c.push(" ");
            c.push(Surface.valOut(o.data.filewrite.file));
            c.push(" (");
            c.push(Surface.valOut(o.data.filewrite.progress));
            c.push("%)\n");
        }
    }
    c.push(" (");
    c.push(Surface.valOut(o.data.progress));
    c.push("%)\n </div>\n");
    return c.join("");
};
joinflow.patchprogresspopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.patchprogresspopup._use_2_2_block_footerContainer");
joinflow.patchprogresspopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_personapopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("personapopup"));
joinflow.personapopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_personapopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.personapopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_personapopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_personapopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.personapopup._use_2_2_block_content","title": "joinflow.personapopup._use_2_2_block_title","footerContainer": "joinflow.personapopup._use_2_2_block_footerContainer"});
joinflow.personapopup._use_2_2_block_title = new Surface.Block("joinflow.personapopup._use_2_2_block_title");
joinflow.personapopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((S.Modifier.count(o.personas) > 0)) {
        c.push(" ");
        c.push(Surface.valOut("Select your soldier to play with"));
        c.push("\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut("A soldier is needed to join"));
        c.push("\n");
    }
    return c.join("");
};
joinflow.personapopup._use_2_2_block_content = new Surface.Block("joinflow.personapopup._use_2_2_block_content");
joinflow.personapopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_joinflow_personapopup_16_18_list;
    c.push("\n");
    if ((S.Modifier.count(o.personas) > 0)) {
        c.push('\n <select id="joinflow-personapopup-selectbox" style="clear: both; margin-bottom: 16px;">\n');
        l_for_joinflow_personapopup_16_18_list = o.personas;
        if ((S.Modifier.count(l_for_joinflow_personapopup_16_18_list) > 0)) {
            for (var l_for_joinflow_personapopup_16_18_key in l_for_joinflow_personapopup_16_18_list) {
                if (!Surface.isValidLoopItem(l_for_joinflow_personapopup_16_18_list[l_for_joinflow_personapopup_16_18_key])) {
                    continue;
                }
                var l_persona = l_for_joinflow_personapopup_16_18_list[l_for_joinflow_personapopup_16_18_key];
                c.push(' <option value="');
                c.push(Surface.valOut(l_persona.personaId));
                c.push('">');
                c.push(Surface.valOut(l_persona.personaName));
                c.push("</option>\n");
            }
        }
        c.push(' </select>\n <br>\n <label for="joinflow-personapopup-clantag">');
        c.push(Surface.valOut("Clan tag"));
        c.push('</label>\n <input type="text" value="');
        if ((typeof (l_persona) != "undefined" && l_persona !== null && typeof (l_persona.clanTag) != "undefined" && l_persona.clanTag !== null)) {
            c.push(Surface.valOut(l_persona.clanTag));
        }
        c.push('"\n name="joinflow-personapopup-clantag" id="joinflow-personapopup-clantag"/>\n <input type="button" id="joinflow-personapopup-selectbutton" value="');
        c.push(Surface.valOut("Select"));
        c.push('"\n class="base-button-arrow-large"/>\n');
    } else {
        c.push('\n <p class="joinflow-personapopup-error-semititle">');
        c.push(Surface.valOut("Name your soldier, soldier!"));
        c.push('</p>\n <div id="joinflow-createpersona">\n <form id="createpersona-form" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/profile/createPersona/", Surface.urlContext)));
        c.push('" method="post">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="text" name="personaname" id="joinflow-createpersona-input-name" />\n <p id="joinflow-createpersona-infotag">');
        c.push(Surface.valOut("This name will be visible in-game and in leaderboards"));
        c.push('</p>\n <input class="base-button-arrow-large" type="submit" name="create" value="');
        c.push(Surface.valOut("Create soldier"));
        c.push('"/>\n <input type="hidden" name="redirect" value="serverguide.index"/>\n </form>\n <br>\n <div id="joinflow-createpersona-error"></div>\n </div>\n');
    }
    return c.join("");
};
joinflow.personapopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.personapopup._use_2_2_block_footerContainer");
joinflow.personapopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_pluginpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("pluginpopup"));
joinflow.pluginpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_pluginpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.pluginpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_pluginpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_pluginpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.pluginpopup._use_2_2_block_content","title": "joinflow.pluginpopup._use_2_2_block_title","footerContainer": "joinflow.pluginpopup._use_2_2_block_footerContainer"});
joinflow.pluginpopup._use_2_2_block_title = new Surface.Block("joinflow.pluginpopup._use_2_2_block_title");
joinflow.pluginpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Joining ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null && typeof (o.state.server) != "undefined" && o.state.server !== null && typeof (o.state.server.name) != "undefined" && o.state.server.name !== null) ? o.state.server.name : "server")));
    return c.join("");
};
joinflow.pluginpopup._use_2_2_block_content = new Surface.Block("joinflow.pluginpopup._use_2_2_block_content");
joinflow.pluginpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-plugin-missing-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("Download and install the latest Browser Plugin to play the game."));
    c.push('</h2>\n <input type="button" id="joinflow-show-gamemanager" value="');
    c.push(Surface.valOut("Open Game Manager"));
    c.push('" class="base-button-arrow-large"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.pluginpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.pluginpopup._use_2_2_block_footerContainer");
joinflow.pluginpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n ');
    c.push(Surface.valOut("When you've installed the Browser Plugin"));
    c.push('&nbsp;&nbsp;<input type="button" id="joinflow-pluginpopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('" class="base-button-arrow-tiny gray"/>\n </div>\n');
    return c.join("");
};
var block_joinflow_pluginsuccesspopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("pluginsuccesspopup"));
joinflow.pluginsuccesspopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_pluginsuccesspopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.pluginsuccesspopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_pluginsuccesspopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_pluginsuccesspopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.pluginsuccesspopup._use_2_2_block_content","title": "joinflow.pluginsuccesspopup._use_2_2_block_title","footerContainer": "joinflow.pluginsuccesspopup._use_2_2_block_footerContainer"});
joinflow.pluginsuccesspopup._use_2_2_block_title = new Surface.Block("joinflow.pluginsuccesspopup._use_2_2_block_title");
joinflow.pluginsuccesspopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
joinflow.pluginsuccesspopup._use_2_2_block_content = new Surface.Block("joinflow.pluginsuccesspopup._use_2_2_block_content");
joinflow.pluginsuccesspopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-success">\n <div id="joinflow-plugin-success-image">\n <div id="joinflow-plugin-success-mark"></div>\n </div>\n <div id="joinflow-plugin-installed">\n <h2><span>');
    c.push(Surface.valOut("Web browser plugin"));
    c.push("</span> ");
    c.push(Surface.valOut("installed successfully!"));
    c.push('</h2>\n <input type="button" id="joinflow-pluginsuccesspopup-continuebutton" value="');
    c.push(Surface.valOut("Continue"));
    c.push('"\n class="base-button-arrow-large common-popup-close-button"/>\n </div>\n </div>\n');
    return c.join("");
};
joinflow.pluginsuccesspopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.pluginsuccesspopup._use_2_2_block_footerContainer");
joinflow.pluginsuccesspopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_popupbase = new Surface.BlockConfig("common.popup", {});
joinflow.addTemplate(new Surface.Template("popupbase"));
joinflow.popupbase.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_popupbase;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.popupbase");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
var block_joinflow_popups = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("popups"));
joinflow.popups.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_popups;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.popups");
    c.push("\n");
    c.push(joinflow.popups.surface_2_2.render({"name": ((typeof (o) != "undefined" && o !== null && typeof (o.name) != "undefined" && o.name !== null) ? o.name : null),"show": ((typeof (o) != "undefined" && o !== null && typeof (o.show) != "undefined" && o.show !== null) ? o.show : null),"state": ((typeof (o) != "undefined" && o !== null && typeof (o.state) != "undefined" && o.state !== null) ? o.state : null)}, b, kwargs));
    return c.join("");
};
joinflow.popups.surface_2_2 = new Surface.SingleSurface("joinflow.popups.surface_2_2");
joinflow.popups.surface_2_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_popups;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.popups");
    c.push('<surf:container id="');
    c.push("joinflow-popup");
    c.push('">');
    o.name = o.name;
    o.state = o.state;
    o.show = o.show;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.show) != "undefined" && o.show !== null) ? o.show : false)) {
        c.push("\n");
        if ((o.name == "serveroffline")) {
            c.push(" ");
            c.push(Surface.importTemplate(("joinflow" + ("." + "serveroffline")), o.state, null, kwargs));
            c.push("\n");
        } else {
            if ((o.name == "patchProgress")) {
                c.push(" ");
                c.push(Surface.importTemplate(("joinflow" + ("." + "patchprogresspopup")), o.state, null, kwargs));
                c.push("\n");
            } else {
                if ((o.name == "loading")) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("joinflow" + ("." + "loadingpopup")), o.state, null, kwargs));
                    c.push("\n");
                } else {
                    if ((o.name == "login")) {
                        c.push(" ");
                        c.push(Surface.importTemplate(("joinflow" + ("." + "loginpopup")), o.state, null, kwargs));
                        c.push("\n");
                    } else {
                        if ((o.name == "plugin")) {
                            c.push(" ");
                            c.push(Surface.importTemplate(("joinflow" + ("." + "pluginpopup")), o.state, null, kwargs));
                            c.push("\n");
                        } else {
                            if ((o.name == "patcher")) {
                                c.push(" ");
                                c.push(Surface.importTemplate(("joinflow" + ("." + "patcherpopup")), o.state, null, kwargs));
                                c.push("\n");
                            } else {
                                if ((o.name == "pluginsuccess")) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("joinflow" + ("." + "pluginsuccesspopup")), o.state, null, kwargs));
                                    c.push("\n");
                                } else {
                                    if ((o.name == "bfbc2exe")) {
                                        c.push(" ");
                                        c.push(Surface.importTemplate(("joinflow" + ("." + "bfbc2exepopup")), o.state, null, kwargs));
                                        c.push("\n");
                                    } else {
                                        if ((o.name == "exesuccess")) {
                                            c.push(" ");
                                            c.push(Surface.importTemplate(("joinflow" + ("." + "exesuccesspopup")), o.state, null, kwargs));
                                            c.push("\n");
                                        } else {
                                            if ((o.name == "persona")) {
                                                c.push(" ");
                                                c.push(Surface.importTemplate(("joinflow" + ("." + "personapopup")), o.state, null, kwargs));
                                                c.push("\n");
                                            } else {
                                                if ((o.name == "groupjoin")) {
                                                    c.push(" ");
                                                    c.push(Surface.importTemplate(("joinflow" + ("." + "groupjoinpopup")), o.state, null, kwargs));
                                                    c.push("\n");
                                                } else {
                                                    if ((o.name == "groupjoinprompt")) {
                                                        c.push(" ");
                                                        c.push(Surface.importTemplate(("joinflow" + ("." + "groupjoinprompt")), o.state, null, kwargs));
                                                        c.push("\n");
                                                    } else {
                                                        if ((o.name == "notvalidpersona")) {
                                                            c.push(" ");
                                                            c.push(Surface.importTemplate(("joinflow" + ("." + "notvalidpersonapopup")), o.state, null, kwargs));
                                                            c.push("\n");
                                                        } else {
                                                            if ((o.name == "patch")) {
                                                                c.push(" ");
                                                                c.push(Surface.importTemplate(("joinflow" + ("." + "patchpopup")), o.state, null, kwargs));
                                                                c.push("\n");
                                                            } else {
                                                                if ((o.name == "patchError")) {
                                                                    c.push(" ");
                                                                    c.push(Surface.importTemplate(("joinflow" + ("." + "patcherrorpopup")), o.state, null, kwargs));
                                                                    c.push("\n");
                                                                } else {
                                                                    if ((o.name == "passwordPrompt")) {
                                                                        c.push(" ");
                                                                        c.push(Surface.importTemplate(("joinflow" + ("." + "passwordpromptpopup")), o.state, null, kwargs));
                                                                        c.push("\n");
                                                                    } else {
                                                                        if ((o.name == "install")) {
                                                                            c.push(" ");
                                                                            c.push(Surface.importTemplate(("joinflow" + ("." + "installpopup")), o.state, null, kwargs));
                                                                            c.push("\n");
                                                                        } else {
                                                                            if ((o.name == "tablet")) {
                                                                                c.push(" ");
                                                                                c.push(Surface.importTemplate(("joinflow" + ("." + "tabletpopup")), o.state, null, kwargs));
                                                                                c.push("\n");
                                                                            } else {
                                                                                if ((o.name == "origin")) {
                                                                                    c.push(" ");
                                                                                    c.push(Surface.importTemplate(("joinflow" + ("." + "originpopup")), o.state, null, kwargs));
                                                                                    c.push("\n");
                                                                                } else {
                                                                                    if ((o.name == "buy")) {
                                                                                        c.push(" ");
                                                                                        c.push(Surface.importTemplate(("joinflow" + ("." + "buypopup")), o.state, null, kwargs));
                                                                                        c.push("\n");
                                                                                    } else {
                                                                                        if ((o.name == "bfbc2patching")) {
                                                                                            c.push(" ");
                                                                                            c.push(Surface.importTemplate(("joinflow" + ("." + "bfbc2patchingpopup")), o.state, null, kwargs));
                                                                                            c.push("\n");
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        c.push("\n");
    }
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("joinflow.popups", "surface_2_2", "joinflow-popup", o, b);
    return c.join("");
};
var block_joinflow_serveroffline = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("serveroffline"));
joinflow.serveroffline.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_serveroffline;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.serveroffline");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_serveroffline_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_serveroffline_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.serveroffline._use_2_2_block_content","title": "joinflow.serveroffline._use_2_2_block_title","footerContainer": "joinflow.serveroffline._use_2_2_block_footerContainer"});
joinflow.serveroffline._use_2_2_block_title = new Surface.Block("joinflow.serveroffline._use_2_2_block_title");
joinflow.serveroffline._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Server offline"));
    return c.join("");
};
joinflow.serveroffline._use_2_2_block_content = new Surface.Block("joinflow.serveroffline._use_2_2_block_content");
joinflow.serveroffline._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-game-missing">\n <div id="joinflow-game-image"></div>\n <div id="joinflow-getexe">\n <h2>');
    c.push(Surface.valOut("This server is currently offline. Please try again later."));
    c.push('</h2>\n <input type="button" id="server-offline-button" value="');
    c.push(Surface.valOut("Close"));
    c.push('" class="base-button-arrow-large common-popup-close-button" />\n </div>\n </div>\n');
    return c.join("");
};
joinflow.serveroffline._use_2_2_block_footerContainer = new Surface.Block("joinflow.serveroffline._use_2_2_block_footerContainer");
joinflow.serveroffline._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_joinflow_tabletpopup = new Surface.BlockConfig("", {});
joinflow.addTemplate(new Surface.Template("tabletpopup"));
joinflow.tabletpopup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_joinflow_tabletpopup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("joinflow");
    Surface.Renderer.addUsedTemplate("joinflow.tabletpopup");
    c.push("\n");
    c.push(Surface.importTemplate(("joinflow" + ("." + "popupbase")), o, block_joinflow_tabletpopup_use_2_2, kwargs));
    return c.join("");
};
var block_joinflow_tabletpopup_use_2_2 = new Surface.BlockConfig("joinflow.popupbase", {"content": "joinflow.tabletpopup._use_2_2_block_content","title": "joinflow.tabletpopup._use_2_2_block_title","footerContainer": "joinflow.tabletpopup._use_2_2_block_footerContainer"});
joinflow.tabletpopup._use_2_2_block_title = new Surface.Block("joinflow.tabletpopup._use_2_2_block_title");
joinflow.tabletpopup._use_2_2_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("You're on a tablet"));
    return c.join("");
};
joinflow.tabletpopup._use_2_2_block_content = new Surface.Block("joinflow.tabletpopup._use_2_2_block_content");
joinflow.tabletpopup._use_2_2_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing">\n <div id="joinflow-warning-image"></div>\n <div id="joinflow-getplugin">\n <h2>');
    c.push(Surface.valOut("You can't play the game from this device. Use a PC or console to launch the game."));
    c.push("</h2>\n </div>\n </div>\n");
    return c.join("");
};
joinflow.tabletpopup._use_2_2_block_footerContainer = new Surface.Block("joinflow.tabletpopup._use_2_2_block_footerContainer");
joinflow.tabletpopup._use_2_2_block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="joinflow-popup-greybottom">\n <input type="button" id="joinflow-tabletpopup-closebutton" value="');
    c.push(Surface.valOut("Close"));
    c.push('" class="base-button-arrow-large common-popup-close-button"/>\n </div>\n');
    return c.join("");
};
if (typeof keybinding == "undefined") {
    var keybinding = {};
}
var surf_keybinding_component = new Surface.Component("keybinding");
surf_keybinding_component.extend(keybinding);
keybinding = surf_keybinding_component;
var block_keybinding_base = new Surface.BlockConfig("base.ajaxindex", {"keycontent": "keybinding.base.block_keycontent","titleComponent": "keybinding.base.block_titleComponent","mainContent": "keybinding.base.block_mainContent"});
keybinding.addTemplate(new Surface.Template("base"));
var block_keybinding_edit = new Surface.BlockConfig("keybinding.base", {"keycontent": "keybinding.edit.block_keycontent"});
keybinding.addTemplate(new Surface.Template("edit"));
var block_keybinding_exportsettings = new Surface.BlockConfig("keybinding.base", {"keycontent": "keybinding.exportsettings.block_keycontent"});
keybinding.addTemplate(new Surface.Template("exportsettings"));
var block_keybinding_importsettings = new Surface.BlockConfig("keybinding.base", {"keycontent": "keybinding.importsettings.block_keycontent"});
keybinding.addTemplate(new Surface.Template("importsettings"));
var block_keybinding_index = new Surface.BlockConfig("keybinding.base", {"keycontent": "keybinding.index.block_keycontent"});
keybinding.addTemplate(new Surface.Template("index"));
keybinding.addTemplate(new Surface.Template("joystick"));
keybinding.addTemplate(new Surface.Template("joystickname"));
keybinding.addTemplate(new Surface.Template("keyboard"));
keybinding.addTemplate(new Surface.Template("mouse"));
keybinding.addTemplate(new Surface.Template("mousename"));
keybinding.addTemplate(new Surface.Template("row"));
if (typeof launcher == "undefined") {
    var launcher = {};
}
var surf_launcher_component = new Surface.Component("launcher");
surf_launcher_component.extend(launcher);
launcher = surf_launcher_component;
launcher.addTemplate(new Surface.Template("empty"));
if (typeof leaderboard == "undefined") {
    var leaderboard = {};
}
var surf_leaderboard_component = new Surface.Component("leaderboard");
surf_leaderboard_component.extend(leaderboard);
leaderboard = surf_leaderboard_component;
var block_leaderboard_functions = new Surface.BlockConfig("", {});
leaderboard.addTemplate(new Surface.Template("functions"));
leaderboard.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.functions");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
leaderboard.function_column = function(l_c, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_c == "Name")) {
        return "Soldier";
    }
    if ((l_c == "score")) {
        return "Score";
    }
    if ((l_c == "sc_squad")) {
        return "Squad score";
    }
    if ((l_c == "kills")) {
        return "Kills";
    }
    if ((l_c == "time")) {
        return "Time played";
    }
    if ((l_c == "dogt")) {
        return "Dogtags";
    }
    if ((l_c == "c___k_g")) {
        return "Kills";
    }
    if ((l_c == "c_kany__sa_g")) {
        return "Time played";
    }
    if ((l_c == "rank")) {
        return "Rank";
    }
    if ((l_c == "elo")) {
        return "Skill";
    }
    if ((l_c == "spm")) {
        return "Score per minute";
    }
    if ((l_c == "kdr")) {
        return "K/D ratio";
    }
    return "?";
};
leaderboard.function_timeperiod = function(l_t, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_t == "all")) {
        return "All time";
    }
    if ((l_t == "day")) {
        return "Today";
    }
    if ((l_t == "week")) {
        return "This week";
    }
    if ((l_t == "month")) {
        return "This month";
    }
    return "?";
};
leaderboard.function_leaderboardname = function(l_t, b, kwargs) {
    var o = {};
    var c = [];
    var l_txt;
    var l_missionNameSid;
    var l_diff;
    var l_coopLevel;
    if ((l_t == "MP_MAIN_SKILL")) {
        return "Top Skill";
    }
    if ((l_t == "MP_VEHICLE_AA_KILLS_AA")) {
        return "Anti air kills";
    }
    if ((l_t == "MP_MAIN_RANK")) {
        return "Top Rank";
    }
    if ((l_t == "MP_MAIN_KILLS")) {
        return "Top Kills";
    }
    if ((l_t == "MP_MAIN_SCORE")) {
        return "Top Score";
    }
    if ((l_t == "MP_MAIN_SECONDS")) {
        return "Highest Playtime";
    }
    if ((l_t == "MP_MAIN_SCOREPERMINUTE")) {
        return "Score per minute";
    }
    if ((l_t == "MP_MAIN_SCORE")) {
        return "Top Score";
    }
    if ((l_t == "MP_MAIN_KILLS")) {
        return "Top Kills";
    }
    if ((l_t == "MP_MAIN_SECONDS")) {
        return "Highest Playtime";
    }
    if ((l_t == "MP_MAIN_RANK")) {
        return "Top Rank";
    }
    if ((l_t == "MP_MAIN_SCOREPERMINUTE")) {
        return "Top Score";
    }
    if ((l_t == "MP_MAIN_SKILL")) {
        return "Top Skill";
    }
    if ((l_t == "MP_MAIN_KILLSDEATHSRATIO")) {
        return "Best K/D Ratio";
    }
    if ((l_t == "MP_ASSAULT_SC_ASSAULT")) {
        return "Assault";
    }
    if ((l_t == "MP_ENGINEER_SC_ENGINEER")) {
        return "Engineer";
    }
    if ((l_t == "MP_RECON_SC_RECON")) {
        return "Recon";
    }
    if ((l_t == "MP_SUPPORT_SC_SUPPORT")) {
        return "Support";
    }
    if ((l_t == "MP_VEHICLE_MBT_KILLS_MBT")) {
        return "MBT Vehicles";
    }
    if ((l_t == "MP_VEHICLE_IFV_KILLS_IFV")) {
        return "IFV Vehicles";
    }
    if ((l_t == "MP_VEHICLE_AA_KILLS_AA")) {
        return "Anti Air vehicles";
    }
    if ((l_t == "MP_VEHICLE_AH_KILLS_AH")) {
        return "Attack Helicopter kills";
    }
    if ((l_t == "MP_VEHICLE_SH_KILLS_SH")) {
        return "Heli Scout";
    }
    if ((l_t == "MP_VEHICLE_JET_KILLS_JET")) {
        return "Jet";
    }
    if ((l_t == "MP_VEHICLE_ALL_KILLS_VEHICLEALL")) {
        return "Vehicles";
    }
    if ((l_t == "MP_ACCURACY_ACCURACY")) {
        return "Accuracy";
    }
    if ((l_t == "MP_MELEE_KILLS_MELEE")) {
        return "Melee kills";
    }
    if ((l_t == "MP_MARKSMAN_LONGEST_HEADSHOT")) {
        return "Longest Headshot";
    }
    if ((l_t == "MP_HEADSHOTS_")) {
        return "Headshots";
    }
    if ((l_t == "MP_WLR_WIN_LOSS_RATIO")) {
        return "Wins Losses";
    }
    if ((l_t == "MP_KILL_STREAK_KILL_STREAK")) {
        return "Killstreak";
    }
    if ((l_t == "MP_NEMESIS_NEMESIS")) {
        return "Nemesis";
    }
    if ((l_t == "MP_ACE_SQUAD_ASQ_RIBBONS")) {
        return "Best Squad";
    }
    if ((l_t == "MP_MVP_MVP_RIBBONS")) {
        return "Most valuable player";
    }
    if (S.Modifier.isInString(l_t, "COOP_")) {
        l_coopLevel = S.Modifier.substring(l_t, 0, 8);
        l_missionNameSid = S.Modifier.get($S.callFunction("coop.coopmission", l_coopLevel, b, kwargs), "title");
        l_txt = (S.translations[l_missionNameSid] || l_missionNameSid);
        l_diff = S.Modifier.capitalize(S.Modifier.lower(S.Modifier.substring(l_t, 9)));
        return S.Modifier.concat(S.Modifier.concat(l_txt, " "), l_diff);
    }
    return l_t;
};
leaderboard.function_leaderboardTitle = function(l_t, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_t == "score")) {
        return "Score";
    }
    if ((l_t == "c___k_g")) {
        return "Kills";
    }
    if ((l_t == "kills")) {
        return "Kills";
    }
    if ((l_t == "spm")) {
        return "SPM";
    }
    if ((l_t == "c_kany__sa_g")) {
        return "Time played";
    }
    if ((l_t == "playtime")) {
        return "Time played";
    }
    if ((l_t == "elo")) {
        return "Skill";
    }
    if ((l_t == "kdr")) {
        return "W/L Ratio";
    }
    if ((l_t == "rank")) {
        return "Rank";
    }
    if ((l_t == "ribbons")) {
        return "Ribbons";
    }
    if ((l_t == "nemesis")) {
        return "Nemesis";
    }
    if ((l_t == "streak")) {
        return "Streak";
    }
    if ((l_t == "win_loss_ratio")) {
        return "W/L Ratio";
    }
    if ((l_t == "win")) {
        return "Wins";
    }
    if ((l_t == "loss")) {
        return "Losses";
    }
    if ((l_t == "headshot")) {
        return "Headshots";
    }
    if ((l_t == "distance")) {
        return "Distance";
    }
    if ((l_t == "shots")) {
        return "Shots";
    }
    if ((l_t == "hits")) {
        return "Hits";
    }
    if ((l_t == "accuracy")) {
        return "Accuracy";
    }
    if ((l_t == "lct_glva")) {
        return "Shortest playtime";
    }
    if ((l_t == "c_co2_coopeasy_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "c_co3_coopeasy_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "c_co6_coopeasy_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "c_co7_coopeasy_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "c_co9_coopeasy_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "c_co10_coophard_ts_ghva")) {
        return "Score";
    }
    if ((l_t == "Coop_002")) {
        return "Level 2";
    }
    if ((l_t == "Coop_003")) {
        return "Level 3";
    }
    if ((l_t == "Coop_006")) {
        return "Level 6";
    }
    if ((l_t == "Coop_007")) {
        return "Level 7";
    }
    if ((l_t == "Coop_009")) {
        return "Level 9";
    }
    if ((l_t == "Coop_010")) {
        return "Level 10";
    }
    if ((l_t == "coopeasy_ts_ghva")) {
        return "Score, Easy";
    }
    if ((l_t == "coopmedium_ts_ghva")) {
        return "Score, Medium";
    }
    if ((l_t == "coophard_ts_ghva")) {
        return "Score, Hard";
    }
    if ((l_t == "undefined")) {
        return "";
    }
    return l_t;
};
var block_leaderboard_header = new Surface.BlockConfig("", {});
leaderboard.addTemplate(new Surface.Template("header"));
leaderboard.header.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_header;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.header");
    var l_tabname;
    var l_for_leaderboard_header_48_30_list;
    var l_for_leaderboard_header_64_14_list;
    var l_missionNameSid;
    var l_realm;
    var l_tablist;
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push('\n<div class="tabs-outer">\n <div class="tabs-container">\n <div id="leaderboard-filters">\n <div class="leaderboard-title">\n <h1 class="base-big-title wfont">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.title) != "undefined" && o.title !== null) ? o.title : "Multiplayer Leaderboards")));
    c.push("</h1>\n </div>\n");
    if (Surface.globalContext.staticContext.venice) {
        if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
            c.push(' <div class="leaderboard-navigation-container">\n <div class="leaderboard-container-filters">\n <input id=leaderboard-category type=hidden value="');
            c.push(Surface.valOut(o.url.category));
            c.push('">\n <ul class="common-selector">\n');
            if (o.url.name) {
                c.push(' <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 2)) {
                    c.push("selected");
                }
                c.push('" keyvalue="2"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 2,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="xbox360"><p></p></div></a></li>\n <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 4)) {
                    c.push("selected");
                }
                c.push('" keyvalue="4"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 4,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="ps3"><p></p></div></a></li>\n <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 1)) {
                    c.push("selected");
                }
                c.push('" keyvalue="1"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 1,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="pc"><p></p></div></a></li>\n');
            } else {
                c.push(' <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 2)) {
                    c.push("selected");
                }
                c.push('" keyvalue="2"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 2,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="xbox360"><p></p></div></a></li>\n <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 4)) {
                    c.push("selected");
                }
                c.push('" keyvalue="4"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 4,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="ps3"><p></p></div></a></li>\n <li class="platform ');
                if ((S.Modifier.toint(o.url.platform) == 1)) {
                    c.push("selected");
                }
                c.push('" keyvalue="1"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": 1,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><div class="pc"><p></p></div></a></li>\n');
            }
            c.push(' </ul>\n </div>\n <div class="leaderboard-container-filters">\n <ul class="common-selector">\n');
            if (o.url.name) {
                c.push(' <li class="friends ');
                if (o.url.friends) {
                    c.push("selected");
                }
                c.push('" keyvalue=1><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": o.url.platform,"friends": 1,"username": o.url.username})));
                c.push('"><div class="friends"><p>');
                c.push(Surface.valOut(S.Modifier.upper("Friends")));
                c.push('</p></div></a></li>\n <li class="friends ');
                if (!(o.url.friends)) {
                    c.push("selected");
                }
                c.push('" keyvalue=0><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": o.url.platform,"friends": 0,"username": o.url.username})));
                c.push('"><div class="global"><p>');
                c.push(Surface.valOut(S.Modifier.upper("ALL")));
                c.push("</p></div></a></li>\n");
            } else {
                c.push(' <li class="friends ');
                if (o.url.friends) {
                    c.push("selected");
                }
                c.push('" keyvalue=1><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": o.url.platform,"friends": 1,"username": o.url.username})));
                c.push('"><div class="friends"><p>');
                c.push(Surface.valOut(S.Modifier.upper("Friends")));
                c.push('</p></div></a></li>\n <li class="friends ');
                if (!(o.url.friends)) {
                    c.push("selected");
                }
                c.push('" keyvalue=0><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"page": 1,"group": o.url.group,"name": o.url.name,"category": o.url.category,"platform": o.url.platform,"friends": 0,"username": o.url.username})));
                c.push('"><div class="global"><p>');
                c.push(Surface.valOut(S.Modifier.upper("ALL")));
                c.push("</p></div></a></li>\n");
            }
            c.push(" </ul>\n </div>\n <select class=\"leaderboard-navigation-select leaderboard-goto\" onchange='leaderboard.dropdownSelected();'>\n");
            if (o.url.name) {
                c.push(' <option value="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext)));
                c.push('">');
                c.push(Surface.valOut("Back to leaderboard..."));
                c.push("</option>\n");
            } else {
                c.push(' <option value="">');
                c.push(Surface.valOut("Jump to leaderboard..."));
                c.push("</option>\n");
            }
            l_for_leaderboard_header_48_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboardlist) != "undefined" && o.leaderboardlist !== null) ? o.leaderboardlist : []);
            if ((S.Modifier.count(l_for_leaderboard_header_48_30_list) > 0)) {
                for (var l_for_leaderboard_header_48_30_key in l_for_leaderboard_header_48_30_list) {
                    if (!Surface.isValidLoopItem(l_for_leaderboard_header_48_30_list[l_for_leaderboard_header_48_30_key])) {
                        continue;
                    }
                    var l_name = l_for_leaderboard_header_48_30_list[l_for_leaderboard_header_48_30_key];
                    c.push(' <option value="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"group": o.url.group,"page": 1,"name": l_name,"category": o.url.category,"platform": o.url.platform,"friends": o.url.friends,"username": o.url.username})));
                    c.push('" ');
                    if ((o.url.name == l_name)) {
                        c.push("selected");
                    }
                    c.push(">");
                    c.push(Surface.valOut($S.callFunction("leaderboard.leaderboardname", S.Modifier.upper(l_name), b, kwargs)));
                    c.push("</option>\n");
                }
            }
            c.push(" </select>\n </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n </div>\n <ul class="tabs">\n');
    if ((o.url.category == "coop")) {
        l_tablist = ["coop_007", "coop_006", "coop_009", "coop_002", "coop_003", "coop_010"];
    } else {
        l_tablist = ["progression", "skill", "kills", "kit", "ground", "air", "team"];
    }
    l_for_leaderboard_header_64_14_list = l_tablist;
    if ((S.Modifier.count(l_for_leaderboard_header_64_14_list) > 0)) {
        for (var l_for_leaderboard_header_64_14_key in l_for_leaderboard_header_64_14_list) {
            if (!Surface.isValidLoopItem(l_for_leaderboard_header_64_14_list[l_for_leaderboard_header_64_14_key])) {
                continue;
            }
            var l_lbGroup = l_for_leaderboard_header_64_14_list[l_for_leaderboard_header_64_14_key];
            c.push(' <li class="leaderboard-tabs ');
            if ((o.url.group == l_lbGroup)) {
                c.push("active");
            }
            c.push('">\n');
            if ((o.url.category == "coop")) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/coop/{group}/{platform}/{friends}/", Surface.urlContext, {"group": l_lbGroup,"category": o.url.category,"platform": o.url.platform,"friends": o.url.friends,"username": o.url.username})));
                c.push('">\n');
                l_missionNameSid = S.Modifier.get($S.callFunction("coop.coopmission", S.Modifier.upper(l_lbGroup), b, kwargs), "title");
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.capitalize(S.Modifier.lower((S.translations[l_missionNameSid] || l_missionNameSid)))));
                c.push("\n </a>\n");
            } else {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"group": l_lbGroup,"category": o.url.category,"platform": o.url.platform,"friends": o.url.friends,"username": o.url.username})));
                c.push('"><span class="tab-icon ');
                c.push(Surface.valOut((S.translations[l_lbGroup] || l_lbGroup)));
                c.push('"></span>');
                l_tabname = ("ID_WEB_LEADERBOARD_TABLIST_" + S.Modifier.upper(l_lbGroup));
                c.push(Surface.valOut((S.translations[l_tabname] || l_tabname)));
                c.push("</a>\n");
            }
            c.push(" </li>\n");
        }
    }
    c.push(" </ul>\n ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.backLink) != "undefined" && o.backLink !== null) && o.backLink)) {
        c.push('<div class="leaderboard-navigation-back"><a href="');
        if ((o.url.category == "coop")) {
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/coop/{group}/{platform}/{friends}/", Surface.urlContext, {"username": o.url.username})));
        } else {
            if ((o.url.category == "soldier")) {
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"username": o.url.username})));
            } else {
                if ((o.url.category == "platoons")) {
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/platoons/", Surface.urlContext, {"username": o.url.username})));
                }
            }
        }
        c.push('">');
        c.push(Surface.valOut("Back to Overview"));
        c.push("</a></div>");
    }
    c.push('\n <div class="base-clear"></div>\n </div>\n</div>');
    return c.join("");
};
var block_leaderboard_index = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "leaderboard.index.block_titleComponent","leaderboard": "leaderboard.index.block_leaderboard","mainContent": "leaderboard.index.block_mainContent"});
leaderboard.addTemplate(new Surface.Template("index"));
leaderboard.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.index");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
leaderboard.index.block_titleComponent = new Surface.Block("leaderboard.index.block_titleComponent");
leaderboard.index.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Multiplayer Leaderboards"));
    c.push(" - ");
    return c.join("");
};
leaderboard.index.block_leaderboard = new Surface.Block("leaderboard.index.block_leaderboard");
leaderboard.index.block_leaderboard.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" <tbody>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.fetchUrl) != "undefined" && o.fetchUrl !== null)) {
        c.push(' <tr id="leaderboard-fetch-url">\n <input type="hidden" value="');
        c.push(Surface.valOut(o.fetchUrl));
        c.push('" />\n <td colspan="100">');
        c.push(Surface.valOut("Loading leaderboard..."));
        c.push("</td>\n </tr>\n");
    }
    c.push(" ");
    c.push(Surface.importTemplate(("leaderboard" + ("." + "rows")), o, null, kwargs));
    c.push("\n </tbody>\n");
    return c.join("");
};
leaderboard.index.block_mainContent = new Surface.Block("leaderboard.index.block_mainContent");
leaderboard.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_leaderboard_index_23_26_list;
    var l_for_leaderboard_index_23_26_iteration;
    var l_for_leaderboard_index_23_26_count;
    var l_realm;
    var l_for_leaderboard_index_23_26_hasNext;
    var l_for_leaderboard_index_49_30_list;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push('\n<div id="main-login-upper" class="base-upper"></div>\n<div id="leaderboard-index">\n <div class="base-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="base-middle-content">\n');
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BFBC2)) {
        c.push(' <div id="leaderboard-filters">\n <h1 class="base-big-title wfont">');
        c.push(Surface.valOut("Multiplayer Leaderboards"));
        c.push('</h1>\n <div class="leaderboard-filter leaderboard-filter-platform">\n');
        l_for_leaderboard_index_23_26_list = o.leaderboardPlatforms;
        l_for_leaderboard_index_23_26_count = S.Modifier.count(l_for_leaderboard_index_23_26_list);
        l_for_leaderboard_index_23_26_iteration = 0;
        if ((S.Modifier.count(l_for_leaderboard_index_23_26_list) > 0)) {
            c.push(' <ul class="common-selector">\n');
            for (var l_for_leaderboard_index_23_26_key in l_for_leaderboard_index_23_26_list) {
                if (!Surface.isValidLoopItem(l_for_leaderboard_index_23_26_list[l_for_leaderboard_index_23_26_key])) {
                    continue;
                }
                var l_platform = l_for_leaderboard_index_23_26_list[l_for_leaderboard_index_23_26_key];
                l_for_leaderboard_index_23_26_iteration = (l_for_leaderboard_index_23_26_iteration + 1);
                l_for_leaderboard_index_23_26_hasNext = (l_for_leaderboard_index_23_26_iteration < l_for_leaderboard_index_23_26_count);
                o.platformUrl = S.Modifier.set(S.Modifier.set(S.Modifier.objcopy(o.url), "platformString", S.Modifier.lower($S.callFunction("base.platform", l_platform, b, kwargs))), "page", 1);
                c.push(' <li class="');
                if ((l_for_leaderboard_index_23_26_iteration == 1)) {
                    c.push("first");
                } else {
                    if (!(l_for_leaderboard_index_23_26_hasNext)) {
                        c.push("last");
                    }
                }
                c.push(" ");
                if ((l_platform == o.selectedPlatform)) {
                    c.push("selected");
                }
                c.push('"><div class="');
                c.push(Surface.valOut(S.Modifier.lower($S.callFunction("base.platform", l_platform, b, kwargs))));
                c.push('"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, o.platformUrl)));
                c.push('"><p>');
                c.push(Surface.valOut($S.callFunction("base.platform", l_platform, b, kwargs)));
                c.push("</p></a></div></li>\n");
            }
            c.push(" </ul>\n");
        }
        c.push(' </div>\n <div class="base-clear"></div>\n </div>\n');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null)) {
            c.push(" ");
            c.push(Surface.importTemplate(("main" + ("." + "gamestats")), o, null, kwargs));
            c.push("\n");
        }
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("leaderboard" + ("." + "header")), {"leaderboardPlatforms": o.leaderboardPlatforms,"leaderboardlist": o.leaderboardlist,"selectedPlatform": o.selectedPlatform,"url": o.url,"backLink": true,"filterPlayers": true}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div id="leaderboard-result">\n <table>\n <thead>\n <tr>\n <th id="lbcol-pos">#</th>\n <th id="lbcol-soldname" style="width: 320px;" class="leaderboard-align-left">');
    c.push(Surface.valOut("Soldier name"));
    c.push("</th>\n");
    l_for_leaderboard_index_49_30_list = o.currentLeaderboardDescription.columns;
    if ((S.Modifier.count(l_for_leaderboard_index_49_30_list) > 0)) {
        for (var l_for_leaderboard_index_49_30_key in l_for_leaderboard_index_49_30_list) {
            if (!Surface.isValidLoopItem(l_for_leaderboard_index_49_30_list[l_for_leaderboard_index_49_30_key])) {
                continue;
            }
            var l_leaderboardColumn = l_for_leaderboard_index_49_30_list[l_for_leaderboard_index_49_30_key];
            c.push(' <th id="lbcol">');
            c.push(Surface.valOut($S.callFunction("leaderboard.column", l_leaderboardColumn.name, b, kwargs)));
            c.push("</th>\n");
        }
    }
    c.push(" </tr>\n </thead>\n");
    c.push(b.get("leaderboard")(o, b, kwargs));
    c.push(" </table>\n </div>\n </div>\n </div>\n</div>\n");
    return c.join("");
};
var block_leaderboard_rows = new Surface.BlockConfig("", {});
leaderboard.addTemplate(new Surface.Template("rows"));
leaderboard.rows.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_rows;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.rows");
    var l_for_leaderboard_rows_25_14_list;
    var l_for_leaderboard_rows_4_6_list;
    var l_session;
    var l_for_leaderboard_rows_11_14_list;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboard) != "undefined" && o.leaderboard !== null)) {
        l_for_leaderboard_rows_4_6_list = o.leaderboard.entries;
        if ((S.Modifier.count(l_for_leaderboard_rows_4_6_list) > 0)) {
            if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && S.Modifier.count(o.myLeaderboardEntries))) {
                l_for_leaderboard_rows_25_14_list = o.myLeaderboardEntries;
                for (var l_for_leaderboard_rows_25_14_key in l_for_leaderboard_rows_25_14_list) {
                    if (!Surface.isValidLoopItem(l_for_leaderboard_rows_25_14_list[l_for_leaderboard_rows_25_14_key])) {
                        continue;
                    }
                    var l_myLeaderboardEntry = l_for_leaderboard_rows_25_14_list[l_for_leaderboard_rows_25_14_key];
                    c.push(' <tr class="leaderboard-myposition">\n <td>\n');
                    o.mySoldierFilterUrl = S.Modifier.set(S.Modifier.objcopy(o.url), "paginationOffset", (l_myLeaderboardEntry.rank - 30));
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, o.mySoldierFilterUrl)));
                    c.push('">');
                    if ((l_myLeaderboardEntry.rank > 1000)) {
                        c.push("+1001");
                    } else {
                        c.push(Surface.valOut(l_myLeaderboardEntry.rank));
                    }
                    c.push('</a>\n </td>\n <td class="leaderboard-align-left">\n ');
                    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_session.user,"gravatarSize": 52}, null, kwargs));
                    c.push('\n <span><a style="line-height:50px;" href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_session.user.username})));
                    c.push('">');
                    c.push(Surface.valOut(l_myLeaderboardEntry.personaName));
                    c.push("</a></span>\n </td>\n <td>\n ");
                    c.push(Surface.valOut(S.Modifier.get(l_myLeaderboardEntry.rankedStats, "score")));
                    c.push("\n </td>\n <td>\n ");
                    c.push(Surface.valOut(S.Modifier.get(l_myLeaderboardEntry.rankedStats, "sc_squad")));
                    c.push("\n </td>\n <td>\n ");
                    c.push(Surface.valOut(S.Modifier.get(l_myLeaderboardEntry.rankedStats, "kills")));
                    c.push("\n </td>\n <td>\n ");
                    c.push(Surface.valOut(S.Modifier.get(l_myLeaderboardEntry.rankedStats, "dogt")));
                    c.push("\n </td>\n <td>\n ");
                    c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(l_myLeaderboardEntry.rankedStats, "time"))));
                    c.push("\n </td>\n </tr>\n");
                }
                c.push("\n");
            }
            for (var l_for_leaderboard_rows_4_6_key in l_for_leaderboard_rows_4_6_list) {
                if (!Surface.isValidLoopItem(l_for_leaderboard_rows_4_6_list[l_for_leaderboard_rows_4_6_key])) {
                    continue;
                }
                var l_leaderboardEntry = l_for_leaderboard_rows_4_6_list[l_for_leaderboard_rows_4_6_key];
                c.push(" <tr>\n <td><strong>");
                c.push(Surface.valOut(l_leaderboardEntry.rank));
                c.push('</strong></td>\n <td class="leaderboard-align-left">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_leaderboardEntry, o.selectedGame, o.selectedPlatform, b, kwargs))));
                c.push('">');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"hideLink": true,"gravatarSize": 30,"user": ((typeof (l_leaderboardEntry) != "undefined" && l_leaderboardEntry !== null && typeof (l_leaderboardEntry.persona) != "undefined" && l_leaderboardEntry.persona !== null && typeof (l_leaderboardEntry.persona.user) != "undefined" && l_leaderboardEntry.persona.user !== null) ? l_leaderboardEntry.persona.user : null),"personaId": l_leaderboardEntry.personaId}, null, kwargs));
                c.push('</a>\n <span style="position:absolute; left:95px;"><a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_leaderboardEntry, o.selectedGame, o.selectedPlatform, b, kwargs))));
                c.push('" style="line-height:27px;">');
                c.push(Surface.valOut(l_leaderboardEntry.personaName));
                c.push("</a></span>\n </td>\n");
                l_for_leaderboard_rows_11_14_list = o.currentLeaderboardDescription.columns;
                if ((S.Modifier.count(l_for_leaderboard_rows_11_14_list) > 0)) {
                    for (var l_category in l_for_leaderboard_rows_11_14_list) {
                        if (!Surface.isValidLoopItem(l_for_leaderboard_rows_11_14_list[l_category])) {
                            continue;
                        }
                        var l_column = l_for_leaderboard_rows_11_14_list[l_category];
                        o.value = S.Modifier.get(l_leaderboardEntry.rankedStats, l_column.name);
                        if ((l_column.type == o.leaderboardColumnTypes.TIMEINSECONDS)) {
                            o.value = S.Modifier.duration(o.value);
                        } else {
                            if ((l_column.type == o.leaderboardColumnTypes.NUMBER)) {
                                o.value = S.Modifier.replace(o.value, ".00", "");
                            }
                        }
                        c.push(" <td>\n <p>");
                        c.push(S.Modifier.nbs(o.value));
                        c.push("</p>\n </td>\n");
                    }
                }
                c.push(" </tr>\n");
            }
        }
    }
    return c.join("");
};
var block_leaderboard_searchresult = new Surface.BlockConfig("leaderboard.index", {"leaderboard": "leaderboard.searchresult.block_leaderboard"});
leaderboard.addTemplate(new Surface.Template("searchresult"));
leaderboard.searchresult.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_searchresult;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.searchresult");
    c.push("\n");
    return Surface.importTemplate("leaderboard.index", o, b, kwargs);
};
leaderboard.searchresult.block_leaderboard = new Surface.Block("leaderboard.searchresult.block_leaderboard");
leaderboard.searchresult.block_leaderboard.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" <tr>\n <td><strong>");
    c.push(Surface.valOut(o.leaderboard.rank));
    c.push('</strong></td>\n <td class="leaderboard-align-left">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52}, null, kwargs));
    c.push("***<span>");
    c.push(Surface.valOut(o.leaderboard.personaName));
    c.push("</span>\n </td>\n <td>\n ");
    c.push(Surface.valOut(S.Modifier.get(o.leaderboard.rankedStats, "score")));
    c.push("\n </td>\n <td>\n ");
    c.push(Surface.valOut(S.Modifier.get(o.leaderboard.rankedStats, "sc_squad")));
    c.push("\n </td>\n <td>\n ");
    c.push(Surface.valOut(S.Modifier.get(o.leaderboard.rankedStats, "kills")));
    c.push("\n </td>\n <td>\n ");
    c.push(Surface.valOut(S.Modifier.get(o.leaderboard.rankedStats, "dogt")));
    c.push("\n </td>\n <td>\n ");
    c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(o.leaderboard.rankedStats, "time"))));
    c.push("\n </td>\n </tr>\n");
    return c.join("");
};
var block_leaderboard_specific = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "leaderboard.specific.block_titleComponent","titleItem": "leaderboard.specific.block_titleItem","mainContent": "leaderboard.specific.block_mainContent"});
leaderboard.addTemplate(new Surface.Template("specific"));
leaderboard.specific.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_specific;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.specific");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
leaderboard.specific.block_titleComponent = new Surface.Block("leaderboard.specific.block_titleComponent");
leaderboard.specific.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Multiplayer Leaderboards - ");
    return c.join("");
};
leaderboard.specific.block_titleItem = new Surface.Block("leaderboard.specific.block_titleItem");
leaderboard.specific.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (Surface.globalContext.staticContext.venice) {
        c.push("Score - ");
    }
    return c.join("");
};
leaderboard.specific.surface_10_9 = new Surface.SingleSurface("leaderboard.specific.surface_10_9");
leaderboard.specific.surface_10_9.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_specific;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.specific");
    c.push('<surf:container id="');
    c.push("leaderboardSpecific");
    c.push('">');
    var l_item;
    var l_for_leaderboard_specific_65_37_list;
    var l_rank;
    var l_title;
    var l_for_leaderboard_specific_90_49_list;
    var l_for_leaderboard_specific_50_49_list;
    var l_prev;
    var l_numCols;
    var l_width;
    var l_for_leaderboard_specific_65_37_iteration;
    var l_allColumns;
    var l_gravatarSize;
    var l_col;
    var l_val;
    c.push(' <div id="main-middle">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.stats) != "undefined" && o.stats !== null)) {
        if ((o.url.category == "coop")) {
            l_title = "COOP Leaderboards";
        } else {
            l_title = "Multiplayer Leaderboards";
        }
        c.push(" ");
        c.push(Surface.importTemplate(("leaderboard" + ("." + "header")), {"leaderboardlist": o.leaderboardlist,"appendTitle": o.url.name,"title": l_title,"leaderboardPlatforms": o.leaderboardPlatforms,"selectedPlatform": o.selectedPlatform,"url": o.url,"backLink": true,"filterPlayers": true}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div class="base-middle-content">\n <div id="specific" style="display: none;"></div>\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.stats) != "undefined" && o.stats !== null)) {
        c.push(' <div id="multiplayer-specific-leaderboard-container">\n <div class="leaderboard-venice-specific-wrapper">\n <table cellpadding="0" cellspacing="0" class="leaderboard-venice-specific">\n <thead>\n <tr>\n <th class="leaderboard-venice-specific-head-rank">#</th>\n');
        l_item = S.Modifier.get(o.stats.entries, 0);
        c.push("\n");
        l_numCols = S.Modifier.count(S.Modifier.get(l_item, "rankedStats", []));
        if ((l_numCols == 1)) {
            l_width = 760;
        } else {
            if ((l_numCols == 2)) {
                l_width = 555;
            } else {
                if ((l_numCols == 3)) {
                    l_width = 650;
                } else {
                    l_width = 468;
                }
            }
        }
        c.push(' <th class="leaderboard-venice-specific-head-player" style="width: ');
        c.push(Surface.valOut(l_width));
        c.push('px;">');
        c.push(Surface.valOut("Player"));
        c.push("</th>\n");
        l_allColumns = ["coopeasy_ts_ghva", "coopmedium_ts_ghva", "coophard_ts_ghva", "streak", "distance", "hits", "nemesis", "elo", "kills", "loss", "wins", "win_loss_ratio", "c___k_g", "rank", "lct_glva", "score", "spm", "shots", "playtime", "headshot", "ribbons", "kdr", "accuracy"];
        if ((o.url.category != "coop")) {
            l_for_leaderboard_specific_50_49_list = l_allColumns;
            if ((S.Modifier.count(l_for_leaderboard_specific_50_49_list) > 0)) {
                for (var l_for_leaderboard_specific_50_49_key in l_for_leaderboard_specific_50_49_list) {
                    if (!Surface.isValidLoopItem(l_for_leaderboard_specific_50_49_list[l_for_leaderboard_specific_50_49_key])) {
                        continue;
                    }
                    var l_i = l_for_leaderboard_specific_50_49_list[l_for_leaderboard_specific_50_49_key];
                    if (((l_i != o.stats.sortedColumn) && (S.Modifier.get(S.Modifier.get(l_item, "rankedStats"), l_i, -(1)) != -(1)))) {
                        c.push(' <th class="leaderboard-venice-specific-head-');
                        if (((l_i == "playtime") || (l_i == "c_kany__sa_g"))) {
                            c.push("timeplayed");
                        } else {
                            c.push("default");
                        }
                        c.push('">');
                        c.push(Surface.valOut($S.callFunction("leaderboard.leaderboardTitle", l_i, b, kwargs)));
                        c.push("</th>\n");
                    }
                }
            }
        }
        c.push(' <th class="leaderboard-venice-specific-head-');
        if (((o.stats.sortedColumn == "playtime") || (o.stats.sortedColumn == "c_kany__sa_g"))) {
            c.push("timeplayed");
        } else {
            c.push("default");
        }
        c.push(' active">');
        c.push(Surface.valOut($S.callFunction("leaderboard.leaderboardTitle", o.stats.sortedColumn, b, kwargs)));
        c.push("</th>\n </tr>\n </thead>\n <tbody>\n ");
        if (!(S.Modifier.count(o.stats))) {
            c.push("<tr><td colspan=5>Leaderboard is empty.</td></tr>");
        }
        c.push("\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : 0)) {
            c.push(" <tr><td colspan=5>");
            c.push(Surface.valOut(o.message));
            c.push("</td></tr>\n");
        }
        l_for_leaderboard_specific_65_37_list = o.stats.entries;
        l_for_leaderboard_specific_65_37_iteration = 0;
        if ((S.Modifier.count(l_for_leaderboard_specific_65_37_list) > 0)) {
            for (var l_for_leaderboard_specific_65_37_key in l_for_leaderboard_specific_65_37_list) {
                if (!Surface.isValidLoopItem(l_for_leaderboard_specific_65_37_list[l_for_leaderboard_specific_65_37_key])) {
                    continue;
                }
                var l_item = l_for_leaderboard_specific_65_37_list[l_for_leaderboard_specific_65_37_key];
                l_for_leaderboard_specific_65_37_iteration = (l_for_leaderboard_specific_65_37_iteration + 1);
                if (o.url.friends) {
                    l_rank = l_for_leaderboard_specific_65_37_iteration;
                } else {
                    l_rank = S.Modifier.toint(l_item.rank);
                }
                c.push(' <tr class="leaderboard-venice-specific-row');
                if ((l_rank <= 10)) {
                    c.push(" leaderboard-venice-specific-top10");
                }
                if ((l_rank == 1)) {
                    c.push(" first");
                }
                c.push('">\n <td class="leaderboard-venice-specific-cell leaderboard-venice-specific-body-rank" valign=center>\n');
                if ((l_rank < 4)) {
                    c.push(' <div class="leaderboard-pos123-outer"><div class="leaderboard-specific-top3 pos');
                    c.push(Surface.valOut(l_rank));
                    c.push('"></div></div>\n');
                } else {
                    c.push(" ");
                    c.push(Surface.valOut(l_rank));
                    c.push("\n");
                }
                c.push(' </td>\n <td class="leaderboard-venice-specific-cell leaderboard-venice-specific-body-player">\n <div class="leaderboard-venice-specific-body-player-avatar">\n');
                l_gravatarSize = 22;
                if ((l_rank <= 10)) {
                    l_gravatarSize = 30;
                }
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.persona) != "undefined" && l_item.persona !== null && typeof (l_item.persona.user) != "undefined" && l_item.persona.user !== null) ? l_item.persona.user : false),"gravatarSize": l_gravatarSize}, null, kwargs));
                c.push("\n </div>\n ");
                if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.persona) != "undefined" && l_item.persona !== null && typeof (l_item.persona.user) != "undefined" && l_item.persona.user !== null) ? l_item.persona.user : false)) {
                    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": l_item.persona.user.username}, null, kwargs));
                } else {
                    c.push(Surface.valOut(l_item.personaName));
                }
                c.push("\n </td>\n");
                if ((o.url.category != "coop")) {
                    l_for_leaderboard_specific_90_49_list = l_allColumns;
                    if ((S.Modifier.count(l_for_leaderboard_specific_90_49_list) > 0)) {
                        for (var l_for_leaderboard_specific_90_49_key in l_for_leaderboard_specific_90_49_list) {
                            if (!Surface.isValidLoopItem(l_for_leaderboard_specific_90_49_list[l_for_leaderboard_specific_90_49_key])) {
                                continue;
                            }
                            var l_col = l_for_leaderboard_specific_90_49_list[l_for_leaderboard_specific_90_49_key];
                            if (((l_col != o.stats.sortedColumn) && (S.Modifier.get(S.Modifier.get(l_item, "rankedStats"), l_col, -(1)) != -(1)))) {
                                c.push(' <td class="leaderboard-venice-specific-cell leaderboard-venice-specific-body-default">\n');
                                l_val = S.Modifier.get(S.Modifier.get(l_item, "rankedStats"), l_col);
                                c.push("\n");
                                if ((((l_col == "c_kany__sa_g") || (l_col == "playtime")) || (l_col == "lct_glva"))) {
                                    c.push(" ");
                                    c.push(Surface.valOut(S.Modifier.duration(l_val)));
                                    c.push("\n");
                                } else {
                                    if ((((l_col == "coopeasy_ts_ghva") || (l_col == "coopmedium_ts_ghva")) || (l_col == "coophard_ts_ghva"))) {
                                        c.push(" ");
                                        c.push(Surface.valOut(S.Modifier.round(l_val, 2)));
                                        c.push("\n");
                                    } else {
                                        if ((l_col == "accuracy")) {
                                            c.push(" ");
                                            c.push(Surface.valOut(S.Modifier.toint((l_val * 100))));
                                            c.push("%\n");
                                        } else {
                                            if (((l_col == "kdr") || (l_col == "win_loss_ratio"))) {
                                                c.push(" ");
                                                c.push(Surface.valOut(S.Modifier.round(l_val, 2)));
                                                c.push("\n");
                                            } else {
                                                c.push(" ");
                                                c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.toint(l_val), ",")));
                                                c.push("\n");
                                            }
                                        }
                                    }
                                }
                                c.push(" </td>\n");
                            }
                        }
                    }
                }
                c.push(' <td class="leaderboard-venice-specific-cell leaderboard-venice-specific-body-default active">\n');
                l_col = o.stats.sortedColumn;
                l_val = S.Modifier.get(S.Modifier.get(l_item, "rankedStats"), l_col);
                if ((((l_col == "c_kany__sa_g") || (l_col == "playtime")) || (l_col == "lct_glva"))) {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.duration(l_val)));
                    c.push("\n");
                } else {
                    if ((((l_col == "coopeasy_ts_ghva") || (l_col == "coopmedium_ts_ghva")) || (l_col == "coophard_ts_ghva"))) {
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.round(l_val)));
                        c.push("\n");
                    } else {
                        if ((l_col == "accuracy")) {
                            c.push(" ");
                            c.push(Surface.valOut(S.Modifier.toint((l_val * 100))));
                            c.push("%\n");
                        } else {
                            if (((l_col == "kdr") || (l_col == "win_loss_ratio"))) {
                                c.push(" ");
                                c.push(Surface.valOut(S.Modifier.round(l_val, 2)));
                                c.push("\n");
                            } else {
                                if ((l_col == "distance")) {
                                    c.push(" ");
                                    c.push(Surface.valOut(S.Modifier.round(l_val, 2)));
                                    c.push("m\n");
                                } else {
                                    c.push(" ");
                                    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.toint(l_val), ",")));
                                    c.push("\n");
                                }
                            }
                        }
                    }
                }
                c.push(" </td>\n </tr>\n");
            }
        }
        c.push(" </tbody>\n </table>\n </div>\n </div>\n");
        if (!(S.Modifier.toint(o.url.friends))) {
            c.push(' <div class="forum-start-border">\n <div class="forum-focus-bar-view-top">\n <div class="pagination-pagination-right">\n');
            if ((o.url.page > 1)) {
                l_prev = "prev";
                c.push(" ");
                c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"name": o.url.name,"username": o.url.username,"group": o.url.group,"platform": o.url.platform,"page": (S.Modifier.toint(o.url.page) - 1),"friends": o.url.friends,"category": o.url.category}),"enabled": l_prev,"type": l_prev,"username": o.url.username}, null, kwargs));
                c.push("\n");
            } else {
                l_prev = "prev-disabled";
                c.push(" ");
                c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": "#","enabled": l_prev,"type": l_prev,"username": o.url.username}, null, kwargs));
                c.push("\n");
            }
            c.push("\n");
            c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), {"url": S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"name": o.url.name,"username": o.url.username,"group": o.url.group,"platform": o.url.platform,"page": (S.Modifier.toint(o.url.page) + 1),"friends": o.url.friends,"category": o.url.category}),"enabled": 1,"type": "next","username": o.url.username}, null, kwargs));
            c.push("\n </div>\n </div>\n </div>\n");
        }
    } else {
        c.push(' <div class="leaderboard-loading">\n <div id="leaderboard-specific-fetch-url" url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/specific/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, o.url)));
        c.push('">\n <div class="common-spinner" data-size="big"></div>\n <div class="base-clear"></div>\n <div class="loading-text">');
        c.push(Surface.valOut("Loading leaderboard"));
        c.push("</div>\n </div>\n </div>\n");
    }
    c.push(" </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("leaderboard.specific", "surface_10_9", "leaderboardSpecific", o, b);
    return c.join("");
};
leaderboard.specific.block_mainContent = new Surface.Block("leaderboard.specific.block_mainContent");
leaderboard.specific.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (Surface.globalContext.staticContext.venice) {
        c.push(' <div id="main-login-upper" class="base-upper"></div>\n');
        c.push(leaderboard.specific.surface_10_9.render({"leaderboardPlatforms": ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboardPlatforms) != "undefined" && o.leaderboardPlatforms !== null) ? o.leaderboardPlatforms : null),"leaderboardlist": ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboardlist) != "undefined" && o.leaderboardlist !== null) ? o.leaderboardlist : null),"message": ((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : null),"selectedPlatform": ((typeof (o) != "undefined" && o !== null && typeof (o.selectedPlatform) != "undefined" && o.selectedPlatform !== null) ? o.selectedPlatform : null),"stats": ((typeof (o) != "undefined" && o !== null && typeof (o.stats) != "undefined" && o.stats !== null) ? o.stats : null),"url": ((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : null)}, b, kwargs));
    }
    return c.join("");
};
var block_leaderboard_tablehead = new Surface.BlockConfig("", {});
leaderboard.addTemplate(new Surface.Template("tablehead"));
leaderboard.tablehead.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_tablehead;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.tablehead");
    c.push('\n<div class="common-leaderboard-headercells">\n <div class="common-leaderboard-th leaderboard-venice-row-list-th-title">');
    c.push(Surface.valOut("Leaderboard"));
    c.push("</div>\n");
    if (o.url.friends) {
        c.push(' <div class="common-leaderboard-th leaderboard-venice-row-list-th-pos">');
        c.push(Surface.valOut("Your position"));
        c.push('</div>\n <div class="common-leaderboard-th leaderboard-venice-row-list-th-topf">');
        c.push(Surface.valOut("Top friends"));
        c.push('</div>\n <div class="common-leaderboard-th leaderboard-venice-row-list-th-worldone">');
        c.push(Surface.valOut("World #1"));
        c.push("</div>\n");
    } else {
        c.push(' <div class="common-leaderboard-th leaderboard-venice-row-list-th-pos"></div>\n <div class="common-leaderboard-th leaderboard-venice-row-list-th-topf">');
        c.push(Surface.valOut("Top players in the world"));
        c.push("</div>\n");
    }
    c.push(' <div class="base-clear"></div>\n</div>\n');
    return c.join("");
};
var block_leaderboard_venice = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "leaderboard.venice.block_titleComponent","mainContent": "leaderboard.venice.block_mainContent"});
leaderboard.addTemplate(new Surface.Template("venice"));
leaderboard.venice.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_venice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.venice");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
leaderboard.venice.block_titleComponent = new Surface.Block("leaderboard.venice.block_titleComponent");
leaderboard.venice.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.valOut("Multiplayer Leaderboards"));
    c.push(" -");
    return c.join("");
};
leaderboard.venice.surface_10_9 = new Surface.SingleSurface("leaderboard.venice.surface_10_9");
leaderboard.venice.surface_10_9.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_venice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.venice");
    c.push('<surf:container id="');
    c.push("leaderboardOverview");
    c.push('">');
    var l_for_leaderboard_venice_43_37_count;
    var l_parentHasNext;
    var l_for_leaderboard_venice_43_37_list;
    var l_for_leaderboard_venice_45_41_hasNext;
    var l_for_leaderboard_venice_45_41_count;
    var l_for_leaderboard_venice_43_37_iteration;
    var l_for_leaderboard_venice_43_37_hasNext;
    var l_for_leaderboard_venice_45_41_iteration;
    var l_last;
    var l_for_leaderboard_venice_45_41_list;
    var l_title;
    c.push(' <div class="base-middle">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.ladders) != "undefined" && o.ladders !== null)) {
        if ((o.url.category == "coop")) {
            l_title = "COOP Leaderboards";
        } else {
            l_title = "Multiplayer Leaderboards";
        }
        c.push(" ");
        c.push(Surface.importTemplate(("leaderboard" + ("." + "header")), {"title": l_title,"leaderboardPlatforms": o.leaderboardPlatforms,"leaderboardlist": o.leaderboardlist,"selectedPlatform": o.selectedPlatform,"url": o.url,"backLink": false}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div class="base-middle-content">\n <div id="overview" style="display: none;"></div>\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.ladders) != "undefined" && o.ladders !== null)) {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null)) {
            c.push(" ");
            c.push(Surface.importTemplate(("main" + ("." + "gamestats")), o, null, kwargs));
            c.push("\n");
        }
        c.push('\n <div id="multiplayer-specific-leaderboard-container" class="leaderboard-venice-list">\n <div class="leaderboard-venice-list-inner">\n <div class="leaderboard-venice-list-inner2">\n ');
        c.push(Surface.importTemplate(("leaderboard" + ("." + "tablehead")), {"url": o.url}, null, kwargs));
        c.push('\n <div class="base-clear"></div>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : 0)) {
            c.push(" <div style='margin: 5px; font-family: Arial; font-size: 12px;'>");
            c.push(Surface.valOut(o.message));
            c.push("</div>\n");
        } else {
            if (!(S.Modifier.count(o.ladders))) {
                c.push(" <div style='margin: 5px; font-family: Arial; font-size: 12px;'>");
                c.push(Surface.valOut("Leaderboard is empty."));
                c.push("</div>\n");
            }
        }
        c.push("\n");
        l_for_leaderboard_venice_43_37_list = o.ladders;
        l_for_leaderboard_venice_43_37_count = S.Modifier.count(l_for_leaderboard_venice_43_37_list);
        l_for_leaderboard_venice_43_37_iteration = 0;
        if ((S.Modifier.count(l_for_leaderboard_venice_43_37_list) > 0)) {
            for (var l_for_leaderboard_venice_43_37_key in l_for_leaderboard_venice_43_37_list) {
                if (!Surface.isValidLoopItem(l_for_leaderboard_venice_43_37_list[l_for_leaderboard_venice_43_37_key])) {
                    continue;
                }
                var l_l = l_for_leaderboard_venice_43_37_list[l_for_leaderboard_venice_43_37_key];
                l_for_leaderboard_venice_43_37_iteration = (l_for_leaderboard_venice_43_37_iteration + 1);
                l_for_leaderboard_venice_43_37_hasNext = (l_for_leaderboard_venice_43_37_iteration < l_for_leaderboard_venice_43_37_count);
                l_parentHasNext = l_for_leaderboard_venice_43_37_hasNext;
                l_for_leaderboard_venice_45_41_list = l_l.lists;
                l_for_leaderboard_venice_45_41_count = S.Modifier.count(l_for_leaderboard_venice_45_41_list);
                l_for_leaderboard_venice_45_41_iteration = 0;
                if ((S.Modifier.count(l_for_leaderboard_venice_45_41_list) > 0)) {
                    for (var l_for_leaderboard_venice_45_41_key in l_for_leaderboard_venice_45_41_list) {
                        if (!Surface.isValidLoopItem(l_for_leaderboard_venice_45_41_list[l_for_leaderboard_venice_45_41_key])) {
                            continue;
                        }
                        var l_list = l_for_leaderboard_venice_45_41_list[l_for_leaderboard_venice_45_41_key];
                        l_for_leaderboard_venice_45_41_iteration = (l_for_leaderboard_venice_45_41_iteration + 1);
                        l_for_leaderboard_venice_45_41_hasNext = (l_for_leaderboard_venice_45_41_iteration < l_for_leaderboard_venice_45_41_count);
                        l_last = !(l_for_leaderboard_venice_45_41_hasNext);
                        if ((o.url.category == "coop")) {
                            l_last = !(l_parentHasNext);
                        }
                        c.push(" ");
                        c.push(Surface.importTemplate(("leaderboard" + ("." + "veniceladderlist")), {"ladder": l_list,"last": l_last,"topOnly": !(o.url.friends),"url": o.url}, null, kwargs));
                        c.push("\n");
                    }
                }
            }
        }
        c.push("\n </div>\n </div>\n </div>\n");
    } else {
        c.push(' <div class="leaderboard-loading">\n <div id="leaderboard-overview-fetch-url" url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/populate/{group}/{category}/{platform}/{friends}/", Surface.urlContext, o.url)));
        c.push('">\n <div class="common-spinner" data-size="big"></div>\n <div class="base-clear"></div>\n <div class="loading-text">');
        c.push(Surface.valOut("Loading leaderboard..."));
        c.push("</div>\n </div>\n </div>\n");
    }
    c.push("\n </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("leaderboard.venice", "surface_10_9", "leaderboardOverview", o, b);
    return c.join("");
};
leaderboard.venice.block_mainContent = new Surface.Block("leaderboard.venice.block_mainContent");
leaderboard.venice.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div id="leaderboard-index">\n');
    c.push(leaderboard.venice.surface_10_9.render({"ladders": ((typeof (o) != "undefined" && o !== null && typeof (o.ladders) != "undefined" && o.ladders !== null) ? o.ladders : null),"leaderboardPlatforms": ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboardPlatforms) != "undefined" && o.leaderboardPlatforms !== null) ? o.leaderboardPlatforms : null),"leaderboardlist": ((typeof (o) != "undefined" && o !== null && typeof (o.leaderboardlist) != "undefined" && o.leaderboardlist !== null) ? o.leaderboardlist : null),"message": ((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : null),"selectedPlatform": ((typeof (o) != "undefined" && o !== null && typeof (o.selectedPlatform) != "undefined" && o.selectedPlatform !== null) ? o.selectedPlatform : null),"totalStats": ((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null) ? o.totalStats : null),"url": ((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : null)}, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
var block_leaderboard_veniceladderlist = new Surface.BlockConfig("", {});
leaderboard.addTemplate(new Surface.Template("veniceladderlist"));
leaderboard.veniceladderlist.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_leaderboard_veniceladderlist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("leaderboard");
    Surface.Renderer.addUsedTemplate("leaderboard.veniceladderlist");
    var l_myScore;
    var l_for_leaderboard_veniceladderlist_39_10_list;
    var l_for_leaderboard_veniceladderlist_39_10_iteration;
    var l_entryScoreRaw;
    var l_rankBg;
    var l_entryScore;
    var l_title;
    c.push("\n");
    if (!(o.topOnly)) {
        l_myScore = S.Modifier.get(o.ladder.you.rankedStats, o.ladder.sortedColumn);
    }
    c.push('\n<div class="leaderboard-venice-rowlist');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.last) != "undefined" && o.last !== null) && o.last)) {
        c.push(" last");
    }
    c.push('">\n <div class="leaderboard-venice-rowlist-left">\n <a style="text-decoration: none;" id="');
    c.push(Surface.valOut(o.ladder.statSID));
    c.push('" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/leaderboard/{username}/show/{name}/{page}/{group}/{category}/{platform}/{friends}/", Surface.urlContext, {"name": o.ladder.statSID,"group": o.url.group,"platform": o.url.platform,"page": 1,"friends": o.url.friends,"category": o.url.category,"username": o.url.username})));
    c.push('">\n <div class="leaderboard-venice-rowlist-icon');
    if (S.Modifier.isInString(o.ladder.statSID, "Coop_")) {
        c.push(" leaderboard-venice-rowlist-icon-coop common-box");
    }
    c.push('">\n');
    if (S.Modifier.isInString(o.ladder.statSID, "Coop_")) {
        c.push(' <img width="62" height="42" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/62x42/", S.Modifier.lower(S.Modifier.substring(S.Modifier.get(o.ladder, "statSID"), 0, 8))), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    } else {
        c.push(' <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/leaderboard/icons/", S.Modifier.get(o.ladder, "statSID")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    }
    c.push(' </div>\n <div class="leaderboard-venice-rowlist-left-info ');
    if (S.Modifier.isInString(o.ladder.statSID, "Coop_")) {
        c.push(" leaderboard-venice-rowlist-left-info-coop");
    }
    c.push('">\n <div class="leaderboard-venice-rowlist-left-info-title">');
    c.push(Surface.valOut(S.Modifier.upper($S.callFunction("leaderboard.leaderboardname", S.Modifier.upper(o.ladder.statTitle), b, kwargs))));
    c.push('</div>\n <div class="leaderboard-venice-rowlist-left-info-scoretype">');
    c.push(Surface.valOut($S.callFunction("leaderboard.leaderboardTitle", o.ladder.sortedColumn, b, kwargs)));
    c.push("</div>\n </div>\n");
    if (!(o.topOnly)) {
        l_rankBg = "";
        if ((o.ladder.you.friendRank > 3)) {
            l_rankBg = "classic";
        } else {
            if ((o.ladder.you.friendRank == 1)) {
                l_rankBg = "gold";
            }
            if ((o.ladder.you.friendRank == 2)) {
                l_rankBg = "silver";
            }
            if ((o.ladder.you.friendRank == 3)) {
                l_rankBg = "bronze";
            }
        }
        c.push(' <div class="leaderboard-venice-rowlist-left-rank ');
        c.push(Surface.valOut(l_rankBg));
        c.push('">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.you) != "undefined" && o.ladder.you !== null && typeof (o.ladder.you.friendRank) != "undefined" && o.ladder.you.friendRank !== null) ? o.ladder.you.friendRank : "")));
        c.push("</div>\n");
    }
    c.push(' </a>\n </div>\n <div class="leaderboard-venice-rowlist-middle ');
    if (o.topOnly) {
        c.push("wide");
    }
    c.push('">\n');
    l_for_leaderboard_veniceladderlist_39_10_list = o.ladder.entries;
    l_for_leaderboard_veniceladderlist_39_10_iteration = 0;
    if ((S.Modifier.count(l_for_leaderboard_veniceladderlist_39_10_list) > 0)) {
        for (var l_for_leaderboard_veniceladderlist_39_10_key in l_for_leaderboard_veniceladderlist_39_10_list) {
            if (!Surface.isValidLoopItem(l_for_leaderboard_veniceladderlist_39_10_list[l_for_leaderboard_veniceladderlist_39_10_key])) {
                continue;
            }
            var l_entry = l_for_leaderboard_veniceladderlist_39_10_list[l_for_leaderboard_veniceladderlist_39_10_key];
            l_for_leaderboard_veniceladderlist_39_10_iteration = (l_for_leaderboard_veniceladderlist_39_10_iteration + 1);
            c.push("\n");
            l_entryScore = S.Modifier.get(l_entry.rankedStats, o.ladder.sortedColumn);
            l_entryScoreRaw = l_entryScore;
            if ((((o.ladder.sortedColumn == "c_kany__sa_g") || (o.ladder.sortedColumn == "playtime")) || (o.ladder.sortedColumn == "lct_glva"))) {
                l_entryScore = S.Modifier.duration(l_entryScore);
            } else {
                if ((((o.ladder.sortedColumn == "coopeasy_ts_ghva") || (o.ladder.sortedColumn == "coopmedium_ts_ghva")) || (o.ladder.sortedColumn == "coophard_ts_ghva"))) {
                    l_entryScore = S.Modifier.round(l_entryScore);
                } else {
                    if ((o.ladder.sortedColumn == "accuracy")) {
                        l_entryScore = S.Modifier.concat(S.Modifier.toint((S.Modifier.tofloat(l_entryScore) * 100)), "%");
                    } else {
                        if (((o.ladder.sortedColumn == "kdr") || (o.ladder.sortedColumn == "win_loss_ratio"))) {
                            l_entryScore = S.Modifier.round(S.Modifier.tofloat(l_entryScore), 2);
                        } else {
                            if ((o.ladder.sortedColumn == "distance")) {
                                l_entryScore = S.Modifier.round(S.Modifier.tofloat(l_entryScore), 2);
                            } else {
                                l_entryScore = S.Modifier.niceInt(S.Modifier.toint(l_entryScore), ",");
                            }
                        }
                    }
                }
            }
            c.push("\n");
            l_title = S.Modifier.concat(((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.persona) != "undefined" && l_entry.persona !== null && typeof (l_entry.persona.user) != "undefined" && l_entry.persona.user !== null && typeof (l_entry.persona.user.username) != "undefined" && l_entry.persona.user.username !== null) ? l_entry.persona.user.username : l_entry.personaName), "<br>");
            if (l_entry.rank) {
                l_title = S.Modifier.concat(S.Modifier.concat(l_title, (" (" + "World #")), l_entry.rank);
                if ((l_entry.friendRank && o.url.friends)) {
                    l_title = S.Modifier.concat(l_title, ", ");
                } else {
                    l_title = S.Modifier.concat(l_title, ")");
                }
            } else {
                l_title = S.Modifier.concat(l_title, " (");
            }
            if ((l_entry.friendRank && o.url.friends)) {
                l_title = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_title, "Friend #"), l_entry.friendRank), ")");
            }
            c.push("\n");
            l_title = S.Modifier.concat(l_title, ":<br>");
            l_title = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_title, $S.callFunction("leaderboard.leaderboardTitle", o.ladder.sortedColumn, b, kwargs)), ": "), l_entryScore);
            c.push('\n <div class="leaderboard-venice-rowlist-middle-user ');
            if ((!(o.topOnly) && (l_entry.personaId == o.ladder.you.personaId))) {
                c.push("active");
            }
            c.push(' bubble-title" data-battlebubble="');
            c.push(Surface.valOut(l_title));
            c.push('">\n <div class="leaderboard-venice-rowlist-middle-user-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.persona) != "undefined" && l_entry.persona !== null && typeof (l_entry.persona.user) != "undefined" && l_entry.persona.user !== null) ? l_entry.persona.user : false),"gravatarSize": 52}, null, kwargs));
            c.push("\n");
            if ((((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.rank) != "undefined" && l_entry.rank !== null) ? l_entry.rank : 1002) < 1001)) {
                c.push(' <div class="leaderboard-venice-rowlist-middle-user-pos ');
                if (!(((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.persona) != "undefined" && l_entry.persona !== null && typeof (l_entry.persona.user) != "undefined" && l_entry.persona.user !== null) ? l_entry.persona.user : false))) {
                    c.push("grayed");
                }
                c.push('">\n <span>');
                c.push(Surface.valOut(((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.rank) != "undefined" && l_entry.rank !== null) ? l_entry.rank : "")));
                c.push("</span></div>\n");
            }
            c.push(' </div>\n <div class="leaderboard-venice-rowlist-middle-user-username">\n ');
            c.push(Surface.valOut(l_entry.friendRank));
            c.push(" ");
            if (((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.persona) != "undefined" && l_entry.persona !== null && typeof (l_entry.persona.user) != "undefined" && l_entry.persona.user !== null) ? l_entry.persona.user : false)) {
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": ((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.persona) != "undefined" && l_entry.persona !== null && typeof (l_entry.persona.user) != "undefined" && l_entry.persona.user !== null && typeof (l_entry.persona.user.username) != "undefined" && l_entry.persona.user.username !== null) ? l_entry.persona.user.username : "")}, null, kwargs));
                c.push(" ");
            } else {
                c.push(" ");
                c.push(Surface.valOut(((typeof (l_entry) != "undefined" && l_entry !== null && typeof (l_entry.personaName) != "undefined" && l_entry.personaName !== null) ? l_entry.personaName : "")));
                c.push(" ");
            }
            c.push('\n </div>\n <div class="leaderboard-venice-rowlist-middle-user-score">\n ');
            c.push(Surface.valOut(l_entryScore));
            c.push("\n");
            if ((!(o.topOnly) && (l_entry.personaId != o.ladder.you.personaId))) {
                c.push(" ");
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": l_entryScoreRaw,"to": l_myScore,"width": 60}, null, kwargs));
                c.push("\n");
            }
            c.push(" </div>\n </div>\n");
            if (((!(o.topOnly) && (l_for_leaderboard_veniceladderlist_39_10_iteration == 3)) && (o.ladder.you.friendRank > 6))) {
                c.push(' <div class="leaderboard-venice-rowlist-middle-user-separator"></div>\n');
            }
        }
    } else {
        c.push(' <div class="leaderboard-nofriendsranked">');
        c.push(Surface.valOut("None of your friends are currently ranked."));
        c.push("</div>\n");
    }
    c.push("\n");
    if ((!(o.topOnly) && (S.Modifier.count(o.ladder.entries) == 1))) {
        c.push(' <div class="leaderboard-venice-rowlist-middle-solomsg">');
        c.push(Surface.valOut("Add some friends to compare"));
        c.push("</div>\n");
    }
    c.push("\n </div>\n");
    if (!(o.topOnly)) {
        c.push(' <div class="leaderboard-venice-rowlist-right">\n <div class="leaderboard-venice-rowlist-middle-user leaderboard-venice-rowlist-right-column">\n');
        o.worldBestScore = S.Modifier.get(o.ladder.worldsBest.rankedStats, ((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.sortedColumn) != "undefined" && o.ladder.sortedColumn !== null) ? o.ladder.sortedColumn : ""), 0);
        o.worldBestScoreRaw = o.worldBestScore;
        c.push(' <div class="leaderboard-venice-rowlist-middle-user-avatar">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.worldsBest) != "undefined" && o.ladder.worldsBest !== null && typeof (o.ladder.worldsBest.persona) != "undefined" && o.ladder.worldsBest.persona !== null && typeof (o.ladder.worldsBest.persona.user) != "undefined" && o.ladder.worldsBest.persona.user !== null) ? o.ladder.worldsBest.persona.user : false),"gravatarSize": 52}, null, kwargs));
        c.push('\n <div class="leaderboard-venice-rowlist-middle-user-pos"><span>1</span></div>\n </div>\n <div class="leaderboard-venice-rowlist-middle-user-username">\n ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.worldsBest) != "undefined" && o.ladder.worldsBest !== null && typeof (o.ladder.worldsBest.persona) != "undefined" && o.ladder.worldsBest.persona !== null && typeof (o.ladder.worldsBest.persona.user) != "undefined" && o.ladder.worldsBest.persona.user !== null) ? o.ladder.worldsBest.persona.user : false)) {
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": ((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.worldsBest) != "undefined" && o.ladder.worldsBest !== null && typeof (o.ladder.worldsBest.persona) != "undefined" && o.ladder.worldsBest.persona !== null && typeof (o.ladder.worldsBest.persona.user) != "undefined" && o.ladder.worldsBest.persona.user !== null && typeof (o.ladder.worldsBest.persona.user.username) != "undefined" && o.ladder.worldsBest.persona.user.username !== null) ? o.ladder.worldsBest.persona.user.username : ""),"gravatarSize": 52}, null, kwargs));
            c.push(" ");
        } else {
            c.push(" ");
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.ladder) != "undefined" && o.ladder !== null && typeof (o.ladder.worldsBest) != "undefined" && o.ladder.worldsBest !== null && typeof (o.ladder.worldsBest.personaName) != "undefined" && o.ladder.worldsBest.personaName !== null) ? o.ladder.worldsBest.personaName : "")));
            c.push(" ");
        }
        c.push('\n </div>\n <div class="leaderboard-venice-rowlist-middle-user-score">\n');
        if ((((o.ladder.sortedColumn == "c_kany__sa_g") || (o.ladder.sortedColumn == "playtime")) || (o.ladder.sortedColumn == "lct_glva"))) {
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.duration(o.worldBestScore)));
            c.push("\n");
        } else {
            if ((((o.ladder.sortedColumn == "coopeasy_ts_ghva") || (o.ladder.sortedColumn == "coopmedium_ts_ghva")) || (o.ladder.sortedColumn == "coophard_ts_ghva"))) {
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.round(o.worldBestScore)));
                c.push("\n");
            } else {
                if ((o.ladder.sortedColumn == "accuracy")) {
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.toint((S.Modifier.tofloat(o.worldBestScore) * 100))));
                    c.push("%\n");
                } else {
                    if (((o.ladder.sortedColumn == "kdr") || (o.ladder.sortedColumn == "win_loss_ratio"))) {
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.round(S.Modifier.tofloat(o.worldBestScore), 2)));
                        c.push("\n");
                    } else {
                        if ((o.ladder.sortedColumn == "distance")) {
                            c.push(" ");
                            c.push(Surface.valOut(S.Modifier.round(S.Modifier.tofloat(o.worldBestScore), 2)));
                            c.push("\n");
                        } else {
                            c.push(" ");
                            c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.toint(o.worldBestScore), ",")));
                            c.push("\n");
                        }
                    }
                }
            }
        }
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": o.worldBestScoreRaw,"to": l_myScore,"width": 60}, null, kwargs));
        c.push("\n </div>\n </div>\n </div>\n");
    }
    c.push("</div>");
    return c.join("");
};
if (typeof main == "undefined") {
    var main = {};
}
var surf_main_component = new Surface.Component("main");
surf_main_component.extend(main);
main = surf_main_component;
var block_main_about = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "main.about.block_mainContent"});
main.addTemplate(new Surface.Template("about"));
main.about.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_about;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.about");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.about.block_mainContent = new Surface.Block("main.about.block_mainContent");
main.about.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div class="main-about-intro">\n <h1>');
    c.push(Surface.valOut("WELCOME TO OUR OPEN BETA, SOLDIER!"));
    c.push("</h1>\n <p>");
    c.push(Surface.valOut("Main features of the Battlefield 3 web launcher."));
    c.push('</p>\n </div>\n <div class="common-secondary-column-line"></div>\n <div class="main-about-feature">\n <a name="launch"></a>\n <div class="main-about-feature-info">\n <h2>');
    c.push(Surface.valOut("LAUNCHING FROM YOUR BROWSER"));
    c.push('</h2>\n <p class="main-about-feature-info-description">');
    c.push(Surface.valOut("Anywhere you see a Play or Join button, you can click it to get into the game. The game will launch from the web and load silently until you are ready to join."));
    c.push('</p>\n </div>\n <img width="504" height="256" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/about-launch.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin-top: 14px;" />\n <div style="clear:both;"></div>\n </div>\n <div class="main-about-feature text-right">\n <div class="main-about-feature-info">\n <h2>');
    c.push(Surface.valOut("FINDING THE RIGHT SERVER"));
    c.push('</h2>\n <p class="main-about-feature-info-description">');
    c.push(Surface.valOut("Select your favorite game modes, maps, and map sizes with the browser filter. Click a server youd like to join alone or with friends."));
    c.push('</p>\n </div>\n <img width="488" height="250" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/about-find.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin-top: 25px;" />\n <div style="clear:both;"></div>\n </div>\n <div class="main-about-feature">\n <a name="comcenter"></a>\n <div class="main-about-feature-info">\n <h2>');
    c.push(Surface.valOut("KEEP YOUR FRIENDS CLOSE"));
    c.push('</h2>\n <p class="main-about-feature-info-description">');
    c.push(Surface.valOut("Your friends list lives at the bottom of the page in the Com Center. There you can join their game and chat with them."));
    c.push('</p>\n </div>\n <img width="488" height="238" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/about-comcenter.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin-top: 24px;" />\n <div style="clear:both;"></div>\n </div>\n <div class="main-about-feature text-right">\n <a name="dropzone"></a>\n <img width="177" height="256" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/about-dropzone.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin: 0 0 5px 171px;" />\n <div class="main-about-feature-info" style="float: left; margin-left: 58px;">\n <h2>');
    c.push(Surface.valOut("INVITE YOUR FRIENDS"));
    c.push('</h2>\n <p class="main-about-feature-info-description">');
    c.push(Surface.valOut("Drag your friends from the Com Center to a Drop Zone and they will get an invite to join."));
    c.push('</p>\n </div>\n <div style="clear:both;"></div>\n </div>\n <div class="main-about-feature">\n <a name="stats"></a>\n <div class="main-about-feature-info">\n <h2>');
    c.push(Surface.valOut("KEEPING UP TO DATE"));
    c.push('</h2>\n <p class="main-about-feature-info-description">');
    c.push(Surface.valOut("Use the Game Manager to see if there are new plugin or game updates available."));
    c.push('</p>\n </div>\n <img width="488" height="258" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/about-stats.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin-top: 26px;" />\n <div style="clear:both;"></div>\n </div>\n <div class="main-about-foot">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext)));
    c.push('" class="main-about-foot-back-home">');
    c.push(Surface.valOut("Back to home"));
    c.push('</a>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_main_agegate = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "main.agegate.block_mainContent"});
main.addTemplate(new Surface.Template("agegate"));
var block_main_agegate_use_8_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "main.agegate._use_8_14_block_content","title": "main.agegate._use_8_14_block_title","extraClassInner": "main.agegate._use_8_14_block_extraClassInner","extraClass": "main.agegate._use_8_14_block_extraClass"});
var block_main_agerating = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "main.agerating.block_titleComponent","titleItem": "main.agerating.block_titleItem","mainContent": "main.agerating.block_mainContent"});
main.addTemplate(new Surface.Template("agerating"));
main.agerating.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_agerating;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.agerating");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_main_agerating_use_110_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_110_18_block_content","title": "main.agerating._use_110_18_block_title","extraClassInner": "main.agerating._use_110_18_block_extraClassInner","shadow": "main.agerating._use_110_18_block_shadow","extraClass": "main.agerating._use_110_18_block_extraClass"});
var block_main_agerating_use_92_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_92_18_block_content","title": "main.agerating._use_92_18_block_title","extraClassInner": "main.agerating._use_92_18_block_extraClassInner","shadow": "main.agerating._use_92_18_block_shadow","extraClass": "main.agerating._use_92_18_block_extraClass"});
var block_main_agerating_use_74_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_74_18_block_content","title": "main.agerating._use_74_18_block_title","extraClassInner": "main.agerating._use_74_18_block_extraClassInner","shadow": "main.agerating._use_74_18_block_shadow","extraClass": "main.agerating._use_74_18_block_extraClass"});
var block_main_agerating_use_54_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_54_18_block_content","title": "main.agerating._use_54_18_block_title","extraClassInner": "main.agerating._use_54_18_block_extraClassInner","shadow": "main.agerating._use_54_18_block_shadow","extraClass": "main.agerating._use_54_18_block_extraClass"});
var block_main_agerating_use_33_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_33_18_block_content","title": "main.agerating._use_33_18_block_title","extraClassInner": "main.agerating._use_33_18_block_extraClassInner","shadow": "main.agerating._use_33_18_block_shadow","extraClass": "main.agerating._use_33_18_block_extraClass"});
var block_main_agerating_use_15_18 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.agerating._use_15_18_block_content","title": "main.agerating._use_15_18_block_title","extraClassInner": "main.agerating._use_15_18_block_extraClassInner","shadow": "main.agerating._use_15_18_block_shadow","extraClass": "main.agerating._use_15_18_block_extraClass"});
main.agerating.block_titleComponent = new Surface.Block("main.agerating.block_titleComponent");
main.agerating.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating.block_titleItem = new Surface.Block("main.agerating.block_titleItem");
main.agerating.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Age ratings"));
    return c.join("");
};
main.agerating._use_15_18_block_shadow = new Surface.Block("main.agerating._use_15_18_block_shadow");
main.agerating._use_15_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_15_18_block_extraClass = new Surface.Block("main.agerating._use_15_18_block_extraClass");
main.agerating._use_15_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_15_18_block_extraClassInner = new Surface.Block("main.agerating._use_15_18_block_extraClassInner");
main.agerating._use_15_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_15_18_block_title = new Surface.Block("main.agerating._use_15_18_block_title");
main.agerating._use_15_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("AU");
    return c.join("");
};
main.agerating._use_15_18_block_content = new Surface.Block("main.agerating._use_15_18_block_content");
main.agerating._use_15_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-au.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">');
    c.push(Surface.valOut("All platforms"));
    c.push("</div>\n ");
    c.push(Surface.valOut("OFLC Video Game Rating"));
    c.push("<br>\n ");
    c.push(Surface.valOut("This title is rated MA15+ (Mature Accompanied)"));
    c.push("\n </div>\n");
    return c.join("");
};
main.agerating._use_33_18_block_shadow = new Surface.Block("main.agerating._use_33_18_block_shadow");
main.agerating._use_33_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_33_18_block_extraClass = new Surface.Block("main.agerating._use_33_18_block_extraClass");
main.agerating._use_33_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_33_18_block_extraClassInner = new Surface.Block("main.agerating._use_33_18_block_extraClassInner");
main.agerating._use_33_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_33_18_block_title = new Surface.Block("main.agerating._use_33_18_block_title");
main.agerating._use_33_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("US");
    return c.join("");
};
main.agerating._use_33_18_block_content = new Surface.Block("main.agerating._use_33_18_block_content");
main.agerating._use_33_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-us.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">');
    c.push(Surface.valOut("All platforms"));
    c.push("</div>\n ");
    c.push(Surface.valOut("ESRB Video Game Rating"));
    c.push("<br>\n ");
    c.push(Surface.valOut("This title is rated Mature for:"));
    c.push("<br>\n ");
    c.push(Surface.valOut("Blood"));
    c.push("<br>\n ");
    c.push(Surface.valOut("Strong Language"));
    c.push("<br>\n ");
    c.push(Surface.valOut("Intense Violence"));
    c.push("\n </div>\n");
    return c.join("");
};
main.agerating._use_54_18_block_shadow = new Surface.Block("main.agerating._use_54_18_block_shadow");
main.agerating._use_54_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_54_18_block_extraClass = new Surface.Block("main.agerating._use_54_18_block_extraClass");
main.agerating._use_54_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_54_18_block_extraClassInner = new Surface.Block("main.agerating._use_54_18_block_extraClassInner");
main.agerating._use_54_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_54_18_block_title = new Surface.Block("main.agerating._use_54_18_block_title");
main.agerating._use_54_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("PEGI"));
    return c.join("");
};
main.agerating._use_54_18_block_content = new Surface.Block("main.agerating._use_54_18_block_content");
main.agerating._use_54_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-eu.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">');
    c.push(Surface.valOut("All platforms"));
    c.push("</div>\n ");
    c.push(Surface.valOut("PEGI Video Game Rating"));
    c.push("<br>\n ");
    c.push(Surface.valOut("This title is rated 16+"));
    c.push("\n </div>\n");
    return c.join("");
};
main.agerating._use_74_18_block_shadow = new Surface.Block("main.agerating._use_74_18_block_shadow");
main.agerating._use_74_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_74_18_block_extraClass = new Surface.Block("main.agerating._use_74_18_block_extraClass");
main.agerating._use_74_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_74_18_block_extraClassInner = new Surface.Block("main.agerating._use_74_18_block_extraClassInner");
main.agerating._use_74_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_74_18_block_title = new Surface.Block("main.agerating._use_74_18_block_title");
main.agerating._use_74_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("JP");
    return c.join("");
};
main.agerating._use_74_18_block_content = new Surface.Block("main.agerating._use_74_18_block_content");
main.agerating._use_74_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-jp.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">Xbox,PS3</div>\n CERO??????????<br>\n ????????D????????\n </div>\n');
    return c.join("");
};
main.agerating._use_92_18_block_shadow = new Surface.Block("main.agerating._use_92_18_block_shadow");
main.agerating._use_92_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_92_18_block_extraClass = new Surface.Block("main.agerating._use_92_18_block_extraClass");
main.agerating._use_92_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_92_18_block_extraClassInner = new Surface.Block("main.agerating._use_92_18_block_extraClassInner");
main.agerating._use_92_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_92_18_block_title = new Surface.Block("main.agerating._use_92_18_block_title");
main.agerating._use_92_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("GER");
    return c.join("");
};
main.agerating._use_92_18_block_content = new Surface.Block("main.agerating._use_92_18_block_content");
main.agerating._use_92_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-ger.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">Alle Plattformen</div>\n USK-Altersfreigabe<br>\n Dieser Titel ist bewertet: 18\n </div>\n');
    return c.join("");
};
main.agerating._use_110_18_block_shadow = new Surface.Block("main.agerating._use_110_18_block_shadow");
main.agerating._use_110_18_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.agerating._use_110_18_block_extraClass = new Surface.Block("main.agerating._use_110_18_block_extraClass");
main.agerating._use_110_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box");
    return c.join("");
};
main.agerating._use_110_18_block_extraClassInner = new Surface.Block("main.agerating._use_110_18_block_extraClassInner");
main.agerating._use_110_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-legal-box-height");
    return c.join("");
};
main.agerating._use_110_18_block_title = new Surface.Block("main.agerating._use_110_18_block_title");
main.agerating._use_110_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("RU");
    return c.join("");
};
main.agerating._use_110_18_block_content = new Surface.Block("main.agerating._use_110_18_block_content");
main.agerating._use_110_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="main-legal-image">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/footer/rating-eu.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n <div class="main-legal-info">\n <div class="main-legal-info-subtitle">??? ?????????</div>\n PEGI ????????? ???????<br>\n ??? ???????? ????????? 16+\n </div>\n');
    return c.join("");
};
main.agerating.block_mainContent = new Surface.Block("main.agerating.block_mainContent");
main.agerating.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div id="main-middle">\n <div class="base-middle-content">\n <div class="common-title">\n ');
    c.push(Surface.valOut("Age ratings"));
    c.push("\n </div>\n <div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_15_18, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_33_18, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_54_18, kwargs));
    c.push(" </div>\n <div style='clear:both;padding-top: 16px;'>\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_74_18, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_92_18, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_main_agerating_use_110_18, kwargs));
    c.push(" </div>\n </div>\n </div>\n");
    return c.join("");
};
var block_main_allheader = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("allheader"));
main.allheader.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_allheader;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.allheader");
    c.push('\n<div class="main-landing-header">\n <div class="main-landing-headinfo">\n <table cellpadding="0" cellspacing="0" style="width: 100%; height: 47px;">\n <tr>\n <td style="width: 100%;"><div class="main-landing-headinfo-line"></div></td>\n <td><div class="main-landing-headinfo-title">');
    c.push(Surface.valOut("CURRENT BODY COUNT"));
    c.push('</div></td>\n <td><div id="main-landing-headinfo-count">');
    c.push(Surface.valOut(S.Modifier.thousandseparators(((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null && typeof (o.totalStats.kills) != "undefined" && o.totalStats.kills !== null) ? o.totalStats.kills : 12345678))));
    c.push('</div></td>\n </tr>\n </table>\n </div>\n <div style="clear: both;"></div>\n <div class="main-landing-logo"></div>\n <div class="main-landing-splashinfo">\n <h1>');
    c.push(Surface.valOut("THE BATTLEFIELD"));
    c.push("<br />\n ");
    c.push(Surface.valOut("EXPERIENCE"));
    c.push("</h1>\n <h2>");
    c.push(Surface.valOut("Introducing the revolutionary Battlefield Web."));
    c.push("<br />\n ");
    c.push(Surface.valOut("Your stats, friends and game servers. Anytime, anywhere."));
    c.push("</h2>\n </div>\n</div>");
    return c.join("");
};
var block_main_betaagreement = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "main.betaagreement.block_mainContent"});
main.addTemplate(new Surface.Template("betaagreement"));
var block_main_bfbc2header = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("bfbc2header"));
main.bfbc2header.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_bfbc2header;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.bfbc2header");
    c.push('\n<div class="main-landing-header">\n <div class="main-landing-logo"></div>\n</div>');
    return c.join("");
};
var block_main_credits = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "main.credits.block_titleItem","mainContent": "main.credits.block_mainContent"});
main.addTemplate(new Surface.Template("credits"));
main.credits.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_credits;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.credits");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.credits.block_titleItem = new Surface.Block("main.credits.block_titleItem");
main.credits.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Credits - ");
    return c.join("");
};
main.credits.block_mainContent = new Surface.Block("main.credits.block_mainContent");
main.credits.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_header;
    var l_for_main_credits_39_26_list;
    var l_for_main_credits_39_26_hasNext;
    var l_for_main_credits_25_26_list;
    var l_role;
    var l_for_main_credits_39_26_count;
    var l_for_main_credits_58_26_list;
    var l_for_main_credits_12_18_list;
    var l_for_main_credits_58_26_count;
    var l_for_main_credits_58_26_iteration;
    var l_for_main_credits_39_26_iteration;
    var l_for_main_credits_58_26_hasNext;
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div id="main-middle" class="campaign-middle">\n <div class="base-middle-content">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/bf3-logo-big.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" width="650" height="122" class="campaign-logo" />\n <div class="base-clear"></div>\n <div class="main-credits">\n');
    l_for_main_credits_12_18_list = o.creditLines;
    if ((S.Modifier.count(l_for_main_credits_12_18_list) > 0)) {
        for (var l_for_main_credits_12_18_key in l_for_main_credits_12_18_list) {
            if (!Surface.isValidLoopItem(l_for_main_credits_12_18_list[l_for_main_credits_12_18_key])) {
                continue;
            }
            var l_line = l_for_main_credits_12_18_list[l_for_main_credits_12_18_key];
            if (S.Modifier.get(l_line, "HEADER1", false)) {
                l_header = S.Modifier.get(S.Modifier.get(l_line, "HEADER1"), 0);
                c.push(' <h1 class="main-credits-header1 wfont">');
                c.push(Surface.valOut((S.translations[l_header] || l_header)));
                c.push("</h1>\n");
            }
            c.push("\n");
            if (S.Modifier.get(l_line, "HEADER2", false)) {
                l_header = S.Modifier.get(S.Modifier.get(l_line, "HEADER2"), 0);
                c.push(' <a name="');
                c.push(Surface.valOut(S.Modifier.replace((S.translations[l_header] || l_header), " ", "_")));
                c.push('"></a>\n <h2 class="main-credits-header2 wfont">');
                c.push(Surface.valOut((S.translations[l_header] || l_header)));
                c.push("</h2>\n");
            }
            c.push("\n");
            if (S.Modifier.get(l_line, "LINES", false)) {
                l_for_main_credits_25_26_list = S.Modifier.get(l_line, "LINES", []);
                if ((S.Modifier.count(l_for_main_credits_25_26_list) > 0)) {
                    c.push(' <table class="main-credits-lines">\n');
                    for (var l_for_main_credits_25_26_key in l_for_main_credits_25_26_list) {
                        if (!Surface.isValidLoopItem(l_for_main_credits_25_26_list[l_for_main_credits_25_26_key])) {
                            continue;
                        }
                        var l_part = l_for_main_credits_25_26_list[l_for_main_credits_25_26_key];
                        l_role = S.Modifier.get(l_part, 0, false);
                        c.push(' <tr>\n <td class="main-credits-human-role">');
                        if (l_role) {
                            c.push(Surface.valOut((S.translations[l_role] || l_role)));
                        }
                        c.push('</td>\n <td class="main-credits-human-name">');
                        c.push(Surface.valOut(S.Modifier.get(l_part, 1)));
                        c.push("</td>\n </tr>\n");
                    }
                    c.push(" </table>\n");
                }
            }
            c.push("\n");
            if (S.Modifier.get(l_line, "MULTILINE", false)) {
                l_for_main_credits_39_26_list = S.Modifier.get(l_line, "MULTILINE", []);
                l_for_main_credits_39_26_count = S.Modifier.count(l_for_main_credits_39_26_list);
                l_for_main_credits_39_26_iteration = 0;
                if ((S.Modifier.count(l_for_main_credits_39_26_list) > 0)) {
                    c.push(' <table class="main-credits-multilines">\n');
                    for (var l_for_main_credits_39_26_key in l_for_main_credits_39_26_list) {
                        if (!Surface.isValidLoopItem(l_for_main_credits_39_26_list[l_for_main_credits_39_26_key])) {
                            continue;
                        }
                        var l_line = l_for_main_credits_39_26_list[l_for_main_credits_39_26_key];
                        l_for_main_credits_39_26_iteration = (l_for_main_credits_39_26_iteration + 1);
                        l_for_main_credits_39_26_hasNext = (l_for_main_credits_39_26_iteration < l_for_main_credits_39_26_count);
                        if ((Surface.modulo((l_for_main_credits_39_26_iteration - 1), 2) == 0)) {
                            c.push(' <tr>\n <td colspan="2" class="main-credits-line">');
                            c.push(Surface.valOut((S.translations[l_line] || l_line)));
                            c.push("</td>\n </tr>\n ");
                            if (!(l_for_main_credits_39_26_hasNext)) {
                                c.push("<td></td></tr>");
                            }
                            c.push("\n");
                        } else {
                            c.push(' <tr>\n <td colspan="2" class="main-credits-line">');
                            c.push(Surface.valOut((S.translations[l_line] || l_line)));
                            c.push("</td>\n </tr>\n");
                        }
                    }
                    c.push(" </table>\n");
                }
            }
            c.push("\n");
            if (S.Modifier.get(l_line, "MULTILINES", false)) {
                l_for_main_credits_58_26_list = S.Modifier.get(l_line, "MULTILINES", []);
                l_for_main_credits_58_26_count = S.Modifier.count(l_for_main_credits_58_26_list);
                l_for_main_credits_58_26_iteration = 0;
                if ((S.Modifier.count(l_for_main_credits_58_26_list) > 0)) {
                    c.push(' <table class="main-credits-multilines">\n');
                    for (var l_for_main_credits_58_26_key in l_for_main_credits_58_26_list) {
                        if (!Surface.isValidLoopItem(l_for_main_credits_58_26_list[l_for_main_credits_58_26_key])) {
                            continue;
                        }
                        var l_part = l_for_main_credits_58_26_list[l_for_main_credits_58_26_key];
                        l_for_main_credits_58_26_iteration = (l_for_main_credits_58_26_iteration + 1);
                        l_for_main_credits_58_26_hasNext = (l_for_main_credits_58_26_iteration < l_for_main_credits_58_26_count);
                        if ((Surface.modulo((l_for_main_credits_58_26_iteration - 1), 2) == 0)) {
                            c.push(' <tr>\n <td class="main-credits-line">');
                            c.push(Surface.valOut(S.Modifier.get(l_part, 1)));
                            c.push("</td>\n ");
                            if (!(l_for_main_credits_58_26_hasNext)) {
                                c.push("<td></td></tr>");
                            }
                            c.push("\n");
                        } else {
                            c.push(' <td class="main-credits-line">');
                            c.push(Surface.valOut(S.Modifier.get(l_part, 1)));
                            c.push("</td>\n </tr>\n");
                        }
                    }
                    c.push(" </table>\n");
                }
            }
        }
    }
    c.push(" </div>\n </div>\n </div>\n");
    return c.join("");
};
var block_main_errorfivehundred = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "main.errorfivehundred.block_titleItem","mainContent": "main.errorfivehundred.block_mainContent"});
main.addTemplate(new Surface.Template("errorfivehundred"));
main.errorfivehundred.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_errorfivehundred;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.errorfivehundred");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.errorfivehundred.block_titleItem = new Surface.Block("main.errorfivehundred.block_titleItem");
main.errorfivehundred.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("500 Something technical went wrong"));
    c.push(" - ");
    return c.join("");
};
main.errorfivehundred.block_mainContent = new Surface.Block("main.errorfivehundred.block_mainContent");
main.errorfivehundred.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content base-middle-error">\n <h1 class="wfont" >');
    c.push(Surface.valOut("Sorry, Something technical went wrong"));
    c.push("</h1>\n <p>");
    c.push(Surface.valOut("We're going to sort it out and have things back to normal really soon."));
    c.push("\n <br /><br />\n ");
    c.push(Surface.valOut("Try"));
    c.push(' <a href="#" onclick="history.back(); return false;">');
    c.push(Surface.valOut("going back"));
    c.push("</a> ");
    c.push(Surface.valOut("or"));
    c.push(' <a href="/">');
    c.push(Surface.valOut("Home"));
    c.push("</a></p>\n </div>\n </div>\n");
    return c.join("");
};
var block_main_errorfourofour = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "main.errorfourofour.block_titleItem","mainContent": "main.errorfourofour.block_mainContent"});
main.addTemplate(new Surface.Template("errorfourofour"));
main.errorfourofour.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_errorfourofour;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.errorfourofour");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.errorfourofour.block_titleItem = new Surface.Block("main.errorfourofour.block_titleItem");
main.errorfourofour.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("404 That page doesn't exist"));
    c.push(" - ");
    return c.join("");
};
main.errorfourofour.block_mainContent = new Surface.Block("main.errorfourofour.block_mainContent");
main.errorfourofour.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content base-middle-error">\n <h1 class="wfont" >');
    c.push(Surface.valOut("Sorry, that page doesn't exist"));
    c.push("</h1>\n <p>");
    c.push(Surface.valOut("Try"));
    c.push(' <a href="#" onclick="history.back(); return false;">');
    c.push(Surface.valOut("going back"));
    c.push("</a> ");
    c.push(Surface.valOut("or"));
    c.push(' <a href="/">');
    c.push(Surface.valOut("Home"));
    c.push("</a></p>\n </div>\n </div>\n");
    return c.join("");
};
var block_main_feed = new Surface.BlockConfig("feed.base", {"feedContext": "main.feed.block_feedContext"});
main.addTemplate(new Surface.Template("feed"));
main.feed.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_feed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.feed");
    c.push("\n");
    return Surface.importTemplate("feed.base", o, b, kwargs);
};
main.feed.block_feedContext = new Surface.Block("main.feed.block_feedContext");
main.feed.block_feedContext.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Home");
    return c.join("");
};
var block_main_feedbacklogin = new Surface.BlockConfig("", {"document": "main.feedbacklogin.block_document","head": "main.feedbacklogin.block_head"});
main.addTemplate(new Surface.Template("feedbacklogin"));
main.feedbacklogin.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_feedbacklogin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.feedbacklogin");
    c.push("\n");
    c.push(b.get("document")(o, b, kwargs));
    return c.join("");
};
main.feedbacklogin.block_head = new Surface.Block("main.feedbacklogin.block_head");
main.feedbacklogin.block_head.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <meta http-equiv="X-UA-Compatible" content="ie=edge;chrome=1" />\n <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />\n <title>Battlefield 3 - Get Satisfaction Login</title>\n');
    return c.join("");
};
main.feedbacklogin.block_document = new Surface.Block("main.feedbacklogin.block_document");
main.feedbacklogin.block_document.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    c.push(' <!DOCTYPE html>\n <html xmlns:surf="" id="base-bf3-html">\n <head>\n');
    c.push(b.get("head")(o, b, kwargs));
    c.push(' </head>\n <body>\n <style>\n html, body {\n margin: 0;\n padding: 0;\n font-family: Arial, sans-serif;\n }\n .top {\n position: relative;\n width: 100%;\n background: #000;\n height: 68px;\n display: block;\n padding: 0;\n text-align: center;\n }\n .main-login-input {\n color: #353535;\n font-family: Arial,sans-serif;\n font-size: 18px;\n margin-bottom: 10px;\n padding-bottom: 10px;\n padding-left: 10px;\n padding-top: 10px;\n width: 257px;\n }\n .main-login-text div {\n height: 43px;\n line-height: 26px;\n margin-top: 10px;\n position: relative;\n margin-right: 10px;\n text-align: right;\n font-size: 12px;\n }\n .main-login-register-title {\n position: relative;\n width: 100%;\n text-align: center;\n font-size: 16px;\n margin-top: 30px;\n font-family: Arial, sans-serif;\n margin-bottom: 16px;\n font-weight: bold;\n }\n .base-button-arrow-small:active {\n background-position: 0 -58px;\n }\n .base-button-arrow-small {\n background-attachment: scroll;\n background-clip: border-box;\n background-color: transparent;\n background-image: url("/public/base/bfbc2/buttons/base-button-arrow-small.png");\n background-origin: padding-box;\n background-position: 0 0;\n background-repeat: no-repeat;\n background-size: auto auto;\n float: right;\n border: 0;\n color: #000000;\n cursor: pointer;\n font-family: Arial,sans-serif;\n font-size: 14px;\n font-weight: bold;\n height: 29px;\n line-height: 29px;\n padding: 0;\n text-align: center;\n text-shadow: 0 1px #FCDA87;\n width: 106px;\n }\n form {\n width: 351px;\n margin: 0 auto;\n overflow: hidden;\n }\n </style>\n');
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (!((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null))) {
        c.push(' <div class="top">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bf3-logo-226x43.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" style="padding-top: 10px;"/>\n </div>\n <div class="main-login-register-title">\n Please sign in to continue\n </div>\n <form class="base-login-form" method="POST" action="');
        if (Surface.globalContext.staticContext.sslAvailable) {
            c.push(Surface.valOut(Surface.globalContext.staticContext.currentHostSecure));
        }
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/login/", Surface.urlContext)));
        c.push('">\n <div class="main-login-text" style="float: left;">\n </div>\n <div style="float:left;">\n <div style="float:left; width: 70px; margin-right:10px; text-align: right; line-height: 42px;;margin-top:3px; font-size:14px;">');
        c.push(Surface.valOut("Email"));
        c.push('</div>\n <div style="float:left;">\n <input id="main-login-email" class="main-login-input" type="email" name="email" /><br>\n </div>\n <div style="float:left; width: 70px; margin-right:10px; text-align: right; line-height: 42px;margin-top:3px; font-size:14px;">');
        c.push(Surface.valOut("Password"));
        c.push('</div>\n <div style="float:left;">\n <input class="main-login-input" type="password" name="password" />\n </div>\n <input type="hidden" name="specialLogin" value="feedbacklogin" />\n </div>\n <div class="main-loggedin-submit">\n <input type="submit" style="" id="main-login-button" class="base-button-arrow-small" value="');
        c.push(Surface.valOut("Sign in"));
        c.push('" ');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.blockTime) != "undefined" && o.blockTime !== null) ? o.blockTime : 0) > 0)) {
            c.push("disabled");
        }
        c.push(' />\n </div>\n </form>\n <script type="text/javascript" charset="utf-8">\n var is_ssl = ("https:" == document.location.protocol);\n var asset_host = is_ssl ? "https://s3.amazonaws.com/getsatisfaction.com/" : "http://s3.amazonaws.com/getsatisfaction.com/";\n document.write(unescape("%3Cscript src=\'" + asset_host + "javascripts/feedback-v2.js\' type=\'text/javascript\'%3E%3C/script%3E"));\n <\/script>\n');
    }
    c.push("\n");
    if (o.myGS) {
        c.push(" ");
        c.push(o.myGS);
        c.push("\n");
    }
    c.push("\n </body>\n </html>\n");
    return c.join("");
};
var block_main_forgotpassword = new Surface.BlockConfig("base.ajaxindex", {"bodyClass": "main.forgotpassword.block_bodyClass","titleItem": "main.forgotpassword.block_titleItem","mainContent": "main.forgotpassword.block_mainContent"});
main.addTemplate(new Surface.Template("forgotpassword"));
var block_main_functions = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("functions"));
main.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.functions");
    c.push("\n");
    return c.join("");
};
main.function_url = function(l_d, l_game, l_lang, b, kwargs) {
    var o = {};
    var c = [];
    var l_for_main_functions_5_6_list;
    return l_d;
    o.data = {};
    l_for_main_functions_5_6_list = l_d;
    if ((S.Modifier.count(l_for_main_functions_5_6_list) > 0)) {
        for (var l_key in l_for_main_functions_5_6_list) {
            if (!Surface.isValidLoopItem(l_for_main_functions_5_6_list[l_key])) {
                continue;
            }
            var l_value = l_for_main_functions_5_6_list[l_key];
            o.data = S.Modifier.set(o.data, l_key, l_value);
        }
    }
    o.data = S.Modifier.set(o.data, "_game", ((typeof (l_game) != "undefined" && l_game !== null) ? l_game : "all"));
    o.data = S.Modifier.set(o.data, "_lang", ((typeof (l_lang) != "undefined" && l_lang !== null) ? l_lang : "en"));
    return o.data;
};
main.function_loginErrorString = function(l_reason, b, kwargs) {
    var o = {};
    var c = [];
    if ((l_reason == "pass")) {
        return "Wrong email or password";
    } else {
        if ((l_reason == "betaaccess")) {
            return "";
        } else {
            if ((l_reason == "beta")) {
                return "Your account does not have beta access";
            } else {
                if ((l_reason == "notallowed")) {
                    return S.Modifier.concat("Buy BF3 to get access to Battlelog.", " <a href='https://help.ea.com/article/why-do-i-get-a-cant-log-in-to-battlelog-error'>Check the FAQ</a>");
                } else {
                    if ((l_reason == "blocked")) {
                        return "Too many failed logins, you have been blocked";
                    } else {
                        if ((l_reason == "fails")) {
                            return "You need to wait before trying to login in again";
                        } else {
                            if ((l_reason == "nucleus")) {
                                return "Problem contacting EA Login, please try again in a while";
                            } else {
                                if ((l_reason == "internal")) {
                                    return "We are sorry, something went wrong during your login. Please try again.";
                                } else {
                                    if ((l_reason == "error")) {
                                        return "An error occurred trying to log you in, please try again in a while";
                                    } else {
                                        if ((l_reason == "unknown")) {
                                            return "An unknown error occurred trying to log you in, please try again in a while";
                                        } else {
                                            if ((l_reason == "soon")) {
                                                return "Battlelog login is currently disabled, please try again in a while";
                                            } else {
                                                if ((l_reason == "ssologin")) {
                                                    return "Login queue is activated, please login manually";
                                                } else {
                                                    if ((l_reason == "ratelimited")) {
                                                        return "Too many people are trying to login, please try again later";
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return "";
};
var block_main_gamestats = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("gamestats"));
main.gamestats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_gamestats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.gamestats");
    c.push('\n<div class="main-landing-stats-separator"></div>\n<div class="main-landing-stats">\n <table cellpadding="0" cellspacing="0">\n <tr>\n <td class="main-landing-stats-icon-kills"></td>\n <td>\n <h1>');
    c.push(Surface.valOut("CURRENT BODYCOUNT"));
    c.push('</h1>\n <div class="main-landing-stats-stat" id="main-landing-stats-bodycount">');
    c.push(Surface.valOut(S.Modifier.thousandseparators(((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null && typeof (o.totalStats.kills) != "undefined" && o.totalStats.kills !== null) ? o.totalStats.kills : 12345678))));
    c.push('</div>\n </td>\n <td class="main-landing-stats-icon-users"></td>\n <td>\n <h1>');
    c.push(Surface.valOut("SOLDIERS PLAYING"));
    c.push(' </h1>\n <div class="main-landing-stats-stat" id="main-landing-stats-online">');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.playersPlaying) != "undefined" && o.playersPlaying !== null) && (o.playersPlaying > 1000))) {
        c.push(Surface.valOut(S.Modifier.thousandseparators(((typeof (o) != "undefined" && o !== null && typeof (o.playersPlaying) != "undefined" && o.playersPlaying !== null) ? o.playersPlaying : "123456"))));
    } else {
        c.push(Surface.valOut("N/A"));
    }
    c.push('</div>\n </td>\n <td class="main-landing-stats-icon-time"></td>\n <td>\n <h1>');
    c.push(Surface.valOut("TIME PLAYED (HRS)"));
    c.push('</h1>\n <div class="main-landing-stats-stat" id="main-landing-stats-timeplayed">');
    c.push(Surface.valOut(S.Modifier.thousandseparators((((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null && typeof (o.totalStats.timePlayed) != "undefined" && o.totalStats.timePlayed !== null) ? o.totalStats.timePlayed : 12345678) / 3600))));
    c.push('</div>\n </td>\n <td class="main-landing-stats-icon-dogtags"></td>\n <td>\n <h1>');
    c.push(Surface.valOut("DOG TAGS TAKEN"));
    c.push('</h1>\n <div class="main-landing-stats-stat" id="main-landing-stats-dogtags">');
    c.push(Surface.valOut(S.Modifier.thousandseparators(((typeof (o) != "undefined" && o !== null && typeof (o.totalStats) != "undefined" && o.totalStats !== null && typeof (o.totalStats.dogtagsTaken) != "undefined" && o.totalStats.dogtagsTaken !== null) ? o.totalStats.dogtagsTaken : 12345678))));
    c.push("</div>\n </td>\n </tr>\n </table>\n</div>");
    return c.join("");
};
var block_main_index = new Surface.BlockConfig("base.ajaxindex", {"mainMiddle": "main.index.block_mainMiddle","mainContent": "main.index.block_mainContent","mainTop": "main.index.block_mainTop"});
main.addTemplate(new Surface.Template("index"));
main.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.index");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.index.block_mainTop = new Surface.Block("main.index.block_mainTop");
main.index.block_mainTop.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <div class="main-index-container">\n <div id="main-eyecatcher">\n </div>\n <div id="main-splashinfo">\n');
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BFBC2)) {
        c.push(' <h1 class="main-header">');
        c.push(Surface.valOut("Welcome to the new Battlefield!"));
        c.push('</h1>\n <h2 class="main-header">');
        c.push(Surface.valOut("The new way to play with or against your friends..."));
        c.push("</h2>\n");
    }
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
        c.push(' <h1 class="main-header">Welcome to the Venice Playtest!</h1>\n <h2 class="main-header">We have a brand new way for you to enjoy the weekly playtests. Click\n below to get started!</h2>\n');
    }
    c.push('\n <div id="main-findserver">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
    c.push('">Find a Server</a>\n </div>\n </div>\n </div>\n');
    return c.join("");
};
main.index.block_mainMiddle = new Surface.Block("main.index.block_mainMiddle");
main.index.block_mainMiddle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("main" + ("." + "singlecolumns")), o, null, kwargs));
    c.push("\n");
    return c.join("");
};
main.index.block_mainContent = new Surface.Block("main.index.block_mainContent");
main.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="base-top-title">\n <span>Home</span>\n </div>\n');
    c.push(b.get("mainTop")(o, b, kwargs));
    c.push("\n");
    c.push(b.get("mainMiddle")(o, b, kwargs));
    return c.join("");
};
var block_main_landingout = new Surface.BlockConfig("base.ajaxindex", {"titleSite": "main.landingout.block_titleSite","mainMiddle": "main.landingout.block_mainMiddle","bodyClass": "main.landingout.block_bodyClass","titleItem": "main.landingout.block_titleItem","mainContent": "main.landingout.block_mainContent"});
main.addTemplate(new Surface.Template("landingout"));
main.landingout.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_landingout;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.landingout");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_main_landingout_use_143_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "main.landingout._use_143_18_block_content","title": "main.landingout._use_143_18_block_title","extraClass": "main.landingout._use_143_18_block_extraClass"});
main.landingout.block_titleItem = new Surface.Block("main.landingout.block_titleItem");
main.landingout.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Battlelog");
    return c.join("");
};
main.landingout.block_titleSite = new Surface.Block("main.landingout.block_titleSite");
main.landingout.block_titleSite.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.landingout.block_bodyClass = new Surface.Block("main.landingout.block_bodyClass");
main.landingout.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("base-content-full-width");
    return c.join("");
};
main.landingout._use_143_18_block_extraClass = new Surface.Block("main.landingout._use_143_18_block_extraClass");
main.landingout._use_143_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-landing-liveeventsbox");
    return c.join("");
};
main.landingout._use_143_18_block_title = new Surface.Block("main.landingout._use_143_18_block_title");
main.landingout._use_143_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Live events");
    return c.join("");
};
main.landingout._use_143_18_block_content = new Surface.Block("main.landingout._use_143_18_block_content");
main.landingout._use_143_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("feed" + ("." + "livefeed")), o, null, kwargs));
    c.push("\n");
    return c.join("");
};
main.landingout.block_mainMiddle = new Surface.Block("main.landingout.block_mainMiddle");
main.landingout.block_mainMiddle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    c.push(' <div id="main-middle" class="main-landing-middle">\n <div id="main-content">\n');
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    if ((l_realm.section != Surface.globalContext.staticContext.sections.ALL)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "gamestats")), o, null, kwargs));
        c.push("\n");
    }
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_main_landingout_use_143_18, kwargs));
    c.push('\n <div style="clear: both;"></div>\n </div>\n </div>\n');
    return c.join("");
};
main.landingout.block_mainContent = new Surface.Block("main.landingout.block_mainContent");
main.landingout.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    var l_session;
    c.push(' <div id="main-landing">\n <div class="main-landing-inner">\n');
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.ALL)) {
        c.push(Surface.importTemplate(("main" + ("." + "allheader")), o, null, kwargs));
    }
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BFBC2)) {
        c.push(Surface.importTemplate(("main" + ("." + "bfbc2header")), o, null, kwargs));
    }
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
        c.push(Surface.importTemplate(("main" + ("." + "veniceheader")), o, null, kwargs));
    }
    c.push('\n <div class="main-landing-joincontent">\n <div class="main-landing-joincontent-login">\n <div class="main-landing-joincontent-login-padder">\n');
    if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
        c.push("\n <h1>");
        c.push(Surface.valOut("YOUR MOVE, SOLDIER"));
        c.push('</h1>\n <div class="base-button-signup"><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/registration/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("JOIN NOW"));
        c.push('</a></div>\n <div class="main-landing-joincontent-login-seperator"></div>\n <h4>');
        c.push(Surface.valOut("Sign in"));
        c.push('</h4>\n <form method="POST" action="');
        if (Surface.globalContext.staticContext.sslAvailable) {
            c.push(Surface.valOut(Surface.globalContext.staticContext.currentHostSecure));
        }
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/login/", Surface.urlContext)));
        c.push('">\n <div class="main-landing-joincontent-login-form-input common-label-on-input">\n <label for="main-landing-login-email">');
        c.push(Surface.valOut("Email"));
        c.push('</label>\n <input type="email" id="main-landing-login-email" name="email" value="" />\n <div style="clear: both;"></div>\n </div>\n <div class="main-landing-joincontent-login-form-input common-label-on-input">\n <label for="main-landing-login-password">');
        c.push(Surface.valOut("Password"));
        c.push('</label>\n <input type="password" id="main-landing-login-password" name="password" value="" />\n <div style="clear: both;"></div>\n </div>\n <div class="main-landing-login-form-actions">\n <div class="main-landing-login-form-action-remember">\n <input type="checkbox" id="main-landing-login-action-remember" name="loginpersist" value="1" />\n <label for="main-landing-login-action-remember">');
        c.push(Surface.valOut("Remember me"));
        c.push('</label>\n </div>\n <input type="submit" class="base-button-arrow-small-grey" value="');
        c.push(Surface.valOut("Sign in"));
        c.push('" style="float: right;" />\n <div style="clear: both;"></div>\n </div>\n </form>\n <div class="main-landing-joincontent-login-seperator-small"></div>\n <a href="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.forgotPasswordUrl) != "undefined" && o.forgotPasswordUrl !== null) ? o.forgotPasswordUrl : "#")));
        c.push('" class="main-landing-login-action-lostpassword">');
        c.push(Surface.valOut("Forgot password?"));
        c.push("</a>\n");
    } else {
        c.push(' <h1 class="main-landing-loggedin-goto-game-title">');
        c.push(Surface.valOut("GET STARTED, SOLDIER"));
        c.push('</h1>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, {"_section": "bfbc2"})));
        c.push('">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bfbc2/landing-goto.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="Battlefield Bad Company 2" width="262" height="152" />\n </a>\n <div class="base-button-signup main-landing-loggedin-goto-game"><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/", Surface.urlContext, {"_section": "bfbc2"})));
        c.push('">');
        c.push(Surface.valOut("GO TO BFBC2"));
        c.push("</a></div>\n");
    }
    c.push('\n </div>\n </div>\n <div class="main-landing-joincontent-pitchboxes">\n <div class="main-landing-joincontent-pitchboxes-pitch">\n <div class="main-landing-joincontent-pitchbox-bg main-landing-pitch_1"></div>\n <h1>');
    c.push(Surface.valOut("Never play alone"));
    c.push('</h1>\n <div class="main-landing-joincontent-pitchboxes-pitch-info">\n');
    if (($S.callFunction("base.section", l_realm.section, b, kwargs) == "all")) {
        c.push(" ");
        c.push(Surface.valOut("Experience"));
        c.push(' <img width="68" height="20" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bfbc2/pitch_icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="BFBC2" style="margin: 0 3px -9px; " /> ');
        c.push(Surface.valOut("with your friends"));
        c.push("\n");
    }
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BFBC2)) {
        c.push(" ");
        c.push(Surface.valOut("Experience"));
        c.push(' <img width="68" height="20" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bfbc2/pitch_icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="BFBC2" style="margin: 0 3px -9px; " /> ');
        c.push(Surface.valOut("with your friends"));
        c.push("\n");
    }
    c.push("\n");
    if ((l_realm.section == Surface.globalContext.staticContext.sections.BF3)) {
        c.push(" ");
        c.push(Surface.valOut("Experience"));
        c.push(' <img width="68" height="14" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bf3/pitch_icon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="BF3" style="margin: 0 3px -3px; " /> ');
        c.push(Surface.valOut("with your friends"));
        c.push("\n");
    }
    c.push(' </div>\n </div>\n <div class="main-landing-joincontent-pitchboxes-pitch">\n <div class="main-landing-joincontent-pitchbox-bg main-landing-pitch_2"></div>\n <h1>');
    c.push(Surface.valOut("Find your servers"));
    c.push('</h1>\n <div class="main-landing-joincontent-pitchboxes-pitch-info">\n ');
    c.push(Surface.valOut("Browse and join servers from the web"));
    c.push('\n </div>\n </div>\n <div style="clear: both; height: 16px;"></div>\n <div class="main-landing-joincontent-pitchboxes-pitch">\n <div class="main-landing-joincontent-pitchbox-bg main-landing-pitch_3"></div>\n <h1>');
    c.push(Surface.valOut("INTEGRATED VOICE"));
    c.push('</h1>\n <div class="main-landing-joincontent-pitchboxes-pitch-info">\n ');
    c.push(Surface.valOut("Customized, seamless voice integration"));
    c.push('\n </div>\n </div>\n <div class="main-landing-joincontent-pitchboxes-pitch">\n <div class="main-landing-joincontent-pitchbox-bg main-landing-pitch_4"></div>\n <h1>');
    c.push(Surface.valOut("THRILLING GATHERS"));
    c.push('</h1>\n <div class="main-landing-joincontent-pitchboxes-pitch-info">\n ');
    c.push(Surface.valOut("Play gathers and compete for fame and glory"));
    c.push("\n </div>\n </div>\n </div>\n </div>\n </div>\n </div>\n");
    c.push(b.get("mainMiddle")(o, b, kwargs));
    return c.join("");
};
var block_main_languageselect = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "main.languageselect.block_mainContent"});
main.addTemplate(new Surface.Template("languageselect"));
main.languageselect.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_languageselect;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.languageselect");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_main_languageselect_use_14_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "main.languageselect._use_14_22_block_content","extraClassInner": "main.languageselect._use_14_22_block_extraClassInner","title": "main.languageselect._use_14_22_block_title","titleContainer": "main.languageselect._use_14_22_block_titleContainer"});
main.languageselect._use_14_22_block_title = new Surface.Block("main.languageselect._use_14_22_block_title");
main.languageselect._use_14_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.languageselect._use_14_22_block_titleContainer = new Surface.Block("main.languageselect._use_14_22_block_titleContainer");
main.languageselect._use_14_22_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(b.get("title")(o, b, kwargs));
    return c.join("");
};
main.languageselect._use_14_22_block_extraClassInner = new Surface.Block("main.languageselect._use_14_22_block_extraClassInner");
main.languageselect._use_14_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-selectlanguage-form-padder");
    return c.join("");
};
main.languageselect._use_14_22_block_content = new Surface.Block("main.languageselect._use_14_22_block_content");
main.languageselect._use_14_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_language;
    var l_for_main_languageselect_23_30_list;
    c.push(" ");
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push("\n");
    l_for_main_languageselect_23_30_list = o.languages;
    if ((S.Modifier.count(l_for_main_languageselect_23_30_list) > 0)) {
        for (var l_for_main_languageselect_23_30_key in l_for_main_languageselect_23_30_list) {
            if (!Surface.isValidLoopItem(l_for_main_languageselect_23_30_list[l_for_main_languageselect_23_30_key])) {
                continue;
            }
            var l_l = l_for_main_languageselect_23_30_list[l_for_main_languageselect_23_30_key];
            c.push(' <div class="main-selectlanguage-language">\n');
            l_language = S.Modifier.get(l_l, "lang");
            c.push(' <input type="radio" name="lang" value="');
            c.push(Surface.valOut(l_language));
            c.push('" id="language-select-');
            c.push(Surface.valOut(l_language));
            c.push('"');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.preferredLang) != "undefined" && o.preferredLang !== null) ? o.preferredLang : "en") == l_language)) {
                c.push(" checked");
            }
            c.push('>\n <label for="language-select-');
            c.push(Surface.valOut(l_language));
            c.push('">\n ');
            if ((l_language == "en")) {
                c.push("English");
            }
            c.push("\n");
            if ((l_language == "fr")) {
                c.push("Franaise");
            }
            c.push("\n");
            if ((l_language == "de")) {
                c.push("Deutsch");
            }
            c.push("\n");
            if ((l_language == "es")) {
                c.push("Espaol");
            }
            c.push("\n");
            if ((l_language == "it")) {
                c.push("Italiano");
            }
            c.push("\n");
            if ((l_language == "pl")) {
                c.push("Polski");
            }
            c.push("\n");
            if ((l_language == "ru")) {
                c.push("P??????");
            }
            c.push("\n");
            if ((l_language == "kr")) {
                c.push("???");
            }
            c.push("\n");
            if ((l_language == "zh")) {
                c.push("??");
            }
            c.push("\n");
            if ((l_language == "cz")) {
                c.push("Cesky");
            }
            c.push("\n");
            if ((l_language == "jp")) {
                c.push("??");
            }
            c.push("\n </label>\n </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n');
    return c.join("");
};
main.languageselect.block_mainContent = new Surface.Block("main.languageselect.block_mainContent");
main.languageselect.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content main-selectlanguage-middle">\n <div class="main-selectlanguage-form-wrapper">\n <h1 class="base-big-title wfont">Select Language</h1>\n <div class="base-clear"></div>\n <form method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/setLanguage/{lang}/", Surface.urlContext)));
    c.push('" class="main-selectlanguage-form">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_main_languageselect_use_14_22, kwargs));
    c.push('\n <button class="base-button-arrow-large main-selectlanguage-form-submit" type="submit">');
    c.push(Surface.valOut("Save"));
    c.push("</button>\n </form>\n </div>\n </div>\n </div>\n");
    return c.join("");
};
var block_main_loggedin = new Surface.BlockConfig("base.ajaxindex", {"mainLoggedInTop": "main.loggedin.block_mainLoggedInTop","mainLoggedInSecondaryColumn": "main.loggedin.block_mainLoggedInSecondaryColumn","mainContent": "main.loggedin.block_mainContent"});
main.addTemplate(new Surface.Template("loggedin"));
main.loggedin.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_main_loggedin_use_538_26 = new Surface.BlockConfig("common.boxwideclean", {"content": "main.loggedin._use_538_26_block_content","title": "main.loggedin._use_538_26_block_title","extraClassInner": "main.loggedin._use_538_26_block_extraClassInner","extraClass": "main.loggedin._use_538_26_block_extraClass"});
main.loggedin.surface_36_34 = new Surface.SingleSurface("main.loggedin.surface_36_34");
main.loggedin.surface_36_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push('<surf:container id="');
    c.push("surface-main-multiplayer");
    c.push('">');
    var l_for_main_loggedin_43_50_iteration;
    var l_for_main_loggedin_43_50_list;
    if (((typeof (o) != "undefined" && o !== null && typeof (o.friendsPlaying) != "undefined" && o.friendsPlaying !== null) && S.Modifier.count(o.friendsPlaying))) {
        c.push(' <div class="main-loggedin-header-puff-info">\n <div class="main-loggedin-header-puff-info-title">');
        c.push(Surface.valOut(S.Modifier.count(o.friendsPlaying)));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(o.friendsPlaying), "friend", "friends")));
        c.push('\n playing\n </div>\n <div class="main-loggedin-header-puff-friends-avatars-wrapper">\n');
        l_for_main_loggedin_43_50_list = o.friendsPlaying;
        l_for_main_loggedin_43_50_iteration = 0;
        if ((S.Modifier.count(l_for_main_loggedin_43_50_list) > 0)) {
            for (var l_for_main_loggedin_43_50_key in l_for_main_loggedin_43_50_list) {
                if (!Surface.isValidLoopItem(l_for_main_loggedin_43_50_list[l_for_main_loggedin_43_50_key])) {
                    continue;
                }
                var l_friend = l_for_main_loggedin_43_50_list[l_for_main_loggedin_43_50_key];
                l_for_main_loggedin_43_50_iteration = (l_for_main_loggedin_43_50_iteration + 1);
                if ((l_for_main_loggedin_43_50_iteration > 5)) {
                    break;
                }
                c.push(' <div class="main-loggedin-header-puff-friends-avatar">');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend,"gravatarSize": 30,"tipsyTitle": true}, null, kwargs));
                c.push("</div>\n");
            }
        }
        c.push(' </div>\n <a class="main-view-friends-view-link">');
        c.push(Surface.valOut("View in Com Center"));
        c.push("</a>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.loggedin", "surface_36_34", "surface-main-multiplayer", o, b);
    return c.join("");
};
main.loggedin.surface_59_38 = new Surface.SingleSurface("main.loggedin.surface_59_38");
main.loggedin.surface_59_38.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push('<surf:container id="');
    c.push("main-logged-in-quickmatch");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <button class="base-button-wide-low-dropdown base-button-general-dropdown"\n type="reset">');
        c.push(Surface.valOut("Quick Match"));
        c.push('</button>\n <div class="base-clear"></div>\n <div class="base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n <li>\n <a class="base-no-ajax gamemanager-launch-quickmatch"><span\n class="join-alone"></span> ');
        c.push(Surface.valOut("Join alone"));
        c.push('\n </a>\n </li>\n <li>\n <a id="main-loggedin-header-puff-multiplayer-groupjoin"\n href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": "quickmatch"})));
        c.push('"\n class="base-no-ajax base-button-dropdown-joingroup"><span\n class="join-party"></span>');
        c.push(Surface.valOut("Join with Party"));
        c.push('\n </a>\n </li>\n </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
    } else {
        c.push(' <button class="base-button-wide-low gamemanager-launch-quickmatch base-quickmatch-serverfilter-menu"\n data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getJsonFilter/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("Quick Match"));
        c.push("</button>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.loggedin", "surface_59_38", "main-logged-in-quickmatch", o, b);
    return c.join("");
};
main.loggedin.surface_126_39 = new Surface.SingleSurface("main.loggedin.surface_126_39");
main.loggedin.surface_126_39.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push('<surf:container id="');
    c.push("surface-main-coop");
    c.push('">');
    var l_for_main_loggedin_131_54_iteration;
    var l_for_main_loggedin_131_54_list;
    if (S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.coopFriendsPlaying) != "undefined" && o.coopFriendsPlaying !== null) ? o.coopFriendsPlaying : []))) {
        c.push(' <div class="main-loggedin-header-puff-info">\n <div class="main-loggedin-header-puff-info-title">');
        c.push(Surface.valOut(S.Modifier.count(o.coopFriendsPlaying)));
        c.push(" ");
        c.push(Surface.valOut("friends playing"));
        c.push('</div>\n <div class="main-loggedin-header-puff-friends-avatars-wrapper">\n');
        l_for_main_loggedin_131_54_list = o.coopFriendsPlaying;
        l_for_main_loggedin_131_54_iteration = 0;
        if ((S.Modifier.count(l_for_main_loggedin_131_54_list) > 0)) {
            for (var l_for_main_loggedin_131_54_key in l_for_main_loggedin_131_54_list) {
                if (!Surface.isValidLoopItem(l_for_main_loggedin_131_54_list[l_for_main_loggedin_131_54_key])) {
                    continue;
                }
                var l_friend = l_for_main_loggedin_131_54_list[l_for_main_loggedin_131_54_key];
                l_for_main_loggedin_131_54_iteration = (l_for_main_loggedin_131_54_iteration + 1);
                if ((l_for_main_loggedin_131_54_iteration > 5)) {
                    break;
                }
                c.push(' <div class="main-loggedin-header-puff-friends-avatar">');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend,"gravatarSize": 30,"tipsyTitle": true}, null, kwargs));
                c.push("</div>\n");
            }
        }
        c.push(' </div>\n <a class="main-view-friends-view-link" href="#">');
        c.push(Surface.valOut("View in Com Center"));
        c.push("</a>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.loggedin", "surface_126_39", "surface-main-coop", o, b);
    return c.join("");
};
main.loggedin.block_mainLoggedInTop = new Surface.Block("main.loggedin.block_mainLoggedInTop");
main.loggedin.block_mainLoggedInTop.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.loggedin.surface_440_30 = new Surface.SurfaceList("main.loggedin.surface_440_30", "friends", "friend", "friend.userId");
main.loggedin.surface_448_38 = new Surface.SingleSurface("main.loggedin.surface_448_38");
main.loggedin.surface_448_38.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("user-friends-surface", S.Modifier.concat("_", o.friend.userId)));
    c.push('">');
    if (((o.for_main_loggedin_440_30_iteration < 15) || !((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null)))) {
        c.push(" <li ");
        if (!(o.for_main_loggedin_440_30_hasNext)) {
            c.push('class="last"');
        }
        c.push(" >\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : false)) {
            c.push(' <div class="base-friends-avatar-only">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend,"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
            c.push("\n </div>\n");
        } else {
            c.push('\n <div class="base-friends-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.friend,"gravatarSize": 30}, null, kwargs));
            c.push('\n </div>\n <div class="base-friends-username" ');
            if (!(((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false))) {
                c.push('style="line-height: 35px;"');
            }
            c.push(">\n ");
            c.push(Surface.importTemplate(("profile" + ("." + "link")), {"userId": o.friend.userId,"username": o.friend.username}, null, kwargs));
            c.push("\n");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false)) {
                c.push(' <br>\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.friend.presence.game, o.friend.presence.platform, o.friend.presence.gameExpansion, b, kwargs)));
                c.push(' main-friendlist-playing"></span>\n ');
                c.push(Surface.importTemplate(("common" + ("." + "playing")), {"showPlayingMode": false,"first": 14,"limit": 28,"presence": o.friend.presence}, null, kwargs));
                c.push("\n");
            }
            c.push(" </div>\n");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : false)) {
                c.push(' <div class="profile-friends-remove" id="removeFriend-');
                c.push(Surface.valOut(o.friend.userId));
                c.push('"></div>\n');
            }
            c.push("\n");
            if (((typeof (o) != "undefined" && o !== null && typeof (o.friend) != "undefined" && o.friend !== null && typeof (o.friend.presence) != "undefined" && o.friend.presence !== null && typeof (o.friend.presence.isPlaying) != "undefined" && o.friend.presence.isPlaying !== null) ? o.friend.presence.isPlaying : false)) {
                c.push(' <div class="base-friends-joinbutton">\n ');
                c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"friendPersonaId": o.friend.presence.personaId,"presence": o.friend.presence}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' <div class="base-clear"></div>\n');
        }
        c.push(" </li>\n");
    }
    if (((o.for_main_loggedin_440_30_iteration > 14) && (typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null))) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, o.user)));
        c.push('">');
        c.push(Surface.valOut("View all"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.count(o.friends)));
        c.push(" ");
        c.push(Surface.valOut("Friends"));
        c.push("</a>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.loggedin", "surface_448_38", S.Modifier.concat("user-friends-surface", S.Modifier.concat("_", o.friend.userId)), o, b);
    return c.join("");
};
main.loggedin.surface_440_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedin;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedin");
    c.push('<surf:container id="');
    c.push("user-friends-surface");
    c.push('">');
    var l_for_main_loggedin_440_30_list;
    var l_for_main_loggedin_440_30_count;
    var l_for_main_loggedin_440_30_iteration;
    var l_for_main_loggedin_440_30_hasNext;
    l_for_main_loggedin_440_30_list = S.Modifier.multisort(o.friends, "presence.isPlaying", "desc", "presence.isOnline", "desc", "username", "asc");
    l_for_main_loggedin_440_30_count = S.Modifier.count(l_for_main_loggedin_440_30_list);
    l_for_main_loggedin_440_30_iteration = 0;
    if ((S.Modifier.count(l_for_main_loggedin_440_30_list) > 0)) {
        c.push(' <div class="main-loggedin-clean-heading">\n <h3 class="grey">');
        c.push(Surface.valOut(S.Modifier.count(o.friends)));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(o.friends), "friend", "friends")));
        c.push(" ");
        c.push(Surface.valOut("Online"));
        c.push('</h3>\n </div>\n <div id="base-loggedin-friends-list-container" ');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : false)) {
            c.push('class="avatar-only"');
        }
        c.push(" >\n <ul>\n");
        for (var l_for_main_loggedin_440_30_key in l_for_main_loggedin_440_30_list) {
            if (!Surface.isValidLoopItem(l_for_main_loggedin_440_30_list[l_for_main_loggedin_440_30_key])) {
                continue;
            }
            var l_friend = l_for_main_loggedin_440_30_list[l_for_main_loggedin_440_30_key];
            l_for_main_loggedin_440_30_iteration = (l_for_main_loggedin_440_30_iteration + 1);
            l_for_main_loggedin_440_30_hasNext = (l_for_main_loggedin_440_30_iteration < l_for_main_loggedin_440_30_count);
            c.push(main.loggedin.surface_448_38.render({"avatarOnly": ((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : null),"capFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null) ? o.capFriends : null),"deleteFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : null),"for_main_loggedin_440_30_hasNext": ((typeof (l_for_main_loggedin_440_30_hasNext) != "undefined" && l_for_main_loggedin_440_30_hasNext !== null) ? l_for_main_loggedin_440_30_hasNext : null),"for_main_loggedin_440_30_iteration": ((typeof (l_for_main_loggedin_440_30_iteration) != "undefined" && l_for_main_loggedin_440_30_iteration !== null) ? l_for_main_loggedin_440_30_iteration : null),"friend": ((typeof (l_friend) != "undefined" && l_friend !== null) ? l_friend : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : null)}, b, kwargs));
        }
        c.push(' </ul>\n <a class="main-view-friends-view-link">');
        c.push(Surface.valOut("View in Com Center"));
        c.push("</a>\n");
        c.push('\n <div class="base-clear"></div>\n </div>\n');
    } else {
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.loggedin", "surface_440_30", "user-friends-surface", o, b);
    return c.join("");
};
main.loggedin.block_mainLoggedInSecondaryColumn = new Surface.Block("main.loggedin.block_mainLoggedInSecondaryColumn");
main.loggedin.block_mainLoggedInSecondaryColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_main_loggedin_412_30_count;
    var l_for_main_loggedin_412_30_hasNext;
    var l_for_main_loggedin_412_30_iteration;
    var l_realm;
    var l_session;
    var l_latestServerMapinfo;
    var l_recommendedServerMapinfo;
    var l_for_main_loggedin_412_30_list;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div id="main-loggedin-leftcolumn">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersonaGame) != "undefined" && l_session.currentPersonaGame !== null))) {
        c.push(' <div class="main-loggedin-leftcolumn-active-soldier">\n <div class="main-loggedin-leftcolumn-active-soldier-inner">\n <h3 class="grey">');
        c.push(Surface.valOut("Active Soldier"));
        c.push('</h3>\n <a class="main-loggedin-leftcolumn-active-soldier-name" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_session.currentPersona, l_session.currentPersonaGame, l_session.currentPersona.namespace, b, kwargs))));
        c.push('">');
        c.push(Surface.valOut(l_session.currentPersona.personaName));
        c.push('</a>\n <div class="main-loggedin-leftcolumn-active-soldier-info">\n <div class="main-loggedin-leftcolumn-active-soldier-info-platform"><span class="');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_session.currentPersonaGame, l_session.currentPersona.namespace, 0, b, kwargs)));
        c.push('"></span></div> \n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_session.currentPersona, l_session.currentPersonaGame, l_session.currentPersona.namespace, b, kwargs))));
        c.push('">');
        c.push(Surface.valOut("Soldier Stats"));
        c.push('</a>\n </div>\n <a class="main-loggedin-leftcolumn-active-soldier-link" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_session.currentPersona, l_session.currentPersonaGame, l_session.currentPersona.namespace, b, kwargs))));
        c.push('">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showsoldierpic")), {"addclass": "main-loggedin-leftcolumn-active-soldier-rank-char-image","picture": o.personaPicture,"size": "medium"}, null, kwargs));
        c.push('\n </a>\n <input type="hidden" id="main-stats-fetch-url" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/indexstats/{personaId}/{platform}/", Surface.urlContext, {"personaId": l_session.currentPersona.personaId,"platform": l_session.currentPersona.namespace})));
        c.push('"/>\n </div>\n </div>\n <div class="main-loggedin-leftcolumn-upcoming-unlocks">\n <h3 class="grey">');
        c.push(Surface.valOut("Upcoming unlocks"));
        c.push('</h3>\n <div class="main-targetsunlocks-box-wrapper">\n <input type="hidden" id="main-unlocks-area" />\n </div>\n <div class="main-loggedin-leftcolumn-upcoming-unlocks-footer">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": l_session.currentPersona.personaId,"personaName": l_session.currentPersona.personaName,"namespace": $S.callFunction("common.namespaceToPlatform", l_session.currentPersona.namespace, b, kwargs)})));
        c.push('">');
        c.push(Surface.valOut("All upcoming unlocks"));
        c.push("</a>\n </div>\n </div>\n");
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.latestServer) != "undefined" && o.latestServer !== null)) {
        c.push(' <div class="common-secondary-column-line"></div>\n <div class="main-loggedin-server">\n');
        l_latestServerMapinfo = $S.callFunction("serverguide.mapinfo", l_realm.game, o.latestServer.map, b, kwargs);
        c.push('\n <div class="main-loggedin-server-description">\n ');
        c.push(Surface.valOut("LATEST SERVER"));
        c.push('\n </div>\n <div class="main-loggedin-server-info">\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.latestServer.guid, o.latestServer.name, b, kwargs)));
        c.push('">\n <div class="main-loggedin-server-map">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.get(l_latestServerMapinfo, "imageSmall", "NOT_FOUND"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="');
        c.push(Surface.valOut(S.Modifier.get(l_latestServerMapinfo, "mapId", "NOT_FOUND")));
        c.push('" />\n </div>\n </a>\n <div class="main-loggedin-server-infoarea">\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.latestServer.guid, o.latestServer.name, b, kwargs)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.latestServer.name}, null, kwargs));
        c.push("\n </a><br>\n ");
        c.push(Surface.valOut(o.latestServer.numPlayers));
        c.push("/");
        c.push(Surface.valOut(o.latestServer.maxPlayers));
        c.push(" ");
        c.push(Surface.valOut("Players"));
        c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n');
    }
    if ((typeof (o) != "undefined" && o !== null && typeof (o.recommendedServer) != "undefined" && o.recommendedServer !== null)) {
        c.push(' <div class="main-loggedin-server">\n');
        l_recommendedServerMapinfo = $S.callFunction("serverguide.mapinfo", l_realm.game, o.recommendedServer.map, b, kwargs);
        c.push('\n <div class="main-loggedin-server-description">\n RECOMMENDED SERVER\n </div>\n <div class="main-loggedin-server-info">\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.recommendedServer.guid, o.recommendedServer.name, b, kwargs)));
        c.push('">\n <div class="main-loggedin-server-map">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.get(l_recommendedServerMapinfo, "imageSmall", "NOT_FOUND"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="');
        c.push(Surface.valOut(S.Modifier.get(l_recommendedServerMapinfo, "mapId", "NOT_FOUND")));
        c.push('" />\n </div>\n </a>\n <div class="main-loggedin-server-infoarea">\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.recommendedServer.guid, o.recommendedServer.name, b, kwargs)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.recommendedServer.name}, null, kwargs));
        c.push("</a><br>\n ");
        c.push(Surface.valOut(o.recommendedServer.numPlayers));
        c.push("/");
        c.push(Surface.valOut(o.recommendedServer.maxPlayers));
        c.push(" ");
        c.push(Surface.valOut("Players"));
        c.push("\n </div>\n </div>\n </div>\n");
    }
    c.push("\n");
    if ((S.Modifier.get(Surface.urlContext, "_language", "en") != "fr")) {
        c.push(' <div class="main-show-banner">\n <a href="http://store.dice.se">\n <span class="main-show-banner-title">\n ');
        c.push(Surface.valOut("Gear up for battle"));
        c.push('\n </span>\n <span class="main-show-banner-info">\n ');
        c.push(Surface.valOut("Browse our Battlefield 3"));
        c.push("<br>\n ");
        c.push(Surface.valOut("Online Shop"));
        c.push("\n </span>\n </a>\n </div>\n");
    }
    c.push('\n <div id="main-latest-news">\n <div class="main-loggedin-clean-heading">\n <h3 class="grey">');
    c.push(Surface.valOut("Latest News"));
    c.push("</h3>\n </div>\n");
    l_for_main_loggedin_412_30_list = o.latestNews;
    l_for_main_loggedin_412_30_count = S.Modifier.count(l_for_main_loggedin_412_30_list);
    l_for_main_loggedin_412_30_iteration = 0;
    if ((S.Modifier.count(l_for_main_loggedin_412_30_list) > 0)) {
        for (var l_for_main_loggedin_412_30_key in l_for_main_loggedin_412_30_list) {
            if (!Surface.isValidLoopItem(l_for_main_loggedin_412_30_list[l_for_main_loggedin_412_30_key])) {
                continue;
            }
            var l_news = l_for_main_loggedin_412_30_list[l_for_main_loggedin_412_30_key];
            l_for_main_loggedin_412_30_iteration = (l_for_main_loggedin_412_30_iteration + 1);
            l_for_main_loggedin_412_30_hasNext = (l_for_main_loggedin_412_30_iteration < l_for_main_loggedin_412_30_count);
            c.push(' <div class="main-latest-news-item');
            if (!(l_for_main_loggedin_412_30_hasNext)) {
                c.push(" last");
            }
            c.push('">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": l_news.id})));
            c.push('">');
            c.push(Surface.valOut(l_news.title));
            c.push('</a>\n <div class="main-news-date">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": l_news.publishDate}, null, kwargs));
            c.push("\n");
            c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
            c.push('\n </div>\n <div class="main-news-comments">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/view/{id}/{page}/{scrollToComments}/", Surface.urlContext, {"id": l_news.id,"page": 1,"scrollToComments": true})));
            c.push('">\n ');
            c.push(Surface.valOut(S.Modifier.count(l_news.comments)));
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(l_news.comments), "Comment", "Comments")));
            c.push("\n </a>\n </div>\n </div>\n");
        }
    }
    c.push('\n <div class="main-all-news-link">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/news/{offset}/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("All news"));
    c.push('</a>\n </div>\n </div>\n <div class="common-secondary-column-line"></div>\n <div id="main-loggedin-friends">\n');
    o.friends = [];
    c.push(main.loggedin.surface_440_30.render({"avatarOnly": ((typeof (o) != "undefined" && o !== null && typeof (o.avatarOnly) != "undefined" && o.avatarOnly !== null) ? o.avatarOnly : null),"capFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.capFriends) != "undefined" && o.capFriends !== null) ? o.capFriends : null),"deleteFriends": ((typeof (o) != "undefined" && o !== null && typeof (o.deleteFriends) != "undefined" && o.deleteFriends !== null) ? o.deleteFriends : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : null)}, b, kwargs));
    c.push(" </div>\n </div>\n ");
    return c.join("");
};
main.loggedin._use_538_26_block_extraClass = new Surface.Block("main.loggedin._use_538_26_block_extraClass");
main.loggedin._use_538_26_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.loggedin._use_538_26_block_extraClassInner = new Surface.Block("main.loggedin._use_538_26_block_extraClassInner");
main.loggedin._use_538_26_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
main.loggedin._use_538_26_block_title = new Surface.Block("main.loggedin._use_538_26_block_title");
main.loggedin._use_538_26_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Friends' Battle feed"));
    return c.join("");
};
main.loggedin._use_538_26_block_content = new Surface.Block("main.loggedin._use_538_26_block_content");
main.loggedin._use_538_26_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    c.push(' <div id="main-loggedin-feed">\n');
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (((!(S.Modifier.count(o.feed)) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null))) {
        c.push(' <div id="feed-container" class="feed-container-empty">\n <div class="feed-nofriendscaption">\n <span>');
        c.push(Surface.valOut("When you add friends their activity will appear here in real-time."));
        c.push('</span>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": l_session.user.username})));
        c.push('">');
        c.push(Surface.valOut("Find your friends now"));
        c.push('</a>\n </div>\n <div class="base-clear"></div>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": l_session.user.username})));
        c.push('"><img border=0 src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/origin-logo-m.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" width="124" height="45"></a>\n </div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "feed")), o, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
main.loggedin.block_mainContent = new Surface.Block("main.loggedin.block_mainContent");
main.loggedin.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_statusMessage;
    var l_url;
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "main"}, null, kwargs));
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle main-loggedin-middle">\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="main-loggedin-header">\n <div class="main-loggedin-header-inner">\n <div class="base-middle-content">\n <div class="main-loggedin-header-puffs">\n <div class="main-loggedin-header-puff" id="main-loggedin-header-puff-multiplayer"\n data-href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
    c.push('">\n <div class="main-loggedin-header-puff-background"></div>\n <div class="main-loggedin-header-puff-overlay"></div>\n <div class="main-loggedin-header-puff-content">\n <h2 class="wfont">');
    c.push(Surface.valOut("Multiplayer"));
    c.push("</h2>\n");
    c.push(main.loggedin.surface_36_34.render({"friendsPlaying": ((typeof (o) != "undefined" && o !== null && typeof (o.friendsPlaying) != "undefined" && o.friendsPlaying !== null) ? o.friendsPlaying : null)}, b, kwargs));
    c.push('\n <div class="main-loggedin-header-puff-play">\n');
    c.push(main.loggedin.surface_59_38.render({}, b, kwargs));
    l_url = S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext);
    c.push('\n <div id="puff-quickmatch-filter" class="main-loggedin-header-puff-play-info"><a href=\'');
    c.push(Surface.valOut(l_url));
    c.push("?expand=1'>");
    c.push(Surface.valOut("Configure server filter"));
    c.push('</a></div>\n </div>\n </div>\n </div>\n <div class="main-loggedin-header-puff');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(" puff-disabled");
    }
    c.push('"\n id="main-loggedin-header-puff-coop" ');
    if (!(Surface.globalContext.staticContext.isOpenBeta)) {
        c.push('\n data-href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
        c.push('" ');
    }
    c.push('>\n <div class="main-loggedin-header-puff-background"></div>\n <div class="main-loggedin-puff-skin"></div>\n <div class="main-loggedin-header-puff-overlay');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(" disabled");
    }
    c.push('"></div>\n');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(' <div class="main-loggedin-header-puff-content">\n <h2 class="wfont">');
        c.push(Surface.valOut("CO-OP"));
        c.push('</h2>\n <div class="main-loggedin-header-puff-info-title">NOT IN BETA</div>\n </div>\n');
    } else {
        c.push(' <div class="main-loggedin-header-puff-content">\n <h2 class="wfont">');
        c.push(Surface.valOut("CO-OP"));
        c.push("</h2>\n");
        c.push(main.loggedin.surface_126_39.render({"coopFriendsPlaying": ((typeof (o) != "undefined" && o !== null && typeof (o.coopFriendsPlaying) != "undefined" && o.coopFriendsPlaying !== null) ? o.coopFriendsPlaying : null)}, b, kwargs));
        c.push('\n <div class="main-loggedin-header-puff-play">\n <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
        c.push('" type="GET">\n <button class="base-button-wide-low"\n type="submit">');
        c.push(Surface.valOut("CO-OP Overview"));
        c.push("</button>\n </form>\n </div>\n </div>\n");
    }
    c.push(' </div>\n <div class="main-loggedin-header-puff last');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(" puff-disabled");
    }
    c.push('"\n id="main-loggedin-header-puff-campaign" ');
    if (!(Surface.globalContext.staticContext.isOpenBeta)) {
        c.push('\n data-href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/campaign/", Surface.urlContext)));
        c.push('" ');
    }
    c.push('>\n <div class="main-loggedin-header-puff-background"></div>\n <div class="main-loggedin-header-puff-overlay');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(" disabled");
    }
    c.push('"></div>\n <div class="main-loggedin-puff-skin"></div>\n');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(' <div class="main-loggedin-header-puff-content">\n <h2 class="wfont">');
        c.push(Surface.valOut("Campaign"));
        c.push('</h2>\n <div class="main-loggedin-header-puff-info-title">NOT IN BETA</div>\n </div>\n');
    } else {
        c.push(' <div class="main-loggedin-header-puff-content">\n <h2 class="wfont">');
        c.push(Surface.valOut("Campaign"));
        c.push('</h2>\n <div class="main-loggedin-header-puff-play">\n <button class="launch-campaign-button base-button-wide-low">');
        c.push(Surface.valOut("Launch campaign"));
        c.push("</button>\n </div>\n </div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n </div>\n <div class="base-middle-content" style="padding-bottom:0;">\n <div id="main-loggedin-content">\n');
    c.push(b.get("mainLoggedInTop")(o, b, kwargs));
    c.push(b.get("mainLoggedInSecondaryColumn")(o, b, kwargs));
    c.push('\n <div id="main-loggedin-maincolumn">\n <div style="clear: both;"></div>\n');
    if (((S.Modifier.count(o.feed) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null))) {
        c.push(' <div id="profile-status-message" class="profile-your">\n <div class="message profile-toggle-edit">\n <div id="profile-status-message-area">\n');
        if (((typeof (l_statusMessage) != "undefined" && l_statusMessage !== null) && (S.Modifier.count(l_statusMessage.statusMessage) > 80))) {
            c.push(' <span class="profile-status-message-text">');
            c.push(Surface.valOut(S.Modifier.substring(l_statusMessage.statusMessage, 0, 80)));
            c.push("...</span>\n");
        } else {
            c.push(' <span class="profile-status-message-text">');
            c.push(Surface.valOut(((typeof (l_statusMessage) != "undefined" && l_statusMessage !== null && typeof (l_statusMessage.statusMessage) != "undefined" && l_statusMessage.statusMessage !== null) ? l_statusMessage.statusMessage : "Update your status text")));
            c.push("</span>\n");
        }
        if ((((typeof (l_statusMessage) != "undefined" && l_statusMessage !== null && typeof (l_statusMessage.statusMessageChanged) != "undefined" && l_statusMessage.statusMessageChanged !== null) && (typeof (l_statusMessage) != "undefined" && l_statusMessage !== null && typeof (l_statusMessage.statusMessage) != "undefined" && l_statusMessage.statusMessage !== null)) && (S.Modifier.count(l_statusMessage.statusMessage) > 0))) {
            c.push(' <span class="profile-status-message-date">');
            c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": l_statusMessage.statusMessageChanged}, null, kwargs));
            c.push("</span>\n");
        }
        c.push(' </div>\n <div id="profile-edit-status-button"></div>\n </div>\n <form id="profile-edit-form" class="main-status-message-edit-form" method="POST" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/setStatusmessage/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push("\n");
        if (((typeof (l_statusMessage) != "undefined" && l_statusMessage !== null) && (l_statusMessage.statusMessage == ""))) {
            l_statusMessage = "Update your status text";
        }
        c.push(' <input maxlength="80" type="text" name="message" id="profile-status-message-edit" class="profile-toggle-edit" placeholder="');
        c.push(Surface.valOut("Update your status text"));
        c.push('" value="');
        if ((typeof (l_statusMessage) != "undefined" && l_statusMessage !== null)) {
            c.push(Surface.valOut(l_statusMessage.statusMessage));
        }
        c.push('"/>\n </form>\n </div>\n');
    }
    c.push('\n <div id="main-loggedin-battlelog">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_main_loggedin_use_538_26, kwargs));
    c.push(' </div>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
var block_main_loggedinstatsbox = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("loggedinstatsbox"));
main.loggedinstatsbox.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedinstatsbox;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedinstatsbox");
    var l_barWidth;
    var l_currentRank;
    var l_nextRank;
    var l_currentScoreNeeded;
    var l_session;
    var l_currScore;
    var l_nextScore;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.generalPersonaStats) != "undefined" && o.generalPersonaStats !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.generalPersonaStats) != "undefined" && o.generalPersonaStats !== null && typeof (o.generalPersonaStats.general) != "undefined" && o.generalPersonaStats.general !== null && typeof (o.generalPersonaStats.general.currentRank) != "undefined" && o.generalPersonaStats.general.currentRank !== null && typeof (o.generalPersonaStats.general.currentRank.level) != "undefined" && o.generalPersonaStats.general.currentRank.level !== null)) && (typeof (o) != "undefined" && o !== null && typeof (o.generalPersonaStats) != "undefined" && o.generalPersonaStats !== null && typeof (o.generalPersonaStats.general) != "undefined" && o.generalPersonaStats.general !== null && typeof (o.generalPersonaStats.general.nextRank) != "undefined" && o.generalPersonaStats.general.nextRank !== null && typeof (o.generalPersonaStats.general.nextRank.level) != "undefined" && o.generalPersonaStats.general.nextRank.level !== null))) {
        c.push("\n");
        l_currentRank = o.generalPersonaStats.general.currentRank.level;
        l_nextRank = (l_currentRank + 1);
        c.push('\n <div class="main-loggedin-rankbar">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": l_session.currentPersonaGame,"rank_size": "small","rank": l_currentRank,"tag_class": "main-loggedin-rankbar-prev"}, null, kwargs));
        c.push('\n <div class="main-loggedin-rankbar-bar">\n <div class="main-loggedin-rankbar-rankName">');
        c.push(Surface.valOut(o.generalPersonaStats.general.currentRank.name));
        c.push("</div>\n");
        l_currScore = S.Modifier.tofloat((o.generalPersonaStats.general.score - o.generalPersonaStats.general.currentRank.pointsNeeded));
        l_nextScore = S.Modifier.tofloat((o.generalPersonaStats.general.nextRank.pointsNeeded - o.generalPersonaStats.general.currentRank.pointsNeeded));
        if (((l_currScore > 0) && (l_nextScore > 0))) {
            l_barWidth = ((l_currScore / l_nextScore) * 100);
        } else {
            l_barWidth = 0;
        }
        c.push(' <div class="main-loggedin-rankbar-barmeter">\n <div style="width: ');
        c.push(Surface.valOut(S.Modifier.toint(l_barWidth)));
        c.push('%;"></div>\n </div>\n <div class="main-loggedin-rankbar-points"><strong>');
        c.push(Surface.valOut(S.Modifier.toint((o.generalPersonaStats.general.score - o.generalPersonaStats.general.currentRank.pointsNeeded))));
        c.push("</strong> / ");
        c.push(Surface.valOut(S.Modifier.toint((o.generalPersonaStats.general.nextRank.pointsNeeded - o.generalPersonaStats.general.currentRank.pointsNeeded))));
        c.push("</div>\n </div>\n ");
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": l_session.currentPersonaGame,"rank_size": "small","rank": l_nextRank,"tag_class": "main-loggedin-rankbar-next"}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push("\n");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.generalPersonaStats) != "undefined" && o.generalPersonaStats !== null))) {
        l_currentRank = S.Modifier.get(o.generalBf3PersonaStats, "rank", 0);
        l_nextRank = (l_currentRank + 1);
        c.push('\n <div class="main-loggedin-rankbar">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaName": l_session.currentPersona.personaName,"personaId": l_session.currentPersona.personaId})));
        c.push('" >\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": l_session.currentPersonaGame,"rank_size": "small","rank": l_currentRank,"tag_class": "main-loggedin-rankbar-prev"}, null, kwargs));
        c.push('\n <div class="main-loggedin-rankbar-bar">\n <div class="main-loggedin-rankbar-rankName">');
        c.push(Surface.valOut("Rank"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.get(o.generalBf3PersonaStats, "rank", 0)));
        c.push("</div>\n");
        l_currScore = S.Modifier.tofloat(S.Modifier.get(o.generalBf3PersonaStats, "score", 0));
        l_nextScore = S.Modifier.tofloat(S.Modifier.get(o.rankNeeded, "pointsNeeded", 0));
        l_currentScoreNeeded = S.Modifier.tofloat(S.Modifier.get(o.currentRankNeeded, "pointsNeeded", 0));
        if (((l_currScore > 0) && (l_nextScore > 0))) {
            l_barWidth = (((l_currScore - l_currentScoreNeeded) / (l_nextScore - l_currentScoreNeeded)) * 100);
        } else {
            l_barWidth = 0;
        }
        c.push(' <div class="main-loggedin-rankbar-barmeter">\n <div style="width: ');
        c.push(Surface.valOut(S.Modifier.toint(l_barWidth)));
        c.push('%;"></div>\n </div>\n <div class="main-loggedin-rankbar-points"><strong>');
        c.push(Surface.valOut((S.Modifier.toint(l_currScore) - S.Modifier.toint(l_currentScoreNeeded))));
        c.push("</strong> / ");
        c.push(Surface.valOut((S.Modifier.toint(l_nextScore) - S.Modifier.toint(l_currentScoreNeeded))));
        c.push("</div>\n </div>\n ");
        c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": l_session.currentPersonaGame,"rank_size": "small","rank": l_nextRank,"tag_class": "main-loggedin-rankbar-next"}, null, kwargs));
        c.push("\n </a>\n </div>\n");
    }
    return c.join("");
};
var block_main_loggedinunlocksbox = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("loggedinunlocksbox"));
main.loggedinunlocksbox.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_loggedinunlocksbox;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.loggedinunlocksbox");
    var l_for_main_loggedinunlocksbox_14_14_list;
    var l_parentName;
    var l_parentCategoryName;
    var l_for_main_loggedinunlocksbox_14_14_count;
    var l_weaponsLocale;
    var l_name;
    var l_session;
    var l_for_main_loggedinunlocksbox_14_14_iteration;
    var l_soldierSpecializationLocale;
    var l_kitItemLocale;
    var l_upcomingUnlocksForPersona;
    var l_for_main_loggedinunlocksbox_14_14_hasNext;
    var l_vehicleAccessoryLocale;
    var l_image;
    var l_criteria;
    var l_ul;
    var l_weaponAccessoryLocale;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.upcomingUnlocks) != "undefined" && o.upcomingUnlocks !== null)) {
        l_upcomingUnlocksForPersona = o.upcomingUnlocks;
        l_weaponsLocale = S.Modifier.get(o.bf3GadgetsLocale, "weapons");
        l_weaponAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "weaponaccessory");
        l_vehicleAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "vehicleunlocks");
        l_soldierSpecializationLocale = S.Modifier.get(o.bf3GadgetsLocale, "soldierspecializations");
        l_kitItemLocale = S.Modifier.get(o.bf3GadgetsLocale, "kititems");
        c.push("\n");
        if ((S.Modifier.count(l_upcomingUnlocksForPersona) > 0)) {
            c.push(' <div class="main-loggedin-upcomingunlocks" >\n');
            l_for_main_loggedinunlocksbox_14_14_list = S.Modifier.limit(S.Modifier.sortfast(l_upcomingUnlocksForPersona, "unlockPercentage", "desc"), 3);
            l_for_main_loggedinunlocksbox_14_14_count = S.Modifier.count(l_for_main_loggedinunlocksbox_14_14_list);
            l_for_main_loggedinunlocksbox_14_14_iteration = 0;
            if ((S.Modifier.count(l_for_main_loggedinunlocksbox_14_14_list) > 0)) {
                for (var l_for_main_loggedinunlocksbox_14_14_key in l_for_main_loggedinunlocksbox_14_14_list) {
                    if (!Surface.isValidLoopItem(l_for_main_loggedinunlocksbox_14_14_list[l_for_main_loggedinunlocksbox_14_14_key])) {
                        continue;
                    }
                    var l_unlock = l_for_main_loggedinunlocksbox_14_14_list[l_for_main_loggedinunlocksbox_14_14_key];
                    l_for_main_loggedinunlocksbox_14_14_iteration = (l_for_main_loggedinunlocksbox_14_14_iteration + 1);
                    l_for_main_loggedinunlocksbox_14_14_hasNext = (l_for_main_loggedinunlocksbox_14_14_iteration < l_for_main_loggedinunlocksbox_14_14_count);
                    if (S.Modifier.count(S.Modifier.get(l_unlock, "weaponAddonUnlock"))) {
                        l_ul = S.Modifier.get(l_unlock, "weaponAddonUnlock");
                        l_name = S.Modifier.get(S.Modifier.get(l_weaponAccessoryLocale, l_ul.unlockId), "name");
                        l_image = S.Modifier.get(S.Modifier.get(l_weaponAccessoryLocale, l_ul.unlockId), "image");
                        l_parentName = S.Modifier.get(S.Modifier.get(l_weaponsLocale, l_ul.weaponCode), "name");
                        l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "kills", l_parentName, b, kwargs);
                        c.push("\n");
                    } else {
                        if (S.Modifier.count(S.Modifier.get(l_unlock, "weaponUnlock"))) {
                            l_ul = S.Modifier.get(l_unlock, "weaponUnlock");
                            l_name = S.Modifier.get(S.Modifier.get(l_weaponsLocale, l_ul.unlockId), "name");
                            l_image = S.Modifier.get(S.Modifier.get(l_weaponsLocale, l_ul.unlockId), "image");
                            l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "score", b, kwargs);
                        } else {
                            if (S.Modifier.count(S.Modifier.get(l_unlock, "vehicleAddonUnlock"))) {
                                l_ul = S.Modifier.get(l_unlock, "vehicleAddonUnlock");
                                l_name = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_ul.unlockId), "name");
                                l_image = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_ul.unlockId), "image");
                                l_parentCategoryName = l_ul.vehicleCategory;
                                l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "score", l_parentCategoryName, b, kwargs);
                                c.push("\n");
                            } else {
                                if (S.Modifier.count(S.Modifier.get(l_unlock, "soldierSpecializationUnlock"))) {
                                    l_ul = S.Modifier.get(l_unlock, "soldierSpecializationUnlock");
                                    l_name = S.Modifier.get(S.Modifier.get(l_soldierSpecializationLocale, l_ul.unlockId), "name");
                                    l_image = S.Modifier.get(S.Modifier.get(l_soldierSpecializationLocale, l_ul.unlockId), "image");
                                    l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
                                    c.push("\n");
                                } else {
                                    if (S.Modifier.count(S.Modifier.get(l_unlock, "kitItemUnlock"))) {
                                        l_ul = S.Modifier.get(l_unlock, "kitItemUnlock");
                                        l_name = S.Modifier.get(S.Modifier.get(l_kitItemLocale, l_ul.unlockId), "name");
                                        l_image = S.Modifier.get(S.Modifier.get(l_kitItemLocale, l_ul.unlockId), "image");
                                        l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
                                    }
                                }
                            }
                        }
                    }
                    c.push("\n");
                    if (!((typeof (l_name) != "undefined" && l_name !== null))) {
                        continue;
                    }
                    c.push(' <div class="main-upcoming-unlock ');
                    if (!(l_for_main_loggedinunlocksbox_14_14_hasNext)) {
                        c.push("last");
                    }
                    c.push(' bubble-title" title="<b>');
                    c.push(Surface.valOut((S.translations[l_name] || l_name)));
                    c.push("</b><br>");
                    c.push(Surface.valOut(l_criteria));
                    c.push('">\n <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": l_session.currentPersona.personaId,"personaName": l_session.currentPersona.personaName,"namespace": $S.callFunction("common.namespaceToPlatform", l_session.currentPersona.namespace, b, kwargs)})));
                    c.push('"><img width="79" height="43" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" /></a>\n ');
                    c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"value": l_unlock.unlockPercentage,"max": 100,"width": "82px"}, null, kwargs));
                    c.push("\n </div>\n");
                }
            }
            c.push(" </div>\n");
        }
    }
    return c.join("");
};
var block_main_login = new Surface.BlockConfig("base.ajaxindex", {"bodyClass": "main.login.block_bodyClass","mainContent": "main.login.block_mainContent"});
main.addTemplate(new Surface.Template("login"));
main.login.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_login;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.login");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
main.login.block_bodyClass = new Surface.Block("main.login.block_bodyClass");
main.login.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("main-login base-content-full-width");
    return c.join("");
};
main.login.block_mainContent = new Surface.Block("main.login.block_mainContent");
main.login.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<div id="main-login-upper" class="base-upper"></div>\n<div id="main-middle" class="base-middle">\n <div id="main-middle-content">\n <div class="main-login-register-area main-login-area">\n <div class="main-login-floating-image">\n <img width="254" height="393" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/bfbc2/soldier.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="soldier" />\n </div>\n <div class="main-login-register-title">\n <h1>');
    c.push(Surface.valOut("Sign in"));
    c.push("</h1>\n </div>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.reason) != "undefined" && o.reason !== null)) {
        c.push(' <div class="base-usermsg base-usermsg-error base-show">\n <p>\n ');
        c.push(Surface.valOut($S.callFunction("main.loginErrorString", o.reason, b, kwargs)));
        c.push("\n </p>\n </div>\n");
    }
    c.push(' <form class="base-login-form" method="POST" action="');
    if (Surface.globalContext.staticContext.sslAvailable) {
        c.push(Surface.valOut(Surface.globalContext.staticContext.currentHostSecure));
    }
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/login/", Surface.urlContext)));
    c.push('">\n <div class="main-login-text">\n <div>');
    c.push(Surface.valOut("Email"));
    c.push("</div>\n <div>");
    c.push(Surface.valOut("Password"));
    c.push('</div>\n </div>\n <div style="float:left;">\n <input id="main-login-email" class="main-login-input" type="email" name="email" /><br>\n <input class="main-login-input" type="password" name="password" />\n <input type="hidden" name="redirect" value="');
    c.push(Surface.valOut(o.redirect));
    c.push('" />\n </div>\n <div class="main-login-persist">\n <input type="checkbox" name="loginpersist" id="loginpersist" /> <label for="loginpersist">');
    c.push(Surface.valOut("Remember me"));
    c.push('</label>\n </div>\n <div class="main-loggedin-submit">\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.blockTime) != "undefined" && o.blockTime !== null) ? o.blockTime : 0) > 0)) {
        c.push(' <div id="main-login-pleasewait" data="');
        c.push(Surface.valOut(o.blockTime));
        c.push('">Please wait <span>');
        c.push(Surface.valOut(o.blockTime));
        c.push("</span> seconds before trying again<br><br></div>\n");
    }
    c.push('\n <input type="submit" style="" id="main-login-button" class="base-button-arrow-small" value="');
    c.push(Surface.valOut("Sign in"));
    c.push('" ');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.blockTime) != "undefined" && o.blockTime !== null) ? o.blockTime : 0) > 0)) {
        c.push("disabled");
    }
    c.push(' />\n <div id="main-login-ajax-loader">\n <img width="16" height="16" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Loading..."));
    c.push('" />\n </div>\n <div style="clear: both;" class="main-login-links">\n <ul>\n <li><a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/registration/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("Register an Account"));
    c.push('</a></li>\n <li><a href="');
    c.push(Surface.valOut(o.forgotPasswordUrl));
    c.push('">');
    c.push(Surface.valOut("Forgot password?"));
    c.push('</a></li>\n </ul>\n </div>\n </div>\n </form>\n <div style="clear: both;"></div>\n </div>\n <div class="base-box-shade"></div>\n </div>\n</div>\n');
    return c.join("");
};
var block_main_loginlanding = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "main.loginlanding.block_mainContent"});
main.addTemplate(new Surface.Template("loginlanding"));
main.addTemplate(new Surface.Template("mytargets"));
var block_main_notice = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("notice"));
main.notice.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_notice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.notice");
    c.push("\n");
    c.push(main.notice.surface_3_2.render({"notification": {"infoText": ((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null && typeof (o.notification.infoText) != "undefined" && o.notification.infoText !== null) ? o.notification.infoText : null),"size": ((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null && typeof (o.notification.size) != "undefined" && o.notification.size !== null) ? o.notification.size : null),"type": ((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null && typeof (o.notification.type) != "undefined" && o.notification.type !== null) ? o.notification.type : null)}}, b, kwargs));
    return c.join("");
};
main.notice.surface_3_2 = new Surface.SingleSurface("main.notice.surface_3_2");
main.notice.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_notice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.notice");
    c.push('<surf:container id="');
    c.push("sitenotice");
    c.push('">');
    var l_types;
    var l_sizes;
    l_types = ["", "info", "warn", "severe"];
    l_sizes = ["", "small", "medium", "large"];
    c.push('\n <div class="main-notice ');
    c.push(Surface.valOut(S.Modifier.get(l_types, ((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null && typeof (o.notification.type) != "undefined" && o.notification.type !== null) ? o.notification.type : 1))));
    c.push(' ">\n <div class="main-notice-padder ');
    c.push(Surface.valOut(((S.Modifier.get(l_sizes, o.notification.size) !== null) ? S.Modifier.get(l_sizes, o.notification.size) : 1)));
    c.push('">\n <span class="title">NOTICE</span>\n <span>');
    c.push(o.notification.infoText);
    c.push(" </span>\n </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("main.notice", "surface_3_2", "sitenotice", o, b);
    return c.join("");
};
main.addTemplate(new Surface.Template("officialupdateitem"));
var block_main_plugindebug = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "main.plugindebug.block_titleItem","mainContent": "main.plugindebug.block_mainContent"});
main.addTemplate(new Surface.Template("plugindebug"));
main.addTemplate(new Surface.Template("recommendedawards"));
main.addTemplate(new Surface.Template("singlecolumns"));
var block_main_singlecolumns_use_97_6 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.singlecolumns._use_97_6_block_content","title": "main.singlecolumns._use_97_6_block_title","extraClassInner": "main.singlecolumns._use_97_6_block_extraClassInner","shadow": "main.singlecolumns._use_97_6_block_shadow","extraClass": "main.singlecolumns._use_97_6_block_extraClass"});
var block_main_singlecolumns_use_57_6 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.singlecolumns._use_57_6_block_content","title": "main.singlecolumns._use_57_6_block_title","extraClassInner": "main.singlecolumns._use_57_6_block_extraClassInner","shadow": "main.singlecolumns._use_57_6_block_shadow","extraClass": "main.singlecolumns._use_57_6_block_extraClass"});
var block_main_singlecolumns_use_75_22 = new Surface.BlockConfig("main.officialupdateitem", {"content": "main.singlecolumns._use_57_6__use_75_22_block_content","icon": "main.singlecolumns._use_57_6__use_75_22_block_icon","subcontent": "main.singlecolumns._use_57_6__use_75_22_block_subcontent","link": "main.singlecolumns._use_57_6__use_75_22_block_link"});
var block_main_singlecolumns_use_66_18 = new Surface.BlockConfig("main.officialupdateitem", {"content": "main.singlecolumns._use_57_6__use_66_18_block_content","icon": "main.singlecolumns._use_57_6__use_66_18_block_icon","subcontent": "main.singlecolumns._use_57_6__use_66_18_block_subcontent"});
var block_main_singlecolumns_use_3_6 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "main.singlecolumns._use_3_6_block_content","title": "main.singlecolumns._use_3_6_block_title","extraClassInner": "main.singlecolumns._use_3_6_block_extraClassInner","extraClass": "main.singlecolumns._use_3_6_block_extraClass"});
main.addTemplate(new Surface.Template("targetsandunlocks"));
var block_main_trailer = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("trailer"));
main.trailer.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_trailer;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.trailer");
    c.push("\n");
    if ((!((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null)) || (o.type == "bfbc2"))) {
        c.push(' <div id="main-trailer-thumbnail"><img width="193" height="108" id="main-trailer-thumbnail-img" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bfbc2/thumbnail.jpg", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="');
        c.push(Surface.valOut("Watch the new trailer"));
        c.push('"/><br/></div>\n <div id="main-trailer-splash-darkbox">&nbsp;</div>\n <div id="main-trailer-splash-content">\n <!-- TODO: crossdomain.xml -->\n <!--object type="application/x-shockwave-flash" data="http://www.battlefieldbadcompany2.com/sites/all/modules/rome/pod/modules/pod_video/video_players/Video_player_2_col.swf" width="100%" height="100%" id="flash-content-1" style="visibility: visible; "><param name="scale" value="noscale"><param name="bgcolor" value="#FFFFFF"><param name="allowScriptAccess" value="sameDomain"><param name="allowFullscreen" value="true"><param name="wmode" value="transparent"><param name="flashvars" value="videoXml=/public/main/bfbc2/6d70cb65d15211726dcce4c0e971e21c.xml"></object-->\n <object width="660" height="405"><param name="movie" value="http://www.youtube.com/v/vUyb349ruJI?fs=1&amp;hl=en_US&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;hd=1&amp;border=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/vUyb349ruJI?fs=1&amp;hl=en_US&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;hd=1&amp;border=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="660" height="405"></embed></object>\n </div>\n');
    } else {
        c.push(' <div id="main-trailer-thumbnail"><img width="193" height="108" id="main-trailer-thumbnail-img" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/main/bfbc2/vietnam-thumbnail.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="');
        c.push(Surface.valOut("Watch the new trailer"));
        c.push('"/><br/></div>\n <div id="main-trailer-splash-darkbox">&nbsp;</div>\n <div id="main-trailer-splash-content">\n <!-- TODO: crossdomain.xml -->\n <object width="660" height="405"><param name="movie" value="http://www.youtube.com/v/tZb-49QTy-4?fs=1&amp;hl=en_US&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;hd=1&amp;border=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/tZb-49QTy-4?fs=1&amp;hl=en_US&amp;color1=0x3a3a3a&amp;color2=0x999999&amp;hd=1&amp;border=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="660" height="405"></embed></object>\n </div>\n');
    }
    return c.join("");
};
main.addTemplate(new Surface.Template("upcomingunlocks"));
var block_main_veniceheader = new Surface.BlockConfig("", {});
main.addTemplate(new Surface.Template("veniceheader"));
main.veniceheader.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_main_veniceheader;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("main");
    Surface.Renderer.addUsedTemplate("main.veniceheader");
    c.push('\n<div class="main-landing-header">\n <div class="main-landing-logo"></div>\n <a class="main-landing-header-action-link" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/features/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("Learn more about the new way of playing Battlefield"));
    c.push("</a>\n</div>");
    return c.join("");
};
var block_main_veniceloggedin = new Surface.BlockConfig("main.loggedin", {"mainLoggedInTop": "main.veniceloggedin.block_mainLoggedInTop","mainLoggedInSecondaryColumn": "main.veniceloggedin.block_mainLoggedInSecondaryColumn"});
main.addTemplate(new Surface.Template("veniceloggedin"));
if (typeof matchlobby == "undefined") {
    var matchlobby = {};
}
var surf_matchlobby_component = new Surface.Component("matchlobby");
surf_matchlobby_component.extend(matchlobby);
matchlobby = surf_matchlobby_component;
var block_matchlobby_show = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "matchlobby.show.block_titleItem","mainContent": "matchlobby.show.block_mainContent"});
matchlobby.addTemplate(new Surface.Template("show"));
if (typeof mobile == "undefined") {
    var mobile = {};
}
var surf_mobile_component = new Surface.Component("mobile");
surf_mobile_component.extend(mobile);
mobile = surf_mobile_component;
var block_mobile_index = new Surface.BlockConfig("base.index", {"main": "mobile.index.block_main"});
mobile.addTemplate(new Surface.Template("index"));
if (typeof notification == "undefined") {
    var notification = {};
}
var surf_notification_component = new Surface.Component("notification");
surf_notification_component.extend(notification);
notification = surf_notification_component;
var block_notification_base = new Surface.BlockConfig("", {"notification_body": "notification.base.block_notification_body","notification_icon": "notification.base.block_notification_icon","notification_lower": "notification.base.block_notification_lower","notification_button": "notification.base.block_notification_button"});
notification.addTemplate(new Surface.Template("base"));
notification.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.base");
    c.push("\n<div class='notification'>\n <div class=\"notification-inner\">\n <div class='notification-icon'>\n");
    c.push(b.get("notification_icon")(o, b, kwargs));
    c.push(" </div>\n <div class='notification-text'>\n");
    c.push(b.get("notification_body")(o, b, kwargs));
    c.push(" </div>\n");
    c.push(b.get("notification_lower")(o, b, kwargs));
    c.push(" </div>\n</div>\n");
    return c.join("");
};
notification.base.block_notification_icon = new Surface.Block("notification.base.block_notification_icon");
notification.base.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.base.block_notification_body = new Surface.Block("notification.base.block_notification_body");
notification.base.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.base.block_notification_button = new Surface.Block("notification.base.block_notification_button");
notification.base.block_notification_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.base.block_notification_lower = new Surface.Block("notification.base.block_notification_lower");
notification.base.block_notification_lower.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="notification-lower">\n <div onclick="$(this).parents(\'.common-receipt:first\').fadeOut();">\n');
    c.push(b.get("notification_button")(o, b, kwargs));
    c.push(" </div>\n </div>\n");
    return c.join("");
};
var block_notification_basesmaller = new Surface.BlockConfig("", {"notification_body": "notification.basesmaller.block_notification_body","notification_icon": "notification.basesmaller.block_notification_icon","notification_button": "notification.basesmaller.block_notification_button"});
notification.addTemplate(new Surface.Template("basesmaller"));
notification.basesmaller.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_basesmaller;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.basesmaller");
    c.push("\n<div class='notification-smaller'>\n <div class=\"notification-inner\">\n <div>\n <div class='notification-icon'>\n");
    c.push(b.get("notification_icon")(o, b, kwargs));
    c.push(" </div>\n <div class='notification-text'>\n");
    c.push(b.get("notification_body")(o, b, kwargs));
    c.push(" </div>\n <div class='notification-button-area'>\n");
    c.push(b.get("notification_button")(o, b, kwargs));
    c.push(' </div>\n </div>\n </div>\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
notification.basesmaller.block_notification_icon = new Surface.Block("notification.basesmaller.block_notification_icon");
notification.basesmaller.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.basesmaller.block_notification_body = new Surface.Block("notification.basesmaller.block_notification_body");
notification.basesmaller.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.basesmaller.block_notification_button = new Surface.Block("notification.basesmaller.block_notification_button");
notification.basesmaller.block_notification_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_notification_disabled = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("disabled"));
notification.disabled.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_disabled;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.disabled");
    c.push('\n <div class="notification-friendrequest notification-dont-decrement-on-close platoon-notification">\n <div class="notification-friendrequest-message">\n DISABLED\n </div>\n </div>');
    return c.join("");
};
notification.addTemplate(new Surface.Template("empty"));
var block_notification_feedcomment = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("feedcomment"));
notification.feedcomment.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_feedcomment;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.feedcomment");
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": o.notification.sender.username}, null, kwargs));
    c.push(' commented on your\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId})));
    c.push('">');
    c.push(Surface.importTemplate(("notification" + ("." + "feeditemtype")), o.notification, null, kwargs));
    c.push("</a>");
    return c.join("");
};
var block_notification_feedcommentreply = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("feedcommentreply"));
notification.feedcommentreply.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_feedcommentreply;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.feedcommentreply");
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.notification.sender}, null, kwargs));
    c.push(" also commented on\n");
    if ((o.notification.itemOwnerId == Surface.globalContext.session.user.userId)) {
        c.push(" your\n");
    } else {
        if (S.Modifier.endswith(o.notification.itemOwnerUsername, "s")) {
            c.push(" ");
            c.push(Surface.valOut(o.notification.itemOwnerUsername));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut(o.notification.itemOwnerUsername));
            c.push("'s\n");
        }
    }
    c.push('\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId})));
    c.push('">');
    c.push(Surface.importTemplate(("notification" + ("." + "feeditemtype")), o.notification, null, kwargs));
    c.push("</a>");
    return c.join("");
};
var block_notification_feeditemtype = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("feeditemtype"));
notification.feeditemtype.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_feeditemtype;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.feeditemtype");
    c.push("\n");
    if ((o.feedItemType == 1)) {
        c.push(" friendship\n");
    } else {
        if ((o.feedItemType == 2)) {
            c.push(" forum post\n");
        } else {
            if ((o.feedItemType == 3)) {
                c.push(" blog comment\n");
            } else {
                if ((o.feedItemType == 4)) {
                    c.push(" battle report comment\n");
                } else {
                    if ((o.feedItemType == 5)) {
                        c.push(" forum thread\n");
                    } else {
                        if ((o.feedItemType == 6)) {
                            c.push(" wall post\n");
                        } else {
                            if ((o.feedItemType == 7)) {
                                c.push(" status message\n");
                            } else {
                                if ((o.feedItemType == 8)) {
                                    c.push(" award\n");
                                } else {
                                    if ((o.feedItemType == 9)) {
                                        c.push(" battle report\n");
                                    } else {
                                        if ((o.feedItemType == 10)) {
                                            c.push(" unlock\n");
                                        } else {
                                            if ((o.feedItemType == 11)) {
                                                c.push(" new rank\n");
                                            } else {
                                                if ((o.feedItemType == 12)) {
                                                    c.push(" favorite server\n");
                                                } else {
                                                    if ((o.feedItemType == 13)) {
                                                        c.push(" new platoon\n");
                                                    } else {
                                                        if ((o.feedItemType == 14)) {
                                                            c.push(" platoon emblem\n");
                                                        } else {
                                                            if ((o.feedItemType == 15)) {
                                                                c.push(" new platoon\n");
                                                            } else {
                                                                if ((o.feedItemType == 16)) {
                                                                    c.push(" platoon activity\n");
                                                                } else {
                                                                    if ((o.feedItemType == 17)) {
                                                                        c.push(" platoon activity\n");
                                                                    } else {
                                                                        if ((o.feedItemType == 18)) {
                                                                            c.push(" completed CO-OP mission\n");
                                                                        } else {
                                                                            if ((o.feedItemType == 19)) {
                                                                                c.push(" web prize\n");
                                                                            } else {
                                                                                if ((o.feedItemType == 20)) {
                                                                                    c.push(" platoon wall post\n");
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return c.join("");
};
var block_notification_feedlike = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("feedlike"));
notification.feedlike.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_feedlike;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.feedlike");
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.notification.sender}, null, kwargs));
    c.push(' hooahs your\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId})));
    c.push('">');
    c.push(Surface.importTemplate(("notification" + ("." + "feeditemtype")), o.notification, null, kwargs));
    c.push("</a>");
    return c.join("");
};
var block_notification_friendrequestaccepted = new Surface.BlockConfig("notification.basesmaller", {"notification_body": "notification.friendrequestaccepted.block_notification_body","notification_icon": "notification.friendrequestaccepted.block_notification_icon"});
notification.addTemplate(new Surface.Template("friendrequestaccepted"));
notification.friendrequestaccepted.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_friendrequestaccepted;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.friendrequestaccepted");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notification.basesmaller", o, b, kwargs);
};
notification.friendrequestaccepted.block_notification_icon = new Surface.Block("notification.friendrequestaccepted.block_notification_icon");
notification.friendrequestaccepted.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.notification.sender,"gravatarSize": 33}, null, kwargs));
    c.push("\n");
    return c.join("");
};
notification.friendrequestaccepted.block_notification_body = new Surface.Block("notification.friendrequestaccepted.block_notification_body");
notification.friendrequestaccepted.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" is now your friend\n");
    return c.join("");
};
var block_notification_friendrequestdeclined = new Surface.BlockConfig("notification.basesmaller", {"notification_body": "notification.friendrequestdeclined.block_notification_body","notification_icon": "notification.friendrequestdeclined.block_notification_icon"});
notification.addTemplate(new Surface.Template("friendrequestdeclined"));
notification.friendrequestdeclined.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_friendrequestdeclined;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.friendrequestdeclined");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notification.basesmaller", o, b, kwargs);
};
notification.friendrequestdeclined.block_notification_icon = new Surface.Block("notification.friendrequestdeclined.block_notification_icon");
notification.friendrequestdeclined.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.notification.sender,"gravatarSize": 33}, null, kwargs));
    c.push("\n");
    return c.join("");
};
notification.friendrequestdeclined.block_notification_body = new Surface.Block("notification.friendrequestdeclined.block_notification_body");
notification.friendrequestdeclined.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("declined your friend request"));
    c.push("\n");
    return c.join("");
};
var block_notification_gamereportcommentreply = new Surface.BlockConfig("notification.basesmaller", {"notification_body": "notification.gamereportcommentreply.block_notification_body","notification_icon": "notification.gamereportcommentreply.block_notification_icon","notification_button": "notification.gamereportcommentreply.block_notification_button"});
notification.addTemplate(new Surface.Template("gamereportcommentreply"));
notification.gamereportcommentreply.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_gamereportcommentreply;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.gamereportcommentreply");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notification.basesmaller", o, b, kwargs);
};
notification.gamereportcommentreply.block_notification_icon = new Surface.Block("notification.gamereportcommentreply.block_notification_icon");
notification.gamereportcommentreply.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
notification.gamereportcommentreply.block_notification_body = new Surface.Block("notification.gamereportcommentreply.block_notification_body");
notification.gamereportcommentreply.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_bodyObject;
    l_bodyObject = S.Modifier.jsonDecode(o.notification.body);
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("commented on end of round"));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_bodyObject.game, b, kwargs),"gameHistoryId": l_bodyObject.gameHistoryId,"platform": l_bodyObject.platform})));
    c.push('">');
    c.push(Surface.valOut(l_bodyObject.gameHistoryId));
    c.push("</a>.\n");
    return c.join("");
};
notification.gamereportcommentreply.block_notification_button = new Surface.Block("notification.gamereportcommentreply.block_notification_button");
notification.gamereportcommentreply.block_notification_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_notification_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "notification.index.block_mainContent"});
notification.addTemplate(new Surface.Template("index"));
notification.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.index");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_notification_index_use_10_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "notification.index._use_10_14_block_content","extraClassInner": "notification.index._use_10_14_block_extraClassInner","title": "notification.index._use_10_14_block_title","titleContainer": "notification.index._use_10_14_block_titleContainer","extraClass": "notification.index._use_10_14_block_extraClass"});
notification.index._use_10_14_block_titleContainer = new Surface.Block("notification.index._use_10_14_block_titleContainer");
notification.index._use_10_14_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.index._use_10_14_block_title = new Surface.Block("notification.index._use_10_14_block_title");
notification.index._use_10_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notification.index._use_10_14_block_extraClass = new Surface.Block("notification.index._use_10_14_block_extraClass");
notification.index._use_10_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("common-leaderboard-box-wrapper");
    return c.join("");
};
notification.index._use_10_14_block_extraClassInner = new Surface.Block("notification.index._use_10_14_block_extraClassInner");
notification.index._use_10_14_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("common-leaderboard-box");
    return c.join("");
};
notification.index.surface_17_22 = new Surface.SurfaceList("notification.index.surface_17_22", "notifications", "notification", "notification.timestamp");
notification.index.surface_21_26 = new Surface.SingleSurface("notification.index.surface_21_26");
notification.index.surface_21_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.index");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("notificationsInbox", S.Modifier.concat("_", o.notification.timestamp)));
    c.push('">');
    c.push('\n <div class="inbox-notification ');
    if (!(o.for_notification_index_17_22_hasNext)) {
        c.push("notification-last-child");
    }
    c.push('">\n ');
    c.push(Surface.importTemplate(("notification" + ("." + "rendernotification")), {"notification": o.notification,"platoons": o.platoons}, null, kwargs));
    c.push("\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("notification.index", "surface_21_26", S.Modifier.concat("notificationsInbox", S.Modifier.concat("_", o.notification.timestamp)), o, b);
    return c.join("");
};
notification.index.surface_17_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.index");
    c.push('<surf:container id="');
    c.push("notificationsInbox");
    c.push('">');
    var l_for_notification_index_17_22_hasNext;
    var l_for_notification_index_17_22_iteration;
    var l_for_notification_index_17_22_list;
    var l_for_notification_index_17_22_count;
    l_for_notification_index_17_22_list = o.notifications;
    l_for_notification_index_17_22_count = S.Modifier.count(l_for_notification_index_17_22_list);
    l_for_notification_index_17_22_iteration = 0;
    if ((S.Modifier.count(l_for_notification_index_17_22_list) > 0)) {
        c.push(" ");
        c.push("\n");
        for (var l_for_notification_index_17_22_key in l_for_notification_index_17_22_list) {
            if (!Surface.isValidLoopItem(l_for_notification_index_17_22_list[l_for_notification_index_17_22_key])) {
                continue;
            }
            var l_notification = l_for_notification_index_17_22_list[l_for_notification_index_17_22_key];
            l_for_notification_index_17_22_iteration = (l_for_notification_index_17_22_iteration + 1);
            l_for_notification_index_17_22_hasNext = (l_for_notification_index_17_22_iteration < l_for_notification_index_17_22_count);
            c.push(notification.index.surface_21_26.render({"for_notification_index_17_22_hasNext": ((typeof (l_for_notification_index_17_22_hasNext) != "undefined" && l_for_notification_index_17_22_hasNext !== null) ? l_for_notification_index_17_22_hasNext : null),"notification": ((typeof (l_notification) != "undefined" && l_notification !== null) ? l_notification : null),"platoons": ((typeof (o) != "undefined" && o !== null && typeof (o.platoons) != "undefined" && o.platoons !== null) ? o.platoons : null)}, b, kwargs));
        }
        c.push('\n <div style="clear:both;"></div>\n');
    } else {
        c.push(' <div class="notifications-empty">Found no unseen updates</div>');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("notification.index", "surface_17_22", "notificationsInbox", o, b);
    return c.join("");
};
notification.index._use_10_14_block_content = new Surface.Block("notification.index._use_10_14_block_content");
notification.index._use_10_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(notification.index.surface_17_22.render({"notifications": ((typeof (o) != "undefined" && o !== null && typeof (o.notifications) != "undefined" && o.notifications !== null) ? o.notifications : null),"platoons": ((typeof (o) != "undefined" && o !== null && typeof (o.platoons) != "undefined" && o.platoons !== null) ? o.platoons : null)}, b, kwargs));
    return c.join("");
};
notification.index.block_mainContent = new Surface.Block("notification.index.block_mainContent");
notification.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div id="main-middle">\n <div class="base-middle-content">\n <h1 class="base-big-title wfont">Updates</h1>\n <div class="base-clear"></div>\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_notification_index_use_10_14, kwargs));
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
var block_notification_platoondemoted = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoondemoted"));
notification.platoondemoted.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoondemoted;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoondemoted");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.valOut("Got demoted in"));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platooninviterequest = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platooninviterequest"));
notification.platooninviterequest.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platooninviterequest;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platooninviterequest");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("has invited you to join"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonjoinrequest = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonjoinrequest"));
notification.platoonjoinrequest.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonjoinrequest;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonjoinrequest");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("wants to join"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId,"menu": "listmembers"})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>\n");
    return c.join("");
};
var block_notification_platoonjoinrequestaccepted = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonjoinrequestaccepted"));
notification.platoonjoinrequestaccepted.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonjoinrequestaccepted;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonjoinrequestaccepted");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("accepted your request to join"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonjoinrequestrejected = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonjoinrequestrejected"));
notification.platoonjoinrequestrejected.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonjoinrequestrejected;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonjoinrequestrejected");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("denied your request to join"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonkicked = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonkicked"));
notification.platoonkicked.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonkicked;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonkicked");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("kicked you from the platoon"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonleft = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonleft"));
notification.platoonleft.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonleft;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonleft");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("left the platoon"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonmemberjoined = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonmemberjoined"));
notification.platoonmemberjoined.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonmemberjoined;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonmemberjoined");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("joined your platoon"));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_platoonpromoted = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("platoonpromoted"));
notification.platoonpromoted.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_platoonpromoted;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.platoonpromoted");
    var l_platoon;
    c.push('\n<div class="notification-platoon-wrapper">\n');
    l_platoon = S.Modifier.get(o.platoons, o.notification.platoonId, {"id": o.notification.platoonId,"badgePath": "","name": "Unknown"});
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.notification.platoonId,"bp": l_platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n");
    c.push(Surface.valOut("Got promoted in"));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId})));
    c.push('">');
    c.push(Surface.valOut(l_platoon.name));
    c.push("</a>.\n</div>");
    return c.join("");
};
var block_notification_rendernotification = new Surface.BlockConfig("", {});
notification.addTemplate(new Surface.Template("rendernotification"));
notification.rendernotification.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_rendernotification;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.rendernotification");
    var l_notificationContent;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    o.notification.sender = {"userId": o.notification.userId,"username": o.notification.username};
    c.push("\n");
    if ((o.notification.type == "disabled")) {
        l_notificationContent = Surface.importTemplate(("notification" + ("." + "disabled")), o, null, kwargs);
    } else {
        if ((o.notification.type == "friendrequestaccepted")) {
            o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.notification.sender.username});
            l_notificationContent = S.Modifier.concat(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs), (" " + "accepted your friend request"));
        } else {
            if ((o.notification.type == "friendrequestdeclined")) {
                o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.notification.sender.username});
                l_notificationContent = S.Modifier.concat(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs), (" " + "declined your friend request"));
            } else {
                if ((o.notification.type == "wallpostcreated")) {
                    o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_session.user.username});
                    l_notificationContent = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs), " wrote in your <a href='"), S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_session.user.username})), "'>Battle feed</a>");
                } else {
                    if ((o.notification.type == "feedcomment")) {
                        o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId});
                        l_notificationContent = Surface.importTemplate(("notification" + ("." + "feedcomment")), o, null, kwargs);
                    } else {
                        if ((o.notification.type == "feedcommentreply")) {
                            o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId});
                            l_notificationContent = Surface.importTemplate(("notification" + ("." + "feedcommentreply")), o, null, kwargs);
                        } else {
                            if ((o.notification.type == "feedlike")) {
                                o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/feed/show/{id}/", Surface.urlContext, {"id": o.notification.feedItemId});
                                l_notificationContent = Surface.importTemplate(("notification" + ("." + "feedlike")), o, null, kwargs);
                            } else {
                                if ((o.notification.type == "gamereportcommentreply")) {
                                    o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.bodyObject.game, b, kwargs),"gameHistoryId": o.bodyObject.gameHistoryId,"platform": o.bodyObject.platform});
                                    l_notificationContent = Surface.importTemplate(("notification" + ("." + "gamereportcommentreply")), o, null, kwargs);
                                } else {
                                    if ((o.notification.type == "platoonjoinrequest")) {
                                        o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId,"menu": "listmembers"});
                                        l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonjoinrequest")), o, null, kwargs);
                                    } else {
                                        if ((o.notification.type == "platoonjoinrequestdeclined")) {
                                            o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                            l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonjoinrequestrejected")), o, null, kwargs);
                                        } else {
                                            if ((o.notification.type == "platoonjoinrequestaccepted")) {
                                                o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonjoinrequestaccepted")), o, null, kwargs);
                                            } else {
                                                if ((o.notification.type == "platoonpromoted")) {
                                                    o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                    l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonpromoted")), o, null, kwargs);
                                                } else {
                                                    if ((o.notification.type == "platoondemoted")) {
                                                        o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                        l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoondemoted")), o, null, kwargs);
                                                    } else {
                                                        if ((o.notification.type == "platoonkicked")) {
                                                            o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                            l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonkicked")), o, null, kwargs);
                                                        } else {
                                                            if ((o.notification.type == "platoonleft")) {
                                                                o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                                l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonleft")), o, null, kwargs);
                                                            } else {
                                                                if ((o.notification.type == "platooninviterequest")) {
                                                                    o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId});
                                                                    l_notificationContent = Surface.importTemplate(("notification" + ("." + "platooninviterequest")), o, null, kwargs);
                                                                } else {
                                                                    if ((o.notification.type == "platoonmemberjoined")) {
                                                                        o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.notification.platoonId,"menu": "listmembers"});
                                                                        l_notificationContent = Surface.importTemplate(("notification" + ("." + "platoonmemberjoined")), o, null, kwargs);
                                                                    } else {
                                                                        if ((o.notification.type == "apiaccessaccepted")) {
                                                                            o.notificationUrl = S.Modifier.urlformat("/{_section}/{_language}/apiaccount/{p}/", Surface.urlContext);
                                                                            l_notificationContent = S.Modifier.concat(S.Modifier.concat("You may now enter the <a href='", S.Modifier.urlformat("/{_section}/{_language}/apiaccount/{p}/", Surface.urlContext)), "'>Developer API</a>");
                                                                        } else {
                                                                            if ((o.notification.type == "apiaccessdeclined")) {
                                                                                l_notificationContent = "You were denied access to the Developer API";
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push("\n");
    c.push(l_notificationContent);
    c.push(' <span class="comcenter-notification-ago">');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.notification.timestamp}, null, kwargs));
    c.push("</span>\n");
    return c.join("");
};
var block_notification_test = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "notification.test.block_mainContent"});
notification.addTemplate(new Surface.Template("test"));
notification.test.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_test;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.test");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
notification.test.block_mainContent = new Surface.Block("notification.test.block_mainContent");
notification.test.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <h1>Platoons</h1><br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "joinrequestaccepted"})));
    c.push('">joinrequestaccepted</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "joinrequestcreated"})));
    c.push('">joinrequestcreated</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "memberjoined"})));
    c.push('">memberjoined</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "joinrequestrejected"})));
    c.push('">joinrequestrejected</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "memberkicked"})));
    c.push('">memberkicked</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "memberleft"})));
    c.push('">memberleft</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "inviterequest"})));
    c.push('">inviterequest</a><br />\n <br />\n <h1>API</h1><br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "apiaccepted"})));
    c.push('">apiaccepted</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "apidenied"})));
    c.push('">apidenied</a><br />\n <br />\n <h1>Friends</h1><br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "friendrequestaccepted"})));
    c.push('">friendrequestaccepted</a><br />\n <br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "friendrequestdeclined"})));
    c.push('">friendrequestdeclined</a><br />\n <br />\n <h1>Wall</h1><br />\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "posted"})));
    c.push('">posted</a><br />\n <br />\n </div>\n </div>\n');
    return c.join("");
};
var block_notification_wallpostcreated = new Surface.BlockConfig("notification.base", {"notification_body": "notification.wallpostcreated.block_notification_body","notification_icon": "notification.wallpostcreated.block_notification_icon","notification_button": "notification.wallpostcreated.block_notification_button"});
notification.addTemplate(new Surface.Template("wallpostcreated"));
notification.wallpostcreated.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notification_wallpostcreated;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notification");
    Surface.Renderer.addUsedTemplate("notification.wallpostcreated");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notification.base", o, b, kwargs);
};
notification.wallpostcreated.block_notification_icon = new Surface.Block("notification.wallpostcreated.block_notification_icon");
notification.wallpostcreated.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.notification.sender,"gravatarSize": 33}, null, kwargs));
    c.push("\n");
    return c.join("");
};
notification.wallpostcreated.block_notification_body = new Surface.Block("notification.wallpostcreated.block_notification_body");
notification.wallpostcreated.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o.notification.sender, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("wrote in your Battlefeed."));
    c.push("<br/>\n");
    return c.join("");
};
notification.wallpostcreated.block_notification_button = new Surface.Block("notification.wallpostcreated.block_notification_button");
notification.wallpostcreated.block_notification_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <form method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.notification.sender.username})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="submit" name="submit" value="');
    c.push(Surface.valOut("Show Wall"));
    c.push('" class="notification-button" />\n </form>\n');
    return c.join("");
};
if (typeof notificationevent == "undefined") {
    var notificationevent = {};
}
var surf_notificationevent_component = new Surface.Component("notificationevent");
surf_notificationevent_component.extend(notificationevent);
notificationevent = surf_notificationevent_component;
var block_notificationevent_basesmaller = new Surface.BlockConfig("", {"event_icon": "notificationevent.basesmaller.block_event_icon","event_body": "notificationevent.basesmaller.block_event_body","event_button": "notificationevent.basesmaller.block_event_button"});
notificationevent.addTemplate(new Surface.Template("basesmaller"));
notificationevent.basesmaller.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notificationevent_basesmaller;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notificationevent");
    Surface.Renderer.addUsedTemplate("notificationevent.basesmaller");
    c.push("\n<div class='notification-smaller'>\n <div class=\"notification-inner\">\n <div>\n <div class='notification-icon'>\n");
    c.push(b.get("event_icon")(o, b, kwargs));
    c.push(" </div>\n <div class='notification-text'>\n");
    c.push(b.get("event_body")(o, b, kwargs));
    c.push(" </div>\n <div class='notification-button-area'>\n");
    c.push(b.get("event_button")(o, b, kwargs));
    c.push(' </div>\n </div>\n </div>\n <div class="base-clear"></div>\n</div>');
    return c.join("");
};
notificationevent.basesmaller.block_event_icon = new Surface.Block("notificationevent.basesmaller.block_event_icon");
notificationevent.basesmaller.block_event_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notificationevent.basesmaller.block_event_body = new Surface.Block("notificationevent.basesmaller.block_event_body");
notificationevent.basesmaller.block_event_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
notificationevent.basesmaller.block_event_button = new Surface.Block("notificationevent.basesmaller.block_event_button");
notificationevent.basesmaller.block_event_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
notificationevent.addTemplate(new Surface.Template("empty"));
var block_notificationevent_usercameonline = new Surface.BlockConfig("notificationevent.basesmaller", {"event_icon": "notificationevent.usercameonline.block_event_icon","event_body": "notificationevent.usercameonline.block_event_body","event_button": "notificationevent.usercameonline.block_event_button"});
notificationevent.addTemplate(new Surface.Template("usercameonline"));
notificationevent.usercameonline.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notificationevent_usercameonline;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notificationevent");
    Surface.Renderer.addUsedTemplate("notificationevent.usercameonline");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notificationevent.basesmaller", o, b, kwargs);
};
notificationevent.usercameonline.block_event_icon = new Surface.Block("notificationevent.usercameonline.block_event_icon");
notificationevent.usercameonline.block_event_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"openChatLink": true,"gravatarSize": 30,"user": o.user}, null, kwargs));
    c.push("\n");
    return c.join("");
};
notificationevent.usercameonline.block_event_body = new Surface.Block("notificationevent.usercameonline.block_event_body");
notificationevent.usercameonline.block_event_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.user}, null, kwargs));
    c.push("<br>signed in\n");
    return c.join("");
};
notificationevent.usercameonline.block_event_button = new Surface.Block("notificationevent.usercameonline.block_event_button");
notificationevent.usercameonline.block_event_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
var block_notificationevent_userstartedplaying = new Surface.BlockConfig("notificationevent.basesmaller", {"event_icon": "notificationevent.userstartedplaying.block_event_icon","event_body": "notificationevent.userstartedplaying.block_event_body","event_button": "notificationevent.userstartedplaying.block_event_button"});
notificationevent.addTemplate(new Surface.Template("userstartedplaying"));
notificationevent.userstartedplaying.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_notificationevent_userstartedplaying;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("notificationevent");
    Surface.Renderer.addUsedTemplate("notificationevent.userstartedplaying");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notificationevent.basesmaller", o, b, kwargs);
};
notificationevent.userstartedplaying.block_event_icon = new Surface.Block("notificationevent.userstartedplaying.block_event_icon");
notificationevent.userstartedplaying.block_event_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"openChatLink": true,"gravatarSize": 30,"user": o.user}, null, kwargs));
    c.push("\n");
    return c.join("");
};
notificationevent.userstartedplaying.block_event_body = new Surface.Block("notificationevent.userstartedplaying.block_event_body");
notificationevent.userstartedplaying.block_event_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.user}, null, kwargs));
    c.push("<br>\n ");
    c.push(Surface.importTemplate(("common" + ("." + "playingMode")), {"playingMode": o.user.presence.playingMode}, null, kwargs));
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.serverGuid) != "undefined" && o.user.presence.serverGuid !== null)) {
        c.push(' Joined <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.user.presence.serverGuid,"slug": S.Modifier.slugify(o.user.presence.serverName)})));
        c.push('"class="notification-smaller-link">');
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.user.presence.serverName}, null, kwargs));
        c.push("</a>\n");
    } else {
        if ((o.user.presence.playingMode == 2)) {
            c.push(" ");
            c.push(Surface.valOut("Playing Single Player"));
            c.push("\n");
        } else {
            if ((o.user.presence.playingMode == 4)) {
                c.push(" ");
                c.push(Surface.valOut("CO-OP"));
                c.push("\n");
            }
        }
    }
    c.push("\n");
    return c.join("");
};
notificationevent.userstartedplaying.block_event_button = new Surface.Block("notificationevent.userstartedplaying.block_event_button");
notificationevent.userstartedplaying.block_event_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.serverGuid) != "undefined" && o.user.presence.serverGuid !== null)) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"friendPersonaId": o.user.presence.personaId,"presence": o.user.presence}, null, kwargs));
        c.push("\n");
    }
    return c.join("");
};
if (typeof pagination == "undefined") {
    var pagination = {};
}
var surf_pagination_component = new Surface.Component("pagination");
surf_pagination_component.extend(pagination);
pagination = surf_pagination_component;
var block_pagination_pagination = new Surface.BlockConfig("", {"left": "pagination.pagination.block_left"});
pagination.addTemplate(new Surface.Template("pagination"));
pagination.pagination.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_pagination_pagination;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("pagination");
    Surface.Renderer.addUsedTemplate("pagination.pagination");
    var l_for_pagination_pagination_7_9_list;
    c.push('\n<div class="pagination-pagination-left">\n');
    c.push(b.get("left")(o, b, kwargs));
    c.push('</div>\n<div class="pagination-pagination-right">\n');
    if ((S.Modifier.count(o.pagination) > 3)) {
        l_for_pagination_pagination_7_9_list = o.pagination;
        if ((S.Modifier.count(l_for_pagination_pagination_7_9_list) > 0)) {
            for (var l_for_pagination_pagination_7_9_key in l_for_pagination_pagination_7_9_list) {
                if (!Surface.isValidLoopItem(l_for_pagination_pagination_7_9_list[l_for_pagination_pagination_7_9_key])) {
                    continue;
                }
                var l_p = l_for_pagination_pagination_7_9_list[l_for_pagination_pagination_7_9_key];
                c.push(" ");
                c.push(Surface.importTemplate(("pagination" + ("." + "paginationbutton")), l_p, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(' <div style="clear:both;"></div>\n</div>\n<div style="clear:both;"></div>');
    return c.join("");
};
pagination.pagination.block_left = new Surface.Block("pagination.pagination.block_left");
pagination.pagination.block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_pagination_paginationbutton = new Surface.BlockConfig("", {});
pagination.addTemplate(new Surface.Template("paginationbutton"));
pagination.paginationbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_pagination_paginationbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("pagination");
    Surface.Renderer.addUsedTemplate("pagination.paginationbutton");
    c.push("\n");
    if (o.enabled) {
        c.push(' <a href="');
        c.push(((typeof (o) != "undefined" && o !== null && typeof (o.url) != "undefined" && o.url !== null) ? o.url : ""));
        c.push('" class="pagination-paginationbutton pagination-type-');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : "off")));
        c.push('">\n');
    } else {
        c.push(' <span class="pagination-paginationbutton pagination-type-');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.type) != "undefined" && o.type !== null) ? o.type : "off")));
        c.push('">\n');
    }
    c.push('\n <div class="pagination-paginationbutton-border">\n <span class="pagination-paginationbutton-inner">\n <div class="pagination-paginationbutton-extra"></div>\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.text) != "undefined" && o.text !== null) ? o.text : "")));
    c.push("\n </span>\n </div>\n");
    if (o.enabled) {
        c.push("</a>");
    } else {
        c.push("</span>");
    }
    return c.join("");
};
if (typeof planetdevbar == "undefined") {
    var planetdevbar = {};
}
var surf_planetdevbar_component = new Surface.Component("planetdevbar");
surf_planetdevbar_component.extend(planetdevbar);
planetdevbar = surf_planetdevbar_component;
planetdevbar.addTemplate(new Surface.Template("bookmarklet"));
planetdevbar.addTemplate(new Surface.Template("profilenode"));
planetdevbar.addTemplate(new Surface.Template("stats"));
planetdevbar.addTemplate(new Surface.Template("style"));
planetdevbar.addTemplate(new Surface.Template("test"));
if (typeof platoon == "undefined") {
    var platoon = {};
}
var surf_platoon_component = new Surface.Component("platoon");
surf_platoon_component.extend(platoon);
platoon = surf_platoon_component;
var block_platoon_badge = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("badge"));
platoon.badge.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_badge;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.badge");
    var l_shouldLink;
    var l_s;
    c.push("\n");
    l_shouldLink = (((typeof (o) != "undefined" && o !== null && typeof (o.pid) != "undefined" && o.pid !== null) && (o.pid != false)) && !((typeof (o) != "undefined" && o !== null && typeof (o.noLink) != "undefined" && o.noLink !== null)));
    if (l_shouldLink) {
        c.push('<a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.pid})));
        c.push('">');
    }
    c.push("\n");
    l_s = ((typeof (o) != "undefined" && o !== null && typeof (o.size) != "undefined" && o.size !== null) ? o.size : 60);
    c.push('<img class="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
    c.push(" platoon-badge-item");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.pid) != "undefined" && o.pid !== null) && (o.pid != false))) {
        c.push(" platoon-badge-");
        c.push(Surface.valOut(o.pid));
    }
    c.push('" src="');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.bp) != "undefined" && o.bp !== null) && (o.bp != ""))) {
        c.push("http://static.cdn.ea.com/");
        c.push(Surface.valOut(Surface.globalContext.staticContext.cdnBaseDir));
        c.push("emblems/");
        c.push(Surface.valOut(l_s));
        c.push("/");
        c.push(Surface.valOut(o.bp));
    } else {
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/platoon/default-emblem-", l_s), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    }
    c.push('" width="');
    c.push(Surface.valOut(l_s));
    c.push('" height="');
    c.push(Surface.valOut(l_s));
    c.push('"/>\n');
    if (l_shouldLink) {
        c.push("</a>");
    }
    return c.join("");
};
var block_platoon_base = new Surface.BlockConfig("platoon.basetitle", {"profileMainColumn": "platoon.base.block_profileMainColumn","mainContent": "platoon.base.block_mainContent"});
platoon.addTemplate(new Surface.Template("base"));
platoon.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.base");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.basetitle", o, b, kwargs);
};
platoon.base.surface_78_98 = new Surface.SingleSurface("platoon.base.surface_78_98");
platoon.base.surface_78_98.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.base");
    c.push('<surf:container id="');
    c.push("platoon-info-head-fans-count");
    c.push('">');
    if ((o.platoon.fanCounter > 0)) {
        c.push("<a href='");
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"menu": "listfans","id": o.platoon.id,"membershipLevels": o.membershipLevels})));
        c.push("'>");
    }
    c.push(Surface.valOut(S.Modifier.thousandseparators(o.platoon.fanCounter)));
    if ((o.platoon.fanCounter > 0)) {
        c.push("</a>");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.base", "surface_78_98", "platoon-info-head-fans-count", o, b);
    return c.join("");
};
platoon.base.block_profileMainColumn = new Surface.Block("platoon.base.block_profileMainColumn");
platoon.base.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.base.block_mainContent = new Surface.Block("platoon.base.block_mainContent");
platoon.base.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_isMember;
    var l_platoonUser;
    var l_session;
    var l_membershipLevel;
    c.push(" ");
    c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "platoon"}, null, kwargs));
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null) ? o.platoon : 0) && o.platoon.hidden)) {
        c.push(' <div id="platoon-hidden-content">\n <div class="platoon-hidden-inner">\n <div class="platoon-top-actions">\n');
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : 0) != 0)) {
            c.push(' <div class="platoon-top-actions-button">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/platoon/reportPlatoonDropdown/{id}/", Surface.urlContext, {"id": o.platoon.id})}, null, kwargs));
            c.push("\n </div>\n");
        }
        c.push(' </div>\n <h1>This Platoon is currently disabled</h1>\n <p>We are looking into offensive content in this Platoon\'s presentation, please come back later</p>\n </div>\n <div style="clear:both;"></div>\n </div>\n');
    } else {
        c.push("\n");
        l_platoonUser = S.Modifier.get(o.platoon.members, ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : 0), {});
        l_isMember = (S.Modifier.count(l_platoonUser) > 0);
        l_membershipLevel = S.Modifier.get(l_platoonUser, "membershipLevel", 0);
        c.push('\n <div class="platoon-clear"></div>\n <div class="platoon-content-leftcolumn">\n <div class="platoon-page-topleft">\n ');
        c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.platoon.id,"bp": o.platoon.badgePath,"size": 320,"noLink": true}, null, kwargs));
        c.push("\n");
        if ((l_membershipLevel > 4)) {
            if ((o.platoon.badgePath == "")) {
                c.push(' <div class="platoon-page-topleft-editbadge-link">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/editbadge/{id}/", Surface.urlContext, {"id": o.platoon.id})));
                c.push('" class="common-inlineedit-link-icon">');
                c.push(Surface.valOut("Edit Platoon Emblem"));
                c.push("</a>\n </div>\n");
            } else {
                c.push(' <div class="platoon-page-topleft-editbadge-box">\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/editbadge/{id}/", Surface.urlContext, {"id": o.platoon.id})));
                c.push('">\n Edit emblem\n <span class="platoon-page-topleft-editbadge-box-icon"></span>\n </a>\n </div>\n');
            }
        }
        c.push(" </div>\n ");
        c.push(Surface.importTemplate(("platoon" + ("." + "menu")), o, null, kwargs));
        c.push('\n </div>\n <div class="platoon-content-rightcolumn">\n <div class="platoon-page-topright">\n <div class="platoon-info" id="platoon-info">\n <div class="platoon-info-title">');
        c.push(Surface.valOut(o.platoon.name));
        c.push(" ");
        if (S.Modifier.get(l_platoonUser, "isSelected", 0)) {
        }
        c.push('</div>\n <div class="platoon-info-line">\n <div class="platoon-info-icons">\n <span class="platoon-info-icons-icon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.platoon.game, o.platoon.platform, 0, b, kwargs)));
        c.push('"></span>\n </div>\n <span class="platoon-info-line-name">Tag:</span>\n <span class="platoon-info-line-value">[');
        c.push(Surface.valOut(o.platoon.tag));
        c.push("]</span>\n");
        if (o.platoon.website) {
            c.push(' <span class="platoon-info-line-name">');
            c.push(Surface.valOut("Web"));
            c.push(':</span>\n <span class="platoon-info-line-value">');
            if (o.platoon.website) {
                c.push('<a href="http://');
                c.push(Surface.valOut(o.platoon.website));
                c.push('" target="_blank">');
                c.push(Surface.valOut("Official website"));
                c.push("</a>");
            }
            c.push("</span>\n");
        }
        c.push('\n <span class="platoon-info-line-name">');
        c.push(Surface.valOut("Fans"));
        c.push(':</span>\n <span class="platoon-info-line-value platoon-info-push-fans-counter">');
        c.push(platoon.base.surface_78_98.render({"membershipLevels": ((typeof (o) != "undefined" && o !== null && typeof (o.membershipLevels) != "undefined" && o.membershipLevels !== null) ? o.membershipLevels : null),"platoon": {"fanCounter": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.fanCounter) != "undefined" && o.platoon.fanCounter !== null) ? o.platoon.fanCounter : null),"id": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.id) != "undefined" && o.platoon.id !== null) ? o.platoon.id : null)}}, b, kwargs));
        c.push('</span>\n <div class="platoon-top-actions">\n');
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : 0) != 0)) {
            c.push(' <div class="platoon-top-actions-button">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/platoon/reportPlatoonDropdown/{id}/", Surface.urlContext, {"id": o.platoon.id})}, null, kwargs));
            c.push('\n </div>\n <div class="base-button-100x24 platoon-top-actions-button platoon-become-fan" url="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/becomefan/", Surface.urlContext)));
            c.push('" platoonId="');
            c.push(Surface.valOut(o.platoon.id));
            c.push('" ');
            if (o.isFan) {
                c.push('style="display:none;"');
            }
            c.push(">\n ");
            c.push(Surface.valOut("Become a fan"));
            c.push('\n </div>\n <div class="base-button-100x24-grey platoon-top-actions-button platoon-leave-fan" url="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/leavefan/", Surface.urlContext)));
            c.push('" platoonId="');
            c.push(Surface.valOut(o.platoon.id));
            c.push('" ');
            if (!(o.isFan)) {
                c.push('style="display:none;"');
            }
            c.push(">\n ");
            c.push(Surface.valOut("Un-fan platoon"));
            c.push("\n </div>\n");
            if (!(l_isMember)) {
                c.push(' <div class="base-button-100x24-grey platoon-top-actions-button platoon-apply ');
                if (!(o.platoon.allowNewMembers)) {
                    c.push("disabled bubble-title");
                }
                c.push('" url="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/applyformembership/", Surface.urlContext)));
                c.push('" platoonId="');
                c.push(Surface.valOut(o.platoon.id));
                c.push('" ');
                if (!(o.platoon.allowNewMembers)) {
                    c.push('data-battlebubble="');
                    c.push(Surface.valOut("New members disabled by founder"));
                    c.push('"');
                }
                c.push(">\n ");
                c.push(Surface.valOut("Apply to join"));
                c.push("\n </div>\n");
            }
        }
        c.push("\n");
        if (l_isMember) {
            if ((l_membershipLevel == 1)) {
                c.push(' <div class="base-button-100x24-grey platoon-top-actions-button disabled">\n <a id="platoon-cancelapply" class="platoon-leave-link" platoonId="');
                c.push(Surface.valOut(o.platoon.id));
                c.push('" userId="');
                c.push(Surface.valOut(l_session.user.userId));
                c.push('" url="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/leave/", Surface.urlContext)));
                c.push('">');
                c.push(Surface.valOut("Application sent"));
                c.push("</a>\n </div>\n");
            } else {
                if ((l_membershipLevel == 2)) {
                    c.push(' <div class="base-button-100x24-grey platoon-top-actions-button platoon-accept-invite" platoonId="');
                    c.push(Surface.valOut(o.platoon.id));
                    c.push('" url="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/acceptinvite/", Surface.urlContext)));
                    c.push('">\n ');
                    c.push(Surface.valOut("Accept invite"));
                    c.push("\n </div>\n");
                } else {
                    if ((l_membershipLevel > 2)) {
                        c.push("\n");
                    }
                }
            }
            c.push("\n");
        }
        c.push("\n");
        if ((l_membershipLevel > 2)) {
            if (!(S.Modifier.get(l_platoonUser, "isSelected", false))) {
                c.push(' <div class="base-button-100x24-grey platoon-top-actions-button">\n <a id="platoon-makeprimary" class="base-no-ajax" href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/setprimary/{id}/", Surface.urlContext, o.platoon)));
                c.push('">');
                c.push(Surface.valOut("Make primary"));
                c.push("</a>\n </div>\n");
            }
        }
        c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="platoon-clear"></div>\n </div>\n </div>\n');
        c.push(b.get("profileMainColumn")(o, b, kwargs));
        c.push(' </div>\n <div class="base-clear"></div>\n ');
    }
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
var block_platoon_basetitle = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "platoon.basetitle.block_titleComponent"});
platoon.addTemplate(new Surface.Template("basetitle"));
platoon.basetitle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_basetitle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.basetitle");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
platoon.basetitle.block_titleComponent = new Surface.Block("platoon.basetitle.block_titleComponent");
platoon.basetitle.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Platoons"));
    c.push(" - ");
    return c.join("");
};
var block_platoon_create = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.create.block_profileMainColumn","titleItem": "platoon.create.block_titleItem"});
platoon.addTemplate(new Surface.Template("create"));
var block_platoon_edit = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.edit.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("edit"));
platoon.edit.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_edit;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.edit");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_edit_use_6_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.edit._use_6_6_block_content","title": "platoon.edit._use_6_6_block_title","extraClass": "platoon.edit._use_6_6_block_extraClass"});
platoon.edit._use_6_6_block_title = new Surface.Block("platoon.edit._use_6_6_block_title");
platoon.edit._use_6_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Edit Platoon"));
    return c.join("");
};
platoon.edit._use_6_6_block_extraClass = new Surface.Block("platoon.edit._use_6_6_block_extraClass");
platoon.edit._use_6_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-edit");
    return c.join("");
};
platoon.edit._use_6_6_block_content = new Surface.Block("platoon.edit._use_6_6_block_content");
platoon.edit._use_6_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && S.Modifier.get(o.platoon.members, l_session.user.userId, false)) && (S.Modifier.get(S.Modifier.get(o.platoon.members, l_session.user.userId), "membershipLevel", 0) >= 128))) {
        c.push('\n <form id="platoon-edit" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/edit/{id}/", Surface.urlContext, o.platoon)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <fieldset>\n <div class="profile-edit-row">\n <div class="label">\n <label for="platoon-edit-name">');
        c.push(Surface.valOut("Name"));
        c.push('</label>\n </div>\n <div>\n <input type="text" name="name" id="platoon-edit-name" maxlength="22" value="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.name) != "undefined" && o.platoon.name !== null) ? o.platoon.name : "")));
        c.push('" />\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row">\n <div class="label">\n <label for="platoon-edit-tag">');
        c.push(Surface.valOut("Tag"));
        c.push('</label>\n </div>\n <div>\n <input type="text" name="tag" id="platoon-edit-tag" value="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.tag) != "undefined" && o.platoon.tag !== null) ? o.platoon.tag : "")));
        c.push('" maxlength="4" />\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row">\n <div class="label">\n <label for="platoon-edit-website">');
        c.push(Surface.valOut("Website"));
        c.push('</label>\n </div>\n <div>\n <input type="text" name="website" id="platoon-edit-website" value="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.website) != "undefined" && o.platoon.website !== null) ? o.platoon.website : "")));
        c.push('" />\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-row-presentation">\n <div class="label">\n <label for="platoon-edit-presentation">');
        c.push(Surface.valOut("Presentation"));
        c.push('</label>\n </div>\n <div>\n <textarea id="platoon-edit-presentation" name="presentation">');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.presentation) != "undefined" && o.platoon.presentation !== null) ? o.platoon.presentation : "")));
        c.push('</textarea>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row">\n <div class="label">\n &nbsp;\n </div>\n <div>\n <input type="checkbox" id="platoon-edit-allow-apply" name="allow_members_apply" ');
        if (o.platoon.allowNewMembers) {
            c.push('checked="checked" ');
        }
        c.push(' value="1" />\n <label for="platoon-edit-allow-apply">');
        c.push(Surface.valOut("Allow people to apply for platoon"));
        c.push('</label>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row">\n <input type="submit" value="Save" class="base-button-arrow-small" />\n </div>\n </fieldset>\n </form>\n');
    }
    return c.join("");
};
platoon.edit.block_profileMainColumn = new Surface.Block("platoon.edit.block_profileMainColumn");
platoon.edit.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_edit_use_6_6, kwargs));
    c.push("\n");
    return c.join("");
};
var block_platoon_editbadge = new Surface.BlockConfig("platoon.basetitle", {"titleItem": "platoon.editbadge.block_titleItem","mainContent": "platoon.editbadge.block_mainContent"});
platoon.addTemplate(new Surface.Template("editbadge"));
platoon.editbadge.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_editbadge;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.editbadge");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.basetitle", o, b, kwargs);
};
platoon.editbadge.block_titleItem = new Surface.Block("platoon.editbadge.block_titleItem");
platoon.editbadge.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Create emblem for"));
    c.push(" ");
    c.push(Surface.valOut(o.platoon.name));
    return c.join("");
};
platoon.editbadge.block_mainContent = new Surface.Block("platoon.editbadge.block_mainContent");
platoon.editbadge.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle platoon-editbadge" id="platoon-editbadge-page">\n <div class="platoon-mid">\n <div class="platoon-editbadge-header">\n <h1 class="wfont">');
    c.push(Surface.valOut("Edit Platoon Emblem"));
    c.push('</h1>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id})));
    c.push('" class="platoon-editbadge-header-info">Back to ');
    c.push(Surface.valOut(o.platoon.name));
    c.push('</a>\n </div>\n <div class="platoon-editbadge-container">\n <div id="platoon-editbadge-overlay-loader"></div>\n <div id="platoon-editbadge-fallback-overlay-msg"></div>\n <div class="platoon-editbadge-list-layers-wrapper">\n <h2 class="platoon-editbadge-column-title">Layers (<span id="platoon-editbadge-count-objects-current">0</span> / <span id="platoon-editbadge-count-objects-max">20</span>)</h2>\n <ul id="platoon-editbadge-list-layers">\n </ul>\n <div class="platoon-editbadge-layer-row common-active-row" id="platoon-editbadge-layer-row-background">\n <div class="common-active-row-marker"></div>\n <div class="platoon-editbadge-layer-object-color" id="platoon-editbadge-badge-background-color" style="background-color:#F4F4F4;"></div>\n <span class="common-active-row-text">Background</span>\n </div>\n </div>\n <div class="platoon-editbadge-list-items-wrapper">\n <h2 class="platoon-editbadge-column-title">Objects</h2>\n <div class="platoon-editbadge-list-items-inner-container" style="margin-top: 0;">\n <div id="platoon-editbadge-list-items">\n ');
    c.push(Surface.importTemplate(("platoon" + ("." + "editbadgeParts")), o, null, kwargs));
    c.push('\n </div>\n </div>\n <div class="platoon-clear"></div>\n </div>\n <div class="platoon-editbadge-editframe-wrapper">\n <h2 class="platoon-editbadge-column-title">Change color, scale, move and rotate objecs</h2>\n <div class="platoon-editbadge-fallback-msg" id="platoon-editbadge-fallback-msg-v">\n <div class="platoon-editbadge-fallback-msg-title">');
    c.push(Surface.valOut("Your version of Internet Explorer is not supported"));
    c.push("</div>\n ");
    c.push(Surface.valOut("Please"));
    c.push(' <a href="http://www.beautyoftheweb.com/#/download">');
    c.push(Surface.valOut("update to the latest version of Internet Explorer"));
    c.push("</a> ");
    c.push(Surface.valOut("or try using"));
    c.push(' <a href="http://www.mozilla.com/firefox/" target="_blank">Mozilla Firefox</a> ');
    c.push(Surface.valOut("or"));
    c.push(' <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a> ');
    c.push(Surface.valOut("instead."));
    c.push('\n </div>\n <div class="platoon-editbadge-fallback-msg" id="platoon-editbadge-fallback-msg-xp">\n <div class="platoon-editbadge-fallback-msg-title">');
    c.push(Surface.valOut("Your version of Internet Explorer is not supported"));
    c.push("</div>\n ");
    c.push(Surface.valOut("Please"));
    c.push(' <a href="http://www.mozilla.com/firefox/" target="_blank">Mozilla Firefox</a> ');
    c.push(Surface.valOut("or try using"));
    c.push(' <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a> ');
    c.push(Surface.valOut("or"));
    c.push('\n </div>\n <div class="base-clear"></div>\n <div id="platoon-editbadge-colorpicker-wrapper" class="keep-active-badgepart">\n <input type="text" value="353535" id="platoon-editbadge-colorpicker" class="keep-active-badgepart" />\n <div id="platoon-editbadge-colorpicker-edit-icon"></div>\n </div>\n <div id="platoon-editbadge-actions" class="keep-active-badgepart">\n <button class="bubble-title platoon-editbadge-action-button platoon-editbadge-action-flipx disabled" title="Flip layer horizontally"></button>\n <button class="bubble-title platoon-editbadge-action-button platoon-editbadge-action-flipy disabled" title="Flip layer vertically"></button>\n <button class="bubble-title platoon-editbadge-action-button platoon-editbadge-action-rotate disabled" title="Rotate layer click-wise"></button>\n </div>\n <div class="base-clear"></div>\n <div class="platoon-editbadge-editframe-badge-outer">\n <div class="platoon-editbadge-editframe-badge-inner">\n <div id="platoon-editbadge-fallback-badge">');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.platoon.id,"bp": o.platoon.badgePath,"size": 320,"noLink": true}, null, kwargs));
    c.push('</div>\n <canvas id="platoon-editbadge-editframe-badge" width="320" height="320" class="keep-active-badgepart"></canvas>\n <span id="platoon-editbadge-addlayer-info">Drop an object here</span>\n </div>\n </div>\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/saveBadge/{id}/", Surface.urlContext, {"id": o.platoon.id})));
    c.push('" method="POST" id="platoon-editbadge-editframe-badge-save">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <div class="platoon-editbadge-save-tofeed-wrapper">\n <input type="checkbox" value="1" name="tofeed" id="platoon-editbadge-save-tofeed">\n <label for="platoon-editbadge-save-tofeed">Publish as a feed event</label>\n </div>\n <button type="submit" class="base-button-arrow-gigantic">Save emblem</button>\n <div class="platoon-editbadge-recipe" id="platoon-editbadge-save-status">\n <div class="common-receipt-checkbox"></div>\n <div class="common-receipt-message">Saved emblem! <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id})));
    c.push('">Back to Platoon Profile</a></div>\n <div class="base-clear"></div>\n </div>\n </form>\n </div>\n <div class="platoon-clear"></div>\n </div>\n <div id="platoon-badge-draggables"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_platoon_editbadgeLayersListItem = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("editbadgeLayersListItem"));
platoon.editbadgeLayersListItem.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_editbadgeLayersListItem;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.editbadgeLayersListItem");
    c.push('\n<li class="platoon-editbadge-layer-row common-active-row keep-active-badgepart ');
    c.push(Surface.valOut(o.extraClass));
    c.push('" data-objectid="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.layer) != "undefined" && o.layer !== null && typeof (o.layer.id) != "undefined" && o.layer.id !== null) ? o.layer.id : "")));
    c.push('">\n <div class="common-active-row-marker"></div>\n <div class="platoon-editbadge-layer-action-drag"></div>\n <div class="platoon-editbadge-layer-object-color" style="background-color:');
    c.push(Surface.valOut(S.Modifier.get(o.layer.object, "fill", "#353535")));
    c.push(';"></div>\n <div class="platoon-editbadge-layer-object-preview"><img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(((typeof (o) != "undefined" && o !== null && typeof (o.layer) != "undefined" && o.layer !== null && typeof (o.layer.img) != "undefined" && o.layer.img !== null) ? o.layer.img : "/public/platoon/platoon-noicon.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" width="12" height="12" alt="" /></div>\n <span class="common-active-row-text">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.layer) != "undefined" && o.layer !== null && typeof (o.layer.title) != "undefined" && o.layer.title !== null) ? o.layer.title : "-- Untitled --")));
    c.push('</span>\n <div class="platoon-editbadge-layer-actions">\n <div class="platoon-editbadge-layer-action platoon-editbadge-layer-action-delete bubble-title-inner" title="Delete layer"></div>\n <div class="platoon-editbadge-layer-action platoon-editbadge-layer-action-lock bubble-title-inner" title="Lock/unlock layer"></div>\n <div class="platoon-editbadge-layer-action platoon-editbadge-layer-action-duplicate bubble-title-inner" title="Duplicate layer"></div>\n </div>\n</li>');
    return c.join("");
};
var block_platoon_editbadgeParts = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("editbadgeParts"));
platoon.editbadgeParts.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_editbadgeParts;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.editbadgeParts");
    var l_for_platoon_editbadgeParts_2_2_list;
    var l_part;
    c.push("\n");
    l_for_platoon_editbadgeParts_2_2_list = o.badgePartsKeys;
    if ((S.Modifier.count(l_for_platoon_editbadgeParts_2_2_list) > 0)) {
        for (var l_for_platoon_editbadgeParts_2_2_key in l_for_platoon_editbadgeParts_2_2_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_editbadgeParts_2_2_list[l_for_platoon_editbadgeParts_2_2_key])) {
                continue;
            }
            var l_key = l_for_platoon_editbadgeParts_2_2_list[l_for_platoon_editbadgeParts_2_2_key];
            l_part = S.Modifier.get(Surface.globalContext.badgeParts, l_key);
            c.push(' <div class="platoon-editbadge-list-items-item"><img title="');
            c.push(Surface.valOut(S.Modifier.get(l_part, "title")));
            c.push('" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.get(l_part, "src"), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" data-partid="');
            c.push(Surface.valOut(l_key));
            c.push('" width="81" height="81" /></div>\n');
        }
    }
    c.push("\n");
    return c.join("");
};
var block_platoon_feed = new Surface.BlockConfig("feed.base", {"feedContext": "platoon.feed.block_feedContext"});
platoon.addTemplate(new Surface.Template("feed"));
platoon.feed.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_feed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.feed");
    c.push("\n");
    return Surface.importTemplate("feed.base", o, b, kwargs);
};
platoon.feed.block_feedContext = new Surface.Block("platoon.feed.block_feedContext");
platoon.feed.block_feedContext.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Platoon");
    return c.join("");
};
platoon.addTemplate(new Surface.Template("functions"));
var block_platoon_index = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.index.block_profileMainColumn","titleItem": "platoon.index.block_titleItem"});
platoon.addTemplate(new Surface.Template("index"));
platoon.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.index");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_index_use_127_9 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.index._use_127_9_block_content","title": "platoon.index._use_127_9_block_title","extraClassInner": "platoon.index._use_127_9_block_extraClassInner","extraClass": "platoon.index._use_127_9_block_extraClass"});
var block_platoon_index_use_105_17 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.index._use_105_17_block_content","title": "platoon.index._use_105_17_block_title"});
platoon.index.block_titleItem = new Surface.Block("platoon.index.block_titleItem");
platoon.index.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.index.surface_7_5 = new Surface.SingleSurface("platoon.index.surface_7_5");
platoon.index._use_105_17_block_title = new Surface.Block("platoon.index._use_105_17_block_title");
platoon.index._use_105_17_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Platoon Presentation"));
    return c.join("");
};
platoon.index._use_105_17_block_content = new Surface.Block("platoon.index._use_105_17_block_content");
platoon.index._use_105_17_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div class="platton-presentation-padder">\n');
    if (o.hasPresentation) {
        c.push(" <pre>");
        c.push(Surface.valOut(o.platoon.presentation));
        c.push("</pre>\n");
    } else {
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && S.Modifier.get(o.platoon.members, S.Modifier.toint(l_session.user.userId), false)) && (S.Modifier.get(S.Modifier.get(o.platoon.members, S.Modifier.toint(l_session.user.userId), 0), "membershipLevel") >= 128))) {
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "edit"})));
            c.push('" class="common-inlineedit-link-icon">');
            c.push(Surface.valOut("Edit presentation text"));
            c.push("</a>\n");
        } else {
            c.push(" ");
            c.push(Surface.valOut("No presentation entered."));
            c.push("\n");
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
platoon.index.surface_7_5.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.index");
    c.push('<surf:container id="');
    c.push("platoon-overview");
    c.push('">');
    var l_info;
    var l_for_platoon_index_36_21_list;
    var l_lst;
    var l_for_platoon_index_23_17_list;
    var l_nummembers;
    var l_isAdmin;
    var l_applying;
    var l_for_platoon_index_36_21_iteration;
    var l_membershipLevel;
    l_info = S.Modifier.get(o.platoon.members, o.userId, {});
    l_membershipLevel = S.Modifier.get(l_info, "membershipLevel", 0);
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.refreshPlatoons) != "undefined" && o.refreshPlatoons !== null) && o.refreshPlatoons)) {
        c.push(" <div id=refreshPlatoons style='display: none;'></div>\n");
    }
    c.push('\n <div class="platoon-info">\n <div class="platoon-line"></div>\n');
    l_lst = [];
    l_nummembers = 0;
    l_isAdmin = (S.Modifier.bitwiseand(l_membershipLevel, o.membershipLevels.ADMIN) == o.membershipLevels.ADMIN);
    c.push("\n");
    l_for_platoon_index_23_17_list = o.platoon.members;
    if ((S.Modifier.count(l_for_platoon_index_23_17_list) > 0)) {
        for (var l_for_platoon_index_23_17_key in l_for_platoon_index_23_17_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_index_23_17_list[l_for_platoon_index_23_17_key])) {
                continue;
            }
            var l_member = l_for_platoon_index_23_17_list[l_for_platoon_index_23_17_key];
            if ((l_member.membershipLevel >= 4)) {
                l_nummembers = (l_nummembers + 1);
            }
            l_applying = (S.Modifier.bitwiseand(l_member.membershipLevel, o.membershipLevels.JOINWAITING) == o.membershipLevels.JOINWAITING);
            if ((!(l_applying) || (l_applying && l_isAdmin))) {
                l_lst = S.Modifier.append(l_lst, l_member);
            }
        }
    }
    c.push('\n <div class="platoon-member-title"><a href=\'');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "listmembers"})));
    c.push("'>MEMBERS (");
    c.push(Surface.valOut(l_nummembers));
    c.push(')</a></div>\n <div class="platoon-member-summary">\n');
    l_for_platoon_index_36_21_list = S.Modifier.sort(l_lst, "membershipLevel", "desc");
    l_for_platoon_index_36_21_iteration = 0;
    if ((S.Modifier.count(l_for_platoon_index_36_21_list) > 0)) {
        for (var l_for_platoon_index_36_21_key in l_for_platoon_index_36_21_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_index_36_21_list[l_for_platoon_index_36_21_key])) {
                continue;
            }
            var l_member = l_for_platoon_index_36_21_list[l_for_platoon_index_36_21_key];
            l_for_platoon_index_36_21_iteration = (l_for_platoon_index_36_21_iteration + 1);
            c.push(' <div class="platoon-member-outer">\n');
            if (((l_for_platoon_index_36_21_iteration < 9) && (l_member.membershipLevel > 3))) {
                c.push(" ");
                c.push(Surface.importTemplate(("platoon" + ("." + "member")), {"member": l_member,"membershipLevels": o.membershipLevels}, null, kwargs));
                c.push("\n");
            }
            c.push(" </div>\n");
        }
    }
    c.push('\n <div class="platoon-clear"></div>\n </div>\n <div class="platoon-clear"></div>\n </div>\n <div class="platoon-overview-presentation-wrapper">\n');
    o.hasPresentation = ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.presentation) != "undefined" && o.platoon.presentation !== null) && (o.platoon.presentation != ""));
    c.push("\n");
    if ((o.hasPresentation || l_isAdmin)) {
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_index_use_105_17, kwargs));
    }
    c.push(" </div>\n ");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.index", "surface_7_5", "platoon-overview", o, b);
    return c.join("");
};
platoon.index._use_127_9_block_extraClass = new Surface.Block("platoon.index._use_127_9_block_extraClass");
platoon.index._use_127_9_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.index._use_127_9_block_extraClassInner = new Surface.Block("platoon.index._use_127_9_block_extraClassInner");
platoon.index._use_127_9_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.index._use_127_9_block_title = new Surface.Block("platoon.index._use_127_9_block_title");
platoon.index._use_127_9_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Platoon feed"));
    return c.join("");
};
platoon.index._use_127_9_block_content = new Surface.Block("platoon.index._use_127_9_block_content");
platoon.index._use_127_9_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_info;
    var l_isMember;
    var l_session;
    c.push(' <div id="platoon-feed">\n');
    l_info = S.Modifier.get(o.platoon.members, o.userId, {});
    l_isMember = (S.Modifier.count(l_info) > 0);
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && ((typeof (l_isMember) != "undefined" && l_isMember !== null) ? l_isMember : false))) {
        c.push(' <form method="POST" class="wallpost" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/wall/postmessage/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="wall-platoonId" value="');
        c.push(Surface.valOut(o.platoon.id));
        c.push('"/>\n <textarea class="wall-message feed-textlimit-count" name="wall-message">');
        c.push(Surface.valOut("Leave a message in this Battle feed..."));
        c.push('</textarea>\n <div class="feed-textlimit-counter"></div>\n <input class="base-button-arrow-small wall-message-button" type="submit" value="Post"/>\n <div style="clear:both;"></div>\n </form>\n');
    }
    c.push("\n");
    o.platoonId = o.platoon.id;
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "feed")), o, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
platoon.index.block_profileMainColumn = new Surface.Block("platoon.index.block_profileMainColumn");
platoon.index.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(platoon.index.surface_7_5.render({"hasPresentation": ((typeof (o) != "undefined" && o !== null && typeof (o.hasPresentation) != "undefined" && o.hasPresentation !== null) ? o.hasPresentation : null),"membershipLevels": ((typeof (o) != "undefined" && o !== null && typeof (o.membershipLevels) != "undefined" && o.membershipLevels !== null) ? o.membershipLevels : null),"platoon": {"id": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.id) != "undefined" && o.platoon.id !== null) ? o.platoon.id : null),"members": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.members) != "undefined" && o.platoon.members !== null) ? o.platoon.members : null),"presentation": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.presentation) != "undefined" && o.platoon.presentation !== null) ? o.platoon.presentation : null)},"refreshPlatoons": ((typeof (o) != "undefined" && o !== null && typeof (o.refreshPlatoons) != "undefined" && o.refreshPlatoons !== null) ? o.refreshPlatoons : null),"userId": ((typeof (o) != "undefined" && o !== null && typeof (o.userId) != "undefined" && o.userId !== null) ? o.userId : null)}, b, kwargs));
    c.push('\n <div class="platoon-overview-feed-wrapper">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_index_use_127_9, kwargs));
    c.push(' </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_platoon_info = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("info"));
platoon.info.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_info;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.info");
    c.push("\n");
    c.push('\n<div class="base-middle platoon-page-top">\n</div>');
    return c.join("");
};
var block_platoon_landing = new Surface.BlockConfig("platoon.basetitle", {"bodyClass": "platoon.landing.block_bodyClass","titleItem": "platoon.landing.block_titleItem","mainContent": "platoon.landing.block_mainContent"});
platoon.addTemplate(new Surface.Template("landing"));
platoon.landing.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_landing;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.landing");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.basetitle", o, b, kwargs);
};
var block_platoon_landing_use_81_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.landing._use_81_18_block_content","title": "platoon.landing._use_81_18_block_title"});
var block_platoon_landing_use_17_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.landing._use_17_18_block_content","extraClassInner": "platoon.landing._use_17_18_block_extraClassInner","title": "platoon.landing._use_17_18_block_title"});
platoon.landing.block_bodyClass = new Surface.Block("platoon.landing.block_bodyClass");
platoon.landing.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-landing-page");
    return c.join("");
};
platoon.landing.block_titleItem = new Surface.Block("platoon.landing.block_titleItem");
platoon.landing.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.landing._use_17_18_block_title = new Surface.Block("platoon.landing._use_17_18_block_title");
platoon.landing._use_17_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Platoons"));
    return c.join("");
};
platoon.landing._use_17_18_block_extraClassInner = new Surface.Block("platoon.landing._use_17_18_block_extraClassInner");
platoon.landing._use_17_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-landing-friends-platoons-inner");
    return c.join("");
};
platoon.landing.surface_44_30 = new Surface.SurfaceList("platoon.landing.surface_44_30", "platoonList", "p", "p.id");
platoon.landing.surface_45_34 = new Surface.SingleSurface("platoon.landing.surface_45_34");
platoon.landing.surface_45_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_landing;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.landing");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("platoonList", S.Modifier.concat("_", o.p.id)));
    c.push('">');
    var l_extraClass;
    l_extraClass = "platoon-platooncard-topborder";
    c.push(" ");
    c.push(Surface.importTemplate(("platoon" + ("." + "platooncard")), {"platoon": o.p,"extraClass": l_extraClass}, null, kwargs));
    c.push('\n <div class="base-clear"></div>\n');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.landing", "surface_45_34", S.Modifier.concat("platoonList", S.Modifier.concat("_", o.p.id)), o, b);
    return c.join("");
};
platoon.landing.surface_44_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_landing;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.landing");
    c.push('<surf:container id="');
    c.push("platoonList");
    c.push('">');
    var l_for_platoon_landing_44_30_list;
    l_for_platoon_landing_44_30_list = o.platoonList;
    if ((S.Modifier.count(l_for_platoon_landing_44_30_list) > 0)) {
        for (var l_for_platoon_landing_44_30_key in l_for_platoon_landing_44_30_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_landing_44_30_list[l_for_platoon_landing_44_30_key])) {
                continue;
            }
            var l_p = l_for_platoon_landing_44_30_list[l_for_platoon_landing_44_30_key];
            c.push(platoon.landing.surface_45_34.render({"p": ((typeof (l_p) != "undefined" && l_p !== null) ? l_p : null)}, b, kwargs));
        }
        if ((o.platoonCount > ((o.page + 1) * o.perPage))) {
            c.push(' <div class="platoon-showmore" onclick="platoon.loadPlatoons( ');
            c.push(Surface.valOut((o.page + 1)));
            c.push(", '");
            if (o.friends) {
                c.push("1");
            } else {
                c.push("0");
            }
            c.push('\');">\n <span class="common-cleanbutton">\n <span class="common-cleanbutton-left"></span>\n <span class="common-cleanbutton-middle platoon-more-button-middle">View more</span>\n <span class="common-cleanbutton-right"></span>\n </span>\n </div>\n');
        }
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.loading) != "undefined" && o.loading !== null)) {
            c.push(' <div class="base-clear"></div>\n <div class="platoon-spinner">\n <div class="common-spinner" data-size="big"></div>\n </div>\n');
        } else {
            if (o.friends) {
                c.push(' <p class="platoon-landing-column-title-info">');
                c.push(Surface.valOut("No friends with platoons yet"));
                c.push("</p>\n");
            } else {
                c.push(' <p class="platoon-landing-column-title-info">');
                c.push(Surface.valOut("You are not part of a platoon yet"));
                c.push("</p>\n");
            }
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.landing", "surface_44_30", "platoonList", o, b);
    return c.join("");
};
platoon.landing._use_17_18_block_content = new Surface.Block("platoon.landing._use_17_18_block_content");
platoon.landing._use_17_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_len;
    var l_for_platoon_landing_27_30_list;
    var l_nr;
    c.push("\n");
    l_nr = o.platoonsCount;
    if ((l_nr > 99999999999)) {
        l_nr = 99999999999;
    }
    l_nr = S.Modifier.concat(l_nr, "");
    l_len = (S.Modifier.count(l_nr) - 1);
    c.push(" <div class='platoon-c-frame'>\n");
    l_for_platoon_landing_27_30_list = S.Modifier.to(0, l_len);
    if ((S.Modifier.count(l_for_platoon_landing_27_30_list) > 0)) {
        for (var l_for_platoon_landing_27_30_key in l_for_platoon_landing_27_30_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_landing_27_30_list[l_for_platoon_landing_27_30_key])) {
                continue;
            }
            var l_n = l_for_platoon_landing_27_30_list[l_for_platoon_landing_27_30_key];
            c.push(" <div class='platoon-c-nr");
            if (!(Surface.modulo((l_n + 1), 3))) {
                c.push(" platoon-c-pad");
            }
            if ((l_n == 10)) {
                c.push(" first");
            }
            c.push("'>");
            c.push(Surface.valOut(S.Modifier.get(l_nr, (l_len - l_n))));
            c.push("</div>\n");
        }
    }
    c.push(" <div class='platoon-c-frame-overlay'></div>\n </div>\n <div class=\"platoon-worldplatoons\">");
    c.push(Surface.valOut("Number of Platoons in the World"));
    c.push('</div>\n <div class="platoon-platooncard-topborder">\n <div class="platoon-container-buttons">\n <ul class="common-selector">\n <input type=hidden id="loadMorePlatoons-urlaction" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/showMore/{page}/{arg}/", Surface.urlContext, {"page": "#PAGE#","arg": "#FRIENDS#"})));
    c.push('">\n <li class="platoon-button-toggler selected" onclick="platoon.loadPlatoons(0, 0, 1);" >');
    c.push(Surface.valOut(S.Modifier.upper("Your Platoons")));
    c.push('</li>\n <li class="platoon-button-toggler" onclick="platoon.loadPlatoons(0, 1, 1);">');
    c.push(Surface.valOut(S.Modifier.upper("Friend Platoons")));
    c.push("</li>\n </ul>\n </div>\n");
    c.push(platoon.landing.surface_44_30.render({"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"loading": ((typeof (o) != "undefined" && o !== null && typeof (o.loading) != "undefined" && o.loading !== null) ? o.loading : null),"page": ((typeof (o) != "undefined" && o !== null && typeof (o.page) != "undefined" && o.page !== null) ? o.page : null),"perPage": ((typeof (o) != "undefined" && o !== null && typeof (o.perPage) != "undefined" && o.perPage !== null) ? o.perPage : null),"platoonCount": ((typeof (o) != "undefined" && o !== null && typeof (o.platoonCount) != "undefined" && o.platoonCount !== null) ? o.platoonCount : null),"platoonList": ((typeof (o) != "undefined" && o !== null && typeof (o.platoonList) != "undefined" && o.platoonList !== null) ? o.platoonList : null)}, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
platoon.landing._use_81_18_block_title = new Surface.Block("platoon.landing._use_81_18_block_title");
platoon.landing._use_81_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Create new Platoon"));
    return c.join("");
};
platoon.landing._use_81_18_block_content = new Surface.Block("platoon.landing._use_81_18_block_content");
platoon.landing._use_81_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    c.push(' <p class="platoon-landing-column-title-info">');
    c.push(Surface.valOut("Platoon will be created for selected soldier and platform"));
    c.push("</p>\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) {
        c.push(' <div class="platoon-landing-create-user">\n <div class="left">');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_session.user,"gravatarSize": 30}, null, kwargs));
        c.push('</div>\n <div class="platoon-landing-create-user-persona">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaName": l_session.currentPersona.personaName,"personaId": l_session.currentPersona.personaId})));
        c.push('" >');
        c.push(Surface.valOut(l_session.currentPersona.personaName));
        c.push('</a>\n <div class="platoon-landing-create-user-platform ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", Surface.globalContext.realm.game, o.currentPlatform, 0, b, kwargs)));
        c.push('"></div>\n </div>\n </div>\n <div class="clear"></div>\n');
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.currentPlatform) != "undefined" && o.currentPlatform !== null)) {
        c.push(' <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/newplatoon/", Surface.urlContext)));
        c.push('" method="POST" class="platoon-landing-create-form" id="platoon-create-form">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <div class="platoon-landing-create-form-input common-label-on-input">\n <label for="platoon-landing-create-name">');
        c.push(Surface.valOut("Platoon Name"));
        c.push('</label>\n <input type="text" name="name" value="" id="platoon-landing-create-name" maxlength="22"/>\n <div class="platoon-clear"></div>\n </div>\n <div class="platoon-clear"></div>\n <div class="platoon-landing-create-form-input common-label-on-input">\n <label for="platoon-landing-create-tag">');
        c.push(Surface.valOut("Tag"));
        c.push('</label>\n <input type="text" name="tag" value="" id="platoon-landing-create-tag" maxlength="4" />\n <div class="platoon-clear"></div>\n </div>\n <div class="platoon-clear"></div>\n <input type="hidden" name="active" id="active" value="1" />\n <div class="platoon-clear"></div>\n <div class="platoon-clear"></div>\n <p class="platoon-landing-create-form-info">');
        c.push(Surface.valOut("In the next step you will be able to create your emblem and invite your friends."));
        c.push("</p>\n ");
        c.push(Surface.importTemplate(("common" + ("." + "button")), {"title": "Create Platoon","type": "submit","style": "medium","extraClass": "platoon-landing-create-form-submit"}, null, kwargs));
        c.push('\n <div class="platoon-clear"></div>\n </form>\n');
    } else {
        c.push(" Handle that no persona exists\n");
    }
    c.push("\n");
    return c.join("");
};
platoon.landing.block_mainContent = new Surface.Block("platoon.landing.block_mainContent");
platoon.landing.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "platoon"}, null, kwargs));
    c.push('\n <div id="main-login-upper"></div>\n <div class="base-middle">\n <div class="base-middle-content">\n <h1 class="base-big-title wfont">');
    c.push(Surface.valOut("Find or Create Platoon"));
    c.push('</h1>\n <div class="base-clear"></div>\n <div class="platoon-landing-column-left">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_landing_use_17_18, kwargs));
    c.push(' </div>\n <div class="platoon-landing-column-right">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_landing_use_81_18, kwargs));
    c.push('\n <div class="platoon-landing-search">\n <h1 class="platoon-landing-search-title">');
    c.push(Surface.valOut("Find Platoon by name"));
    c.push('</h1>\n <form id="platoon-landing-search" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/search/", Surface.urlContext)));
    c.push('" method="POST">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <div class="platoon-landing-search-form-input common-label-on-input">\n <label for="platoon-landing-search-searchplat">');
    c.push(Surface.valOut("Search Platoon"));
    c.push('</label>\n <input name="searchplat" type="text" value="" id="platoon-landing-search-searchplat" />\n </div>\n ');
    c.push(Surface.importTemplate(("common" + ("." + "button")), {"title": "Search","type": "submit","style": "medium-grey","extraClass": "platoon-landing-search-form-submit"}, null, kwargs));
    c.push('\n </form>\n <div id="platoon-landing-search-results"></div>\n </div>\n </div>\n <div class="platoon-clear"></div>\n </div>\n </div>\n');
    return c.join("");
};
var block_platoon_leaderboard = new Surface.BlockConfig("platoon.basetitle", {"bodyClass": "platoon.leaderboard.block_bodyClass","leaderboard": "platoon.leaderboard.block_leaderboard","mainContent": "platoon.leaderboard.block_mainContent"});
platoon.addTemplate(new Surface.Template("leaderboard"));
var block_platoon_leaderboard_use_123_26 = new Surface.BlockConfig("pagination.pagination", {});
var block_platoon_link = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("link"));
platoon.link.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_link;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.link");
    c.push('\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.id) != "undefined" && o.platoon.id !== null) ? o.platoon.id : 0)})));
    c.push('">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.name) != "undefined" && o.platoon.name !== null) ? o.platoon.name : "unknown")));
    c.push("</a>");
    return c.join("");
};
var block_platoon_listawards = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.listawards.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("listawards"));
var block_platoon_listawards_use_5_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listawards._use_5_6_block_content","title": "platoon.listawards._use_5_6_block_title","extraClass": "platoon.listawards._use_5_6_block_extraClass"});
platoon.addTemplate(new Surface.Template("listawardsAward"));
var block_platoon_listfans = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.listfans.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("listfans"));
platoon.listfans.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listfans;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listfans");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_listfans_use_6_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listfans._use_6_6_block_content","title": "platoon.listfans._use_6_6_block_title","extraClass": "platoon.listfans._use_6_6_block_extraClass"});
platoon.listfans._use_6_6_block_extraClass = new Surface.Block("platoon.listfans._use_6_6_block_extraClass");
platoon.listfans._use_6_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-member-memberslist");
    return c.join("");
};
platoon.listfans._use_6_6_block_title = new Surface.Block("platoon.listfans._use_6_6_block_title");
platoon.listfans._use_6_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Fans");
    return c.join("");
};
platoon.listfans.surface_10_14 = new Surface.SingleSurface("platoon.listfans.surface_10_14");
platoon.listfans.surface_10_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listfans;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listfans");
    c.push('<surf:container id="');
    c.push("platoon-listfans");
    c.push('">');
    var l_for_platoon_listfans_11_18_list;
    l_for_platoon_listfans_11_18_list = o.fans;
    if ((S.Modifier.count(l_for_platoon_listfans_11_18_list) > 0)) {
        for (var l_for_platoon_listfans_11_18_key in l_for_platoon_listfans_11_18_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listfans_11_18_list[l_for_platoon_listfans_11_18_key])) {
                continue;
            }
            var l_fan = l_for_platoon_listfans_11_18_list[l_for_platoon_listfans_11_18_key];
            c.push(' <div class="platoon-member-memberslist-user">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_fan,"gravatarSize": 30}, null, kwargs));
            c.push('\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_fan.username})));
            c.push('" class="platoon-member-memberslist-user-username">');
            c.push(Surface.valOut(l_fan.username));
            c.push("</a>\n </div>\n");
        }
    } else {
        c.push(' <p style="font-size: 12px; color: #828282;">');
        c.push(Surface.valOut("This platoon has no fans."));
        c.push("</p>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.listfans", "surface_10_14", "platoon-listfans", o, b);
    return c.join("");
};
platoon.listfans._use_6_6_block_content = new Surface.Block("platoon.listfans._use_6_6_block_content");
platoon.listfans._use_6_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(platoon.listfans.surface_10_14.render({"fans": o.fans}, b, kwargs));
    return c.join("");
};
platoon.listfans.block_profileMainColumn = new Surface.Block("platoon.listfans.block_profileMainColumn");
platoon.listfans.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listfans_use_6_6, kwargs));
    c.push("\n");
    return c.join("");
};
var block_platoon_listmatches = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.listmatches.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("listmatches"));
platoon.listmatches.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmatches;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmatches");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_listmatches_use_39_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listmatches._use_39_6_block_content","title": "platoon.listmatches._use_39_6_block_title","extraClass": "platoon.listmatches._use_39_6_block_extraClass"});
var block_platoon_listmatches_use_6_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listmatches._use_6_6_block_content","title": "platoon.listmatches._use_6_6_block_title","extraClass": "platoon.listmatches._use_6_6_block_extraClass"});
platoon.listmatches._use_6_6_block_extraClass = new Surface.Block("platoon.listmatches._use_6_6_block_extraClass");
platoon.listmatches._use_6_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-listmatches-wrapper");
    return c.join("");
};
platoon.listmatches._use_6_6_block_title = new Surface.Block("platoon.listmatches._use_6_6_block_title");
platoon.listmatches._use_6_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Upcoming matches");
    return c.join("");
};
platoon.listmatches._use_6_6_block_content = new Surface.Block("platoon.listmatches._use_6_6_block_content");
platoon.listmatches._use_6_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n <p>Found no upcoming matches.</p>\n ");
    return c.join("");
};
platoon.listmatches._use_39_6_block_extraClass = new Surface.Block("platoon.listmatches._use_39_6_block_extraClass");
platoon.listmatches._use_39_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-listmatches-wrapper");
    return c.join("");
};
platoon.listmatches._use_39_6_block_title = new Surface.Block("platoon.listmatches._use_39_6_block_title");
platoon.listmatches._use_39_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Match history");
    return c.join("");
};
platoon.listmatches._use_39_6_block_content = new Surface.Block("platoon.listmatches._use_39_6_block_content");
platoon.listmatches._use_39_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n <p>");
    c.push(Surface.valOut("Found no matches in history."));
    c.push("</p>\n ");
    return c.join("");
};
platoon.listmatches.block_profileMainColumn = new Surface.Block("platoon.listmatches.block_profileMainColumn");
platoon.listmatches.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listmatches_use_6_6, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listmatches_use_39_6, kwargs));
    c.push("\n");
    return c.join("");
};
var block_platoon_listmembers = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.listmembers.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("listmembers"));
platoon.listmembers.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembers");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_listmembers_use_203_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listmembers._use_203_10_block_content","title": "platoon.listmembers._use_203_10_block_title","extraClass": "platoon.listmembers._use_203_10_block_extraClass"});
var block_platoon_listmembers_use_187_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listmembers._use_187_10_block_content","title": "platoon.listmembers._use_187_10_block_title","extraClass": "platoon.listmembers._use_187_10_block_extraClass"});
var block_platoon_listmembers_use_171_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.listmembers._use_171_10_block_content","title": "platoon.listmembers._use_171_10_block_title","extraClass": "platoon.listmembers._use_171_10_block_extraClass"});
var block_platoon_listmembers_use_86_18 = new Surface.BlockConfig("common.focusbartoggle", {"body": "platoon.listmembers._use_86_18_block_body","extraInnerClass": "platoon.listmembers._use_86_18_block_extraInnerClass","outerFooter": "platoon.listmembers._use_86_18_block_outerFooter","toggleExtraClass": "platoon.listmembers._use_86_18_block_toggleExtraClass","extraClass": "platoon.listmembers._use_86_18_block_extraClass","header": "platoon.listmembers._use_86_18_block_header"});
var block_platoon_listmembers_use_32_14 = new Surface.BlockConfig("common.focusbartoggle", {"footer": "platoon.listmembers._use_32_14_block_footer","body": "platoon.listmembers._use_32_14_block_body","extraInnerClass": "platoon.listmembers._use_32_14_block_extraInnerClass","toggleExtraClass": "platoon.listmembers._use_32_14_block_toggleExtraClass","extraClass": "platoon.listmembers._use_32_14_block_extraClass","header": "platoon.listmembers._use_32_14_block_header"});
platoon.listmembers._use_32_14_block_extraClass = new Surface.Block("platoon.listmembers._use_32_14_block_extraClass");
platoon.listmembers._use_32_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-invite-width");
    return c.join("");
};
platoon.listmembers._use_32_14_block_extraInnerClass = new Surface.Block("platoon.listmembers._use_32_14_block_extraInnerClass");
platoon.listmembers._use_32_14_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-invite-inner");
    return c.join("");
};
platoon.listmembers._use_32_14_block_toggleExtraClass = new Surface.Block("platoon.listmembers._use_32_14_block_toggleExtraClass");
platoon.listmembers._use_32_14_block_toggleExtraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.listmembers._use_32_14_block_header = new Surface.Block("platoon.listmembers._use_32_14_block_header");
platoon.listmembers._use_32_14_block_header.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <span class="platoon-invite-title">Invite friends</span>\n <a class="platoon-invite-second-title expanded-show">Cancel</a>\n <a class="platoon-invite-second-title contracted-show">Start inviting friends</a>\n');
    return c.join("");
};
platoon.listmembers._use_32_14_block_body = new Surface.Block("platoon.listmembers._use_32_14_block_body");
platoon.listmembers._use_32_14_block_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_platoon_listmembers_46_30_list;
    c.push(' <div class="platoon-invite-body">\n <form id="platoon-invite-form" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/invitemember/", Surface.urlContext)));
    c.push('" method="POST">\n <input type="hidden" name="platoonId" value="');
    c.push(Surface.valOut(o.platoon.id));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push("\n");
    l_for_platoon_listmembers_46_30_list = ((typeof (o) != "undefined" && o !== null && typeof (o.friendList) != "undefined" && o.friendList !== null) ? o.friendList : []);
    if ((S.Modifier.count(l_for_platoon_listmembers_46_30_list) > 0)) {
        for (var l_for_platoon_listmembers_46_30_key in l_for_platoon_listmembers_46_30_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_46_30_list[l_for_platoon_listmembers_46_30_key])) {
                continue;
            }
            var l_friend = l_for_platoon_listmembers_46_30_list[l_for_platoon_listmembers_46_30_key];
            c.push(' <div class="platoon-invite-body-user">\n <div class="platoon-invite-body-user-checkbox">\n <input id="friendcheckbox');
            c.push(Surface.valOut(l_friend.user.userId));
            c.push('" name="userIds[]" value="');
            c.push(Surface.valOut(l_friend.user.userId));
            c.push('" type="checkbox">\n </div>\n <label class="platoon-invite-body-user-label" for="friendcheckbox');
            c.push(Surface.valOut(l_friend.user.userId));
            c.push('">\n <div class="platoon-invite-body-user-avatar">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend.user,"hideLink": 1,"gravatarSize": 30}, null, kwargs));
            c.push('\n </div>\n <div class="platoon-invite-body-user-username">');
            c.push(Surface.valOut(l_friend.user.username));
            c.push("</div>\n </label>\n </div>\n");
        }
    } else {
        c.push(' <div class="comcenter-no-online-friends">\n <p>You haven\'t added any friends yet. <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": Surface.globalContext.session.user.username})));
        c.push('">Find your friends now</a></p>\n </div>\n');
    }
    c.push(" <div style='clear: both;'></div>\n </form>\n </div>\n");
    return c.join("");
};
platoon.listmembers._use_32_14_block_footer = new Surface.Block("platoon.listmembers._use_32_14_block_footer");
platoon.listmembers._use_32_14_block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="platoon-invite-footer-selectall">\n <input id="selectall" type="checkbox" onclick=\'platoon.toggleSelectAllForInvite()\'> <label for="selectall">Select all</label>\n </div>\n <button style=\'float: right;\' class="base-button-arrow-large button-invite-submit" disabled onclick="$(\'#platoon-invite-form\').submit();">Invite selected</button>\n');
    return c.join("");
};
platoon.listmembers._use_86_18_block_extraClass = new Surface.Block("platoon.listmembers._use_86_18_block_extraClass");
platoon.listmembers._use_86_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-invite-width");
    return c.join("");
};
platoon.listmembers._use_86_18_block_extraInnerClass = new Surface.Block("platoon.listmembers._use_86_18_block_extraInnerClass");
platoon.listmembers._use_86_18_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-invite-inner");
    return c.join("");
};
platoon.listmembers._use_86_18_block_toggleExtraClass = new Surface.Block("platoon.listmembers._use_86_18_block_toggleExtraClass");
platoon.listmembers._use_86_18_block_toggleExtraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.listmembers._use_86_18_block_header = new Surface.Block("platoon.listmembers._use_86_18_block_header");
platoon.listmembers._use_86_18_block_header.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <span class="platoon-invite-title">Invited (<span class="platoon-iabox-count-invited">');
    c.push(Surface.valOut(o.invitedMembersCount));
    c.push('</span>) and applying (<span class="platoon-iabox-count-applying">');
    c.push(Surface.valOut(o.waitingMembersCount));
    c.push('</span>) soldiers</span>\n <a class="platoon-invite-second-title expanded-show">Hide</a>\n <a class="platoon-invite-second-title contracted-show">Show</a>\n');
    return c.join("");
};
platoon.listmembers.surface_97_30 = new Surface.SurfaceList("platoon.listmembers.surface_97_30", "invitedMembers", "invitedMember", "invitedMember.id");
platoon.listmembers.surface_100_38 = new Surface.SingleSurface("platoon.listmembers.surface_100_38");
platoon.listmembers.surface_100_38.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembers");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("platoon-member-invites-invited-members", S.Modifier.concat("_", o.invitedMember.id)));
    c.push('">');
    c.push(' <li class="platoon-member-invites-invited-member">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.invitedMember.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.invitedMember.user.username})));
    c.push('" class="platoon-member-invites-invited-member-username">');
    c.push(Surface.valOut(o.invitedMember.user.username));
    c.push('</a>\n <span class="platoon-member-invites-invited-member-status">');
    c.push(Surface.valOut("Pending"));
    c.push("</span>\n </li>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.listmembers", "surface_100_38", S.Modifier.concat("platoon-member-invites-invited-members", S.Modifier.concat("_", o.invitedMember.id)), o, b);
    return c.join("");
};
platoon.listmembers.surface_97_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembers");
    c.push('<surf:container id="');
    c.push("platoon-member-invites-invited-members");
    c.push('">');
    var l_for_platoon_listmembers_97_30_list;
    l_for_platoon_listmembers_97_30_list = o.invitedMembers;
    if ((S.Modifier.count(l_for_platoon_listmembers_97_30_list) > 0)) {
        c.push(' <h1>Pending invites (<span class="platoon-iabox-count-invited">');
        c.push(Surface.valOut(o.invitedMembersCount));
        c.push("</span>)</h1>\n <ul>\n");
        for (var l_for_platoon_listmembers_97_30_key in l_for_platoon_listmembers_97_30_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_97_30_list[l_for_platoon_listmembers_97_30_key])) {
                continue;
            }
            var l_invitedMember = l_for_platoon_listmembers_97_30_list[l_for_platoon_listmembers_97_30_key];
            c.push(platoon.listmembers.surface_100_38.render({"invitedMember": ((typeof (l_invitedMember) != "undefined" && l_invitedMember !== null) ? l_invitedMember : null)}, b, kwargs));
        }
        c.push(" </ul>\n ");
        c.push("\n");
    } else {
        c.push("<h1>No pending invites</h1>");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.listmembers", "surface_97_30", "platoon-member-invites-invited-members", o, b);
    return c.join("");
};
platoon.listmembers.surface_115_34 = new Surface.SurfaceList("platoon.listmembers.surface_115_34", "waitingMembers", "waitingMember", "waitingMember.id");
platoon.listmembers.surface_137_46 = new Surface.SingleSurface("platoon.listmembers.surface_137_46");
platoon.listmembers.surface_137_46.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembers");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("platoon-member-invites-waiting-members", S.Modifier.concat("_", o.waitingMember.id)));
    c.push('">');
    c.push(' <li class="platoon-member-invites-waiting-member">\n <input type="checkbox" value="');
    c.push(Surface.valOut(o.waitingMember.user.userId));
    c.push('" name="userIds[]" class="platoon-member-invites-waiting-member-check" />\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.waitingMember.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.waitingMember.user.username})));
    c.push('" class="platoon-member-invites-waiting-member-username">');
    c.push(Surface.valOut(o.waitingMember.user.username));
    c.push("</a>\n </li>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.listmembers", "surface_137_46", S.Modifier.concat("platoon-member-invites-waiting-members", S.Modifier.concat("_", o.waitingMember.id)), o, b);
    return c.join("");
};
platoon.listmembers.surface_115_34.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembers");
    c.push('<surf:container id="');
    c.push("platoon-member-invites-waiting-members");
    c.push('">');
    var l_for_platoon_listmembers_115_34_list;
    l_for_platoon_listmembers_115_34_list = o.waitingMembers;
    if ((S.Modifier.count(l_for_platoon_listmembers_115_34_list) > 0)) {
        c.push(" <h1>");
        c.push(Surface.valOut("Applying players"));
        c.push(' (<span class="platoon-iabox-count-applying">');
        c.push(Surface.valOut(o.waitingMembersCount));
        c.push('</span>)</h1>\n <form class="base-do-ajax" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/applyingactions/{id}/", Surface.urlContext, {"id": o.platoon.id})));
        c.push('" method="POST" id="platoon-member-invites-waiting-form">\n <div class="platoon-member-invites-waiting-actions">\n <input type="checkbox" id="platoon-member-invites-waiting-actions-select-all" />\n <span class="platoon-member-invites-waiting-actions-info">Do with selected:</span>\n <div class="platoon-member-invites-waiting-actions-selected-action-wrapper">\n <input type="submit" name="deny" value="Deny" class="base-ajax-submit">\n <input type="submit" name="accept" value="Accept" class="base-ajax-submit">\n </div>\n </div>\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push("\n <ul>\n");
        for (var l_for_platoon_listmembers_115_34_key in l_for_platoon_listmembers_115_34_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_115_34_list[l_for_platoon_listmembers_115_34_key])) {
                continue;
            }
            var l_waitingMember = l_for_platoon_listmembers_115_34_list[l_for_platoon_listmembers_115_34_key];
            c.push(platoon.listmembers.surface_137_46.render({"waitingMember": ((typeof (l_waitingMember) != "undefined" && l_waitingMember !== null) ? l_waitingMember : null)}, b, kwargs));
        }
        c.push(' </ul>\n <input type="hidden" name="apply-action" value="" id="platoon-member-invites-waiting-action" />\n </form>\n ');
        c.push("\n");
    } else {
        c.push("<h1>No applying soldiers</h1>");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.listmembers", "surface_115_34", "platoon-member-invites-waiting-members", o, b);
    return c.join("");
};
platoon.listmembers._use_86_18_block_body = new Surface.Block("platoon.listmembers._use_86_18_block_body");
platoon.listmembers._use_86_18_block_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="platoon-member-invites-invited">\n');
    c.push(platoon.listmembers.surface_97_30.render({"invitedMembers": ((typeof (o) != "undefined" && o !== null && typeof (o.invitedMembers) != "undefined" && o.invitedMembers !== null) ? o.invitedMembers : null),"invitedMembersCount": ((typeof (o) != "undefined" && o !== null && typeof (o.invitedMembersCount) != "undefined" && o.invitedMembersCount !== null) ? o.invitedMembersCount : null)}, b, kwargs));
    c.push(' </div>\n <div class="platoon-member-invites-container-right">\n <div id="platoon-member-invites-waiting">\n');
    c.push(platoon.listmembers.surface_115_34.render({"platoon": {"id": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.id) != "undefined" && o.platoon.id !== null) ? o.platoon.id : null)},"waitingMembers": ((typeof (o) != "undefined" && o !== null && typeof (o.waitingMembers) != "undefined" && o.waitingMembers !== null) ? o.waitingMembers : null),"waitingMembersCount": ((typeof (o) != "undefined" && o !== null && typeof (o.waitingMembersCount) != "undefined" && o.waitingMembersCount !== null) ? o.waitingMembersCount : null)}, b, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
platoon.listmembers._use_86_18_block_outerFooter = new Surface.Block("platoon.listmembers._use_86_18_block_outerFooter");
platoon.listmembers._use_86_18_block_outerFooter.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.listmembers._use_171_10_block_extraClass = new Surface.Block("platoon.listmembers._use_171_10_block_extraClass");
platoon.listmembers._use_171_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-member-memberslist");
    if ((S.Modifier.count(S.Modifier.get(o.mlst, "CREATORS", [])) == 0)) {
        c.push(" platoon-member-memberslist-hidden");
    }
    return c.join("");
};
platoon.listmembers._use_171_10_block_title = new Surface.Block("platoon.listmembers._use_171_10_block_title");
platoon.listmembers._use_171_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(S.Modifier.get(o.mlst, "CREATORS", [])), "Founder", "Founders")));
    return c.join("");
};
platoon.listmembers._use_171_10_block_content = new Surface.Block("platoon.listmembers._use_171_10_block_content");
platoon.listmembers._use_171_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_platoon_listmembers_176_22_list;
    var l_applying;
    c.push(' <div id="platoon-memberlist-creators" class="platoon-memberlist-list"');
    if (o.isCreator) {
        c.push(" access-kick");
    }
    c.push(">\n");
    l_for_platoon_listmembers_176_22_list = S.Modifier.get(o.mlst, "CREATORS", []);
    if ((S.Modifier.count(l_for_platoon_listmembers_176_22_list) > 0)) {
        for (var l_for_platoon_listmembers_176_22_key in l_for_platoon_listmembers_176_22_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_176_22_list[l_for_platoon_listmembers_176_22_key])) {
                continue;
            }
            var l_member = l_for_platoon_listmembers_176_22_list[l_for_platoon_listmembers_176_22_key];
            l_applying = (S.Modifier.bitwiseand(l_member.membershipLevel, o.membershipLevels.JOINWAITING) == o.membershipLevels.JOINWAITING);
            c.push("\n");
            if ((!(l_applying) || (l_applying && o.isAdmin))) {
                c.push(" ");
                c.push(Surface.importTemplate(("platoon" + ("." + "listmembersUser")), {"member": l_member,"membershipLevels": o.membershipLevels}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
platoon.listmembers._use_187_10_block_extraClass = new Surface.Block("platoon.listmembers._use_187_10_block_extraClass");
platoon.listmembers._use_187_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-member-memberslist");
    if ((S.Modifier.count(S.Modifier.get(o.mlst, "ADMINS", [])) == 0)) {
        c.push(" platoon-member-memberslist-hidden");
    }
    return c.join("");
};
platoon.listmembers._use_187_10_block_title = new Surface.Block("platoon.listmembers._use_187_10_block_title");
platoon.listmembers._use_187_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(S.Modifier.get(o.mlst, "ADMINS", [])), "Leader", "Leaders")));
    return c.join("");
};
platoon.listmembers._use_187_10_block_content = new Surface.Block("platoon.listmembers._use_187_10_block_content");
platoon.listmembers._use_187_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_platoon_listmembers_192_22_list;
    var l_applying;
    c.push(' <div id="platoon-memberlist-admins" class="platoon-memberlist-list"');
    if (o.isCreator) {
        c.push(" access-demote access-kick");
    }
    c.push(">\n");
    l_for_platoon_listmembers_192_22_list = S.Modifier.get(o.mlst, "ADMINS", []);
    if ((S.Modifier.count(l_for_platoon_listmembers_192_22_list) > 0)) {
        for (var l_for_platoon_listmembers_192_22_key in l_for_platoon_listmembers_192_22_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_192_22_list[l_for_platoon_listmembers_192_22_key])) {
                continue;
            }
            var l_member = l_for_platoon_listmembers_192_22_list[l_for_platoon_listmembers_192_22_key];
            l_applying = (S.Modifier.bitwiseand(l_member.membershipLevel, o.membershipLevels.JOINWAITING) == o.membershipLevels.JOINWAITING);
            c.push("\n");
            if ((!(l_applying) || (l_applying && o.isAdmin))) {
                c.push(" ");
                c.push(Surface.importTemplate(("platoon" + ("." + "listmembersUser")), {"member": l_member,"membershipLevels": o.membershipLevels}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
platoon.listmembers._use_203_10_block_extraClass = new Surface.Block("platoon.listmembers._use_203_10_block_extraClass");
platoon.listmembers._use_203_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-member-memberslist");
    if ((S.Modifier.count(S.Modifier.get(o.mlst, "MEMBERS", [])) == 0)) {
        c.push(" platoon-member-memberslist-hidden");
    }
    return c.join("");
};
platoon.listmembers._use_203_10_block_title = new Surface.Block("platoon.listmembers._use_203_10_block_title");
platoon.listmembers._use_203_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(S.Modifier.get(o.mlst, "MEMBERS", [])), "Member", "Members")));
    return c.join("");
};
platoon.listmembers._use_203_10_block_content = new Surface.Block("platoon.listmembers._use_203_10_block_content");
platoon.listmembers._use_203_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_platoon_listmembers_208_22_list;
    var l_applying;
    c.push(' <div id="platoon-memberlist-members" class="platoon-memberlist-list"');
    if ((o.isAdmin || o.isCreator)) {
        c.push(" access-kick");
        if ((o.isAdmin || o.isCreator)) {
            c.push(" access-promote");
        }
    }
    c.push(">\n");
    l_for_platoon_listmembers_208_22_list = S.Modifier.get(o.mlst, "MEMBERS", []);
    if ((S.Modifier.count(l_for_platoon_listmembers_208_22_list) > 0)) {
        for (var l_for_platoon_listmembers_208_22_key in l_for_platoon_listmembers_208_22_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_listmembers_208_22_list[l_for_platoon_listmembers_208_22_key])) {
                continue;
            }
            var l_member = l_for_platoon_listmembers_208_22_list[l_for_platoon_listmembers_208_22_key];
            l_applying = (S.Modifier.bitwiseand(l_member.membershipLevel, o.membershipLevels.JOINWAITING) == o.membershipLevels.JOINWAITING);
            c.push("\n");
            if ((!(l_applying) || (l_applying && o.isAdmin))) {
                c.push(" ");
                c.push(Surface.importTemplate(("platoon" + ("." + "listmembersUser")), {"member": l_member,"membershipLevels": o.membershipLevels}, null, kwargs));
                c.push("\n");
            }
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
platoon.listmembers.block_profileMainColumn = new Surface.Block("platoon.listmembers.block_profileMainColumn");
platoon.listmembers.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    o.mlst = {"CREATORS": S.Modifier.filterlist(o.listMembers, "membershipLevel", o.membershipLevels.CREATOR),"ADMINS": S.Modifier.filterlist(o.listMembers, "membershipLevel", o.membershipLevels.ADMIN),"MEMBERS": S.Modifier.filterlist(o.listMembers, "membershipLevel", o.membershipLevels.MEMBER),"INVITED": S.Modifier.filterlist(o.listMembers, "membershipLevel", o.membershipLevels.INVITED),"JOINWAITING": S.Modifier.filterlist(o.listMembers, "membershipLevel", o.membershipLevels.JOINWAITING)};
    c.push("\n");
    o.isCreator = 0;
    o.isAdmin = 0;
    if ((o.me && (S.Modifier.bitwiseand(o.me.membershipLevel, o.membershipLevels.CREATOR) == o.membershipLevels.CREATOR))) {
        o.isCreator = 1;
    } else {
        if ((o.me && (S.Modifier.bitwiseand(o.me.membershipLevel, o.membershipLevels.ADMIN) == o.membershipLevels.ADMIN))) {
            o.isAdmin = 1;
        }
    }
    c.push("\n");
    if ((o.isAdmin || o.isCreator)) {
        c.push(' <div class="platoon-member-invites">\n');
        c.push(Surface.importTemplate(("common" + ("." + "focusbartoggle")), o, block_platoon_listmembers_use_32_14, kwargs));
        c.push('\n <div class="platoon-clear"></div>\n');
        o.invitedMembers = S.Modifier.get(o.mlst, "INVITED", []);
        o.waitingMembers = S.Modifier.get(o.mlst, "JOINWAITING", []);
        c.push("\n");
        o.invitedMembersCount = S.Modifier.count(o.invitedMembers);
        o.waitingMembersCount = S.Modifier.count(o.waitingMembers);
        c.push(' <input type="hidden" id="platoon-iabox-counter-invited" value="');
        c.push(Surface.valOut(o.invitedMembersCount));
        c.push('">\n <input type="hidden" id="platoon-iabox-counter-applying" value="');
        c.push(Surface.valOut(o.waitingMembersCount));
        c.push('">\n');
        if (((o.invitedMembersCount > 0) || (o.waitingMembersCount > 0))) {
            c.push(Surface.importTemplate(("common" + ("." + "focusbartoggle")), o, block_platoon_listmembers_use_86_18, kwargs));
        }
        c.push('\n <div class="base-clear"></div>\n </div>\n');
    }
    c.push('\n <div id="platoon-meberlist-lists">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listmembers_use_171_10, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listmembers_use_187_10, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_listmembers_use_203_10, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
var block_platoon_listmembersUser = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("listmembersUser"));
platoon.listmembersUser.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_listmembersUser;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.listmembersUser");
    c.push('\n<div class="platoon-member-memberslist-user">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.member.user,"gravatarSize": 30}, null, kwargs));
    c.push('\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.member.user.username})));
    c.push('" class="platoon-member-memberslist-user-username">');
    c.push(Surface.valOut(o.member.user.username));
    c.push('</a>\n <div class="platoon-member-memberslist-user-actions">\n <span class="platoon-member-memberslist-user-actions-action platoon-member-memberslist-user-actions-kick bubble-title" title="Kick ');
    c.push(Surface.valOut(o.member.user.username));
    c.push('" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/kickmember/{id}/{userId}/", Surface.urlContext, {"id": o.member.platoonId,"userId": o.member.userId})));
    c.push('"></span>\n <a class="platoon-member-memberslist-user-actions-action platoon-member-memberslist-user-actions-demote bubble-title" title="Demote ');
    c.push(Surface.valOut(o.member.user.username));
    c.push('" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/demotemember/{id}/{userId}/", Surface.urlContext, {"id": o.member.platoonId,"userId": o.member.userId})));
    c.push('"></a>\n <a class="platoon-member-memberslist-user-actions-action platoon-member-memberslist-user-actions-promote bubble-title" title="Promote ');
    c.push(Surface.valOut(o.member.user.username));
    c.push('" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/promotemember/{id}/{userId}/", Surface.urlContext, {"id": o.member.platoonId,"userId": o.member.userId})));
    c.push('"></a>\n </div>\n</div>\n');
    return c.join("");
};
var block_platoon_member = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("member"));
platoon.member.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_member;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.member");
    c.push('\n<div class="platoon-member-frame">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.member.user,"gravatarSize": 52,"tipsyTitle": true}, null, kwargs));
    c.push("\n");
    if (((S.Modifier.bitwiseand(o.member.membershipLevel, o.membershipLevels.CREATOR) == o.membershipLevels.CREATOR) || (S.Modifier.bitwiseand(o.member.membershipLevel, o.membershipLevels.ADMIN) == o.membershipLevels.ADMIN))) {
        c.push(' <div class="platoon-member-frame-desc">');
        c.push(Surface.importTemplate(("platoon" + ("." + "membership")), {"membership": o.member.membershipLevel,"membershipLevels": o.membershipLevels}, null, kwargs));
        c.push("</div>\n");
    }
    c.push("</div>\n");
    return c.join("");
};
var block_platoon_membership = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("membership"));
platoon.membership.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_membership;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.membership");
    c.push("\n");
    if ((S.Modifier.bitwiseand(o.membership, o.membershipLevels.CREATOR) == o.membershipLevels.CREATOR)) {
        c.push("FOUNDER\n");
    } else {
        if ((S.Modifier.bitwiseand(o.membership, o.membershipLevels.ADMIN) == o.membershipLevels.ADMIN)) {
            c.push("LEADER\n");
        } else {
            if ((S.Modifier.bitwiseand(o.membership, o.membershipLevels.MEMBER) == o.membershipLevels.MEMBER)) {
                c.push("MEMBER\n");
            } else {
                if ((S.Modifier.bitwiseand(o.membership, o.membershipLevels.JOINWAITING) == o.membershipLevels.JOINWAITING)) {
                    c.push("APPLYING\n");
                } else {
                    if ((S.Modifier.bitwiseand(o.membership, o.membershipLevels.INVITED) == o.membershipLevels.INVITED)) {
                        c.push("INVITED\n");
                    }
                }
            }
        }
    }
    return c.join("");
};
var block_platoon_menu = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("menu"));
platoon.menu.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_menu;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.menu");
    var l_session;
    c.push("\n");
    if (o.platoon) {
        l_session = S.Modifier.get(Surface.globalContext, "session");
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
            o.userId = l_session.user.userId;
        } else {
            o.userId = 0;
        }
        c.push(' <div class="platoon-menu-main">\n <div class="platoon-menu-main-navigation">\n <div class="platoon-menu ');
        if ((o.menu == "summary")) {
            c.push("common-active-row-marker platoon-menu-selected active");
        } else {
            c.push("common-active-row");
        }
        c.push('"><div class="profile-select-view-image overview"></div><a href=\'');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id})));
        c.push("'>");
        c.push(Surface.valOut("Overview"));
        c.push('</a></div>\n <div class="platoon-menu ');
        if ((o.menu == "listmembers")) {
            c.push("common-active-row-marker platoon-menu-selected active");
        } else {
            c.push("common-active-row");
        }
        c.push('"><div class="profile-select-view-image friends"></div><a href=\'');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "listmembers"})));
        c.push("'>");
        c.push(Surface.valOut("Members"));
        c.push('</a></div>\n <div class="platoon-menu ');
        if ((o.menu == "stats")) {
            c.push("common-active-row-marker platoon-menu-selected active");
        } else {
            c.push("common-active-row");
        }
        c.push('"><div class="profile-select-view-image stats"></div><a href=\'');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "stats"})));
        c.push("'>");
        c.push(Surface.valOut("Stats"));
        c.push("</a></div>\n");
        c.push(platoon.menu.surface_17_14.render({"menu": ((typeof (o) != "undefined" && o !== null && typeof (o.menu) != "undefined" && o.menu !== null) ? o.menu : null),"platoon": {"fanCounter": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.fanCounter) != "undefined" && o.platoon.fanCounter !== null) ? o.platoon.fanCounter : null),"id": ((typeof (o) != "undefined" && o !== null && typeof (o.platoon) != "undefined" && o.platoon !== null && typeof (o.platoon.id) != "undefined" && o.platoon.id !== null) ? o.platoon.id : null)}}, b, kwargs));
        c.push("\n");
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && S.Modifier.get(o.platoon.members, l_session.user.userId, false)) && (S.Modifier.get(S.Modifier.get(o.platoon.members, l_session.user.userId), "membershipLevel", 0) >= 128))) {
            c.push(' <div class="platoon-menu ');
            if ((o.menu == "edit")) {
                c.push("common-active-row-marker platoon-menu-selected active");
            } else {
                c.push("common-active-row");
            }
            c.push('"><div class="profile-select-view-image edit"></div><a href=\'');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "edit"})));
            c.push("'>");
            c.push(Surface.valOut("Edit platoon"));
            c.push("</a></div>\n");
        }
        c.push(" </div>\n");
        c.push(platoon.menu.surface_51_10.render({"platoon": o.platoon,"fans": o.fans}, b, kwargs));
        c.push("\n");
        if ((o.userId && S.Modifier.get(o.platoon.members, o.userId, 0))) {
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_platoon_menu_use_74_14, kwargs));
        }
        c.push("\n </div>\n");
    }
    return c.join("");
};
var block_platoon_menu_use_74_14 = new Surface.BlockConfig("common.secondarycontent", {"content": "platoon.menu._use_74_14_block_content","titleContainer": "platoon.menu._use_74_14_block_titleContainer"});
var block_platoon_menu_use_53_18 = new Surface.BlockConfig("common.secondarycontent", {"content": "platoon.menu._use_53_18_block_content","title": "platoon.menu._use_53_18_block_title"});
platoon.menu.surface_17_14 = new Surface.SingleSurface("platoon.menu.surface_17_14");
platoon.menu.surface_17_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_menu;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.menu");
    c.push('<surf:container id="');
    c.push("platoon-info-menu-row-fans");
    c.push('">');
    c.push(' <div class="platoon-menu ');
    if ((o.menu == "listfans")) {
        c.push("common-active-row-marker platoon-menu-selected active");
    } else {
        if ((o.platoon.fanCounter < 1)) {
            c.push("disabled");
        }
        c.push(" common-active-row");
    }
    c.push('"><div class="profile-select-view-image fans"></div>');
    if ((o.platoon.fanCounter > 0)) {
        c.push("<a href='");
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "listfans"})));
        c.push("'>");
    } else {
        c.push("<a>");
    }
    c.push(Surface.valOut("Fans"));
    c.push("</a></div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.menu", "surface_17_14", "platoon-info-menu-row-fans", o, b);
    return c.join("");
};
platoon.menu.surface_51_10 = new Surface.SingleSurface("platoon.menu.surface_51_10");
platoon.menu._use_53_18_block_title = new Surface.Block("platoon.menu._use_53_18_block_title");
platoon.menu._use_53_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("<a href='");
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id,"menu": "listfans"})));
    c.push("'>FANS (");
    c.push(Surface.valOut(o.platoon.fanCounter));
    c.push(")</a>");
    return c.join("");
};
platoon.menu._use_53_18_block_content = new Surface.Block("platoon.menu._use_53_18_block_content");
platoon.menu._use_53_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_platoon_menu_57_30_list;
    var l_for_platoon_menu_57_30_iteration;
    c.push(' <div class="platoon-menu-fans">\n');
    l_for_platoon_menu_57_30_list = o.fans;
    l_for_platoon_menu_57_30_iteration = 0;
    if ((S.Modifier.count(l_for_platoon_menu_57_30_list) > 0)) {
        for (var l_for_platoon_menu_57_30_key in l_for_platoon_menu_57_30_list) {
            if (!Surface.isValidLoopItem(l_for_platoon_menu_57_30_list[l_for_platoon_menu_57_30_key])) {
                continue;
            }
            var l_fan = l_for_platoon_menu_57_30_list[l_for_platoon_menu_57_30_key];
            l_for_platoon_menu_57_30_iteration = (l_for_platoon_menu_57_30_iteration + 1);
            c.push(' <div class="platoon-member-small">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_fan,"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
            c.push("\n </div>\n");
            if ((l_for_platoon_menu_57_30_iteration > 10)) {
                break;
            }
        }
    }
    c.push('\n <div class="platoon-clear"></div>\n </div>\n');
    return c.join("");
};
platoon.menu.surface_51_10.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_menu;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.menu");
    c.push('<surf:container id="');
    c.push("platoon-info-sidebar-fans-list");
    c.push('">');
    if ((o.platoon.fanCounter > 0)) {
        c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_platoon_menu_use_53_18, kwargs));
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("platoon.menu", "surface_51_10", "platoon-info-sidebar-fans-list", o, b);
    return c.join("");
};
platoon.menu._use_74_14_block_titleContainer = new Surface.Block("platoon.menu._use_74_14_block_titleContainer");
platoon.menu._use_74_14_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.menu._use_74_14_block_content = new Surface.Block("platoon.menu._use_74_14_block_content");
platoon.menu._use_74_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="platoon-menu-extralinks">\n <a class="platoon-leave-link" platoonId="');
    c.push(Surface.valOut(o.platoon.id));
    c.push('" userId="');
    c.push(Surface.valOut(o.userId));
    c.push('" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/leave/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut("Leave platoon"));
    c.push("</a><br />\n </div>\n");
    return c.join("");
};
var block_platoon_notfound = new Surface.BlockConfig("platoon.basetitle", {"bodyClass": "platoon.notfound.block_bodyClass","titleItem": "platoon.notfound.block_titleItem","mainContent": "platoon.notfound.block_mainContent"});
platoon.addTemplate(new Surface.Template("notfound"));
platoon.notfound.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_notfound;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.notfound");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.basetitle", o, b, kwargs);
};
platoon.notfound.block_bodyClass = new Surface.Block("platoon.notfound.block_bodyClass");
platoon.notfound.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-notfound-page");
    return c.join("");
};
platoon.notfound.block_titleItem = new Surface.Block("platoon.notfound.block_titleItem");
platoon.notfound.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
platoon.notfound.block_mainContent = new Surface.Block("platoon.notfound.block_mainContent");
platoon.notfound.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="main-login-upper"></div>\n <div class="base-middle">\n <div class="platoon-page-bg platoon-mid platoon-landing-mid">\n <div id="serverguide-noservers">\n <h1>This platoon does not exist or has been removed</h1>\n <p>Could not find platoon</p>\n </div>\n </div>\n <div class="platoon-clear"></div>\n </div>\n');
    return c.join("");
};
var block_platoon_platooncard = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("platooncard"));
platoon.platooncard.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_platooncard;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.platooncard");
    c.push('\n<div class="platoon-platooncard ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
    c.push('">\n <div class="platoon-platooncard-badge">');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.platoon.id,"bp": o.platoon.badgePath,"size": 60}, null, kwargs));
    c.push('</div>\n <div class="platoon-platooncard-info">\n <div class="platoon-platooncard-info-title">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, o.platoon)));
    c.push('">[');
    c.push(Surface.valOut(o.platoon.tag));
    c.push("] ");
    c.push(Surface.valOut(o.platoon.name));
    c.push('</a>\n </div>\n <div class="base-clear"></div>\n <div class="platoon-platooncard-info-stats">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.platoon.game, o.platoon.platform, 0, b, kwargs)));
    c.push(' platoon-platooncard-info-title-game"></span>\n ');
    c.push(Surface.valOut(o.platoon.memberCounter));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.platoon.memberCounter, "member", "members")));
    c.push(" ");
    c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut(o.platoon.fanCounter));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.platoon.fanCounter, "fan", "fans")));
    c.push("\n </div>\n </div>\n</div>");
    return c.join("");
};
var block_platoon_reportplatoondropdown = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("reportplatoondropdown"));
platoon.reportplatoondropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_reportplatoondropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.reportplatoondropdown");
    c.push('\n<ul>\n <li><a class="base-no-ajax report" title="Report platoon" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportPlatoonAbuse/{id}/", Surface.urlContext, {"id": o.id})));
    c.push('" href="#">');
    c.push(Surface.valOut("Report Platoon"));
    c.push("</a></li>\n");
    if (o.canView) {
        c.push(' <li><a class="base-no-ajax" title="View platoon" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/platoon/{state}/{id}/", Surface.urlContext, {"state": "view","id": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("View Platoon"));
        c.push("</a></li>\n");
    }
    if (o.canShowHide) {
        c.push(' <li><a class="base-no-ajax" title="View platoon" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/platoon/{state}/{id}/", Surface.urlContext, {"state": "show","id": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("Show Platoon"));
        c.push('</a></li>\n <li><a class="base-no-ajax" title="View platoon" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/platoon/{state}/{id}/", Surface.urlContext, {"state": "hide","id": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("Hide Platoon"));
        c.push("</a></li>\n");
    }
    c.push("</ul>");
    return c.join("");
};
var block_platoon_schedule = new Surface.BlockConfig("platoon.basetitle", {"bodyClass": "platoon.schedule.block_bodyClass","titleItem": "platoon.schedule.block_titleItem","mainContent": "platoon.schedule.block_mainContent"});
platoon.addTemplate(new Surface.Template("schedule"));
var block_platoon_stats = new Surface.BlockConfig("platoon.base", {"profileMainColumn": "platoon.stats.block_profileMainColumn"});
platoon.addTemplate(new Surface.Template("stats"));
platoon.stats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_stats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.stats");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("platoon.base", o, b, kwargs);
};
var block_platoon_stats_use_42_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.stats._use_42_6_block_content","extraClassInner": "platoon.stats._use_42_6_block_extraClassInner","title": "platoon.stats._use_42_6_block_title","extraClass": "platoon.stats._use_42_6_block_extraClass"});
var block_platoon_stats_use_32_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.stats._use_32_6_block_content","extraClassInner": "platoon.stats._use_32_6_block_extraClassInner","title": "platoon.stats._use_32_6_block_title","extraClass": "platoon.stats._use_32_6_block_extraClass"});
var block_platoon_stats_use_21_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "platoon.stats._use_21_6_block_content","extraClassInner": "platoon.stats._use_21_6_block_extraClassInner","title": "platoon.stats._use_21_6_block_title","extraClass": "platoon.stats._use_21_6_block_extraClass"});
platoon.stats._use_21_6_block_extraClass = new Surface.Block("platoon.stats._use_21_6_block_extraClass");
platoon.stats._use_21_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box");
    return c.join("");
};
platoon.stats._use_21_6_block_title = new Surface.Block("platoon.stats._use_21_6_block_title");
platoon.stats._use_21_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("General"));
    return c.join("");
};
platoon.stats._use_21_6_block_extraClassInner = new Surface.Block("platoon.stats._use_21_6_block_extraClassInner");
platoon.stats._use_21_6_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box-inner platoon-stats-box-general");
    return c.join("");
};
platoon.stats._use_21_6_block_content = new Surface.Block("platoon.stats._use_21_6_block_content");
platoon.stats._use_21_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <input type="hidden" id="platoonmember-stats-fetch-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/platoonMemberStats/{id}/{game}/{platform}/", Surface.urlContext, o.platoon)));
    c.push('"/>\n <div id="platoon-general-stats-replace"><div class="platoon-stats-replace-spinner"><div class="common-spinner" data-size="big"></div></div></div>\n');
    return c.join("");
};
platoon.stats._use_32_6_block_extraClass = new Surface.Block("platoon.stats._use_32_6_block_extraClass");
platoon.stats._use_32_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box");
    return c.join("");
};
platoon.stats._use_32_6_block_title = new Surface.Block("platoon.stats._use_32_6_block_title");
platoon.stats._use_32_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Top players"));
    return c.join("");
};
platoon.stats._use_32_6_block_extraClassInner = new Surface.Block("platoon.stats._use_32_6_block_extraClassInner");
platoon.stats._use_32_6_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box-inner platoon-stats-box-top_players");
    return c.join("");
};
platoon.stats._use_32_6_block_content = new Surface.Block("platoon.stats._use_32_6_block_content");
platoon.stats._use_32_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="platoon-topplayers-stats-replace"><div class="platoon-stats-replace-spinner"><div class="common-spinner" data-size="big"></div></div></div>\n');
    return c.join("");
};
platoon.stats._use_42_6_block_extraClass = new Surface.Block("platoon.stats._use_42_6_block_extraClass");
platoon.stats._use_42_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box");
    return c.join("");
};
platoon.stats._use_42_6_block_title = new Surface.Block("platoon.stats._use_42_6_block_title");
platoon.stats._use_42_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Kits & Vehicles"));
    return c.join("");
};
platoon.stats._use_42_6_block_extraClassInner = new Surface.Block("platoon.stats._use_42_6_block_extraClassInner");
platoon.stats._use_42_6_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("platoon-stats-box-inner platoon-stats-box-kits_vehicles");
    return c.join("");
};
platoon.stats._use_42_6_block_content = new Surface.Block("platoon.stats._use_42_6_block_content");
platoon.stats._use_42_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="platoon-kitandvehicles-stats-replace"><div class="platoon-stats-replace-spinner"><div class="common-spinner" data-size="big"></div></div></div>\n');
    return c.join("");
};
platoon.stats.block_profileMainColumn = new Surface.Block("platoon.stats.block_profileMainColumn");
platoon.stats.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_stats_use_21_6, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_stats_use_32_6, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_platoon_stats_use_42_6, kwargs));
    c.push("\n");
    return c.join("");
};
var block_platoon_statsgeneral = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("statsgeneral"));
platoon.statsgeneral.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_statsgeneral;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.statsgeneral");
    var l_generalSpm;
    var l_generalKd;
    var l_generalRank;
    var l_generalRankAverage;
    var l_generalSpmAverage;
    var l_generalKdAverage;
    c.push('\n<div class="platoon-stats-box-columns first">\n <div class="platoon-stats-box-medium-column">\n');
    l_generalSpm = S.Modifier.get(o.memberStats.general, "scorePerMinute", {});
    c.push("\n <h3>");
    c.push(Surface.valOut("Score / Min"));
    c.push("</h3>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n');
    l_generalSpmAverage = S.Modifier.get(l_generalSpm, "average", 0);
    c.push(' <p class="wfont">');
    c.push(Surface.valOut(l_generalSpmAverage));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalSpm, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalSpm, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalSpm, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-medium-column">\n');
    l_generalRank = S.Modifier.get(o.memberStats.general, "rank", {});
    c.push("\n <h3>");
    c.push(Surface.valOut("Rank"));
    c.push("</h3>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n');
    l_generalRankAverage = S.Modifier.get(l_generalRank, "average", 0);
    c.push(' <p class="wfont">');
    c.push(Surface.valOut(l_generalRankAverage));
    c.push('</p>\n <div class="platoon-stats-box-medium-rankicon-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "personarank")), {"rankGame": o.platoon.game,"size": "small","rankLevel": l_generalRankAverage}, null, kwargs));
    c.push('\n </div>\n </div>\n <div class="platoon-stats-box-column-summary">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalRank, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalRank, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalRank, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-medium-column last">\n');
    l_generalKd = S.Modifier.get(o.memberStats.general, "kd", {});
    c.push("\n <h3>");
    c.push(Surface.valOut("K/D Ratio"));
    c.push("</h3>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n');
    l_generalKdAverage = S.Modifier.get(l_generalKd, "average", 0);
    c.push(' <p class="wfont">');
    c.push(Surface.valOut(l_generalKdAverage));
    c.push('</p>\n <div class="platoon-stats-box-medium-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"kdr": l_generalKdAverage}, null, kwargs));
    c.push('\n </div>\n </div>\n <div class="platoon-stats-box-column-summary">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalKd, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalKd, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_generalKd, "min", 0)));
    c.push("</p>\n </div>\n </div>\n </div>\n</div>\n");
    return c.join("");
};
var block_platoon_statsindex = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("statsindex"));
platoon.statsindex.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_statsindex;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.statsindex");
    c.push('\n<div class="platoon-stats-box-columns first">\n <div class="platoon-stats-box-medium-column">\n <h3>');
    c.push(Surface.valOut("Total"));
    c.push('</h3>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">0.0</p>\n <div class="platoon-stats-box-medium-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0}, null, kwargs));
    c.push('\n </div>\n </div>\n <div class="platoon-stats-box-column-summary">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("WINS"));
    c.push('</h6>\n <p>0</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("LOSSES"));
    c.push('</h6>\n <p>0</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiniest-column align-center">\n <h4>');
    c.push(Surface.valOut("Rush"));
    c.push('</h4>\n <div class="platoon-stats-box-small-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0,"size": "mini"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">0.0</p>\n <p class="tiny">0 / 0</p>\n </div>\n </div>\n <div class="platoon-stats-box-tiniest-column align-center">\n <h4>');
    c.push(Surface.valOut("TDM"));
    c.push('</h4>\n <div class="platoon-stats-box-small-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0,"size": "mini"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">0.0</p>\n <p class="tiny">0 / 0</p>\n </div>\n </div>\n <div class="platoon-stats-box-tiniest-column align-center">\n <h4>');
    c.push(Surface.valOut("Conquest"));
    c.push('</h4>\n <div class="platoon-stats-box-small-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0,"size": "mini"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">0.0</p>\n <p class="tiny">0 / 0</p>\n </div>\n </div>\n <div class="platoon-stats-box-tiniest-column align-center">\n <h4>');
    c.push(Surface.valOut("Squad Rush"));
    c.push('</h4>\n <div class="platoon-stats-box-small-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0,"size": "mini"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">0.0</p>\n <p class="tiny">0 / 0</p>\n </div>\n </div>\n <div class="platoon-stats-box-tiniest-column align-center last">\n <h4>');
    c.push(Surface.valOut("Squad DM"));
    c.push('</h4>\n <div class="platoon-stats-box-small-pmeter-wrapper">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": 0,"losses": 0,"size": "mini"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">0.0</p>\n <p class="tiny">0 / 0</p>\n </div>\n </div>\n</div>\n');
    return c.join("");
};
var block_platoon_statskitandvehicles = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("statskitandvehicles"));
platoon.statskitandvehicles.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_statskitandvehicles;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.statskitandvehicles");
    var l_kvRecon;
    var l_kvVehicles;
    var l_kvSupport;
    var l_kvEngineer;
    var l_kvAssault;
    c.push('\n<div class="platoon-stats-box-columns first">\n <div class="platoon-stats-box-tiny-column columns-intro">\n <h3>');
    c.push(Surface.valOut("Score / Min"));
    c.push("</h3>\n ");
    c.push(Surface.importTemplate(("common" + ("." + "kittimes")), {"assault": 28,"engineer": 32,"support": 25,"recon": 15,"bg": "white"}, null, kwargs));
    c.push('\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvAssault = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "scorePerMinute", {}), "assault", {});
    c.push(' <h4 class="icon-assault">');
    c.push(Surface.valOut("Assault"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">');
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvEngineer = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "scorePerMinute", {}), "engineer", {});
    c.push(' <h4 class="icon-engineer">');
    c.push(Surface.valOut("Engineer"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">');
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvSupport = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "scorePerMinute", {}), "support", {});
    c.push(' <h4 class="icon-support">Support</h4>\n <h6>');
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">');
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvRecon = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "scorePerMinute", {}), "recon", {});
    c.push(' <h4 class="icon-recon">');
    c.push(Surface.valOut("Recon"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">');
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column last">\n');
    l_kvVehicles = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "scorePerMinute", {}), "vehicles", {});
    c.push(' <h4 class="icon-vehicles">');
    c.push(Surface.valOut("Vehicles"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont">');
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n</div>\n<div class="platoon-stats-box-columns">\n <div class="platoon-stats-box-tiny-column columns-intro">\n <h3>');
    c.push(Surface.valOut("Score"));
    c.push('</h3>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvAssault = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "score", {}), "assault", {});
    c.push(' <h4 class="icon-assault">');
    c.push(Surface.valOut("Assault"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvEngineer = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "score", {}), "engineer", {});
    c.push(' <h4 class="icon-engineer">');
    c.push(Surface.valOut("Engineer"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvSupport = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "score", {}), "support", {});
    c.push(' <h4 class="icon-support">');
    c.push(Surface.valOut("Support"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvRecon = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "score", {}), "recon", {});
    c.push(' <h4 class="icon-recon">');
    c.push(Surface.valOut("Recon"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column last">\n');
    l_kvVehicles = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "score", {}), "vehicles", {});
    c.push(' <h4 class="icon-vehicles">');
    c.push(Surface.valOut("Vehicles"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n</div>\n<div class="platoon-stats-box-columns">\n <div class="platoon-stats-box-tiny-column columns-intro">\n <h3>');
    c.push(Surface.valOut("Time"));
    c.push('</h3>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvAssault = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "time", {}), "assault", {});
    c.push(' <h4 class="icon-assault">');
    c.push(Surface.valOut("Assault"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvAssault, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvEngineer = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "time", {}), "engineer", {});
    c.push(' <h4 class="icon-engineer">');
    c.push(Surface.valOut("Engineer"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvEngineer, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvSupport = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "time", {}), "support", {});
    c.push(' <h4 class="icon-support">');
    c.push(Surface.valOut("Support"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvSupport, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column">\n');
    l_kvRecon = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "time", {}), "recon", {});
    c.push(' <h4 class="icon-recon">');
    c.push(Surface.valOut("Recon"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvRecon, "min", 0)));
    c.push('</p>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-tiny-column last">\n');
    l_kvVehicles = S.Modifier.get(S.Modifier.get(o.memberStats.kitsVehicles, "time", {}), "vehicles", {});
    c.push(' <h4 class="icon-vehicles">');
    c.push(Surface.valOut("Vehicles"));
    c.push("</h4>\n <h6>");
    c.push(Surface.valOut("Average"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="wfont small">');
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "average", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary standing">\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Best"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "best", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Median"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "median", 0)));
    c.push('</p>\n </div>\n <div class="platoon-stats-box-column-summary-box">\n <h6>');
    c.push(Surface.valOut("Min"));
    c.push("</h6>\n <p>");
    c.push(Surface.valOut(S.Modifier.get(l_kvVehicles, "min", 0)));
    c.push("</p>\n </div>\n </div>\n </div>\n</div>");
    return c.join("");
};
var block_platoon_statstopplayers = new Surface.BlockConfig("", {});
platoon.addTemplate(new Surface.Template("statstopplayers"));
platoon.statstopplayers.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_platoon_statstopplayers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("platoon");
    Surface.Renderer.addUsedTemplate("platoon.statstopplayers");
    var l_topPlayerReconSPM;
    var l_topPlayerAADriverSPM;
    var l_topPlayerTankDriver;
    var l_topPlayerAssaultSPM;
    var l_topPlayerEngineerSPM;
    var l_topPlayerHelicopterPilotSPM;
    var l_topPlayerEngineer;
    var l_topPlayerRecon;
    var l_topPlayerJetPilot;
    var l_topPlayerJetPilotSPM;
    var l_topPlayerIFVDriverSPM;
    var l_topPlayerIFVDriver;
    var l_topPlayerAssault;
    var l_topPlayerAADriver;
    var l_topPlayerHelicopterPilot;
    var l_topPlayerSupportSPM;
    var l_topPlayerTankDriverSPM;
    var l_topPlayerSupport;
    var l_tmpPersonaId;
    c.push('\n<div class="platoon-stats-box-columns first">\n <div class="platoon-stats-box-medium-column">\n');
    l_topPlayerAssault = S.Modifier.get(o.memberStats.topPlayers, "assault", false);
    l_topPlayerAssaultSPM = S.Modifier.get(l_topPlayerAssault, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerAssault, "personaId", false);
    l_topPlayerAssault = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Assault"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerAssault) != "undefined" && l_topPlayerAssault !== null && typeof (l_topPlayerAssault.username) != "undefined" && l_topPlayerAssault.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerAssault,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerAssault) != "undefined" && l_topPlayerAssault !== null && typeof (l_topPlayerAssault.username) != "undefined" && l_topPlayerAssault.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerAssault.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerAssault) != "undefined" && l_topPlayerAssault !== null && typeof (l_topPlayerAssault.username) != "undefined" && l_topPlayerAssault.username !== null) ? l_topPlayerAssault.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerAssault) != "undefined" && l_topPlayerAssault !== null && typeof (l_topPlayerAssault.username) != "undefined" && l_topPlayerAssault.username !== null) ? l_topPlayerAssault.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerAssault) != "undefined" && l_topPlayerAssault !== null && typeof (l_topPlayerAssault.username) != "undefined" && l_topPlayerAssault.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerAssaultSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerEngineer = S.Modifier.get(o.memberStats.topPlayers, "engineer", false);
    l_topPlayerEngineerSPM = S.Modifier.get(l_topPlayerEngineer, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerEngineer, "personaId", false);
    l_topPlayerEngineer = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Engineer"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerEngineer) != "undefined" && l_topPlayerEngineer !== null && typeof (l_topPlayerEngineer.username) != "undefined" && l_topPlayerEngineer.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerEngineer,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerEngineer) != "undefined" && l_topPlayerEngineer !== null && typeof (l_topPlayerEngineer.username) != "undefined" && l_topPlayerEngineer.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerEngineer.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerEngineer) != "undefined" && l_topPlayerEngineer !== null && typeof (l_topPlayerEngineer.username) != "undefined" && l_topPlayerEngineer.username !== null) ? l_topPlayerEngineer.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerEngineer) != "undefined" && l_topPlayerEngineer !== null && typeof (l_topPlayerEngineer.username) != "undefined" && l_topPlayerEngineer.username !== null) ? l_topPlayerEngineer.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerEngineer) != "undefined" && l_topPlayerEngineer !== null && typeof (l_topPlayerEngineer.username) != "undefined" && l_topPlayerEngineer.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerEngineerSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerIFVDriver = S.Modifier.get(o.memberStats.topPlayers, "ifvdriver", false);
    l_topPlayerIFVDriverSPM = S.Modifier.get(l_topPlayerIFVDriver, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerIFVDriver, "personaId", false);
    l_topPlayerIFVDriver = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top IFV Driver"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row last">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerIFVDriver) != "undefined" && l_topPlayerIFVDriver !== null && typeof (l_topPlayerIFVDriver.username) != "undefined" && l_topPlayerIFVDriver.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerIFVDriver,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerIFVDriver) != "undefined" && l_topPlayerIFVDriver !== null && typeof (l_topPlayerIFVDriver.username) != "undefined" && l_topPlayerIFVDriver.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerIFVDriver.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerIFVDriver) != "undefined" && l_topPlayerIFVDriver !== null && typeof (l_topPlayerIFVDriver.username) != "undefined" && l_topPlayerIFVDriver.username !== null) ? l_topPlayerIFVDriver.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerIFVDriver) != "undefined" && l_topPlayerIFVDriver !== null && typeof (l_topPlayerIFVDriver.username) != "undefined" && l_topPlayerIFVDriver.username !== null) ? l_topPlayerIFVDriver.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerIFVDriver) != "undefined" && l_topPlayerIFVDriver !== null && typeof (l_topPlayerIFVDriver.username) != "undefined" && l_topPlayerIFVDriver.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerIFVDriverSPM));
    }
    c.push('</p>\n </div>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-medium-column">\n');
    l_topPlayerSupport = S.Modifier.get(o.memberStats.topPlayers, "support", false);
    l_topPlayerSupportSPM = S.Modifier.get(l_topPlayerSupport, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerSupport, "personaId", false);
    l_topPlayerSupport = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Support"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerSupport) != "undefined" && l_topPlayerSupport !== null && typeof (l_topPlayerSupport.username) != "undefined" && l_topPlayerSupport.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerSupport,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerSupport) != "undefined" && l_topPlayerSupport !== null && typeof (l_topPlayerSupport.username) != "undefined" && l_topPlayerSupport.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerSupport.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerSupport) != "undefined" && l_topPlayerSupport !== null && typeof (l_topPlayerSupport.username) != "undefined" && l_topPlayerSupport.username !== null) ? l_topPlayerSupport.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerSupport) != "undefined" && l_topPlayerSupport !== null && typeof (l_topPlayerSupport.username) != "undefined" && l_topPlayerSupport.username !== null) ? l_topPlayerSupport.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerSupport) != "undefined" && l_topPlayerSupport !== null && typeof (l_topPlayerSupport.username) != "undefined" && l_topPlayerSupport.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerSupportSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerTankDriver = S.Modifier.get(o.memberStats.topPlayers, "tankdriver", false);
    l_topPlayerTankDriverSPM = S.Modifier.get(l_topPlayerTankDriver, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerTankDriver, "personaId", false);
    l_topPlayerTankDriver = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Tank Driver"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerTankDriver) != "undefined" && l_topPlayerTankDriver !== null && typeof (l_topPlayerTankDriver.username) != "undefined" && l_topPlayerTankDriver.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerTankDriver,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerTankDriver) != "undefined" && l_topPlayerTankDriver !== null && typeof (l_topPlayerTankDriver.username) != "undefined" && l_topPlayerTankDriver.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerTankDriver.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerTankDriver) != "undefined" && l_topPlayerTankDriver !== null && typeof (l_topPlayerTankDriver.username) != "undefined" && l_topPlayerTankDriver.username !== null) ? l_topPlayerTankDriver.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerTankDriver) != "undefined" && l_topPlayerTankDriver !== null && typeof (l_topPlayerTankDriver.username) != "undefined" && l_topPlayerTankDriver.username !== null) ? l_topPlayerTankDriver.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerTankDriver) != "undefined" && l_topPlayerTankDriver !== null && typeof (l_topPlayerTankDriver.username) != "undefined" && l_topPlayerTankDriver.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerTankDriverSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerJetPilot = S.Modifier.get(o.memberStats.topPlayers, "jetpilot", false);
    l_topPlayerJetPilotSPM = S.Modifier.get(l_topPlayerJetPilot, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerJetPilot, "personaId", false);
    l_topPlayerJetPilot = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Jet Pilot"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row last">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerJetPilot) != "undefined" && l_topPlayerJetPilot !== null && typeof (l_topPlayerJetPilot.username) != "undefined" && l_topPlayerJetPilot.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerJetPilot,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerJetPilot) != "undefined" && l_topPlayerJetPilot !== null && typeof (l_topPlayerJetPilot.username) != "undefined" && l_topPlayerJetPilot.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerJetPilot.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerJetPilot) != "undefined" && l_topPlayerJetPilot !== null && typeof (l_topPlayerJetPilot.username) != "undefined" && l_topPlayerJetPilot.username !== null) ? l_topPlayerJetPilot.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerJetPilot) != "undefined" && l_topPlayerJetPilot !== null && typeof (l_topPlayerJetPilot.username) != "undefined" && l_topPlayerJetPilot.username !== null) ? l_topPlayerJetPilot.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerJetPilot) != "undefined" && l_topPlayerJetPilot !== null && typeof (l_topPlayerJetPilot.username) != "undefined" && l_topPlayerJetPilot.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerJetPilotSPM));
    }
    c.push('</p>\n </div>\n </div>\n </div>\n </div>\n <div class="platoon-stats-box-medium-column last">\n');
    l_topPlayerRecon = S.Modifier.get(o.memberStats.topPlayers, "recon", false);
    l_topPlayerReconSPM = S.Modifier.get(l_topPlayerRecon, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerRecon, "personaId", false);
    l_topPlayerRecon = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push('\n <h3>Top Recon</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerRecon) != "undefined" && l_topPlayerRecon !== null && typeof (l_topPlayerRecon.username) != "undefined" && l_topPlayerRecon.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerRecon,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerRecon) != "undefined" && l_topPlayerRecon !== null && typeof (l_topPlayerRecon.username) != "undefined" && l_topPlayerRecon.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerRecon.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerRecon) != "undefined" && l_topPlayerRecon !== null && typeof (l_topPlayerRecon.username) != "undefined" && l_topPlayerRecon.username !== null) ? l_topPlayerRecon.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerRecon) != "undefined" && l_topPlayerRecon !== null && typeof (l_topPlayerRecon.username) != "undefined" && l_topPlayerRecon.username !== null) ? l_topPlayerRecon.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerRecon) != "undefined" && l_topPlayerRecon !== null && typeof (l_topPlayerRecon.username) != "undefined" && l_topPlayerRecon.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerReconSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerHelicopterPilot = S.Modifier.get(o.memberStats.topPlayers, "helipilot", false);
    l_topPlayerHelicopterPilotSPM = S.Modifier.get(l_topPlayerHelicopterPilot, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerHelicopterPilot, "personaId", false);
    l_topPlayerHelicopterPilot = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top Helicopter Pilot"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerHelicopterPilot) != "undefined" && l_topPlayerHelicopterPilot !== null && typeof (l_topPlayerHelicopterPilot.username) != "undefined" && l_topPlayerHelicopterPilot.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerHelicopterPilot,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerHelicopterPilot) != "undefined" && l_topPlayerHelicopterPilot !== null && typeof (l_topPlayerHelicopterPilot.username) != "undefined" && l_topPlayerHelicopterPilot.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerHelicopterPilot.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerHelicopterPilot) != "undefined" && l_topPlayerHelicopterPilot !== null && typeof (l_topPlayerHelicopterPilot.username) != "undefined" && l_topPlayerHelicopterPilot.username !== null) ? l_topPlayerHelicopterPilot.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerHelicopterPilot) != "undefined" && l_topPlayerHelicopterPilot !== null && typeof (l_topPlayerHelicopterPilot.username) != "undefined" && l_topPlayerHelicopterPilot.username !== null) ? l_topPlayerHelicopterPilot.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerHelicopterPilot) != "undefined" && l_topPlayerHelicopterPilot !== null && typeof (l_topPlayerHelicopterPilot.username) != "undefined" && l_topPlayerHelicopterPilot.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerHelicopterPilotSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n");
    l_topPlayerAADriver = S.Modifier.get(o.memberStats.topPlayers, "aadriver", false);
    l_topPlayerAADriverSPM = S.Modifier.get(l_topPlayerAADriver, "spm", 0);
    l_tmpPersonaId = S.Modifier.get(l_topPlayerAADriver, "personaId", false);
    l_topPlayerAADriver = S.Modifier.get(o.platoonPersonas, l_tmpPersonaId);
    c.push("\n <h3>");
    c.push(Surface.valOut("Top AA Driver"));
    c.push('</h3>\n <div class="platoon-stats-box-medium-player-row last">\n <div class="platoon-stats-box-medium-player-row-avatar">\n');
    if (!((typeof (l_topPlayerAADriver) != "undefined" && l_topPlayerAADriver !== null && typeof (l_topPlayerAADriver.username) != "undefined" && l_topPlayerAADriver.username !== null))) {
        c.push(' <div class="platoon-stats-box-medium-player-row-avatar-not-available"></div>\n');
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_topPlayerAADriver,"gravatarSize": 52}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div class="platoon-stats-box-medium-player-row-info">\n');
    if ((typeof (l_topPlayerAADriver) != "undefined" && l_topPlayerAADriver !== null && typeof (l_topPlayerAADriver.username) != "undefined" && l_topPlayerAADriver.username !== null)) {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_topPlayerAADriver.username})));
        c.push('">');
        c.push(Surface.valOut(((typeof (l_topPlayerAADriver) != "undefined" && l_topPlayerAADriver !== null && typeof (l_topPlayerAADriver.username) != "undefined" && l_topPlayerAADriver.username !== null) ? l_topPlayerAADriver.username : "-")));
        c.push("</a>\n");
    } else {
        c.push(' <a class="platoon-stats-box-medium-player-row-info-username not-available" >');
        c.push(Surface.valOut(((typeof (l_topPlayerAADriver) != "undefined" && l_topPlayerAADriver !== null && typeof (l_topPlayerAADriver.username) != "undefined" && l_topPlayerAADriver.username !== null) ? l_topPlayerAADriver.username : "-")));
        c.push("</a>\n");
    }
    c.push(" <h6>");
    c.push(Surface.valOut("SPM"));
    c.push('</h6>\n <div class="platoon-stats-box-column-main">\n <p class="tiny">');
    if (!((typeof (l_topPlayerAADriver) != "undefined" && l_topPlayerAADriver !== null && typeof (l_topPlayerAADriver.username) != "undefined" && l_topPlayerAADriver.username !== null))) {
        c.push("-");
    } else {
        c.push(Surface.valOut(l_topPlayerAADriverSPM));
    }
    c.push("</p>\n </div>\n </div>\n </div>\n </div>\n</div>");
    return c.join("");
};
if (typeof poll == "undefined") {
    var poll = {};
}
var surf_poll_component = new Surface.Component("poll");
surf_poll_component.extend(poll);
poll = surf_poll_component;
poll.addTemplate(new Surface.Template("display"));
var block_poll_view = new Surface.BlockConfig("base.box3x", {"boxContent": "poll.view.block_boxContent","boxSubHeader": "poll.view.block_boxSubHeader","boxHeader": "poll.view.block_boxHeader"});
poll.addTemplate(new Surface.Template("view"));
if (typeof popup == "undefined") {
    var popup = {};
}
var surf_popup_component = new Surface.Component("popup");
surf_popup_component.extend(popup);
popup = surf_popup_component;
var block_popup_chatparty = new Surface.BlockConfig("common.popup", {"footer": "popup.chatparty.block_footer","content": "popup.chatparty.block_content","extraClassInner": "popup.chatparty.block_extraClassInner","title": "popup.chatparty.block_title","extraCloseButtonClass": "popup.chatparty.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("chatparty"));
popup.chatparty.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_chatparty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.chatparty");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.chatparty.block_title = new Surface.Block("popup.chatparty.block_title");
popup.chatparty.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Party Invite");
    return c.join("");
};
popup.chatparty.block_extraCloseButtonClass = new Surface.Block("popup.chatparty.block_extraCloseButtonClass");
popup.chatparty.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.chatparty.block_extraClassInner = new Surface.Block("popup.chatparty.block_extraClassInner");
popup.chatparty.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-party-height");
    return c.join("");
};
popup.chatparty.block_content = new Surface.Block("popup.chatparty.block_content");
popup.chatparty.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_popup_chatparty_24_22_count;
    var l_for_popup_chatparty_24_22_list;
    var l_for_popup_chatparty_24_22_iteration;
    var l_for_popup_chatparty_24_22_hasNext;
    var l_for_popup_chatparty_34_22_list;
    c.push(' <div class="popup-party-icon"></div>\n <div class="popup-gameinvite-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": o.data.owner}, null, kwargs));
    c.push('\n </div>\n <div class="popup-party-content">\n <div class="popup-gameinvite-inviter">\n');
    if ((S.Modifier.count(S.Modifier.get(o.data.chat, "users", [])) > 1)) {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.owner}, null, kwargs));
        c.push(" ");
        c.push(Surface.valOut("invites you to a Party with"));
        c.push(":<br>\n");
    } else {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.owner}, null, kwargs));
        c.push('\n <p class="popup-party-invitetext">');
        c.push(Surface.valOut("invites you to a Party"));
        c.push("</p>\n");
    }
    c.push(' </div>\n <div class="base-left">\n');
    if ((S.Modifier.count(S.Modifier.get(o.data.chat, "users", [])) > 1)) {
        c.push(' <div class="popup-party-usernames">\n');
        l_for_popup_chatparty_24_22_list = S.Modifier.get(o.data.chat, "users", []);
        l_for_popup_chatparty_24_22_count = S.Modifier.count(l_for_popup_chatparty_24_22_list);
        l_for_popup_chatparty_24_22_iteration = 0;
        if ((S.Modifier.count(l_for_popup_chatparty_24_22_list) > 0)) {
            for (var l_for_popup_chatparty_24_22_key in l_for_popup_chatparty_24_22_list) {
                if (!Surface.isValidLoopItem(l_for_popup_chatparty_24_22_list[l_for_popup_chatparty_24_22_key])) {
                    continue;
                }
                var l_user = l_for_popup_chatparty_24_22_list[l_for_popup_chatparty_24_22_key];
                l_for_popup_chatparty_24_22_iteration = (l_for_popup_chatparty_24_22_iteration + 1);
                l_for_popup_chatparty_24_22_hasNext = (l_for_popup_chatparty_24_22_iteration < l_for_popup_chatparty_24_22_count);
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": l_user.username}, null, kwargs));
                c.push("\n");
                if ((l_for_popup_chatparty_24_22_iteration == (S.Modifier.count(S.Modifier.get(o.data.chat, "users")) - 1))) {
                    c.push(" and\n");
                } else {
                    if (l_for_popup_chatparty_24_22_hasNext) {
                        c.push(" ,\n");
                    }
                }
            }
        }
        c.push(' </div>\n <div class="popup-party-avatars">\n');
        l_for_popup_chatparty_34_22_list = S.Modifier.get(o.data.chat, "users", []);
        if ((S.Modifier.count(l_for_popup_chatparty_34_22_list) > 0)) {
            for (var l_for_popup_chatparty_34_22_key in l_for_popup_chatparty_34_22_list) {
                if (!Surface.isValidLoopItem(l_for_popup_chatparty_34_22_list[l_for_popup_chatparty_34_22_key])) {
                    continue;
                }
                var l_user = l_for_popup_chatparty_34_22_list[l_for_popup_chatparty_34_22_key];
                c.push(' <div class="base-left" style="margin-right: 6px;">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_user,"gravatarSize": 30,"tipsyTitle": true}, null, kwargs));
                c.push("\n </div>\n");
            }
        }
        c.push(" </div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
popup.chatparty.block_footer = new Surface.Block("popup.chatparty.block_footer");
popup.chatparty.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.chat.chatId));
    c.push('" type="button" class="base-button-arrow-small-grey common-popup-close-button" value="');
    c.push(Surface.valOut("No thanks"));
    c.push('" /></div>\n <input style="float:right;margin-right:6px;" type="button" rel="');
    c.push(Surface.valOut(o.data.chat.chatId));
    c.push("\" class='base-button-arrow-small chat-party-join-button common-popup-close-button' value='");
    c.push(Surface.valOut("Join"));
    c.push('\' />\n </div>\n <div class="popup-sent-at">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.data.createdAt}, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
var block_popup_confirm = new Surface.BlockConfig("common.popup", {"footer": "popup.confirm.block_footer","content": "popup.confirm.block_content","title": "popup.confirm.block_title"});
popup.addTemplate(new Surface.Template("confirm"));
popup.confirm.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_confirm;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.confirm");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.confirm.block_title = new Surface.Block("popup.confirm.block_title");
popup.confirm.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Confirm ");
    c.push(Surface.valOut(S.Modifier.get(o.data, "action", "")));
    return c.join("");
};
popup.confirm.block_content = new Surface.Block("popup.confirm.block_content");
popup.confirm.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" Are you sure?\n");
    return c.join("");
};
popup.confirm.block_footer = new Surface.Block("popup.confirm.block_footer");
popup.confirm.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-reportabuse-buttons">\n <div style="float:right;"><input type="button" class="base-button-arrow-small-grey common-popup-close-button" value="Cancel" /></div>\n <input style="margin-right:6px;float:right;" type="button" class=\'base-button-arrow-small popup-reportabuse-button-send\' data-action="');
    c.push(Surface.valOut(S.Modifier.get(o.data, "url", "")));
    c.push("\" value='Yes' />\n </div>\n");
    return c.join("");
};
var block_popup_coopinvite = new Surface.BlockConfig("common.popup", {"footer": "popup.coopinvite.block_footer","content": "popup.coopinvite.block_content","title": "popup.coopinvite.block_title","extraCloseButtonClass": "popup.coopinvite.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("coopinvite"));
popup.coopinvite.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_coopinvite;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.coopinvite");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.coopinvite.block_title = new Surface.Block("popup.coopinvite.block_title");
popup.coopinvite.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("CO-OP invite");
    return c.join("");
};
popup.coopinvite.block_extraCloseButtonClass = new Surface.Block("popup.coopinvite.block_extraCloseButtonClass");
popup.coopinvite.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-coopinvite-declined-button");
    return c.join("");
};
popup.coopinvite.block_content = new Surface.Block("popup.coopinvite.block_content");
popup.coopinvite.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_missionNameSid;
    c.push('\n <div class="popup-gameinvite-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": o.data.owner}, null, kwargs));
    c.push('\n </div>\n <div rel="');
    c.push(Surface.valOut(o.data.id));
    c.push('" class="popup-coopinvite-content">\n <div class="popup-gameinvite-inviter">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.owner}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("invited you to play CO-OP mission"));
    c.push(' <br>\n </div>\n <div class="popup-gameinvite-servername">\n </div>\n <div class="popup-gameinvite-serverinfo-container">\n <div class="popup-gameinvite-serverinfo-map">\n <div class="base-left">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/base/bf3", "/map_images/62x42/"), S.Modifier.lower(o.data.level)), ".jpg"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n </div>\n <div class="popup-coop-info">\n');
    l_missionNameSid = S.Modifier.get($S.callFunction("coop.coopmission", o.data.level, b, kwargs), "title");
    c.push(' <span class="popup-coop-gameicon ');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.data.game, Surface.globalContext.staticContext.platforms.PC, 0, b, kwargs)));
    c.push('"></span>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext)));
    c.push('">');
    c.push(Surface.valOut((S.translations[l_missionNameSid] || l_missionNameSid)));
    c.push("</a>\n <br>\n ");
    c.push(Surface.valOut(S.Modifier.capitalize(S.Modifier.lower(o.data.difficulty))));
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="popup-sent-at">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.data.created}, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
popup.coopinvite.block_footer = new Surface.Block("popup.coopinvite.block_footer");
popup.coopinvite.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.id));
    c.push('" type="button" class="base-button-arrow-small-grey popup-coopinvite-declined-button common-popup-close-button" value="');
    c.push(Surface.valOut("No thanks"));
    c.push('" /></div>\n <input style="float:right;margin-right:6px;" type="button" rel="');
    c.push(Surface.valOut(o.data.id));
    c.push("\" class='base-button-arrow-small game-coop-join-button common-popup-close-button' value='");
    c.push(Surface.valOut("Join"));
    c.push("' />\n </div>\n");
    return c.join("");
};
var block_popup_coopkicked = new Surface.BlockConfig("common.popup", {"footer": "popup.coopkicked.block_footer","content": "popup.coopkicked.block_content","title": "popup.coopkicked.block_title"});
popup.addTemplate(new Surface.Template("coopkicked"));
popup.coopkicked.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_coopkicked;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.coopkicked");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
var block_popup_coopkicked_use_13_10 = new Surface.BlockConfig("common.focusbar", {"content": "popup.coopkicked._use_13_10_block_content","extraClass": "popup.coopkicked._use_13_10_block_extraClass"});
popup.coopkicked.block_title = new Surface.Block("popup.coopkicked.block_title");
popup.coopkicked.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("You were kicked"));
    return c.join("");
};
popup.coopkicked._use_13_10_block_extraClass = new Surface.Block("popup.coopkicked._use_13_10_block_extraClass");
popup.coopkicked._use_13_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-content");
    return c.join("");
};
popup.coopkicked._use_13_10_block_content = new Surface.Block("popup.coopkicked._use_13_10_block_content");
popup.coopkicked._use_13_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.valOut("From your CO-OP game"));
    c.push('\n <div class="popup-gameinvite-serverinfo">\n ');
    c.push(Surface.valOut("Ask for an invite again or close this."));
    c.push("\n </div>\n");
    return c.join("");
};
popup.coopkicked.block_content = new Surface.Block("popup.coopkicked.block_content");
popup.coopkicked.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": o.data.sender}, null, kwargs));
    c.push('\n </div>\n <div class="popoup-gameinvite-content">\n <div class="popup-gameinvite-inviter">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.sender}, null, kwargs));
    c.push(" kicked you <br>\n </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_popup_coopkicked_use_13_10, kwargs));
    c.push(' <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
popup.coopkicked.block_footer = new Surface.Block("popup.coopkicked.block_footer");
popup.coopkicked.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.sender.userId));
    c.push('" type="button" class="base-button-arrow-small-grey common-popup-close-button" value="');
    c.push(Surface.valOut("Close"));
    c.push('" /></div>\n </div>\n');
    return c.join("");
};
var block_popup_empty = new Surface.BlockConfig("", {});
popup.addTemplate(new Surface.Template("empty"));
popup.empty.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_empty;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.empty");
    return c.join("");
};
var block_popup_feedback = new Surface.BlockConfig("common.popup", {"content": "popup.feedback.block_content","title": "popup.feedback.block_title","footerContainer": "popup.feedback.block_footerContainer","extraClass": "popup.feedback.block_extraClass"});
popup.addTemplate(new Surface.Template("feedback"));
popup.feedback.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_feedback;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.feedback");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.feedback.block_title = new Surface.Block("popup.feedback.block_title");
popup.feedback.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Feedback"));
    return c.join("");
};
popup.feedback.block_extraClass = new Surface.Block("popup.feedback.block_extraClass");
popup.feedback.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("no-footer");
    return c.join("");
};
popup.feedback.block_content = new Surface.Block("popup.feedback.block_content");
popup.feedback.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-feedback-container">\n <div class="feedback-item">\n <script type="text/javascript">\n var lpMTagConfig = lpMTagConfig || {}; lpMTagConfig.vars = lpMTagConfig.vars || [];\n lpMTagConfig.deploymentID = "games-main";\n //PRODUCTION LIVEPERSON ACCOUNT Number- DO NOT ENABLE IN DEVELOPMENT!!! - lpMTagConfig.lpNumber = lpMTagConfig.lpNumber || "6657116";\n //Test Liveperson Account Number\n// lpMTagConfig.lpNumber = lpMTagConfig.lpNumber || "72884317";\n lpMTagConfig.lpNumber = lpMTagConfig.lpNumber || "6657116";\n if (!lpMTagConfig.containsUnit) {\n lpMTagConfig.vars.push(["page","unit",(window.lpUnit || "ea-support-us")]);\n }\n if (!lpMTagConfig.containsLanguage) {\n lpMTagConfig.vars.push(["session","language",(window.lpLanguage || "english")]);\n }\n lpMTagConfig.buttonNames = ["chat-games-main-en_US"];\n <\/script>\n <script type="text/javascript" src="/public/base/js/mtagconfig.js"><\/script>\n <script type="text/javascript">\n //Don\'t change this\n //Unit and Language Variables\n lpMTagConfig.vars.push(["page","unit","games-main"]);\n lpMTagConfig.vars.push(["session","language","english"]);\n lpMTagConfig.vars.push(["session","NucleusUserID","');
    c.push(Surface.valOut(o.nucleusId));
    c.push('"]);//\n lpMTagConfig.vars.push(["session","NucleusEmailID","');
    c.push(Surface.valOut(o.userEmail));
    c.push('"]);\n //Other variables\n //Scope is page by default\n lpMTagConfig.vars.push(["source","battlelog-en"]);\n lpMTagConfig.vars.push(["locale","en_US"]);\n if (typeof(lpMTagConfig.onLoadCode) == \'undefined\') {\n lpMTagConfig.onLoadCode=[];\n }\n <\/script>\n <a href="http://support.ea.com" target="_blank" class="feedback-item-heading">');
    c.push(Surface.valOut("Contact EA Customer Support"));
    c.push("</a>\n <p>");
    c.push(Surface.valOut("For Battlefield 3 technical support, items relating to account management, or questions about Origin, please visit"));
    c.push(' <a href="http://support.ea.com" target="_blank">support.ea.com</a>.\n <br/>\n ');
    c.push(Surface.valOut("Live chat is also available M-F from 08:00-19:00 CST."));
    c.push('\n </p>\n <div id="lpButton" style="display:block; position: absolute; bottom: 5px; margin: 20px 10px;" class="disabled base-button-arrow-large" >');
    c.push(Surface.valOut("Live Chat"));
    c.push('</div>\n <script type="text/javascript">\n lpMTagConfig.loadTag();\n setTimeout(function() {\n if($("#lpButton").children("a").hasClass("online"))\n {\n $("#lpButton").removeClass("disabled");\n }\n var lpButtonP = $("#lpButton").children("p");\n $("#lpButton").addClass("bubble-title").attr("title", lpButtonP.text());\n }, 5000);\n <\/script>\n </div>\n <div class="feedback-item last">\n ');
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.getSatisfaction) != "undefined" && o.getSatisfaction !== null) ? o.getSatisfaction : ""));
    c.push('\n <a href="http://getsatisfaction.com/login?company=battlefield3" target="_blank" class="feedback-item-heading">');
    c.push(Surface.valOut("BF3 Community Help & Feedback"));
    c.push("</a>\n <p>");
    c.push(Surface.valOut("Battlefield 3 and Battlelog bug reports, feature requests, network connectivity issues, or general feedback? Get answers from the Battlefield community (or provide some of your own) here. The DICE team is listening and participating, though we can't guarantee a response to every post."));
    c.push('</p>\n <a href="http://getsatisfaction.com/login?company=battlefield3" style="display:block; position: absolute; bottom: 5px; margin: 20px 10px" target="_blank" class="base-button-arrow-large">');
    c.push(Surface.valOut("Leave feedback"));
    c.push('</a>\n </div>\n <div style="clear:both;"></div>\n </div>\n');
    return c.join("");
};
popup.feedback.block_footerContainer = new Surface.Block("popup.feedback.block_footerContainer");
popup.feedback.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_popup_feedlikes = new Surface.BlockConfig("common.popup", {"footer": "popup.feedlikes.block_footer","content": "popup.feedlikes.block_content","title": "popup.feedlikes.block_title","extraClass": "popup.feedlikes.block_extraClass"});
popup.addTemplate(new Surface.Template("feedlikes"));
popup.feedlikes.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_feedlikes;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.feedlikes");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.feedlikes.block_title = new Surface.Block("popup.feedlikes.block_title");
popup.feedlikes.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.count(o.likeUsers)));
    c.push(" ");
    c.push(Surface.valOut("soldiers gave a hooah!"));
    return c.join("");
};
popup.feedlikes.block_extraClass = new Surface.Block("popup.feedlikes.block_extraClass");
popup.feedlikes.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("feed-showlikes-popup");
    return c.join("");
};
popup.feedlikes.block_content = new Surface.Block("popup.feedlikes.block_content");
popup.feedlikes.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_popup_feedlikes_8_6_list;
    c.push(' <div class="popup-feedlike-container">\n');
    l_for_popup_feedlikes_8_6_list = o.likeUsers;
    if ((S.Modifier.count(l_for_popup_feedlikes_8_6_list) > 0)) {
        for (var l_for_popup_feedlikes_8_6_key in l_for_popup_feedlikes_8_6_list) {
            if (!Surface.isValidLoopItem(l_for_popup_feedlikes_8_6_list[l_for_popup_feedlikes_8_6_key])) {
                continue;
            }
            var l_likeUser = l_for_popup_feedlikes_8_6_list[l_for_popup_feedlikes_8_6_key];
            c.push(' <div class="feed-showlikes-useritem">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_likeUser,"gravatarSize": 30}, null, kwargs));
            c.push("\n");
            c.push(Surface.importTemplate(("profile" + ("." + "avatarlink")), {"user": l_likeUser}, null, kwargs));
            c.push("\n");
            if (S.Modifier.get(o.requestMap, l_likeUser.userId)) {
                c.push(' <button class="base-button-addfriend-narrow feed-showlikes-addfriend" data-userid="');
                c.push(Surface.valOut(l_likeUser.userId));
                c.push('" data-path="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/requestFriendship/{id}/", Surface.urlContext, {"id": l_likeUser.userId})));
                c.push('">');
                c.push(Surface.valOut("Add"));
                c.push("</button>\n");
            }
            c.push(" </div>\n");
        }
    }
    c.push(" </div>\n");
    return c.join("");
};
popup.feedlikes.block_footer = new Surface.Block("popup.feedlikes.block_footer");
popup.feedlikes.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input type="button" class="base-button-arrow-small-grey common-popup-close-button" value="');
    c.push(Surface.valOut("Close"));
    c.push('" /></div>\n </div>\n');
    return c.join("");
};
var block_popup_gameinvite = new Surface.BlockConfig("common.popup", {"footer": "popup.gameinvite.block_footer","content": "popup.gameinvite.block_content","extraClassInner": "popup.gameinvite.block_extraClassInner","title": "popup.gameinvite.block_title","gameinvitePopupServerDivClass": "popup.gameinvite.block_gameinvitePopupServerDivClass","gameinvitePopupInvitetext": "popup.gameinvite.block_gameinvitePopupInvitetext","extraCloseButtonClass": "popup.gameinvite.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("gameinvite"));
popup.gameinvite.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_gameinvite;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.gameinvite");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.gameinvite.block_title = new Surface.Block("popup.gameinvite.block_title");
popup.gameinvite.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Server invite");
    return c.join("");
};
popup.gameinvite.block_extraClassInner = new Surface.Block("popup.gameinvite.block_extraClassInner");
popup.gameinvite.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-height");
    return c.join("");
};
popup.gameinvite.block_extraCloseButtonClass = new Surface.Block("popup.gameinvite.block_extraCloseButtonClass");
popup.gameinvite.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-declined-button");
    return c.join("");
};
popup.gameinvite.block_gameinvitePopupInvitetext = new Surface.Block("popup.gameinvite.block_gameinvitePopupInvitetext");
popup.gameinvite.block_gameinvitePopupInvitetext.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("invited you to the server:"));
    return c.join("");
};
popup.gameinvite.block_gameinvitePopupServerDivClass = new Surface.Block("popup.gameinvite.block_gameinvitePopupServerDivClass");
popup.gameinvite.block_gameinvitePopupServerDivClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-groupjoininvite-content");
    return c.join("");
};
popup.gameinvite.block_content = new Surface.Block("popup.gameinvite.block_content");
popup.gameinvite.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_mapinfo;
    c.push(' <div class="popup-gameinvite-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": o.data.fromUser}, null, kwargs));
    c.push('\n </div>\n <div class="popup-gameinvite-content">\n <div class="popup-gameinvite-inviter">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.fromUser}, null, kwargs));
    c.push(" ");
    c.push(b.get("gameinvitePopupInvitetext")(o, b, kwargs));
    c.push('<br>\n </div>\n <div rel="');
    c.push(Surface.valOut(o.data.fromUser.userId));
    c.push('" class="');
    c.push(b.get("gameinvitePopupServerDivClass")(o, b, kwargs));
    c.push('">\n');
    if (S.Modifier.get(o.data, "server", false)) {
        l_mapinfo = $S.callFunction("serverguide.mapinfo", o.data.server.game, o.data.server.map, b, kwargs);
        c.push(' <input type="hidden" class="serverguide-show-url" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.data.server.guid})));
        c.push('?json=1" />\n <div class="popup-gameinvite-servername">\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.data.server.guid, o.data.server.name, b, kwargs)));
        c.push('"> ');
        c.push(Surface.valOut(S.Modifier.truncate(o.data.server.name, 200)));
        c.push('</a>\n </div>\n <div class="popup-gameinvite-serverinfo-container">\n <div class="popup-gameinvite-serverinfo-map">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.get(l_mapinfo, "imageSmall"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" title="');
        c.push(Surface.valOut(S.Modifier.get(l_mapinfo, "name")));
        c.push('" alt="');
        c.push(Surface.valOut(S.Modifier.get(l_mapinfo, "name")));
        c.push('" /></div>\n <div class="popup-gameinvite-serverinfo">\n <div class="popup-gameinvite-serverinfo-firstrow">\n <div class="popup-gameinvite-serverinfo-gameicon">\n <span class="left ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.data.server.game, Surface.globalContext.staticContext.platforms.PC, 0, b, kwargs)));
        c.push('"></span>\n </div>\n <span class="popup-gameinvite-bull">&bull;</span>\n');
        if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.niceGameModeMap) != "undefined" && Surface.globalContext.staticContext.niceGameModeMap !== null)) {
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, o.data.server.mapMode)));
            c.push('\n <span class="popup-gameinvite-bull">&bull;</span>\n');
        }
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.toint(o.data.server.numPlayers)));
        c.push("/");
        c.push(Surface.valOut(o.data.server.maxPlayers));
        c.push(' players\n </div>\n <div>\n <span class="ping-');
        c.push(Surface.valOut(o.data.server.name));
        c.push('">- ms</span>\n <span class="popup-gameinvite-bull">&bull;</span>\n Punkbuster: ');
        if (o.data.server.punkbuster) {
            c.push("On");
        } else {
            c.push("Off");
        }
        c.push('\n <span class="popup-gameinvite-bull">&bull;</span>\n ');
        if (o.data.server.ranked) {
            c.push("Ranked");
        } else {
            c.push("Unranked");
        }
        c.push('\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n');
    }
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="popup-sent-at">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.data.createdAt}, null, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
popup.gameinvite.block_footer = new Surface.Block("popup.gameinvite.block_footer");
popup.gameinvite.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.fromUserId));
    c.push('" type="button" class="base-button-arrow-small-grey popup-gameinvite-declined-button common-popup-close-button" value="Decline" /></div>\n <div rel="');
    c.push(Surface.valOut(o.data.fromUserId));
    c.push('" class="popup-gameinvite-accepted-button" style="float:right;margin-right:6px;">\n <form class="join-friend" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"_section": $S.callFunction("base.game", o.data.server.game, b, kwargs),"guid": o.data.server.guid})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="game" value="');
    c.push(Surface.valOut(o.data.server.game));
    c.push('" />\n <input type="hidden" name="friendPersonaId" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.fromUser) != "undefined" && o.data.fromUser !== null && typeof (o.data.fromUser.presence) != "undefined" && o.data.fromUser.presence !== null && typeof (o.data.fromUser.presence.personaId) != "undefined" && o.data.fromUser.presence.personaId !== null) ? o.data.fromUser.presence.personaId : 0)));
    c.push('" />\n <input type="hidden" name="guid" value="');
    c.push(Surface.valOut(o.data.server.guid));
    c.push('" />\n <input type="submit" class="base-button-arrow-small" name="submit" value="');
    c.push(Surface.valOut("Join"));
    c.push('" />\n </form>\n </div>\n </div>\n');
    return c.join("");
};
var block_popup_groupjoininvite = new Surface.BlockConfig("popup.gameinvite", {"footer": "popup.groupjoininvite.block_footer","extraClassInner": "popup.groupjoininvite.block_extraClassInner","title": "popup.groupjoininvite.block_title","gameinvitePopupServerDivClass": "popup.groupjoininvite.block_gameinvitePopupServerDivClass","gameinvitePopupInvitetext": "popup.groupjoininvite.block_gameinvitePopupInvitetext","extraCloseButtonClass": "popup.groupjoininvite.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("groupjoininvite"));
popup.groupjoininvite.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_groupjoininvite;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.groupjoininvite");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("popup.gameinvite", o, b, kwargs);
};
popup.groupjoininvite.block_title = new Surface.Block("popup.groupjoininvite.block_title");
popup.groupjoininvite.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Party Join invite");
    return c.join("");
};
popup.groupjoininvite.block_extraClassInner = new Surface.Block("popup.groupjoininvite.block_extraClassInner");
popup.groupjoininvite.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-height");
    return c.join("");
};
popup.groupjoininvite.block_extraCloseButtonClass = new Surface.Block("popup.groupjoininvite.block_extraCloseButtonClass");
popup.groupjoininvite.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-groupjoininvite-declined-button");
    return c.join("");
};
popup.groupjoininvite.block_gameinvitePopupInvitetext = new Surface.Block("popup.groupjoininvite.block_gameinvitePopupInvitetext");
popup.groupjoininvite.block_gameinvitePopupInvitetext.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if (S.Modifier.get(o.data, "server", false)) {
        c.push(" ");
        c.push(Surface.valOut("invited your Party to Join the server:"));
        c.push("\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut("invited your Party to a Quick Match"));
        c.push("\n");
    }
    return c.join("");
};
popup.groupjoininvite.block_gameinvitePopupServerDivClass = new Surface.Block("popup.groupjoininvite.block_gameinvitePopupServerDivClass");
popup.groupjoininvite.block_gameinvitePopupServerDivClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-groupjoininvite-content");
    return c.join("");
};
popup.groupjoininvite.block_footer = new Surface.Block("popup.groupjoininvite.block_footer");
popup.groupjoininvite.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.fromUser.userId));
    c.push('" type="button" class="base-button-arrow-small-grey popup-groupjoininvite-declined-button common-popup-close-button" value="');
    c.push(Surface.valOut("No thanks"));
    c.push('" /></div>\n <div style="float:right;margin-right:6px;"><input rel="');
    c.push(Surface.valOut(o.data.fromUser.userId));
    c.push('" type="button" class="popup-groupjoininvite-accepted-button base-button-arrow-small common-popup-close-button" name="submit" value="');
    c.push(Surface.valOut("Accept"));
    c.push('" /></div>\n </div>\n');
    return c.join("");
};
var block_popup_installstate = new Surface.BlockConfig("common.popup", {"content": "popup.installstate.block_content","title": "popup.installstate.block_title","footerContainer": "popup.installstate.block_footerContainer"});
popup.addTemplate(new Surface.Template("installstate"));
popup.installstate.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_installstate;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.installstate");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.installstate.block_title = new Surface.Block("popup.installstate.block_title");
popup.installstate.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Updating");
    return c.join("");
};
popup.installstate.block_content = new Surface.Block("popup.installstate.block_content");
popup.installstate.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" <p>\n installState: ");
    c.push(Surface.valOut(o.data.installState.name));
    c.push("<br>\n sku: ");
    c.push(Surface.valOut(o.data.installState.sku));
    c.push("<br><br>\n");
    if (((o.data.installState.sku == "dice") && (o.data.installState.name == "OUT_OF_DATE"))) {
        c.push(' Game not up to date.<br><br>\n <p>\n Use this <a href="frankenbuild:');
        c.push(Surface.valOut(o.data.installState.skuPatchInfo.build));
        c.push('" target="_blank">Frankenbuild</a> link to install new build.\n </p>\n <p>\n <em style="font-size:12px;">(You may need to start Frankenbuild manually before this link will work).</em>\n </p>\n');
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.installState) != "undefined" && o.data.installState !== null && typeof (o.data.installState.skuPatchInfo) != "undefined" && o.data.installState.skuPatchInfo !== null && typeof (o.data.installState.skuPatchInfo.build) != "undefined" && o.data.installState.skuPatchInfo.build !== null)) {
            c.push(" Please install build with id: ");
            c.push(Surface.valOut(o.data.installState.skuPatchInfo.build));
            c.push(".\n");
        } else {
            c.push(" Please refer to the playtest mail which build to install, and do so manually through Frankenbuild.\n");
        }
    }
    c.push(" </p>\n");
    return c.join("");
};
popup.installstate.block_footerContainer = new Surface.Block("popup.installstate.block_footerContainer");
popup.installstate.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_popup_intro = new Surface.BlockConfig("common.popup", {"footer": "popup.intro.block_footer","extraClassInner": "popup.intro.block_extraClassInner","extraClass": "popup.intro.block_extraClass"});
popup.addTemplate(new Surface.Template("intro"));
var block_popup_introMain = new Surface.BlockConfig("popup.intro", {"content": "popup.introMain.block_content","title": "popup.introMain.block_title","popupId": "popup.introMain.block_popupId"});
popup.addTemplate(new Surface.Template("introMain"));
var block_popup_introPlatoon = new Surface.BlockConfig("popup.intro", {"content": "popup.introPlatoon.block_content","title": "popup.introPlatoon.block_title","popupId": "popup.introPlatoon.block_popupId"});
popup.addTemplate(new Surface.Template("introPlatoon"));
var block_popup_introProfile = new Surface.BlockConfig("popup.intro", {"content": "popup.introProfile.block_content","title": "popup.introProfile.block_title","popupId": "popup.introProfile.block_popupId"});
popup.addTemplate(new Surface.Template("introProfile"));
var block_popup_introServerguide = new Surface.BlockConfig("popup.intro", {"content": "popup.introServerguide.block_content","title": "popup.introServerguide.block_title","popupId": "popup.introServerguide.block_popupId"});
popup.addTemplate(new Surface.Template("introServerguide"));
var block_popup_joinpartygame = new Surface.BlockConfig("common.popup", {"footer": "popup.joinpartygame.block_footer","content": "popup.joinpartygame.block_content","extraClassInner": "popup.joinpartygame.block_extraClassInner","title": "popup.joinpartygame.block_title","extraCloseButtonClass": "popup.joinpartygame.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("joinpartygame"));
popup.joinpartygame.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_joinpartygame;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.joinpartygame");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.joinpartygame.block_title = new Surface.Block("popup.joinpartygame.block_title");
popup.joinpartygame.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Party Members playing"));
    return c.join("");
};
popup.joinpartygame.block_extraCloseButtonClass = new Surface.Block("popup.joinpartygame.block_extraCloseButtonClass");
popup.joinpartygame.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.joinpartygame.block_extraClassInner = new Surface.Block("popup.joinpartygame.block_extraClassInner");
popup.joinpartygame.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-party-confirm-height");
    return c.join("");
};
popup.joinpartygame.block_content = new Surface.Block("popup.joinpartygame.block_content");
popup.joinpartygame.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_server;
    var l_for_popup_joinpartygame_21_22_count;
    var l_for_popup_joinpartygame_21_22_hasNext;
    var l_for_popup_joinpartygame_21_22_list;
    var l_for_popup_joinpartygame_21_22_iteration;
    var l_for_popup_joinpartygame_31_22_list;
    c.push("\n");
    l_server = S.Modifier.get(S.Modifier.get(o.data.playing, 0), "presence");
    c.push(' <div class="popup-party-icon"></div>\n <div class="popup-party-content">\n <div class="popup-party-confirm-title">\n ');
    c.push(Surface.valOut("Would you like to to join their game instead?"));
    c.push('\n </div>\n <div class="base-clear"></div>\n <div class="base-left">\n');
    if ((S.Modifier.count(o.data.playing) > 0)) {
        c.push(' <div class="popup-party-usernames">\n');
        l_for_popup_joinpartygame_21_22_list = o.data.playing;
        l_for_popup_joinpartygame_21_22_count = S.Modifier.count(l_for_popup_joinpartygame_21_22_list);
        l_for_popup_joinpartygame_21_22_iteration = 0;
        if ((S.Modifier.count(l_for_popup_joinpartygame_21_22_list) > 0)) {
            for (var l_for_popup_joinpartygame_21_22_key in l_for_popup_joinpartygame_21_22_list) {
                if (!Surface.isValidLoopItem(l_for_popup_joinpartygame_21_22_list[l_for_popup_joinpartygame_21_22_key])) {
                    continue;
                }
                var l_user = l_for_popup_joinpartygame_21_22_list[l_for_popup_joinpartygame_21_22_key];
                l_for_popup_joinpartygame_21_22_iteration = (l_for_popup_joinpartygame_21_22_iteration + 1);
                l_for_popup_joinpartygame_21_22_hasNext = (l_for_popup_joinpartygame_21_22_iteration < l_for_popup_joinpartygame_21_22_count);
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "link")), {"username": l_user.username}, null, kwargs));
                c.push("\n");
                if ((l_for_popup_joinpartygame_21_22_iteration == (S.Modifier.count(o.data.playing) - 1))) {
                    c.push(" and\n");
                } else {
                    if (l_for_popup_joinpartygame_21_22_hasNext) {
                        c.push(" ,\n");
                    }
                }
            }
        }
        c.push(' </div>\n <div class="popup-party-avatars">\n');
        l_for_popup_joinpartygame_31_22_list = o.data.playing;
        if ((S.Modifier.count(l_for_popup_joinpartygame_31_22_list) > 0)) {
            for (var l_for_popup_joinpartygame_31_22_key in l_for_popup_joinpartygame_31_22_list) {
                if (!Surface.isValidLoopItem(l_for_popup_joinpartygame_31_22_list[l_for_popup_joinpartygame_31_22_key])) {
                    continue;
                }
                var l_user = l_for_popup_joinpartygame_31_22_list[l_for_popup_joinpartygame_31_22_key];
                c.push(' <div class="base-left" style="margin-right: 6px;">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_user,"gravatarSize": 30,"tipsyTitle": true}, null, kwargs));
                c.push("\n </div>\n");
            }
        }
        c.push(" </div>\n");
    }
    c.push(' </div>\n <div class="popup-party-confirm-divider"></div>\n <div class="popup-party-confirm-subtitle">\n Currently playing on <a href="');
    c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_server.serverGuid, l_server.serverName, b, kwargs)));
    c.push('"> ');
    c.push(Surface.valOut(S.Modifier.truncate(l_server.serverName, 200)));
    c.push("</a>\n </div>\n");
    c.push(' <input type="hidden" class="serverguide-show-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": l_server.serverGuid})));
    c.push('?json=1" />\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
popup.joinpartygame.block_footer = new Surface.Block("popup.joinpartygame.block_footer");
popup.joinpartygame.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_server;
    l_server = S.Modifier.get(S.Modifier.get(o.data.playing, 0), "presence");
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input type="button" class="base-button-arrow-small-grey chat-party-create-join-button common-popup-close-button" value="');
    c.push(Surface.valOut("No thanks"));
    c.push('" /></div>\n <div style="float:right;margin-right:6px;">\n <form class="join-friend" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"slug": l_server.serverName,"_section": $S.callFunction("base.game", l_server.game, b, kwargs),"guid": l_server.serverGuid})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="game" value="');
    c.push(Surface.valOut(l_server.game));
    c.push('" />\n <input type="hidden" name="friendPersonaId" value="');
    c.push(Surface.valOut(((typeof (l_server) != "undefined" && l_server !== null && typeof (l_server.personaId) != "undefined" && l_server.personaId !== null) ? l_server.personaId : 0)));
    c.push('" />\n <input type="hidden" name="guid" value="');
    c.push(Surface.valOut(l_server.serverGuid));
    c.push('" />\n <input type="submit" class="base-button-arrow-small" name="submit" value="');
    c.push(Surface.valOut("Join"));
    c.push('" />\n </form>\n </div>\n </div>\n');
    return c.join("");
};
var block_popup_login = new Surface.BlockConfig("common.popup", {"content": "popup.login.block_content","title": "popup.login.block_title","footerContainer": "popup.login.block_footerContainer"});
popup.addTemplate(new Surface.Template("login"));
popup.login.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_login;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.login");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.login.block_title = new Surface.Block("popup.login.block_title");
popup.login.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Please log in"));
    return c.join("");
};
popup.login.block_content = new Surface.Block("popup.login.block_content");
popup.login.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <form id="joinflow-loginpopup-form" class=".popup-loginpopup-form" action="');
    if (Surface.globalContext.staticContext.sslAvailable) {
        c.push(Surface.valOut(Surface.globalContext.staticContext.currentHostSecure));
    }
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/login/", Surface.urlContext)));
    c.push('" method="POST">\n <h2>Use your <span>EA Account</span> to login</h2>\n <label for="popup-login-email">');
    c.push(Surface.valOut("Email"));
    c.push('</label>\n <input type="email" name="email" id="popup-login-email" value="" />\n <div class="base-clear"></div>\n <label for="popup-login-password">');
    c.push(Surface.valOut("Password"));
    c.push('</label>\n <input type="password" name="password" id="popup-login-password" value="" />\n <input style="margin-top: 16px;margin-bottom:20px" type="submit" value="Login" class="base-button-arrow-large" />\n <br><a id="joinflow-registration" style="margin-left:90px" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/registration/", Surface.urlContext)));
    c.push('">Register an Account</a>\n </form>\n');
    return c.join("");
};
popup.login.block_footerContainer = new Surface.Block("popup.login.block_footerContainer");
popup.login.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_popup_movethread = new Surface.BlockConfig("common.popup", {"footer": "popup.movethread.block_footer","content": "popup.movethread.block_content","extraClassInner": "popup.movethread.block_extraClassInner","title": "popup.movethread.block_title"});
popup.addTemplate(new Surface.Template("movethread"));
popup.movethread.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_movethread;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.movethread");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.movethread.block_title = new Surface.Block("popup.movethread.block_title");
popup.movethread.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Move thread");
    return c.join("");
};
popup.movethread.block_extraClassInner = new Surface.Block("popup.movethread.block_extraClassInner");
popup.movethread.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-movethread-content");
    return c.join("");
};
popup.movethread.block_content = new Surface.Block("popup.movethread.block_content");
popup.movethread.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_popup_movethread_14_18_list;
    var l_for_popup_movethread_16_26_list;
    c.push(" <div>");
    c.push(Surface.valOut(o.thread.title));
    c.push('</div>\n <form method="POST" id="popup-movethread-form" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/forum/moveThreadDo/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="id" value="');
    c.push(Surface.valOut(o.thread.id));
    c.push('" />\n <label>\n <span>Select forum</span>\n <select name="forumId">\n');
    l_for_popup_movethread_14_18_list = o.categories;
    if ((S.Modifier.count(l_for_popup_movethread_14_18_list) > 0)) {
        for (var l_for_popup_movethread_14_18_key in l_for_popup_movethread_14_18_list) {
            if (!Surface.isValidLoopItem(l_for_popup_movethread_14_18_list[l_for_popup_movethread_14_18_key])) {
                continue;
            }
            var l_category = l_for_popup_movethread_14_18_list[l_for_popup_movethread_14_18_key];
            c.push(' <optgroup label="');
            c.push(Surface.valOut(l_category.title));
            c.push('">\n');
            l_for_popup_movethread_16_26_list = l_category.forums;
            if ((S.Modifier.count(l_for_popup_movethread_16_26_list) > 0)) {
                for (var l_for_popup_movethread_16_26_key in l_for_popup_movethread_16_26_list) {
                    if (!Surface.isValidLoopItem(l_for_popup_movethread_16_26_list[l_for_popup_movethread_16_26_key])) {
                        continue;
                    }
                    var l_forum = l_for_popup_movethread_16_26_list[l_for_popup_movethread_16_26_key];
                    c.push(' <option value="');
                    c.push(Surface.valOut(l_forum.id));
                    c.push('" ');
                    if ((l_forum.id == o.thread.forumId)) {
                        c.push(" selected");
                    }
                    c.push(">");
                    c.push(Surface.valOut(l_forum.title));
                    c.push("</option>\n");
                }
            }
            c.push(" </optgroup>\n");
        }
    }
    c.push(" </select>\n </label>\n </form>\n");
    return c.join("");
};
popup.movethread.block_footer = new Surface.Block("popup.movethread.block_footer");
popup.movethread.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-movethread-footer">\n <input type="button" id="popup-movethread-submit" class="base-button-arrow-small" value="Move" />\n <input type="button" id="popup-movethread-close" class="base-button-arrow-small-grey common-popup-close-button" name="cancel" value="Cancel" />\n </div>\n');
    return c.join("");
};
var block_popup_partychange = new Surface.BlockConfig("common.popup", {"footer": "popup.partychange.block_footer","content": "popup.partychange.block_content","title": "popup.partychange.block_title","extraCloseButtonClass": "popup.partychange.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("partychange"));
popup.partychange.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_partychange;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.partychange");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.position) != "undefined" && o.data.position !== null)) {
        o.position = o.data.position;
    }
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.partychange.block_title = new Surface.Block("popup.partychange.block_title");
popup.partychange.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Confirm change of Party");
    return c.join("");
};
popup.partychange.block_extraCloseButtonClass = new Surface.Block("popup.partychange.block_extraCloseButtonClass");
popup.partychange.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.partychange.block_content = new Surface.Block("popup.partychange.block_content");
popup.partychange.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="joinflow-plugin-missing" class="popup-party-invite">\n <div class="popup-party-logo"></div>\n <div id="joinflow-getplugin">\n <h2>Do you really want to change Party?</h2>\n <p>By changing you will leave your current Party</p>\n </div>\n </div>\n');
    return c.join("");
};
popup.partychange.block_footer = new Surface.Block("popup.partychange.block_footer");
popup.partychange.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input type="button" class="base-button-arrow-small-grey common-popup-close-button" value="No" /></div>\n <input style="float:right;margin-right:6px;" data-chatId="');
    c.push(Surface.valOut(S.Modifier.get(o.data, "chatId", "")));
    c.push('" type="button" id="partypopup-continuebutton" class=\'base-button-arrow-small common-popup-close-button\' value=\'Yes\' />\n </div>\n');
    return c.join("");
};
var block_popup_platooninviterequest = new Surface.BlockConfig("common.popup", {"footer": "popup.platooninviterequest.block_footer","content": "popup.platooninviterequest.block_content","extraClassInner": "popup.platooninviterequest.block_extraClassInner","title": "popup.platooninviterequest.block_title","extraCloseButtonClass": "popup.platooninviterequest.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("platooninviterequest"));
popup.platooninviterequest.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_platooninviterequest;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.platooninviterequest");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
var block_popup_platooninviterequest_use_24_10 = new Surface.BlockConfig("common.focusbar", {"content": "popup.platooninviterequest._use_24_10_block_content","extraClass": "popup.platooninviterequest._use_24_10_block_extraClass"});
popup.platooninviterequest.block_title = new Surface.Block("popup.platooninviterequest.block_title");
popup.platooninviterequest.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Platoon Invitation");
    return c.join("");
};
popup.platooninviterequest.block_extraClassInner = new Surface.Block("popup.platooninviterequest.block_extraClassInner");
popup.platooninviterequest.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-platooninvite-height");
    return c.join("");
};
popup.platooninviterequest.block_extraCloseButtonClass = new Surface.Block("popup.platooninviterequest.block_extraCloseButtonClass");
popup.platooninviterequest.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-platooninvite-declined-button");
    return c.join("");
};
popup.platooninviterequest._use_24_10_block_extraClass = new Surface.Block("popup.platooninviterequest._use_24_10_block_extraClass");
popup.platooninviterequest._use_24_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-platooninvite-content");
    return c.join("");
};
popup.platooninviterequest._use_24_10_block_content = new Surface.Block("popup.platooninviterequest._use_24_10_block_content");
popup.platooninviterequest._use_24_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_platoon;
    var l_body;
    l_body = S.Modifier.jsonDecode(o.data.body);
    l_platoon = l_body.platoon;
    c.push(' <div class="popup-platooninvite-platooninfo-container">\n <div class="popup-platooninvite-platoonname">\n ');
    c.push(Surface.valOut(l_platoon.name));
    c.push('\n </div>\n <div class="popup-platooninvite-platooninfo">\n <div class="platoon-info">\n <div class="platoon-info-line">\n <span class="platoon-info-line-name">Tag:</span>\n <span class="platoon-info-line-value">[');
    c.push(Surface.valOut(l_platoon.tag));
    c.push("]</span>\n");
    if (l_platoon.website) {
        c.push(' <span class="platoon-info-line-name">');
        c.push(Surface.valOut("Web"));
        c.push(':</span>\n <span class="platoon-info-line-value">');
        if (l_platoon.website) {
            c.push('<a href="http://');
            c.push(Surface.valOut(l_platoon.website));
            c.push('" target="_blank">Official website</a>');
        }
        c.push("</span>\n");
    }
    c.push('\n <span class="platoon-info-line-name">');
    c.push(Surface.valOut("Fans"));
    c.push(':</span>\n <span class="platoon-info-line-value"><a href=\'');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"menu": "listfans","id": l_platoon.id,"membershipLevels": o.membershipLevels})));
    c.push("'>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.count(l_platoon.fans), " ")));
    c.push("</a></span>\n </div>\n </div>\n </div>\n </div>\n");
    return c.join("");
};
popup.platooninviterequest.block_content = new Surface.Block("popup.platooninviterequest.block_content");
popup.platooninviterequest.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-platooninvite-avatar">\n </div>\n <div class="popoup-platooninvite-content">\n <div class="popup-sent-at">\n </div>\n <div class="popup-platooninvite-inviter">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.sender}, null, kwargs));
    c.push(" invited you to join a platoon:\n </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_popup_platooninviterequest_use_24_10, kwargs));
    c.push(' <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
popup.platooninviterequest.block_footer = new Surface.Block("popup.platooninviterequest.block_footer");
popup.platooninviterequest.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_platoon;
    var l_body;
    l_body = S.Modifier.jsonDecode(o.data.body);
    l_platoon = l_body.platoon;
    c.push(' <div class="popup-platooninvite-buttons">\n <div class="base-button-100x24 platoon-top-actions-button platoon-accept-invite" platoonId="');
    c.push(Surface.valOut(l_platoon.id));
    c.push('" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/acceptinvite/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.valOut("Accept invitation"));
    c.push('\n </div>\n <div class="base-button-100x24-grey platoon-top-actions-button platoon-decline-invite" platoonId="');
    c.push(Surface.valOut(l_platoon.id));
    c.push('" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/declineinvite/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.valOut("Decline invitation"));
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
var block_popup_profileSoldierImage = new Surface.BlockConfig("common.popup", {"content": "popup.profileSoldierImage.block_content","title": "popup.profileSoldierImage.block_title","footerContainer": "popup.profileSoldierImage.block_footerContainer","extraClass": "popup.profileSoldierImage.block_extraClass"});
popup.addTemplate(new Surface.Template("profileSoldierImage"));
popup.profileSoldierImage.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_profileSoldierImage;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.profileSoldierImage");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.profileSoldierImage.block_title = new Surface.Block("popup.profileSoldierImage.block_title");
popup.profileSoldierImage.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Select soldier portrait"));
    return c.join("");
};
popup.profileSoldierImage.block_extraClass = new Surface.Block("popup.profileSoldierImage.block_extraClass");
popup.profileSoldierImage.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-soldierportrait");
    return c.join("");
};
popup.profileSoldierImage.block_content = new Surface.Block("popup.profileSoldierImage.block_content");
popup.profileSoldierImage.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="soldierportraits-container">\n <input type="hidden" id="soldier" value="');
    c.push(Surface.valOut(o.data.soldierId));
    c.push('">\n <ul class="original available">\n <li id="bf3-us-assault" class="selected"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-us-assault.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-us-support"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-us-support.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-us-engineer"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-us-engineer.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-us-recon"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-us-recon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-ru-assault" class="selected"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-ru-assault.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-ru-support"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-ru-support.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-ru-engineer"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-ru-engineer.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n <li id="bf3-ru-recon"><img width="106" height="120" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/kits/m/bf3-ru-recon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" /> </li>\n </ul>\n </div>\n');
    return c.join("");
};
popup.profileSoldierImage.block_footerContainer = new Surface.Block("popup.profileSoldierImage.block_footerContainer");
popup.profileSoldierImage.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <form>\n <input type="submit" value="Choose" class="base-button-arrow-small" />\n </form>\n');
    return c.join("");
};
var block_popup_question = new Surface.BlockConfig("common.popup", {"footer": "popup.question.block_footer","content": "popup.question.block_content","title": "popup.question.block_title","extraCloseButtonClass": "popup.question.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("question"));
popup.question.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_question;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.question");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.position) != "undefined" && o.data.position !== null)) {
        o.position = o.data.position;
    }
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.question.block_title = new Surface.Block("popup.question.block_title");
popup.question.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.get(o.data, "title", "Are you sure?")));
    return c.join("");
};
popup.question.block_extraCloseButtonClass = new Surface.Block("popup.question.block_extraCloseButtonClass");
popup.question.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.question.block_content = new Surface.Block("popup.question.block_content");
popup.question.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-prompt">\n <div class="popup-prompt-logo"></div>\n <div class="popup-prompt-body">\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.questionType) != "undefined" && o.data.questionType !== null) ? o.data.questionType : "") == "GAMEMANAGER_CLOSE_GAME_QUESTION")) {
        c.push(" <h2>");
        c.push(Surface.valOut("Are you sure you want to leave the game?"));
        c.push("</h2>\n <p>");
        c.push(Surface.valOut("This will close the game."));
        c.push("</p>\n");
    } else {
        c.push(" <h2>");
        c.push(Surface.valOut(S.Modifier.get(o.data, "header", "This action can not be undone.")));
        c.push("</h2>\n <p>");
        c.push(Surface.valOut(S.Modifier.get(o.data, "body", "This action can not be undone.")));
        c.push("</p>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
popup.question.block_footer = new Surface.Block("popup.question.block_footer");
popup.question.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-prompt-buttons">\n <div style="float:right;"><input type="button" class="base-button-arrow-small-grey common-popup-close-button" value="');
    c.push(Surface.valOut("No"));
    c.push('" /></div>\n <input style="float:right;margin-right:6px;" type="button" class=\'base-button-arrow-small popup-prompt-button-continue\' value=\'');
    c.push(Surface.valOut("Yes"));
    c.push("' />\n </div>\n");
    return c.join("");
};
var block_popup_reportabuse = new Surface.BlockConfig("common.popup", {"footer": "popup.reportabuse.block_footer","content": "popup.reportabuse.block_content","title": "popup.reportabuse.block_title","extraCloseButtonClass": "popup.reportabuse.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("reportabuse"));
popup.reportabuse.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_reportabuse;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.reportabuse");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.data) != "undefined" && o.data !== null && typeof (o.data.position) != "undefined" && o.data.position !== null)) {
        o.position = o.data.position;
    }
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.reportabuse.block_title = new Surface.Block("popup.reportabuse.block_title");
popup.reportabuse.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.get(o.data, "title", "Report")));
    return c.join("");
};
popup.reportabuse.block_extraCloseButtonClass = new Surface.Block("popup.reportabuse.block_extraCloseButtonClass");
popup.reportabuse.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.reportabuse.block_content = new Surface.Block("popup.reportabuse.block_content");
popup.reportabuse.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-reportabuse">\n <div class="popup-reportabuse-body">\n <textarea name="reason" class="popup-reportabuse-body-text"></textarea>\n </div>\n <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
popup.reportabuse.block_footer = new Surface.Block("popup.reportabuse.block_footer");
popup.reportabuse.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-reportabuse-buttons">\n <input style="float:right;" type="button" class=\'base-button-arrow-small popup-reportabuse-button-send\' data-action="');
    c.push(Surface.valOut(S.Modifier.get(o.data, "url", "")));
    c.push('" value=\'Send\' />\n <div style="margin-right:6px;float:right;"><input type="button" class="base-button-arrow-small-grey common-popup-close-button" value="Cancel" /></div>\n </div>\n');
    return c.join("");
};
var block_popup_selectlang = new Surface.BlockConfig("common.popup", {"footer": "popup.selectlang.block_footer","content": "popup.selectlang.block_content","extraClassInner": "popup.selectlang.block_extraClassInner","title": "popup.selectlang.block_title"});
popup.addTemplate(new Surface.Template("selectlang"));
popup.selectlang.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_selectlang;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.selectlang");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.selectlang.block_title = new Surface.Block("popup.selectlang.block_title");
popup.selectlang.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Select language"));
    return c.join("");
};
popup.selectlang.block_extraClassInner = new Surface.Block("popup.selectlang.block_extraClassInner");
popup.selectlang.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-selectlang");
    return c.join("");
};
popup.selectlang.block_content = new Surface.Block("popup.selectlang.block_content");
popup.selectlang.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_language;
    var l_for_popup_selectlang_8_14_list;
    c.push(' <form method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/setLanguage/{lang}/", Surface.urlContext)));
    c.push('" id="popup-selectlang-form">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push("\n");
    l_for_popup_selectlang_8_14_list = Surface.globalContext.staticContext.languages;
    if ((S.Modifier.count(l_for_popup_selectlang_8_14_list) > 0)) {
        for (var l_for_popup_selectlang_8_14_key in l_for_popup_selectlang_8_14_list) {
            if (!Surface.isValidLoopItem(l_for_popup_selectlang_8_14_list[l_for_popup_selectlang_8_14_key])) {
                continue;
            }
            var l_l = l_for_popup_selectlang_8_14_list[l_for_popup_selectlang_8_14_key];
            c.push(' <div class="popup-selectlang-language">\n');
            l_language = l_l.lang;
            c.push(' <input type="radio" name="lang" value="');
            c.push(Surface.valOut(l_language));
            c.push('" id="language-select-');
            c.push(Surface.valOut(l_language));
            c.push('"');
            if ((Surface.globalContext.staticContext.preferredLang == l_language)) {
                c.push(" checked");
            }
            c.push('>\n <label for="language-select-');
            c.push(Surface.valOut(l_language));
            c.push('">\n ');
            if ((l_language == "en")) {
                c.push("English");
            }
            c.push("\n");
            if ((l_language == "fr")) {
                c.push("Franaise");
            }
            c.push("\n");
            if ((l_language == "de")) {
                c.push("Deutsch");
            }
            c.push("\n");
            if ((l_language == "es")) {
                c.push("Espaol");
            }
            c.push("\n");
            if ((l_language == "it")) {
                c.push("Italiano");
            }
            c.push("\n");
            if ((l_language == "pl")) {
                c.push("Polski");
            }
            c.push("\n");
            if ((l_language == "ru")) {
                c.push("P??????");
            }
            c.push("\n");
            if ((l_language == "kr")) {
                c.push("???");
            }
            c.push("\n");
            if ((l_language == "zh")) {
                c.push("??");
            }
            c.push("\n");
            if ((l_language == "cz")) {
                c.push("Cesky");
            }
            c.push("\n");
            if ((l_language == "jp")) {
                c.push("??");
            }
            c.push("\n </label>\n </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n </form>\n');
    return c.join("");
};
popup.selectlang.block_footer = new Surface.Block("popup.selectlang.block_footer");
popup.selectlang.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <button id="popup-selectlang-form-submit" class="base-button-arrow-small">');
    c.push(Surface.valOut("Save"));
    c.push("</button>\n");
    return c.join("");
};
var block_popup_serverplayers = new Surface.BlockConfig("common.popup", {"content": "popup.serverplayers.block_content","title": "popup.serverplayers.block_title","footerContainer": "popup.serverplayers.block_footerContainer","extraClass": "popup.serverplayers.block_extraClass"});
popup.addTemplate(new Surface.Template("serverplayers"));
popup.serverplayers.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_serverplayers;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.serverplayers");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.serverplayers.block_title = new Surface.Block("popup.serverplayers.block_title");
popup.serverplayers.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Live Scoreboard");
    return c.join("");
};
popup.serverplayers.block_extraClass = new Surface.Block("popup.serverplayers.block_extraClass");
popup.serverplayers.block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-server-scoreboard");
    return c.join("");
};
popup.serverplayers.block_content = new Surface.Block("popup.serverplayers.block_content");
popup.serverplayers.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    o.scoreboard = o.data.scoreboard;
    c.push(" ");
    c.push(Surface.importTemplate(("serverguide" + ("." + "scoreboard")), o, null, kwargs));
    c.push('\n <div class="base-clear"></div>\n');
    return c.join("");
};
popup.serverplayers.block_footerContainer = new Surface.Block("popup.serverplayers.block_footerContainer");
popup.serverplayers.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_popup_serverurl = new Surface.BlockConfig("common.popup", {"content": "popup.serverurl.block_content","title": "popup.serverurl.block_title","footerContainer": "popup.serverurl.block_footerContainer"});
popup.addTemplate(new Surface.Template("serverurl"));
popup.serverurl.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_serverurl;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.serverurl");
    c.push("\n");
    o.position = o.data.position;
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
popup.serverurl.block_title = new Surface.Block("popup.serverurl.block_title");
popup.serverurl.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Server link"));
    return c.join("");
};
popup.serverurl.block_content = new Surface.Block("popup.serverurl.block_content");
popup.serverurl.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div class="popup-serverurl">\n <p>');
    c.push(Surface.valOut("You can use the link below to send your friends directly to this server."));
    c.push('</p>\n <textarea rows="2" id="popup-server-url" class="base-no-ajax">');
    c.push(Surface.valOut(o.data));
    c.push("</textarea>\n </div>\n");
    return c.join("");
};
popup.serverurl.block_footerContainer = new Surface.Block("popup.serverurl.block_footerContainer");
popup.serverurl.block_footerContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_popup_showIntro = new Surface.BlockConfig("", {});
popup.addTemplate(new Surface.Template("showIntro"));
popup.showIntro.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_showIntro;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.showIntro");
    c.push('<input type="hidden" id="popup-showintro" value="');
    c.push(Surface.valOut(o.section));
    c.push('" data="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/popup/setIntroSectionBitVisited/", Surface.urlContext)));
    c.push('" />');
    return c.join("");
};
var block_popup_voiceinvite = new Surface.BlockConfig("common.popup", {"footer": "popup.voiceinvite.block_footer","content": "popup.voiceinvite.block_content","extraClassInner": "popup.voiceinvite.block_extraClassInner","title": "popup.voiceinvite.block_title","extraCloseButtonClass": "popup.voiceinvite.block_extraCloseButtonClass"});
popup.addTemplate(new Surface.Template("voiceinvite"));
popup.voiceinvite.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_popup_voiceinvite;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("popup");
    Surface.Renderer.addUsedTemplate("popup.voiceinvite");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("common.popup", o, b, kwargs);
};
var block_popup_voiceinvite_use_19_10 = new Surface.BlockConfig("common.focusbar", {"content": "popup.voiceinvite._use_19_10_block_content","extraClass": "popup.voiceinvite._use_19_10_block_extraClass"});
popup.voiceinvite.block_title = new Surface.Block("popup.voiceinvite.block_title");
popup.voiceinvite.block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Voice invite");
    return c.join("");
};
popup.voiceinvite.block_extraClassInner = new Surface.Block("popup.voiceinvite.block_extraClassInner");
popup.voiceinvite.block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-height");
    return c.join("");
};
popup.voiceinvite.block_extraCloseButtonClass = new Surface.Block("popup.voiceinvite.block_extraCloseButtonClass");
popup.voiceinvite.block_extraCloseButtonClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
popup.voiceinvite._use_19_10_block_extraClass = new Surface.Block("popup.voiceinvite._use_19_10_block_extraClass");
popup.voiceinvite._use_19_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("popup-gameinvite-content");
    return c.join("");
};
popup.voiceinvite._use_19_10_block_content = new Surface.Block("popup.voiceinvite._use_19_10_block_content");
popup.voiceinvite._use_19_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-serverinfo-container">\n ');
    c.push(Surface.valOut(o.data.invite.channel.description));
    c.push('\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
popup.voiceinvite.block_content = new Surface.Block("popup.voiceinvite.block_content");
popup.voiceinvite.block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52,"user": o.data.user}, null, kwargs));
    c.push('\n </div>\n <div class="popoup-gameinvite-content">\n <div class="popup-sent-at">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.data.createdAt}, null, kwargs));
    c.push('\n </div>\n <div class="popup-gameinvite-inviter">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.data.user}, null, kwargs));
    c.push(" ");
    c.push(Surface.valOut("invited you to the channel"));
    c.push(":<br>\n </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_popup_voiceinvite_use_19_10, kwargs));
    c.push(' <div class="base-clear"></div>\n </div>\n');
    return c.join("");
};
popup.voiceinvite.block_footer = new Surface.Block("popup.voiceinvite.block_footer");
popup.voiceinvite.block_footer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="popup-gameinvite-buttons">\n <div style="float:right;"><input rel="');
    c.push(Surface.valOut(o.data.invite.fromUserId));
    c.push('" type="button" class="base-button-arrow-small-grey popup-voiceinvite-declined-button common-popup-close-button" value="No thanks" /></div>\n <div rel="');
    c.push(Surface.valOut(o.data.invite.fromUserId));
    c.push('" class="popup-voiceinvite-accepted-button" style="float:right;margin-right:6px;">\n <input type="button" rel="');
    c.push(Surface.valOut(o.data.invite.channel.channelId));
    c.push("\" class='voice-connect-button common-popup-close-button base-button-arrow-small' value='Talk' />\n </div>\n </div>\n");
    return c.join("");
};
if (typeof preparser == "undefined") {
    var preparser = {};
}
var surf_preparser_component = new Surface.Component("preparser");
surf_preparser_component.extend(preparser);
preparser = surf_preparser_component;
preparser.addTemplate(new Surface.Template("index"));
if (typeof profile == "undefined") {
    var profile = {};
}
var surf_profile_component = new Surface.Component("profile");
surf_profile_component.extend(profile);
profile = surf_profile_component;
var block_profile_avatarlink = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("avatarlink"));
profile.avatarlink.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_avatarlink;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.avatarlink");
    var l_url;
    c.push("\n");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.userId) != "undefined" && o.user.userId !== null)) {
        l_url = S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null) ? o.user.username : "")});
    } else {
        l_url = "#";
    }
    c.push('<a class="base-profile-link" href="');
    c.push(Surface.valOut(l_url));
    c.push('">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null) ? o.user.username : "Unknown user")));
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraLinkContent) != "undefined" && o.extraLinkContent !== null) ? o.extraLinkContent : "")));
    c.push("</a> ");
    c.push(((typeof (o) != "undefined" && o !== null && typeof (o.extra) != "undefined" && o.extra !== null) ? o.extra : ""));
    c.push("\n");
    return c.join("");
};
var block_profile_awards = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.awards.block_profileMainContent","titleItem": "profile.awards.block_titleItem","profileSecondaryContent": "profile.awards.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("awards"));
profile.awards.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_awards;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.awards");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.awards.block_titleItem = new Surface.Block("profile.awards.block_titleItem");
profile.awards.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Awards - ");
    return c.join("");
};
profile.awards.block_profileMainContent = new Surface.Block("profile.awards.block_profileMainContent");
profile.awards.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-stats">\n');
    if ((o.currentPersonaGame == Surface.globalContext.staticContext.games.BFBC2)) {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "bfbc2awards")), o, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.awards.block_profileSecondaryContent = new Surface.Block("profile.awards.block_profileSecondaryContent");
profile.awards.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "profile.base.block_titleComponent","profileUser": "profile.base.block_profileUser","profileMainContent": "profile.base.block_profileMainContent","profileActionUnique": "profile.base.block_profileActionUnique","profileMainColumn": "profile.base.block_profileMainColumn","mainContent": "profile.base.block_mainContent"});
profile.addTemplate(new Surface.Template("base"));
profile.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.base");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
profile.base.block_titleComponent = new Surface.Block("profile.base.block_titleComponent");
profile.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.username) != "undefined" && o.profileCommon.user.username !== null)) {
        c.push(Surface.valOut(o.profileCommon.user.username));
    } else {
        c.push("Unknown");
    }
    c.push(" - ");
    return c.join("");
};
profile.base.block_profileUser = new Surface.Block("profile.base.block_profileUser");
profile.base.block_profileUser.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <span id="profile-identifer-');
    c.push(Surface.valOut(o.profileCommon.user.userId));
    c.push('"></span>\n <div id="profile-header-info">\n <div class="profile-username">\n <h1 class="profile-username-eaid">\n ');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.username) != "undefined" && o.profileCommon.user.username !== null) ? o.profileCommon.user.username : "Unknown")));
    c.push("\n </h1>\n");
    if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null)) && (o.profileCommon.user.userId != l_session.user.userId))) {
        c.push(' <div id="profile-interact">\n');
        if ((o.profileCommon.friendStatus != "NONE")) {
            if ((o.profileCommon.friendStatus == "OUTGOING")) {
                c.push(' <div class="profile-add-friend">\n <div class="base-button-addfriend-wide disabled" disabled="disabled">');
                c.push(Surface.valOut("Request sent"));
                c.push("</div>\n </div>\n");
            } else {
                if ((o.profileCommon.friendStatus == "INCOMING")) {
                    c.push(' <div class="profile-accept-friendship">\n <form action="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/acceptFriendship/{id}/", Surface.urlContext, {"id": o.profileCommon.user.userId})));
                    c.push('" method="post" class="friendship profile-friendship">\n ');
                    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
                    c.push('\n <input class="base-button-addfriend-wide" type="submit" value="');
                    c.push(Surface.valOut("Accept friendship"));
                    c.push('" />\n </form>\n </div>\n');
                } else {
                    if ((o.profileCommon.friendStatus == "NOT_ALLOWED")) {
                        c.push(' <div class="profile-add-friend">\n <div class="base-button-addfriend-wide disabled bubble-title" data-battlebubble="');
                        c.push(Surface.valOut("New friends disabled by user"));
                        c.push('" disabled="disabled">');
                        c.push(Surface.valOut("Add as friend"));
                        c.push("</div>\n </div>\n");
                    } else {
                        if ((o.profileCommon.isChatDisabled == 0)) {
                            c.push(' <button class="base-button-chat base-open-chat-link" rel="');
                            c.push(Surface.valOut(o.profileCommon.user.userId));
                            c.push('">');
                            c.push(Surface.valOut("Chat"));
                            c.push("</button>\n");
                        }
                    }
                }
            }
        } else {
            c.push(' <div class="profile-add-friend">\n <form action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/requestFriendship/{id}/", Surface.urlContext, {"id": o.profileCommon.user.userId})));
            c.push('" method="post" class="friendship profile-friendship">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input class="base-button-addfriend-wide allow-add" type="submit" value="');
            c.push(Surface.valOut("Add as friend"));
            c.push('" disabled="disabled" />\n </form>\n </div>\n');
        }
        c.push(' </div>\n <div class="profile-post-general-report">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/user/reportProfileDropdown/{id}/", Surface.urlContext, {"id": o.profileCommon.user.userId})}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push(" </div>\n");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (l_session.user.userId == o.profileCommon.user.userId))) {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userStatusMessage) != "undefined" && o.profileCommon.userStatusMessage !== null) && (S.Modifier.count(o.profileCommon.userStatusMessage.statusMessage) > 0))) {
            o.statusMessage = o.profileCommon.userStatusMessage.statusMessage;
        } else {
            o.statusMessage = "Update your status text";
        }
    } else {
        o.statusMessage = ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userStatusMessage) != "undefined" && o.profileCommon.userStatusMessage !== null && typeof (o.profileCommon.userStatusMessage.statusMessage) != "undefined" && o.profileCommon.userStatusMessage.statusMessage !== null) ? o.profileCommon.userStatusMessage.statusMessage : false);
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.statusMessage) != "undefined" && o.statusMessage !== null) && (o.statusMessage != false))) {
        c.push(' <div id="profile-status-message"');
        if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (l_session.user.userId == o.profileCommon.user.userId))) {
            c.push('class="profile-your"');
        }
        c.push('>\n <div class="message profile-toggle-edit">\n <div id="profile-status-message-area">\n');
        if ((S.Modifier.count(o.statusMessage) > 80)) {
            c.push(' <span class="profile-status-message-text">');
            c.push(Surface.valOut(S.Modifier.substring(o.statusMessage, 0, 80)));
            c.push("...</span>\n");
        } else {
            c.push(' <span class="profile-status-message-text">');
            c.push(Surface.valOut(o.statusMessage));
            c.push("</span>\n");
        }
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userStatusMessage) != "undefined" && o.profileCommon.userStatusMessage !== null && typeof (o.profileCommon.userStatusMessage.statusMessageChanged) != "undefined" && o.profileCommon.userStatusMessage.statusMessageChanged !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userStatusMessage) != "undefined" && o.profileCommon.userStatusMessage !== null && typeof (o.profileCommon.userStatusMessage.statusMessage) != "undefined" && o.profileCommon.userStatusMessage.statusMessage !== null)) && (S.Modifier.count(o.profileCommon.userStatusMessage.statusMessage) > 0))) {
            c.push(' <span class="profile-status-message-date">');
            c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": o.profileCommon.userStatusMessage.statusMessageChanged}, null, kwargs));
            c.push("</span>\n");
        }
        c.push(" </div>\n");
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (l_session.user.userId == o.profileCommon.user.userId))) {
            c.push(' <div id="profile-edit-status-button"></div>\n');
        }
        c.push(" </div>\n");
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (l_session.user.userId == o.profileCommon.user.userId))) {
            c.push(' <form id="profile-edit-form" class="profile-status-message-edit-form" method="POST" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/setStatusmessage/", Surface.urlContext)));
            c.push('">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input maxlength="80" type="text" name="message" id="profile-status-message-edit" class="profile-toggle-edit" placeholder="');
            c.push(Surface.valOut("Update your status text"));
            c.push('" value="');
            c.push(Surface.valOut(o.statusMessage));
            c.push('"/>\n </form>\n');
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.presence) != "undefined" && o.profileCommon.user.presence !== null && typeof (o.profileCommon.user.presence.isPlaying) != "undefined" && o.profileCommon.user.presence.isPlaying !== null) ? o.profileCommon.user.presence.isPlaying : false)) {
        c.push(' <div id="profile-status-container" class="base-box-push">\n <div class="base-box-push-inner">\n <div id="profile-status-');
        c.push(Surface.valOut(o.profileCommon.user.userId));
        c.push('" class="profile-status" >\n <div class="profile-view-status-active">\n <div class="profile-view-status-info">\n');
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.presence) != "undefined" && o.profileCommon.user.presence !== null && typeof (o.profileCommon.user.presence.serverGuid) != "undefined" && o.profileCommon.user.presence.serverGuid !== null))) {
            if ((l_session.user.userId != o.profileCommon.user.userId)) {
                c.push(' <div class="profile-view-status-joinbutton">\n ');
                c.push(Surface.importTemplate(("serverguide" + ("." + "joinfriendform")), {"profileButton": true,"friendPersonaId": o.profileCommon.user.presence.personaId,"presence": o.profileCommon.user.presence,"label": "Join Game"}, null, kwargs));
                c.push("\n </div>\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut("You are playing"));
                c.push("\n");
            }
        } else {
            c.push(' <div class="base-left">\n <span class="');
            c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.profileCommon.user.presence.game, o.profileCommon.user.presence.platform, o.profileCommon.user.presence.gameExpansion, b, kwargs)));
            c.push('"></span>\n </div>\n <div class="base-left">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "playing")), {"presence": o.profileCommon.user.presence}, null, kwargs));
            c.push("\n </div>\n");
        }
        if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.presence) != "undefined" && o.profileCommon.user.presence !== null && typeof (o.profileCommon.user.presence.serverGuid) != "undefined" && o.profileCommon.user.presence.serverGuid !== null)) {
            c.push(" ");
            c.push(Surface.valOut("on"));
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.profileCommon.user.presence.serverGuid,"slug": S.Modifier.slugify(o.profileCommon.user.presence.serverName)})));
            c.push('">');
            c.push(Surface.valOut(S.Modifier.slugify(o.profileCommon.user.presence.serverName)));
            c.push("</a>\n");
        }
        c.push(' <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n </div>\n </div>\n');
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.statusMessage) != "undefined" && o.statusMessage !== null) && (o.statusMessage != false))) {
            c.push(' <div class="common-secondary-column-line"></div>\n');
        }
    }
    c.push("\n");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null) ? o.profileCommon.userinfo : false) && o.profileCommon.userinfo.showDetails)) {
        c.push(' <dl id="profile-information">\n ');
        if ((o.profileCommon.userinfo.icon > 1)) {
            c.push("<dd>");
            c.push(Surface.importTemplate(("common" + ("." + "usertag")), {"userTag": o.profileCommon.userinfo.icon}, null, kwargs));
            c.push("</dd>");
        }
        c.push("\n");
        if (o.profileCommon.userinfo.name) {
            c.push('<dd class="profile-information-name">');
            c.push(Surface.valOut(o.profileCommon.userinfo.name));
            c.push("</dd>");
        }
        c.push("\n");
        if (o.profileCommon.userinfo.age) {
            c.push("<dt>");
            c.push(Surface.valOut("Age"));
            c.push("</dt><dd>");
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.age) != "undefined" && o.profileCommon.userinfo.age !== null) ? o.profileCommon.userinfo.age : "-")));
            c.push("</dd>");
        }
        c.push("\n");
        if ((S.Modifier.codetocountry(o.profileCommon.userinfo.location) != "Unknown")) {
            c.push("<dt>");
            c.push(Surface.valOut("From"));
            c.push('</dt><dd><img class="bubble-title" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/common/flags/", S.Modifier.lower(o.profileCommon.userinfo.location)), ".gif"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut(((S.Modifier.codetocountry(o.profileCommon.userinfo.location) !== null) ? S.Modifier.codetocountry(o.profileCommon.userinfo.location) : "-")));
            c.push('" title="');
            c.push(Surface.valOut(((S.Modifier.codetocountry(o.profileCommon.userinfo.location) !== null) ? S.Modifier.codetocountry(o.profileCommon.userinfo.location) : "-")));
            c.push('" /></dd>');
        }
        c.push("\n");
        if ((o.profileCommon.user.createdAt && (typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.locale) != "undefined" && Surface.globalContext.session.locale !== null))) {
            c.push("<dt>");
            c.push(Surface.valOut("Enlisted"));
            c.push("</dt><dd>");
            c.push(Surface.valOut(S.Modifier.offsetdateformat(o.profileCommon.user.createdAt, Surface.globalContext.session.locale.fulldate, Surface.globalContext.session.locale.offset)));
            c.push("</dd>");
        }
        c.push("\n");
        if (((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.lastLogin) != "undefined" && o.profileCommon.userinfo.lastLogin !== null) && o.profileCommon.userinfo.lastLogin) && (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.presence) != "undefined" && o.profileCommon.user.presence !== null && typeof (o.profileCommon.user.presence.isPlaying) != "undefined" && o.profileCommon.user.presence.isPlaying !== null) ? o.profileCommon.user.presence.isPlaying : false) == false)) && (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.presence) != "undefined" && o.profileCommon.user.presence !== null && typeof (o.profileCommon.user.presence.isOnline) != "undefined" && o.profileCommon.user.presence.isOnline !== null) ? o.profileCommon.user.presence.isOnline : false) == false))) {
            c.push(" <dt>");
            c.push(Surface.valOut("Last seen"));
            c.push("</dt> <dd>");
            c.push(Surface.importTemplate(("common" + ("." + "ago")), {"timestamp": o.profileCommon.userinfo.lastLogin}, null, kwargs));
            c.push("</dd>\n");
        }
        c.push(" </dl>\n");
    }
    c.push('\n <div style="clear:both;"></div>\n </div>\n ');
    return c.join("");
};
profile.base.block_profileMainContent = new Surface.Block("profile.base.block_profileMainContent");
profile.base.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    return c.join("");
};
profile.base.block_profileActionUnique = new Surface.Block("profile.base.block_profileActionUnique");
profile.base.block_profileActionUnique.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(b.get("profileMainContent")(o, b, kwargs));
    return c.join("");
};
profile.base.block_profileMainColumn = new Surface.Block("profile.base.block_profileMainColumn");
profile.base.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="profile-main-column">\n');
    c.push(b.get("profileUser")(o, b, kwargs));
    c.push("\n");
    c.push(b.get("profileActionUnique")(o, b, kwargs));
    c.push(" </div>\n ");
    return c.join("");
};
profile.base.block_mainContent = new Surface.Block("profile.base.block_mainContent");
profile.base.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (l_session.user.userId == o.profileCommon.user.userId))) {
        c.push(" ");
        c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "profile"}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle profile-page');
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null))) {
        c.push(" profile-unknown");
    }
    c.push('">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null)) {
        c.push(' <div id="profile-user">\n');
        c.push(b.get("profileMainColumn")(o, b, kwargs));
        c.push('\n <div id="profile-secondary-column">\n <div class="profile-avatar">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null) ? o.profileCommon.user : false),"gravatarSize": 304}, null, kwargs));
        c.push("\n </div>\n ");
        c.push(Surface.importTemplate(("profile" + ("." + "basesecondarycol")), o, null, kwargs));
        c.push("\n </div>\n </div>\n ");
    }
    c.push('\n <!-- -------------------------------------------------------------------------------- -->\n <div style="clear:both;"></div>\n </div>\n');
    return c.join("");
};
var block_profile_basesecondarycol = new Surface.BlockConfig("", {"profileSecondaryColumn": "profile.basesecondarycol.block_profileSecondaryColumn"});
profile.addTemplate(new Surface.Template("basesecondarycol"));
profile.basesecondarycol.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_basesecondarycol;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.basesecondarycol");
    c.push("\n");
    c.push(b.get("profileSecondaryColumn")(o, b, kwargs));
    return c.join("");
};
var block_profile_basesecondarycol_use_94_14 = new Surface.BlockConfig("common.secondarycontent", {"content": "profile.basesecondarycol._use_94_14_block_content","title": "profile.basesecondarycol._use_94_14_block_title"});
var block_profile_basesecondarycol_use_85_14 = new Surface.BlockConfig("common.secondarycontent", {"content": "profile.basesecondarycol._use_85_14_block_content","title": "profile.basesecondarycol._use_85_14_block_title"});
var block_profile_basesecondarycol_use_75_14 = new Surface.BlockConfig("common.secondarycontent", {"content": "profile.basesecondarycol._use_75_14_block_content","title": "profile.basesecondarycol._use_75_14_block_title"});
var block_profile_basesecondarycol_use_59_10 = new Surface.BlockConfig("common.secondarycontent", {"content": "profile.basesecondarycol._use_59_10_block_content","title": "profile.basesecondarycol._use_59_10_block_title"});
var block_profile_basesecondarycol_use_33_14 = new Surface.BlockConfig("common.secondarycontent", {"content": "profile.basesecondarycol._use_33_14_block_content","title": "profile.basesecondarycol._use_33_14_block_title"});
profile.basesecondarycol._use_33_14_block_title = new Surface.Block("profile.basesecondarycol._use_33_14_block_title");
profile.basesecondarycol._use_33_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Member Of Platoons"));
    return c.join("");
};
profile.basesecondarycol.surface_37_26 = new Surface.SurfaceList("profile.basesecondarycol.surface_37_26", "profileCommon.platoons", "platoon", "platoon.id");
profile.basesecondarycol.surface_38_30 = new Surface.SingleSurface("profile.basesecondarycol.surface_38_30");
profile.basesecondarycol.surface_38_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_basesecondarycol;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.basesecondarycol");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("profile-platoons", S.Modifier.concat("_", o.platoon.id)));
    c.push('">');
    c.push(' <div class="profile-platoons-platoon">\n <div class="profile-platoon-badge">');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"pid": o.platoon.id,"bp": o.platoon.badgePath,"size": 60}, null, kwargs));
    c.push('</div>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id})));
    c.push('" class="profile-platoon-name">');
    c.push(Surface.valOut(o.platoon.name));
    c.push('</a>\n <div class="profile-platoon-info">\n <div style="float: left; padding-right: 4px;">\n <span class="platoon-info-icons-icon ');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.platoon.game, o.platoon.platform, 0, b, kwargs)));
    c.push('"></span>\n </div>\n ');
    c.push(Surface.valOut(o.platoon.memberCounter));
    c.push(" members\n </div>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.basesecondarycol", "surface_38_30", S.Modifier.concat("profile-platoons", S.Modifier.concat("_", o.platoon.id)), o, b);
    return c.join("");
};
profile.basesecondarycol.surface_37_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_basesecondarycol;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.basesecondarycol");
    c.push('<surf:container id="');
    c.push("profile-platoons");
    c.push('">');
    var l_for_profile_basesecondarycol_37_26_list;
    l_for_profile_basesecondarycol_37_26_list = o.profileCommon.platoons;
    if ((S.Modifier.count(l_for_profile_basesecondarycol_37_26_list) > 0)) {
        for (var l_for_profile_basesecondarycol_37_26_key in l_for_profile_basesecondarycol_37_26_list) {
            if (!Surface.isValidLoopItem(l_for_profile_basesecondarycol_37_26_list[l_for_profile_basesecondarycol_37_26_key])) {
                continue;
            }
            var l_platoon = l_for_profile_basesecondarycol_37_26_list[l_for_profile_basesecondarycol_37_26_key];
            c.push(profile.basesecondarycol.surface_38_30.render({"platoon": ((typeof (l_platoon) != "undefined" && l_platoon !== null) ? l_platoon : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.basesecondarycol", "surface_37_26", "profile-platoons", o, b);
    return c.join("");
};
profile.basesecondarycol._use_33_14_block_content = new Surface.Block("profile.basesecondarycol._use_33_14_block_content");
profile.basesecondarycol._use_33_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="profile-platoons">\n');
    c.push(profile.basesecondarycol.surface_37_26.render({"profileCommon": {"platoons": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.platoons) != "undefined" && o.profileCommon.platoons !== null) ? o.profileCommon.platoons : null)}}, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
profile.basesecondarycol._use_59_10_block_title = new Surface.Block("profile.basesecondarycol._use_59_10_block_title");
profile.basesecondarycol._use_59_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Veteran Status"));
    c.push(' <div class="profile-veteran-status">');
    c.push(Surface.valOut(o.profileCommon.veteranStatus.status));
    c.push("</div>");
    return c.join("");
};
profile.basesecondarycol._use_59_10_block_content = new Surface.Block("profile.basesecondarycol._use_59_10_block_content");
profile.basesecondarycol._use_59_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_basesecondarycol_63_22_iteration;
    var l_for_profile_basesecondarycol_63_22_list;
    c.push(' <ul class="profile-veteran-usergame">\n');
    l_for_profile_basesecondarycol_63_22_list = o.profileCommon.veteranStatus.games;
    l_for_profile_basesecondarycol_63_22_iteration = 0;
    if ((S.Modifier.count(l_for_profile_basesecondarycol_63_22_list) > 0)) {
        for (var l_for_profile_basesecondarycol_63_22_key in l_for_profile_basesecondarycol_63_22_list) {
            if (!Surface.isValidLoopItem(l_for_profile_basesecondarycol_63_22_list[l_for_profile_basesecondarycol_63_22_key])) {
                continue;
            }
            var l_game = l_for_profile_basesecondarycol_63_22_list[l_for_profile_basesecondarycol_63_22_key];
            l_for_profile_basesecondarycol_63_22_iteration = (l_for_profile_basesecondarycol_63_22_iteration + 1);
            c.push(' <li class="');
            c.push(Surface.valOut($S.callFunction("base.game", l_game, b, kwargs)));
            if ((l_for_profile_basesecondarycol_63_22_iteration == 1)) {
                c.push(" first");
            }
            c.push(' bubble-title" title="');
            c.push(Surface.valOut($S.callFunction("base.gameTitle", l_game, b, kwargs)));
            c.push(' Veteran">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/veteran-icon-", $S.callFunction("base.game", l_game, b, kwargs)), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut($S.callFunction("base.gameTitle", l_game, b, kwargs)));
            c.push(' veteran icon" />\n </li>\n');
        }
    }
    c.push(" </ul>\n");
    return c.join("");
};
profile.basesecondarycol._use_75_14_block_title = new Surface.Block("profile.basesecondarycol._use_75_14_block_title");
profile.basesecondarycol._use_75_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.count(o.profileCommon.mutualFriends)));
    c.push(" mutual ");
    c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(o.profileCommon.mutualFriends), "Friend", "Friends")));
    return c.join("");
};
profile.basesecondarycol._use_75_14_block_content = new Surface.Block("profile.basesecondarycol._use_75_14_block_content");
profile.basesecondarycol._use_75_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("base" + ("." + "friendslist")), {"useSurfaceId": "profile_secondary_mutual_friends_list","capFriends": true,"friends": o.profileCommon.mutualFriends,"user": o.profileCommon.user}, null, kwargs));
    c.push("\n");
    return c.join("");
};
profile.basesecondarycol._use_85_14_block_title = new Surface.Block("profile.basesecondarycol._use_85_14_block_title");
profile.basesecondarycol._use_85_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<a class="profile-secondarycolumn-link" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, {"username": o.profileCommon.user.username})));
    c.push('">');
    c.push(Surface.valOut(o.profileCommon.friendCount));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.profileCommon.friendCount, "Friend", "Friends")));
    c.push("</a>");
    return c.join("");
};
profile.basesecondarycol._use_85_14_block_content = new Surface.Block("profile.basesecondarycol._use_85_14_block_content");
profile.basesecondarycol._use_85_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("base" + ("." + "friendslist")), {"useSurfaceId": "profile_secondary_friends_list","capFriends": true,"friends": o.profileCommon.tenFriends,"friendCount": o.profileCommon.friendCount,"user": o.profileCommon.user,"avatarOnly": true}, null, kwargs));
    c.push("\n");
    return c.join("");
};
profile.basesecondarycol._use_94_14_block_title = new Surface.Block("profile.basesecondarycol._use_94_14_block_title");
profile.basesecondarycol._use_94_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Fan of"));
    return c.join("");
};
profile.basesecondarycol.surface_98_26 = new Surface.SurfaceList("profile.basesecondarycol.surface_98_26", "profileCommon.platoonsfan", "platoon", "platoon.id");
profile.basesecondarycol.surface_99_30 = new Surface.SingleSurface("profile.basesecondarycol.surface_99_30");
profile.basesecondarycol.surface_99_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_basesecondarycol;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.basesecondarycol");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("profile-platoonsfan", S.Modifier.concat("_", o.platoon.id)));
    c.push('">');
    c.push(' <div style="float: left; width: 26px; height: 26px; padding-right: 4px;" class="bubble-title" title="');
    c.push(Surface.valOut(o.platoon.name));
    c.push('">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/platoon/{id}/{menu}/{refresh}/", Surface.urlContext, {"id": o.platoon.id})));
    c.push('" style="display: block;" >\n ');
    c.push(Surface.importTemplate(("platoon" + ("." + "badge")), {"bp": o.platoon.badgePath,"size": 26}, null, kwargs));
    c.push("\n </a>\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.basesecondarycol", "surface_99_30", S.Modifier.concat("profile-platoonsfan", S.Modifier.concat("_", o.platoon.id)), o, b);
    return c.join("");
};
profile.basesecondarycol.surface_98_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_basesecondarycol;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.basesecondarycol");
    c.push('<surf:container id="');
    c.push("profile-platoonsfan");
    c.push('">');
    var l_for_profile_basesecondarycol_98_26_list;
    l_for_profile_basesecondarycol_98_26_list = o.profileCommon.platoonsfan;
    if ((S.Modifier.count(l_for_profile_basesecondarycol_98_26_list) > 0)) {
        for (var l_for_profile_basesecondarycol_98_26_key in l_for_profile_basesecondarycol_98_26_list) {
            if (!Surface.isValidLoopItem(l_for_profile_basesecondarycol_98_26_list[l_for_profile_basesecondarycol_98_26_key])) {
                continue;
            }
            var l_platoon = l_for_profile_basesecondarycol_98_26_list[l_for_profile_basesecondarycol_98_26_key];
            c.push(profile.basesecondarycol.surface_99_30.render({"platoon": ((typeof (l_platoon) != "undefined" && l_platoon !== null) ? l_platoon : null)}, b, kwargs));
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.basesecondarycol", "surface_98_26", "profile-platoonsfan", o, b);
    return c.join("");
};
profile.basesecondarycol._use_94_14_block_content = new Surface.Block("profile.basesecondarycol._use_94_14_block_content");
profile.basesecondarycol._use_94_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="profile-platoonsfan">\n');
    c.push(profile.basesecondarycol.surface_98_26.render({"profileCommon": {"platoonsfan": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.platoonsfan) != "undefined" && o.profileCommon.platoonsfan !== null) ? o.profileCommon.platoonsfan : null)}}, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
profile.basesecondarycol.block_profileSecondaryColumn = new Surface.Block("profile.basesecondarycol.block_profileSecondaryColumn");
profile.basesecondarycol.block_profileSecondaryColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n <div id="profile-select-view">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null)) {
        c.push(' <div class="common-active-row ');
        if ((o.profileCommon.profiletab == "view")) {
            c.push("active");
        } else {
            c.push("inactive");
        }
        c.push('">\n <div class="common-active-row-marker"></div>\n <div class="profile-select-view-image overview"></div><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.profileCommon.user.username})));
        c.push('" >');
        c.push(Surface.valOut("Overview"));
        c.push('</a>\n </div>\n <div class="common-active-row ');
        if ((o.profileCommon.profiletab == "friends")) {
            c.push("active");
        } else {
            c.push("inactive");
        }
        c.push('">\n <div class="common-active-row-marker"></div>\n <div class="profile-select-view-image friends"></div><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/friends/{importType}/", Surface.urlContext, o.profileCommon.user)));
        c.push('">');
        c.push(Surface.valOut("Friends"));
        c.push('</a>\n </div>\n <div class="common-active-row ');
        if ((o.profileCommon.profiletab == "servers")) {
            c.push("active");
        } else {
            c.push("inactive");
        }
        c.push('">\n <div class="common-active-row-marker"></div>\n <div class="profile-select-view-image servers"></div><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/servers/", Surface.urlContext, o.profileCommon.user)));
        c.push('">');
        c.push(Surface.valOut("Servers"));
        c.push("</a>\n </div>\n");
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) && (o.profileCommon.user.userId == l_session.user.userId))) {
            c.push(' <div class="common-active-row ');
            if ((o.profileCommon.profiletab == "edit")) {
                c.push("active");
            } else {
                c.push("inactive");
            }
            c.push('">\n <div class="common-active-row-marker"></div>\n <div class="profile-select-view-image edit"></div><a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/profile/edit/", Surface.urlContext)));
            c.push('">');
            c.push(Surface.valOut("Edit profile"));
            c.push("</a>\n </div>\n");
        }
    }
    c.push(" </div>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.platoons) != "undefined" && o.profileCommon.platoons !== null)) {
        o.profileCommon.platoons = S.Modifier.filterlist(o.profileCommon.platoons, "hidden", 0);
        c.push("\n");
        if ((S.Modifier.count(o.profileCommon.platoons) > 0)) {
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_profile_basesecondarycol_use_33_14, kwargs));
        }
    }
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.veteranStatus) != "undefined" && o.profileCommon.veteranStatus !== null) && (o.profileCommon.veteranStatus.status > 0))) {
        c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_profile_basesecondarycol_use_59_10, kwargs));
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null)) {
        if (S.Modifier.count(o.profileCommon.mutualFriends)) {
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_profile_basesecondarycol_use_75_14, kwargs));
        }
        c.push("\n");
        if (o.profileCommon.friendCount) {
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_profile_basesecondarycol_use_85_14, kwargs));
        }
        c.push("\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.platoonsfan) != "undefined" && o.profileCommon.platoonsfan !== null) && (S.Modifier.count(o.profileCommon.platoonsfan) > 0))) {
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_profile_basesecondarycol_use_94_14, kwargs));
        }
    }
    return c.join("");
};
var block_profile_bf3awardsstats = new Surface.BlockConfig("", {"statsContent": "profile.bf3awardsstats.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3awardsstats"));
profile.bf3awardsstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3awardsstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3awardsstats");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    return c.join("");
};
profile.bf3awardsstats.block_statsContent = new Surface.Block("profile.bf3awardsstats.block_statsContent");
profile.bf3awardsstats.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_awardsLocale;
    var l_for_profile_bf3awardsstats_42_26_list;
    var l_for_profile_bf3awardsstats_76_26_list;
    var l_langKeyTitle;
    var l_langKeyDesc;
    l_awardsLocale = S.Modifier.get(o.bf3GadgetsLocale, "awards");
    c.push(' <div id="profile-stats-awards-main-column" class="profile-stats-main-full-column">\n <div id="profile-stats-awards-progression" class="profile-stats-type-container">\n <h1>');
    c.push(Surface.valOut("Award progression"));
    c.push("</h1>\n");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.awards) != "undefined" && o.awards !== null))) {
        c.push(' <div class="common-found-no-stats">');
        c.push(Surface.valOut("Found no awards"));
        c.push("</div>\n");
    } else {
        c.push('\n <div class="common-secondary-column-line"></div>\n <div class="profile-stats-awards-progression-columns-wrapper">\n <div class="profile-stats-awards-progression-column profile-stats-awards-progression-column-medals">\n <div class="profile-stats-awards-progression-header">\n <h2>');
        c.push(Surface.valOut("Medals"));
        c.push('</h2>\n <div class="profile-stats-awards-progression-header-progress-numbers">\n ');
        c.push(Surface.valOut(S.Modifier.get(o.unlockedStats, "AwardGroup_Medals", 0)));
        c.push("/");
        c.push(Surface.valOut(S.Modifier.count(S.Modifier.get(o.awards, "AwardGroup_Medals", []))));
        c.push('\n </div>\n <div class="profile-stats-awards-progression-header-progress-bars">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "69px","value": S.Modifier.get(o.unlockedStats, "AwardGroup_Medals", 0),"max": S.Modifier.count(S.Modifier.get(o.awards, "AwardGroup_Medals", []))}, null, kwargs));
        c.push('\n </div>\n </div>\n <div class="profile-stats-awards-progression-body">\n');
        l_for_profile_bf3awardsstats_42_26_list = S.Modifier.get(o.awards, "AwardGroup_Medals", []);
        if ((S.Modifier.count(l_for_profile_bf3awardsstats_42_26_list) > 0)) {
            for (var l_count in l_for_profile_bf3awardsstats_42_26_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3awardsstats_42_26_list[l_count])) {
                    continue;
                }
                var l_item = l_for_profile_bf3awardsstats_42_26_list[l_count];
                l_langKeyTitle = S.Modifier.get(S.Modifier.get(l_awardsLocale, l_item.unlockId), "name");
                l_langKeyDesc = S.Modifier.get(S.Modifier.get(l_awardsLocale, l_item.unlockId), "desc");
                c.push('\n <div class="profile-stats-unlock-progression-kit-item profile-stats-awards-progression-item-medal bubble-title');
                if ((S.Modifier.toint(l_item.unlocked) < 100)) {
                    c.push(" nottaken");
                }
                c.push('" title="');
                c.push(Surface.valOut((S.translations[l_langKeyTitle] || l_langKeyTitle)));
                c.push("<br>");
                c.push(Surface.valOut((S.translations[l_langKeyDesc] || l_langKeyDesc)));
                c.push('">\n');
                if ((l_item.actualValue > 1)) {
                    c.push(' <div class="profile-stats-num-awards-taken">\n x');
                    c.push(Surface.valOut(l_item.actualValue));
                    c.push("\n </div>\n");
                }
                c.push(' <div class="progress" style="width: ');
                c.push(Surface.valOut(S.Modifier.toint(l_item.unlocked)));
                c.push('%;"></div>\n <p class="base-item-medal-small" style="background-position: left -');
                c.push(Surface.valOut(((S.Modifier.toint(S.Modifier.replace(l_item.unlockId, "m", "")) - 1) * 57)));
                c.push('px;">');
                c.push(Surface.valOut((S.translations[l_langKeyTitle] || l_langKeyTitle)));
                c.push("</p>\n </div>\n");
            }
        }
        c.push('\n <div class="base-clear"></div>\n </div>\n </div>\n <div class="profile-stats-awards-progression-column profile-stats-awards-progression-column-ribbons">\n <div class="profile-stats-awards-progression-header">\n <h2>');
        c.push(Surface.valOut("Ribbons"));
        c.push('</h2>\n <div class="profile-stats-awards-progression-header-progress-numbers">\n ');
        c.push(Surface.valOut(S.Modifier.get(o.unlockedStats, "AwardGroup_Ribbons", 0)));
        c.push("/");
        c.push(Surface.valOut(S.Modifier.count(S.Modifier.get(o.awards, "AwardGroup_Ribbons", []))));
        c.push('\n </div>\n <div class="profile-stats-awards-progression-header-progress-bars">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "69px","max": S.Modifier.count(S.Modifier.get(o.awards, "AwardGroup_Ribbons", [])),"value": S.Modifier.get(o.unlockedStats, "AwardGroup_Ribbons", 0)}, null, kwargs));
        c.push('\n </div>\n </div>\n <div class="profile-stats-awards-progression-body">\n');
        l_for_profile_bf3awardsstats_76_26_list = S.Modifier.get(o.awards, "AwardGroup_Ribbons", []);
        if ((S.Modifier.count(l_for_profile_bf3awardsstats_76_26_list) > 0)) {
            for (var l_count in l_for_profile_bf3awardsstats_76_26_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3awardsstats_76_26_list[l_count])) {
                    continue;
                }
                var l_item = l_for_profile_bf3awardsstats_76_26_list[l_count];
                l_langKeyTitle = S.Modifier.get(S.Modifier.get(l_awardsLocale, l_item.unlockId), "name");
                l_langKeyDesc = S.Modifier.get(S.Modifier.get(l_awardsLocale, l_item.unlockId), "desc");
                c.push(' <div class="profile-stats-unlock-progression-kit-item profile-stats-awards-progression-item-ribbon bubble-title');
                if ((S.Modifier.toint(l_item.unlocked) < 100)) {
                    c.push(" nottaken");
                }
                c.push('" title="');
                c.push(Surface.valOut((S.translations[l_langKeyTitle] || l_langKeyTitle)));
                c.push("<br>");
                c.push(Surface.valOut((S.translations[l_langKeyDesc] || l_langKeyDesc)));
                c.push('">\n');
                if ((l_item.actualValue > 1)) {
                    c.push(' <div class="profile-stats-num-awards-taken">\n x');
                    c.push(Surface.valOut(l_item.actualValue));
                    c.push("\n </div>\n");
                }
                c.push(' <div class="progress" style="width: ');
                c.push(Surface.valOut(S.Modifier.toint(l_item.unlocked)));
                c.push('%;"></div>\n <p class="base-item-ribbon-small" style="background-position: left -');
                c.push(Surface.valOut(((S.Modifier.toint(S.Modifier.replace(l_item.unlockId, "r", "")) - 1) * 33)));
                c.push('px;">');
                c.push(Surface.valOut((S.translations[l_langKeyTitle] || l_langKeyTitle)));
                c.push("</p>\n </div>\n");
            }
        }
        c.push('\n <div class="base-clear"></div>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n');
    }
    c.push(' </div>\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_profile_bf3dogtags = new Surface.BlockConfig("", {"statsContent": "profile.bf3dogtags.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3dogtags"));
profile.bf3dogtags.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3dogtags;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3dogtags");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    c.push("\n");
    return c.join("");
};
var block_profile_bf3dogtags_use_55_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.bf3dogtags._use_55_10_block_content","title": "profile.bf3dogtags._use_55_10_block_title","shadow": "profile.bf3dogtags._use_55_10_block_shadow","extraClass": "profile.bf3dogtags._use_55_10_block_extraClass"});
profile.bf3dogtags._use_55_10_block_title = new Surface.Block("profile.bf3dogtags._use_55_10_block_title");
profile.bf3dogtags._use_55_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3dogtags._use_55_10_block_extraClass = new Surface.Block("profile.bf3dogtags._use_55_10_block_extraClass");
profile.bf3dogtags._use_55_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("no-line");
    return c.join("");
};
profile.bf3dogtags._use_55_10_block_shadow = new Surface.Block("profile.bf3dogtags._use_55_10_block_shadow");
profile.bf3dogtags._use_55_10_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3dogtags._use_55_10_block_content = new Surface.Block("profile.bf3dogtags._use_55_10_block_content");
profile.bf3dogtags._use_55_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_bf3dogtags_63_26_list;
    var l_seen;
    var l_hoverdataAgo;
    var l_dtIndex;
    var l_hoverdata;
    var l_dogtags;
    var l_localeKey;
    var l_seenDogTag;
    var l_for_profile_bf3dogtags_62_22_list;
    var l_unlocked;
    var l_descriptionLocaleKey;
    c.push(' <ul class="profile-stats-dogtags">\n');
    l_dogtags = $S.callFunction("common.getDogtagsVenice", b, kwargs);
    l_for_profile_bf3dogtags_62_22_list = ["basic", "advanced"];
    if ((S.Modifier.count(l_for_profile_bf3dogtags_62_22_list) > 0)) {
        for (var l_for_profile_bf3dogtags_62_22_key in l_for_profile_bf3dogtags_62_22_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3dogtags_62_22_list[l_for_profile_bf3dogtags_62_22_key])) {
                continue;
            }
            var l_dogtagType = l_for_profile_bf3dogtags_62_22_list[l_for_profile_bf3dogtags_62_22_key];
            l_for_profile_bf3dogtags_63_26_list = S.Modifier.get(l_dogtags, l_dogtagType);
            if ((S.Modifier.count(l_for_profile_bf3dogtags_63_26_list) > 0)) {
                for (var l_dtIndexString in l_for_profile_bf3dogtags_63_26_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bf3dogtags_63_26_list[l_dtIndexString])) {
                        continue;
                    }
                    var l_dt = l_for_profile_bf3dogtags_63_26_list[l_dtIndexString];
                    l_dtIndex = S.Modifier.get(l_dt, "index");
                    c.push("\n");
                    if (!(S.Modifier.contains(l_dt.platforms, o.platformInt))) {
                        continue;
                    }
                    c.push("\n");
                    if (((l_dogtagType == "advanced") && (l_dtIndex == 0))) {
                        continue;
                    }
                    c.push("\n");
                    l_seen = S.Modifier.contains(S.Modifier.get(o.seenDogTagsIndices, l_dogtagType), l_dtIndex);
                    l_unlocked = S.Modifier.contains(S.Modifier.get(o.unlockedDogTagsIndices, l_dogtagType), l_dtIndex);
                    l_localeKey = S.Modifier.get(l_dt, "nameSID");
                    l_descriptionLocaleKey = S.Modifier.get(l_dt, "descriptionSID");
                    c.push('\n <li class="profile-stats-dogtags-dogtag');
                    if (l_seen) {
                        c.push(" taken");
                    }
                    if (l_unlocked) {
                        c.push(" unlocked");
                    }
                    c.push('">\n');
                    if ((l_seen || l_unlocked)) {
                        if ((S.Modifier.count(l_localeKey) > 0)) {
                            l_hoverdata = ((("<strong>" + (S.translations[l_localeKey] || l_localeKey)) + "</strong><br>") + S.Modifier.capitalize(S.Modifier.lower((S.translations[l_descriptionLocaleKey] || l_descriptionLocaleKey))));
                            if (l_seen) {
                                l_seenDogTag = S.Modifier.get(S.Modifier.get(o.seenDogTags, l_dogtagType), l_dtIndex);
                                l_hoverdataAgo = Surface.importTemplate(("common" + ("." + "ago")), l_seenDogTag, null, kwargs);
                                l_hoverdata = ((((((((l_hoverdata + "<br><br>Times taken from enemies: ") + l_seenDogTag.counter) + "<br>Last taken from <strong>") + l_seenDogTag.name) + "</strong>") + " about ") + l_hoverdataAgo) + ".");
                                c.push("\n");
                            }
                            c.push("\n");
                        }
                        c.push('\n <div class="profile-stats-dogtags-dogtag-image');
                        if (l_localeKey) {
                            c.push(" bubble-title");
                        }
                        c.push('" data-battlebubble="');
                        c.push(Surface.valOut(l_hoverdata));
                        c.push('">\n <img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/s/", l_dt.image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" />\n </div>\n <div class="profile-stats-dogtags-extra">\n');
                        if (l_unlocked) {
                            c.push(' <div class="dogtag-unlocked">');
                            c.push(Surface.valOut("Unlocked"));
                            c.push("</div>\n");
                        } else {
                            c.push(' <div class="dogtag-locked">');
                            c.push(Surface.valOut("Locked"));
                            c.push("</div>\n");
                        }
                        c.push("\n");
                        if (l_seen) {
                            l_seenDogTag = S.Modifier.get(S.Modifier.get(o.seenDogTags, l_dogtagType), l_dtIndex);
                            c.push(' <div class="profile-stats-times">');
                            c.push(Surface.valOut(l_seenDogTag.counter));
                            c.push("x</div>\n");
                        }
                        c.push(" </div>\n");
                    } else {
                        if ((S.Modifier.count(l_localeKey) > 0)) {
                            l_hoverdata = ((("<strong>" + (S.translations[l_localeKey] || l_localeKey)) + "</strong><br>") + S.Modifier.capitalize(S.Modifier.lower((S.translations[l_descriptionLocaleKey] || l_descriptionLocaleKey))));
                        }
                        c.push(' <div class="profile-stats-dogtags-dogtag-image');
                        if (l_localeKey) {
                            c.push(" bubble-title");
                        }
                        c.push('" data-battlebubble="');
                        c.push(Surface.valOut(l_hoverdata));
                        c.push('">\n <img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/dogtags/dogtag_placeholder.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" />\n </div>\n');
                    }
                    c.push(" </li>\n ");
                }
            }
            c.push("\n");
        }
    }
    c.push(' <div style="clear:both"></div>\n </ul>\n ');
    return c.join("");
};
profile.bf3dogtags.block_statsContent = new Surface.Block("profile.bf3dogtags.block_statsContent");
profile.bf3dogtags.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_leftLocaleKey;
    var l_leftImage;
    var l_rightLocaleKey;
    var l_rightImage;
    c.push(' <div id="createdogtag">\n <div id="dogtag-set" class="base-box-push">\n <div class="base-box-push-inner">\n');
    l_leftImage = "defaulttag_left";
    l_rightImage = "defaulttag_right";
    l_leftLocaleKey = "";
    l_rightLocaleKey = "";
    if (((typeof (o) != "undefined" && o !== null && typeof (o.dogTagLeft) != "undefined" && o.dogTagLeft !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.dogTagRight) != "undefined" && o.dogTagRight !== null))) {
        l_leftImage = o.dogTagLeft.image;
        l_rightImage = o.dogTagRight.image;
        l_leftLocaleKey = o.dogTagLeft.nameSID;
        l_rightLocaleKey = o.dogTagRight.nameSID;
    }
    c.push(' <div id="dogtag1-render" data-url="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/lb/", l_leftImage), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"></div>\n <div id="dogtag2-render" data-url="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/la/", l_rightImage), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('"\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.dogTagRight) != "undefined" && o.dogTagRight !== null) && (S.Modifier.count(S.Modifier.get(o.dogTagRight, "statSID", [])) > 0))) {
        c.push(' data-statvalue="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.dogTagRight) != "undefined" && o.dogTagRight !== null && typeof (o.dogTagRight.statValue) != "undefined" && o.dogTagRight.statValue !== null) ? o.dogTagRight.statValue : "0")));
        c.push('"\n data-statunit="');
        c.push(Surface.valOut((S.translations[o.dogTagRight.statSID] || o.dogTagRight.statSID)));
        c.push('"\n ');
    }
    c.push('>\n </div>\n <form>\n <input type="hidden" name="personaId" value="');
    c.push(Surface.valOut(o.personaId));
    c.push('"/>\n <input type="hidden" name="game" value="');
    c.push(Surface.valOut(o.game));
    c.push('"/>\n <input type="hidden" id="profile-dogtags-form-tag" name="tag" value="');
    c.push(Surface.valOut(o.personaClanTag));
    c.push('"/>\n <input type="hidden" id="profile-dogtags-form-persona" name="persona" value="');
    c.push(Surface.valOut(o.personaName));
    c.push('"/>\n <input type="hidden" id="profile-dogtags-form-basic" name="basic" value=""/>\n <input type="hidden" id="profile-dogtags-form-advanced" name="advanced" value=""/>\n </form>\n <div class="label first">');
    if ((S.Modifier.count(l_leftLocaleKey) > 0)) {
        c.push(Surface.valOut((S.translations[l_leftLocaleKey] || l_leftLocaleKey)));
    }
    c.push('</div>\n <div class="label last">');
    if ((S.Modifier.count(l_rightLocaleKey) > 0)) {
        c.push(Surface.valOut((S.translations[l_rightLocaleKey] || l_rightLocaleKey)));
    }
    c.push("</div>\n");
    if (o.mySoldier) {
        c.push(' <a class="profile-stats-dogtag-edit-link" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/createdogtag/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.game, b, kwargs),"personaId": o.personaId})));
        c.push('">');
        c.push(Surface.valOut("Edit Dog Tag"));
        c.push("</a>\n");
    }
    c.push(' </div>\n </div>\n </div>\n <div id="dogtags-list">\n <h1>');
    c.push(Surface.valOut("Dog tags"));
    c.push('</h1>\n <div class="profile-stats-type-container-filters">\n <div class="common-selector-side-title">');
    c.push(Surface.valOut("Filter"));
    c.push('</div>\n <ul class="common-selector">\n <li class="first selected"><div class="filter-all">');
    c.push(Surface.valOut("All"));
    c.push('</div></li>\n <li><div class="filter-taken">');
    c.push(Surface.valOut("Taken"));
    c.push('</div></li>\n <li><div class="filter-unlocked">');
    c.push(Surface.valOut("Unlocked"));
    c.push("</div></li>\n </ul>\n </div>\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_bf3dogtags_use_55_10, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
var block_profile_bf3overviewstats = new Surface.BlockConfig("", {"statsBottom": "profile.bf3overviewstats.block_statsBottom","statsContent": "profile.bf3overviewstats.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3overviewstats"));
profile.bf3overviewstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3overviewstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3overviewstats");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    c.push('\n <div class="base-clear"></div>\n');
    c.push(b.get("statsBottom")(o, b, kwargs));
    return c.join("");
};
var block_profile_bf3overviewstats_use_444_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.bf3overviewstats._use_444_22_block_content","title": "profile.bf3overviewstats._use_444_22_block_title","extraClassInner": "profile.bf3overviewstats._use_444_22_block_extraClassInner","shadow": "profile.bf3overviewstats._use_444_22_block_shadow","extraClass": "profile.bf3overviewstats._use_444_22_block_extraClass"});
var block_profile_bf3overviewstats_use_351_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3overviewstats._use_351_22_block_content","title": "profile.bf3overviewstats._use_351_22_block_title","extraClassInner": "profile.bf3overviewstats._use_351_22_block_extraClassInner","shadow": "profile.bf3overviewstats._use_351_22_block_shadow","extraClass": "profile.bf3overviewstats._use_351_22_block_extraClass"});
var block_profile_bf3overviewstats_use_308_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3overviewstats._use_308_22_block_content","title": "profile.bf3overviewstats._use_308_22_block_title","extraClassInner": "profile.bf3overviewstats._use_308_22_block_extraClassInner","shadow": "profile.bf3overviewstats._use_308_22_block_shadow","extraClass": "profile.bf3overviewstats._use_308_22_block_extraClass"});
var block_profile_bf3overviewstats_use_269_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3overviewstats._use_269_22_block_content","title": "profile.bf3overviewstats._use_269_22_block_title","extraClassInner": "profile.bf3overviewstats._use_269_22_block_extraClassInner","shadow": "profile.bf3overviewstats._use_269_22_block_shadow","extraClass": "profile.bf3overviewstats._use_269_22_block_extraClass"});
profile.bf3overviewstats.block_statsContent = new Surface.Block("profile.bf3overviewstats.block_statsContent");
profile.bf3overviewstats.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_leftPos;
    var l_reconKitTime;
    var l_for_profile_bf3overviewstats_49_46_list;
    var l_newAimAccPos;
    var l_accu;
    var l_kits;
    var l_topPos;
    var l_bubbleTitle;
    var l_numWins;
    var l_supportKitTime;
    var l_assaultKitTime;
    var l_currentScoreNeeded;
    var l_rankName;
    var l_currScore;
    var l_engineerKitTime;
    var l_numLosses;
    var l_myMax;
    c.push("\n");
    o.platform = $S.callFunction("common.platformIntToPlatform", o.platformInt, b, kwargs);
    c.push(' <div class="base-box-push profile-venicestats-overview-highlight">\n <div class="base-box-push-inner">\n <div class="base-box-push-two-column">\n <div class="base-box-push-two-column-row">\n <div class="profile-venicestats-overview-highlight-title">');
    c.push(Surface.valOut("Rank"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-rankinfo">\n <div class="profile-venicestats-overview-highlight-rankinfo-rank">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": 2,"rank_size": "medium","rank": S.Modifier.get(o.overviewStats, "rank", "0")}, null, kwargs));
    c.push('\n </div>\n <div class="profile-venicestats-overview-highlight-rankinfo-progress">\n <div class="profile-venicestats-overview-highlight-rankinfo-progress-title">\n');
    l_rankName = S.Modifier.get(o.currentRankNeeded, "name");
    c.push(" ");
    c.push(Surface.valOut((S.translations[l_rankName] || l_rankName)));
    c.push("\n <div>");
    c.push(Surface.valOut("Rank"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.get(o.overviewStats, "rank", "0")));
    c.push("</div>\n </div>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.rankNeeded) != "undefined" && o.rankNeeded !== null)) {
        c.push("\n");
        l_currScore = S.Modifier.get(o.overviewStats, "score", "0");
        l_currentScoreNeeded = S.Modifier.get(o.currentRankNeeded, "pointsNeeded", 0);
        l_myMax = S.Modifier.toint(S.Modifier.get(o.rankNeeded, "pointsNeeded"));
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "222px","max": (l_myMax - S.Modifier.toint(l_currentScoreNeeded)),"value": (S.Modifier.toint(l_currScore) - S.Modifier.toint(l_currentScoreNeeded))}, null, kwargs));
        c.push('\n <div class="profile-venicestats-overview-highlight-rankinfo-progress-info">\n <div class="first"><strong>');
        c.push(Surface.valOut(S.Modifier.numberformat((S.Modifier.toint(S.Modifier.get(o.overviewStats, "score", "0")) - S.Modifier.toint(l_currentScoreNeeded)), "'.'", "','", "'3'")));
        c.push("</strong> / ");
        c.push(Surface.valOut(S.Modifier.numberformat((l_myMax - l_currentScoreNeeded), "'.'", "','", "'3'")));
        c.push('</div>\n <div class="last">');
        c.push(Surface.valOut(S.Modifier.numberformat(S.Modifier.toint((S.Modifier.toint(S.Modifier.get(o.rankNeeded, "pointsNeeded")) - S.Modifier.toint(S.Modifier.get(o.overviewStats, "score", "0")))), "'.'", "','", "'3'")));
        c.push(" ");
        c.push(Surface.valOut("until rank up"));
        c.push("</div>\n </div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-clear"></div>\n </div>\n <div class="base-box-push-two-column-row">\n <div class="base-box-push-two-column-row">\n <div class="profile-venicestats-overview-highlight-title">');
    c.push(Surface.valOut("Service Stars"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-servicestars">\n');
    l_kits = [1, 2, 32, 8];
    l_for_profile_bf3overviewstats_49_46_list = l_kits;
    if ((S.Modifier.count(l_for_profile_bf3overviewstats_49_46_list) > 0)) {
        for (var l_for_profile_bf3overviewstats_49_46_key in l_for_profile_bf3overviewstats_49_46_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3overviewstats_49_46_list[l_for_profile_bf3overviewstats_49_46_key])) {
                continue;
            }
            var l_kit = l_for_profile_bf3overviewstats_49_46_list[l_for_profile_bf3overviewstats_49_46_key];
            l_bubbleTitle = "";
            if ((l_kit == 1)) {
                l_bubbleTitle = "Assault Service Star ";
            } else {
                if ((l_kit == 2)) {
                    l_bubbleTitle = "Engineer Service Star ";
                } else {
                    if ((l_kit == 32)) {
                        l_bubbleTitle = "Support Service Star ";
                    } else {
                        if ((l_kit == 8)) {
                            l_bubbleTitle = "Recon Service Star ";
                        }
                    }
                }
            }
            l_bubbleTitle = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_bubbleTitle, (S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStars"), l_kit) + 1)), ", "), S.Modifier.concat(S.Modifier.ceil(S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStarsProgress"), l_kit)), "%"));
            c.push('\n <div class="profile-venicestats-overview-highlight-servicestars-class bubble-title" title="');
            c.push(Surface.valOut(l_bubbleTitle));
            c.push('">\n <div class="profile-venicestats-overview-highlight-servicestars-meter">\n <div class="profile-venicestats-overview-highlight-servicestars-meter-fill-wrapper">\n <div class="profile-venicestats-overview-highlight-servicestars-meter-fill" style="height: ');
            c.push(Surface.valOut(S.Modifier.ceil(S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStarsProgress"), l_kit))));
            c.push('%;"></div>\n </div>\n </div>\n ');
            c.push(Surface.importTemplate(("common" + ("." + "bf3kit")), {"kit": l_kit}, null, kwargs));
            c.push("\n");
            if ((S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStars"), l_kit) > 0)) {
                c.push(' <div class="profile-venicestats-overview-highlight-servicestars-class-star profile-venicestats-star-gold"></div>\n');
            }
            c.push(' <div class="profile-venicestats-overview-highlight-servicestars-class-star-count">\n');
            if ((S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStars"), l_kit) > 1)) {
                c.push(" <span>");
                c.push(Surface.valOut(S.Modifier.round(S.Modifier.get(S.Modifier.get(o.overviewStats, "serviceStars"), l_kit), 0)));
                c.push("</span>\n");
            }
            c.push(" </div>\n </div>\n");
        }
    }
    c.push('\n <div class="base-clear"></div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n <div class="base-box-push-two-column profile-venicestats-overview-highlight-statsbox-wrapper">\n <div class="base-box-push-two-column-row">\n <div class="profile-venicestats-overview-highlight-statsbox">\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-timeplayed">');
    c.push(Surface.valOut("Time played"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-statsbox-statsval">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n ');
    c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(o.overviewStats, "timePlayed", 0), 2)));
    c.push("\n </div>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": "true","compareStatsType": "timestamp","compare": S.Modifier.get(o.overviewStats, "timePlayed", 0),"to": S.Modifier.get(o.compareStats, "timePlayed", 0),"width": 94}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n </div>\n <div class="profile-venicestats-overview-highlight-statsbox">\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-scorepmin">');
    c.push(Surface.valOut("Score"));
    c.push(" / ");
    c.push(Surface.valOut("Min"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-statsbox-statsval">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n ');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "scorePerMinute", 0))));
    c.push("\n </div>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": "true","compare": S.Modifier.get(o.overviewStats, "scorePerMinute", 0),"to": S.Modifier.get(o.compareStats, "scorePerMinute", 0),"width": 94}, null, kwargs));
        c.push("\n");
    }
    c.push('\n </div>\n </div>\n <div class="profile-venicestats-overview-highlight-statsbox">\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-coopmissions">');
    c.push(Surface.valOut("CO-OP Missions"));
    c.push('</div>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/coop/{personaId}/{personaName}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName})));
    c.push('">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval last">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n ');
    c.push(Surface.valOut(o.coopLevelsTaken));
    c.push(' / 6\n </div>\n </div>\n </a>\n </div>\n </div>\n <div class="base-box-push-two-column-row">\n <div class="profile-venicestats-overview-highlight-statsbox-vis" >\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-kdration">');
    c.push(Surface.valOut("W/L Ratio"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-statsbox-statsval">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n <div class="profile-venicestats-overview-kd">\n');
    l_numWins = S.Modifier.toint(S.Modifier.get(o.overviewStats, "numWins", 1));
    l_numLosses = S.Modifier.toint(S.Modifier.get(o.overviewStats, "numLosses", 1));
    if ((l_numWins == 0)) {
        l_numWins = 1;
    }
    if ((l_numLosses == 0)) {
        l_numLosses = 1;
    }
    c.push(" ");
    c.push(Surface.importTemplate(("common" + ("." + "pressuremeter")), {"wins": l_numWins,"losses": l_numLosses}, null, kwargs));
    c.push('\n </div>\n <div style="height:21px;clear:both;">&nbsp;</div>\n');
    if (((S.Modifier.get(o.overviewStats, "numWins", 1) > 0) && (S.Modifier.get(o.overviewStats, "numLosses", 1) > 0))) {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.round((S.Modifier.get(o.overviewStats, "numWins", 1) / S.Modifier.get(o.overviewStats, "numLosses", 1)), 2)));
        c.push('\n <div style="clear:both; width: 100%; position: relative;font-size:14px;color: #a8a8a8; font-family:Arial;">\n ');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "numWins", 0))));
        c.push(" / ");
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "numLosses", 0))));
        c.push("\n </div>\n");
    } else {
        c.push(" N/A\n");
    }
    c.push('\n </div>\n </div>\n </div>\n <div class="profile-venicestats-overview-highlight-statsbox-vis">\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-accuracy">');
    c.push(Surface.valOut("Accuracy"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-statsbox-statsval">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n <img width="71" height="70" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/stats-acc-bg.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="" style="margin: 0px 0 2px;"><br />\n');
    l_accu = S.Modifier.get(o.overviewStats, "accuracy", 0);
    if ((l_accu >= 70)) {
        l_newAimAccPos = 0;
    } else {
        if ((l_accu >= 50)) {
            l_newAimAccPos = 3;
        } else {
            if ((l_accu >= 40)) {
                l_newAimAccPos = 6;
            } else {
                if ((l_accu >= 30)) {
                    l_newAimAccPos = 9;
                } else {
                    if ((l_accu >= 20)) {
                        l_newAimAccPos = 12;
                    } else {
                        if ((l_accu >= 15)) {
                            l_newAimAccPos = 15;
                        } else {
                            if ((l_accu >= 12)) {
                                l_newAimAccPos = 18;
                            } else {
                                if ((l_accu >= 9)) {
                                    l_newAimAccPos = 21;
                                } else {
                                    if ((l_accu >= 6)) {
                                        l_newAimAccPos = 24;
                                    } else {
                                        if ((l_accu >= 3)) {
                                            l_newAimAccPos = 27;
                                        } else {
                                            l_newAimAccPos = 30;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push("\n");
    l_topPos = (28 - l_newAimAccPos);
    l_leftPos = (26 - l_newAimAccPos);
    c.push(' <div style="position: absolute; top: ');
    c.push(Surface.valOut(l_topPos));
    c.push("px; left: ");
    c.push(Surface.valOut(l_leftPos));
    c.push('px;">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/stats-acc-aim.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Accuracy"));
    c.push('" />\n </div>\n ');
    c.push(Surface.valOut(S.Modifier.round(l_accu, 1)));
    c.push("%\n </div>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(" ");
        c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": S.Modifier.get(o.overviewStats, "accuracy", 0),"to": S.Modifier.get(o.compareStats, "accuracy", 0),"width": 94}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n </div>\n <div class="profile-venicestats-overview-highlight-statsbox-vis">\n <div class="profile-venicestats-overview-highlight-title profile-venicestats-timepkit">');
    c.push(Surface.valOut("Time / Kit"));
    c.push('</div>\n <div class="profile-venicestats-overview-highlight-statsbox-statsval">\n <div class="profile-venicestats-overview-highlight-statsbox-statsval-padder">\n');
    l_assaultKitTime = S.Modifier.get(S.Modifier.get(o.overviewStats, "kitTimesInPercentage"), "1");
    l_engineerKitTime = S.Modifier.get(S.Modifier.get(o.overviewStats, "kitTimesInPercentage"), "2");
    l_supportKitTime = S.Modifier.get(S.Modifier.get(o.overviewStats, "kitTimesInPercentage"), "32");
    l_reconKitTime = S.Modifier.get(S.Modifier.get(o.overviewStats, "kitTimesInPercentage"), "8");
    c.push(' <div class="profile-venicestats-kittimes">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "kittimes")), {"assault": l_assaultKitTime,"engineer": l_engineerKitTime,"support": l_supportKitTime,"recon": l_reconKitTime}, null, kwargs));
    c.push('\n </div>\n <div class="profile-venicestats-kittimes-legend">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/stats-time-icons.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n </div>\n </div>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "showsoldierpic")), {"addclass": "profile-venicestats-overview-highlight-class-char","picture": o.personaPicture,"size": "large"}, null, kwargs));
    c.push('\n </div>\n <div class="base-clear"></div>\n ');
    return c.join("");
};
profile.bf3overviewstats._use_269_22_block_extraClass = new Surface.Block("profile.bf3overviewstats._use_269_22_block_extraClass");
profile.bf3overviewstats._use_269_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean");
    return c.join("");
};
profile.bf3overviewstats._use_269_22_block_extraClassInner = new Surface.Block("profile.bf3overviewstats._use_269_22_block_extraClassInner");
profile.bf3overviewstats._use_269_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean-table-wrapper-inner");
    return c.join("");
};
profile.bf3overviewstats._use_269_22_block_shadow = new Surface.Block("profile.bf3overviewstats._use_269_22_block_shadow");
profile.bf3overviewstats._use_269_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3overviewstats._use_269_22_block_title = new Surface.Block("profile.bf3overviewstats._use_269_22_block_title");
profile.bf3overviewstats._use_269_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Top Weapons"));
    return c.join("");
};
profile.bf3overviewstats._use_269_22_block_content = new Surface.Block("profile.bf3overviewstats._use_269_22_block_content");
profile.bf3overviewstats._use_269_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_bf3overviewstats_278_34_iteration;
    var l_locale;
    var l_for_profile_bf3overviewstats_278_34_list;
    var l_langKey;
    l_locale = S.Modifier.get(o.bf3GadgetsLocale, "weapons");
    c.push(' <ol class="profile-venicestats-overview-box-itemlist">\n');
    l_for_profile_bf3overviewstats_278_34_list = ((typeof (o) != "undefined" && o !== null && typeof (o.topStats) != "undefined" && o.topStats !== null) ? o.topStats : []);
    l_for_profile_bf3overviewstats_278_34_iteration = 0;
    if ((S.Modifier.count(l_for_profile_bf3overviewstats_278_34_list) > 0)) {
        for (var l_for_profile_bf3overviewstats_278_34_key in l_for_profile_bf3overviewstats_278_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3overviewstats_278_34_list[l_for_profile_bf3overviewstats_278_34_key])) {
                continue;
            }
            var l_item = l_for_profile_bf3overviewstats_278_34_list[l_for_profile_bf3overviewstats_278_34_key];
            l_for_profile_bf3overviewstats_278_34_iteration = (l_for_profile_bf3overviewstats_278_34_iteration + 1);
            l_langKey = S.Modifier.get(S.Modifier.get(l_locale, l_item.code), "name");
            c.push(' <li>\n <div class="profile-venicestats-overview-itemlist-nr">');
            c.push(Surface.valOut(l_for_profile_bf3overviewstats_278_34_iteration));
            c.push('</div>\n <div class="profile-venicestats-overview-itemlist-class profile-venicestats-icon-class-');
            c.push(Surface.valOut(l_item.code));
            c.push('"></div>\n <div class="profile-venicestats-overview-itemlist-wav">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_item.code,"statsName": (S.translations[l_langKey] || l_langKey),"personaId": o.personaId})));
            c.push('" class="profile-venicestats-overview-itemlist-info-title">\n <img width="90" height="54" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", S.Modifier.get(S.Modifier.get(l_locale, l_item.code, {}), "image", "")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n </a>\n </div>\n <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-itemlist-info">\n <tr><td>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_item.code,"statsName": (S.translations[l_langKey] || l_langKey),"personaId": o.personaId})));
            c.push('" class="profile-venicestats-overview-itemlist-info-title">\n ');
            c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
            c.push('\n </a><br />\n <span class="profile-venicestats-overview-itemlist-info-highlight">');
            c.push(Surface.valOut(l_item.kills));
            c.push(" ");
            c.push(Surface.valOut("Kills"));
            c.push("</span>\n </td></tr>\n </table>\n </li>\n");
        }
    } else {
        c.push(' <div class="common-found-no-stats">');
        c.push(Surface.valOut("Found no top weapons"));
        c.push("</div>\n");
    }
    c.push(' </ol>\n <div class="profile-venicestats-overview-box-itemlist-viewmore">\n ');
    c.push(Surface.valOut("View all"));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaId": o.personaId,"personaName": o.personaName})));
    c.push('">');
    c.push(Surface.valOut("Weapons & Equipment"));
    c.push('</a> or <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/vehicles/{personaId}/{game}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaId": o.personaId,"personaName": o.personaName})));
    c.push('">');
    c.push(Surface.valOut("Vehicles"));
    c.push("</a>\n </div>\n");
    return c.join("");
};
profile.bf3overviewstats._use_308_22_block_extraClass = new Surface.Block("profile.bf3overviewstats._use_308_22_block_extraClass");
profile.bf3overviewstats._use_308_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean");
    return c.join("");
};
profile.bf3overviewstats._use_308_22_block_extraClassInner = new Surface.Block("profile.bf3overviewstats._use_308_22_block_extraClassInner");
profile.bf3overviewstats._use_308_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean-table-wrapper-inner");
    return c.join("");
};
profile.bf3overviewstats._use_308_22_block_shadow = new Surface.Block("profile.bf3overviewstats._use_308_22_block_shadow");
profile.bf3overviewstats._use_308_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3overviewstats._use_308_22_block_title = new Surface.Block("profile.bf3overviewstats._use_308_22_block_title");
profile.bf3overviewstats._use_308_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Latest Awards"));
    return c.join("");
};
profile.bf3overviewstats._use_308_22_block_content = new Surface.Block("profile.bf3overviewstats._use_308_22_block_content");
profile.bf3overviewstats._use_308_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_bf3overviewstats_318_34_iteration;
    var l_locale;
    var l_langKey;
    var l_for_profile_bf3overviewstats_318_34_list;
    l_locale = S.Modifier.get(o.bf3GadgetsLocale, "awards");
    c.push('\n <ol class="profile-venicestats-overview-box-itemlist">\n');
    l_for_profile_bf3overviewstats_318_34_list = ((typeof (o) != "undefined" && o !== null && typeof (o.awards) != "undefined" && o.awards !== null) ? o.awards : []);
    l_for_profile_bf3overviewstats_318_34_iteration = 0;
    if ((S.Modifier.count(l_for_profile_bf3overviewstats_318_34_list) > 0)) {
        for (var l_for_profile_bf3overviewstats_318_34_key in l_for_profile_bf3overviewstats_318_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3overviewstats_318_34_list[l_for_profile_bf3overviewstats_318_34_key])) {
                continue;
            }
            var l_item = l_for_profile_bf3overviewstats_318_34_list[l_for_profile_bf3overviewstats_318_34_key];
            l_for_profile_bf3overviewstats_318_34_iteration = (l_for_profile_bf3overviewstats_318_34_iteration + 1);
            l_langKey = S.Modifier.get(S.Modifier.get(l_locale, l_item.unlockId), "name");
            c.push('\n <li>\n <div class="profile-venicestats-overview-itemlist-nr">');
            c.push(Surface.valOut(l_for_profile_bf3overviewstats_318_34_iteration));
            c.push('</div>\n <div class="profile-venicestats-overview-itemlist-awards">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"personaId": o.personaId})));
            c.push('" class="awardlink">\n');
            if ((l_item.group == "AwardGroup_Medals")) {
                c.push(' <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/medals/s/", l_item.unlockId), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="" class="bubble-title" title="');
                c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
                c.push('">\n');
            } else {
                c.push(' <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ribbons/s/", l_item.unlockId), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="">\n');
            }
            c.push(' </a>\n </div>\n <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-itemlist-info awards">\n <tr>\n <td>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"personaId": o.personaId})));
            c.push('" class="profile-venicestats-overview-itemlist-info-title">');
            c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
            c.push("</a><br />\n </td>\n </tr>\n </table>\n </li>\n");
        }
    } else {
        c.push(' <div class="common-found-no-stats">');
        c.push(Surface.valOut("Found no latest awards"));
        c.push("</div>\n");
    }
    c.push(' </ol>\n <div class="profile-venicestats-overview-box-itemlist-viewmore">\n ');
    c.push(Surface.valOut("View all"));
    c.push(' <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"personaId": o.personaId})));
    c.push('">');
    c.push(Surface.valOut("Awards"));
    c.push("</a>\n </div>\n");
    return c.join("");
};
profile.bf3overviewstats._use_351_22_block_extraClass = new Surface.Block("profile.bf3overviewstats._use_351_22_block_extraClass");
profile.bf3overviewstats._use_351_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean last");
    return c.join("");
};
profile.bf3overviewstats._use_351_22_block_extraClassInner = new Surface.Block("profile.bf3overviewstats._use_351_22_block_extraClassInner");
profile.bf3overviewstats._use_351_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxnarrowclean-table-wrapper-inner");
    return c.join("");
};
profile.bf3overviewstats._use_351_22_block_shadow = new Surface.Block("profile.bf3overviewstats._use_351_22_block_shadow");
profile.bf3overviewstats._use_351_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3overviewstats._use_351_22_block_title = new Surface.Block("profile.bf3overviewstats._use_351_22_block_title");
profile.bf3overviewstats._use_351_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Multiplayer Score"));
    c.push('\n <div class="profile-venicestats-overview-mpscore-header">\n <div class="profile-venicestats-overview-mpscore-header-player1">\n');
    if (S.Modifier.count(o.compareStats)) {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) ? o.user : false),"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <div class="profile-venicestats-overview-mpscore-header-text">- vs -</div>\n <div class="profile-venicestats-overview-mpscore-header-player2">\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.compareUser) != "undefined" && o.compareUser !== null) ? o.compareUser : false),"gravatarSize": 22,"tipsyTitle": true}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.bf3overviewstats._use_351_22_block_content = new Surface.Block("profile.bf3overviewstats._use_351_22_block_content");
profile.bf3overviewstats._use_351_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_bf3overviewstats_388_38_list;
    var l_myKitScoresOrder;
    c.push(' <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-boxnarrowclean-table ');
    if (!(S.Modifier.count(o.compareStats))) {
        c.push("nocompare");
    }
    c.push('">\n <tfoot>\n <tr>\n <td class="profile-venicestats-overview-table-label"><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut("Total"));
    c.push('</div></td>\n <td><div class="profile-venicestats-overview-table-cell-border profile-venicestats-overview-total-score">');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "totalScore", 0))));
    c.push("</div></td>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.compareStats, "totalScore", 0))));
        c.push("</div></td>\n");
    }
    c.push(" </tr>\n </tfoot>\n <tbody>\n");
    l_myKitScoresOrder = ["1", "2", "32", "8"];
    l_for_profile_bf3overviewstats_388_38_list = l_myKitScoresOrder;
    if ((S.Modifier.count(l_for_profile_bf3overviewstats_388_38_list) > 0)) {
        for (var l_for_profile_bf3overviewstats_388_38_key in l_for_profile_bf3overviewstats_388_38_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3overviewstats_388_38_list[l_for_profile_bf3overviewstats_388_38_key])) {
                continue;
            }
            var l_k = l_for_profile_bf3overviewstats_388_38_list[l_for_profile_bf3overviewstats_388_38_key];
            c.push(' <tr>\n <td class="profile-venicestats-overview-table-label">\n <div class="profile-venicestats-overview-table-cell-border">\n <img class="profile-venicestats-overview-kit-icon" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/kit-icon-", S.Modifier.get(S.Modifier.get(o.kitMap, l_k), "name")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n ');
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.kitMap, l_k), "name")));
            c.push('\n </div>\n </td>\n <td><div class="profile-venicestats-overview-table-cell-border">');
            c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(S.Modifier.get(o.overviewStats, "kitScores"), l_k, 0))));
            c.push("</div></td>\n");
            if (S.Modifier.count(o.compareStats)) {
                c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
                c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(S.Modifier.get(o.compareStats, "kitScores"), l_k, 0))));
                c.push("</div></td>\n");
            }
            c.push(" </tr>\n");
        }
    }
    c.push('\n <tr>\n <td class="profile-venicestats-overview-table-label"><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut("Vehicles"));
    c.push('</div></td>\n <td><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "sc_vehicle", 0))));
    c.push("</div></td>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.compareStats, "sc_vehicle", 0))));
        c.push("</div></td>\n");
    }
    c.push(' </tr>\n <tr class="profile-venicestats-overview-table-highlight">\n <td class="profile-venicestats-overview-table-label"><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut("Combat"));
    c.push('</div></td>\n <td><div class="profile-venicestats-overview-table-cell-border">=');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "combatScore", 0))));
    c.push("</div></td>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.compareStats, "combatScore", 0))));
        c.push("</div></td>\n");
    }
    c.push(' </tr>\n <tr class="profile-venicestats-overview-table-highlight">\n <td class="profile-venicestats-overview-table-label"><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut("Award"));
    c.push('</div></td>\n <td><div class="profile-venicestats-overview-table-cell-border">+');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "sc_award", 0))));
    c.push("</div></td>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.compareStats, "sc_award", 0))));
        c.push("</div></td>\n");
    }
    c.push(' </tr>\n <tr class="profile-venicestats-overview-table-highlight">\n <td class="profile-venicestats-overview-table-label"><div class="profile-venicestats-overview-table-cell-border">');
    c.push(Surface.valOut("Unlocks"));
    c.push('</div></td>\n <td><div class="profile-venicestats-overview-table-cell-border">+');
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "sc_unlock", 0))));
    c.push("</div></td>\n");
    if (S.Modifier.count(o.compareStats)) {
        c.push(' <td><div class="profile-venicestats-overview-table-cell-border last">');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.compareStats, "sc_unlock", 0))));
        c.push("</div></td>\n");
    }
    c.push(" </tr>\n </tbody>\n </table>\n");
    return c.join("");
};
profile.bf3overviewstats._use_444_22_block_extraClass = new Surface.Block("profile.bf3overviewstats._use_444_22_block_extraClass");
profile.bf3overviewstats._use_444_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-venicestats-overview-boxwideclean");
    return c.join("");
};
profile.bf3overviewstats._use_444_22_block_extraClassInner = new Surface.Block("profile.bf3overviewstats._use_444_22_block_extraClassInner");
profile.bf3overviewstats._use_444_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3overviewstats._use_444_22_block_shadow = new Surface.Block("profile.bf3overviewstats._use_444_22_block_shadow");
profile.bf3overviewstats._use_444_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3overviewstats._use_444_22_block_title = new Surface.Block("profile.bf3overviewstats._use_444_22_block_title");
profile.bf3overviewstats._use_444_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("More Statistics"));
    return c.join("");
};
profile.bf3overviewstats._use_444_22_block_content = new Surface.Block("profile.bf3overviewstats._use_444_22_block_content");
profile.bf3overviewstats._use_444_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-boxwideclean-table">\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Kills"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "kills", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Deaths"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "deaths", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("K/D Ratio"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.round(S.Modifier.get(o.overviewStats, "kdRatio", 0), 3)));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Kill assists"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "killAssists", 0)))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Score/Min"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "scorePerMinute", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Quits"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "quitPercentage", 0))));
    c.push('%</td>\n </tr>\n </table>\n <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-boxwideclean-table">\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Vehicles Destroyed"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "vehiclesDestroyed", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Vehicles Destroyed Assists"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "vehiclesDestroyedAssists", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Avg. Weapon Accuracy"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "accuracy", 0))));
    c.push('%</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Longest Headshot"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "longestHeadshot", 0))));
    c.push(' m</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Kill Streak Bonus"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "killStreakBonus", 0))));
    c.push("</td>\n </tr>\n");
    if (((S.Modifier.toint(S.Modifier.get(o.overviewStats, "elo")) !== null) ? S.Modifier.toint(S.Modifier.get(o.overviewStats, "elo")) : false)) {
        c.push(' <tr>\n <td class="profile-venicestats-overview-table-label">Skill</td>\n <td>');
        c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "elo", 0))));
        c.push("</td>\n </tr>\n");
    }
    c.push('\n </table>\n <table cellspacing="0" cellpadding="0" class="profile-venicestats-overview-boxwideclean-table last">\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Squad Score Bonus"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "sc_squad", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Repairs"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "repairs", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Revives"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "revives", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Heals"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "heals", 0))));
    c.push('</td>\n </tr>\n <tr>\n <td class="profile-venicestats-overview-table-label">');
    c.push(Surface.valOut("Resupplies"));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(S.Modifier.get(o.overviewStats, "resupplies", 0))));
    c.push("</td>\n </tr>\n </table>\n");
    return c.join("");
};
profile.bf3overviewstats.block_statsBottom = new Surface.Block("profile.bf3overviewstats.block_statsBottom");
profile.bf3overviewstats.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="profile-venicestats-overview-boxnarrowclean-wrapper">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3overviewstats_use_269_22, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3overviewstats_use_308_22, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3overviewstats_use_351_22, kwargs));
    c.push('\n <div class="base-clear"></div>\n </div>\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_bf3overviewstats_use_444_22, kwargs));
    c.push(' <div class="base-clear"></div>\n');
    return c.join("");
};
var block_profile_bf3statsitem = new Surface.BlockConfig("", {"statsBottom": "profile.bf3statsitem.block_statsBottom","statsContent": "profile.bf3statsitem.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3statsitem"));
profile.bf3statsitem.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3statsitem;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3statsitem");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    c.push(b.get("statsBottom")(o, b, kwargs));
    c.push("\n");
    return c.join("");
};
var block_profile_bf3statsitem_use_150_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3statsitem._use_150_22_block_content","title": "profile.bf3statsitem._use_150_22_block_title","extraClassInner": "profile.bf3statsitem._use_150_22_block_extraClassInner","shadow": "profile.bf3statsitem._use_150_22_block_shadow","extraClass": "profile.bf3statsitem._use_150_22_block_extraClass"});
var block_profile_bf3statsitem_use_92_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3statsitem._use_92_22_block_content","title": "profile.bf3statsitem._use_92_22_block_title","extraClassInner": "profile.bf3statsitem._use_92_22_block_extraClassInner","shadow": "profile.bf3statsitem._use_92_22_block_shadow","extraClass": "profile.bf3statsitem._use_92_22_block_extraClass"});
var block_profile_bf3statsitem_use_43_22 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "profile.bf3statsitem._use_43_22_block_content","title": "profile.bf3statsitem._use_43_22_block_title","extraClassInner": "profile.bf3statsitem._use_43_22_block_extraClassInner","shadow": "profile.bf3statsitem._use_43_22_block_shadow","extraClass": "profile.bf3statsitem._use_43_22_block_extraClass"});
profile.bf3statsitem._use_43_22_block_extraClass = new Surface.Block("profile.bf3statsitem._use_43_22_block_extraClass");
profile.bf3statsitem._use_43_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column first");
    return c.join("");
};
profile.bf3statsitem._use_43_22_block_extraClassInner = new Surface.Block("profile.bf3statsitem._use_43_22_block_extraClassInner");
profile.bf3statsitem._use_43_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column-height");
    return c.join("");
};
profile.bf3statsitem._use_43_22_block_title = new Surface.Block("profile.bf3statsitem._use_43_22_block_title");
profile.bf3statsitem._use_43_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Characteristics"));
    return c.join("");
};
profile.bf3statsitem._use_43_22_block_content = new Surface.Block("profile.bf3statsitem._use_43_22_block_content");
profile.bf3statsitem._use_43_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_charInfoList;
    var l_for_profile_bf3statsitem_70_34_list;
    var l_statVal;
    c.push(' <div class="venice-statsitem-bar-container">\n');
    if (S.Modifier.get(o.statsItem, "itemWeapon", false)) {
        l_charInfoList = ["fireModeAuto", "fireModeSingle", "fireModeBurst", "rateOfFire", "ammo", "range"];
    } else {
        l_charInfoList = [];
    }
    l_for_profile_bf3statsitem_70_34_list = l_charInfoList;
    if ((S.Modifier.count(l_for_profile_bf3statsitem_70_34_list) > 0)) {
        for (var l_for_profile_bf3statsitem_70_34_key in l_for_profile_bf3statsitem_70_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_70_34_list[l_for_profile_bf3statsitem_70_34_key])) {
                continue;
            }
            var l_barKey = l_for_profile_bf3statsitem_70_34_list[l_for_profile_bf3statsitem_70_34_key];
            c.push(' <div class="venice-statsitem-box-item">\n <div class="venice-statsitem-bar-title">');
            l_statVal = ("ID_WEB_PROFILE_STATS_" + S.Modifier.upper(l_barKey));
            c.push(Surface.valOut((S.translations[l_statVal] || l_statVal)));
            c.push('</div>\n <div class="venice-statsitem-bar-value">\n');
            if ((S.Modifier.get(o.statsItem.data, l_barKey, false) == "false")) {
                c.push(" ");
                c.push(Surface.valOut("No"));
                c.push("\n");
            } else {
                if ((S.Modifier.get(o.statsItem.data, l_barKey, false) == "true")) {
                    c.push(" ");
                    c.push(Surface.valOut("Yes"));
                    c.push("\n");
                } else {
                    l_statVal = S.Modifier.get(o.statsItem.data, l_barKey, "-");
                    c.push(" ");
                    c.push(Surface.valOut((S.translations[l_statVal] || l_statVal)));
                    c.push("\n");
                }
            }
            c.push(" </div>\n </div>\n");
        }
    } else {
        c.push(' <p class="profile-statsitem-no-additional-info" style="margin-top: 90px;">');
        c.push(Surface.valOut("There are no characteristics for this item."));
        c.push("</p>\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.bf3statsitem._use_43_22_block_shadow = new Surface.Block("profile.bf3statsitem._use_43_22_block_shadow");
profile.bf3statsitem._use_43_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3statsitem._use_92_22_block_extraClass = new Surface.Block("profile.bf3statsitem._use_92_22_block_extraClass");
profile.bf3statsitem._use_92_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column");
    return c.join("");
};
profile.bf3statsitem._use_92_22_block_extraClassInner = new Surface.Block("profile.bf3statsitem._use_92_22_block_extraClassInner");
profile.bf3statsitem._use_92_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column-height");
    return c.join("");
};
profile.bf3statsitem._use_92_22_block_title = new Surface.Block("profile.bf3statsitem._use_92_22_block_title");
profile.bf3statsitem._use_92_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Statistics"));
    return c.join("");
};
profile.bf3statsitem._use_92_22_block_content = new Surface.Block("profile.bf3statsitem._use_92_22_block_content");
profile.bf3statsitem._use_92_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_stats;
    var l_for_profile_bf3statsitem_115_34_list;
    var l_for_profile_bf3statsitem_133_34_list;
    var l_val;
    if (o.comparePersonaId) {
        c.push(' <div class="venice-statitem-compare-info-users">\n <div class="venice-statitem-compare-info-users-left">\n </div>\n <div class="venice-statitem-compare-info-users-right">\n </div>\n </div>\n');
    }
    if (S.Modifier.get(o.statsItem, "itemWeapon", false)) {
        c.push("\n");
        if ((o.item.category == "Special")) {
            l_stats = ["kills"];
        } else {
            l_stats = ["kills", "headshots", "shotsFired", "accuracy"];
        }
        l_for_profile_bf3statsitem_115_34_list = l_stats;
        if ((S.Modifier.count(l_for_profile_bf3statsitem_115_34_list) > 0)) {
            for (var l_for_profile_bf3statsitem_115_34_key in l_for_profile_bf3statsitem_115_34_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_115_34_list[l_for_profile_bf3statsitem_115_34_key])) {
                    continue;
                }
                var l_v = l_for_profile_bf3statsitem_115_34_list[l_for_profile_bf3statsitem_115_34_key];
                c.push(' <div class="venice-statitem-compare-info">\n <div class="venice-statitem-compare-left">\n ');
                c.push(Surface.valOut(l_v));
                c.push("\n </div>\n");
                if ((l_v == "accuracy")) {
                    c.push(" ");
                    l_val = S.Modifier.round((S.Modifier.get(o.item, l_v, "0") * 100), 1);
                    c.push("%\n");
                } else {
                    l_val = S.Modifier.get(o.item, l_v, "-");
                }
                c.push(' <div class="venice-statitem-compare-right">');
                c.push(Surface.valOut(l_val));
                c.push('</div>\n </div>\n <div class="base-clear"></div>\n');
            }
        }
    } else {
        l_stats = {"kills": "Kills","timeIn": "Time in","destroyXinY": "Vehicles Destroyed"};
        l_for_profile_bf3statsitem_133_34_list = l_stats;
        if ((S.Modifier.count(l_for_profile_bf3statsitem_133_34_list) > 0)) {
            for (var l_k in l_for_profile_bf3statsitem_133_34_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_133_34_list[l_k])) {
                    continue;
                }
                var l_v = l_for_profile_bf3statsitem_133_34_list[l_k];
                c.push(' <div class="venice-statitem-compare-info">\n <div class="venice-statitem-compare-left">\n ');
                c.push(Surface.valOut(l_v));
                c.push('\n </div>\n <div class="venice-statitem-compare-right">');
                if ((l_k == "timeIn")) {
                    c.push(Surface.valOut(S.Modifier.duration(S.Modifier.get(o.item, l_k, 0))));
                } else {
                    c.push(Surface.valOut(S.Modifier.get(o.item, l_k, 0)));
                }
                c.push('</div>\n </div>\n <div class="base-clear"></div>\n');
            }
        }
    }
    c.push("\n");
    return c.join("");
};
profile.bf3statsitem._use_92_22_block_shadow = new Surface.Block("profile.bf3statsitem._use_92_22_block_shadow");
profile.bf3statsitem._use_92_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3statsitem._use_150_22_block_extraClass = new Surface.Block("profile.bf3statsitem._use_150_22_block_extraClass");
profile.bf3statsitem._use_150_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column");
    return c.join("");
};
profile.bf3statsitem._use_150_22_block_extraClassInner = new Surface.Block("profile.bf3statsitem._use_150_22_block_extraClassInner");
profile.bf3statsitem._use_150_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("venice-single-stats-column-height");
    return c.join("");
};
profile.bf3statsitem._use_150_22_block_title = new Surface.Block("profile.bf3statsitem._use_150_22_block_title");
profile.bf3statsitem._use_150_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Next Unlock"));
    return c.join("");
};
profile.bf3statsitem._use_150_22_block_content = new Surface.Block("profile.bf3statsitem._use_150_22_block_content");
profile.bf3statsitem._use_150_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_ulLangKey;
    var l_ulLangDesc;
    var l_for_profile_bf3statsitem_189_42_list;
    var l_localeVehicleUnlocks;
    var l_for_profile_bf3statsitem_159_42_list;
    var l_localeWeaponUnlocks;
    c.push(' <div class="venice-statsitem-unlock-container">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.statsItemUnlocks) != "undefined" && o.statsItemUnlocks !== null) && (S.Modifier.count(o.statsItemUnlocks) > 0))) {
        if (S.Modifier.get(o.statsItem, "itemVehicle", false)) {
            l_localeVehicleUnlocks = S.Modifier.get(o.bf3GadgetsLocale, "vehicleunlocks");
            l_for_profile_bf3statsitem_159_42_list = o.statsItemUnlocks;
            if ((S.Modifier.count(l_for_profile_bf3statsitem_159_42_list) > 0)) {
                for (var l_for_profile_bf3statsitem_159_42_key in l_for_profile_bf3statsitem_159_42_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_159_42_list[l_for_profile_bf3statsitem_159_42_key])) {
                        continue;
                    }
                    var l_unlock = l_for_profile_bf3statsitem_159_42_list[l_for_profile_bf3statsitem_159_42_key];
                    if ((l_unlock.unlocked >= 100)) {
                        continue;
                    } else {
                        l_ulLangKey = S.Modifier.get(S.Modifier.get(l_localeVehicleUnlocks, l_unlock.unlockId), "name");
                        l_ulLangDesc = S.Modifier.get(S.Modifier.get(l_localeVehicleUnlocks, l_unlock.unlockId), "desc");
                        c.push(' <div class="statsitem-ul-data">\n <div class="ul-img">\n <img title="');
                        c.push(Surface.valOut((S.translations[l_ulLangKey] || l_ulLangKey)));
                        c.push('" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", S.Modifier.concat(S.Modifier.get(S.Modifier.get(l_localeVehicleUnlocks, l_unlock.unlockId), "image"), ".png")), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" width="90" height="54" />\n </div>\n <div class="name">');
                        c.push(Surface.valOut((S.translations[l_ulLangKey] || l_ulLangKey)));
                        c.push('</div>\n <div class="progress">\n ');
                        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"max": l_unlock.valueNeeded,"value": l_unlock.actualValue,"width": "183px"}, null, kwargs));
                        c.push('\n <div class="profile-stats-unlock-item-requirements">\n ');
                        c.push(Surface.valOut((S.translations[o.langKey] || o.langKey)));
                        c.push(" ");
                        c.push(Surface.valOut("Score"));
                        c.push('\n </div>\n <div class="profile-stats-unlock-item-requirements-completed">\n <span>');
                        c.push(Surface.valOut(l_unlock.actualValue));
                        c.push("</span> / ");
                        c.push(Surface.valOut(S.Modifier.toint(l_unlock.valueNeeded)));
                        c.push("\n </div>\n </div>\n </div>\n <p>");
                        c.push(Surface.valOut((S.translations[l_ulLangDesc] || l_ulLangDesc)));
                        c.push("</p>\n");
                        break;
                    }
                }
            }
        } else {
            if (S.Modifier.get(o.statsItem, "itemWeapon", false)) {
                l_localeWeaponUnlocks = S.Modifier.get(o.bf3GadgetsLocale, "weaponaccessory");
                l_for_profile_bf3statsitem_189_42_list = o.statsItemUnlocks;
                if ((S.Modifier.count(l_for_profile_bf3statsitem_189_42_list) > 0)) {
                    for (var l_for_profile_bf3statsitem_189_42_key in l_for_profile_bf3statsitem_189_42_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_189_42_list[l_for_profile_bf3statsitem_189_42_key])) {
                            continue;
                        }
                        var l_unlock = l_for_profile_bf3statsitem_189_42_list[l_for_profile_bf3statsitem_189_42_key];
                        if (((l_unlock.unlocked >= 100) || (S.Modifier.toint(l_unlock.valueNeeded) == 0))) {
                            continue;
                        } else {
                            l_ulLangKey = S.Modifier.get(S.Modifier.get(l_localeWeaponUnlocks, l_unlock.unlockId), "name");
                            l_ulLangDesc = S.Modifier.get(S.Modifier.get(l_localeWeaponUnlocks, l_unlock.unlockId), "desc");
                            c.push(' <div class="statsitem-ul-data">\n <div class="ul-img">\n <img title="');
                            c.push(Surface.valOut((S.translations[l_ulLangKey] || l_ulLangKey)));
                            c.push('" src="');
                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", S.Modifier.concat(S.Modifier.get(S.Modifier.get(l_localeWeaponUnlocks, l_unlock.unlockId), "image"), ".png")), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                            c.push('" width="90" height="54" />\n </div>\n <div class="name">');
                            c.push(Surface.valOut((S.translations[l_ulLangKey] || l_ulLangKey)));
                            c.push('</div>\n <div class="progress">\n ');
                            c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"max": l_unlock.valueNeeded,"value": l_unlock.actualValue,"width": "173px"}, null, kwargs));
                            c.push('\n <div class="profile-stats-unlock-item-requirements">\n ');
                            c.push(Surface.valOut((S.translations[o.langKey] || o.langKey)));
                            c.push(" ");
                            c.push(Surface.valOut("Kills"));
                            c.push('\n </div>\n <div class="profile-stats-unlock-item-requirements-completed">\n <span>');
                            c.push(Surface.valOut(o.item.kills));
                            c.push("</span> / ");
                            c.push(Surface.valOut(S.Modifier.toint(l_unlock.valueNeeded)));
                            c.push("\n </div>\n </div>\n </div>\n <p>");
                            c.push(Surface.valOut((S.translations[l_ulLangDesc] || l_ulLangDesc)));
                            c.push("</p>\n");
                            break;
                        }
                    }
                }
            }
        }
    } else {
        c.push(' <p class="profile-statsitem-no-additional-info">');
        c.push(Surface.valOut("There are no unlocks for this item."));
        c.push("</p>\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.bf3statsitem._use_150_22_block_shadow = new Surface.Block("profile.bf3statsitem._use_150_22_block_shadow");
profile.bf3statsitem._use_150_22_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bf3statsitem.block_statsContent = new Surface.Block("profile.bf3statsitem.block_statsContent");
profile.bf3statsitem.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_ulLangKey;
    var l_unlockDescription;
    var l_localAccessoryUnlocks;
    var l_for_profile_bf3statsitem_245_10_list;
    var l_unlockUnitKey;
    var l_ulDescKey;
    var l_langKey;
    var l_langDesc;
    var l_unlocked;
    var l_licenseUnlock;
    c.push(' <div class="venice-stats-container">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.statsItem) != "undefined" && o.statsItem !== null)) {
        c.push("\n");
        if (S.Modifier.get(o.statsItem, "itemWeapon", false)) {
            o.item = S.Modifier.get(o.statsItem, "itemWeapon");
        } else {
            if (S.Modifier.get(o.statsItem, "itemVehicle", false)) {
                o.item = S.Modifier.get(o.statsItem, "itemVehicle");
            }
        }
        c.push('\n <div class="venice-stats-info-area">\n <div class="venice-stats-info-link">\n');
        if ((S.Modifier.get(o.statsItem, "itemWeapon", false) || ((typeof (o) != "undefined" && o !== null && typeof (o.equipment) != "undefined" && o.equipment !== null) ? o.equipment : false))) {
            c.push(' <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaName": o.personaName,"personaId": o.personaId})));
            c.push('">');
            c.push(Surface.valOut("Back to Overview"));
            c.push("</a>\n");
        } else {
            if (S.Modifier.get(o.statsItem, "itemVehicle", false)) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/vehicles/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaName": o.personaName,"personaId": o.personaId})));
                c.push('">');
                c.push(Surface.valOut("Back to Overview"));
                c.push("</a>\n");
            }
        }
        c.push(' </div>\n <div class="venice-stats-info-subtitle">');
        c.push(Surface.valOut(S.Modifier.get(o.statsItem, "subtitle", "")));
        c.push('</div>\n <div class="venice-stats-info-image">\n');
        l_langKey = S.Modifier.get(o.statsItem.data, "name", false);
        if (!(l_langKey)) {
            l_langKey = S.Modifier.get(o.statsItem.data, "label", false);
        }
        c.push(' <img width="512" height="308" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_512x308/", S.Modifier.get(o.statsItem.data, "image", "")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n </div>\n <div class="venice-stats-info-title">\n ');
        c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
        c.push('\n </div>\n <div class="venice-stats-info-subtitle">');
        c.push(Surface.valOut(S.Modifier.get(o.statsItem, "subtitle", "")));
        c.push('</div>\n <div class="venice-stats-info-description">\n');
        l_langDesc = S.Modifier.concat("", S.Modifier.get(o.statsItem.data, "desc", "No description"));
        c.push(" ");
        c.push(Surface.valOut((S.translations[l_langDesc] || l_langDesc)));
        c.push("\n </div>\n </div>\n");
        if (!(S.Modifier.get(o.statsItem, "itemEquipment", true))) {
            c.push('\n <div class="venice-stats-small-boxes">\n');
            c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3statsitem_use_43_22, kwargs));
            c.push("\n");
            c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3statsitem_use_92_22, kwargs));
            o.langKey = l_langKey;
            c.push(Surface.importTemplate(("common" + ("." + "boxnarrowclean")), o, block_profile_bf3statsitem_use_150_22, kwargs));
            c.push(" </div>\n");
        }
        c.push("\n");
    }
    c.push(' <div class="base-clear"></div>\n');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.statsItem) != "undefined" && o.statsItem !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.statsItemUnlocks) != "undefined" && o.statsItemUnlocks !== null)) && (S.Modifier.count(o.statsItemUnlocks) > 0))) {
        c.push(' <div class="common-secondary-column-line" style="margin-top:10px; margin-bottom:10px;"></div>\n <div class="venice-stats-info-title secondary">');
        c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
        c.push(" ");
        c.push(Surface.valOut("unlock progression"));
        c.push("</div>\n");
        l_localAccessoryUnlocks = false;
        l_unlockUnitKey = "ID_WEB_COMMON_SCORE";
        if (S.Modifier.get(o.statsItem, "itemVehicle", false)) {
            l_localAccessoryUnlocks = S.Modifier.get(o.bf3GadgetsLocale, "vehicleunlocks");
        } else {
            if (S.Modifier.get(o.statsItem, "itemWeapon", false)) {
                l_unlockUnitKey = "ID_WEB_COMMON_SCORE_KILLS";
                l_localAccessoryUnlocks = S.Modifier.get(o.bf3GadgetsLocale, "weaponaccessory");
            }
        }
        c.push("\n");
        l_for_profile_bf3statsitem_245_10_list = S.Modifier.sort(o.statsItemUnlocks, "valueNeeded", "asc");
        if ((S.Modifier.count(l_for_profile_bf3statsitem_245_10_list) > 0)) {
            for (var l_for_profile_bf3statsitem_245_10_key in l_for_profile_bf3statsitem_245_10_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3statsitem_245_10_list[l_for_profile_bf3statsitem_245_10_key])) {
                    continue;
                }
                var l_unlock = l_for_profile_bf3statsitem_245_10_list[l_for_profile_bf3statsitem_245_10_key];
                l_ulLangKey = S.Modifier.get(S.Modifier.get(l_localAccessoryUnlocks, l_unlock.unlockId), "name");
                l_ulDescKey = S.Modifier.get(S.Modifier.get(l_localAccessoryUnlocks, l_unlock.unlockId), "desc");
                l_unlocked = l_unlock.unlocked;
                l_licenseUnlock = false;
                c.push("\n");
                if ((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.license) != "undefined" && l_unlock.license !== null)) {
                    l_licenseUnlock = true;
                    l_unlockDescription = $S.callFunction("common.licenseNiceText", l_unlock.license, b, kwargs);
                } else {
                    if ((l_unlocked >= 100)) {
                        l_unlockDescription = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("Unlocked at", " "), ((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.valueNeeded) != "undefined" && l_unlock.valueNeeded !== null) ? l_unlock.valueNeeded : 0)), " "), S.Modifier.lower((S.translations[l_unlockUnitKey] || l_unlockUnitKey)));
                    } else {
                        l_unlockDescription = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_unlock.actualValue, " "), "of"), " "), l_unlock.valueNeeded), " "), (S.translations[l_unlockUnitKey] || l_unlockUnitKey));
                    }
                }
                c.push(' <div data-battlebubble="');
                c.push(Surface.valOut((S.translations[l_ulLangKey] || l_ulLangKey)));
                c.push("<br>");
                c.push(Surface.valOut((S.translations[l_unlockDescription] || l_unlockDescription)));
                c.push("<br>");
                c.push(Surface.valOut((S.translations[l_ulDescKey] || l_ulDescKey)));
                c.push('" class="bubble-title profile-stats-unlock-progression-kit-item ');
                c.push(Surface.valOut(l_unlocked));
                c.push(" ");
                if ((S.Modifier.toint(l_unlocked) < 100)) {
                    c.push("nottaken");
                }
                c.push('" style="float: left; ">\n');
                if (!(l_licenseUnlock)) {
                    c.push(' <div class="progress" style="width:');
                    c.push(Surface.valOut(S.Modifier.toint(l_unlocked)));
                    c.push('%"></div>\n');
                }
                c.push(' <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", S.Modifier.concat(S.Modifier.get(S.Modifier.get(l_localAccessoryUnlocks, l_unlock.unlockId), "image"), ".png")), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" width="79px" height="43px" />\n </div>\n');
            }
        }
        c.push(' <div class="base-clear"></div>\n </div>\n');
    }
    return c.join("");
};
profile.bf3statsitem.block_statsBottom = new Surface.Block("profile.bf3statsitem.block_statsBottom");
profile.bf3statsitem.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_bf3upcomingunlocks = new Surface.BlockConfig("", {"statsContent": "profile.bf3upcomingunlocks.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3upcomingunlocks"));
profile.bf3upcomingunlocks.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3upcomingunlocks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3upcomingunlocks");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    c.push("\n");
    return c.join("");
};
profile.bf3upcomingunlocks.surface_99_14 = new Surface.SingleSurface("profile.bf3upcomingunlocks.surface_99_14");
profile.bf3upcomingunlocks.surface_99_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3upcomingunlocks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3upcomingunlocks");
    c.push('<surf:container id="');
    c.push("unlocks");
    c.push('">');
    var l_parentName;
    var l_url;
    var l_parentCategoryName;
    var l_for_profile_bf3upcomingunlocks_112_26_list;
    var l_image;
    var l_name;
    var l_count;
    var l_criteria;
    var l_ul;
    var l_for_profile_bf3upcomingunlocks_112_26_iteration;
    c.push(' <table cellpadding="0" cellspacing="0" class="leaderboard-venice-specific" id="profile-stats-awards-upcoming-table">\n <thead>\n <tr>\n <th class="profile-stats-venice-awards-head-completion">');
    c.push(Surface.valOut("Completion"));
    c.push('</th>\n <th class="profile-stats-venice-awards-head-award"></th>\n </tr>\n </thead>\n <tbody>\n');
    l_count = 0;
    l_for_profile_bf3upcomingunlocks_112_26_list = S.Modifier.sortfast(o.unlocks, "unlockPercentage", "desc");
    l_for_profile_bf3upcomingunlocks_112_26_iteration = 0;
    if ((S.Modifier.count(l_for_profile_bf3upcomingunlocks_112_26_list) > 0)) {
        for (var l_for_profile_bf3upcomingunlocks_112_26_key in l_for_profile_bf3upcomingunlocks_112_26_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3upcomingunlocks_112_26_list[l_for_profile_bf3upcomingunlocks_112_26_key])) {
                continue;
            }
            var l_unlock = l_for_profile_bf3upcomingunlocks_112_26_list[l_for_profile_bf3upcomingunlocks_112_26_key];
            l_for_profile_bf3upcomingunlocks_112_26_iteration = (l_for_profile_bf3upcomingunlocks_112_26_iteration + 1);
            c.push("\n");
            if (((o.filterByKit == "Other") || (o.filterByKit == ((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.kit) != "undefined" && l_unlock.kit !== null) ? l_unlock.kit : "Other")))) {
                l_count = (l_count + 1);
                c.push("\n");
            } else {
                continue;
            }
            c.push("\n");
            if ((l_count >= 30)) {
                break;
            }
            c.push("\n");
            l_url = false;
            if (S.Modifier.count(S.Modifier.get(l_unlock, "weaponAddonUnlock"))) {
                l_ul = S.Modifier.get(l_unlock, "weaponAddonUnlock");
                l_name = S.Modifier.get(S.Modifier.get(o.weaponAccessoryLocale, l_ul.unlockId), "name");
                l_image = S.Modifier.get(S.Modifier.get(o.weaponAccessoryLocale, l_ul.unlockId), "image");
                l_parentName = S.Modifier.get(S.Modifier.get(o.weaponsLocale, l_ul.weaponCode), "name");
                c.push("\n");
                l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "kills", l_parentName, b, kwargs);
                c.push("\n");
                l_url = S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.statsPersona.personaName,"statsId": l_ul.weaponCode,"statsName": l_parentName,"personaId": o.statsPersona.personaId});
                c.push("\n");
            } else {
                if (S.Modifier.count(S.Modifier.get(l_unlock, "weaponUnlock"))) {
                    l_ul = S.Modifier.get(l_unlock, "weaponUnlock");
                    l_name = S.Modifier.get(S.Modifier.get(o.weaponsLocale, l_ul.unlockId), "name");
                    l_image = S.Modifier.get(S.Modifier.get(o.weaponsLocale, l_ul.unlockId), "image");
                    c.push("\n");
                    l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "score", b, kwargs);
                    c.push("\n");
                    l_url = S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.statsPersona.personaName,"statsId": l_ul.unlockId,"statsName": l_name,"personaId": o.statsPersona.personaId});
                    c.push("\n");
                } else {
                    if (S.Modifier.count(S.Modifier.get(l_unlock, "vehicleAddonUnlock"))) {
                        l_ul = S.Modifier.get(l_unlock, "vehicleAddonUnlock");
                        l_name = S.Modifier.get(S.Modifier.get(o.vehicleAccessoryLocale, l_ul.unlockId), "name");
                        l_image = S.Modifier.get(S.Modifier.get(o.vehicleAccessoryLocale, l_ul.unlockId), "image");
                        l_parentCategoryName = l_ul.vehicleCategory;
                        c.push("\n");
                        l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, "score", l_parentCategoryName, b, kwargs);
                        c.push("\n");
                    } else {
                        if (S.Modifier.count(S.Modifier.get(l_unlock, "soldierSpecializationUnlock"))) {
                            l_ul = S.Modifier.get(l_unlock, "soldierSpecializationUnlock");
                            l_name = S.Modifier.get(S.Modifier.get(o.soldierSpecializationLocale, l_ul.unlockId), "name");
                            l_image = S.Modifier.get(S.Modifier.get(o.soldierSpecializationLocale, l_ul.unlockId), "image");
                            c.push("\n");
                            l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
                            c.push("\n");
                        } else {
                            if (S.Modifier.count(S.Modifier.get(l_unlock, "kitItemUnlock"))) {
                                l_ul = S.Modifier.get(l_unlock, "kitItemUnlock");
                                l_name = S.Modifier.get(S.Modifier.get(o.kitItemLocale, l_ul.unlockId), "name");
                                l_image = S.Modifier.get(S.Modifier.get(o.kitItemLocale, l_ul.unlockId), "image");
                                c.push("\n");
                                l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
                                l_url = S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.statsPersona.personaName,"statsId": l_ul.unlockId,"statsName": l_ul.unlockId,"personaId": o.statsPersona.personaId});
                                c.push("\n");
                            }
                        }
                    }
                }
            }
            c.push("\n");
            if (!((typeof (l_name) != "undefined" && l_name !== null))) {
                continue;
            }
            c.push(' <tr class="leaderboard-venice-specific-row');
            if ((l_for_profile_bf3upcomingunlocks_112_26_iteration == 1)) {
                c.push(" first");
            }
            c.push(" filterByKit filterByKit_");
            c.push(Surface.valOut(((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.kit) != "undefined" && l_unlock.kit !== null) ? l_unlock.kit : "Other")));
            c.push('">\n <td class="leaderboard-venice-specific-cell">\n <div class="profile-stats-venice-awards-body-completion">\n <div class="profile-stats-venice-awards-body-completion-meter-wrapper">\n <div class="profile-stats-venice-awards-body-completion-meter" style="width: ');
            c.push(Surface.valOut(l_unlock.unlockPercentage));
            c.push('%;">\n </div>\n </div>\n <span class="profile-stats-venice-awards-body-completion-value">\n <span class="common-sorting-value">');
            c.push(Surface.valOut(S.Modifier.round(l_unlock.unlockPercentage)));
            c.push('</span>%\n </span>\n </div>\n <div class="profile-stats-venice-awards-body-separator"></div>\n </td>\n <td class="leaderboard-venice-specific-cell">\n <div class="profile-stats-venice-awards-body-award">\n <table cellspacing="0" cellpadding="0" border="0" class="profile-stats-venice-awards-body-award-padder">\n <tr>\n <td class="profile-stats-venice-awards-body-award-class">\n ');
            c.push(Surface.importTemplate(("common" + ("." + "bf3kit")), {"kit": l_unlock.kit}, null, kwargs));
            c.push('\n </td>\n <td class="profile-stats-venice-awards-body-award-type-img wide">\n');
            if (((typeof (l_url) != "undefined" && l_url !== null) ? l_url : false)) {
                c.push(' <a href="');
                c.push(Surface.valOut(l_url));
                c.push('"><img width="90" height="54" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt=""></a>\n');
            } else {
                c.push(' <img width="90" height="54" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_90x54/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="">\n');
            }
            c.push(' </td>\n <td class="profile-stats-venice-awards-body-award-info">\n <div class="profile-stats-venice-awards-body-award-info-title">\n <span class="common-sorting-value" style="font-size:12px;">\n');
            if (((typeof (l_url) != "undefined" && l_url !== null) ? l_url : false)) {
                c.push(' <a href="');
                c.push(Surface.valOut(l_url));
                c.push('" style="font-size:12px;">');
                c.push(Surface.valOut((S.translations[l_name] || l_name)));
                c.push("</a>\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut((S.translations[l_name] || l_name)));
                c.push("\n");
            }
            c.push(' </span>\n </div>\n <div class="profile-stats-venice-awards-body-award-info-todo">');
            c.push(Surface.valOut(l_criteria));
            c.push("</div>\n </td>\n </tr>\n </table>\n </div>\n </td>\n </tr>\n");
        }
    }
    c.push("\n </tbody>\n </table>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.bf3upcomingunlocks", "surface_99_14", "unlocks", o, b);
    return c.join("");
};
profile.bf3upcomingunlocks.block_statsContent = new Surface.Block("profile.bf3upcomingunlocks.block_statsContent");
profile.bf3upcomingunlocks.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_vehicleLocale;
    var l_vehicleAccessoryLocale;
    var l_weaponsLocale;
    var l_soldierSpecializationLocale;
    var l_weaponAccessoryLocale;
    var l_kitItemLocale;
    l_weaponsLocale = S.Modifier.get(o.bf3GadgetsLocale, "weapons");
    l_weaponAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "weaponaccessory");
    l_vehicleLocale = S.Modifier.get(o.bf3GadgetsLocale, "vehicles");
    l_vehicleAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "vehicleunlocks");
    l_soldierSpecializationLocale = S.Modifier.get(o.bf3GadgetsLocale, "soldierspecializations");
    l_kitItemLocale = S.Modifier.get(o.bf3GadgetsLocale, "kititems");
    o.platform = $S.callFunction("common.platformIntToPlatform", o.platformInt, b, kwargs);
    c.push('\n <div id="profile-stats-awards-main-column" class="profile-stats-main-full-column">\n <div id="profile-stats-awards-upcoming" class="profile-stats-type-container">\n <h1>');
    c.push(Surface.valOut("Upcoming Unlocks"));
    c.push('</h1>\n <div class="profile-stats-type-container-filters">\n <div class="common-selector-side-title">');
    c.push(Surface.valOut("Kits"));
    c.push('</div>\n <ul class="common-selector">\n <li class="first"><div class="kit-assault unlockFilterByKitButton" filterByKit="1"><p>');
    c.push(Surface.valOut("A"));
    c.push('</p></div></li>\n <li class=""><div class="kit-engineer unlockFilterByKitButton" filterByKit="2"><p>');
    c.push(Surface.valOut("S"));
    c.push('</p></div></li>\n <li class=""><div class="kit-support unlockFilterByKitButton" filterByKit="32"><p>');
    c.push(Surface.valOut("M"));
    c.push('</p></div></li>\n <li class=""><div class="kit-recon unlockFilterByKitButton" filterByKit="8"><p>');
    c.push(Surface.valOut("R"));
    c.push('</p></div></li>\n <li class="selected last "><div class="kit-all unlockFilterByKitButton" filterByKit="Other"><p>');
    c.push(Surface.valOut("ALL"));
    c.push("</p></div></li>\n </ul>\n </div>\n");
    o.filterByKit = "Other";
    c.push(profile.bf3upcomingunlocks.surface_99_14.render({"filterByKit": ((typeof (o) != "undefined" && o !== null && typeof (o.filterByKit) != "undefined" && o.filterByKit !== null) ? o.filterByKit : null),"kitItemLocale": ((typeof (l_kitItemLocale) != "undefined" && l_kitItemLocale !== null) ? l_kitItemLocale : null),"platform": ((typeof (o) != "undefined" && o !== null && typeof (o.platform) != "undefined" && o.platform !== null) ? o.platform : null),"soldierSpecializationLocale": ((typeof (l_soldierSpecializationLocale) != "undefined" && l_soldierSpecializationLocale !== null) ? l_soldierSpecializationLocale : null),"statsPersona": {"personaId": ((typeof (o) != "undefined" && o !== null && typeof (o.statsPersona) != "undefined" && o.statsPersona !== null && typeof (o.statsPersona.personaId) != "undefined" && o.statsPersona.personaId !== null) ? o.statsPersona.personaId : null),"personaName": ((typeof (o) != "undefined" && o !== null && typeof (o.statsPersona) != "undefined" && o.statsPersona !== null && typeof (o.statsPersona.personaName) != "undefined" && o.statsPersona.personaName !== null) ? o.statsPersona.personaName : null)},"unlocks": ((typeof (o) != "undefined" && o !== null && typeof (o.unlocks) != "undefined" && o.unlocks !== null) ? o.unlocks : null),"vehicleAccessoryLocale": ((typeof (l_vehicleAccessoryLocale) != "undefined" && l_vehicleAccessoryLocale !== null) ? l_vehicleAccessoryLocale : null),"vehicleLocale": ((typeof (l_vehicleLocale) != "undefined" && l_vehicleLocale !== null) ? l_vehicleLocale : null),"weaponAccessoryLocale": ((typeof (l_weaponAccessoryLocale) != "undefined" && l_weaponAccessoryLocale !== null) ? l_weaponAccessoryLocale : null),"weaponsLocale": ((typeof (l_weaponsLocale) != "undefined" && l_weaponsLocale !== null) ? l_weaponsLocale : null)}, b, kwargs));
    c.push(' <div class="base-clear"></div>\n </div>\n </div>\n <div class="bease-clear"></div>\n');
    return c.join("");
};
var block_profile_bf3vehiclesstats = new Surface.BlockConfig("", {"statsContent": "profile.bf3vehiclesstats.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3vehiclesstats"));
profile.bf3vehiclesstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3vehiclesstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3vehiclesstats");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    return c.join("");
};
profile.bf3vehiclesstats.block_statsContent = new Surface.Block("profile.bf3vehiclesstats.block_statsContent");
profile.bf3vehiclesstats.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_parentName;
    var l_numkills;
    var l_iter;
    var l_for_profile_bf3vehiclesstats_86_38_list;
    var l_name;
    var l_localeVehicles;
    var l_imageKey;
    var l_for_profile_bf3vehiclesstats_143_26_list;
    var l_notReallyVehicles;
    var l_for_profile_bf3vehiclesstats_83_30_list;
    var l_iterr;
    var l_for_profile_bf3vehiclesstats_36_18_iteration;
    var l_vehicleAccessoryLocale;
    var l_image;
    var l_for_profile_bf3vehiclesstats_36_18_list;
    var l_for_profile_bf3vehiclesstats_120_10_list;
    var l_langKey;
    var l_criteria;
    var l_ul;
    var l_compareVehicle;
    var l_langDescKey;
    l_localeVehicles = S.Modifier.get(o.bf3GadgetsLocale, "vehicles");
    l_vehicleAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "vehicleunlocks");
    o.platform = $S.callFunction("common.platformIntToPlatform", o.platformInt, b, kwargs);
    c.push('\n <div id="profile-stats-weapons-main-column" class="profile-stats-main-column">\n <div id="profile-stats-vehicle-statistics" class="profile-stats-type-container">\n <h1>');
    c.push(Surface.valOut("Vehicle statistics"));
    c.push('</h1>\n <table id="statisticstable" class="common-table statisticstable tablesorter" cellpadding="0">\n <thead>\n <tr>\n <th></th>\n <th>');
    c.push(Surface.valOut("Vehicle"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Kills"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Time used"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Unlocks"));
    c.push("</th>\n </tr>\n </thead>\n <tbody>\n");
    l_iter = 0;
    l_notReallyVehicles = ["seqMAV", "seqEOD", "seqUGS", "seqRad", "seqSOF", "seqM224"];
    c.push("\n");
    l_for_profile_bf3vehiclesstats_36_18_list = S.Modifier.multisort(o.mainVehicleStats, "kills", "desc", "timeIn", "desc");
    l_for_profile_bf3vehiclesstats_36_18_iteration = 0;
    if ((S.Modifier.count(l_for_profile_bf3vehiclesstats_36_18_list) > 0)) {
        for (var l_for_profile_bf3vehiclesstats_36_18_key in l_for_profile_bf3vehiclesstats_36_18_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3vehiclesstats_36_18_list[l_for_profile_bf3vehiclesstats_36_18_key])) {
                continue;
            }
            var l_vehicle = l_for_profile_bf3vehiclesstats_36_18_list[l_for_profile_bf3vehiclesstats_36_18_key];
            l_for_profile_bf3vehiclesstats_36_18_iteration = (l_for_profile_bf3vehiclesstats_36_18_iteration + 1);
            if (S.Modifier.contains(l_notReallyVehicles, l_vehicle.code)) {
                continue;
            }
            c.push("\n");
            if (S.Modifier.count(o.compareVehicleStats)) {
                l_compareVehicle = S.Modifier.get(o.compareVehicleStats, l_iter);
            }
            l_iter = (l_iter + 1);
            c.push("\n");
            l_langKey = S.Modifier.get(S.Modifier.get(l_localeVehicles, S.Modifier.get(l_vehicle, "code")), "name");
            c.push(' <tr>\n <td class="item-count">');
            c.push(Surface.valOut(l_for_profile_bf3vehiclesstats_36_18_iteration));
            c.push('</td>\n <td class="item-name">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_vehicle.code,"statsName": S.Modifier.get(l_vehicle, "name"),"personaId": o.personaId})));
            c.push('">\n <img width="147" height="88" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.lower(S.Modifier.replace(S.Modifier.get(S.Modifier.get(l_localeVehicles, S.Modifier.get(l_vehicle, "code"), {}), "image", ""), "Weapon/", ""))), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n <p>');
            c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
            c.push('</p>\n </a>\n </td>\n <td class="item-kills">\n <div class="item-container">\n <div class="item-object">\n');
            l_numkills = S.Modifier.get(l_vehicle, "kills");
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.niceInt(l_numkills)));
            c.push("\n </div>\n");
            if (S.Modifier.count(o.compareVehicleStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": l_vehicle.kills,"to": l_compareVehicle.kills,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td class="item-duration" data-sortValue="');
            c.push(Surface.valOut(l_vehicle.timeIn));
            c.push('">\n <div class="item-container">\n <div class="item-object">\n ');
            c.push(Surface.valOut(S.Modifier.duration(l_vehicle.timeIn)));
            c.push("\n </div>\n");
            if (S.Modifier.count(o.compareVehicleStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": l_vehicle.timeIn,"to": l_compareVehicle.timeIn,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td class="item-nextunlock">\n');
            l_for_profile_bf3vehiclesstats_83_30_list = o.unlocksAdded;
            if ((S.Modifier.count(l_for_profile_bf3vehiclesstats_83_30_list) > 0)) {
                for (var l_key in l_for_profile_bf3vehiclesstats_83_30_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bf3vehiclesstats_83_30_list[l_key])) {
                        continue;
                    }
                    var l_value = l_for_profile_bf3vehiclesstats_83_30_list[l_key];
                    if ((l_key == l_vehicle.code)) {
                        l_iterr = 0;
                        l_for_profile_bf3vehiclesstats_86_38_list = l_value;
                        if ((S.Modifier.count(l_for_profile_bf3vehiclesstats_86_38_list) > 0)) {
                            for (var l_k in l_for_profile_bf3vehiclesstats_86_38_list) {
                                if (!Surface.isValidLoopItem(l_for_profile_bf3vehiclesstats_86_38_list[l_k])) {
                                    continue;
                                }
                                var l_v = l_for_profile_bf3vehiclesstats_86_38_list[l_k];
                                l_ul = S.Modifier.get(l_v, "vehicleAddonUnlock");
                                l_name = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_ul.unlockId), "name");
                                l_image = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_ul.unlockId), "image");
                                if ((l_iterr == 0)) {
                                    l_parentName = S.Modifier.get(S.Modifier.get(l_localeVehicles, l_key), "name");
                                    c.push("\n");
                                    l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_ul.actualValue, " / "), l_ul.valueNeeded), (" " + (S.translations[l_parentName] || l_parentName))), " score");
                                    c.push(' <a href="');
                                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_vehicle.code,"statsName": S.Modifier.get(l_vehicle, "name"),"personaId": o.personaId})));
                                    c.push('">\n <img class="bubble-title" title="');
                                    c.push(Surface.valOut((S.translations[l_name] || l_name)));
                                    c.push("<br>");
                                    c.push(Surface.valOut(l_criteria));
                                    c.push('" src="');
                                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                    c.push('" width="79" height="43" alt="" />\n </a>\n ');
                                    c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"max": 100,"value": S.Modifier.round(l_v.unlockPercentage, 1),"width": "56px"}, null, kwargs));
                                    c.push("\n");
                                }
                                c.push("\n");
                                l_iterr = (l_iterr + 1);
                            }
                        }
                    }
                }
            }
            c.push(" </td>\n </tr>\n");
        }
    }
    c.push('\n </tbody>\n </table>\n </div>\n </div>\n <div id="profile-stats-weapons-secondary-column" class="profile-stats-secondary-column">\n <h1>');
    c.push(Surface.valOut("Unlock Progression"));
    c.push("</h1>\n");
    l_for_profile_bf3vehiclesstats_120_10_list = o.unlockProgression;
    if ((S.Modifier.count(l_for_profile_bf3vehiclesstats_120_10_list) > 0)) {
        for (var l_category in l_for_profile_bf3vehiclesstats_120_10_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3vehiclesstats_120_10_list[l_category])) {
                continue;
            }
            var l_unlocks = l_for_profile_bf3vehiclesstats_120_10_list[l_category];
            if ((l_category == "Vehicle Air Jet Fighter")) {
                continue;
            }
            c.push("\n");
            if ((S.Modifier.count(l_unlocks) > 0)) {
                c.push(' <div class="profile-stats-unlock-progression-kit first">\n <div class="profile-stats-unlock-progression-kit-name">\n <div class="profile-stats-unlock-progression-kit-icon ');
                c.push(Surface.valOut(S.Modifier.lower(S.Modifier.substring(l_category, 8))));
                c.push('"></div>\n <h2>');
                c.push(Surface.valOut(S.Modifier.substring(l_category, 8)));
                c.push('</h2>\n <div class="profile-stats-unlock-progression-kit-progress">\n <div class="bars">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "50px","max": S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, l_category), "total"),"value": S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, l_category), "taken")}, null, kwargs));
                c.push('\n </div>\n <div class="numbers">\n ');
                c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, l_category), "taken")));
                c.push("/");
                c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, l_category), "total")));
                c.push('\n </div>\n </div>\n </div>\n <div class="profile-stats-unlock-progression-kit-items">\n');
                l_for_profile_bf3vehiclesstats_143_26_list = l_unlocks;
                if ((S.Modifier.count(l_for_profile_bf3vehiclesstats_143_26_list) > 0)) {
                    for (var l_for_profile_bf3vehiclesstats_143_26_key in l_for_profile_bf3vehiclesstats_143_26_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bf3vehiclesstats_143_26_list[l_for_profile_bf3vehiclesstats_143_26_key])) {
                            continue;
                        }
                        var l_unlock = l_for_profile_bf3vehiclesstats_143_26_list[l_for_profile_bf3vehiclesstats_143_26_key];
                        l_langKey = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_unlock.unlockId), "name");
                        l_langDescKey = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_unlock.unlockId), "desc");
                        l_imageKey = S.Modifier.get(S.Modifier.get(l_vehicleAccessoryLocale, l_unlock.unlockId), "image");
                        if ((l_unlock.actualValue < l_unlock.valueNeeded)) {
                            l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_unlock.actualValue, " / "), l_unlock.valueNeeded), (" " + S.Modifier.substring(l_category, 8))), " score");
                        } else {
                            l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_unlock.valueNeeded, " / "), l_unlock.valueNeeded), (" " + S.Modifier.substring(l_category, 8))), " score");
                        }
                        c.push(' <div title="<b>');
                        c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
                        c.push("</b><br>");
                        c.push(Surface.valOut(l_criteria));
                        c.push("<br>");
                        c.push(Surface.valOut((S.translations[l_langDescKey] || l_langDescKey)));
                        c.push('" class="bubble-title profile-stats-unlock-progression-kit-item ');
                        if ((S.Modifier.toint(l_unlock.unlocked) < 100)) {
                            c.push("nottaken");
                        }
                        c.push('">\n <div class="progress" style="width:');
                        c.push(Surface.valOut(S.Modifier.toint(l_unlock.unlocked)));
                        c.push('%"></div>\n <img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_imageKey), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" width="79px" height="43px" />\n </div>\n');
                    }
                }
                c.push(' <div class="base-clear"></div>\n </div>\n </div>\n');
            }
        }
    } else {
        c.push(' <div class="common-found-no-stats">');
        c.push(Surface.valOut("Found no stats"));
        c.push("</div>\n");
    }
    c.push(' </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_profile_bf3weaponsstats = new Surface.BlockConfig("", {"statsContent": "profile.bf3weaponsstats.block_statsContent"});
profile.addTemplate(new Surface.Template("bf3weaponsstats"));
profile.bf3weaponsstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3weaponsstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3weaponsstats");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    return c.join("");
};
profile.bf3weaponsstats.block_statsContent = new Surface.Block("profile.bf3weaponsstats.block_statsContent");
profile.bf3weaponsstats.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_iter;
    var l_compareWeaponKillsMin;
    var l_unlockIter;
    var l_for_profile_bf3weaponsstats_148_30_list;
    var l_compareWeapon;
    var l_unlockProgressionKitList;
    var l_image;
    var l_specializationLocale;
    var l_unlockPercentage;
    var l_criteria;
    var l_ul;
    var l_parentName;
    var l_langkey;
    var l_for_profile_bf3weaponsstats_156_42_list;
    var l_for_profile_bf3weaponsstats_39_14_list;
    var l_compareItem;
    var l_name;
    var l_for_profile_bf3weaponsstats_280_14_list;
    var l_itemLocale;
    var l_iterr;
    var l_locale;
    var l_weaponKillsMin;
    var l_for_profile_bf3weaponsstats_218_14_list;
    var l_weaponAccessoryLocale;
    var l_kititemLocale;
    l_locale = S.Modifier.get(o.bf3GadgetsLocale, "weapons");
    l_weaponAccessoryLocale = S.Modifier.get(o.bf3GadgetsLocale, "weaponaccessory");
    l_kititemLocale = S.Modifier.get(o.bf3GadgetsLocale, "kititems");
    l_specializationLocale = S.Modifier.get(o.bf3GadgetsLocale, "soldierspecializations");
    o.platform = $S.callFunction("common.platformIntToPlatform", o.platformInt, b, kwargs);
    c.push('\n <div id="profile-stats-weapons-main-column" class="profile-stats-main-column">\n <div id="profile-stats-weapons-statistics" class="profile-stats-type-container">\n <h1>');
    c.push(Surface.valOut("Weapon statistics"));
    c.push('</h1>\n <div class="profile-stats-type-container-filters">\n <div class="common-selector-side-title">');
    c.push(Surface.valOut("Kits"));
    c.push('</div>\n <ul class="common-selector">\n <li class="first"><div class="kit-assault filterByKitButton" filterByKit="1"><p>');
    c.push(Surface.valOut("A"));
    c.push('</p></div></li>\n <li class=""><div class="kit-engineer filterByKitButton" filterByKit="2"><p>');
    c.push(Surface.valOut("S"));
    c.push('</p></div></li>\n <li class=""><div class="kit-support filterByKitButton" filterByKit="32"><p>');
    c.push(Surface.valOut("M"));
    c.push('</p></div></li>\n <li class=""><div class="kit-recon filterByKitButton" filterByKit="8"><p>');
    c.push(Surface.valOut("R"));
    c.push('</p></div></li>\n <li class="selected last "><div class="kit-all filterByKitButton" filterByKit="Other"><p>');
    c.push(Surface.valOut("ALL"));
    c.push('</p></div></li>\n </ul>\n </div>\n <table class="common-table statisticstable tablesorter" cellpadding="0">\n <thead>\n <tr>\n <th></th>\n <th>');
    c.push(Surface.valOut("Weapon"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Service Stars"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Kills"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Kills"));
    c.push(" / ");
    c.push(Surface.valOut("Min"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Accuracy"));
    c.push('</th>\n <th class="last">');
    c.push(Surface.valOut("Unlocks"));
    c.push("</th>\n </tr>\n </thead>\n <tbody>\n");
    l_iter = 0;
    l_for_profile_bf3weaponsstats_39_14_list = S.Modifier.sort(o.mainWeaponStats, "kills", "desc");
    if ((S.Modifier.count(l_for_profile_bf3weaponsstats_39_14_list) > 0)) {
        for (var l_for_profile_bf3weaponsstats_39_14_key in l_for_profile_bf3weaponsstats_39_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3weaponsstats_39_14_list[l_for_profile_bf3weaponsstats_39_14_key])) {
                continue;
            }
            var l_weapon = l_for_profile_bf3weaponsstats_39_14_list[l_for_profile_bf3weaponsstats_39_14_key];
            l_compareWeapon = S.Modifier.get(o.compareWeaponStats, l_iter);
            l_compareWeaponKillsMin = 0;
            l_weaponKillsMin = 0;
            if ((l_weapon.unlocked < 100)) {
                continue;
            }
            c.push("\n");
            l_langkey = S.Modifier.get(S.Modifier.get(l_locale, l_weapon.code, {}), "name", "Not found");
            l_iter = (l_iter + 1);
            c.push('\n <tr class="filterByKit filterByKit_');
            c.push(Surface.valOut(((typeof (l_weapon) != "undefined" && l_weapon !== null && typeof (l_weapon.kit) != "undefined" && l_weapon.kit !== null) ? l_weapon.kit : "Other")));
            c.push('">\n <td class="item-count">');
            c.push(Surface.valOut(l_iter));
            c.push('</td>\n <td class="item-name">\n <div style="position:relative">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_weapon.code,"statsName": l_weapon.name,"personaId": o.personaId})));
            c.push('">\n <img width="147" height="88" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.replace(S.Modifier.lower(S.Modifier.replace(S.Modifier.get(S.Modifier.get(l_locale, l_weapon.code, {}), "image", ""), "Weapon/", "")), " ", "_")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n <p class="item-name">\n');
            if ((l_weapon.kit != 64)) {
                c.push(' <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/kit-icon-", S.Modifier.get(S.Modifier.get(o.kitMap, l_weapon.kit), "name")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n');
            }
            c.push(" ");
            c.push(Surface.valOut((S.translations[l_langkey] || l_langkey)));
            c.push("\n </p>\n </a>\n");
            if ((!(l_weapon.startedWith) && (l_weapon.unlocked < 100))) {
                c.push(' <div class="profile-weapon-item-is-locked"></div>\n');
            }
            c.push(' </div>\n </td>\n <td class="item-servicestars">\n <div class="item-container">\n <div class="item-object" data-count="');
            c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStars", 0)));
            c.push('">\n');
            if ((S.Modifier.get(l_weapon, "serviceStars") == 0)) {
                c.push(' <img src="/public/profile/bf3/stats/servicestars/servicestar-31x31.png" alt="No service star taken" title="');
                c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStarsProgress")));
                c.push("% ");
                c.push(Surface.valOut("progress to next Service Star"));
                c.push('" class="bubble-title profile-stats-type-item-servicestar-star no-servicestar" />\n');
            } else {
                if (((0 < S.Modifier.get(l_weapon, "serviceStars")) < 100)) {
                    c.push(' <img src="/public/profile/bf3/stats/servicestars/servicestar-31x31.png" alt="');
                    c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStars")));
                    c.push(" ");
                    c.push(Surface.valOut("Service Stars taken"));
                    c.push('" title="');
                    c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStarsProgress")));
                    c.push("% ");
                    c.push(Surface.valOut("progress to next Service Star"));
                    c.push('" class="bubble-title profile-stats-type-item-servicestar-star" />\n <div class="servicestars-multiple">');
                    c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStars")));
                    c.push("</div>\n");
                } else {
                    if ((S.Modifier.get(l_weapon, "serviceStars") >= 100)) {
                        c.push(' <img src="/public/profile/bf3/stats/servicestars/servicestar-31x31.png" alt="');
                        c.push(Surface.valOut(S.Modifier.get(l_weapon, "serviceStars")));
                        c.push(" ");
                        c.push(Surface.valOut("Service Stars taken"));
                        c.push('" title="');
                        c.push(Surface.valOut("All Service Stars for this weapon are taken"));
                        c.push('" class="bubble-title profile-stats-type-item-servicestar-star" />\n <div class="servicestars-multiple">100</div>\n');
                    }
                }
            }
            c.push(" </div>\n");
            if ((S.Modifier.get(l_weapon, "serviceStars") != 100)) {
                c.push(' <div class="item-extra">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"max": 100,"value": S.Modifier.round(S.Modifier.get(l_weapon, "serviceStarsProgress"), 1),"width": "56px"}, null, kwargs));
                c.push("\n </div>\n");
            }
            if (S.Modifier.count(o.compareWeaponStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": "true","compare": l_weapon.serviceStars,"to": l_compareWeapon.serviceStars,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td class="item-kills">\n <div class="item-container">\n <div class="item-object">');
            c.push(Surface.valOut(S.Modifier.niceInt(l_weapon.kills)));
            c.push('</div>\n <div class="item-extra">');
            c.push(Surface.valOut(S.Modifier.duration(l_weapon.timeEquipped)));
            c.push("</div>\n");
            if (S.Modifier.count(o.compareWeaponStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": "true","compare": l_weapon.kills,"to": l_compareWeapon.kills,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td>\n <div class="item-container">\n <div class="item-object">\n');
            if (((l_weapon.timeEquipped > 0) && (l_weapon.kills > 0))) {
                l_weaponKillsMin = S.Modifier.round((l_weapon.kills / (l_weapon.timeEquipped / 60)), 2);
                c.push(" ");
                c.push(Surface.valOut(l_weaponKillsMin));
                c.push("\n");
            } else {
                c.push(" 0\n");
            }
            c.push(" </div>\n");
            if (S.Modifier.count(o.compareWeaponStats)) {
                c.push(' <div class="item-compare">\n');
                if (((l_compareWeapon.timeEquipped > 0) && (l_compareWeapon.kills > 0))) {
                    l_compareWeaponKillsMin = S.Modifier.round((l_compareWeapon.kills / (l_compareWeapon.timeEquipped / 60)), 2);
                } else {
                    l_compareWeaponKillsMin = 0;
                }
                c.push(" ");
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": "true","compare": l_weaponKillsMin,"to": l_compareWeaponKillsMin,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td>\n <div class="item-container">\n <div class="item-object">\n');
            if ((l_weapon.category == "Special")) {
                c.push(" -\n");
            } else {
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.round((l_weapon.accuracy * 100), 2)));
                c.push("%\n");
                if (S.Modifier.count(o.compareWeaponStats)) {
                    c.push(' <div class="item-compare">\n ');
                    c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"showDiff": true,"compare": l_weapon.accuracy,"to": l_compareWeapon.accuracy,"width": 55}, null, kwargs));
                    c.push("\n </div>\n");
                }
            }
            c.push(' </div>\n </div>\n </td>\n <td class="item-nextunlock last">\n <div class="item-container">\n');
            l_for_profile_bf3weaponsstats_148_30_list = o.unlocksAdded;
            if ((S.Modifier.count(l_for_profile_bf3weaponsstats_148_30_list) > 0)) {
                for (var l_key in l_for_profile_bf3weaponsstats_148_30_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bf3weaponsstats_148_30_list[l_key])) {
                        continue;
                    }
                    var l_value = l_for_profile_bf3weaponsstats_148_30_list[l_key];
                    l_unlockIter = 0;
                    c.push("\n");
                    if ((l_key == l_weapon.code)) {
                        if ((l_weapon.category == "Special")) {
                            c.push(" -\n");
                        } else {
                            l_iterr = 0;
                            l_for_profile_bf3weaponsstats_156_42_list = l_value;
                            if ((S.Modifier.count(l_for_profile_bf3weaponsstats_156_42_list) > 0)) {
                                for (var l_k in l_for_profile_bf3weaponsstats_156_42_list) {
                                    if (!Surface.isValidLoopItem(l_for_profile_bf3weaponsstats_156_42_list[l_k])) {
                                        continue;
                                    }
                                    var l_v = l_for_profile_bf3weaponsstats_156_42_list[l_k];
                                    l_ul = S.Modifier.get(l_v, "weaponAddonUnlock");
                                    if ((((typeof (l_v) != "undefined" && l_v !== null && typeof (l_v.unlockPercentage) != "undefined" && l_v.unlockPercentage !== null) ? l_v.unlockPercentage : 0) >= 100)) {
                                        l_unlockIter = (l_unlockIter + 1);
                                        continue;
                                    }
                                    c.push("\n");
                                    if ((l_iterr == 0)) {
                                        l_name = S.Modifier.get(S.Modifier.get(l_weaponAccessoryLocale, l_ul.unlockId), "name");
                                        l_image = S.Modifier.get(S.Modifier.get(l_weaponAccessoryLocale, l_ul.unlockId), "image");
                                        l_parentName = S.Modifier.get(S.Modifier.get(l_locale, l_ul.weaponCode), "name");
                                        l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_ul.actualValue, " of "), l_ul.valueNeeded), " "), (S.translations[l_parentName] || l_parentName)), (" " + "Kills"));
                                        c.push("\n");
                                    }
                                    c.push("\n");
                                    l_iterr = (l_iterr + 1);
                                    l_unlockPercentage = S.Modifier.round(((typeof (l_v) != "undefined" && l_v !== null && typeof (l_v.unlockPercentage) != "undefined" && l_v.unlockPercentage !== null) ? l_v.unlockPercentage : 0), 1);
                                    c.push("\n");
                                    break;
                                }
                            }
                            c.push('\n <div class="item-object">\n');
                            if ((l_unlockIter < S.Modifier.count(l_value))) {
                                c.push(' <div class="profile-num-unlocks-taken bubble-title" title="Unlock #');
                                c.push(Surface.valOut((l_unlockIter + 1)));
                                c.push(" of ");
                                c.push(Surface.valOut(S.Modifier.count(l_value)));
                                c.push(": ");
                                c.push(Surface.valOut((S.translations[l_name] || l_name)));
                                c.push('">#');
                                c.push(Surface.valOut((l_unlockIter + 1)));
                                c.push(" of ");
                                c.push(Surface.valOut(S.Modifier.count(l_value)));
                                c.push('</div>\n <a href="');
                                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_weapon.code,"statsName": l_weapon.name,"personaId": o.personaId})));
                                c.push('">\n <img class="bubble-title" title="');
                                c.push(Surface.valOut((S.translations[l_name] || l_name)));
                                c.push("<br>");
                                c.push(Surface.valOut(l_criteria));
                                c.push('" width="79" height="43" src="');
                                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_image), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                c.push('" alt="" />\n </a>\n');
                            } else {
                                c.push(' <div class="all-taken">All unlocked</div>\n');
                            }
                            c.push(" </div>\n");
                            if ((l_unlockIter <= S.Modifier.count(l_value))) {
                                c.push(' <div class="item-extra">');
                                c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"max": 100,"value": l_unlockPercentage,"width": "56px"}, null, kwargs));
                                c.push("</div>\n");
                            }
                        }
                    }
                }
            }
            c.push(" </div>\n </td>\n </tr>\n");
        }
    }
    c.push(" </tbody>\n </table>\n <h1>");
    c.push(Surface.valOut("Equipment"));
    c.push('</h1>\n <table class="common-table statisticstable tablesorter" cellpadding="0">\n <thead>\n <tr>\n <th></th>\n <th>');
    c.push(Surface.valOut("Weapon"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Kills"));
    c.push("</th>\n <th>Performance</th>\n </tr>\n </thead>\n <tbody>\n");
    l_iter = 0;
    l_itemLocale = S.Modifier.get(o.bf3GadgetsLocale, "kititems");
    l_for_profile_bf3weaponsstats_218_14_list = o.mainItemStats;
    if ((S.Modifier.count(l_for_profile_bf3weaponsstats_218_14_list) > 0)) {
        for (var l_for_profile_bf3weaponsstats_218_14_key in l_for_profile_bf3weaponsstats_218_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3weaponsstats_218_14_list[l_for_profile_bf3weaponsstats_218_14_key])) {
                continue;
            }
            var l_item = l_for_profile_bf3weaponsstats_218_14_list[l_for_profile_bf3weaponsstats_218_14_key];
            l_compareItem = S.Modifier.get(o.compareItemStats, l_iter);
            l_langkey = S.Modifier.get(S.Modifier.get(l_itemLocale, l_item.code, {}), "name", "Not found");
            l_iter = (l_iter + 1);
            c.push('\n <tr class="filterByKit filterByKit_');
            c.push(Surface.valOut(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.kit) != "undefined" && l_item.kit !== null) ? l_item.kit : "Other")));
            c.push('">\n <td class="item-count">&nbsp;</td>\n <td class="item-name">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_item.code,"statsName": l_item.name,"personaId": o.personaId})));
            c.push('">\n <img width="147" height="88" class="" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_147x88/", S.Modifier.replace(S.Modifier.lower(S.Modifier.replace(S.Modifier.get(S.Modifier.get(l_itemLocale, l_item.code, {}), "image", ""), "Weapon/", "")), " ", "_")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('"/>\n <p class="item-name">\n ');
            c.push(Surface.valOut((S.translations[l_langkey] || l_langkey)));
            c.push('\n </p>\n </a>\n </td>\n <td class="item-kills">\n <div class="item-container">\n <div class="item-object">');
            c.push(Surface.valOut(S.Modifier.niceInt(l_weapon.kills)));
            c.push('</div>\n <div class="item-extra">');
            c.push(Surface.valOut(S.Modifier.duration(l_weapon.timeEquipped)));
            c.push("</div>\n");
            if (S.Modifier.count(o.compareWeaponStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": l_weapon.kills,"to": l_compareWeapon.kills,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(' </div>\n </td>\n <td>\n <div class="item-container">\n <div class="item-object">\n ');
            c.push(Surface.valOut(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.performanceStatValue) != "undefined" && l_item.performanceStatValue !== null) ? l_item.performanceStatValue : "-")));
            c.push(" ");
            c.push(Surface.valOut(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.performanceName) != "undefined" && l_item.performanceName !== null) ? l_item.performanceName : "")));
            c.push("\n </div>\n");
            if (S.Modifier.count(o.compareItemStats)) {
                c.push(' <div class="item-compare">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "statsCompare")), {"compare": l_item.performanceStatValue,"to": l_compareItem.performanceStatValue,"width": 55}, null, kwargs));
                c.push("\n </div>\n");
            }
            c.push(" </div>\n </td>\n </tr>\n");
        }
    }
    c.push(' </table>\n <div class="base-clear"></div>\n </div>\n </div>\n <div id="profile-stats-weapons-secondary-column" class="profile-stats-secondary-column">\n <h1>');
    c.push(Surface.valOut("Unlock Progression"));
    c.push("</h1>\n");
    o.locale = l_locale;
    o.specializationLocale = l_specializationLocale;
    o.kitMap = o.kitMap;
    o.unlockSpecializations = o.unlockSpecializations;
    o.kititemLocale = l_kititemLocale;
    c.push("\n");
    l_unlockProgressionKitList = [1, 2, 32, 8, 64];
    l_for_profile_bf3weaponsstats_280_14_list = l_unlockProgressionKitList;
    if ((S.Modifier.count(l_for_profile_bf3weaponsstats_280_14_list) > 0)) {
        for (var l_for_profile_bf3weaponsstats_280_14_key in l_for_profile_bf3weaponsstats_280_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3weaponsstats_280_14_list[l_for_profile_bf3weaponsstats_280_14_key])) {
                continue;
            }
            var l_kit = l_for_profile_bf3weaponsstats_280_14_list[l_for_profile_bf3weaponsstats_280_14_key];
            o.kit = l_kit;
            o.kitString = S.Modifier.get(S.Modifier.get(o.kitMap, l_kit), "name");
            c.push("\n");
            o.kitunlocks = o.kitunlocks;
            c.push(" ");
            c.push(Surface.importTemplate(("profile" + ("." + "bf3weaponunlocksforkit")), o, null, kwargs));
            c.push("\n");
        }
    }
    c.push('\n </div>\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_profile_bf3weaponunlocksforkit = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bf3weaponunlocksforkit"));
profile.bf3weaponunlocksforkit.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bf3weaponunlocksforkit;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bf3weaponunlocksforkit");
    var l_unlockId;
    var l_linkToItem;
    var l_for_profile_bf3weaponunlocksforkit_19_10_list;
    var l_langKey;
    var l_criteria;
    var l_ul;
    var l_langDescKey;
    var l_for_profile_bf3weaponunlocksforkit_77_14_list;
    var l_imgName;
    c.push('\n<div class="profile-stats-unlock-progression-kit first">\n <div class="profile-stats-unlock-progression-kit-name">\n <div class="profile-stats-unlock-progression-kit-icon ');
    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", o.kit)), "name", "general")));
    c.push('"></div>\n <h2>');
    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", o.kit)), "name", "general")));
    c.push('</h2>\n <div class="profile-stats-unlock-progression-kit-progress">\n <div class="bars">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "50px","max": S.Modifier.count(S.Modifier.get(o.kitunlocks, o.kit)),"value": S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, o.kitString), "taken")}, null, kwargs));
    c.push('\n </div>\n <div class="numbers">\n ');
    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.unlockProgressionAmount, o.kitString), "taken")));
    c.push("/");
    c.push(Surface.valOut(S.Modifier.count(S.Modifier.get(o.kitunlocks, o.kit))));
    c.push('\n </div>\n </div>\n </div>\n <div class="profile-stats-unlock-progression-kit-items">\n');
    l_for_profile_bf3weaponunlocksforkit_19_10_list = S.Modifier.multisort(S.Modifier.get(o.kitunlocks, o.kit), "unlockPercentage", "desc", "valueNeeded", "asc");
    if ((S.Modifier.count(l_for_profile_bf3weaponunlocksforkit_19_10_list) > 0)) {
        for (var l_for_profile_bf3weaponunlocksforkit_19_10_key in l_for_profile_bf3weaponunlocksforkit_19_10_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bf3weaponunlocksforkit_19_10_list[l_for_profile_bf3weaponunlocksforkit_19_10_key])) {
                continue;
            }
            var l_unlock = l_for_profile_bf3weaponunlocksforkit_19_10_list[l_for_profile_bf3weaponunlocksforkit_19_10_key];
            c.push("\n");
            l_linkToItem = false;
            if ((((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.kitItemUnlock) != "undefined" && l_unlock.kitItemUnlock !== null) !== null) ? (typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.kitItemUnlock) != "undefined" && l_unlock.kitItemUnlock !== null) : false)) {
                l_ul = l_unlock.kitItemUnlock;
                l_langKey = S.Modifier.get(S.Modifier.get(o.kititemLocale, l_ul.unlockId), "name");
                l_langDescKey = S.Modifier.get(S.Modifier.get(o.kititemLocale, l_ul.unlockId), "desc");
                l_imgName = S.Modifier.get(S.Modifier.get(o.kititemLocale, l_ul.unlockId, {}), "image", "");
                l_linkToItem = true;
            } else {
                if ((((typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.weaponUnlock) != "undefined" && l_unlock.weaponUnlock !== null) !== null) ? (typeof (l_unlock) != "undefined" && l_unlock !== null && typeof (l_unlock.weaponUnlock) != "undefined" && l_unlock.weaponUnlock !== null) : false)) {
                    l_ul = l_unlock.weaponUnlock;
                    l_langKey = S.Modifier.get(S.Modifier.get(o.locale, l_ul.unlockId), "name");
                    l_langDescKey = S.Modifier.get(S.Modifier.get(o.locale, l_ul.unlockId), "desc");
                    l_imgName = S.Modifier.get(S.Modifier.get(o.locale, l_ul.unlockId, {}), "image", "");
                    l_linkToItem = true;
                    if ((typeof (l_ul) != "undefined" && l_ul !== null && typeof (l_ul.duplicateOf) != "undefined" && l_ul.duplicateOf !== null)) {
                        l_ul.unlockId = l_ul.duplicateOf;
                    }
                } else {
                    continue;
                }
            }
            l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
            c.push(' <div title="<b>');
            c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
            c.push("</b><br>");
            c.push(Surface.valOut(l_criteria));
            c.push('" class="bubble-title profile-stats-unlock-progression-kit-item ');
            if ((S.Modifier.toint(l_unlock.unlockPercentage) < 100)) {
                c.push("nottaken");
            }
            c.push('">\n <div class="progress" style="width:');
            c.push(Surface.valOut(S.Modifier.toint(l_unlock.unlockPercentage)));
            c.push('%"></div>\n');
            if (((typeof (l_linkToItem) != "undefined" && l_linkToItem !== null) ? l_linkToItem : false)) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/iteminfo/{statsId}/{personaId}/{namespace}/", Surface.urlContext, {"namespace": o.platform,"personaName": o.personaName,"statsId": l_ul.unlockId,"statsName": (S.translations[l_langKey] || l_langKey),"personaId": o.personaId})));
                c.push('">\n <img width=75 src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n </a>\n');
            } else {
                c.push(' <img width=75 src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n');
            }
            c.push("\n </div>\n");
        }
    }
    c.push(' <div class="base-clear"></div>\n </div>\n');
    if ((o.kit == 64)) {
        c.push(' <div class="profile-stats-unlock-progression-kit-name">\n <div class="profile-stats-unlock-progression-kit-icon general"></div>\n <h2>');
        c.push(Surface.valOut("Specializations"));
        c.push('</h2>\n </div>\n <div class="profile-stats-unlock-progression-kit-items">\n');
        l_for_profile_bf3weaponunlocksforkit_77_14_list = o.unlockSpecializations;
        if ((S.Modifier.count(l_for_profile_bf3weaponunlocksforkit_77_14_list) > 0)) {
            for (var l_for_profile_bf3weaponunlocksforkit_77_14_key in l_for_profile_bf3weaponunlocksforkit_77_14_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bf3weaponunlocksforkit_77_14_list[l_for_profile_bf3weaponunlocksforkit_77_14_key])) {
                    continue;
                }
                var l_unlockSpecialization = l_for_profile_bf3weaponunlocksforkit_77_14_list[l_for_profile_bf3weaponunlocksforkit_77_14_key];
                l_unlockId = S.Modifier.get(S.Modifier.get(l_unlockSpecialization, "soldierSpecializationUnlock"), "unlockId");
                l_langKey = S.Modifier.get(S.Modifier.get(o.specializationLocale, l_unlockId), "name");
                l_langDescKey = S.Modifier.get(S.Modifier.get(o.specializationLocale, l_unlockId), "desc");
                l_ul = S.Modifier.get(l_unlockSpecialization, "soldierSpecializationUnlock");
                l_criteria = $S.callFunction("profile.unlockTextCriteria", l_ul.codeNeeded, l_ul.valueNeeded, l_ul.actualValue, b, kwargs);
                c.push('\n <div title="<b>');
                c.push(Surface.valOut((S.translations[l_langKey] || l_langKey)));
                c.push("</b><br>");
                c.push(Surface.valOut(l_criteria));
                c.push("<br>");
                c.push(Surface.valOut((S.translations[l_langDescKey] || l_langDescKey)));
                c.push('" class="bubble-title profile-stats-unlock-progression-kit-item ');
                if ((S.Modifier.toint(l_unlockSpecialization.unlockPercentage) < 100)) {
                    c.push("nottaken");
                }
                c.push('">\n <div class="progress" style="width:');
                c.push(Surface.valOut(S.Modifier.toint(l_unlockSpecialization.unlockPercentage)));
                c.push('%"></div>\n');
                if ((l_langKey == "ID_P_SNAME_SuppRes2")) {
                    c.push(' <img width=75 src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/items_79x43/supprresist2.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                } else {
                    c.push(' <img width=75 src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/items_79x43/", S.Modifier.get(S.Modifier.get(o.specializationLocale, l_unlockId), "image", "")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                }
                c.push("\n </div>\n");
            }
        }
        c.push(' <div class="base-clear"></div>\n </div>\n');
    }
    c.push("\n</div>");
    return c.join("");
};
var block_profile_bfbc2awards = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2awards"));
profile.bfbc2awards.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2awards;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2awards");
    var l_for_profile_bfbc2awards_119_14_list;
    var l_session;
    var l_items;
    var l_for_profile_bfbc2awards_53_18_iteration;
    var l_for_profile_bfbc2awards_173_18_iteration;
    var l_for_profile_bfbc2awards_122_18_list;
    var l_type;
    var l_for_profile_bfbc2awards_122_18_iteration;
    var l_for_profile_bfbc2awards_53_18_list;
    var l_for_profile_bfbc2awards_50_14_list;
    var l_extra;
    var l_for_profile_bfbc2awards_173_18_list;
    var l_itemName;
    var l_for_profile_bfbc2awards_171_14_list;
    c.push("\n");
    l_items = o.awards;
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2statsforprofile")), o, null, kwargs));
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    o.active = "awards";
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2stattabs")), o, null, kwargs));
    c.push('\n<div class="profilestats-container">\n <div class="profilestats-overview">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_bfbc2awards_use_12_10, kwargs));
    c.push(' </div>\n <div class="profilestats-item-area">\n <h3 class="stats-title">');
    c.push(Surface.valOut("Insignias"));
    c.push("</h3>\n");
    l_for_profile_bfbc2awards_50_14_list = S.Modifier.get(l_items, "insignias");
    if ((S.Modifier.count(l_for_profile_bfbc2awards_50_14_list) > 0)) {
        for (var l_for_profile_bfbc2awards_50_14_key in l_for_profile_bfbc2awards_50_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_50_14_list[l_for_profile_bfbc2awards_50_14_key])) {
                continue;
            }
            var l_item = l_for_profile_bfbc2awards_50_14_list[l_for_profile_bfbc2awards_50_14_key];
            l_type = "insignias";
            c.push("\n");
            l_for_profile_bfbc2awards_53_18_list = l_item;
            l_for_profile_bfbc2awards_53_18_iteration = 0;
            if ((S.Modifier.count(l_for_profile_bfbc2awards_53_18_list) > 0)) {
                for (var l_for_profile_bfbc2awards_53_18_key in l_for_profile_bfbc2awards_53_18_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_53_18_list[l_for_profile_bfbc2awards_53_18_key])) {
                        continue;
                    }
                    var l_i = l_for_profile_bfbc2awards_53_18_list[l_for_profile_bfbc2awards_53_18_key];
                    l_for_profile_bfbc2awards_53_18_iteration = (l_for_profile_bfbc2awards_53_18_iteration + 1);
                    c.push("\n");
                    if ((Surface.modulo((l_for_profile_bfbc2awards_53_18_iteration - 1), 5) == 0)) {
                        c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                    }
                    l_itemName = l_i.imageName;
                    l_extra = "";
                    c.push('\n <div id="');
                    c.push(Surface.valOut(l_type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('" class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n');
                    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                        if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                            c.push(" ");
                            c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_i.statName,"taken": S.Modifier.contains(o.myTargets, l_i.statName)}, null, kwargs));
                            c.push("\n");
                        }
                    }
                    c.push('\n <img class="profilestats-item-image" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                    if ((!(l_i.isTaken) && (S.Modifier.get(S.Modifier.get(S.Modifier.get(l_i, "criterias"), 0), "requiredValue") !== null))) {
                        c.push(' <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                        if (((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false)) {
                            c.push("100");
                        } else {
                            c.push(Surface.valOut(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.progressPercent) != "undefined" && l_i.progressPercent !== null) ? l_i.progressPercent : 0)));
                        }
                        c.push('%">&nbsp;</div>\n </div>\n');
                    }
                    c.push('\n <p class="profilestats-item-name">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push('\n </p>\n <p class="profilestats-item-taken">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "criteria")));
                    c.push("\n </p>\n");
                    if ((S.Modifier.get(S.Modifier.get(S.Modifier.get(l_i, "criterias"), 0), "completedValue") !== null)) {
                        c.push(' <p class="profilestats-item-taken">');
                        c.push(Surface.valOut(S.Modifier.ceil(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_i, "criterias"), 0), "completedValue"))));
                        c.push(" of ");
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(l_i, "criterias"), 0), "requiredValue")));
                        c.push("</p>\n");
                    }
                    c.push("\n </div>\n </div>\n");
                    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                        if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                            c.push(" ");
                            c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_i.statName,"taken": S.Modifier.contains(o.myTargets, l_i.statName)}, null, kwargs));
                            c.push("\n");
                        }
                    }
                    c.push('\n <img class="profilestats-item-image');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profilestats-item-nottaken");
                    }
                    c.push('" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                    if ((!(l_i.isTaken) && (S.Modifier.get(S.Modifier.get(S.Modifier.get(l_i, "criterias"), 0), "requiredValue") !== null))) {
                        c.push(' <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                        if (((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false)) {
                            c.push("100");
                        } else {
                            c.push(Surface.valOut(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.progressPercent) != "undefined" && l_i.progressPercent !== null) ? l_i.progressPercent : 0)));
                        }
                        c.push('%">&nbsp;</div>\n </div>\n');
                    }
                    c.push(' <p class="profilestats-item-name');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profilestats-item-nottaken");
                    }
                    c.push('">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push("\n </p>\n </div>\n");
                }
            }
        }
    }
    c.push('\n </div>\n <div style="clear: both;position: relative;width:620px;background: #ebebea; height: 1px; margin-left: 16px; margin-top: 20px; margin-bottom: 16px;"></div>\n <div class="profilestats-item-area">\n <h3 class="stats-title">');
    c.push(Surface.valOut("Pins"));
    c.push("</h3>\n");
    l_for_profile_bfbc2awards_119_14_list = S.Modifier.get(l_items, "pins");
    if ((S.Modifier.count(l_for_profile_bfbc2awards_119_14_list) > 0)) {
        for (var l_for_profile_bfbc2awards_119_14_key in l_for_profile_bfbc2awards_119_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_119_14_list[l_for_profile_bfbc2awards_119_14_key])) {
                continue;
            }
            var l_item = l_for_profile_bfbc2awards_119_14_list[l_for_profile_bfbc2awards_119_14_key];
            l_type = "pins";
            c.push("\n");
            l_for_profile_bfbc2awards_122_18_list = l_item;
            l_for_profile_bfbc2awards_122_18_iteration = 0;
            if ((S.Modifier.count(l_for_profile_bfbc2awards_122_18_list) > 0)) {
                for (var l_for_profile_bfbc2awards_122_18_key in l_for_profile_bfbc2awards_122_18_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_122_18_list[l_for_profile_bfbc2awards_122_18_key])) {
                        continue;
                    }
                    var l_i = l_for_profile_bfbc2awards_122_18_list[l_for_profile_bfbc2awards_122_18_key];
                    l_for_profile_bfbc2awards_122_18_iteration = (l_for_profile_bfbc2awards_122_18_iteration + 1);
                    if ((Surface.modulo((l_for_profile_bfbc2awards_122_18_iteration - 1), 5) == 0)) {
                        c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                    }
                    l_itemName = l_i.imageName;
                    l_extra = "";
                    c.push("\n");
                    if ((l_type == "pins")) {
                        if ((l_i.numTaken > 0)) {
                            l_extra = S.Modifier.concat("Taken x", l_i.numTaken);
                        } else {
                            l_extra = "";
                        }
                    }
                    c.push('\n <div id="');
                    c.push(Surface.valOut(l_type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('" class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n <img class="profilestats-item-image" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <p class="profilestats-item-name">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push('\n </p>\n <p class="profilestats-item-taken">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "criteria")));
                    c.push('\n </p>\n </div>\n </div>\n <img class="profilestats-item-image');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profile-stats-nottaken");
                    }
                    c.push('" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <p class="profilestats-item-name ');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push("profile-stats-nottaken");
                    }
                    c.push('">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push('\n </p>\n <p class="profile-stats-awarditem-extra ');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push("profile-stats-nottaken");
                    }
                    c.push('">\n ');
                    c.push(Surface.valOut(l_extra));
                    c.push("\n </p>\n </div>\n");
                }
            }
        }
    }
    c.push(' </div>\n <div style="clear: both;position: relative;width:620px;background: #ebebea; height: 1px; margin-left: 16px; margin-top: 20px; margin-bottom: 16px;"></div>\n <div class="profilestats-item-area">\n <h3 class="stats-title">');
    c.push(Surface.valOut("Achievements"));
    c.push("</h3>\n");
    l_for_profile_bfbc2awards_171_14_list = S.Modifier.get(l_items, "achievements");
    if ((S.Modifier.count(l_for_profile_bfbc2awards_171_14_list) > 0)) {
        for (var l_for_profile_bfbc2awards_171_14_key in l_for_profile_bfbc2awards_171_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_171_14_list[l_for_profile_bfbc2awards_171_14_key])) {
                continue;
            }
            var l_item = l_for_profile_bfbc2awards_171_14_list[l_for_profile_bfbc2awards_171_14_key];
            l_type = "achievements";
            l_for_profile_bfbc2awards_173_18_list = l_item;
            l_for_profile_bfbc2awards_173_18_iteration = 0;
            if ((S.Modifier.count(l_for_profile_bfbc2awards_173_18_list) > 0)) {
                for (var l_for_profile_bfbc2awards_173_18_key in l_for_profile_bfbc2awards_173_18_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2awards_173_18_list[l_for_profile_bfbc2awards_173_18_key])) {
                        continue;
                    }
                    var l_i = l_for_profile_bfbc2awards_173_18_list[l_for_profile_bfbc2awards_173_18_key];
                    l_for_profile_bfbc2awards_173_18_iteration = (l_for_profile_bfbc2awards_173_18_iteration + 1);
                    if ((Surface.modulo((l_for_profile_bfbc2awards_173_18_iteration - 1), 5) == 0)) {
                        c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                    }
                    c.push("\n");
                    l_itemName = l_i.imageName;
                    l_extra = "";
                    c.push("\n");
                    if ((l_type == "pins")) {
                        l_extra = S.Modifier.concat("Times taken ", l_i.numTaken);
                    }
                    c.push('\n <div id="');
                    c.push(Surface.valOut(l_type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('" class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n <img class="profilestats-item-image" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <p class="profilestats-item-name">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push('\n </p>\n <p class="profilestats-item-taken">');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "criteria")));
                    c.push('</p>\n </div>\n </div>\n <img class="profilestats-item-image');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profilestats-item-nottaken");
                    }
                    c.push('" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <div class="profilestats-item-name');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profile-stats-nottaken");
                    }
                    c.push('">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.awardLocale, l_type), l_itemName), "label")));
                    c.push("\n </div>\n </div>\n ");
                }
            }
            c.push("\n");
        }
    }
    c.push("\n </div>\n </div>\n");
    return c.join("");
};
var block_profile_bfbc2awards_use_12_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.bfbc2awards._use_12_10_block_content","extraClassInner": "profile.bfbc2awards._use_12_10_block_extraClassInner","titleType": "profile.bfbc2awards._use_12_10_block_titleType","titleContainer": "profile.bfbc2awards._use_12_10_block_titleContainer"});
profile.bfbc2awards._use_12_10_block_titleType = new Surface.Block("profile.bfbc2awards._use_12_10_block_titleType");
profile.bfbc2awards._use_12_10_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("inverted");
    return c.join("");
};
profile.bfbc2awards._use_12_10_block_extraClassInner = new Surface.Block("profile.bfbc2awards._use_12_10_block_extraClassInner");
profile.bfbc2awards._use_12_10_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2awards._use_12_10_block_titleContainer = new Surface.Block("profile.bfbc2awards._use_12_10_block_titleContainer");
profile.bfbc2awards._use_12_10_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2awards._use_12_10_block_content = new Surface.Block("profile.bfbc2awards._use_12_10_block_content");
profile.bfbc2awards._use_12_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_items;
    l_items = o.awards;
    c.push(' <table class="columns-3">\n <tr>\n <td>\n <h3>');
    c.push(Surface.valOut("Insignias"));
    c.push("</h3>\n <p>");
    c.push(Surface.valOut(l_items.insignias.numTaken));
    c.push("/");
    c.push(Surface.valOut(l_items.insignias.totalAvailable));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
    if (((l_items.insignias.numTaken != 0) && (l_items.insignias.totalAvailable != 0))) {
        c.push(Surface.valOut(((S.Modifier.tofloat(l_items.insignias.numTaken) / S.Modifier.tofloat(l_items.insignias.totalAvailable)) * 100)));
    } else {
        c.push("0");
    }
    c.push('%">&nbsp;</div>\n </div>\n </td>\n <td>\n <h3>');
    c.push(Surface.valOut("Pins"));
    c.push("</h3>\n <p>");
    c.push(Surface.valOut(l_items.pins.numTaken));
    c.push("/");
    c.push(Surface.valOut(l_items.pins.totalAvailable));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
    if (((l_items.pins.numTaken != 0) && (l_items.pins.totalAvailable != 0))) {
        c.push(Surface.valOut(((S.Modifier.tofloat(l_items.pins.numTaken) / S.Modifier.tofloat(l_items.pins.totalAvailable)) * 100)));
    } else {
        c.push("0");
    }
    c.push('%">&nbsp;</div>\n </div>\n </td>\n <td>\n <h3>');
    c.push(Surface.valOut("Achievements"));
    c.push("</h3>\n <p>");
    c.push(Surface.valOut(l_items.achievements.numTaken));
    c.push("/");
    c.push(Surface.valOut(l_items.achievements.totalAvailable));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
    if (((l_items.achievements.numTaken != 0) && (l_items.achievements.totalAvailable != 0))) {
        c.push(Surface.valOut(((S.Modifier.tofloat(l_items.achievements.numTaken) / S.Modifier.tofloat(l_items.achievements.totalAvailable)) * 100)));
    } else {
        c.push("0");
    }
    c.push('%">&nbsp;</div>\n </div>\n </td>\n </tr>\n </table>\n');
    return c.join("");
};
var block_profile_bfbc2gadgets = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2gadgets"));
profile.bfbc2gadgets.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2gadgets;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2gadgets");
    var l_for_profile_bfbc2gadgets_17_10_list;
    var l_counters;
    var l_starImg;
    var l_star;
    var l_for_profile_bfbc2gadgets_3_2_list;
    var l_for_profile_bfbc2gadgets_26_18_list;
    var l_extra;
    var l_items;
    var l_starName;
    var l_itemName;
    var l_imgName;
    c.push("\n");
    l_items = o.stats;
    l_for_profile_bfbc2gadgets_3_2_list = l_items;
    if ((S.Modifier.count(l_for_profile_bfbc2gadgets_3_2_list) > 0)) {
        for (var l_kitId in l_for_profile_bfbc2gadgets_3_2_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2gadgets_3_2_list[l_kitId])) {
                continue;
            }
            var l_kits = l_for_profile_bfbc2gadgets_3_2_list[l_kitId];
            c.push(' <div class="profile-stats-gadget-kit-container">\n <div style="clear:left;"></div>\n <div class="profile-stats-gadget-kit-icon">\n');
            if ((l_kitId == 32)) {
                c.push(' <img class="profile-small-kit-icon" width="19" height="19" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 1)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 2)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 8)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 16)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n');
            } else {
                c.push(' <img class="profile-small-kit-icon" width="19" height="19" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", l_kitId)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" />\n');
            }
            c.push(' </div>\n <div class="profile-stats-gadget-area">\n');
            l_for_profile_bfbc2gadgets_17_10_list = l_kits;
            if ((S.Modifier.count(l_for_profile_bfbc2gadgets_17_10_list) > 0)) {
                for (var l_for_profile_bfbc2gadgets_17_10_key in l_for_profile_bfbc2gadgets_17_10_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2gadgets_17_10_list[l_for_profile_bfbc2gadgets_17_10_key])) {
                        continue;
                    }
                    var l_item = l_for_profile_bfbc2gadgets_17_10_list[l_for_profile_bfbc2gadgets_17_10_key];
                    c.push("\n");
                    l_itemName = l_item.imageName;
                    l_imgName = l_itemName;
                    c.push("\n");
                    l_extra = "";
                    l_counters = {};
                    if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.counters) != "undefined" && l_item.counters !== null)) {
                        l_for_profile_bfbc2gadgets_26_18_list = l_item.counters;
                        if ((S.Modifier.count(l_for_profile_bfbc2gadgets_26_18_list) > 0)) {
                            for (var l_for_profile_bfbc2gadgets_26_18_key in l_for_profile_bfbc2gadgets_26_18_list) {
                                if (!Surface.isValidLoopItem(l_for_profile_bfbc2gadgets_26_18_list[l_for_profile_bfbc2gadgets_26_18_key])) {
                                    continue;
                                }
                                var l_c = l_for_profile_bfbc2gadgets_26_18_list[l_for_profile_bfbc2gadgets_26_18_key];
                                if ((l_c.type == "kills")) {
                                }
                                l_counters = S.Modifier.set(l_counters, l_c.type, l_c.value);
                            }
                        }
                    }
                    l_star = "";
                    l_starName = "";
                    l_starImg = "";
                    if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.star) != "undefined" && l_item.star !== null) && (((o.type == "weapons") || (o.type == "gadgets")) || (o.type == "vehicles")))) {
                        l_starImg = S.Modifier.lower(S.Modifier.replace(l_item.star.criteria.stringID, "s_", ""));
                        if ((l_starImg != false)) {
                            l_star = S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/stars/small/s_", l_starImg), ".png");
                        }
                        l_starName = l_item.star.name;
                    }
                    c.push('\n <div id="');
                    c.push(Surface.valOut(o.type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('" class="profile-stats-gadgetitem profile-stats-generalcontainer">\n <img ');
                    if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                        c.push('class="profile-stats-nottaken"');
                    }
                    c.push(" ");
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", o.type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", o.type), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n');
                    if ((((typeof (l_star) != "undefined" && l_star !== null) && (l_star != false)) && (l_star != ""))) {
                        c.push(' <div class="profile-stats-gadget-star"><img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_star, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('"/></div>\n');
                    }
                    c.push("\n");
                    if ((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) > S.Modifier.get(o.kitScores, l_kitId))) {
                        c.push(' <div class="profile-stats-awarditem-progress-container" style="border:thin solid #999; width:90px; margin-left:5px; height:5px;">\n <div class="profile-stats-awarditem-progress" style="background-color:#666; height:5px; width:');
                        c.push(Surface.valOut(((S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0))) * 100)));
                        c.push('%">&nbsp;</div>\n </div>\n');
                    }
                    c.push('\n </div>\n <script>\n $(document).ready( function()\n {\n $("#');
                    c.push(Surface.valOut(o.type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('").data("gadgetData", ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.locale, o.type), S.Modifier.lower(l_itemName))));
                    c.push(');\n $("#');
                    c.push(Surface.valOut(o.type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('").data("gadgetInfo", { "starImg":"');
                    c.push(Surface.valOut(l_starImg));
                    c.push('", "starName": "');
                    c.push(Surface.valOut(l_starName));
                    c.push('" , "extra": "');
                    c.push(Surface.valOut(l_extra));
                    c.push('" , "counters": ');
                    c.push(Surface.valOut(l_counters));
                    c.push(', "isTaken": "');
                    c.push(Surface.valOut(l_item.isTaken));
                    c.push('", "itemName":"');
                    c.push(Surface.valOut(l_itemName));
                    c.push('", "name":"');
                    c.push(Surface.valOut(l_imgName));
                    c.push('", "type":"');
                    c.push(Surface.valOut(o.type));
                    c.push('"});\n });\n <\/script>\n');
                }
            }
            c.push(" </div>\n </div>\n");
        }
    }
    c.push("\n");
    return c.join("");
};
var block_profile_bfbc2overview = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2overview"));
profile.bfbc2overview.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2overview;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2overview");
    var l_for_profile_bfbc2overview_32_10_list;
    var l_for_profile_bfbc2overview_34_14_list;
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.currentPersona) != "undefined" && o.currentPersona !== null && typeof (o.currentPersona.stats) != "undefined" && o.currentPersona.stats !== null)) {
        c.push("<ul>\n <li>Assault score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_assault));
        c.push("</li>\n <li>Medic score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_medic));
        c.push("</li>\n <li>Recon score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_recon));
        c.push("</li>\n <li>Engineer score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_engineer));
        c.push("</li>\n <li>Vehicle score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_vehicle));
        c.push("</li>\n <li>Combat score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_combat));
        c.push("</li>\n <li>Award score: ");
        c.push(Surface.valOut(o.currentPersona.stats.sc_award));
        c.push("</li>\n <li>TOTAL SCORE: ");
        c.push(Surface.valOut((o.currentPersona.stats.sc_award + o.currentPersona.stats.sc_combat)));
        c.push("</li>\n</ul>\n<ul>\n <li>Kills: ");
        c.push(Surface.valOut(o.currentPersona.stats.kills));
        c.push("</li>\n <li>Deaths: ");
        c.push(Surface.valOut(o.currentPersona.stats.deaths));
        c.push("</li>\n <li>K/D Ratio: ");
        c.push(Surface.valOut(o.currentPersona.stats.kdratio));
        c.push("</li>\n <li>Veteran status: ");
        c.push(Surface.valOut(o.currentPersona.stats.veteran));
        c.push("</li>\n</ul>\n");
    }
    c.push('\n<div id="profile-persona-favourite-weapon">\n</div>\n<div did="profile-battlelog">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "feed")), o, null, kwargs));
    c.push('\n</div>\n<div id="profile-alsoplaying">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.personasInGames) != "undefined" && o.personasInGames !== null)) {
        c.push(" I'm also playing\n");
        l_for_profile_bfbc2overview_32_10_list = o.personasInGames;
        if ((S.Modifier.count(l_for_profile_bfbc2overview_32_10_list) > 0)) {
            for (var l_key in l_for_profile_bfbc2overview_32_10_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bfbc2overview_32_10_list[l_key])) {
                    continue;
                }
                var l_value = l_for_profile_bfbc2overview_32_10_list[l_key];
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.upper($S.callFunction("base.game", l_key, b, kwargs))));
                c.push("\n");
                l_for_profile_bfbc2overview_34_14_list = l_value;
                if ((S.Modifier.count(l_for_profile_bfbc2overview_34_14_list) > 0)) {
                    for (var l_for_profile_bfbc2overview_34_14_key in l_for_profile_bfbc2overview_34_14_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bfbc2overview_34_14_list[l_for_profile_bfbc2overview_34_14_key])) {
                            continue;
                        }
                        var l_p = l_for_profile_bfbc2overview_34_14_list[l_for_profile_bfbc2overview_34_14_key];
                        c.push(" ");
                        c.push(Surface.valOut(l_p.personaName));
                        c.push("\n");
                    }
                }
            }
        }
    }
    c.push("\n</div>");
    return c.join("");
};
var block_profile_bfbc2stats = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2stats"));
profile.bfbc2stats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2stats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2stats");
    var l_kit;
    var l_combatScore;
    var l_currentRank;
    var l_for_profile_bfbc2stats_38_22_list;
    c.push('\n<div class="profile-stats-general">\n <div class="profile-stats-rank">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null)) {
        c.push('\n <div class="profile-stats-currentrank">\n <div class="profile-stats-header-text">Current rank</div>\n');
        l_currentRank = o.personaStats.general.currentRank.level;
        if ((l_currentRank < 10)) {
            l_currentRank = S.Modifier.concat("0", l_currentRank);
        }
        c.push(' <img width="128" height="128" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/ranks/medium/R0", l_currentRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />\n <div class="profile-stats-ranktext">');
        c.push(Surface.valOut(S.Modifier.upper(o.personaStats.general.currentRank.name)));
        c.push("</div>\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.nextRank) != "undefined" && o.personaStats.general.nextRank !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.nextRank) != "undefined" && o.personaStats.general.nextRank !== null && typeof (o.personaStats.general.nextRank.level) != "undefined" && o.personaStats.general.nextRank.level !== null))) {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "304px","max": (o.personaStats.general.nextRank.pointsNeeded - o.personaStats.general.currentRank.pointsNeeded),"value": (o.personaStats.general.score - o.personaStats.general.currentRank.pointsNeeded)}, null, kwargs));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "304px","max": 100,"value": 100}, null, kwargs));
            c.push("\n");
        }
        c.push('\n <div class="profile-stats-rank-bar-text">\n');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.nextRank) != "undefined" && o.personaStats.general.nextRank !== null)) {
            c.push(' <div style="float: left;">');
            c.push(Surface.valOut(S.Modifier.numberformat((o.personaStats.general.score - o.personaStats.general.currentRank.pointsNeeded), "'.'", "','", "'3'")));
            c.push(" / ");
            c.push(Surface.valOut(S.Modifier.numberformat((o.personaStats.general.nextRank.pointsNeeded - o.personaStats.general.currentRank.pointsNeeded), "'.'", "','", "'3'")));
            c.push('</div>\n <div style="float: right; color: #959595; text-align: right;">');
            c.push(Surface.valOut(S.Modifier.numberformat((o.personaStats.general.nextRank.pointsNeeded - o.personaStats.general.score), "'.'", "','", "'3'")));
            c.push(" until rank up</div>\n");
        } else {
            c.push(' <div style="float: left;">');
            c.push(Surface.valOut(o.personaStats.general.currentRank.pointsNeeded));
            c.push(" / ");
            c.push(Surface.valOut(o.personaStats.general.currentRank.pointsNeeded));
            c.push('</div>\n <div style="float: right; color: #959595; text-align: right;">');
            c.push(Surface.valOut("Soldier has reached max rank"));
            c.push("</div>\n");
        }
        c.push(' </div>\n </div>\n <div class="profile-stats-kits">\n <div class="profile-stats-header-text">');
        c.push(Surface.valOut("Score"));
        c.push("</div>\n");
        l_combatScore = 0;
        l_for_profile_bfbc2stats_38_22_list = o.personaStats.general.kitScores;
        if ((S.Modifier.count(l_for_profile_bfbc2stats_38_22_list) > 0)) {
            for (var l_key in l_for_profile_bfbc2stats_38_22_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bfbc2stats_38_22_list[l_key])) {
                    continue;
                }
                var l_val = l_for_profile_bfbc2stats_38_22_list[l_key];
                if ((l_key != 32)) {
                    l_combatScore = (l_combatScore + l_val);
                    c.push(' <div class="profile-stats-row-kit">\n <div class="profile-stats-row-inner">\n');
                    l_kit = S.Modifier.get(o.kitMap, S.Modifier.concat("", l_key));
                    c.push(' <div style="float:left;">\n <span class="profile-small-kit-icon-bg"><img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(l_kit, "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" /></span>\n <span class="profile-small-kit-title">');
                    c.push(Surface.valOut(S.Modifier.get(l_kit, "name")));
                    c.push('</span>\n </div>\n <div style="float:right;">= ');
                    c.push(Surface.valOut(S.Modifier.numberformat(l_val, "'.'", "','", "'3'")));
                    c.push("</div>\n </div>\n </div>\n");
                }
            }
        }
        c.push(' <div class="profile-stats-row-full-sum">\n <div class="profile-stats-row-full-inner">\n <div style="float:left;">');
        c.push(Surface.valOut("Combat score"));
        c.push('</div>\n <div style="float:right;">= ');
        c.push(Surface.valOut(S.Modifier.numberformat(l_combatScore, "'.'", "','", "'3'")));
        c.push('</div>\n </div>\n </div>\n <div class="profile-stats-row-full-sum">\n <div class="profile-stats-row-full-inner">\n <div style="float:left;">');
        c.push(Surface.valOut("Award score"));
        c.push('</div>\n <div style="float:right;">= ');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.awardScore, "'.'", "','", "'3'")));
        c.push('</div>\n </div>\n </div>\n <div class="profile-stats-row-total">\n <div class="profile-stats-row-full-inner">\n <div style="float:left;">');
        c.push(Surface.valOut("Total"));
        c.push('</div>\n <div style="float:right;">= ');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.score, "'.'", "','", "'3'")));
        c.push('</div>\n </div>\n </div>\n </div>\n <div class="profile-stats-numbers">\n <table>\n <tr>\n <th>');
        c.push(Surface.valOut("Kills"));
        c.push("</th>\n <th>");
        c.push(Surface.valOut("Deaths"));
        c.push("</th>\n <th>");
        c.push(Surface.valOut("K/D ratio"));
        c.push('</th>\n <th class="timeplayed">Time played</th>\n </tr>\n <tr>\n <td>');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.kills, "'.'", "','", "'3'")));
        c.push("</td>\n <td>");
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.deaths, "'.'", "','", "'3'")));
        c.push("</td>\n <td>");
        c.push(Surface.valOut(o.personaStats.general.kdRatio.real));
        c.push('</td>\n <td class="timeplayed">');
        c.push(Surface.valOut(o.timePlayed));
        c.push('</td>\n </tr>\n </table>\n </div>\n <div class="profile-stats-general-numbers">\n <table>\n <tr>\n <td class="label">');
        c.push(Surface.valOut("Life expectancy"));
        c.push('</td>\n <td class="value">');
        c.push(Surface.valOut(o.lifeExpectancy));
        c.push('</td>\n <td class="label second-label">');
        c.push(Surface.valOut("Dog tags"));
        c.push('</td>\n <td class="value second-value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.dogtagsTaken, "'.'", "','", "'3'")));
        c.push('</td>\n </tr>\n <tr>\n <td class="label">Squad score</td>\n <td class="value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.squadScore, "'.'", "','", "'3'")));
        c.push('</td>\n <td class="label second-label">');
        c.push(Surface.valOut("Resupplies"));
        c.push('</td>\n <td class="value second-value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.globalNrResupplies, "'.'", "','", "'3'")));
        c.push('</td>\n </tr>\n <tr>\n <td class="label">Score per minute</td>\n <td class="value">');
        c.push(Surface.valOut(S.Modifier.round(o.personaStats.general.scorePerMinute.real, 2)));
        c.push('</td>\n <td class="label second-label">');
        c.push(Surface.valOut("Revives"));
        c.push('</td>\n <td class="value second-value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.globalNrRevives, "'.'", "','", "'3'")));
        c.push('</td>\n </tr>\n <tr>\n <td class="label">Vehicle score</td>\n <td class="value">');
        c.push(Surface.valOut(S.Modifier.numberformat(S.Modifier.get(o.personaStats.general.kitScores, 16), "'.'", "','", "'3'")));
        c.push('</td>\n <td class="label second-label">');
        c.push(Surface.valOut("Repairs"));
        c.push('</td>\n <td class="value second-value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.globalNrRepairs, "'.'", "','", "'3'")));
        c.push('</td>\n </tr>\n <tr>\n <td class="label">Skill rating</td>\n <td class="value">');
        c.push(Surface.valOut(o.personaStats.general.skillLevel));
        c.push('</td>\n <td class="label second-label">');
        c.push(Surface.valOut("Spots"));
        c.push('</td>\n <td class="value second-value">');
        c.push(Surface.valOut(S.Modifier.numberformat(o.personaStats.general.globalNrSpots, "'.'", "','", "'3'")));
        c.push("</td>\n </tr>\n </table>\n </div>\n");
    }
    c.push(" </div>\n</div>\n");
    return c.join("");
};
var block_profile_bfbc2statsforprofile = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2statsforprofile"));
profile.bfbc2statsforprofile.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2statsforprofile;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2statsforprofile");
    var l_kit;
    var l_session;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((!((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null)) && !((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)))) {
        c.push(' <div id="profile-unknown-soldier-maybe-yours" >\n ');
        c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 52}, null, kwargs));
        c.push("\n <h1>");
        c.push(Surface.valOut("Unregistered user"));
        c.push('</h1>\n <p>Is this your soldier? <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/login/{redirect}/", Surface.urlContext)));
        c.push('">Log in</a> now to set up your profile!</p>\n <div class="common-secondary-column-line"></div>\n </div>\n');
    }
    c.push('\n<div id="profile-currentPersonaInfo">\n');
    c.push("\n");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null)) {
        l_kit = S.Modifier.get(o.kitMap, S.Modifier.concat("", o.personaStats.personaClass));
        c.push('\n <div class="profile-current-soldier-image">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/soldier_", S.Modifier.get(l_kit, "name", "medic")), "_us_small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" width="37" height="64" />\n </div>\n <div class="profile-current-soldier-name">\n ');
        c.push(Surface.valOut(S.Modifier.get(o.statsPersona, "personaName")));
        c.push('\n </div>\n <div class="profile-current-soldier-game">\n');
        if ((S.Modifier.get(o.personaStats, "platform") !== null)) {
            c.push(' <span class="');
            c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", Surface.globalContext.staticContext.games.BFBC2, S.Modifier.get(o.personaStats, "platform"), 0, b, kwargs)));
            c.push('"></span>\n');
        }
        c.push(' </div>\n <div id="profile-stats-updatedAt">\n ');
        c.push(Surface.valOut("Stats last updated at"));
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.get(o.personaStats, "updatedAt")));
        c.push('\n </div>\n <div class="profile-no-nam-stats">\n Stats for BFBC2 Vietnam or other DLC not yet available.\n </div>\n');
    }
    c.push(' <div class="common-secondary-column-line"></div>\n</div>\n');
    return c.join("");
};
var block_profile_bfbc2stattabs = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2stattabs"));
profile.bfbc2stattabs.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2stattabs;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2stattabs");
    var l_awardsMax;
    var l_awardsValue;
    var l_currentRank;
    var l_for_profile_bfbc2stattabs_80_18_list;
    c.push("\n");
    c.push('<div style="clear:both"></div>\n<input id="profile-addTargetURL" type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/addStatsTarget/", Surface.urlContext)));
    c.push('" />\n<input id="profile-removeTargetURL" type="hidden" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/removeStatsTarget/", Surface.urlContext)));
    c.push('" />\n<div id="persona-information-tabs">\n <div id="persona-information-tab-overview" class="persona-information-tab ');
    if ((o.active == "overview")) {
        c.push("active");
    }
    c.push('">\n <h2>');
    c.push(Surface.valOut("Stats & Progression"));
    c.push("</h2>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null)) {
        l_currentRank = ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.currentRank) != "undefined" && o.personaStats.general.currentRank !== null && typeof (o.personaStats.general.currentRank.level) != "undefined" && o.personaStats.general.currentRank.level !== null) ? o.personaStats.general.currentRank.level : 1);
        c.push('\n <div class="persona-information-tab-overview-rank">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "personarank")), {"rankGame": o.currentPersonaGame,"rankLevel": l_currentRank,"size": "small"}, null, kwargs));
        c.push('\n </div>\n <div class="profile-stats-rank-bar-text">\n');
        if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.nextRank) != "undefined" && o.personaStats.general.nextRank !== null)) {
            c.push(' <div class="persona-information-tab-overview-pointsneeded"><strong>');
            c.push(Surface.valOut(S.Modifier.numberformat((o.personaStats.general.score - o.personaStats.general.currentRank.pointsNeeded), "'.'", "','", "'3'")));
            c.push("</strong> / ");
            c.push(Surface.valOut(S.Modifier.numberformat((o.personaStats.general.nextRank.pointsNeeded - o.personaStats.general.currentRank.pointsNeeded), "'.'", "','", "'3'")));
            c.push("</div>\n");
        } else {
            c.push(' <div class="persona-information-tab-overview-pointsneeded">');
            c.push(Surface.valOut("Soldier has reached max rank"));
            c.push("</div>\n");
        }
        c.push(" </div>\n");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.personaStats) != "undefined" && o.personaStats !== null && typeof (o.personaStats.general) != "undefined" && o.personaStats.general !== null && typeof (o.personaStats.general.nextRank) != "undefined" && o.personaStats.general.nextRank !== null && typeof (o.personaStats.general.nextRank.pointsNeeded) != "undefined" && o.personaStats.general.nextRank.pointsNeeded !== null)) {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "140px","max": (o.personaStats.general.nextRank.pointsNeeded - o.personaStats.general.currentRank.pointsNeeded),"value": (o.personaStats.general.score - o.personaStats.general.currentRank.pointsNeeded)}, null, kwargs));
            c.push("\n");
        } else {
            c.push(" ");
            c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "140px","max": 100,"value": 100}, null, kwargs));
            c.push("\n");
        }
        c.push('\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.statsPersona, o.currentPersonaGame, o.statsPersona.namespace, b, kwargs))));
        c.push('"></a>\n');
    }
    c.push(' </div>\n <div id="persona-information-tab-weapons" class="persona-information-tab ');
    if ((o.active == "weapons")) {
        c.push("active");
    }
    c.push('">\n <h2>Kits & Weapons</h2>\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.favoriteWeapon) != "undefined" && o.favoriteWeapon !== null)) {
        c.push(' <div class="persona-information-tab-weapons-favourite-image">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"type": "weapons","imageName": S.Modifier.get(o.favoriteWeapon, "imageName")}, null, kwargs));
        c.push('\n </div>\n <div class="persona-information-tab-weapons-favourite-name">\n ');
        c.push(Surface.valOut(S.Modifier.upper(S.Modifier.get(o.favoriteWeapon, "imageName"))));
        c.push("<span>, ");
        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.favoriteWeapon, "counters"), 4), "value")));
        c.push(" ");
        c.push(Surface.valOut("Kills"));
        c.push("</span>\n </div>\n");
    }
    if ((typeof (o) != "undefined" && o !== null && typeof (o.personaWeaponStats) != "undefined" && o.personaWeaponStats !== null)) {
        c.push("\n");
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "63px","max": o.personaWeaponStats.weapons.totalAvailable,"value": o.personaWeaponStats.weapons.numTaken}, null, kwargs));
        c.push('\n <div class="persona-weapons-unlocked">');
        c.push(Surface.valOut(o.personaWeaponStats.weapons.numTaken));
        c.push("/");
        c.push(Surface.valOut(o.personaWeaponStats.weapons.totalAvailable));
        c.push(" <span>");
        c.push(Surface.valOut("weapons"));
        c.push("</span></div>\n ");
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "63px","max": o.personaWeaponStats.gadgets.totalAvailable,"value": o.personaWeaponStats.gadgets.numTaken}, null, kwargs));
        c.push('\n <div class="persona-weapons-unlocked">');
        c.push(Surface.valOut(o.personaWeaponStats.gadgets.numTaken));
        c.push("/");
        c.push(Surface.valOut(o.personaWeaponStats.gadgets.totalAvailable));
        c.push(" <span>");
        c.push(Surface.valOut("gadgets"));
        c.push('</span></div>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.statsPersona, o.currentPersonaGame, o.statsPersona.namespace, b, kwargs))));
        c.push('"></a>\n');
    }
    c.push(' </div>\n <div id="persona-information-tab-vehicles" class="persona-information-tab ');
    if ((o.active == "vehicles")) {
        c.push("active");
    }
    c.push('">\n <h2>');
    c.push(Surface.valOut("Vehicles"));
    c.push("</h2>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.favoriteVehicle) != "undefined" && o.favoriteVehicle !== null)) {
        c.push(' <div class="persona-information-tab-vehicles-favourite-image">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"type": "vehicles","imageName": S.Modifier.get(o.favoriteVehicle, "imageName")}, null, kwargs));
        c.push('\n </div>\n <div class="persona-information-tab-vehicles-favourite-name">\n ');
        c.push(Surface.valOut(S.Modifier.upper(S.Modifier.get(o.favoriteVehicle, "imageName"))));
        c.push("<span>,\n");
        l_for_profile_bfbc2stattabs_80_18_list = S.Modifier.get(o.favoriteVehicle, "counters");
        if ((S.Modifier.count(l_for_profile_bfbc2stattabs_80_18_list) > 0)) {
            for (var l_for_profile_bfbc2stattabs_80_18_key in l_for_profile_bfbc2stattabs_80_18_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bfbc2stattabs_80_18_list[l_for_profile_bfbc2stattabs_80_18_key])) {
                    continue;
                }
                var l_c = l_for_profile_bfbc2stattabs_80_18_list[l_for_profile_bfbc2stattabs_80_18_key];
                if ((l_c.type == "kills")) {
                    c.push(" ");
                    c.push(Surface.valOut(l_c.value));
                    c.push(" kills\n");
                }
            }
        }
        c.push(' </span>\n </div>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/vehicles/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.statsPersona, o.currentPersonaGame, o.statsPersona.namespace, b, kwargs))));
        c.push('"></a>\n');
    }
    c.push(' </div>\n <div id="persona-information-tab-awards" class="persona-information-tab ');
    if ((o.active == "awards")) {
        c.push("active");
    }
    c.push(" ");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.myAwards) != "undefined" && o.myAwards !== null))) {
        c.push("no-awards");
    }
    c.push(' last">\n <h2>');
    c.push(Surface.valOut("Awards"));
    c.push("</h2>\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.myAwards) != "undefined" && o.myAwards !== null)) {
        l_awardsMax = ((S.Modifier.get(S.Modifier.get(o.myAwards, "pins"), "totalAvailable") + S.Modifier.get(S.Modifier.get(o.myAwards, "insignias"), "totalAvailable")) + S.Modifier.get(S.Modifier.get(o.myAwards, "achievements"), "totalAvailable"));
        l_awardsValue = ((S.Modifier.get(S.Modifier.get(o.myAwards, "pins"), "numTaken") + S.Modifier.get(S.Modifier.get(o.myAwards, "insignias"), "numTaken")) + S.Modifier.get(S.Modifier.get(o.myAwards, "achievements"), "numTaken"));
        c.push('\n <div class="persona-information-tab-overview-awards">');
        c.push(Surface.valOut("Total awards"));
        c.push('</div>\n <div class="profile-stats-rank-bar-text">\n <div class="persona-information-tab-overview-pointsneeded"><strong>');
        c.push(Surface.valOut(S.Modifier.numberformat(l_awardsValue, "'.'", "','", "'3'")));
        c.push("</strong> / ");
        c.push(Surface.valOut(S.Modifier.numberformat(l_awardsMax, "'.'", "','", "'3'")));
        c.push("</div>\n </div>\n ");
        c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"width": "140px","max": S.Modifier.get(S.Modifier.get(o.myAwards, "pins"), "totalAvailable"),"value": S.Modifier.get(S.Modifier.get(o.myAwards, "pins"), "numTaken")}, null, kwargs));
        c.push("\n");
    }
    if ((typeof (o) != "undefined" && o !== null && typeof (o.statsPersona) != "undefined" && o.statsPersona !== null)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.statsPersona, o.currentPersonaGame, o.statsPersona.namespace, b, kwargs))));
        c.push('"></a>\n');
    }
    c.push('\n </div>\n <div class="base-clear"></div>\n </div>\n<div style="clear:both"></div>');
    return c.join("");
};
var block_profile_bfbc2vehicles = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2vehicles"));
profile.bfbc2vehicles.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2vehicles;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2vehicles");
    var l_kills;
    var l_for_profile_bfbc2vehicles_60_22_list;
    var l_items;
    var l_session;
    var l_for_profile_bfbc2vehicles_82_38_list;
    var l_for_profile_bfbc2vehicles_113_14_list;
    var l_type;
    var l_for_profile_bfbc2vehicles_113_14_iteration;
    var l_extra;
    var l_for_profile_bfbc2vehicles_49_14_list;
    var l_for_profile_bfbc2vehicles_46_10_list;
    var l_for_profile_bfbc2vehicles_49_14_iteration;
    var l_itemName;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    l_items = o.vehicles;
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2statsforprofile")), o, null, kwargs));
    c.push("\n");
    o.active = "vehicles";
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2stattabs")), o, null, kwargs));
    c.push('\n<div class="profilestats-container">\n <div class="profilestats-overview">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_bfbc2vehicles_use_12_10, kwargs));
    c.push(' </div>\n <div class="profilestats-item-area">\n <h3 class="stats-title">');
    c.push(Surface.valOut("Vehicles"));
    c.push("</h3>\n");
    l_for_profile_bfbc2vehicles_46_10_list = l_items;
    if ((S.Modifier.count(l_for_profile_bfbc2vehicles_46_10_list) > 0)) {
        for (var l_for_profile_bfbc2vehicles_46_10_key in l_for_profile_bfbc2vehicles_46_10_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2vehicles_46_10_list[l_for_profile_bfbc2vehicles_46_10_key])) {
                continue;
            }
            var l_item = l_for_profile_bfbc2vehicles_46_10_list[l_for_profile_bfbc2vehicles_46_10_key];
            l_type = "vehicles";
            c.push("\n");
            l_for_profile_bfbc2vehicles_49_14_list = l_item;
            l_for_profile_bfbc2vehicles_49_14_iteration = 0;
            if ((S.Modifier.count(l_for_profile_bfbc2vehicles_49_14_list) > 0)) {
                for (var l_for_profile_bfbc2vehicles_49_14_key in l_for_profile_bfbc2vehicles_49_14_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2vehicles_49_14_list[l_for_profile_bfbc2vehicles_49_14_key])) {
                        continue;
                    }
                    var l_i = l_for_profile_bfbc2vehicles_49_14_list[l_for_profile_bfbc2vehicles_49_14_key];
                    l_for_profile_bfbc2vehicles_49_14_iteration = (l_for_profile_bfbc2vehicles_49_14_iteration + 1);
                    if ((Surface.modulo((l_for_profile_bfbc2vehicles_49_14_iteration - 1), 5) == 0)) {
                        c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                    }
                    c.push("\n");
                    l_itemName = l_i.imageName;
                    l_extra = "";
                    c.push("\n");
                    c.push("\n");
                    if ((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.counters) != "undefined" && l_i.counters !== null)) {
                        l_for_profile_bfbc2vehicles_60_22_list = l_i.counters;
                        if ((S.Modifier.count(l_for_profile_bfbc2vehicles_60_22_list) > 0)) {
                            for (var l_for_profile_bfbc2vehicles_60_22_key in l_for_profile_bfbc2vehicles_60_22_list) {
                                if (!Surface.isValidLoopItem(l_for_profile_bfbc2vehicles_60_22_list[l_for_profile_bfbc2vehicles_60_22_key])) {
                                    continue;
                                }
                                var l_c = l_for_profile_bfbc2vehicles_60_22_list[l_for_profile_bfbc2vehicles_60_22_key];
                                c.push("\n");
                                if ((l_c.type == "kills")) {
                                    l_kills = l_c.value;
                                }
                                c.push("\n");
                            }
                        }
                    }
                    c.push('\n <div id="');
                    c.push(Surface.valOut(l_type));
                    c.push("_");
                    c.push(Surface.valOut(l_itemName));
                    c.push('" class="profilestats-item">\n <div class="profilestats-popup" >\n <div class="profilestats-popup-content">\n <img class="profilestats-item-image" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <p class="profilestats-item-name">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "vehicles"), l_itemName), "label")));
                    c.push('\n </p>\n <div class="profilestats-popup-stats">\n <table>\n');
                    if ((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.counters) != "undefined" && l_i.counters !== null)) {
                        l_for_profile_bfbc2vehicles_82_38_list = l_i.counters;
                        if ((S.Modifier.count(l_for_profile_bfbc2vehicles_82_38_list) > 0)) {
                            for (var l_for_profile_bfbc2vehicles_82_38_key in l_for_profile_bfbc2vehicles_82_38_list) {
                                if (!Surface.isValidLoopItem(l_for_profile_bfbc2vehicles_82_38_list[l_for_profile_bfbc2vehicles_82_38_key])) {
                                    continue;
                                }
                                var l_c = l_for_profile_bfbc2vehicles_82_38_list[l_for_profile_bfbc2vehicles_82_38_key];
                                c.push(' <tr>\n <td class="label">');
                                c.push(Surface.valOut(l_c.type));
                                c.push('</td>\n <td class="value">');
                                c.push(Surface.valOut(l_c.value));
                                if ((l_c.type == "distance")) {
                                    c.push("m");
                                }
                                c.push("</td>\n </tr>\n");
                            }
                        }
                    }
                    c.push(' </table>\n </div>\n </div>\n </div>\n <img class="profilestats-item-image');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profilestats-item-nottaken");
                    }
                    c.push('" ');
                    c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_itemName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <p class="profilestats-item-name');
                    if (!(((typeof (l_i) != "undefined" && l_i !== null && typeof (l_i.isTaken) != "undefined" && l_i.isTaken !== null) ? l_i.isTaken : false))) {
                        c.push(" profilestats-item-nottaken");
                    }
                    c.push('">\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "vehicles"), l_itemName), "label")));
                    c.push('\n </p>\n <p class="profilestats-item-taken">');
                    c.push(Surface.valOut(l_kills));
                    c.push(" ");
                    c.push(Surface.valOut(S.Modifier.pluralize(l_kills, "kill", "kills")));
                    c.push("</p>\n </div>\n");
                }
            }
        }
    }
    c.push(' </div>\n <div style="clear: both;position: relative; width:620px; background: #ebebea; height: 1px; margin-left: 16px; margin-top: 20px; margin-bottom: 10px;"></div>\n <div class="profilestats-item-area">\n <h3 class="stats-title">');
    c.push(Surface.valOut("Specializations"));
    c.push("</h3>\n");
    l_for_profile_bfbc2vehicles_113_14_list = o.vehicleSpecializations;
    l_for_profile_bfbc2vehicles_113_14_iteration = 0;
    if ((S.Modifier.count(l_for_profile_bfbc2vehicles_113_14_list) > 0)) {
        for (var l_for_profile_bfbc2vehicles_113_14_key in l_for_profile_bfbc2vehicles_113_14_list) {
            if (!Surface.isValidLoopItem(l_for_profile_bfbc2vehicles_113_14_list[l_for_profile_bfbc2vehicles_113_14_key])) {
                continue;
            }
            var l_item = l_for_profile_bfbc2vehicles_113_14_list[l_for_profile_bfbc2vehicles_113_14_key];
            l_for_profile_bfbc2vehicles_113_14_iteration = (l_for_profile_bfbc2vehicles_113_14_iteration + 1);
            l_type = "specializations";
            if ((Surface.modulo((l_for_profile_bfbc2vehicles_113_14_iteration - 1), 5) == 0)) {
                c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
            }
            l_extra = "";
            c.push('\n <div id="');
            c.push(Surface.valOut(l_type));
            c.push("_");
            c.push(Surface.valOut(l_item.imageName));
            c.push('" class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n');
            if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                    c.push("\n");
                }
            }
            c.push('\n <img class="profilestats-item-image" ');
            c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
            c.push(' src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_item.imageName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n');
            if (!(l_item.isTaken)) {
                c.push(' <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                    c.push("100");
                } else {
                    c.push(Surface.valOut(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.progressPercent) != "undefined" && l_item.progressPercent !== null) ? l_item.progressPercent : 0)));
                }
                c.push('%">&nbsp;</div>\n </div>\n');
            }
            c.push('\n <p class="profilestats-item-name">\n ');
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, l_type), l_item.imageName), "label")));
            c.push("\n </p>\n");
            if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                c.push(' <p class="profilestats-item-taken">\n ');
                c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, l_type), l_item.imageName), "criteria")));
                c.push("\n </p>\n");
            }
            c.push(" </div>\n </div>\n");
            if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                    c.push(" ");
                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                    c.push("\n");
                }
            }
            c.push('\n <img class="profilestats-item-image');
            if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                c.push(" profile-stats-nottaken");
            }
            c.push('" ');
            c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
            c.push(' src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_item.imageName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />\n');
            if (!(l_item.isTaken)) {
                c.push(' <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                    c.push("100");
                } else {
                    c.push(Surface.valOut(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.progressPercent) != "undefined" && l_item.progressPercent !== null) ? l_item.progressPercent : 0)));
                }
                c.push('%">&nbsp;</div>\n </div>\n');
            }
            c.push(' <p class="profilestats-item-name');
            if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                c.push(" profile-stats-nottaken");
            }
            c.push('">\n ');
            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, l_type), l_item.imageName), "label")));
            c.push('\n </p>\n <div class="profile-stats-awarditem-extra');
            if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                c.push(" profile-stats-nottaken");
            }
            c.push('">\n ');
            c.push(Surface.valOut(l_extra));
            c.push("\n </div>\n </div>\n");
        }
    }
    c.push(" </div>\n </div>\n");
    return c.join("");
};
var block_profile_bfbc2vehicles_use_12_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.bfbc2vehicles._use_12_10_block_content","extraClassInner": "profile.bfbc2vehicles._use_12_10_block_extraClassInner","titleType": "profile.bfbc2vehicles._use_12_10_block_titleType","titleContainer": "profile.bfbc2vehicles._use_12_10_block_titleContainer"});
profile.bfbc2vehicles._use_12_10_block_titleType = new Surface.Block("profile.bfbc2vehicles._use_12_10_block_titleType");
profile.bfbc2vehicles._use_12_10_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("inverted");
    return c.join("");
};
profile.bfbc2vehicles._use_12_10_block_extraClassInner = new Surface.Block("profile.bfbc2vehicles._use_12_10_block_extraClassInner");
profile.bfbc2vehicles._use_12_10_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2vehicles._use_12_10_block_titleContainer = new Surface.Block("profile.bfbc2vehicles._use_12_10_block_titleContainer");
profile.bfbc2vehicles._use_12_10_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2vehicles._use_12_10_block_content = new Surface.Block("profile.bfbc2vehicles._use_12_10_block_content");
profile.bfbc2vehicles._use_12_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n <table>\n <tr>\n <td>\n <h3>Vehicles</h3>\n <p>");
    c.push(Surface.valOut(S.Modifier.count(o.vehicles)));
    c.push("/");
    c.push(Surface.valOut(S.Modifier.count(o.vehicles)));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style=""></div>\n </div>\n </td>\n <td>\n <h3>Specializations</h3>\n <p>');
    c.push(Surface.valOut(o.vehicleSpecTaken));
    c.push("/");
    c.push(Surface.valOut(S.Modifier.count(o.vehicleSpecializations)));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style=""></div>\n </div>\n </td>\n </tr>\n </table>\n');
    return c.join("");
};
var block_profile_bfbc2weapons = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("bfbc2weapons"));
profile.bfbc2weapons.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_bfbc2weapons;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.bfbc2weapons");
    var l_for_profile_bfbc2weapons_330_18_iteration;
    var l_starImg;
    var l_for_profile_bfbc2weapons_330_18_list;
    var l_kills;
    var l_for_profile_bfbc2weapons_43_6_list;
    var l_shotshit;
    var l_for_profile_bfbc2weapons_75_26_list;
    var l_headshots;
    var l_shotsfired;
    var l_items;
    var l_session;
    var l_imgName;
    var l_isTaken;
    var l_for_profile_bfbc2weapons_204_18_iteration;
    var l_type;
    var l_resupplies;
    var l_star;
    var l_for_profile_bfbc2weapons_204_18_list;
    var l_for_profile_bfbc2weapons_61_18_list;
    var l_for_profile_bfbc2weapons_216_26_list;
    var l_for_profile_bfbc2weapons_61_18_iteration;
    var l_progressPercent;
    var l_itemName;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2statsforprofile")), o, null, kwargs));
    c.push("\n");
    o.active = "weapons";
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2stattabs")), o, null, kwargs));
    c.push('\n<div class="profilestats-container">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.stats) != "undefined" && o.stats !== null)) {
        l_items = o.stats;
        c.push('\n <div class="profilestats-overview">\n');
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_bfbc2weapons_use_14_6, kwargs));
        c.push(" </div>\n");
        l_type = "weapons";
        l_for_profile_bfbc2weapons_43_6_list = l_items;
        if ((S.Modifier.count(l_for_profile_bfbc2weapons_43_6_list) > 0)) {
            for (var l_kitId in l_for_profile_bfbc2weapons_43_6_list) {
                if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_43_6_list[l_kitId])) {
                    continue;
                }
                var l_kits = l_for_profile_bfbc2weapons_43_6_list[l_kitId];
                c.push(' <div class="profilestats-item-area">\n <div class="profile-stats-weapons-kit-header profile-stats-header-text">\n');
                if ((l_kitId == 32)) {
                    c.push(' <img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 1)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 2)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 8)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n <img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", 16)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n All\n');
                } else {
                    c.push(' <img class="profile-small-kit-icon" width="19" height="19" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/general/kit-", S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", l_kitId)), "name")), "-icon-small.png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" />\n ');
                    c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", l_kitId)), "name")));
                    c.push("\n");
                }
                c.push(' </div>\n <div>\n <h3 class="stats-title">Weapons</h3>\n');
                l_for_profile_bfbc2weapons_61_18_list = l_kits;
                l_for_profile_bfbc2weapons_61_18_iteration = 0;
                if ((S.Modifier.count(l_for_profile_bfbc2weapons_61_18_list) > 0)) {
                    for (var l_for_profile_bfbc2weapons_61_18_key in l_for_profile_bfbc2weapons_61_18_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_61_18_list[l_for_profile_bfbc2weapons_61_18_key])) {
                            continue;
                        }
                        var l_item = l_for_profile_bfbc2weapons_61_18_list[l_for_profile_bfbc2weapons_61_18_key];
                        l_for_profile_bfbc2weapons_61_18_iteration = (l_for_profile_bfbc2weapons_61_18_iteration + 1);
                        if ((Surface.modulo((l_for_profile_bfbc2weapons_61_18_iteration - 1), 5) == 0)) {
                            c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                        }
                        c.push("\n");
                        l_itemName = l_item.imageName;
                        l_imgName = l_itemName;
                        l_kills = 0;
                        l_shotsfired = false;
                        l_shotshit = false;
                        l_headshots = false;
                        if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.counters) != "undefined" && l_item.counters !== null)) {
                            l_for_profile_bfbc2weapons_75_26_list = l_item.counters;
                            if ((S.Modifier.count(l_for_profile_bfbc2weapons_75_26_list) > 0)) {
                                for (var l_for_profile_bfbc2weapons_75_26_key in l_for_profile_bfbc2weapons_75_26_list) {
                                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_75_26_list[l_for_profile_bfbc2weapons_75_26_key])) {
                                        continue;
                                    }
                                    var l_c = l_for_profile_bfbc2weapons_75_26_list[l_for_profile_bfbc2weapons_75_26_key];
                                    if ((l_c.type == "kills")) {
                                        l_kills = l_c.value;
                                    }
                                    if ((l_c.type == "shots_hit")) {
                                        l_shotshit = l_c.value;
                                    }
                                    if ((l_c.type == "shots_fired")) {
                                        l_shotsfired = l_c.value;
                                    }
                                    if ((l_c.type == "headshots")) {
                                        l_headshots = l_c.value;
                                    }
                                    c.push("\n");
                                }
                            }
                        }
                        l_star = "";
                        l_starImg = "";
                        if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.star) != "undefined" && l_item.star !== null) && (((l_type == "weapons") || (l_type == "gadgets")) || (l_type == "vehicles")))) {
                            l_starImg = S.Modifier.lower(S.Modifier.replace(l_item.star.criteria.stringID, "s_", ""));
                            if ((l_starImg != false)) {
                                l_star = S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/stars/small/s_", l_starImg), ".png");
                            }
                        }
                        if ((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) > S.Modifier.get(o.kitScores, l_kitId))) {
                            l_isTaken = false;
                        } else {
                            l_isTaken = true;
                        }
                        c.push('\n <div id="');
                        c.push(Surface.valOut(l_type));
                        c.push("_");
                        c.push(Surface.valOut(l_itemName));
                        c.push('" class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n');
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                            if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                                if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : true))) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                                    c.push("\n");
                                }
                            }
                        }
                        c.push('\n <img class="profilestats-item-image" ');
                        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                        if (!(l_isTaken)) {
                            c.push(' <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                            if (((typeof (o) != "undefined" && o !== null && typeof (o.i) != "undefined" && o.i !== null && typeof (o.i.isTaken) != "undefined" && o.i.isTaken !== null) ? o.i.isTaken : false)) {
                                c.push("100");
                            } else {
                                c.push(Surface.valOut(((S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0))) * 100)));
                            }
                            c.push('%">&nbsp;</div>\n </div>\n');
                        }
                        c.push('\n <p class="profilestats-item-name">\n ');
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "weapons"), l_item.imageName), "label")));
                        c.push('\n </p>\n <div class="profilestats-popup-stats">\n');
                        if (l_isTaken) {
                            c.push(' <table>\n <tr><td class="label">');
                            c.push(Surface.valOut("Kills"));
                            c.push('</td><td class="value">');
                            c.push(Surface.valOut(l_kills));
                            c.push("</td></tr>\n");
                            if (l_shotsfired) {
                                c.push(' <tr>\n <td class="label">');
                                c.push(Surface.valOut("Shots"));
                                c.push('</td>\n <td class="value">');
                                c.push(Surface.valOut(l_shotsfired));
                                c.push("</td>\n </tr>\n");
                            }
                            if (l_shotshit) {
                                c.push(' <tr>\n <td class="label">');
                                c.push(Surface.valOut("Accuracy"));
                                c.push('</td>\n <td class="value">');
                                if (((l_shotshit != 0) && (l_shotsfired != 0))) {
                                    c.push(Surface.valOut(S.Modifier.round(((S.Modifier.tofloat(l_shotshit) / S.Modifier.tofloat(l_shotsfired)) * 100), 2)));
                                } else {
                                    c.push("0");
                                }
                                c.push("%</td>\n </tr>\n");
                            }
                            if (l_headshots) {
                                c.push(' <tr>\n <td class="label">');
                                c.push(Surface.valOut("Headshots"));
                                c.push('</td>\n <td class="value">');
                                c.push(Surface.valOut(l_headshots));
                                c.push("</td>\n </tr>\n");
                            }
                            c.push(" </table>\n");
                        } else {
                            c.push(' <p class="profilestats-item-taken">Need ');
                            c.push(Surface.valOut((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) - S.Modifier.get(o.kitScores, l_kitId))));
                            c.push(" ");
                            c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(o.kitMap, S.Modifier.concat("", l_kitId)), "name")));
                            c.push(" points to unlock this weapon.</p>\n");
                        }
                        c.push(" </div>\n </div>\n </div>\n");
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                            if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                                if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : true))) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                                    c.push("\n");
                                }
                            }
                        }
                        c.push('\n <img class="profilestats-item-image');
                        if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('" ');
                        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", l_type, "small", b, kwargs)));
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", l_type), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                        if (!(l_isTaken)) {
                            if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                                l_progressPercent = 100;
                            } else {
                                l_progressPercent = (S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 1)));
                                l_progressPercent = (l_progressPercent * 100);
                            }
                            c.push('\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                            c.push(Surface.valOut(S.Modifier.toint(l_progressPercent)));
                            c.push('%">&nbsp;</div>\n </div>\n');
                        }
                        c.push('\n <p class="profilestats-item-name');
                        if (!(l_isTaken)) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('">\n ');
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "weapons"), l_item.imageName), "label")));
                        c.push("\n");
                        if ((((typeof (l_star) != "undefined" && l_star !== null) && (l_star != false)) && (l_star != ""))) {
                            c.push(' <img src="');
                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_star, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                            c.push('" class="profile-stats-gadget-star" />\n');
                        }
                        c.push(" </p>\n");
                        if (l_isTaken) {
                            c.push(' <p class="profilestats-item-taken">');
                            c.push(Surface.valOut(l_kills));
                            c.push(" ");
                            c.push(Surface.valOut("Kills"));
                            c.push("</p>\n");
                        }
                        c.push("\n </div>\n");
                    }
                }
                c.push('\n <div style="clear: both;position: relative; width:620px; background: #ebebea; height: 1px; margin-top: 20px; margin-bottom: 10px;"></div>\n <h3 class="stats-title">Gadgets & Specializations</h3>\n');
                l_for_profile_bfbc2weapons_204_18_list = S.Modifier.get(o.gadgetStats, l_kitId);
                l_for_profile_bfbc2weapons_204_18_iteration = 0;
                if ((S.Modifier.count(l_for_profile_bfbc2weapons_204_18_list) > 0)) {
                    for (var l_for_profile_bfbc2weapons_204_18_key in l_for_profile_bfbc2weapons_204_18_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_204_18_list[l_for_profile_bfbc2weapons_204_18_key])) {
                            continue;
                        }
                        var l_item = l_for_profile_bfbc2weapons_204_18_list[l_for_profile_bfbc2weapons_204_18_key];
                        l_for_profile_bfbc2weapons_204_18_iteration = (l_for_profile_bfbc2weapons_204_18_iteration + 1);
                        if ((Surface.modulo((l_for_profile_bfbc2weapons_204_18_iteration - 1), 5) == 0)) {
                            c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                        }
                        l_kills = false;
                        l_shotsfired = false;
                        l_shotshit = false;
                        l_resupplies = false;
                        l_itemName = l_item.imageName;
                        l_imgName = l_itemName;
                        if ((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.counters) != "undefined" && l_item.counters !== null)) {
                            l_for_profile_bfbc2weapons_216_26_list = l_item.counters;
                            if ((S.Modifier.count(l_for_profile_bfbc2weapons_216_26_list) > 0)) {
                                for (var l_for_profile_bfbc2weapons_216_26_key in l_for_profile_bfbc2weapons_216_26_list) {
                                    if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_216_26_list[l_for_profile_bfbc2weapons_216_26_key])) {
                                        continue;
                                    }
                                    var l_c = l_for_profile_bfbc2weapons_216_26_list[l_for_profile_bfbc2weapons_216_26_key];
                                    if ((l_c.type == "kills")) {
                                        l_kills = l_c.value;
                                    }
                                    if ((l_c.type == "shots_hit")) {
                                        l_shotshit = l_c.value;
                                    }
                                    if ((l_c.type == "shots_fired")) {
                                        l_shotsfired = l_c.value;
                                    }
                                    if ((l_c.type == "resupplies")) {
                                        l_resupplies = l_c.value;
                                    }
                                }
                            }
                        }
                        if ((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) > S.Modifier.get(o.kitScores, l_kitId))) {
                            l_isTaken = false;
                        } else {
                            l_isTaken = true;
                        }
                        c.push('\n <div class="profilestats-item">\n <div class="profilestats-popup">\n <div class="profilestats-popup-content">\n');
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                            if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                                if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : true))) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                                    c.push("\n");
                                }
                            }
                        }
                        c.push('\n <img class="profilestats-item-image" ');
                        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", "gadgets", "small", b, kwargs)));
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", "gadgets"), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                        if ((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) > S.Modifier.get(o.kitScores, l_kitId))) {
                            if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                                l_progressPercent = 100;
                            } else {
                                l_progressPercent = (S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 1)));
                                l_progressPercent = (l_progressPercent * 100);
                            }
                            c.push('\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                            c.push(Surface.valOut(S.Modifier.toint(l_progressPercent)));
                            c.push('%">&nbsp;</div>\n </div>\n');
                        }
                        c.push('\n <p class="profilestats-item-name">');
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "gadgets"), l_item.imageName), "label")));
                        c.push('</p>\n <div class="profilestats-popup-stats">\n <table>\n');
                        if (l_kills) {
                            c.push(' <tr>\n <td class="label">');
                            c.push(Surface.valOut("Kills"));
                            c.push('</td>\n <td class="value">');
                            c.push(Surface.valOut(l_kills));
                            c.push("</td>\n </tr>\n");
                        }
                        c.push("\n");
                        if (l_shotsfired) {
                            c.push(' <tr>\n <td class="label">');
                            c.push(Surface.valOut("Shots"));
                            c.push('</td>\n <td class="value">');
                            c.push(Surface.valOut(l_shotsfired));
                            c.push("</td>\n </tr>\n");
                        }
                        if (l_shotshit) {
                            c.push(' <tr>\n <td class="label">');
                            c.push(Surface.valOut("Shots hit"));
                            c.push('</td>\n <td class="value">');
                            c.push(Surface.valOut(l_shotshit));
                            c.push("</td>\n </tr>\n");
                        }
                        if (l_resupplies) {
                            c.push(' <tr>\n <td class="label">');
                            c.push(Surface.valOut("Resupplies"));
                            c.push('</td>\n <td class="value">');
                            c.push(Surface.valOut(l_resupplies));
                            c.push("</td>\n </tr>\n");
                        }
                        c.push(" </table>\n </div>\n </div>\n </div>\n");
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                            if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                                if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : true))) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                                    c.push("\n");
                                }
                            }
                        }
                        c.push('\n <img class="profilestats-item-image');
                        if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('" ');
                        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", "gadgets", "small", b, kwargs)));
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", "gadgets"), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                        if ((((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0) > S.Modifier.get(o.kitScores, l_kitId))) {
                            if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                                l_progressPercent = 100;
                            } else {
                                l_progressPercent = (S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 1)));
                                l_progressPercent = (l_progressPercent * 100);
                            }
                            c.push('\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
                            c.push(Surface.valOut(S.Modifier.toint(l_progressPercent)));
                            c.push('%">&nbsp;</div>\n </div>\n');
                        }
                        c.push(' <p class="profilestats-item-name');
                        if (!(l_isTaken)) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('">\n ');
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "gadgets"), l_item.imageName), "label")));
                        c.push("\n </p>\n </div>\n");
                    }
                }
                c.push('\n <div style="clear: both;position: relative;width:100%;"></div>\n');
                l_for_profile_bfbc2weapons_330_18_list = S.Modifier.get(o.specializationStats, l_kitId);
                l_for_profile_bfbc2weapons_330_18_iteration = 0;
                if ((S.Modifier.count(l_for_profile_bfbc2weapons_330_18_list) > 0)) {
                    for (var l_for_profile_bfbc2weapons_330_18_key in l_for_profile_bfbc2weapons_330_18_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_bfbc2weapons_330_18_list[l_for_profile_bfbc2weapons_330_18_key])) {
                            continue;
                        }
                        var l_item = l_for_profile_bfbc2weapons_330_18_list[l_for_profile_bfbc2weapons_330_18_key];
                        l_for_profile_bfbc2weapons_330_18_iteration = (l_for_profile_bfbc2weapons_330_18_iteration + 1);
                        if ((Surface.modulo((l_for_profile_bfbc2weapons_330_18_iteration - 1), 5) == 0)) {
                            c.push(' <div style="clear: both;position: relative;width:100%;"></div>\n');
                        }
                        l_itemName = l_item.imageName;
                        l_imgName = l_itemName;
                        c.push('\n <div class="profilestats-item">\n');
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null)) {
                            if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.currentPersona) != "undefined" && l_session.currentPersona !== null)) && (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : false) == o.user.userId)) && (l_session.currentPersona.personaId == o.statsPersona.personaId))) {
                                if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : true))) {
                                    c.push(" ");
                                    c.push(Surface.importTemplate(("profile" + ("." + "mytargetbutton")), {"statName": l_item.statName,"taken": S.Modifier.contains(o.myTargets, l_item.statName)}, null, kwargs));
                                    c.push("\n");
                                }
                            }
                        }
                        c.push('\n <img class="profilestats-item-image');
                        if (!(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false))) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('" ');
                        c.push(Surface.valOut($S.callFunction("common.getWidthAndHeightForStatsImage", "specializations", "small", b, kwargs)));
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/", "specializations"), "/small/"), l_imgName), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n');
                        if ((S.Modifier.toint(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 0)) > S.Modifier.toint(S.Modifier.get(o.kitScores, l_kitId)))) {
                            c.push(' <div class="profilestats-progress-container">\n');
                            if (((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.isTaken) != "undefined" && l_item.isTaken !== null) ? l_item.isTaken : false)) {
                                l_progressPercent = 100;
                            } else {
                                l_progressPercent = (S.Modifier.tofloat(S.Modifier.get(o.kitScores, l_kitId)) / S.Modifier.tofloat(((typeof (l_item) != "undefined" && l_item !== null && typeof (l_item.pointsNeeded) != "undefined" && l_item.pointsNeeded !== null) ? l_item.pointsNeeded : 1)));
                                l_progressPercent = (l_progressPercent * 100);
                            }
                            c.push(' <div class="profilestats-progress" style="width:');
                            c.push(Surface.valOut(S.Modifier.toint(l_progressPercent)));
                            c.push('%">&nbsp;</div>\n </div>\n');
                        }
                        c.push('\n <p class="profilestats-item-name');
                        if (!(l_isTaken)) {
                            c.push(" profilestats-item-nottaken");
                        }
                        c.push('">\n ');
                        c.push(Surface.valOut(S.Modifier.get(S.Modifier.get(S.Modifier.get(o.gadgetsLocale, "specializations"), l_item.imageName), "label")));
                        c.push("\n </p>\n </div>\n");
                    }
                }
                c.push("\n </div>\n </div>\n");
            }
        }
    }
    c.push("</div>");
    return c.join("");
};
var block_profile_bfbc2weapons_use_14_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.bfbc2weapons._use_14_6_block_content","extraClassInner": "profile.bfbc2weapons._use_14_6_block_extraClassInner","titleType": "profile.bfbc2weapons._use_14_6_block_titleType","titleContainer": "profile.bfbc2weapons._use_14_6_block_titleContainer"});
profile.bfbc2weapons._use_14_6_block_titleType = new Surface.Block("profile.bfbc2weapons._use_14_6_block_titleType");
profile.bfbc2weapons._use_14_6_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("inverted");
    return c.join("");
};
profile.bfbc2weapons._use_14_6_block_extraClassInner = new Surface.Block("profile.bfbc2weapons._use_14_6_block_extraClassInner");
profile.bfbc2weapons._use_14_6_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2weapons._use_14_6_block_titleContainer = new Surface.Block("profile.bfbc2weapons._use_14_6_block_titleContainer");
profile.bfbc2weapons._use_14_6_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.bfbc2weapons._use_14_6_block_content = new Surface.Block("profile.bfbc2weapons._use_14_6_block_content");
profile.bfbc2weapons._use_14_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" <table>\n <tr>\n <td>\n <h3>Weapons</h3>\n <p>");
    c.push(Surface.valOut(o.personaWeaponStats.weapons.numTaken));
    c.push(" / ");
    c.push(Surface.valOut(o.personaWeaponStats.weapons.totalAvailable));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
    c.push(Surface.valOut(((S.Modifier.tofloat(o.personaWeaponStats.weapons.numTaken) / S.Modifier.tofloat(o.personaWeaponStats.weapons.totalAvailable)) * 100)));
    c.push('%;"></div>\n </div>\n </td>\n <td>\n <h3>');
    c.push(Surface.valOut("Gadgets & Specializations"));
    c.push("</h3>\n <p>");
    c.push(Surface.valOut(o.personaWeaponStats.gadgets.numTaken));
    c.push(" / ");
    c.push(Surface.valOut(o.personaWeaponStats.gadgets.totalAvailable));
    c.push('</p>\n <div class="profilestats-progress-container">\n <div class="profilestats-progress" style="width:');
    c.push(Surface.valOut(((S.Modifier.tofloat(o.personaWeaponStats.gadgets.numTaken) / S.Modifier.tofloat(o.personaWeaponStats.gadgets.totalAvailable)) * S.Modifier.ceil(100))));
    c.push('%;"></div>\n </div>\n </td>\n </tr>\n </table>\n');
    return c.join("");
};
var block_profile_createdogtag = new Surface.BlockConfig("base.ajaxindex", {"titleItem": "profile.createdogtag.block_titleItem","mainContent": "profile.createdogtag.block_mainContent"});
profile.addTemplate(new Surface.Template("createdogtag"));
profile.createdogtag.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_createdogtag;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.createdogtag");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
profile.createdogtag.block_titleItem = new Surface.Block("profile.createdogtag.block_titleItem");
profile.createdogtag.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Edit Dog tag"));
    c.push(" - ");
    return c.join("");
};
profile.createdogtag.block_mainContent = new Surface.Block("profile.createdogtag.block_mainContent");
profile.createdogtag.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n <div class="dogtags-edit-header">\n <h1 class="wfont">');
    c.push(Surface.valOut("Edit Dog Tags"));
    c.push('</h1>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.persona, o.game, o.persona.namespace, b, kwargs))));
    c.push('" class="dogtags-edit-header-info">');
    c.push(Surface.valOut("Back to Statistics"));
    c.push('</a> &bull;\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/profile/edit/", Surface.urlContext)));
    c.push('" class="dogtags-edit-header-info">');
    c.push(Surface.valOut("Back to Settings"));
    c.push('</a>\n </div>\n <div id="dogtag-create-fetch-url" data-url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/createdogtagBodyFetch/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.game, b, kwargs),"personaId": o.personaId})));
    c.push('">\n <div class="loading">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading50x50.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut("Loading..."));
    c.push('" />\n </div>\n </div>\n </div>\n');
    return c.join("");
};
var block_profile_createdogtagfetch = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("createdogtagfetch"));
profile.createdogtagfetch.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_createdogtagfetch;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.createdogtagfetch");
    var l_for_profile_createdogtagfetch_22_10_list;
    var l_dogTagOrder;
    var l_dogTagSide;
    var l_statSID;
    var l_dtIndex;
    var l_imageType;
    var l_localeKey;
    var l_sid;
    var l_for_profile_createdogtagfetch_49_30_list;
    c.push('\n <div id="createdogtag" class="base-middle-content">\n <div id="dogtag-set" class="base-box-push">\n <div class="base-box-push-inner">\n <div id="dogtag1-render"></div>\n <div id="dogtag2-render"></div>\n <form method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/savedogtag/", Surface.urlContext, {"_section": $S.callFunction("base.section", o.game, b, kwargs)})));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="hidden" name="personaId" value="');
    c.push(Surface.valOut(o.personaId));
    c.push('" />\n <input type="hidden" id="profile-dogtags-form-tag" name="tag" value="');
    c.push(Surface.valOut(o.personaClanTag));
    c.push('" />\n <input type="hidden" id="profile-dogtags-form-persona" name="persona" value="');
    c.push(Surface.valOut(o.personaName));
    c.push('" />\n <input type="hidden" id="profile-dogtags-form-basic" name="basic" value="');
    c.push(Surface.valOut(S.Modifier.get(o.selected, "basic")));
    c.push('" />\n <input type="hidden" id="profile-dogtags-form-advanced" name="advanced" value="');
    c.push(Surface.valOut(S.Modifier.get(o.selected, "advanced")));
    c.push('" />\n <input type="submit" value="');
    c.push(Surface.valOut("Save dog tags"));
    c.push('" onclick=\'window.scrollTo(0,0);\' class="base-button-arrow-large" />\n </form>\n </div>\n </div>\n');
    l_for_profile_createdogtagfetch_22_10_list = ["basic", "advanced"];
    if ((S.Modifier.count(l_for_profile_createdogtagfetch_22_10_list) > 0)) {
        for (var l_for_profile_createdogtagfetch_22_10_key in l_for_profile_createdogtagfetch_22_10_list) {
            if (!Surface.isValidLoopItem(l_for_profile_createdogtagfetch_22_10_list[l_for_profile_createdogtagfetch_22_10_key])) {
                continue;
            }
            var l_dogTagType = l_for_profile_createdogtagfetch_22_10_list[l_for_profile_createdogtagfetch_22_10_key];
            if ((l_dogTagType == "basic")) {
                l_dogTagOrder = "first";
                l_dogTagSide = "1";
            } else {
                l_dogTagOrder = "second";
                l_dogTagSide = "2";
            }
            c.push(' <div id="');
            c.push(Surface.valOut(l_dogTagOrder));
            c.push('-dogtag" class="common-box-tab">\n');
            if ((l_dogTagType == "basic")) {
                c.push(" <h3>");
                c.push(Surface.valOut("Basic Dog Tag"));
                c.push("</h3>\n");
            } else {
                c.push(" <h3>");
                c.push(Surface.valOut("Advanced Dog Tag"));
                c.push("</h3>\n");
            }
            c.push(' <ul class="common-box-tab-nav">\n <li class="all selected bubble-title" title="');
            c.push(Surface.valOut("ALL"));
            c.push('"><div class="common-box-tab-1" data-dt-category="">');
            c.push(Surface.valOut("ALL"));
            c.push('</div></li>\n <li class="weapons bubble-title" title="');
            c.push(Surface.valOut("weapons"));
            c.push('"><div class="common-box-tab-2" data-dt-category="DTC_Weapons"><p>');
            c.push(Surface.valOut("weapons"));
            c.push('</p></div></li>\n <li class="ranks bubble-title" title="');
            c.push(Surface.valOut("Ranks"));
            c.push('"><div class="common-box-tab-3" data-dt-category="DTC_Ranks"><p>');
            c.push(Surface.valOut("Ranks"));
            c.push('</p></div></li>\n <li class="ribbons bubble-title" title="');
            c.push(Surface.valOut("Ribbons"));
            c.push('"><div class="common-box-tab-4" data-dt-category="DTC_Ribbons"><p>');
            c.push(Surface.valOut("Ribbons"));
            c.push('</p></div></li>\n <li class="stars bubble-title" title="');
            c.push(Surface.valOut("Stars"));
            c.push('"><div class="common-box-tab-5" data-dt-category="DTC_ServiceStars"><p>');
            c.push(Surface.valOut("Stars"));
            c.push('</p></div></li>\n <li class="misc bubble-title" title="');
            c.push(Surface.valOut("Misc"));
            c.push('"><div class="common-box-tab-6" data-dt-category="DTC_Misc"><p>');
            c.push(Surface.valOut("Misc"));
            c.push('</p></div></li>\n </ul>\n <div class="common-box-tab-container">\n <div class="common-box-tab-content common-box-tab-1">\n <ul class="profile-dogtags-dogtagslist">\n');
            l_for_profile_createdogtagfetch_49_30_list = S.Modifier.get(o.dogtags, l_dogTagType);
            if ((S.Modifier.count(l_for_profile_createdogtagfetch_49_30_list) > 0)) {
                for (var l_dtIndexString in l_for_profile_createdogtagfetch_49_30_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_createdogtagfetch_49_30_list[l_dtIndexString])) {
                        continue;
                    }
                    var l_dogtag = l_for_profile_createdogtagfetch_49_30_list[l_dtIndexString];
                    l_dtIndex = S.Modifier.get(l_dogtag, "index");
                    l_sid = S.Modifier.get(l_dogtag, "nameSID");
                    l_localeKey = l_sid;
                    c.push("\n");
                    if (S.Modifier.contains(S.Modifier.get(o.unlockedDogtags, l_dogTagType), l_dtIndex)) {
                        l_imageType = "lb";
                        if ((l_dogTagType == "advanced")) {
                            l_imageType = "la";
                        }
                        c.push(' <li\n class="profile-dogtags-dogtag profile-dogtags-category-');
                        c.push(Surface.valOut(S.Modifier.get(l_dogtag, "category")));
                        if ((S.Modifier.get(o.selected, l_dogTagType) == l_dtIndex)) {
                            c.push(" selected");
                        }
                        if (l_localeKey) {
                            c.push(" bubble-title");
                        }
                        c.push('"\n id="');
                        c.push(Surface.valOut(l_sid));
                        c.push('"\n ');
                        if ((S.Modifier.count(l_localeKey) > 0)) {
                            c.push('title="');
                            c.push(Surface.valOut((S.translations[l_localeKey] || l_localeKey)));
                            c.push('"');
                        }
                        c.push('\n data-side="');
                        c.push(Surface.valOut(l_dogTagSide));
                        c.push('"\n data-index="');
                        c.push(Surface.valOut(S.Modifier.get(l_dogtag, "index")));
                        c.push('"\n data-image="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/", l_imageType), "/"), S.Modifier.get(l_dogtag, "image")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('"\n');
                        if (((l_dogTagType == "advanced") && S.Modifier.get(o.dogTagStatValues, l_dtIndex, false))) {
                            l_statSID = S.Modifier.get(l_dogtag, "statSID");
                            c.push(' data-statvalue="');
                            c.push(Surface.valOut(S.Modifier.get(o.dogTagStatValues, l_dtIndex, 0)));
                            c.push('"\n data-statunit="');
                            c.push(Surface.valOut((S.translations[l_statSID] || l_statSID)));
                            c.push('"\n');
                        }
                        c.push(' >\n <img src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/s/", S.Modifier.get(l_dogtag, "image")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" />\n </li>\n');
                    }
                }
            }
            c.push(" </ul>\n </div>\n </div>\n </div>\n");
        }
    }
    c.push('\n <div class="base-clear"></div>\n');
    return c.join("");
};
var block_profile_debug = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("debug"));
profile.debug.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_debug;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.debug");
    c.push("\n<h1>personas</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.personas)));
    c.push("</pre>\n<h1>otherPersonas</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.otherPersonas)));
    c.push("</pre>\n<h1>findPersonasByUserId (allPersonas)</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.allPersonas)));
    c.push("</pre>\n<h1>currentPersona</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.currentPersona)));
    c.push("</pre>\n<hr>\n<h1>personasInGames</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.personasInGames)));
    c.push("</pre>\n<hr>\n<h1>userinfo</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.userinfo)));
    c.push("</pre>\n<hr>\n<h1>games</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.games)));
    c.push("</pre>\n<hr>\n<h1>tmp</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.mytmp)));
    c.push("</pre>\n<hr>\n<h1>debugUser</h1>\n<pre>");
    c.push(Surface.valOut(S.Modifier.dump(o.debugUser)));
    c.push("</pre>\n<hr>\n");
    return c.join("");
};
var block_profile_dogtags = new Surface.BlockConfig("profile.base", {"profileHeader": "profile.dogtags.block_profileHeader","profileMainColumn": "profile.dogtags.block_profileMainColumn","titleItem": "profile.dogtags.block_titleItem"});
profile.addTemplate(new Surface.Template("dogtags"));
profile.dogtags.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_dogtags;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.dogtags");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.dogtags.block_titleItem = new Surface.Block("profile.dogtags.block_titleItem");
profile.dogtags.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Dog tags"));
    c.push(" - ");
    return c.join("");
};
profile.dogtags.block_profileHeader = new Surface.Block("profile.dogtags.block_profileHeader");
profile.dogtags.block_profileHeader.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Dog tags"));
    return c.join("");
};
profile.dogtags.block_profileMainColumn = new Surface.Block("profile.dogtags.block_profileMainColumn");
profile.dogtags.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-dogtags">\n <p>Dog Tags be here</p>\n </div>\n');
    return c.join("");
};
var block_profile_dogtagsinfo = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("dogtagsinfo"));
profile.dogtagsinfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_dogtagsinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.dogtagsinfo");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
profile.function_getDogtags1 = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_dogtags;
    l_dogtags = [{"id": "dtb_870 mcs.png","desc": "WEBHALLEN: Pre-order Battlefield 3 on Webhallen","category": "weapon"}, {"id": "dtb_a91.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_aa.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_acr.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_aek-971.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ak74m.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_aks-47u.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_an94 akaban.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_at mines.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_attack_heli.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_c4.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_class_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_claymore.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_dao12.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_f2000.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_fgm-148_javelin.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_fim92_stinger.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_g3.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_g36c.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_glock17.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_glock18.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_grach silenced.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_grach_m9443.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ifv.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_jet.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_kh2002.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_laser_rangefinder.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m1014.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m16a4.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m240_lmg.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m249saw.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m26mass.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m27_lmg.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m320.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m39.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m40a5.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m416.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m45.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m4a1.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m60e4.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m9.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m93r.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_m9_silenced.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_magpul.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_mbt.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_mk11.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_mk153_smaw.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_model_98b.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_mortar.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_mp7.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_muav.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_p90_tr.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_pecheneg.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_pp2000.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_008.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_009.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_010.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_011.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_012.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_013.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_014.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_015.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_016.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_017.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_018.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_019.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_020.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_021.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_022.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_023.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_024.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_025.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_026.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_027.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_028.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_029.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_030.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_031.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_032.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_033.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_034.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_035.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_036.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_037.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_038.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_039.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_040.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_041.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_042.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_043.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_044.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ranks_045.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_rex.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_008.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_009.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_010.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_011.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_012.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_013.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_014.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_015.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_016.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_017.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_018.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_019.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_020.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_021.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_022.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_023.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_024.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_025.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_026.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_027.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_028.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_029.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_030.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_031.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_032.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_033.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_034.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_035.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_036.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_037.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_038.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_039.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ribbons_040.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_rpg7.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_rpk74m.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_sa18_igla_aa.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_saiga20k.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_scar-h.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_scout_heli.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_sg553.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_sks.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_sv98.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_svd_dragunov.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_taurus.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_type88lmg.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_ump-45.png","desc": "A dog tag","category": "weapon"}, {"id": "dtb_usas12.png","desc": "A dog tag","category": "weapon"}];
    return l_dogtags;
};
profile.function_getDogtags2 = function(b, kwargs) {
    var o = {};
    var c = [];
    var l_dogtags;
    l_dogtags = [{"id": "dta_A91.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_AA.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ACR.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_aek971.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ak-74m.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_aks74u.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_an94_AKABAN.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_attack_heli.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_at_mines.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games004.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games005.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games006.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_bf_games007.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_c4.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_claymore.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_crosspromo_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_crosspromo_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_crosspromo_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_dao12.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_dice.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_dta_870mcs.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_f2000.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_fgm-148_javelin.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_fim-20_stinger.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_g3.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_g36c.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_glock17.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_glock18.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_grach.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_grach_silenced.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ifv.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_jet.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_kh2000.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_laser_range_fighter.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m1014.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m16a4.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m240.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m249.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m26mass.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m27lmg.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_M320.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m39_mbr.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m40.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m416.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m45.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m4a1.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m60e4.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m9.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m93R.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_m9_silenced.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_magpul.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_mbt.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_008.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_009.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_010.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_011.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_012.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_013.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_014.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_015.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_016.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_017.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_018.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_019.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_020.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_021.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_022.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_023.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_024.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_025.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_026.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_027.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_028.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_029.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_030.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_031.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_032.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_033.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_034.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_035.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_036.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_037.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_038.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_039.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_040.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_041.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_042.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_043.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_044.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_045.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_046.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_047.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_048.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_049.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_medals_050.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_mk11.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_mk153_smaw.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_model98b.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_mortar.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_mp7.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_muav.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_p90tr.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_pecheneg.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_pp2000.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_008.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_009.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_010.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_011.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_012.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_013.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_014.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_015.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_016.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_017.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_018.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_019.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_020.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_021.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_022.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_023.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_preorder_024.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ranks_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_REX.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_rpg7.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_rpk-74m.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_sa18_igla_aa.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_saiga20k.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_scar-h.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_scout_heli.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_004.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_005.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_006.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_007.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_008.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_009.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_010.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_011.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_012.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_013.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_014.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_015.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_016.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_017.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_018.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_019.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_020.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_021.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_022.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_023.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_024.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_025.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_026.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_027.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_028.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_029.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_030.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_031.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_032.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_033.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_034.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_035.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_036.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_037.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_038.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_039.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_040.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_041.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_042.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_043.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_044.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_045.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_046.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_047.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_048.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_049.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_050.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_051.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_052.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_053.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_054.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_055.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_056.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_057.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_058.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_059.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_060.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_061.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_062.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_063.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_064.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_service_stars_065.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_sg553.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_sks.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_sv98.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_svd_dragunov.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_taurus.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_tournament_001.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_tournament_002.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_tournament_003.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_typ88_lmg.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_ump45.png","desc": "A dog tag","category": "weapon"}, {"id": "dta_usas12.png","desc": "A dog tag","category": "weapon"}];
    return l_dogtags;
};
var block_profile_edit = new Surface.BlockConfig("profile.base", {"profileMainColumn": "profile.edit.block_profileMainColumn","titleItem": "profile.edit.block_titleItem"});
profile.addTemplate(new Surface.Template("edit"));
profile.edit.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_edit;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.edit");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
var block_profile_edit_use_7_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.edit._use_7_6_block_content","title": "profile.edit._use_7_6_block_title","extraClass": "profile.edit._use_7_6_block_extraClass"});
profile.edit.block_titleItem = new Surface.Block("profile.edit.block_titleItem");
profile.edit.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Edit profile - ");
    return c.join("");
};
profile.edit._use_7_6_block_title = new Surface.Block("profile.edit._use_7_6_block_title");
profile.edit._use_7_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Edit profile");
    return c.join("");
};
profile.edit._use_7_6_block_extraClass = new Surface.Block("profile.edit._use_7_6_block_extraClass");
profile.edit._use_7_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-edit");
    return c.join("");
};
profile.edit._use_7_6_block_content = new Surface.Block("profile.edit._use_7_6_block_content");
profile.edit._use_7_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_profile_edit_18_18_list;
    var l_for_profile_edit_171_30_list;
    var l_for_profile_edit_63_30_list;
    var l_for_profile_edit_19_22_list;
    var l_soundFxValue;
    var l_dob;
    var l_ampm;
    var l_soldierNamespace;
    var l_soundFxMap;
    var l_for_profile_edit_64_34_list;
    var l_soldierGame;
    var l_for_profile_edit_227_34_list;
    var l_for_profile_edit_193_34_list;
    var l_for_profile_edit_156_30_list;
    var l_for_profile_edit_150_30_list;
    var l_for_profile_edit_207_34_list;
    c.push('\n <form id="soldier-getStats" method="POST" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/getStats/", Surface.urlContext)));
    c.push('">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push("\n");
    l_for_profile_edit_18_18_list = o.editPersonas;
    if ((S.Modifier.count(l_for_profile_edit_18_18_list) > 0)) {
        for (var l_key in l_for_profile_edit_18_18_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_18_18_list[l_key])) {
                continue;
            }
            var l_personalist = l_for_profile_edit_18_18_list[l_key];
            l_for_profile_edit_19_22_list = l_personalist;
            if ((S.Modifier.count(l_for_profile_edit_19_22_list) > 0)) {
                for (var l_for_profile_edit_19_22_key in l_for_profile_edit_19_22_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_edit_19_22_list[l_for_profile_edit_19_22_key])) {
                        continue;
                    }
                    var l_p = l_for_profile_edit_19_22_list[l_for_profile_edit_19_22_key];
                    c.push(' <input type="hidden" name="personaIds[]" value="');
                    c.push(Surface.valOut(l_p.personaId));
                    c.push('" />\n');
                }
            }
        }
    }
    c.push(' </form>\n <form id="profile-edit-full-form" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/profile/update/", Surface.urlContext)));
    c.push('" method="post">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <fieldset>\n <div class="profile-edit-row profile-edit-gravatar-info">\n <div class="label">\n <div class="profile-edit-row-gravatar-icon"></div>\n </div>\n <div>\n <h3>Gravatar</h3>\n <p>');
    c.push(Surface.valOut("Avatars are provided by"));
    c.push(" Gravatar. ");
    c.push(Surface.valOut("To sign up for a free avatar, please"));
    c.push(' <a href="http://www.gravatar.com" target="_blank">');
    c.push(Surface.valOut("visit Gravatar"));
    c.push("</a> ");
    c.push(Surface.valOut("now."));
    c.push('</p>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-row-gravatar">\n <div class="label">\n <label for="profile-edit-gravatar">');
    c.push(Surface.valOut("Gravatar email"));
    c.push('</label>\n </div>\n <div>\n <input type="text" name="profile-edit-gravatar" id="profile-edit-gravatar" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.gravatarEmail) != "undefined" && o.gravatarEmail !== null) ? o.gravatarEmail : "")));
    c.push('" />\n <div class="profile-edit-gravatar-container">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.profileCommon.user,"gravatarSize": 52}, null, kwargs));
    c.push('\n </div>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <!-- persona tags -->\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.editPersonas) != "undefined" && o.editPersonas !== null)) {
        c.push(' <div class="profile-edit-row" id="profile-edit-row-clantag">\n <div class="label">\n <label>');
        c.push(Surface.valOut("Soldier settings"));
        c.push("</label>\n </div>\n <div>\n <p>");
        c.push(Surface.valOut("Edit soldier image and clan tag"));
        c.push(":</p>\n");
        l_for_profile_edit_63_30_list = o.editPersonas;
        if ((S.Modifier.count(l_for_profile_edit_63_30_list) > 0)) {
            c.push(' <ul class="profile-personas-playing-game">\n');
            for (var l_key in l_for_profile_edit_63_30_list) {
                if (!Surface.isValidLoopItem(l_for_profile_edit_63_30_list[l_key])) {
                    continue;
                }
                var l_personalist = l_for_profile_edit_63_30_list[l_key];
                l_for_profile_edit_64_34_list = l_personalist;
                if ((S.Modifier.count(l_for_profile_edit_64_34_list) > 0)) {
                    for (var l_for_profile_edit_64_34_key in l_for_profile_edit_64_34_list) {
                        if (!Surface.isValidLoopItem(l_for_profile_edit_64_34_list[l_for_profile_edit_64_34_key])) {
                            continue;
                        }
                        var l_p = l_for_profile_edit_64_34_list[l_for_profile_edit_64_34_key];
                        l_soldierGame = l_key;
                        l_soldierNamespace = l_p.namespace;
                        c.push("\n");
                        if ((l_soldierGame == 0)) {
                            if ((l_soldierNamespace == Surface.globalContext.staticContext.nucleusNamespaces.BATTLEFIELD)) {
                                l_soldierGame = Surface.globalContext.staticContext.games.BFBC2;
                            } else {
                                if ((l_soldierNamespace == Surface.globalContext.staticContext.nucleusNamespaces.CEM_EA_ID)) {
                                    l_soldierGame = Surface.globalContext.staticContext.games.BF3;
                                }
                            }
                        }
                        c.push('\n <li id="soldier-');
                        c.push(Surface.valOut(l_p.personaId));
                        c.push('">\n <input type="hidden" value="');
                        c.push(Surface.valOut(l_p.personaId));
                        c.push('" name="profile-edit-personaId[]" />\n <div class="profile-edit-picture">\n <div class="profile-solder-picture">\n ');
                        c.push(Surface.importTemplate(("profile" + ("." + "showsoldierpic")), {"picture": l_p.picture,"size": "small"}, null, kwargs));
                        c.push('\n </div>\n <span class="profile-edit-picture-icon"></span>\n <input type="hidden" value="');
                        c.push(Surface.valOut(((typeof (l_p) != "undefined" && l_p !== null && typeof (l_p.picture) != "undefined" && l_p.picture !== null) ? l_p.picture : "bf3-us-assault")));
                        c.push('" name="profile-edit-picture[]" class="soldier-picture-input" />\n </div>\n <div class="profile-edit-clantag-input-container">\n <input maxlength="4" type="text" value="');
                        c.push(Surface.valOut(((typeof (l_p) != "undefined" && l_p !== null && typeof (l_p.clanTag) != "undefined" && l_p.clanTag !== null) ? l_p.clanTag : "")));
                        c.push('" name="profile-edit-clantag[]" />\n <input type="hidden" value="');
                        c.push(Surface.valOut(l_soldierGame));
                        c.push('" name="profile-edit-clantag-games[]" />\n </div>\n <div class="profile-tag-soldier-name">\n <div class="profile-soldier-game">\n');
                        if (((typeof (o) != "undefined" && o !== null && typeof (o.active) != "undefined" && o.active !== null) ? o.active : false)) {
                            c.push(' <span class="');
                            c.push(Surface.valOut($S.callFunction("common.getGameIconCSSBright", l_soldierGame, l_soldierNamespace, 0, b, kwargs)));
                            c.push('"></span>\n');
                        } else {
                            c.push(' <span class="');
                            c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", l_soldierGame, l_soldierNamespace, 0, b, kwargs)));
                            c.push('"></span>\n');
                        }
                        c.push(" </div>\n ");
                        c.push(Surface.valOut(S.Modifier.get(l_p, "personaName")));
                        c.push('\n </div>\n <a href="');
                        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/createdogtag/{personaId}/", Surface.urlContext, {"_section": $S.callFunction("base.section", l_soldierGame, b, kwargs),"personaId": l_p.personaId})));
                        c.push('" class="soldier-dogtags">\n <img class="dogtag2" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/dogtags/la/t/defaulttag_right.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" />\n <img class="dogtag1" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/profile/bf3/stats/dogtags/lb/t/defaulttag_left.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" />\n <span class="profile-edit-picture-icon"></span>\n </a>\n </li>\n');
                    }
                }
            }
            c.push(" </ul>\n");
        }
        c.push(' </div>\n <div style="clear:both;float:none;"></div>\n </div>\n');
    }
    c.push('\n <!-- persona tags -->\n <div class="profile-edit-row">\n <div class="label">\n <label for="profile-edit-name">');
    c.push(Surface.valOut("Name"));
    c.push('</label>\n </div>\n <div>\n <input type="text" maxlength="72" name="profile-edit-name" id="profile-edit-name" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.name) != "undefined" && o.profileCommon.userinfo.name !== null) ? o.profileCommon.userinfo.name : "")));
    c.push('" />\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-row-presentation">\n <div class="label">\n <label for="profile-edit-presentation">');
    c.push(Surface.valOut("Presentation"));
    c.push('</label>\n </div>\n <div>\n <textarea id="profile-edit-presentation" class="textlimit-count" name="profile-edit-presentation">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.presentation) != "undefined" && o.profileCommon.userinfo.presentation !== null) ? o.profileCommon.userinfo.presentation : "")));
    c.push('</textarea>\n <p class="textlimit-counter"></p>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row">\n <div class="label">\n <label for="profile-edit-birthyear">');
    c.push(Surface.valOut("Birthday"));
    c.push('</label>\n </div>\n <div>\n <select id="profile-edit-birthyear" name="profile-edit-birthyear">\n <option value="-">');
    c.push(Surface.valOut("Year"));
    c.push("</option>\n");
    l_for_profile_edit_150_30_list = S.Modifier.to(1920, 2010);
    if ((S.Modifier.count(l_for_profile_edit_150_30_list) > 0)) {
        for (var l_for_profile_edit_150_30_key in l_for_profile_edit_150_30_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_150_30_list[l_for_profile_edit_150_30_key])) {
                continue;
            }
            var l_i = l_for_profile_edit_150_30_list[l_for_profile_edit_150_30_key];
            c.push(' <option value="');
            c.push(Surface.valOut(l_i));
            c.push('" ');
            if ((S.Modifier.get(o.splitDOB, 0, "") == l_i)) {
                c.push("SELECTED");
            }
            c.push(" >");
            c.push(Surface.valOut(l_i));
            c.push("</option>\n");
        }
    }
    c.push(' </select>\n <select id="profile-edit-birthmonth" name="profile-edit-birthmonth">\n <option value="-">');
    c.push(Surface.valOut("Month"));
    c.push("</option>\n");
    l_for_profile_edit_156_30_list = S.Modifier.to(1, 12);
    if ((S.Modifier.count(l_for_profile_edit_156_30_list) > 0)) {
        for (var l_for_profile_edit_156_30_key in l_for_profile_edit_156_30_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_156_30_list[l_for_profile_edit_156_30_key])) {
                continue;
            }
            var l_i = l_for_profile_edit_156_30_list[l_for_profile_edit_156_30_key];
            if ((S.Modifier.count(o.splitDOB) > 0)) {
                l_dob = S.Modifier.get(o.splitDOB, 1, "01");
                if ((S.Modifier.get(l_dob, 0) == 0)) {
                    l_dob = S.Modifier.get(l_dob, 1, "");
                }
            } else {
                l_dob = false;
            }
            c.push(' <option value="');
            c.push(Surface.valOut(l_i));
            c.push('" ');
            if ((l_dob == l_i)) {
                c.push("SELECTED");
            }
            c.push(">");
            c.push(Surface.valOut(l_i));
            c.push("</option>\n");
        }
    }
    c.push(' </select>\n <select id="profile-edit-birthday" name="profile-edit-birthday">\n <option value="-">');
    c.push(Surface.valOut("Day"));
    c.push("</option>\n");
    l_for_profile_edit_171_30_list = S.Modifier.to(1, 31);
    if ((S.Modifier.count(l_for_profile_edit_171_30_list) > 0)) {
        for (var l_for_profile_edit_171_30_key in l_for_profile_edit_171_30_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_171_30_list[l_for_profile_edit_171_30_key])) {
                continue;
            }
            var l_i = l_for_profile_edit_171_30_list[l_for_profile_edit_171_30_key];
            if ((S.Modifier.count(o.splitDOB) > 0)) {
                l_dob = S.Modifier.get(o.splitDOB, 2, "01");
                if ((S.Modifier.get(l_dob, 0) == 0)) {
                    l_dob = S.Modifier.get(l_dob, 1, "");
                }
            } else {
                l_dob = false;
            }
            c.push(' <option value="');
            c.push(Surface.valOut(l_i));
            c.push('" ');
            if ((l_dob == l_i)) {
                c.push("SELECTED");
            }
            c.push(" >");
            c.push(Surface.valOut(l_i));
            c.push("</option>\n");
        }
    }
    c.push(' </select>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-location-info" id="profile-edit-row-location">\n <div class="label">\n <label for="profile-edit-location">');
    c.push(Surface.valOut("From"));
    c.push('</label>\n </div>\n <div>\n <select id="profile-edit-location" name="profile-edit-location">\n <option value="" ');
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.location) != "undefined" && o.profileCommon.userinfo.location !== null) ? o.profileCommon.userinfo.location : false))) {
        c.push("SELECTED");
    }
    c.push(">");
    c.push(Surface.valOut("Select your location"));
    c.push("</option>\n");
    l_for_profile_edit_193_34_list = S.Modifier.countrycodes("");
    if ((S.Modifier.count(l_for_profile_edit_193_34_list) > 0)) {
        for (var l_for_profile_edit_193_34_key in l_for_profile_edit_193_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_193_34_list[l_for_profile_edit_193_34_key])) {
                continue;
            }
            var l_country = l_for_profile_edit_193_34_list[l_for_profile_edit_193_34_key];
            c.push(' <option value="');
            c.push(Surface.valOut(l_country.code));
            c.push('" ');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.location) != "undefined" && o.profileCommon.userinfo.location !== null) ? o.profileCommon.userinfo.location : "") == l_country.code)) {
                c.push("SELECTED");
            }
            c.push(">");
            c.push(Surface.valOut(l_country.name));
            c.push("</option>\n");
        }
    }
    c.push(' </select>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-location-info" id="profile-edit-row-location">\n <div class="label">\n <label for="profile-edit-location">');
    c.push(Surface.valOut("Date/time format"));
    c.push('</label>\n </div>\n <div>\n <select name="profile-edit-dateformat">\n');
    l_for_profile_edit_207_34_list = o.localeMap;
    if ((S.Modifier.count(l_for_profile_edit_207_34_list) > 0)) {
        for (var l_key in l_for_profile_edit_207_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_207_34_list[l_key])) {
                continue;
            }
            var l_val = l_for_profile_edit_207_34_list[l_key];
            c.push(' <option value="');
            c.push(Surface.valOut(l_key));
            c.push('" ');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.userLocale) != "undefined" && o.userLocale !== null && typeof (o.userLocale.dateFormat) != "undefined" && o.userLocale.dateFormat !== null) ? o.userLocale.dateFormat : "iso") == l_key)) {
                c.push("SELECTED");
            }
            c.push(">");
            c.push(Surface.valOut(S.Modifier.offsetdateformat(o.todayTimestamp, l_val, 0)));
            c.push("</option>\n");
        }
    }
    c.push(' </select>\n <select name="profile-edit-ampm">\n');
    l_ampm = ((typeof (o) != "undefined" && o !== null && typeof (o.userLocale) != "undefined" && o.userLocale !== null && typeof (o.userLocale.useAMPM) != "undefined" && o.userLocale.useAMPM !== null) ? o.userLocale.useAMPM : false);
    c.push(' <option value="24" ');
    if (!(l_ampm)) {
        c.push("SELECTED");
    }
    c.push(">");
    c.push(Surface.valOut("24 hour clock"));
    c.push('</option>\n <option value="12" ');
    if (l_ampm) {
        c.push("SELECTED");
    }
    c.push(">");
    c.push(Surface.valOut("12 hour clock (AM/PM)"));
    c.push('</option>\n </select>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row profile-edit-location-info" id="profile-edit-row-location">\n <div class="label">\n <label for="profile-edit-location">');
    c.push(Surface.valOut("Your local time"));
    c.push('</label>\n </div>\n <div>\n <select name="profile-edit-utcoffset">\n');
    l_for_profile_edit_227_34_list = o.utcOffsets;
    if ((S.Modifier.count(l_for_profile_edit_227_34_list) > 0)) {
        for (var l_for_profile_edit_227_34_key in l_for_profile_edit_227_34_list) {
            if (!Surface.isValidLoopItem(l_for_profile_edit_227_34_list[l_for_profile_edit_227_34_key])) {
                continue;
            }
            var l_offset = l_for_profile_edit_227_34_list[l_for_profile_edit_227_34_key];
            c.push(' <option value="');
            c.push(Surface.valOut(l_offset));
            c.push('" ');
            if ((l_offset == ((typeof (o) != "undefined" && o !== null && typeof (o.userLocale) != "undefined" && o.userLocale !== null && typeof (o.userLocale.utcOffsetMinutes) != "undefined" && o.userLocale.utcOffsetMinutes !== null) ? o.userLocale.utcOffsetMinutes : 0))) {
                c.push("SELECTED");
            }
            c.push(">");
            c.push(Surface.valOut(S.Modifier.offsetdateformat(o.todayTimestamp, "%H:%M", l_offset)));
            c.push(" </option>\n");
        }
    }
    c.push(' </select>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row" id="profile-edit-row-privacy">\n <div class="label">\n <label for="profile-edit-hidedetails">');
    c.push(Surface.valOut("Privacy Settings"));
    c.push('</label>\n </div>\n <div>\n <div class="profile-edit-privacy-option"><input type="checkbox" ');
    if (o.profileCommon.userinfo.showDetails) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="profile-edit-hidedetails" id="profile-edit-hidedetails" value="True" /><label class="profile-edit-privacy-option-label" for="profile-edit-hidedetails">');
    c.push(Surface.valOut("Show personal info on profile (visible for everyone)"));
    c.push('</label></div>\n <div class="profile-edit-privacy-option"><input type="checkbox" ');
    if (o.profileCommon.userinfo.feedActive) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="profile-edit-inactivatefeed" id="profile-edit-inactivatefeed" value="True" /><label class="profile-edit-privacy-option-label" for="profile-edit-inactivatefeed">');
    c.push(Surface.valOut("Save game events and activity to Battle feed (visible for everyone)"));
    c.push('</label></div>\n <div class="profile-edit-privacy-option"><input type="checkbox" ');
    if (o.profileCommon.userinfo.allowFriendRequests) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="profile-edit-allowfriendrequests" id="profile-edit-allowfriendrequests" value="True" /><label class="profile-edit-privacy-option-label" for="profile-edit-allowfriendrequests">');
    c.push(Surface.valOut("Allow people to send me friend requests"));
    c.push('</label></div>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row" id="profile-edit-row-sound-notification">\n <div class="label">\n <label for="profile-edit-notify-chat">');
    c.push(Surface.valOut("Sound Notifications"));
    c.push("</label>\n </div>\n <div>\n");
    l_soundFxMap = $S.callFunction("base.soundFxMap", b, kwargs);
    l_soundFxValue = S.Modifier.get(l_soundFxMap, "CHAT_MESSAGE");
    c.push(' <div class="profile-edit-sound-notification-option"><input type="checkbox" ');
    if (S.Modifier.bitwiseand(o.mutedSounds, l_soundFxValue)) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="mutedSounds[]" id="profile-edit-notify-chat" value="');
    c.push(Surface.valOut(l_soundFxValue));
    c.push('" /><label class="profile-edit-sound-notification-option-label" for="profile-edit-notify-chat">');
    c.push(Surface.valOut("Mute new chat message notification"));
    c.push("</label></div>\n");
    l_soundFxValue = S.Modifier.get(l_soundFxMap, "NOTIFICATION");
    c.push(' <div class="profile-edit-sound-notification-option"><input type="checkbox" ');
    if (S.Modifier.bitwiseand(o.mutedSounds, l_soundFxValue)) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="mutedSounds[]" id="profile-edit-notify-notification" value="');
    c.push(Surface.valOut(l_soundFxValue));
    c.push('" /><label class="profile-edit-sound-notification-option-label" for="profile-edit-notify-notification">');
    c.push(Surface.valOut("Mute sound notification for new notification"));
    c.push("</label></div>\n");
    l_soundFxValue = S.Modifier.get(l_soundFxMap, "BATTLE_REPORT");
    c.push(' <div class="profile-edit-sound-notification-option"><input type="checkbox" ');
    if (S.Modifier.bitwiseand(o.mutedSounds, l_soundFxValue)) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="mutedSounds[]" id="profile-edit-notify-battlereport" value="');
    c.push(Surface.valOut(l_soundFxValue));
    c.push('" /><label class="profile-edit-sound-notification-option-label" for="profile-edit-notify-battlereport">');
    c.push(Surface.valOut("Mute new battle report notification"));
    c.push("</label></div>\n");
    l_soundFxValue = S.Modifier.get(l_soundFxMap, "FRIEND_REQUEST");
    c.push(' <div class="profile-edit-sound-notification-option"><input type="checkbox" ');
    if (S.Modifier.bitwiseand(o.mutedSounds, l_soundFxValue)) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="mutedSounds[]" id="profile-edit-notify-friendrequest" value="');
    c.push(Surface.valOut(l_soundFxValue));
    c.push('" /><label class="profile-edit-sound-notification-option-label" for="profile-edit-notify-friendrequest">');
    c.push(Surface.valOut("Mute new friend request notification"));
    c.push("</label></div>\n");
    l_soundFxValue = S.Modifier.get(l_soundFxMap, "GAME_READY");
    c.push(' <div class="profile-edit-sound-notification-option"><input type="checkbox" ');
    if (S.Modifier.bitwiseand(o.mutedSounds, l_soundFxValue)) {
        c.push('checked="yes"');
    }
    c.push(' class="profile-edit-checkbox" name="mutedSounds[]" id="profile-edit-notify-gameready" value="');
    c.push(Surface.valOut(l_soundFxValue));
    c.push('" /><label class="profile-edit-sound-notification-option-label" for="profile-edit-notify-gameready">');
    c.push(Surface.valOut("Mute sound notification when game is ready"));
    c.push('</label></div>\n </div>\n <div style="clear:both;float:none;"></div>\n </div>\n <div class="profile-edit-row" id="profile-edit-row-save">\n <input id="profile-edit-full-form-submit" type="submit" value="Save" class="base-button-arrow-small" />\n <img id="profile-edit-full-form-loader" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ajax-loader.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" width="16" height="16" style="display:none"/>\n </div>\n </fieldset>\n </form>\n');
    return c.join("");
};
profile.edit.block_profileMainColumn = new Surface.Block("profile.edit.block_profileMainColumn");
profile.edit.block_profileMainColumn.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<div id="profile-main-column">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_edit_use_7_6, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
var block_profile_feed = new Surface.BlockConfig("feed.base", {"feedContext": "profile.feed.block_feedContext"});
profile.addTemplate(new Surface.Template("feed"));
profile.feed.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_feed;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.feed");
    c.push("\n");
    return Surface.importTemplate("feed.base", o, b, kwargs);
};
profile.feed.block_feedContext = new Surface.Block("profile.feed.block_feedContext");
profile.feed.block_feedContext.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Profile");
    return c.join("");
};
var block_profile_friends = new Surface.BlockConfig("profile.base", {"profileActionUnique": "profile.friends.block_profileActionUnique","titleItem": "profile.friends.block_titleItem"});
profile.addTemplate(new Surface.Template("friends"));
profile.friends.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_friends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.friends");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
var block_profile_friends_use_155_9 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.friends._use_155_9_block_content","title": "profile.friends._use_155_9_block_title"});
var block_profile_friends_use_132_13 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.friends._use_132_13_block_content","title": "profile.friends._use_132_13_block_title","extraClassInner": "profile.friends._use_132_13_block_extraClassInner","extraClass": "profile.friends._use_132_13_block_extraClass"});
var block_profile_friends_use_68_13 = new Surface.BlockConfig("common.focusbar", {"content": "profile.friends._use_68_13_block_content","extraInnerClass": "profile.friends._use_68_13_block_extraInnerClass","extraClass": "profile.friends._use_68_13_block_extraClass"});
var block_profile_friends_use_12_13 = new Surface.BlockConfig("common.focusbar", {"content": "profile.friends._use_12_13_block_content","extraInnerClass": "profile.friends._use_12_13_block_extraInnerClass","extraClass": "profile.friends._use_12_13_block_extraClass"});
profile.friends.block_titleItem = new Surface.Block("profile.friends.block_titleItem");
profile.friends.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Friends"));
    c.push(" - ");
    return c.join("");
};
profile.friends.surface_9_9 = new Surface.SingleSurface("profile.friends.surface_9_9");
profile.friends._use_12_13_block_extraClass = new Surface.Block("profile.friends._use_12_13_block_extraClass");
profile.friends._use_12_13_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("friendslist-filter-width");
    return c.join("");
};
profile.friends._use_12_13_block_extraInnerClass = new Surface.Block("profile.friends._use_12_13_block_extraInnerClass");
profile.friends._use_12_13_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("friendslist-filter-inner");
    return c.join("");
};
profile.friends.surface_19_21 = new Surface.SingleSurface("profile.friends.surface_19_21");
profile.friends.surface_19_21.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_friends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.friends");
    c.push('<surf:container id="');
    c.push("oFriends");
    c.push('">');
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.originUsers) != "undefined" && o.originUsers !== null))) {
        c.push(' <div id="originLoad" url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/getfriends/{friendType}/", Surface.urlContext)));
        c.push('"></div>\n <div class="originAjaxLoader"><div class="common-spinner" data-size="big"></div></div>\n');
    } else {
        c.push(' <div class="invitefriends-overview-origin">\n <div class="invitefriends-image"><img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/origin.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"></div>\n <div class="invitefriends-overview-text">\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) && o.message)) {
            c.push(' <span class="invitefriends-overview-text-empty">');
            c.push(Surface.valOut(o.message));
            c.push("</span>\n");
        } else {
            c.push('\n <span class="invitefriends-overview-text-empty">\n');
            if (!(S.Modifier.count(o.originUsers))) {
                c.push("\n");
                c.push(Surface.valOut("You need some friends on Origin to be able to invite."));
                c.push("\n");
            } else {
                if (!(S.Modifier.count(o.originUsersOnSite))) {
                    c.push("\n");
                    if ((S.Modifier.count(o.originUsers) == 1)) {
                        c.push(" ");
                        c.push(Surface.valOut("Your friend on Origin has not registered on Battlelog."));
                        c.push("\n");
                    } else {
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.replacemulti("None of your [num] Origin friends have registered on Battlelog.", {"[num]": S.Modifier.concat(S.Modifier.count(o.originUsers), "")})));
                        c.push("\n");
                    }
                } else {
                    if ((S.Modifier.count(o.originUsers) > S.Modifier.count(o.originUsersOnSite))) {
                        c.push(" ");
                        c.push(Surface.valOut("You have friends on Origin that have not yet registered on Battlelog. Tell them to come here!"));
                        c.push("\n");
                    } else {
                        c.push(" ");
                        c.push(Surface.valOut("You are already friends with all of your Origin friends registered on Battlelog."));
                        c.push("\n");
                    }
                }
            }
            c.push(" </span>\n");
        }
        c.push(" </div>\n <div style='clear: both;'></div>\n </div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.friends", "surface_19_21", "oFriends", o, b);
    return c.join("");
};
profile.friends._use_12_13_block_content = new Surface.Block("profile.friends._use_12_13_block_content");
profile.friends._use_12_13_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="friendslist-main-import">\n <div class="friendslist-overview">');
    c.push(Surface.valOut("Import friends from Origin"));
    c.push("</div>\n");
    c.push(profile.friends.surface_19_21.render({"message": ((typeof (o) != "undefined" && o !== null && typeof (o.message) != "undefined" && o.message !== null) ? o.message : null),"originUsers": ((typeof (o) != "undefined" && o !== null && typeof (o.originUsers) != "undefined" && o.originUsers !== null) ? o.originUsers : null),"originUsersOnSite": ((typeof (o) != "undefined" && o !== null && typeof (o.originUsersOnSite) != "undefined" && o.originUsersOnSite !== null) ? o.originUsersOnSite : null)}, b, kwargs));
    c.push(" </div>\n");
    return c.join("");
};
profile.friends._use_68_13_block_extraClass = new Surface.Block("profile.friends._use_68_13_block_extraClass");
profile.friends._use_68_13_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("friendslist-filter-width");
    return c.join("");
};
profile.friends._use_68_13_block_extraInnerClass = new Surface.Block("profile.friends._use_68_13_block_extraInnerClass");
profile.friends._use_68_13_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("friendslist-filter-inner");
    return c.join("");
};
profile.friends.surface_73_21 = new Surface.SingleSurface("profile.friends.surface_73_21");
profile.friends.surface_73_21.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_friends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.friends");
    c.push('<surf:container id="');
    c.push("typeFriends");
    c.push('">');
    var l_for_profile_friends_98_37_list;
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.validFriendsToInvite) != "undefined" && o.validFriendsToInvite !== null))) {
        c.push(' <div id="originTypeLoad" url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/getfriends/{friendType}/", Surface.urlContext)));
        c.push('"></div>\n <div class="originAjaxLoader"><div class="common-spinner" data-size="big"></div></div>\n');
    } else {
        c.push(' <div id="friendslist-toggle">\n');
        if ((o.importType == "origin")) {
            c.push(' <img class="');
            c.push(Surface.valOut(o.importType));
            c.push('" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/origin-logo.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('">\n <span class="imagetext">');
            c.push(Surface.valOut("Select friends to import from Origin"));
            c.push("</span>\n");
        } else {
            if ((o.importType == "xboxlive")) {
                c.push(' <img class="');
                c.push(Surface.valOut(o.importType));
                c.push('" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/xboxlive.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('">\n <span class="imagetext">');
                c.push(Surface.valOut("Select friends to import from XBOX Live"));
                c.push("</span>\n");
            } else {
                if ((o.importType == "ps-network")) {
                    c.push(' <img class="');
                    c.push(Surface.valOut(o.importType));
                    c.push('"src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/psn.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('">\n <span class="imagetext">');
                    c.push(Surface.valOut("Select friends to import from Playstation Network"));
                    c.push("</span>\n");
                } else {
                    if ((o.importType == "facebook")) {
                        c.push(' <img class="');
                        c.push(Surface.valOut(o.importType));
                        c.push('"src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/fb.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('">\n <span class="imagetext">');
                        c.push(Surface.valOut("Select friends to import from Facebook"));
                        c.push("</span>\n");
                    }
                }
            }
        }
        c.push(' </div>\n <div class="friendslist-scrollframe">\n <div class="friendslist-scroller">\n <form id=friendRequestForm action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/friend/requestFriendships/", Surface.urlContext)));
        c.push('" method="POST">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push("\n");
        l_for_profile_friends_98_37_list = o.validFriendsToInvite;
        if ((S.Modifier.count(l_for_profile_friends_98_37_list) > 0)) {
            for (var l_for_profile_friends_98_37_key in l_for_profile_friends_98_37_list) {
                if (!Surface.isValidLoopItem(l_for_profile_friends_98_37_list[l_for_profile_friends_98_37_key])) {
                    continue;
                }
                var l_friend = l_for_profile_friends_98_37_list[l_for_profile_friends_98_37_key];
                c.push(' <input type=hidden name="importFrom" value="');
                c.push(Surface.valOut(o.importType));
                c.push('">\n <div class="friendslist-user">\n <input id=friendcheckbox');
                c.push(Surface.valOut(l_friend.userId));
                c.push(' name="userIds[]" value=');
                c.push(Surface.valOut(l_friend.userId));
                c.push(' type=checkbox>\n <label for="friendcheckbox');
                c.push(Surface.valOut(l_friend.userId));
                c.push('">\n <div class="friendslist-inneravatar">\n ');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend,"hideLink": 1,"gravatarSize": 30}, null, kwargs));
                c.push('\n </div>\n <div class="friendslist-username">');
                c.push(Surface.valOut(l_friend.username));
                c.push("</div>\n </label>\n </div>\n");
            }
        }
        c.push(" <div style='clear: both;'></div>\n </form>\n </div>\n </div>\n <div class=\"friendslist-lower-import\">\n <div class=\"friendslist-markall\"><input id=selectall type=checkbox onclick='profile.toggleSelectAllFrends()'><label for=selectall>");
        c.push(Surface.valOut("Select all"));
        c.push('</label></div>\n <div style=\'float: right;\' class="mayaddfriends yes">\n <div class="friendslist-submit nofriends"><span>');
        c.push(Surface.valOut("Your friend-limit is reached!"));
        c.push('</span> <button class="base-button-arrow-large disabled" onclick="$(\'#friendRequestForm\').submit();">Import selected</button></div>\n <div class="friendslist-submit friends"> <button class="base-button-arrow-large" onclick="$(\'#friendRequestForm\').submit();">');
        c.push(Surface.valOut("Import selected"));
        c.push("</button></div>\n </div>\n <div style='clear: both;'></div>\n </div>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.friends", "surface_73_21", "typeFriends", o, b);
    return c.join("");
};
profile.friends._use_68_13_block_content = new Surface.Block("profile.friends._use_68_13_block_content");
profile.friends._use_68_13_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(profile.friends.surface_73_21.render({"importType": ((typeof (o) != "undefined" && o !== null && typeof (o.importType) != "undefined" && o.importType !== null) ? o.importType : null),"validFriendsToInvite": ((typeof (o) != "undefined" && o !== null && typeof (o.validFriendsToInvite) != "undefined" && o.validFriendsToInvite !== null) ? o.validFriendsToInvite : null)}, b, kwargs));
    return c.join("");
};
profile.friends.surface_9_9.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_friends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.friends");
    c.push('<surf:container id="');
    c.push("profile-import-friends");
    c.push('">');
    o.profileCommon = o.profileCommon;
    if (!(o.importType)) {
        c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_profile_friends_use_12_13, kwargs));
    } else {
        c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_profile_friends_use_68_13, kwargs));
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.friends", "surface_9_9", "profile-import-friends", o, b);
    return c.join("");
};
profile.friends._use_132_13_block_extraClass = new Surface.Block("profile.friends._use_132_13_block_extraClass");
profile.friends._use_132_13_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-friends-user-search-wrapper");
    return c.join("");
};
profile.friends._use_132_13_block_extraClassInner = new Surface.Block("profile.friends._use_132_13_block_extraClassInner");
profile.friends._use_132_13_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-friends-user-search-wrapper-inner");
    return c.join("");
};
profile.friends._use_132_13_block_title = new Surface.Block("profile.friends._use_132_13_block_title");
profile.friends._use_132_13_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('<label form="profile-friends-user-search">');
    c.push(Surface.valOut("Search for old and new friends"));
    c.push("</label>");
    return c.join("");
};
profile.friends._use_132_13_block_content = new Surface.Block("profile.friends._use_132_13_block_content");
profile.friends._use_132_13_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-friends-user-search-input-wrapper" class="common-user-search-wrapper">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/search/getMatches/", Surface.urlContext)));
    c.push('" method="post" onsubmit="return false;" id="profile-friends-user-search-form">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="text" id="profile-friends-user-search" placeholder="');
    c.push(Surface.valOut("Find soldiers by name"));
    c.push('" value="" name="username" autocomplete="off">\n <div id="profile-friends-user-search-ajax-loader" class="common-user-search-spinner"><img width="16" height="16" src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/loading16x16.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="ajax loader" /></div>\n </form>\n <div id="profile-friends-user-search-failmsg" class="common-user-search-failmsg">');
    c.push(Surface.valOut("Found no matching user"));
    c.push('</div>\n <div id="profile-friends-user-search-result-wrapper" class="common-user-search-results-wrapper">\n <div id="profile-friends-user-search-result" class="common-user-search-results">\n </div>\n </div>\n </div>\n');
    return c.join("");
};
profile.friends._use_155_9_block_title = new Surface.Block("profile.friends._use_155_9_block_title");
profile.friends._use_155_9_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Friends"));
    c.push(' (<span id="profile-friends-count">');
    c.push(Surface.valOut(o.profileCommon.friendCount));
    c.push("</span>)");
    return c.join("");
};
profile.friends._use_155_9_block_content = new Surface.Block("profile.friends._use_155_9_block_content");
profile.friends._use_155_9_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("base" + ("." + "friendslist")), {"useSurfaceId": "profile_friends_list","friends": o.friends,"addFriends": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null && typeof (Surface.globalContext.session.user.userId) != "undefined" && Surface.globalContext.session.user.userId !== null) && (o.profileCommon.user.userId != Surface.globalContext.session.user.userId)),"deleteFriends": ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null && typeof (Surface.globalContext.session.user.userId) != "undefined" && Surface.globalContext.session.user.userId !== null) && (o.profileCommon.user.userId == Surface.globalContext.session.user.userId))}, null, kwargs));
    c.push(" ");
    return c.join("");
};
profile.friends.block_profileActionUnique = new Surface.Block("profile.friends.block_profileActionUnique");
profile.friends.block_profileActionUnique.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-friends-content">\n');
    if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null && typeof (Surface.globalContext.session.user.userId) != "undefined" && Surface.globalContext.session.user.userId !== null) && (o.profileCommon.user.userId == Surface.globalContext.session.user.userId))) {
        c.push(profile.friends.surface_9_9.render({"importType": ((typeof (o) != "undefined" && o !== null && typeof (o.importType) != "undefined" && o.importType !== null) ? o.importType : null),"profileCommon": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null) ? o.profileCommon : null)}, b, kwargs));
    }
    if (((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.session) != "undefined" && Surface.globalContext.session !== null && typeof (Surface.globalContext.session.user) != "undefined" && Surface.globalContext.session.user !== null && typeof (Surface.globalContext.session.user.userId) != "undefined" && Surface.globalContext.session.user.userId !== null) && (o.profileCommon.user.userId == Surface.globalContext.session.user.userId))) {
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_friends_use_132_13, kwargs));
    }
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_friends_use_155_9, kwargs));
    c.push("\n </div>\n");
    return c.join("");
};
var block_profile_functions = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("functions"));
profile.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.functions");
    c.push("\n");
    return c.join("");
};
profile.function_personaStatsUrl = function(l_persona, l_game, l_namespace, b, kwargs) {
    var o = {};
    var c = [];
    var l_d;
    l_d = {"personaName": l_persona.personaName};
    l_d = S.Modifier.set(l_d, "personaId", l_persona.personaId);
    if ((l_game && (l_game != Surface.globalContext.realm.game))) {
        l_d = S.Modifier.set(l_d, "game", $S.callFunction("base.game", l_game, b, kwargs));
    }
    if ((((typeof (l_namespace) != "undefined" && l_namespace !== null) && (l_namespace != Surface.globalContext.staticContext.nucleusNamespaces.CEM_EA_ID)) && (l_namespace != Surface.globalContext.staticContext.nucleusNamespaces.BATTLEFIELD))) {
        l_d = S.Modifier.set(l_d, "namespace", l_namespace);
    }
    return l_d;
};
var block_profile_gravatar = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("gravatar"));
profile.gravatar.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_gravatar;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.gravatar");
    var l_gravatarDefault;
    var l_gravSize;
    var l_defaultHost;
    var l_session;
    var l_status;
    var l_gravatarHost;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    o.gravatarSize = ((typeof (o) != "undefined" && o !== null && typeof (o.gravatarSize) != "undefined" && o.gravatarSize !== null) ? o.gravatarSize : 22);
    c.push("\n");
    if ((Surface.globalContext.staticContext.sslStrategy == "all")) {
        l_defaultHost = Surface.globalContext.staticContext.currentHostSecure;
        l_gravatarHost = "https://secure.gravatar.com";
    } else {
        l_defaultHost = Surface.globalContext.staticContext.currentHost;
        l_gravatarHost = "http://www.gravatar.com";
    }
    c.push("\n");
    if ((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.staticContext) != "undefined" && Surface.globalContext.staticContext !== null && typeof (Surface.globalContext.staticContext.staticPrefix) != "undefined" && Surface.globalContext.staticContext.staticPrefix !== null)) {
        l_gravatarDefault = S.Modifier.concat(S.Modifier.concat(Surface.globalContext.staticContext.staticPrefix, S.Modifier.concat(S.Modifier.concat("/public/base/shared/default-avatar-", o.gravatarSize), ".png")), Surface.globalContext.staticContext.staticPostfix);
    } else {
        l_gravatarDefault = S.Modifier.concat(l_defaultHost, S.Modifier.concat(S.Modifier.concat("/public/base/shared/default-avatar-", o.gravatarSize), ".png"));
    }
    c.push("\n");
    l_status = "offline";
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null)) {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.isPlaying) != "undefined" && o.user.presence.isPlaying !== null) && o.user.presence.isPlaying)) {
            l_status = "playing";
        } else {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.presence) != "undefined" && o.user.presence !== null && typeof (o.user.presence.isOnlineOrbit) != "undefined" && o.user.presence.isOnlineOrbit !== null) && o.user.presence.isOnlineOrbit)) {
                l_status = "online";
            }
        }
    }
    c.push("\n");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && (typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null)) && (o.user != false))) {
        if (((l_status == "offline") && (l_session.user.userId == o.user.userId))) {
            l_status = "online";
        }
    }
    c.push("\n");
    l_gravSize = "none";
    c.push("\n");
    if ((o.gravatarSize == 52)) {
        l_gravSize = "large";
    } else {
        if ((o.gravatarSize == 190)) {
            l_gravSize = "supersize";
        } else {
            if ((o.gravatarSize == 304)) {
                l_gravSize = "supersize2";
            } else {
                if ((o.gravatarSize == 22)) {
                    l_gravSize = "small";
                } else {
                    if ((o.gravatarSize == 30)) {
                        l_gravSize = "medium";
                    }
                }
            }
        }
    }
    c.push("\n<div ");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.userId) != "undefined" && o.user.userId !== null))) {
        c.push('rel="');
        c.push(Surface.valOut(o.user.userId));
        c.push('"');
    }
    c.push(' class="base-avatar-container base-avatar-size-');
    c.push(Surface.valOut(l_gravSize));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.tipsyTitle) != "undefined" && o.tipsyTitle !== null) && o.tipsyTitle)) {
        c.push(" bubble-title");
    }
    c.push('"');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.tipsyTitle) != "undefined" && o.tipsyTitle !== null) && o.tipsyTitle)) {
        c.push(' title="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null) ? o.user.username : "")));
        c.push('"');
    }
    c.push(">\n");
    if (((l_gravSize == "supersize2") && (typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null))) {
        c.push(' <div class="base-avatar-status-overlay base-avatar-status-overlay-');
        c.push(Surface.valOut(l_status));
        c.push('">\n <img class="base-avatar-status-');
        c.push(Surface.valOut(l_status));
        c.push('" src="');
        if ((((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.gravatarMd5) != "undefined" && o.user.gravatarMd5 !== null) ? o.user.gravatarMd5 : "") != "")) {
            c.push(Surface.valOut(l_gravatarHost));
            c.push("/avatar/");
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.gravatarMd5) != "undefined" && o.user.gravatarMd5 !== null) ? o.user.gravatarMd5 : "")));
            c.push("?s=");
            c.push(Surface.valOut(o.gravatarSize));
            c.push("&d=");
            c.push(Surface.valOut(S.Modifier.urlencode(l_gravatarDefault)));
        } else {
            c.push(Surface.valOut(l_gravatarDefault));
        }
        c.push('" width="');
        c.push(Surface.valOut(o.gravatarSize));
        c.push('" height="');
        c.push(Surface.valOut(o.gravatarSize));
        c.push('" />\n </div>\n');
    } else {
        if (((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && (o.user != false))) {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.openChatLink) != "undefined" && o.openChatLink !== null) ? o.openChatLink : false)) {
                c.push(' <a rel="');
                c.push(Surface.valOut(o.user.userId));
                c.push('" class="base-open-chat-link base-avatar-status-overlay base-avatar-status-overlay-');
                c.push(Surface.valOut(l_status));
                c.push('">\n');
            } else {
                l_session = S.Modifier.get(Surface.globalContext, "session");
                if ((((typeof (o) != "undefined" && o !== null && typeof (o.hideLink) != "undefined" && o.hideLink !== null) ? o.hideLink : false) || !((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null)))) {
                    c.push(' <div class="base-avatar-status-overlay base-avatar-status-overlay-');
                    c.push(Surface.valOut(l_status));
                    c.push('">\n');
                } else {
                    c.push(' <a href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.user.username})));
                    c.push('" class="base-avatar-status-overlay base-avatar-status-overlay-');
                    c.push(Surface.valOut(l_status));
                    c.push('">\n');
                }
            }
            c.push('\n <img src="');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.gravatarMd5) != "undefined" && o.user.gravatarMd5 !== null) ? o.user.gravatarMd5 : "") != "")) {
                c.push(Surface.valOut(l_gravatarHost));
                c.push("/avatar/");
                c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.gravatarMd5) != "undefined" && o.user.gravatarMd5 !== null) ? o.user.gravatarMd5 : "")));
                c.push("?s=");
                c.push(Surface.valOut(o.gravatarSize));
                c.push("&d=");
                c.push(Surface.valOut(S.Modifier.urlencode(l_gravatarDefault)));
            } else {
                c.push(Surface.valOut(l_gravatarDefault));
            }
            c.push('" width="');
            c.push(Surface.valOut(o.gravatarSize));
            c.push('" height="');
            c.push(Surface.valOut(o.gravatarSize));
            c.push('" />\n');
            if ((((typeof (o) != "undefined" && o !== null && typeof (o.hideLink) != "undefined" && o.hideLink !== null) ? o.hideLink : false) || !((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null)))) {
                c.push(" </div>\n");
            } else {
                c.push(" </a>\n");
            }
            c.push("\n");
        } else {
            c.push(' <div class="base-avatar-status-overlay base-avatar-status-overlay-unknown">\n <img src="');
            c.push(Surface.valOut(l_gravatarDefault));
            c.push('" width="');
            c.push(Surface.valOut(o.gravatarSize));
            c.push('" height="');
            c.push(Surface.valOut(o.gravatarSize));
            c.push('" />\n </div>\n');
        }
    }
    c.push("\n</div>");
    return c.join("");
};
var block_profile_link = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("link"));
profile.link.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_link;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.link");
    c.push('\n<a class="base-profile-link" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.username})));
    c.push('">');
    c.push(Surface.valOut(o.username));
    c.push("</a>");
    return c.join("");
};
var block_profile_linkavatar = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("linkavatar"));
profile.linkavatar.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_linkavatar;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.linkavatar");
    c.push('\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"id": o.userId})));
    c.push('">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/sonar/avatar_", S.Modifier.avatarmodulo(o.userId, 6)), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n</a>\n');
    return c.join("");
};
var block_profile_linkavatarandusername = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("linkavatarandusername"));
profile.linkavatarandusername.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_linkavatarandusername;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.linkavatarandusername");
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), o, null, kwargs));
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "link")), o, null, kwargs));
    return c.join("");
};
var block_profile_linkpersona = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("linkpersona"));
profile.linkpersona.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_linkpersona;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.linkpersona");
    c.push('\n<a class="base-profile-link" href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaName": o.persona.personaName})));
    c.push('">');
    c.push(Surface.valOut(o.persona.personaName));
    c.push("</a>\n");
    return c.join("");
};
var block_profile_mytargetbutton = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("mytargetbutton"));
profile.mytargetbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_mytargetbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.mytargetbutton");
    c.push("\n");
    if (((o.statName != "bay") && (o.statName != "m1"))) {
        c.push(' <form class="ajax-mytargetsform">\n <input type="hidden" name="statName" value="');
        c.push(Surface.valOut(o.statName));
        c.push('" />\n <input type="submit" title="');
        if (o.taken) {
            c.push(Surface.valOut("Click to remove from your targets"));
        } else {
            c.push(Surface.valOut("Click to add to your targets"));
        }
        c.push('" class="profile-mytarget ');
        if (o.taken) {
            c.push("stored");
        }
        c.push('" value="">\n </form>\n');
    }
    return c.join("");
};
var block_profile_nostatsfound = new Surface.BlockConfig("", {"statsContent": "profile.nostatsfound.block_statsContent"});
profile.addTemplate(new Surface.Template("nostatsfound"));
profile.nostatsfound.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_nostatsfound;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.nostatsfound");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    return c.join("");
};
profile.nostatsfound.block_statsContent = new Surface.Block("profile.nostatsfound.block_statsContent");
profile.nostatsfound.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="profile-stats-blaze-down">\n ');
    c.push(Surface.valOut("This soldier doesn't have any stats... yet."));
    c.push("\n </div>\n");
    return c.join("");
};
var block_profile_openchatlink = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("openchatlink"));
profile.openchatlink.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_openchatlink;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.openchatlink");
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.username) != "undefined" && o.user.username !== null)) {
        c.push(' <a rel="');
        c.push(Surface.valOut(o.user.userId));
        c.push('" class="base-open-chat-link" href="javascript: void(0);">');
        c.push(Surface.valOut(o.user.username));
        c.push("</a>\n");
    } else {
        c.push(" ");
        c.push(Surface.valOut("Someone"));
        c.push("\n");
    }
    return c.join("");
};
var block_profile_overview = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.overview.block_profileMainContent"});
profile.addTemplate(new Surface.Template("overview"));
profile.overview.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_overview;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.overview");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
var block_profile_overview_use_93_22 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.overview._use_93_22_block_content","title": "profile.overview._use_93_22_block_title","extraClassInner": "profile.overview._use_93_22_block_extraClassInner","extraClass": "profile.overview._use_93_22_block_extraClass"});
var block_profile_overview_use_62_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.overview._use_62_18_block_content","title": "profile.overview._use_62_18_block_title","extraClassInner": "profile.overview._use_62_18_block_extraClassInner","extraClass": "profile.overview._use_62_18_block_extraClass"});
var block_profile_overview_use_22_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.overview._use_22_14_block_content","title": "profile.overview._use_22_14_block_title","extraClassInner": "profile.overview._use_22_14_block_extraClassInner","extraClass": "profile.overview._use_22_14_block_extraClass"});
var block_profile_overview_use_6_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.overview._use_6_10_block_content","title": "profile.overview._use_6_10_block_title","extraClassInner": "profile.overview._use_6_10_block_extraClassInner","extraClass": "profile.overview._use_6_10_block_extraClass"});
profile.overview._use_6_10_block_extraClass = new Surface.Block("profile.overview._use_6_10_block_extraClass");
profile.overview._use_6_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" profile-soldier-list ");
    return c.join("");
};
profile.overview._use_6_10_block_extraClassInner = new Surface.Block("profile.overview._use_6_10_block_extraClassInner");
profile.overview._use_6_10_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_6_10_block_title = new Surface.Block("profile.overview._use_6_10_block_title");
profile.overview._use_6_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.valOut("Soldiers"));
    c.push(" ");
    return c.join("");
};
profile.overview._use_6_10_block_content = new Surface.Block("profile.overview._use_6_10_block_content");
profile.overview._use_6_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "overviewsoldierbox")), {"soldiersBox": o.soldiersBox,"fullSoldiersBoxUrl": o.fullSoldiersBoxUrl}, null, kwargs));
    c.push("\n");
    if ((S.Modifier.count(o.soldiersBox) > 3)) {
        c.push(' <div class="view-all-soldiers"><a class="base-no-ajax" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.profileCommon.user.username})));
        c.push('">');
        c.push(Surface.valOut("View all soldiers"));
        c.push("</a></div>\n");
    }
    return c.join("");
};
profile.overview._use_22_14_block_extraClass = new Surface.Block("profile.overview._use_22_14_block_extraClass");
profile.overview._use_22_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_22_14_block_extraClassInner = new Surface.Block("profile.overview._use_22_14_block_extraClassInner");
profile.overview._use_22_14_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_22_14_block_title = new Surface.Block("profile.overview._use_22_14_block_title");
profile.overview._use_22_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Latest Battle Reports"));
    return c.join("");
};
profile.overview.surface_28_22 = new Surface.SingleSurface("profile.overview.surface_28_22");
profile.overview.surface_28_22.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_overview;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.overview");
    c.push('<surf:container id="');
    c.push("profile-gamereport-previews");
    c.push('">');
    var l_for_profile_overview_39_34_list;
    var l_for_profile_overview_39_34_iteration;
    var l_for_profile_overview_38_30_list;
    var l_mapinfo;
    c.push('\n <div class="profile-gamereport-bar">\n <div class="profile-gamereport-bar-labels">\n <span>');
    c.push(Surface.valOut("Wins"));
    c.push('</span>\n <div class="base-clear"></div>\n <span>');
    c.push(Surface.valOut("Losses"));
    c.push("</span>\n </div>\n");
    l_for_profile_overview_38_30_list = o.gameReportPreviewGroups;
    if ((S.Modifier.count(l_for_profile_overview_38_30_list) > 0)) {
        for (var l_group in l_for_profile_overview_38_30_list) {
            if (!Surface.isValidLoopItem(l_for_profile_overview_38_30_list[l_group])) {
                continue;
            }
            var l_gameReportPreviews = l_for_profile_overview_38_30_list[l_group];
            l_for_profile_overview_39_34_list = l_gameReportPreviews;
            l_for_profile_overview_39_34_iteration = 0;
            if ((S.Modifier.count(l_for_profile_overview_39_34_list) > 0)) {
                for (var l_for_profile_overview_39_34_key in l_for_profile_overview_39_34_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_overview_39_34_list[l_for_profile_overview_39_34_key])) {
                        continue;
                    }
                    var l_gameReportPreview = l_for_profile_overview_39_34_list[l_for_profile_overview_39_34_key];
                    l_for_profile_overview_39_34_iteration = (l_for_profile_overview_39_34_iteration + 1);
                    c.push("\n");
                    l_mapinfo = $S.callFunction("serverguide.mapinfo", 2, S.Modifier.get(l_gameReportPreview, "mapName", "Unknown"), b, kwargs);
                    c.push('\n <div class="profile-gamereport-bar-column');
                    if ((S.Modifier.get(l_gameReportPreview, "winStatus", 3) != 1)) {
                        c.push(" profile-gamereport-lost");
                    }
                    c.push('">\n ');
                    if (((l_for_profile_overview_39_34_iteration == 1) && (l_group != 0))) {
                        c.push('<div class="profile-gamereport-bar-column-head"><span>');
                        c.push(Surface.valOut(S.Modifier.get(o.reportGroups, l_group, 11)));
                        c.push("</span></div>");
                    }
                    c.push('\n <a data-report=\'{ "gameReportPreview": ');
                    c.push(Surface.valOut(S.Modifier.jsonEncode(l_gameReportPreview)));
                    c.push(', "onDark": true }\' class="profile-gamereport-bar-column-body" href="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/battlereport/show/{gameHistoryId}/{platform}/{personaId}/", Surface.urlContext, {"gameHistoryId": l_gameReportPreview.reportId,"platform": l_gameReportPreview.platform,"personaId": l_gameReportPreview.personaId})));
                    c.push('">\n <img src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_mapinfo.imageIcon, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" width="30" height="21">\n </a>\n </div>\n');
                }
            }
        }
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.overview", "surface_28_22", "profile-gamereport-previews", o, b);
    return c.join("");
};
profile.overview._use_22_14_block_content = new Surface.Block("profile.overview._use_22_14_block_content");
profile.overview._use_22_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_reportGroups;
    l_reportGroups = ["", "1d", "2d", "3d", "4d", "5d", "6d", "1w", "2w", "1m", "2m", ">"];
    c.push(profile.overview.surface_28_22.render({"gameReportPreviewGroups": ((typeof (o) != "undefined" && o !== null && typeof (o.gameReportPreviewGroups) != "undefined" && o.gameReportPreviewGroups !== null) ? o.gameReportPreviewGroups : null),"reportGroups": ((typeof (l_reportGroups) != "undefined" && l_reportGroups !== null) ? l_reportGroups : null)}, b, kwargs));
    return c.join("");
};
profile.overview._use_62_18_block_extraClass = new Surface.Block("profile.overview._use_62_18_block_extraClass");
profile.overview._use_62_18_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_62_18_block_extraClassInner = new Surface.Block("profile.overview._use_62_18_block_extraClassInner");
profile.overview._use_62_18_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_62_18_block_title = new Surface.Block("profile.overview._use_62_18_block_title");
profile.overview._use_62_18_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Presentation");
    return c.join("");
};
profile.overview._use_62_18_block_content = new Surface.Block("profile.overview._use_62_18_block_content");
profile.overview._use_62_18_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null) && (l_session.user.userId != o.profileCommon.user.userId))) {
        c.push(' <div class="profile-post-report">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "reportbutton")), {"reportUrl": S.Modifier.urlformat("/{_section}/{_language}/user/reportProfilePresentationDropdown/{id}/", Surface.urlContext, {"id": S.Modifier.concat(o.profileCommon.user.userId, "")})}, null, kwargs));
        c.push("\n </div>\n");
    }
    c.push('\n <div class="profile-presentation-text">\n');
    if (o.profileCommon.userinfo.presentationHidden) {
        c.push(" <i>");
        c.push(Surface.valOut("This presentation has been hidden by the Battlelog administrators."));
        c.push("</i>\n");
    } else {
        c.push(" ");
        c.push(S.Modifier.nl2br(S.Modifier.htmlspecialchars(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null && typeof (o.profileCommon.userinfo.presentation) != "undefined" && o.profileCommon.userinfo.presentation !== null) ? o.profileCommon.userinfo.presentation : "No presentation available."))));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.overview._use_93_22_block_extraClass = new Surface.Block("profile.overview._use_93_22_block_extraClass");
profile.overview._use_93_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_93_22_block_extraClassInner = new Surface.Block("profile.overview._use_93_22_block_extraClassInner");
profile.overview._use_93_22_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.overview._use_93_22_block_title = new Surface.Block("profile.overview._use_93_22_block_title");
profile.overview._use_93_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.valOut("Battlefeed"));
    c.push(" ");
    return c.join("");
};
profile.overview._use_93_22_block_content = new Surface.Block("profile.overview._use_93_22_block_content");
profile.overview._use_93_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if (((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (l_session.user.userId != o.profileCommon.user.userId)) && (o.profileCommon.friendStatus == "ACCEPTED"))) {
        c.push(' <form method="POST" class="wallpost" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/wall/postmessage/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="wall-ownerId" value="');
        c.push(Surface.valOut(o.profileCommon.user.userId));
        c.push('"/>\n <textarea class="wall-message feed-textlimit-count" name="wall-message">');
        c.push(Surface.valOut("Leave a message in this Battle feed..."));
        c.push('</textarea>\n <div class="feed-textlimit-counter"></div>\n <input class="base-button-arrow-small wall-message-button" type="submit" value="Post"/>\n <div style="clear:both;"></div>\n </form>\n');
    }
    o.user = o.profileCommon.user;
    c.push(' <div class="profile-battlelog-padding">');
    c.push(Surface.importTemplate(("profile" + ("." + "feed")), o, null, kwargs));
    c.push("</div>\n");
    return c.join("");
};
profile.overview.block_profileMainContent = new Surface.Block("profile.overview.block_profileMainContent");
profile.overview.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    if ((S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.soldiersBox) != "undefined" && o.soldiersBox !== null) ? o.soldiersBox : [])) > 0)) {
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_overview_use_6_10, kwargs));
    }
    c.push('\n <div id="profile-main-content">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.gameReportPreviewGroups) != "undefined" && o.gameReportPreviewGroups !== null) && (o.gameReportPreviewCount > 0))) {
        c.push(' <div id="profile-battlereports">\n');
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_overview_use_22_14, kwargs));
        c.push(" </div>\n");
    }
    c.push("\n");
    if (((S.Modifier.get(o.profileCommon.userinfo, "presentation") !== null) && o.profileCommon.userinfo.showDetails)) {
        c.push(' <div id="profile-presentation">\n');
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_overview_use_62_18, kwargs));
        c.push(" </div>\n");
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.userinfo) != "undefined" && o.profileCommon.userinfo !== null)) {
        c.push("\n");
        if (o.profileCommon.userinfo.feedActive) {
            c.push(' <div id="profile-battlelog">\n');
            c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_overview_use_93_22, kwargs));
            c.push(" </div>\n");
        }
    } else {
        c.push("\n");
        c.push(Surface.valOut("This userfeed is not available right now."));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
var block_profile_overviewsoldierbox = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("overviewsoldierbox"));
profile.overviewsoldierbox.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_overviewsoldierbox;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.overviewsoldierbox");
    var l_advancedDogTag;
    var l_for_profile_overviewsoldierbox_3_6_list;
    var l_for_profile_overviewsoldierbox_3_6_iteration;
    var l_basicDogTag;
    c.push('\n<ul id="soldier-list" data="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.fullSoldiersBoxUrl) != "undefined" && o.fullSoldiersBoxUrl !== null) ? o.fullSoldiersBoxUrl : "")));
    c.push('">\n');
    l_for_profile_overviewsoldierbox_3_6_list = ((typeof (o) != "undefined" && o !== null && typeof (o.soldiersBox) != "undefined" && o.soldiersBox !== null) ? o.soldiersBox : {});
    l_for_profile_overviewsoldierbox_3_6_iteration = 0;
    if ((S.Modifier.count(l_for_profile_overviewsoldierbox_3_6_list) > 0)) {
        for (var l_for_profile_overviewsoldierbox_3_6_key in l_for_profile_overviewsoldierbox_3_6_list) {
            if (!Surface.isValidLoopItem(l_for_profile_overviewsoldierbox_3_6_list[l_for_profile_overviewsoldierbox_3_6_key])) {
                continue;
            }
            var l_boxStats = l_for_profile_overviewsoldierbox_3_6_list[l_for_profile_overviewsoldierbox_3_6_key];
            l_for_profile_overviewsoldierbox_3_6_iteration = (l_for_profile_overviewsoldierbox_3_6_iteration + 1);
            c.push(" <li ");
            if ((l_for_profile_overviewsoldierbox_3_6_iteration > 3)) {
                c.push(' class="hidden" ');
            }
            c.push(' >\n <div class="soldier-name">\n <h3>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_boxStats.persona, l_boxStats.game, l_boxStats.persona.namespace, b, kwargs))));
            c.push('">\n ');
            if (((typeof (l_boxStats) != "undefined" && l_boxStats !== null && typeof (l_boxStats.persona) != "undefined" && l_boxStats.persona !== null && typeof (l_boxStats.persona.clanTag) != "undefined" && l_boxStats.persona.clanTag !== null) ? l_boxStats.persona.clanTag : false)) {
                c.push("[");
                c.push(Surface.valOut(l_boxStats.persona.clanTag));
                c.push("]");
            }
            c.push("\n");
            c.push(Surface.valOut(l_boxStats.persona.personaName));
            c.push('\n </a>\n </h3>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_boxStats.persona, l_boxStats.game, l_boxStats.persona.namespace, b, kwargs))));
            c.push('">\n <div class="');
            c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_boxStats.game, l_boxStats.persona.namespace, 0, b, kwargs)));
            c.push('"></div>\n </a>\n');
            if (!((typeof (o) != "undefined" && o !== null && typeof (o.fullSoldiersBoxUrl) != "undefined" && o.fullSoldiersBoxUrl !== null))) {
                c.push(' <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", l_boxStats.persona, l_boxStats.game, l_boxStats.persona.namespace, b, kwargs))));
                c.push('">\n <div class="soldier-dogtags">\n');
                l_basicDogTag = S.Modifier.get(S.Modifier.get(S.Modifier.get(l_boxStats.dogtagsForPersona, l_boxStats.persona.personaId), "basicDogTag"), "image");
                l_advancedDogTag = S.Modifier.get(S.Modifier.get(S.Modifier.get(l_boxStats.dogtagsForPersona, l_boxStats.persona.personaId), "advancedDogTag"), "image");
                c.push(' <img class="dogtag2" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/la/t/", ((typeof (l_advancedDogTag) != "undefined" && l_advancedDogTag !== null) ? l_advancedDogTag : "defaulttag_right")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="" />\n <img class="dogtag1" src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/dogtags/lb/t/", ((typeof (l_basicDogTag) != "undefined" && l_basicDogTag !== null) ? l_basicDogTag : "defaulttag_right")), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="" />\n </div>\n </a>\n');
            }
            c.push(" </div>\n");
            if (!((typeof (o) != "undefined" && o !== null && typeof (o.fullSoldiersBoxUrl) != "undefined" && o.fullSoldiersBoxUrl !== null))) {
                c.push(" ");
                c.push(Surface.importTemplate(("profile" + ("." + "overviewsoldierboxstats")), {"boxStats": l_boxStats}, null, kwargs));
                c.push("\n");
            }
            c.push(" </li>\n");
        }
    }
    c.push("</ul>");
    return c.join("");
};
var block_profile_overviewsoldierboxstats = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("overviewsoldierboxstats"));
profile.overviewsoldierboxstats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_overviewsoldierboxstats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.overviewsoldierboxstats");
    var l_wlr;
    var l_currentRank;
    c.push("\n");
    l_currentRank = ((typeof (o) != "undefined" && o !== null && typeof (o.boxStats) != "undefined" && o.boxStats !== null && typeof (o.boxStats.rank) != "undefined" && o.boxStats.rank !== null) ? o.boxStats.rank : 0);
    c.push("\n");
    if (((S.Modifier.get(o.boxStats, "numWins", 0) > 0) && (S.Modifier.get(o.boxStats, "numLosses", 0) > 0))) {
        l_wlr = S.Modifier.round((S.Modifier.tofloat(S.Modifier.get(o.boxStats, "numWins", 0)) / S.Modifier.tofloat(S.Modifier.get(o.boxStats, "numLosses", 1))), 2);
    } else {
        l_wlr = S.Modifier.tofloat(S.Modifier.get(o.boxStats, "numWins", 0));
    }
    c.push('\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.boxStats.persona, o.boxStats.game, o.boxStats.persona.namespace, b, kwargs))));
    c.push('">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "showrank")), {"rank_game": o.boxStats.game,"rank_size": "small","rank": l_currentRank,"tag_class": "soldier-rank"}, null, kwargs));
    c.push('\n</a>\n<a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, $S.callFunction("profile.personaStatsUrl", o.boxStats.persona, o.boxStats.game, o.boxStats.persona.namespace, b, kwargs))));
    c.push('">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "showsoldierpic")), {"picture": o.boxStats.persona.picture,"klass": "profile-kit-image","size": "small"}, null, kwargs));
    c.push("\n</a>\n<table>\n <tr>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(((typeof (o) != "undefined" && o !== null && typeof (o.boxStats) != "undefined" && o.boxStats !== null && typeof (o.boxStats.score) != "undefined" && o.boxStats.score !== null) ? o.boxStats.score : 0))));
    c.push("</td>\n <td>");
    c.push(Surface.valOut(S.Modifier.niceInt(((typeof (o) != "undefined" && o !== null && typeof (o.boxStats) != "undefined" && o.boxStats !== null && typeof (o.boxStats.kills) != "undefined" && o.boxStats.kills !== null) ? o.boxStats.kills : 0))));
    c.push('</td>\n <td class="last">');
    c.push(Surface.valOut(l_wlr));
    c.push("</td>\n </tr>\n <tr>\n <th>");
    c.push(Surface.valOut("Score"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Kills"));
    c.push('</th>\n <th class="last">');
    c.push(Surface.valOut("W/L Ratio"));
    c.push("</th>\n </tr>\n</table>");
    return c.join("");
};
var block_profile_reportprofiledropdown = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("reportprofiledropdown"));
profile.reportprofiledropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_reportprofiledropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.reportprofiledropdown");
    c.push('\n<ul>\n <li><a class="base-no-ajax report" title="Report profile" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportProfileAbuse/{id}/", Surface.urlContext, {"id": o.id})));
    c.push('" href="#">');
    c.push(Surface.valOut("Report Profile"));
    c.push("</a></li>\n");
    if (o.canView) {
        c.push(' <li><a class="base-no-ajax" title="View profile" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/userpresentation/{state}/{userId}/", Surface.urlContext, {"state": "view","userId": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("View Profile"));
        c.push("</a></li>\n");
    }
    if (o.canShowHide) {
        c.push(' <li><a class="base-no-ajax" title="Show profile" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/userpresentation/{state}/{userId}/", Surface.urlContext, {"state": "show","userId": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("Show Profile"));
        c.push('</a></li>\n <li><a class="base-no-ajax" title="Hide profile" href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/userpresentation/{state}/{userId}/", Surface.urlContext, {"state": "hide","userId": o.id})));
        c.push('" href="#">');
        c.push(Surface.valOut("Hide Profile"));
        c.push("</a></li>\n");
    }
    c.push("</ul>");
    return c.join("");
};
var block_profile_reportprofilepresentationdropdown = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("reportprofilepresentationdropdown"));
profile.reportprofilepresentationdropdown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_reportprofilepresentationdropdown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.reportprofilepresentationdropdown");
    c.push('\n<ul>\n <li><a class="base-no-ajax report" title="');
    c.push(Surface.valOut("Report abuse"));
    c.push('" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/viewcontent/reportProfileAbuse/{id}/", Surface.urlContext, {"id": o.id})));
    c.push('" href="#">');
    c.push(Surface.valOut("Report abuse"));
    c.push("</a></li>\n</ul>");
    return c.join("");
};
var block_profile_serverbookmarks = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.serverbookmarks.block_profileMainContent","titleItem": "profile.serverbookmarks.block_titleItem","profileSecondaryContent": "profile.serverbookmarks.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("serverbookmarks"));
profile.serverbookmarks.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_serverbookmarks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.serverbookmarks");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
var block_profile_serverbookmarks_use_48_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.serverbookmarks._use_48_14_block_content","title": "profile.serverbookmarks._use_48_14_block_title","extraClassInner": "profile.serverbookmarks._use_48_14_block_extraClassInner","extraClass": "profile.serverbookmarks._use_48_14_block_extraClass"});
var block_profile_serverbookmarks_use_7_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "profile.serverbookmarks._use_7_10_block_content","title": "profile.serverbookmarks._use_7_10_block_title","extraClassInner": "profile.serverbookmarks._use_7_10_block_extraClassInner","extraClass": "profile.serverbookmarks._use_7_10_block_extraClass"});
profile.serverbookmarks.block_titleItem = new Surface.Block("profile.serverbookmarks.block_titleItem");
profile.serverbookmarks.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Favourite servers"));
    c.push(" - ");
    return c.join("");
};
profile.serverbookmarks._use_7_10_block_extraClass = new Surface.Block("profile.serverbookmarks._use_7_10_block_extraClass");
profile.serverbookmarks._use_7_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-serverbookmarks");
    return c.join("");
};
profile.serverbookmarks._use_7_10_block_extraClassInner = new Surface.Block("profile.serverbookmarks._use_7_10_block_extraClassInner");
profile.serverbookmarks._use_7_10_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.serverbookmarks._use_7_10_block_title = new Surface.Block("profile.serverbookmarks._use_7_10_block_title");
profile.serverbookmarks._use_7_10_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Favourite servers"));
    return c.join("");
};
profile.serverbookmarks._use_7_10_block_content = new Surface.Block("profile.serverbookmarks._use_7_10_block_content");
profile.serverbookmarks._use_7_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    var l_for_profile_serverbookmarks_13_18_list;
    var l_for_profile_serverbookmarks_13_18_iteration;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    l_for_profile_serverbookmarks_13_18_list = o.serverBookmarks;
    l_for_profile_serverbookmarks_13_18_iteration = 0;
    if ((S.Modifier.count(l_for_profile_serverbookmarks_13_18_list) > 0)) {
        for (var l_for_profile_serverbookmarks_13_18_key in l_for_profile_serverbookmarks_13_18_list) {
            if (!Surface.isValidLoopItem(l_for_profile_serverbookmarks_13_18_list[l_for_profile_serverbookmarks_13_18_key])) {
                continue;
            }
            var l_sb = l_for_profile_serverbookmarks_13_18_list[l_for_profile_serverbookmarks_13_18_key];
            l_for_profile_serverbookmarks_13_18_iteration = (l_for_profile_serverbookmarks_13_18_iteration + 1);
            if (((typeof (l_sb) != "undefined" && l_sb !== null && typeof (l_sb.map) != "undefined" && l_sb.map !== null) && (l_sb.game == l_realm.game))) {
                o.mapinfo = $S.callFunction("serverguide.mapinfo", l_sb.game, l_sb.map, b, kwargs);
                c.push(' <div class="profile-serverbookmark');
                if ((Surface.modulo((l_for_profile_serverbookmarks_13_18_iteration - 1), 4) == 0)) {
                    c.push(" first");
                }
                c.push('">\n <div class="profile-serverbookmark-map">\n <a href="');
                c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_sb.guid, l_sb.name, b, kwargs)));
                c.push('">\n <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(o.mapinfo.imageBig, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="');
                c.push(Surface.valOut(o.mapinfo.mapId));
                c.push('" width="146" height="79" />\n </a>\n </div>\n <div class="profile-serverbookmark-info">\n <div class="profile-serverbookmark-info-name">\n <a href="');
                c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_sb.guid, l_sb.name, b, kwargs)));
                c.push('">');
                if ((S.Modifier.count(l_sb.name) > 42)) {
                    c.push(Surface.valOut(S.Modifier.substring(l_sb.name, 0, 39)));
                    c.push("...");
                } else {
                    c.push(Surface.valOut(l_sb.name));
                }
                c.push('</a>\n </div>\n <div class="profile-serverbookmark-info-time"></div>\n <div class="profile-serverbookmark-info-game">\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_sb.game, l_sb.platform, 0, b, kwargs)));
                c.push('"></span>\n </div>\n </div>\n </div>\n');
            }
        }
    } else {
        c.push(' <div class="profile-info-empty-message">\n ');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.username) != "undefined" && o.profileCommon.user.username !== null) ? o.profileCommon.user.username : "Unknown")));
        c.push(" ");
        c.push(Surface.valOut("does not have any favourite servers."));
        c.push("\n </div>\n");
    }
    c.push('\n <div style="clear: both;"></div>\n');
    return c.join("");
};
profile.serverbookmarks._use_48_14_block_extraClass = new Surface.Block("profile.serverbookmarks._use_48_14_block_extraClass");
profile.serverbookmarks._use_48_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("profile-serverbookmarks");
    return c.join("");
};
profile.serverbookmarks._use_48_14_block_extraClassInner = new Surface.Block("profile.serverbookmarks._use_48_14_block_extraClassInner");
profile.serverbookmarks._use_48_14_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
profile.serverbookmarks._use_48_14_block_title = new Surface.Block("profile.serverbookmarks._use_48_14_block_title");
profile.serverbookmarks._use_48_14_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && (l_session.user.userId == o.serversUserId))) {
        c.push(" You have\n");
    } else {
        c.push(" Has\n");
    }
    c.push(" been seen here\n");
    return c.join("");
};
profile.serverbookmarks._use_48_14_block_content = new Surface.Block("profile.serverbookmarks._use_48_14_block_content");
profile.serverbookmarks._use_48_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    var l_for_profile_serverbookmarks_63_22_list;
    var l_for_profile_serverbookmarks_63_22_iteration;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push("\n");
    l_for_profile_serverbookmarks_63_22_list = o.recentlyPlayed;
    l_for_profile_serverbookmarks_63_22_iteration = 0;
    if ((S.Modifier.count(l_for_profile_serverbookmarks_63_22_list) > 0)) {
        for (var l_for_profile_serverbookmarks_63_22_key in l_for_profile_serverbookmarks_63_22_list) {
            if (!Surface.isValidLoopItem(l_for_profile_serverbookmarks_63_22_list[l_for_profile_serverbookmarks_63_22_key])) {
                continue;
            }
            var l_sb = l_for_profile_serverbookmarks_63_22_list[l_for_profile_serverbookmarks_63_22_key];
            l_for_profile_serverbookmarks_63_22_iteration = (l_for_profile_serverbookmarks_63_22_iteration + 1);
            if ((l_sb.game == l_realm.game)) {
                o.mapinfo = $S.callFunction("serverguide.mapinfo", l_sb.game, l_sb.map, b, kwargs);
                c.push(' <div class="profile-serverbookmark');
                if ((Surface.modulo((l_for_profile_serverbookmarks_63_22_iteration - 1), 4) == 0)) {
                    c.push(" first");
                }
                c.push('">\n <div class="profile-serverbookmark-map">\n <a href="');
                c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_sb.guid, l_sb.name, b, kwargs)));
                c.push('">\n <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(o.mapinfo.imageBig, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="');
                c.push(Surface.valOut(o.mapinfo.mapId));
                c.push('" width="146" height="79" />\n </a>\n </div>\n <div class="profile-serverbookmark-info">\n <div class="profile-serverbookmark-info-name">\n <a href="');
                c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", l_sb.guid, l_sb.name, b, kwargs)));
                c.push('">');
                if ((S.Modifier.count(l_sb.name) > 42)) {
                    c.push(Surface.valOut(S.Modifier.substring(l_sb.name, 0, 39)));
                    c.push("...");
                } else {
                    c.push(Surface.valOut(l_sb.name));
                }
                c.push('</a>\n </div>\n <div class="profile-serverbookmark-info-time">\n ');
                c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": l_sb.updatedAt}, null, kwargs));
                c.push("\n");
                c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
                c.push('\n </div>\n <div class="profile-serverbookmark-info-game">\n <span class="');
                c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", l_sb.game, l_sb.platform, 0, b, kwargs)));
                c.push('"></span>\n </div>\n </div>\n </div>\n');
            }
        }
    } else {
        c.push(' <div class="profile-info-empty-message">\n ');
        c.push(Surface.valOut("Found no servers."));
        c.push("\n </div>\n");
    }
    c.push('\n <div style="clear: both;"></div>\n');
    return c.join("");
};
profile.serverbookmarks.block_profileMainContent = new Surface.Block("profile.serverbookmarks.block_profileMainContent");
profile.serverbookmarks.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push('\n <div id="profile-serverbookmarks">\n');
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_serverbookmarks_use_7_10, kwargs));
    c.push('\n <div style="margin-top: 16px"></div>\n');
    if ((S.Modifier.count(o.recentlyPlayed) > 0)) {
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_profile_serverbookmarks_use_48_14, kwargs));
        c.push('\n <div style="margin-top: 16px"></div>\n');
    }
    c.push("\n </div>\n");
    return c.join("");
};
profile.serverbookmarks.block_profileSecondaryContent = new Surface.Block("profile.serverbookmarks.block_profileSecondaryContent");
profile.serverbookmarks.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_showrank = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("showrank"));
profile.showrank.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_showrank;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.showrank");
    var l_strRank;
    c.push("\n");
    if ((S.Modifier.toint(o.rank) < 46)) {
        l_strRank = S.Modifier.concat("r", o.rank);
    } else {
        if ((S.Modifier.toint(o.rank) <= 145)) {
            l_strRank = S.Modifier.concat("ss", (o.rank - 45));
        } else {
            if ((S.Modifier.toint(o.rank) > 145)) {
                l_strRank = "ss100";
            } else {
                l_strRank = "r0";
            }
        }
    }
    c.push("\n");
    if ((o.rank_game == Surface.globalContext.staticContext.games.BF3)) {
        if ((o.rank_size == "tiny")) {
            c.push(" <img");
            if ((typeof (o) != "undefined" && o !== null && typeof (o.tag_class) != "undefined" && o.tag_class !== null)) {
                c.push(' class="');
                c.push(Surface.valOut(o.tag_class));
                c.push('"');
            }
            c.push(' src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ranks/tiny/", l_strRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="" height="23" width="29" />\n');
        } else {
            if ((o.rank_size == "small")) {
                c.push(" <img");
                if ((typeof (o) != "undefined" && o !== null && typeof (o.tag_class) != "undefined" && o.tag_class !== null)) {
                    c.push(' class="');
                    c.push(Surface.valOut(o.tag_class));
                    c.push('"');
                }
                c.push(' src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ranks/small/", l_strRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="" height="64" width="64" />\n');
            } else {
                if ((o.rank_size == "medium")) {
                    c.push(" <img");
                    if ((typeof (o) != "undefined" && o !== null && typeof (o.tag_class) != "undefined" && o.tag_class !== null)) {
                        c.push(' class="');
                        c.push(Surface.valOut(o.tag_class));
                        c.push('"');
                    }
                    c.push(' src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ranks/medium/", l_strRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="" height="128" width="128" />\n');
                } else {
                    if ((o.rank_size == "large")) {
                        c.push(" <img");
                        if ((typeof (o) != "undefined" && o !== null && typeof (o.tag_class) != "undefined" && o.tag_class !== null)) {
                            c.push(' class="');
                            c.push(Surface.valOut(o.tag_class));
                            c.push('"');
                        }
                        c.push(' src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/bf3/stats/ranks/large/", l_strRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" alt="" height="256" width="256" />\n');
                    }
                }
            }
        }
    } else {
        c.push(" <img ");
        c.push($S.callFunction("common.getWidthAndHeightForStatsImage", "ranks", ((typeof (o) != "undefined" && o !== null && typeof (o.rank_size) != "undefined" && o.rank_size !== null) ? o.rank_size : "medium"), b, kwargs));
        c.push(" ");
        if ((typeof (o) != "undefined" && o !== null && typeof (o.tag_class) != "undefined" && o.tag_class !== null)) {
            c.push(' class="');
            c.push(Surface.valOut(o.tag_class));
            c.push('"');
        }
        c.push(' src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/ranks/", o.rank_size), "/R0"), l_strRank), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" alt="Rank ');
        c.push(Surface.valOut(o.rank));
        c.push('" />\n');
    }
    return c.join("");
};
var block_profile_showsoldierpic = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("showsoldierpic"));
profile.showsoldierpic.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_showsoldierpic;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.showsoldierpic");
    var l_show_picture;
    c.push("\n");
    if (((((typeof (o) != "undefined" && o !== null && typeof (o.picture) != "undefined" && o.picture !== null) && (o.picture != "")) && (o.picture != "None")) && (o.picture != "null"))) {
        l_show_picture = o.picture;
    } else {
        l_show_picture = "bf3-us-assault";
    }
    c.push("\n");
    if ((o.size == "small")) {
        c.push(' <img class="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.addclass) != "undefined" && o.addclass !== null) ? o.addclass : "")));
        c.push('" width="48" height="48" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/kits/s/", l_show_picture), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n');
    } else {
        if ((o.size == "medium")) {
            c.push(' <img class="');
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.addclass) != "undefined" && o.addclass !== null) ? o.addclass : "")));
            c.push('" width="106" height="120" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/kits/m/", l_show_picture), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('"/>\n');
        } else {
            c.push(' <img class="');
            c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.addclass) != "undefined" && o.addclass !== null) ? o.addclass : "")));
            c.push('" width="297" height="336" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.concat(S.Modifier.concat("/public/profile/kits/l/", l_show_picture), ".png"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('"/>\n');
        }
    }
    return c.join("");
};
profile.addTemplate(new Surface.Template("statitemunlockprogression"));
var block_profile_stats = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.stats.block_profileMainContent","titleItem": "profile.stats.block_titleItem","profileSecondaryContent": "profile.stats.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("stats"));
profile.stats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_stats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.stats");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.stats.block_titleItem = new Surface.Block("profile.stats.block_titleItem");
profile.stats.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Stats - ");
    return c.join("");
};
profile.stats.block_profileMainContent = new Surface.Block("profile.stats.block_profileMainContent");
profile.stats.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-stats">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "venicestats")), o, null, kwargs));
    c.push("\n </div>\n ");
    return c.join("");
};
profile.stats.block_profileSecondaryContent = new Surface.Block("profile.stats.block_profileSecondaryContent");
profile.stats.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_statsblazedown = new Surface.BlockConfig("", {"statsContent": "profile.statsblazedown.block_statsContent"});
profile.addTemplate(new Surface.Template("statsblazedown"));
profile.statsblazedown.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_statsblazedown;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.statsblazedown");
    c.push("\n");
    c.push(b.get("statsContent")(o, b, kwargs));
    return c.join("");
};
profile.statsblazedown.block_statsContent = new Surface.Block("profile.statsblazedown.block_statsContent");
profile.statsblazedown.block_statsContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="profile-stats-blaze-down">\n The BF3 Statistics Engine is currently down.\n </div>\n');
    return c.join("");
};
var block_profile_statsfunctions = new Surface.BlockConfig("", {});
profile.addTemplate(new Surface.Template("statsfunctions"));
profile.statsfunctions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_statsfunctions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.statsfunctions");
    c.push("\n");
    return c.join("");
};
profile.function_unlockTextCriteria = function(l_codeNeeded, l_valueNeeded, l_actualValue, l_type, l_scoreFallback, b, kwargs) {
    var o = {};
    var c = [];
    var l_type;
    var l_criteria;
    if ((l_type == "kills")) {
        l_type = "Kills";
    } else {
        l_type = "Score";
    }
    l_criteria = "";
    if ((l_codeNeeded == "rank")) {
        l_criteria = S.Modifier.concat(S.Modifier.concat("Reach rank", " "), l_valueNeeded);
    } else {
        if ((l_codeNeeded == "sc_assault")) {
            l_criteria = S.Modifier.concat(S.Modifier.concat("Assault", " "), l_type);
        } else {
            if ((l_codeNeeded == "sc_engineer")) {
                l_criteria = S.Modifier.concat(S.Modifier.concat("Engineer", " "), l_type);
            } else {
                if ((l_codeNeeded == "sc_support")) {
                    l_criteria = S.Modifier.concat(S.Modifier.concat("Support", " "), l_type);
                } else {
                    if ((l_codeNeeded == "sc_recon")) {
                        l_criteria = S.Modifier.concat(S.Modifier.concat("Recon", " "), l_type);
                    } else {
                        if ((l_codeNeeded == "sc_coop")) {
                            l_criteria = S.Modifier.concat(S.Modifier.concat("CO-OP", " "), l_type);
                        } else {
                            if ((typeof (l_scoreFallback) != "undefined" && l_scoreFallback !== null)) {
                                l_criteria = S.Modifier.concat(S.Modifier.concat((S.translations[l_scoreFallback] || l_scoreFallback), " "), l_type);
                            } else {
                                l_criteria = S.Modifier.concat(S.Modifier.concat(l_codeNeeded, " "), l_type);
                            }
                        }
                    }
                }
            }
        }
        if ((l_actualValue < l_valueNeeded)) {
            l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_actualValue, " / "), l_valueNeeded), (" " + l_criteria));
        } else {
            l_criteria = S.Modifier.concat(S.Modifier.concat(S.Modifier.concat(l_valueNeeded, " / "), l_valueNeeded), (" " + l_criteria));
        }
    }
    return l_criteria;
};
var block_profile_statsitem = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.statsitem.block_statsBottom","statsFetchUrl": "profile.statsitem.block_statsFetchUrl"});
profile.addTemplate(new Surface.Template("statsitem"));
var block_profile_unlocks = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.unlocks.block_profileMainContent","titleItem": "profile.unlocks.block_titleItem","profileSecondaryContent": "profile.unlocks.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("unlocks"));
profile.unlocks.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_unlocks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.unlocks");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.unlocks.block_titleItem = new Surface.Block("profile.unlocks.block_titleItem");
profile.unlocks.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Unlocks - ");
    return c.join("");
};
profile.unlocks.surface_60_12 = new Surface.SingleSurface("profile.unlocks.surface_60_12");
profile.unlocks.surface_60_12.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_unlocks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.unlocks");
    c.push('<surf:container id="');
    c.push("profile-stats-gadgets-surface");
    c.push('">');
    var l_type;
    var l_star;
    var l_for_profile_unlocks_77_24_list;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.data) != "undefined" && o.item.data !== null && typeof (o.item.data.label) != "undefined" && o.item.data.label !== null)) {
        l_type = o.item.info.type;
        c.push(' <div class="profile-stats-awarditem-title">');
        c.push(Surface.valOut(o.item.data.label));
        c.push('</div>\n <div class="profile-stats-gadgetitem-img">\n ');
        c.push(Surface.importTemplate(("common" + ("." + "statsimg")), {"type": l_type,"imageName": o.item.info.name,"size": "medium"}, null, kwargs));
        c.push("\n");
        if (((S.Modifier.count(o.item.info.starImg) > 0) && (o.item.info.starImg != ""))) {
            l_star = S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/stars/small/s_", o.item.info.starImg), ".png");
            c.push(' <div class="profile-stats-gadget-star"><img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_star, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('"/></div>\n');
        }
        c.push(' </div>\n <div class="profile-stats-gadgetitem-description">');
        c.push(Surface.valOut(o.item.data.desc_long));
        c.push("</div>\n");
        if ((o.item.info.isTaken == "False")) {
            c.push(' <div class="profile-stats-awarditem-extra"></div>\n');
        } else {
            c.push(' <div class="profile-stats-gadgetitem-title">STATS</div>\n');
            l_for_profile_unlocks_77_24_list = o.item.info.counters;
            if ((S.Modifier.count(l_for_profile_unlocks_77_24_list) > 0)) {
                for (var l_ctype in l_for_profile_unlocks_77_24_list) {
                    if (!Surface.isValidLoopItem(l_for_profile_unlocks_77_24_list[l_ctype])) {
                        continue;
                    }
                    var l_cvalue = l_for_profile_unlocks_77_24_list[l_ctype];
                    if ((l_ctype != "seconds")) {
                        c.push(' <div class="profile-stats-awarditem-extra">\n <div style="float:left;">');
                        c.push(Surface.valOut(S.Modifier.replace(S.Modifier.upper(l_ctype), "_", " ")));
                        c.push('</div>\n <div style="float:right;">');
                        c.push(Surface.valOut(((typeof (l_cvalue) != "undefined" && l_cvalue !== null) ? l_cvalue : 0)));
                        c.push("</div>\n </div>\n");
                    }
                }
            }
        }
    }
    c.push("\n");
    if (((S.Modifier.count(o.item.info.starImg) > 0) && (o.item.info.starImg != ""))) {
        c.push(' <div class="profile-stats-gadgetitem-star">\n');
        l_star = S.Modifier.concat(S.Modifier.concat("/public/profile/bfbc2/stats/stars/large/s_", o.item.info.starImg), ".png");
        c.push(' <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_star, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('"/>\n <span class="profile-stats-gadget-star-big-text">\n ');
        c.push(Surface.valOut(o.item.info.starName));
        c.push("\n </span>\n </div>\n");
    } else {
        c.push(" TODO: NO STARS GFX\n");
    }
    c.push(" ");
    c.push(Surface.valOut(o.test));
    c.push("\n");
    if (((o.user.userId == o.session.userId) && (o.item.info.isTaken != "True"))) {
        c.push(' <div class="profile-handle-my-target">\n');
        if (S.Modifier.contains(o.myTargets, o.item.info.name)) {
            c.push(' <form class="ajax-form" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/removeStatsTarget/", Surface.urlContext)));
            c.push('" method="post">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input type="hidden" name="redirect" value="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"type": o.item.info.type,"personaId": o.personaId})));
            c.push('" />\n <input type="hidden" name="statName" value="');
            c.push(Surface.valOut(o.item.info.itemName));
            c.push('" />\n <input type="submit" value="Remove this as a target" />\n </form>\n');
        } else {
            c.push(' <form class="ajax-form" action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/addStatsTarget/", Surface.urlContext)));
            c.push('" method="post">\n ');
            c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
            c.push('\n <input type="hidden" name="redirect" value="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"type": o.item.info.type,"personaId": o.personaId})));
            c.push('" />\n <input type="hidden" name="statName" value="');
            c.push(Surface.valOut(o.item.info.itemName));
            c.push('" />\n <input type="submit" value="Add this to my targets" />\n </form>\n');
        }
        c.push(" </div>\n");
    }
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("profile.unlocks", "surface_60_12", "profile-stats-gadgets-surface", o, b);
    return c.join("");
};
profile.unlocks.block_profileMainContent = new Surface.Block("profile.unlocks.block_profileMainContent");
profile.unlocks.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_statsMap;
    var l_stats;
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push(' <div id="profile-persona-stats">\n <div class="profile-stat-links">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId})));
    c.push('">');
    c.push(Surface.valOut("Stats"));
    c.push('</a>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"personaId": o.personaId})));
    c.push('">');
    c.push(Surface.valOut("Awards"));
    c.push('</a>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId})));
    c.push('">');
    c.push(Surface.valOut("Unlocks"));
    c.push('</a>\n </div>\n <div class="profile-stats-gadgets-stats">\n <div class="profile-stats-tabs">\n <div class="profile-stats-gadgets-tabs ');
    if ((o.type == "weapons")) {
        c.push("profile-stats-gadgets-tabs-active");
    }
    c.push('">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "weapons","personaId": o.personaId})));
    c.push('"></form>\n ');
    c.push(Surface.valOut("weapons"));
    c.push(' <span class="profile-stats-awards-tabs-info">(');
    c.push(Surface.valOut(o.personaStats.weapons.numTaken));
    c.push("/");
    c.push(Surface.valOut(o.personaStats.weapons.totalAvailable));
    c.push(')</span>\n </div>\n <div class="profile-stats-tag-right-edge ');
    if ((o.type == "weapons")) {
        c.push("profile-stats-tag-right-edge-active");
    }
    c.push('"></div>\n <div class="profile-stats-gadgets-tabs ');
    if ((o.type == "gadgets")) {
        c.push("profile-stats-gadgets-tabs-active");
    }
    c.push('">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "gadgets","personaId": o.personaId})));
    c.push('"></form>\n ');
    c.push(Surface.valOut("gadgets"));
    c.push(' <span class="profile-stats-awards-tabs-info">(');
    c.push(Surface.valOut(o.personaStats.gadgets.numTaken));
    c.push("/");
    c.push(Surface.valOut(o.personaStats.gadgets.totalAvailable));
    c.push(')</span>\n </div>\n <div class="profile-stats-tag-right-edge ');
    if ((o.type == "gadgets")) {
        c.push("profile-stats-tag-right-edge-active");
    }
    c.push('"></div>\n <div class="profile-stats-gadgets-tabs ');
    if ((o.type == "specializations")) {
        c.push("profile-stats-gadgets-tabs-active");
    }
    c.push('">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "specializations","personaId": o.personaId})));
    c.push('"></form>\n ');
    c.push(Surface.valOut("Specializations"));
    c.push(' <span class="profile-stats-awards-tabs-info">(');
    c.push(Surface.valOut(o.personaStats.specializations.numTaken));
    c.push("/");
    c.push(Surface.valOut(o.personaStats.specializations.totalAvailable));
    c.push(')</span>\n </div>\n <div class="profile-stats-tag-right-edge ');
    if ((o.type == "specializations")) {
        c.push("profile-stats-tag-right-edge-active");
    }
    c.push('"></div>\n <div class="profile-stats-gadgets-tabs">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("#", Surface.urlContext, {"type": "vehicles","personaId": o.personaId})));
    c.push('"></form>\n ');
    c.push(Surface.valOut("Vehicles"));
    c.push(' <span class="profile-stats-awards-tabs-info">(');
    c.push(Surface.valOut(o.personaStats.vehicles.numTaken));
    c.push("/");
    c.push(Surface.valOut(o.personaStats.vehicles.totalAvailable));
    c.push(')</span>\n </div>\n <div class="profile-stats-tag-right-edge ');
    if ((o.type == "vehicles")) {
        c.push("profile-stats-tag-right-edge-active");
    }
    c.push('"></div>\n </div>\n <div class="profile-stats-lastupdated">');
    c.push(Surface.valOut("Last updated"));
    c.push(": ");
    c.push(Surface.importTemplate(("base" + ("." + "ago")), {"datetime": o.personaStats.updatedAt}, null, kwargs));
    c.push('</div>\n <div id="profile-stats-gadgets-stats-content" class="profile-stats-awards-left">\n');
    l_stats = S.Modifier.get(o.kitStats, o.type);
    l_statsMap = o.kitMap;
    if ((o.type == "vehicles")) {
        l_statsMap = o.vehicleMap;
    }
    c.push("\n");
    c.push(Surface.importTemplate(("profile" + ("." + "bfbc2gadgets")), {"kitMap": l_statsMap,"kitScores": o.kitScores,"locale": o.gadgetsLocale,"type": o.type,"stats": l_stats}, null, kwargs));
    c.push('\n </div>\n <div class="profile-stats-awards-right">\n');
    c.push(profile.unlocks.surface_60_12.render({"item": {"data": {"desc_long": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.data) != "undefined" && o.item.data !== null && typeof (o.item.data.desc_long) != "undefined" && o.item.data.desc_long !== null) ? o.item.data.desc_long : null),"label": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.data) != "undefined" && o.item.data !== null && typeof (o.item.data.label) != "undefined" && o.item.data.label !== null) ? o.item.data.label : null)},"info": {"counters": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.counters) != "undefined" && o.item.info.counters !== null) ? o.item.info.counters : null),"isTaken": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.isTaken) != "undefined" && o.item.info.isTaken !== null) ? o.item.info.isTaken : null),"itemName": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.itemName) != "undefined" && o.item.info.itemName !== null) ? o.item.info.itemName : null),"name": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.name) != "undefined" && o.item.info.name !== null) ? o.item.info.name : null),"starImg": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.starImg) != "undefined" && o.item.info.starImg !== null) ? o.item.info.starImg : null),"starName": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.starName) != "undefined" && o.item.info.starName !== null) ? o.item.info.starName : null),"type": ((typeof (o) != "undefined" && o !== null && typeof (o.item) != "undefined" && o.item !== null && typeof (o.item.info) != "undefined" && o.item.info !== null && typeof (o.item.info.type) != "undefined" && o.item.info.type !== null) ? o.item.info.type : null)}},"myTargets": ((typeof (o) != "undefined" && o !== null && typeof (o.myTargets) != "undefined" && o.myTargets !== null) ? o.myTargets : null),"personaId": ((typeof (o) != "undefined" && o !== null && typeof (o.personaId) != "undefined" && o.personaId !== null) ? o.personaId : null),"session": {"userId": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.userId) != "undefined" && l_session.userId !== null) ? l_session.userId : null)},"test": ((typeof (o) != "undefined" && o !== null && typeof (o.test) != "undefined" && o.test !== null) ? o.test : null),"user": {"userId": ((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null && typeof (o.user.userId) != "undefined" && o.user.userId !== null) ? o.user.userId : null)}}, b, kwargs));
    c.push(' </div>\n </div>\n <div style="clear:both;"></div>\n');
    c.push(Surface.valOut(S.Modifier.dump(o.highlightUnlock)));
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.highlightUnlock) != "undefined" && o.highlightUnlock !== null)) {
        c.push(' <script>\n $(document).ready(function() {\n setTimeout(function() {\n $("#');
        c.push(Surface.valOut(o.type));
        c.push("_");
        c.push(Surface.valOut(o.highlightUnlock));
        c.push('").click();\n }, 1000);\n });\n <\/script>\n');
    }
    c.push("\n</div>\n");
    return c.join("");
};
profile.unlocks.block_profileSecondaryContent = new Surface.Block("profile.unlocks.block_profileSecondaryContent");
profile.unlocks.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_vehicle = new Surface.BlockConfig("profile.base", {"profileContent": "profile.vehicle.block_profileContent","profileHeader": "profile.vehicle.block_profileHeader","titleItem": "profile.vehicle.block_titleItem"});
profile.addTemplate(new Surface.Template("vehicle"));
profile.vehicle.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_vehicle;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.vehicle");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.vehicle.block_titleItem = new Surface.Block("profile.vehicle.block_titleItem");
profile.vehicle.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Vehicle stats"));
    c.push(" - ");
    return c.join("");
};
profile.vehicle.block_profileHeader = new Surface.Block("profile.vehicle.block_profileHeader");
profile.vehicle.block_profileHeader.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Vehicle stats"));
    return c.join("");
};
profile.vehicle.block_profileContent = new Surface.Block("profile.vehicle.block_profileContent");
profile.vehicle.block_profileContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-vehicle">\n <h1>');
    c.push(Surface.valOut("Vehicle stats"));
    c.push("</h1>\n <p>Vehicle stats be here</p>\n </div>\n");
    return c.join("");
};
var block_profile_vehicles = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.vehicles.block_profileMainContent","titleItem": "profile.vehicles.block_titleItem","profileSecondaryContent": "profile.vehicles.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("vehicles"));
profile.vehicles.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_vehicles;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.vehicles");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.vehicles.block_titleItem = new Surface.Block("profile.vehicles.block_titleItem");
profile.vehicles.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Vehicles and Specializations"));
    c.push(" - ");
    return c.join("");
};
profile.vehicles.block_profileMainContent = new Surface.Block("profile.vehicles.block_profileMainContent");
profile.vehicles.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-stats">\n');
    if ((o.currentPersonaGame == Surface.globalContext.staticContext.games.BFBC2)) {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "bfbc2vehicles")), o, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.vehicles.block_profileSecondaryContent = new Surface.Block("profile.vehicles.block_profileSecondaryContent");
profile.vehicles.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_veniceawards = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.veniceawards.block_statsBottom","statsFetchUrl": "profile.veniceawards.block_statsFetchUrl","titleItem": "profile.veniceawards.block_titleItem"});
profile.addTemplate(new Surface.Template("veniceawards"));
profile.veniceawards.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_veniceawards;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.veniceawards");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.venicestats", o, b, kwargs);
};
profile.veniceawards.block_titleItem = new Surface.Block("profile.veniceawards.block_titleItem");
profile.veniceawards.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Awards"));
    c.push(" - ");
    return c.join("");
};
profile.veniceawards.block_statsFetchUrl = new Surface.Block("profile.veniceawards.block_statsFetchUrl");
profile.veniceawards.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/awardsPopulateStats/{personaId}/{platformInt}/", Surface.urlContext, {"personaId": o.personaId,"platformInt": o.platformInt})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.veniceawards.block_statsBottom = new Surface.Block("profile.veniceawards.block_statsBottom");
profile.veniceawards.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_venicedogtags = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.venicedogtags.block_statsBottom","statsFetchUrl": "profile.venicedogtags.block_statsFetchUrl","titleItem": "profile.venicedogtags.block_titleItem"});
profile.addTemplate(new Surface.Template("venicedogtags"));
profile.venicedogtags.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_venicedogtags;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.venicedogtags");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.venicestats", o, b, kwargs);
};
profile.venicedogtags.block_titleItem = new Surface.Block("profile.venicedogtags.block_titleItem");
profile.venicedogtags.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Dog tags"));
    c.push(" - ");
    return c.join("");
};
profile.venicedogtags.block_statsFetchUrl = new Surface.Block("profile.venicedogtags.block_statsFetchUrl");
profile.venicedogtags.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/dogtagsPopulateStats/{personaName}/{personaId}/{userId}/{platformInt}/", Surface.urlContext, {"platformInt": o.platformInt,"personaName": o.personaName,"personaId": o.personaId,"userId": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.userId) != "undefined" && o.profileCommon.user.userId !== null) ? o.profileCommon.user.userId : 0)})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.venicedogtags.block_statsBottom = new Surface.Block("profile.venicedogtags.block_statsBottom");
profile.venicedogtags.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_venicestats = new Surface.BlockConfig("base.ajaxindex", {"statsTabs": "profile.venicestats.block_statsTabs","titleComponent": "profile.venicestats.block_titleComponent","statsFetchUrl": "profile.venicestats.block_statsFetchUrl","titleItem": "profile.venicestats.block_titleItem","mainContent": "profile.venicestats.block_mainContent"});
profile.addTemplate(new Surface.Template("venicestats"));
profile.venicestats.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_venicestats;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.venicestats");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
profile.venicestats.block_titleComponent = new Surface.Block("profile.venicestats.block_titleComponent");
profile.venicestats.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(o.personaName));
    c.push(" -");
    return c.join("");
};
profile.venicestats.block_titleItem = new Surface.Block("profile.venicestats.block_titleItem");
profile.venicestats.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Stats & Progression"));
    c.push(" - ");
    return c.join("");
};
profile.venicestats.block_statsTabs = new Surface.Block("profile.venicestats.block_statsTabs");
profile.venicestats.block_statsTabs.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_l_namespace;
    c.push(' <div class="tabs-outer">\n <div class="tabs-container">\n <div class="profile-venicestats-header-soldier">\n <div class="profile-venicestats-header-avatar">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null) ? o.profileCommon.user : false),"gravatarSize": 52}, null, kwargs));
    c.push('\n </div>\n <div class="profile-venicestats-header-soldier-info">\n <div class="profile-venicestats-header-soldier-info-name">\n ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.statsPersona) != "undefined" && o.statsPersona !== null && typeof (o.statsPersona.clanTag) != "undefined" && o.statsPersona.clanTag !== null) ? o.statsPersona.clanTag : false)) {
        c.push('<div style="float:left;margin-right: 5px;">[');
        c.push(Surface.valOut(o.statsPersona.clanTag));
        c.push("]</div> ");
    }
    c.push("<span>");
    c.push(Surface.valOut(o.personaName));
    c.push('</span>\n </div>\n <div class="base-clear"></div>\n <div class="profile-venicestats-header-soldier-info-type">\n <span class="profile-venicestats-header-soldier-info-type-game ');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.gameInt, o.platformInt, 0, b, kwargs)));
    c.push('"></span>');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.profileCommon) != "undefined" && o.profileCommon !== null && typeof (o.profileCommon.user) != "undefined" && o.profileCommon.user !== null && typeof (o.profileCommon.user.username) != "undefined" && o.profileCommon.user.username !== null)) {
        c.push('  <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.profileCommon.user.username})));
        c.push('">');
        c.push(Surface.valOut(o.profileCommon.user.username));
        c.push(Surface.valOut("s profile"));
        c.push("</a>");
    }
    c.push('\n </div>\n </div>\n </div>\n <ul class="tabs">\n');
    l_l_namespace = "PC";
    if ((typeof (o) != "undefined" && o !== null && typeof (o.statsPersona) != "undefined" && o.statsPersona !== null)) {
        l_l_namespace = $S.callFunction("common.namespaceToPlatform", o.statsPersona.namespace, b, kwargs);
    }
    c.push(' <li class="profile-venicestats-tab stats">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/stats/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon stats"></span>');
    c.push(Surface.valOut("Stats & Progression"));
    c.push('</a>\n </li>\n <li class="profile-venicestats-tab weapons">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/weapons/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon weapon"></span>');
    c.push(Surface.valOut("Weapons & Equipment"));
    c.push('</a>\n </li>\n <li class="profile-venicestats-tab vehicles">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/vehicles/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon vehicle"></span>');
    c.push(Surface.valOut("Vehicles"));
    c.push('</a>\n </li>\n <li class="profile-venicestats-tab awards">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/awards/{personaId}/{game}/{platform}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon medal"></span>');
    c.push(Surface.valOut("Awards"));
    c.push('</a>\n </li>\n <li class="profile-venicestats-tab dogtags">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/dogtags/{personaId}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon dogtags"></span>');
    c.push(Surface.valOut("Dog tags"));
    c.push('</a>\n </li>\n <li class="profile-venicestats-tab unlocks">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/soldier/{personaName}/unlocks/{personaId}/{game}/{namespace}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"namespace": l_l_namespace})));
    c.push('"><span class="tab-icon unlock"></span>');
    c.push(Surface.valOut("Upcoming Unlocks"));
    c.push('</a>\n </li>\n </ul>\n <div class="base-clear"></div>\n </div>\n </div>\n ');
    return c.join("");
};
profile.venicestats.block_statsFetchUrl = new Surface.Block("profile.venicestats.block_statsFetchUrl");
profile.venicestats.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/overviewPopulateStats/{personaId}/{personaPicture}/{platformInt}/", Surface.urlContext, {"personaId": o.personaId,"personaPicture": o.personaPicture,"platformInt": o.platformInt})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.venicestats.block_mainContent = new Surface.Block("profile.venicestats.block_mainContent");
profile.venicestats.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.user) != "undefined" && o.user !== null) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) && (l_session.user.userId == o.user.userId))) {
        c.push(" ");
        c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "profile"}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle">\n');
    c.push(b.get("statsTabs")(o, b, kwargs));
    c.push('\n <div class="base-middle-content">\n <div class="profile-venicestats-wrapper">\n');
    c.push(b.get("statsFetchUrl")(o, b, kwargs));
    c.push(" </div>\n </div>\n </div>\n");
    return c.join("");
};
var block_profile_veniceunlocks = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.veniceunlocks.block_statsBottom","statsFetchUrl": "profile.veniceunlocks.block_statsFetchUrl","titleItem": "profile.veniceunlocks.block_titleItem"});
profile.addTemplate(new Surface.Template("veniceunlocks"));
profile.veniceunlocks.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_veniceunlocks;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.veniceunlocks");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.venicestats", o, b, kwargs);
};
profile.veniceunlocks.block_titleItem = new Surface.Block("profile.veniceunlocks.block_titleItem");
profile.veniceunlocks.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Upcoming Unlocks"));
    c.push(" - ");
    return c.join("");
};
profile.veniceunlocks.block_statsFetchUrl = new Surface.Block("profile.veniceunlocks.block_statsFetchUrl");
profile.veniceunlocks.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/upcomingUnlocksPopulateStats/{personaId}/{platformInt}/", Surface.urlContext, {"personaId": o.personaId,"personaName": o.personaName,"platformInt": o.platformInt})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.veniceunlocks.block_statsBottom = new Surface.Block("profile.veniceunlocks.block_statsBottom");
profile.veniceunlocks.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_venicevehicleoverview = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.venicevehicleoverview.block_statsBottom","statsFetchUrl": "profile.venicevehicleoverview.block_statsFetchUrl","titleItem": "profile.venicevehicleoverview.block_titleItem"});
profile.addTemplate(new Surface.Template("venicevehicleoverview"));
profile.venicevehicleoverview.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_venicevehicleoverview;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.venicevehicleoverview");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.venicestats", o, b, kwargs);
};
profile.venicevehicleoverview.block_statsFetchUrl = new Surface.Block("profile.venicevehicleoverview.block_statsFetchUrl");
profile.venicevehicleoverview.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/vehiclesPopulateStats/{personaId}/{platformInt}/", Surface.urlContext, {"personaId": o.personaId,"platformInt": o.platformInt})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.venicevehicleoverview.block_titleItem = new Surface.Block("profile.venicevehicleoverview.block_titleItem");
profile.venicevehicleoverview.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Vehicles and Unlocks"));
    c.push(" - ");
    return c.join("");
};
profile.venicevehicleoverview.block_statsBottom = new Surface.Block("profile.venicevehicleoverview.block_statsBottom");
profile.venicevehicleoverview.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_veniceweapons = new Surface.BlockConfig("profile.venicestats", {"statsBottom": "profile.veniceweapons.block_statsBottom","statsFetchUrl": "profile.veniceweapons.block_statsFetchUrl","titleItem": "profile.veniceweapons.block_titleItem"});
profile.addTemplate(new Surface.Template("veniceweapons"));
profile.veniceweapons.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_veniceweapons;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.veniceweapons");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.venicestats", o, b, kwargs);
};
profile.veniceweapons.block_titleItem = new Surface.Block("profile.veniceweapons.block_titleItem");
profile.veniceweapons.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Weapons and Unlocks - ");
    return c.join("");
};
profile.veniceweapons.block_statsFetchUrl = new Surface.Block("profile.veniceweapons.block_statsFetchUrl");
profile.veniceweapons.block_statsFetchUrl.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-stats-fetch-url" url="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/weaponsPopulateStats/{personaId}/{platformInt}/", Surface.urlContext, {"personaId": o.personaId,"platformInt": o.platformInt})));
    c.push('">\n <div class="loading">\n <div class="common-spinner" data-size="big"></div>\n </div>\n <div class="loading-text">');
    c.push(Surface.valOut("Loading stats"));
    c.push("</div>\n </div>\n");
    return c.join("");
};
profile.veniceweapons.block_statsBottom = new Surface.Block("profile.veniceweapons.block_statsBottom");
profile.veniceweapons.block_statsBottom.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_profile_veteran = new Surface.BlockConfig("profile.base", {"profileMainColumn": "profile.veteran.block_profileMainColumn","titleItem": "profile.veteran.block_titleItem"});
profile.addTemplate(new Surface.Template("veteran"));
var block_profile_view = new Surface.BlockConfig("profile.base", {});
profile.addTemplate(new Surface.Template("view"));
var block_profile_weapons = new Surface.BlockConfig("profile.base", {"profileMainContent": "profile.weapons.block_profileMainContent","titleItem": "profile.weapons.block_titleItem","profileSecondaryContent": "profile.weapons.block_profileSecondaryContent"});
profile.addTemplate(new Surface.Template("weapons"));
profile.weapons.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_profile_weapons;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("profile");
    Surface.Renderer.addUsedTemplate("profile.weapons");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("profile.base", o, b, kwargs);
};
profile.weapons.block_titleItem = new Surface.Block("profile.weapons.block_titleItem");
profile.weapons.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Weapons, Gadgets & Specializations - ");
    return c.join("");
};
profile.weapons.block_profileMainContent = new Surface.Block("profile.weapons.block_profileMainContent");
profile.weapons.block_profileMainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="profile-persona-stats">\n');
    if ((o.currentPersonaGame == Surface.globalContext.staticContext.games.BFBC2)) {
        c.push(" ");
        c.push(Surface.importTemplate(("profile" + ("." + "bfbc2weapons")), o, null, kwargs));
        c.push("\n");
    }
    c.push(" </div>\n");
    return c.join("");
};
profile.weapons.block_profileSecondaryContent = new Surface.Block("profile.weapons.block_profileSecondaryContent");
profile.weapons.block_profileSecondaryContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
if (typeof registration == "undefined") {
    var registration = {};
}
var surf_registration_component = new Surface.Component("registration");
surf_registration_component.extend(registration);
registration = surf_registration_component;
var block_registration_base = new Surface.BlockConfig("base.ajaxindex", {"registration_heading": "registration.base.block_registration_heading","body_id": "registration.base.block_body_id","registration_main": "registration.base.block_registration_main","mainContent": "registration.base.block_mainContent"});
registration.addTemplate(new Surface.Template("base"));
var block_registration_eaid = new Surface.BlockConfig("registration.base", {"bodyClass": "registration.eaid.block_bodyClass","registration_main": "registration.eaid.block_registration_main","titleItem": "registration.eaid.block_titleItem"});
registration.addTemplate(new Surface.Template("eaid"));
registration.eaid.surface_80_13 = new Surface.SingleSurface("registration.eaid.surface_80_13");
registration.eaid.surface_80_13.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_registration_eaid;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("registration");
    Surface.Renderer.addUsedTemplate("registration.eaid");
    c.push('<surf:container id="');
    c.push("usernameAcceptable");
    c.push('">');
    c.push(' <p id="registration-name-not-available" style="');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.usernameAllowed) != "undefined" && o.usernameAllowed !== null) ? o.usernameAllowed : "") == "False")) {
        c.push("display:block;");
    }
    c.push('">');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.reason) != "undefined" && o.reason !== null) ? o.reason : "Name is unavailable")));
    c.push("</p>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("registration.eaid", "surface_80_13", "usernameAcceptable", o, b);
    return c.join("");
};
var block_registration_games = new Surface.BlockConfig("registration.base", {"header_games_class": "registration.games.block_header_games_class","registration_main": "registration.games.block_registration_main"});
registration.addTemplate(new Surface.Template("games"));
var block_registration_gotogame = new Surface.BlockConfig("registration.base", {"titleItem": "registration.gotogame.block_titleItem","mainContent": "registration.gotogame.block_mainContent"});
registration.addTemplate(new Surface.Template("gotogame"));
var block_registration_index = new Surface.BlockConfig("registration.base", {"registration_main": "registration.index.block_registration_main","titleItem": "registration.index.block_titleItem","header_account_class": "registration.index.block_header_account_class"});
registration.addTemplate(new Surface.Template("index"));
var block_registration_login = new Surface.BlockConfig("registration.base", {"bodyClass": "registration.login.block_bodyClass","registration_heading": "registration.login.block_registration_heading","registration_main": "registration.login.block_registration_main","titleItem": "registration.login.block_titleItem","header_account_class": "registration.login.block_header_account_class"});
registration.addTemplate(new Surface.Template("login"));
var block_registration_profile = new Surface.BlockConfig("registration.base", {"bodyClass": "registration.profile.block_bodyClass","registration_heading": "registration.profile.block_registration_heading","registration_main": "registration.profile.block_registration_main","titleItem": "registration.profile.block_titleItem","header_account_class": "registration.profile.block_header_account_class"});
registration.addTemplate(new Surface.Template("profile"));
registration.profile.surface_37_26 = new Surface.SingleSurface("registration.profile.surface_37_26");
registration.profile.surface_37_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_registration_profile;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("registration");
    Surface.Renderer.addUsedTemplate("registration.profile");
    c.push('<surf:container id="');
    c.push("usernameAcceptable");
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.usernameAllowed) != "undefined" && o.usernameAllowed !== null)) {
        if ((o.usernameAllowed == "True")) {
            c.push(' <img width="22" height="22" src=\'');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/icon-success.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push("' alt=\"");
            c.push(Surface.valOut("Name is available"));
            c.push('" style="float: left; margin-right: 5px; margin-left: 10px;" />\n <span style="color:#6c8e47; font-size: 12px; font-weight: bold; float: left; padding-top: 5px;">');
            c.push(Surface.valOut("Name is available"));
            c.push("</span>\n");
        } else {
            c.push(' <img width="22" height="22" src=\'');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/icon-fail.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push("' alt=\"");
            c.push(Surface.valOut("Name is unavailable"));
            c.push('" style="float: left; margin-right: 5px; margin-left: 10px;" />\n <span style="color:#b55e5e; font-size: 12px; font-weight: bold; float: left;padding-top: 5px;">');
            c.push(Surface.valOut(o.reason));
            c.push("</span>\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("registration.profile", "surface_37_26", "usernameAcceptable", o, b);
    return c.join("");
};
registration.profile.surface_70_26 = new Surface.SingleSurface("registration.profile.surface_70_26");
registration.profile.surface_70_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_registration_profile;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("registration");
    Surface.Renderer.addUsedTemplate("registration.profile");
    c.push('<surf:container id="');
    c.push("passwordValidates");
    c.push('">');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.passwordValidates) != "undefined" && o.passwordValidates !== null)) {
        if ((o.passwordValidates == "True")) {
            c.push(" <img src='");
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/icon-success.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('\' alt="Password conforms" style="float:left; margin-right:5px; margin-left:10px;" />\n <span style="color:#6c8e47; font-size: 12px; font-weight: bold; float: left; padding-top: 5px;">');
            c.push(Surface.valOut("Password validates"));
            c.push("</span>\n");
        } else {
            c.push(" <img src='");
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/icon-fail.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('\' alt="Password does not conform" style="float:left; margin-right:5px; margin-left:10px;" />\n <span style="color:#b55e5e; font-size:12px; font-weight:bold; position:relative; left:0px; top:0px; padding-top:5px;">');
            c.push(Surface.valOut(o.reason));
            c.push("</span>\n");
        }
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("registration.profile", "surface_70_26", "passwordValidates", o, b);
    return c.join("");
};
if (typeof runconfig == "undefined") {
    var runconfig = {};
}
var surf_runconfig_component = new Surface.Component("runconfig");
surf_runconfig_component.extend(runconfig);
runconfig = surf_runconfig_component;
var block_runconfig_index = new Surface.BlockConfig("base.index", {"main": "runconfig.index.block_main"});
runconfig.addTemplate(new Surface.Template("index"));
if (typeof search == "undefined") {
    var search = {};
}
var surf_search_component = new Surface.Component("search");
surf_search_component.extend(search);
search = surf_search_component;
var block_search_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "search.index.block_mainContent"});
search.addTemplate(new Surface.Template("index"));
search.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_search_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("search");
    Surface.Renderer.addUsedTemplate("search.index");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
search.index.block_mainContent = new Surface.Block("search.index.block_mainContent");
search.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_search_index_51_22_list;
    var l_map;
    var l_for_search_index_31_22_list;
    var l_for_search_index_74_22_list;
    c.push(' <div class="base-upper">\n </div>\n <div class="base-middle">\n <div class="base-middle-content">\n <div id="search-component">\n <div class="search-top">\n <form action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/search/performSearch/", Surface.urlContext)));
    c.push('" method="post">\n ');
    c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
    c.push('\n <input type="search" name="search-result-new-query" id="search-result-new-query" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) ? o.searchQuery : "Enter your search")));
    c.push('" />\n <input type="submit" value="');
    c.push(Surface.valOut("Search"));
    c.push('" class="base-button-search-small" />\n </form>\n </div>\n <div class="search-top-secondary">\n <div class="search-top-column">\n <h3>');
    c.push(Surface.valOut("Players"));
    c.push(" (");
    c.push(Surface.valOut(S.Modifier.count(o.searchUsers)));
    c.push(')</h3>\n </div>\n <div class="search-top-column">\n <h3>');
    c.push(Surface.valOut("Soldiers"));
    c.push(" (");
    c.push(Surface.valOut(S.Modifier.count(o.searchPersonas)));
    c.push(')</h3>\n </div>\n <div class="search-top-column">\n <h3>');
    c.push(Surface.valOut("Servers"));
    c.push(" (");
    c.push(Surface.valOut(S.Modifier.count(o.searchServers)));
    c.push(')</h3>\n </div>\n </div>\n <div class="search-content">\n <div class="search-result-column">\n');
    l_for_search_index_31_22_list = o.searchUsers;
    if ((S.Modifier.count(l_for_search_index_31_22_list) > 0)) {
        c.push(" <ul>\n");
        for (var l_for_search_index_31_22_key in l_for_search_index_31_22_list) {
            if (!Surface.isValidLoopItem(l_for_search_index_31_22_list[l_for_search_index_31_22_key])) {
                continue;
            }
            var l_searchUser = l_for_search_index_31_22_list[l_for_search_index_31_22_key];
            c.push(' <li>\n <div class="search-result-image">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_searchUser,"gravatarSize": 21}, null, kwargs));
            c.push('\n </div>\n <div class="search-result-data">\n <div class="search-result-main-data">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_searchUser.username})));
            c.push('" >');
            c.push(Surface.valOut(l_searchUser.username));
            c.push("</a>\n </div>\n </div>\n </li>\n");
        }
        c.push(" </ul>\n");
    } else {
        c.push(" <p>");
        c.push(Surface.valOut("No users matched the criteria."));
        c.push("</p>\n");
    }
    c.push(' </div>\n <div class="search-result-column">\n');
    l_for_search_index_51_22_list = o.searchPersonas;
    if ((S.Modifier.count(l_for_search_index_51_22_list) > 0)) {
        c.push(" <ul>\n");
        for (var l_for_search_index_51_22_key in l_for_search_index_51_22_list) {
            if (!Surface.isValidLoopItem(l_for_search_index_51_22_list[l_for_search_index_51_22_key])) {
                continue;
            }
            var l_searchPersona = l_for_search_index_51_22_list[l_for_search_index_51_22_key];
            c.push(' <li>\n <div class="search-result-image">\n ');
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_searchPersona.user,"gravatarSize": 21}, null, kwargs));
            c.push('\n </div>\n <div class="search-result-data">\n <div class="search-result-main-data">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"id": l_searchPersona.userId,"personaId": l_searchPersona.personaId})));
            c.push('" >');
            c.push(Surface.valOut(l_searchPersona.personaName));
            c.push('</a>\n </div>\n <div class="search-result-secondary-data">\n ');
            c.push(Surface.valOut(l_searchPersona.user.username));
            c.push("\n </div>\n </div>\n </li>\n");
        }
        c.push(" </ul>\n");
    } else {
        c.push(" <p>");
        c.push(Surface.valOut("No soldiers matched the criteria."));
        c.push("</p>\n");
    }
    c.push(' </div>\n <div class="search-result-column">\n');
    l_for_search_index_74_22_list = o.searchServers;
    if ((S.Modifier.count(l_for_search_index_74_22_list) > 0)) {
        c.push(" <ul>\n");
        for (var l_for_search_index_74_22_key in l_for_search_index_74_22_list) {
            if (!Surface.isValidLoopItem(l_for_search_index_74_22_list[l_for_search_index_74_22_key])) {
                continue;
            }
            var l_searchServer = l_for_search_index_74_22_list[l_for_search_index_74_22_key];
            l_map = $S.callFunction("serverguide.mapinfo", l_searchServer.game, l_searchServer.map, b, kwargs);
            c.push('\n <li>\n <div class="search-result-image">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_map.imageIcon, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="Map icon" />\n </div>\n <div class="search-result-data">\n <div class="search-result-main-data">\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": l_searchServer.guid,"slug": S.Modifier.slugify(l_searchServer.name)})));
            c.push('">');
            c.push(Surface.valOut(S.Modifier.substring(l_searchServer.name, 0, 60)));
            c.push('</a>\n </div>\n <div class="search-result-secondary-data">\n ');
            c.push(Surface.valOut(l_searchServer.numPlayers));
            c.push("/");
            c.push(Surface.valOut(l_searchServer.maxPlayers));
            c.push(" ");
            c.push(Surface.valOut("Players"));
            c.push("\n </div>\n </div>\n </li>\n");
        }
        c.push(" </ul>\n");
    } else {
        c.push(" <p>");
        c.push(Surface.valOut("No servers matched the criteria."));
        c.push("</p>\n");
    }
    c.push("\n </div>\n </div>\n </div>\n </div>\n </div>\n");
    return c.join("");
};
if (typeof serverguide == "undefined") {
    var serverguide = {};
}
var surf_serverguide_component = new Surface.Component("serverguide");
surf_serverguide_component.extend(serverguide);
serverguide = surf_serverguide_component;
var block_serverguide_base = new Surface.BlockConfig("base.ajaxindex", {"titleComponent": "serverguide.base.block_titleComponent","bodyClass": "serverguide.base.block_bodyClass","serverguideContent": "serverguide.base.block_serverguideContent","mainContent": "serverguide.base.block_mainContent"});
serverguide.addTemplate(new Surface.Template("base"));
serverguide.base.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_base;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.base");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
serverguide.base.block_titleComponent = new Surface.Block("serverguide.base.block_titleComponent");
serverguide.base.block_titleComponent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Server Browser"));
    c.push(" - ");
    return c.join("");
};
serverguide.base.block_bodyClass = new Surface.Block("serverguide.base.block_bodyClass");
serverguide.base.block_bodyClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.serverguideAction) != "undefined" && o.serverguideAction !== null) ? o.serverguideAction : "")));
    c.push("\n");
    return c.join("");
};
serverguide.base.block_serverguideContent = new Surface.Block("serverguide.base.block_serverguideContent");
serverguide.base.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
serverguide.base.block_mainContent = new Surface.Block("serverguide.base.block_mainContent");
serverguide.base.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_session;
    c.push("\n");
    c.push(Surface.importTemplate(("popup" + ("." + "showIntro")), {"section": "serverguide"}, null, kwargs));
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push('\n <div style="margin-bottom:10px;top:0px;" class="base-usermsg-general base-usermsg-');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null && typeof (o.userMessageBox.type) != "undefined" && o.userMessageBox.type !== null) ? o.userMessageBox.type : "information")));
    if (((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null) && o.userMessageBox)) {
        c.push(" base-show");
    }
    c.push('">\n <p>');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.userMessageBox) != "undefined" && o.userMessageBox !== null && typeof (o.userMessageBox.message) != "undefined" && o.userMessageBox.message !== null) ? o.userMessageBox.message : "")));
    c.push('</p>\n </div>\n <div id="main-login-upper" class="base-upper"></div>\n <div class=sitenotification>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.notification) != "undefined" && o.notification !== null) ? o.notification : 0)) {
        c.push(" ");
        c.push(Surface.importTemplate(("main" + ("." + "notice")), {"notification": o.notification}, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div id="serverguide-middle" class="base-middle">\n <div class="tabs-outer">\n <div class="tabs-container">\n <h1 class="base-big-title wfont">');
    c.push(Surface.valOut("Server Browser"));
    c.push('</h1>\n <ul class="tabs">\n <li class="tab-on ');
    if ((o.serverguideTab == "index")) {
        c.push(" active");
    }
    c.push('">\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
    c.push('"><span class="tab-icon servers"></span>');
    c.push(Surface.valOut("Browse"));
    c.push('</a>\n </li>\n <li class="');
    if ((o.serverguideTab == "history")) {
        c.push(" active");
    }
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(" tab-on");
    } else {
        c.push(" tab-off");
    }
    c.push('">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/history/", Surface.urlContext)));
        c.push('"><span class="tab-icon history"></span>');
        c.push(Surface.valOut("History"));
        c.push("</a>\n");
    }
    c.push(' </li>\n <li class="');
    if ((o.serverguideTab == "favourites")) {
        c.push(" active");
    }
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(" tab-on");
    } else {
        c.push(" tab-off");
    }
    c.push('">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(' <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/favourites/", Surface.urlContext)));
        c.push('"><span class="tab-icon favourites"></span>');
        c.push(Surface.valOut("Favourites"));
        c.push("</a>\n");
    }
    c.push(' </li>\n </ul>\n <div class="base-clear"></div>\n <div class="serverguide-tabs-quickmatch-wrapper">\n ');
    c.push(Surface.importTemplate(("serverguide" + ("." + "quickmatchbutton")), o, null, kwargs));
    c.push('\n </div>\n </div>\n </div>\n <div id="serverguide-middle-content">\n <div id="serverguide-content">\n <input type="hidden" id="serverguide-autobrowse-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getAutoBrowseServers/", Surface.urlContext)));
    c.push('" />\n <input type="hidden" id="serverguide-show-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": "%GUID%"})));
    c.push('?json=1" />\n <input type="hidden" id="serverguide-numplayers-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getNumPlayersOnServer/{guid}/", Surface.urlContext, {"guid": "%GUID%"})));
    c.push('" />\n <input type="hidden" id="serverguide-players-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getPlayersOnServer/{guid}/", Surface.urlContext, {"guid": "%GUID%"})));
    c.push('" />\n');
    c.push(b.get("serverguideContent")(o, b, kwargs));
    c.push('\n <div class="base-clear"></div>\n </div>\n <div style="clear:both;"></div>\n </div>\n <div style="clear:both;"></div>\n </div>\n <div style="clear:both;"></div>\n');
    return c.join("");
};
var block_serverguide_bfbc2filters = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("bfbc2filters"));
serverguide.bfbc2filters.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_bfbc2filters;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.bfbc2filters");
    var l_gamemodes;
    var l_gameexpansions;
    c.push("\n");
    c.push("\n");
    l_gameexpansions = [{"key": "bfbc2","label": "Bad Company 2","icon": "/public/serverguide/bfbc2/conquest.png","image": "/public/serverguide/filter_bc2.png"}, {"key": "bfbc2nam","label": "BC2: Vietnam","icon": "/public/serverguide/bfbc2/conquest.png","image": "/public/serverguide/filter_bc2vietnam.png"}];
    c.push("\n");
    l_gamemodes = [{"key": "conquest","label": "Conquest","icon": "/public/serverguide/bfbc2/conquest.png"}, {"key": "rush","label": "Rush","icon": "/public/serverguide/bfbc2/rush.png"}, {"key": "sqrush","label": "Squad Rush","icon": "/public/serverguide/bfbc2/rush.png"}, {"key": "sqdm","label": "Squad DM","icon": "/public/serverguide/bfbc2/deathmatch.png"}];
    c.push('\n<div style="float: left; width:201px;">\n');
    c.push(Surface.importTemplate(("serverguide" + ("." + "filtergameexpansion")), {"filter": o.filter,"gameexpansions": l_gameexpansions}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterlive")), o, null, kwargs));
    c.push("\n</div>\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filtergamemode")), {"filter": o.filter,"gamemodes": l_gamemodes}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterslots")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterextra")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filtermaps")), {"filter": o.filter,"maps": ["MP_006", "MP_005", "MP_004", "MP_009", "MP_003", "MP_001", "MP_012", "MP_002", "MP_007", "MP_008", "MP_SP_002", "MP_SP_005", "BC1_HARVEST_DAY", "BC1_OASIS", "NAM_MP_002", "NAM_MP_003", "NAM_MP_005", "NAM_MP_006", "NAM_MP_007"]}, null, kwargs));
    c.push('\n<div style="clear:both"></div>\n');
    return c.join("");
};
var block_serverguide_expand = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("expand"));
serverguide.expand.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_expand;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.expand");
    var l_for_serverguide_expand_31_30_count;
    var l_friendCount;
    var l_for_serverguide_expand_31_30_hasNext;
    var l_map;
    var l_for_serverguide_expand_52_18_iteration;
    var l_session;
    var l_realm;
    var l_for_serverguide_expand_31_30_list;
    var l_for_serverguide_expand_31_30_iteration;
    var l_MAX;
    var l_for_serverguide_expand_52_18_list;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    if (o.server.online) {
        l_map = $S.callFunction("serverguide.mapinfo", l_realm.game, o.server.map, b, kwargs);
    } else {
        l_map = {"imageBig": "","name": "Offline"};
    }
    c.push('\n<div class="serverguide-expand">\n <div class="serverguide-expand-map">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_map.imageBig, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" alt="');
    c.push(Surface.valOut(l_map.name));
    c.push('" />\n <div></div>\n <h3>');
    c.push(Surface.valOut(l_map.name));
    c.push('</h3>\n </div>\n <div class="serverguide-expand-info">\n <h1>');
    c.push(Surface.valOut(o.server.name));
    c.push('</h1>\n <div class="serverguide-expand-friends">\n <div class="serverguide-expand-friendtext">\n');
    if (!(o.server.online)) {
        c.push(" ");
        c.push(Surface.valOut("Server is offline"));
        c.push("\n");
    } else {
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
            c.push("\n");
            l_friendCount = S.Modifier.count(o.friendsOnServer);
            if ((l_friendCount > 0)) {
                l_MAX = 5;
                c.push(" ");
                c.push(Surface.valOut(l_friendCount));
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.pluralize(l_friendCount, "Friend", "Friends")));
                c.push(" ");
                c.push(Surface.valOut("playing"));
                c.push(":\n");
                l_for_serverguide_expand_31_30_list = o.friendsOnServer;
                l_for_serverguide_expand_31_30_count = S.Modifier.count(l_for_serverguide_expand_31_30_list);
                l_for_serverguide_expand_31_30_iteration = 0;
                if ((S.Modifier.count(l_for_serverguide_expand_31_30_list) > 0)) {
                    for (var l_for_serverguide_expand_31_30_key in l_for_serverguide_expand_31_30_list) {
                        if (!Surface.isValidLoopItem(l_for_serverguide_expand_31_30_list[l_for_serverguide_expand_31_30_key])) {
                            continue;
                        }
                        var l_friend = l_for_serverguide_expand_31_30_list[l_for_serverguide_expand_31_30_key];
                        l_for_serverguide_expand_31_30_iteration = (l_for_serverguide_expand_31_30_iteration + 1);
                        l_for_serverguide_expand_31_30_hasNext = (l_for_serverguide_expand_31_30_iteration < l_for_serverguide_expand_31_30_count);
                        if ((l_for_serverguide_expand_31_30_iteration < (l_MAX + 1))) {
                            c.push(' <a class="base-link" href="#">');
                            c.push(Surface.valOut(l_friend.username));
                            c.push("</a>\n");
                            if (((l_for_serverguide_expand_31_30_iteration == l_MAX) || !(l_for_serverguide_expand_31_30_hasNext))) {
                                c.push("\n");
                            } else {
                                if (((l_for_serverguide_expand_31_30_iteration == (l_friendCount - 1)) && (l_friendCount < (l_MAX + 1)))) {
                                    c.push(" and\n");
                                } else {
                                    c.push(" ,\n");
                                }
                            }
                        } else {
                            if ((l_for_serverguide_expand_31_30_iteration == (l_MAX + 1))) {
                                c.push(" and ");
                                c.push(Surface.valOut((S.Modifier.count(o.friendsOnServer) - l_MAX)));
                                c.push(" more\n");
                            }
                        }
                    }
                }
            } else {
                c.push(" ");
                c.push(Surface.valOut("No friends playing"));
                c.push("\n");
            }
        }
    }
    c.push(' </div>\n <div class="serverguide-expand-friendavatars">\n');
    l_for_serverguide_expand_52_18_list = o.friendsOnServer;
    l_for_serverguide_expand_52_18_iteration = 0;
    if ((S.Modifier.count(l_for_serverguide_expand_52_18_list) > 0)) {
        for (var l_for_serverguide_expand_52_18_key in l_for_serverguide_expand_52_18_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_expand_52_18_list[l_for_serverguide_expand_52_18_key])) {
                continue;
            }
            var l_friend = l_for_serverguide_expand_52_18_list[l_for_serverguide_expand_52_18_key];
            l_for_serverguide_expand_52_18_iteration = (l_for_serverguide_expand_52_18_iteration + 1);
            if ((l_for_serverguide_expand_52_18_iteration < 16)) {
                c.push(' <div class="base-left">');
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend,"gravatarSize": 33}, null, kwargs));
                c.push("</div>\n");
            }
        }
    }
    c.push(' </div>\n </div>\n <div class="serverguide-expand-toolbar">\n <div title="Refresh information" class="serverguide-expand-refresh">\n </div>\n <div title="Toggle this as a favourite server" class="serverguide-expand-favorite');
    if (!(((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
        c.push("-disabled");
    }
    c.push('">\n');
    if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
        c.push(' <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gameserverbookmark/toggleFavourite/", Surface.urlContext)));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="guid" value="');
        c.push(Surface.valOut(o.server.guid));
        c.push('" />\n </form>\n');
    }
    c.push(' </div>\n <div class="serverguide-expand-link">\n <input type="text" value="');
    c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.server.guid, o.server.name, b, kwargs)));
    c.push('" />\n </div>\n <div class="serverguide-expand-go">\n </div>\n </div>\n </div>\n <div style="clear:both;"></div>\n</div>\n');
    return c.join("");
};
var block_serverguide_favourites = new Surface.BlockConfig("serverguide.base", {"serverguideTitle": "serverguide.favourites.block_serverguideTitle","serverguideContent": "serverguide.favourites.block_serverguideContent","titleItem": "serverguide.favourites.block_titleItem"});
serverguide.addTemplate(new Surface.Template("favourites"));
serverguide.favourites.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_favourites;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.favourites");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("serverguide.base", o, b, kwargs);
};
var block_serverguide_favourites_use_12_14 = new Surface.BlockConfig("common.boxwideclean", {"content": "serverguide.favourites._use_12_14_block_content","extraClassInner": "serverguide.favourites._use_12_14_block_extraClassInner","titleContainer": "serverguide.favourites._use_12_14_block_titleContainer","extraClass": "serverguide.favourites._use_12_14_block_extraClass"});
serverguide.favourites.block_titleItem = new Surface.Block("serverguide.favourites.block_titleItem");
serverguide.favourites.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Favourites"));
    c.push(" - ");
    return c.join("");
};
serverguide.favourites.block_serverguideTitle = new Surface.Block("serverguide.favourites.block_serverguideTitle");
serverguide.favourites.block_serverguideTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("Favourites"));
    return c.join("");
};
serverguide.favourites._use_12_14_block_extraClass = new Surface.Block("serverguide.favourites._use_12_14_block_extraClass");
serverguide.favourites._use_12_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverguide-list serverguide-favorites-list");
    return c.join("");
};
serverguide.favourites._use_12_14_block_extraClassInner = new Surface.Block("serverguide.favourites._use_12_14_block_extraClassInner");
serverguide.favourites._use_12_14_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("common-box-nopadding");
    return c.join("");
};
serverguide.favourites._use_12_14_block_titleContainer = new Surface.Block("serverguide.favourites._use_12_14_block_titleContainer");
serverguide.favourites._use_12_14_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
serverguide.favourites._use_12_14_block_content = new Surface.Block("serverguide.favourites._use_12_14_block_content");
serverguide.favourites._use_12_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "serverlist2")), {"servers": o.servers}, null, kwargs));
    c.push('\n <div style="clear:both;"></div>\n');
    return c.join("");
};
serverguide.favourites.block_serverguideContent = new Surface.Block("serverguide.favourites.block_serverguideContent");
serverguide.favourites.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null) && (S.Modifier.count(o.servers) > 0))) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverinfo")), o, null, kwargs));
        c.push('\n <div style="float: left; width:656px;">\n');
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_serverguide_favourites_use_12_14, kwargs));
        c.push(" </div>\n");
    } else {
        c.push(' <div id="serverguide-noservers">\n <h1>');
        c.push(Surface.valOut("You have no favourite servers"));
        c.push("</h1>\n <p>");
        c.push(Surface.valOut('You can add favourite servers for easier access by clicking "Add as Favourite" in the server info'));
        c.push("</p>\n </div>\n");
    }
    c.push("\n");
    return c.join("");
};
var block_serverguide_filterextra = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filterextra"));
serverguide.filterextra.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filterextra;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filterextra");
    c.push('\n<div class="serverguide-filter serverguide-filter-extra">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Preset"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-normal" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "normal")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="normal" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Normal"));
    c.push('</span>\n </div>\n <div id="serverguide-hardcore" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "hardcore")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="hardcore" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Hardcore"));
    c.push('</span>\n </div>\n <input type="hidden" name="gamepresets" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.gamepresets, "|")));
    c.push('" />\n </div>\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Ranked"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-ranked" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.ranked, "On")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="ranked" value="On" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("On"));
    c.push('</span>\n </div>\n <div id="serverguide-ranked" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.ranked, "Off")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="ranked" value="Off" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Off"));
    c.push('</span>\n </div>\n <input type="hidden" name="ranked" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.ranked, "|")));
    c.push('" />\n </div>\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Punkbuster"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-punkbuster" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.punkbuster, "On")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="punkbuster" value="On" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("On"));
    c.push('</span>\n </div>\n <div id="serverguide-punkbuster" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.punkbuster, "Off")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="punkbuster" value="Off" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Off"));
    c.push('</span>\n </div>\n <input type="hidden" name="punkbuster" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.punkbuster, "|")));
    c.push('" />\n </div>\n</div>');
    return c.join("");
};
var block_serverguide_filterextravenice = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filterextravenice"));
serverguide.filterextravenice.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filterextravenice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filterextravenice");
    c.push('\n<div class="serverguide-filter serverguide-filter-extra">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Preset"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-normal" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "normal")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="normal" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Normal"));
    c.push('</span>\n </div>\n <div id="serverguide-hardcore" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "hardcore")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="hardcore" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Hardcore"));
    c.push('</span>\n </div>\n <div id="serverguide-infantry" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "infantry")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="infantry" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Infantry Only"));
    c.push('</span>\n </div>\n <div id="serverguide-custom" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "custom")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="custom" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Custom"));
    c.push('</span>\n </div>\n <input type="hidden" name="gamepresets" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.gamepresets, "|")));
    c.push('" />\n </div>\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Ranked"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-ranked" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.ranked, "On")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="ranked" value="On" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("On"));
    c.push('</span>\n </div>\n <div id="serverguide-ranked" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.ranked, "Off")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="ranked" value="Off" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Off"));
    c.push('</span>\n </div>\n <input type="hidden" name="ranked" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.ranked, "|")));
    c.push('" />\n </div>\n <div class="serverguide-filter-name"><h1>Punkbuster</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-punkbuster" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.punkbuster, "On")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="punkbuster" value="On" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("On"));
    c.push('</span>\n </div>\n <div id="serverguide-punkbuster" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.punkbuster, "Off")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="punkbuster" value="Off" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Off"));
    c.push('</span>\n </div>\n <input type="hidden" name="punkbuster" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.punkbuster, "|")));
    c.push('" />\n </div>\n</div>\n');
    return c.join("");
};
var block_serverguide_filtergameexpansion = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filtergameexpansion"));
serverguide.filtergameexpansion.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filtergameexpansion;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filtergameexpansion");
    var l_for_serverguide_filtergameexpansion_6_10_list;
    c.push('\n<div class="serverguide-filter serverguide-filter-game">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Game"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n');
    l_for_serverguide_filtergameexpansion_6_10_list = o.gameexpansions;
    if ((S.Modifier.count(l_for_serverguide_filtergameexpansion_6_10_list) > 0)) {
        for (var l_for_serverguide_filtergameexpansion_6_10_key in l_for_serverguide_filtergameexpansion_6_10_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_filtergameexpansion_6_10_list[l_for_serverguide_filtergameexpansion_6_10_key])) {
                continue;
            }
            var l_expansion = l_for_serverguide_filtergameexpansion_6_10_list[l_for_serverguide_filtergameexpansion_6_10_key];
            c.push(' <div class="serverguide-selectable serverguide-selectable-game-');
            c.push(Surface.valOut(l_expansion.key));
            c.push(" ");
            if (S.Modifier.contains(o.filter.gameexpansions, l_expansion.key)) {
                c.push("serverguide-include");
            } else {
                c.push("serverguide-exclude");
            }
            c.push('" filter="gameexpansions" value="');
            c.push(Surface.valOut(l_expansion.key));
            c.push('" >\n <div class="ticbox"></div>\n <div class="serverguide-selectable-background-icon">\n <img src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_expansion.image, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut(l_expansion.label));
            c.push('" />\n </div>\n </div>\n');
        }
    }
    c.push('\n </div>\n <input type="hidden" name="gameexpansions" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.gameexpansions, "|")));
    c.push('" />\n <div style="clear:both"></div>\n</div>\n');
    return c.join("");
};
var block_serverguide_filtergamemode = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filtergamemode"));
serverguide.filtergamemode.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filtergamemode;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filtergamemode");
    var l_for_serverguide_filtergamemode_6_10_list;
    c.push('\n<div class="serverguide-filter serverguide-filter-gamemode">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Mode"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n');
    l_for_serverguide_filtergamemode_6_10_list = o.gamemodes;
    if ((S.Modifier.count(l_for_serverguide_filtergamemode_6_10_list) > 0)) {
        for (var l_for_serverguide_filtergamemode_6_10_key in l_for_serverguide_filtergamemode_6_10_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_filtergamemode_6_10_list[l_for_serverguide_filtergamemode_6_10_key])) {
                continue;
            }
            var l_modeinfo = l_for_serverguide_filtergamemode_6_10_list[l_for_serverguide_filtergamemode_6_10_key];
            c.push(' <div class="serverguide-selectable ');
            if (S.Modifier.contains(o.filter.gamemodes, l_modeinfo.key)) {
                c.push("serverguide-include");
            } else {
                c.push("serverguide-exclude");
            }
            c.push('" filter="gamemodes" value="');
            c.push(Surface.valOut(l_modeinfo.key));
            c.push('" >\n <div class="ticbox"></div>\n <span>');
            c.push(Surface.valOut(l_modeinfo.label));
            c.push("</span>\n </div>\n");
        }
    }
    c.push('\n </div>\n <input type="hidden" name="gamemodes" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.gamemodes, "|")));
    c.push('" />\n</div>');
    return c.join("");
};
var block_serverguide_filtergametype = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filtergametype"));
serverguide.filtergametype.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filtergametype;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filtergametype");
    c.push('\n<div class="serverguide-filter serverguide-filter-gametype">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Variant"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-normal" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "normal")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="normal" title="Normal">\n <span>');
    c.push(Surface.valOut("Normal"));
    c.push('</span>\n </div>\n <div id="serverguide-hardcore" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.gamepresets, "hardcore")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="gamepresets" value="hardcore" title="Hardcore">\n <span>');
    c.push(Surface.valOut("Hardcore"));
    c.push('</span>\n </div>\n </div>\n <input type="hidden" name="gamepresets" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.gamepresets, "|")));
    c.push('" />\n</div>');
    return c.join("");
};
var block_serverguide_filterlive = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filterlive"));
serverguide.filterlive.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filterlive;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filterlive");
    c.push('\n<div class="serverguide-filter serverguide-filter-evented">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Live Servers"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div id="serverguide-evented" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.evented, "On")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="evented" value="On" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("On"));
    c.push('</span>\n </div>\n <div id="serverguide-unevented" class="serverguide-selectable ');
    if (S.Modifier.contains(o.filter.evented, "Off")) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="evented" value="Off" >\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Off"));
    c.push('</span>\n </div>\n <input type="hidden" name="evented" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.evented, "|")));
    c.push('" />\n </div>\n <p>');
    c.push(Surface.valOut("See who's playing and join your friends right away on the Live Servers."));
    c.push("</p>\n</div>\n");
    return c.join("");
};
var block_serverguide_filtermaps = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filtermaps"));
serverguide.filtermaps.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filtermaps;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filtermaps");
    var l_info;
    var l_for_serverguide_filtermaps_6_10_iteration;
    var l_realm;
    var l_for_serverguide_filtermaps_6_10_list;
    var l_for_serverguide_filtermaps_9_290_list;
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push('<div class="serverguide-filter serverguide-filter-map">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Maps"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n');
    l_for_serverguide_filtermaps_6_10_list = o.maps;
    l_for_serverguide_filtermaps_6_10_iteration = 0;
    if ((S.Modifier.count(l_for_serverguide_filtermaps_6_10_list) > 0)) {
        for (var l_for_serverguide_filtermaps_6_10_key in l_for_serverguide_filtermaps_6_10_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_filtermaps_6_10_list[l_for_serverguide_filtermaps_6_10_key])) {
                continue;
            }
            var l_mapId = l_for_serverguide_filtermaps_6_10_list[l_for_serverguide_filtermaps_6_10_key];
            l_for_serverguide_filtermaps_6_10_iteration = (l_for_serverguide_filtermaps_6_10_iteration + 1);
            l_info = $S.callFunction("serverguide.mapinfo", l_realm.game, l_mapId, b, kwargs);
            c.push('\n <div id="serverguide-map-');
            c.push(Surface.valOut(l_info.cssId));
            c.push('" class="serverguide-selectable ');
            if (S.Modifier.contains(o.filter.maps, l_mapId)) {
                c.push("serverguide-include");
            } else {
                c.push("serverguide-exclude");
            }
            c.push(" ");
            if ((S.Modifier.count(o.maps) > 10)) {
                c.push("multicolumn ");
                if ((Surface.modulo(l_for_serverguide_filtermaps_6_10_iteration, 2) == 1)) {
                    c.push("first");
                } else {
                    c.push("second");
                }
            }
            c.push('" value="');
            c.push(Surface.valOut(l_mapId));
            c.push('" filter="maps" modes="');
            l_for_serverguide_filtermaps_9_290_list = l_info.modes;
            if ((S.Modifier.count(l_for_serverguide_filtermaps_9_290_list) > 0)) {
                for (var l_for_serverguide_filtermaps_9_290_key in l_for_serverguide_filtermaps_9_290_list) {
                    if (!Surface.isValidLoopItem(l_for_serverguide_filtermaps_9_290_list[l_for_serverguide_filtermaps_9_290_key])) {
                        continue;
                    }
                    var l_mode = l_for_serverguide_filtermaps_9_290_list[l_for_serverguide_filtermaps_9_290_key];
                    c.push(Surface.valOut(l_mode));
                    c.push(" ");
                }
            }
            c.push('">\n <div class="ticbox"></div>\n <img width="30" height="21" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(l_info.imageIcon, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut("Map Icon"));
            c.push('" />\n <span>');
            c.push(Surface.valOut((S.translations[l_info.name] || l_info.name)));
            c.push("</span>\n </div>\n");
        }
    }
    c.push(' </div>\n <input type="hidden" name="maps" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.maps, "|")));
    c.push('" />\n</div>');
    return c.join("");
};
var block_serverguide_filterregion = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filterregion"));
serverguide.filterregion.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filterregion;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filterregion");
    var l_for_serverguide_filterregion_6_10_list;
    c.push('\n<div class="serverguide-filter serverguide-filter-region">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Region"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n');
    l_for_serverguide_filterregion_6_10_list = o.regions;
    if ((S.Modifier.count(l_for_serverguide_filterregion_6_10_list) > 0)) {
        for (var l_for_serverguide_filterregion_6_10_key in l_for_serverguide_filterregion_6_10_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_filterregion_6_10_list[l_for_serverguide_filterregion_6_10_key])) {
                continue;
            }
            var l_region = l_for_serverguide_filterregion_6_10_list[l_for_serverguide_filterregion_6_10_key];
            c.push(' <div class="serverguide-selectable ');
            if (S.Modifier.contains(o.filter.regions, l_region.key)) {
                c.push("serverguide-include");
            } else {
                c.push("serverguide-exclude");
            }
            c.push('" filter="regions" value="');
            c.push(Surface.valOut(l_region.key));
            c.push('" >\n <div class="ticbox"></div>\n <span>');
            c.push(Surface.valOut(l_region.label));
            c.push("</span>\n </div>\n");
        }
    }
    c.push('\n </div>\n <input type="hidden" name="regions" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.regions, "|")));
    c.push('" />\n</div>');
    return c.join("");
};
var block_serverguide_filters = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filters"));
serverguide.filters.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filters;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filters");
    var l_forceExpandedFilter;
    c.push("\n");
    l_forceExpandedFilter = S.Modifier.get(Surface.globalContext, "forceExpandedFilter");
    c.push("\n");
    if (((S.Modifier.count(o.servers) > 0) && (l_forceExpandedFilter != 1))) {
        o.showFilters = 0;
    } else {
        o.showFilters = 1;
    }
    c.push(' <input type="hidden" id="serverguide-autobrowse-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getAutoBrowseServers/", Surface.urlContext)));
    c.push('" />\n <input type="hidden" id="serverguide-show-url" value="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": "%GUID%"})));
    c.push('?json=1" />\n <form id="serverguide-filter-form" ');
    if (!(o.showFilters)) {
        c.push('class="serverguide-filter-form-contracted"');
    }
    c.push(' method="GET" rel="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getFilterCount/", Surface.urlContext)));
    c.push('" action="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
    c.push('">\n <input type="hidden" name="filtered" value="1" />\n <input type="hidden" name="expand" value="');
    c.push(Surface.valOut(o.showFilters));
    c.push('" />\n');
    c.push(Surface.importTemplate(("common" + ("." + "focusbar")), o, block_serverguide_filters_use_17_14, kwargs));
    c.push("\n </form>");
    return c.join("");
};
var block_serverguide_filters_use_17_14 = new Surface.BlockConfig("common.focusbar", {"content": "serverguide.filters._use_17_14_block_content","extraInnerClass": "serverguide.filters._use_17_14_block_extraInnerClass","extraClass": "serverguide.filters._use_17_14_block_extraClass"});
serverguide.filters._use_17_14_block_extraClass = new Surface.Block("serverguide.filters._use_17_14_block_extraClass");
serverguide.filters._use_17_14_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverguide-filter-width");
    return c.join("");
};
serverguide.filters._use_17_14_block_extraInnerClass = new Surface.Block("serverguide.filters._use_17_14_block_extraInnerClass");
serverguide.filters._use_17_14_block_extraInnerClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverguide-filter-inner");
    return c.join("");
};
serverguide.filters.surface_26_26 = new Surface.SingleSurface("serverguide.filters.surface_26_26");
serverguide.filters.surface_26_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filters;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filters");
    c.push('<surf:container id="');
    c.push("serverguide-filterstring");
    c.push('">');
    var l_searchQuery;
    var l_filterlist;
    l_searchQuery = S.Modifier.get(Surface.globalContext, "searchQuery");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.gamemodes) != "undefined" && o.gamemodes !== null)) {
        c.push(' <div class="serverguide-filterlist">\n <div style="float:left;max-width:750px;overflow:hidden;height:39px">\n <em>');
        c.push(Surface.valOut("Filter"));
        c.push(":</em>\n");
        if (l_searchQuery) {
            c.push(' <span class="label">');
            c.push(Surface.valOut("Name"));
            c.push(":</span>\n ");
            c.push(Surface.valOut(l_searchQuery));
            c.push("\n");
        }
        c.push("\n");
        l_filterlist = [];
        if (((typeof (o) != "undefined" && o !== null && typeof (o.gameexpansions) != "undefined" && o.gameexpansions !== null) && (S.Modifier.count(o.gameexpansions) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Game &amp; expansion:</span>");
            if ((S.Modifier.count(o.gameexpansions) == o.maxGameexpansions)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.gameexpansions, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.gamemodes) != "undefined" && o.gamemodes !== null) && (S.Modifier.count(o.gamemodes) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, (("<span class='label'>" + "Mode") + ":</span>"));
            if ((S.Modifier.count(o.gamemodes) == o.maxGamemodes)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.gamemodes, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.regions) != "undefined" && o.regions !== null) && (S.Modifier.count(o.regions) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Region:</span>");
            if ((S.Modifier.count(o.regions) == o.maxRegions)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.regions, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.gamepresets) != "undefined" && o.gamepresets !== null) && (S.Modifier.count(o.gamepresets) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Preset:</span>");
            if ((S.Modifier.count(o.gamepresets) == o.maxPresets)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.gamepresets, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.maps) != "undefined" && o.maps !== null) && (S.Modifier.count(o.maps) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, (("<span class='label'>" + "Maps") + S.Modifier.concat(":</span> ", S.Modifier.count(o.maps))));
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.ranked) != "undefined" && o.ranked !== null) && (o.ranked != ""))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Ranked:</span>");
            if ((S.Modifier.count(o.ranked) == o.maxRanked)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.ranked, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.evented) != "undefined" && o.evented !== null) && (o.evented != ""))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Live:</span>");
            if ((S.Modifier.count(o.evented) == o.maxEvented)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.evented, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.punkbuster) != "undefined" && o.punkbuster !== null) && (o.punkbuster != ""))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>PB:</span>");
            if ((S.Modifier.count(o.punkbuster) == o.maxPunkbuster)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.punkbuster, ", "));
            }
        }
        if (((typeof (o) != "undefined" && o !== null && typeof (o.slots) != "undefined" && o.slots !== null) && (S.Modifier.count(o.slots) > 0))) {
            l_filterlist = S.Modifier.append(l_filterlist, "<span class='label'>Slots:</span>");
            if ((S.Modifier.count(o.slots) == o.maxSlots)) {
                l_filterlist = S.Modifier.append(l_filterlist, "Any");
            } else {
                l_filterlist = S.Modifier.append(l_filterlist, S.Modifier.join(o.slots, ", "));
            }
        }
        c.push("\n");
        if ((S.Modifier.count(l_filterlist) > 0)) {
            c.push(" ");
            c.push(S.Modifier.join(l_filterlist, "   "));
            c.push("\n");
        }
        c.push("\n");
        if (((S.Modifier.count(l_filterlist) == 0) && !(l_searchQuery))) {
            c.push(" ");
            c.push(Surface.valOut("No filter set"));
            c.push(' <div id="serverguide-serverfilter-configure"> <span class="base-link">');
            c.push(Surface.valOut("Set up your favorite maps, game modes and much more."));
            c.push("</span></div>\n");
        }
        c.push('\n </div>\n </div>\n <span class="serverguide-filter-overlay">\n </span>\n');
        if (((S.Modifier.count(l_filterlist) > 0) || l_searchQuery)) {
            c.push(' <span class="serverguide-reset-filter-button" reseturl="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/clearFilter/", Surface.urlContext)));
            c.push('" >');
            c.push(Surface.valOut("Reset filter"));
            c.push("</span>\n");
        }
        c.push(' <span class="serverguide-toggler"></span>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.filters", "surface_26_26", "serverguide-filterstring", o, b);
    return c.join("");
};
serverguide.filters._use_17_14_block_content = new Surface.Block("serverguide.filters._use_17_14_block_content");
serverguide.filters._use_17_14_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_searchQuery;
    var l_realm;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    l_searchQuery = S.Modifier.get(Surface.globalContext, "searchQuery");
    c.push(' <div id="serverguide-filtertoggle" class="serverguide-filtertoggle-');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showFilters) != "undefined" && o.showFilters !== null) ? o.showFilters : 1)) {
        c.push("expanded");
    } else {
        c.push("contracted");
    }
    c.push('">\n');
    c.push(serverguide.filters.surface_26_26.render({"evented": ((typeof (o) != "undefined" && o !== null && typeof (o.evented) != "undefined" && o.evented !== null) ? o.evented : null),"gameexpansions": ((typeof (o) != "undefined" && o !== null && typeof (o.gameexpansions) != "undefined" && o.gameexpansions !== null) ? o.gameexpansions : null),"gamemodes": ((typeof (o) != "undefined" && o !== null && typeof (o.gamemodes) != "undefined" && o.gamemodes !== null) ? o.gamemodes : null),"gamepresets": ((typeof (o) != "undefined" && o !== null && typeof (o.gamepresets) != "undefined" && o.gamepresets !== null) ? o.gamepresets : null),"maps": ((typeof (o) != "undefined" && o !== null && typeof (o.maps) != "undefined" && o.maps !== null) ? o.maps : null),"maxEvented": ((typeof (o) != "undefined" && o !== null && typeof (o.maxEvented) != "undefined" && o.maxEvented !== null) ? o.maxEvented : null),"maxGameexpansions": ((typeof (o) != "undefined" && o !== null && typeof (o.maxGameexpansions) != "undefined" && o.maxGameexpansions !== null) ? o.maxGameexpansions : null),"maxGamemodes": ((typeof (o) != "undefined" && o !== null && typeof (o.maxGamemodes) != "undefined" && o.maxGamemodes !== null) ? o.maxGamemodes : null),"maxPresets": ((typeof (o) != "undefined" && o !== null && typeof (o.maxPresets) != "undefined" && o.maxPresets !== null) ? o.maxPresets : null),"maxPunkbuster": ((typeof (o) != "undefined" && o !== null && typeof (o.maxPunkbuster) != "undefined" && o.maxPunkbuster !== null) ? o.maxPunkbuster : null),"maxRanked": ((typeof (o) != "undefined" && o !== null && typeof (o.maxRanked) != "undefined" && o.maxRanked !== null) ? o.maxRanked : null),"maxRegions": ((typeof (o) != "undefined" && o !== null && typeof (o.maxRegions) != "undefined" && o.maxRegions !== null) ? o.maxRegions : null),"maxSlots": ((typeof (o) != "undefined" && o !== null && typeof (o.maxSlots) != "undefined" && o.maxSlots !== null) ? o.maxSlots : null),"punkbuster": ((typeof (o) != "undefined" && o !== null && typeof (o.punkbuster) != "undefined" && o.punkbuster !== null) ? o.punkbuster : null),"ranked": ((typeof (o) != "undefined" && o !== null && typeof (o.ranked) != "undefined" && o.ranked !== null) ? o.ranked : null),"regions": ((typeof (o) != "undefined" && o !== null && typeof (o.regions) != "undefined" && o.regions !== null) ? o.regions : null),"searchQuery": ((typeof (l_searchQuery) != "undefined" && l_searchQuery !== null) ? l_searchQuery : null),"slots": ((typeof (o) != "undefined" && o !== null && typeof (o.slots) != "undefined" && o.slots !== null) ? o.slots : null)}, b, kwargs));
    c.push('\n <div class="serverguide-header-refresh-button">\n ');
    c.push(Surface.importTemplate(("common" + ("." + "button")), {"title": "Refresh list","type": "submit","style": "medium-grey","extraClass": "serverguide-apply-filter-button"}, null, kwargs));
    c.push('\n </div>\n </div>\n <div id="serverguide-filters" ');
    if (!(o.showFilters)) {
        c.push('style="display:none;"');
    }
    c.push(">\n");
    if ((Surface.globalContext.staticContext.venice && (l_realm.game == Surface.globalContext.staticContext.games.BF3))) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "venicefilters")), o, null, kwargs));
        c.push("\n");
    }
    c.push(' </div>\n <div id="serverguide-apply-filters" ');
    if (!(o.showFilters)) {
        c.push('style="display:none;"');
    }
    c.push(">\n ");
    c.push(Surface.importTemplate(("common" + ("." + "button")), {"title": "Refresh list","type": "submit","style": "medium-grey","extraClass": "serverguide-apply-filter-button"}, null, kwargs));
    c.push('\n <div id="serverguide-filter-count">\n ');
    c.push(Surface.valOut("Found"));
    c.push(' <span class="serverguide-filter-count-amount">1337</span> ');
    c.push(Surface.valOut("servers"));
    c.push('\n </div>\n <div id="serverguide-filter-saved">');
    c.push(Surface.valOut("Filter saved!"));
    c.push("</div>\n </div>\n");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.savedFilter) != "undefined" && o.savedFilter !== null))) {
        c.push(' <input type="hidden" class="common-fetch-serverfilter" value="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getFilter/", Surface.urlContext)));
        c.push('" />\n');
    }
    c.push(" ");
    return c.join("");
};
var block_serverguide_filterslots = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("filterslots"));
serverguide.filterslots.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_filterslots;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.filterslots");
    c.push('\n<div class="serverguide-filter serverguide-filter-slots">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Free slots"));
    c.push('</h1></div>\n <div class="serverguide-filter-selectables">\n <div class="serverguide-selectable ');
    if ((S.Modifier.contains(o.filter.slots, 2) > 0)) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="slots" value="2" iteration="2">\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("1-5"));
    c.push('</span>\n </div>\n <div class="serverguide-selectable ');
    if ((S.Modifier.contains(o.filter.slots, 3) > 0)) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="slots" value="3" iteration="3">\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("5+"));
    c.push('</span>\n </div>\n <div class="serverguide-selectable ');
    if ((S.Modifier.contains(o.filter.slots, 4) > 0)) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="slots" value="4" iteration="4">\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Empty"));
    c.push('</span>\n </div>\n <div class="serverguide-selectable ');
    if ((S.Modifier.contains(o.filter.slots, 1) > 0)) {
        c.push("serverguide-include");
    } else {
        c.push("serverguide-exclude");
    }
    c.push('" filter="slots" value="1" iteration="1">\n <div class="ticbox"></div>\n <span>');
    c.push(Surface.valOut("Full"));
    c.push('</span>\n </div>\n <input type="hidden" name="slots" value="');
    c.push(Surface.valOut(S.Modifier.join(o.filter.slots, "|")));
    c.push('" />\n <div style="clear:both;"></div>\n </div>\n</div>');
    return c.join("");
};
var block_serverguide_friends = new Surface.BlockConfig("serverguide.base", {"serverguideTitle": "serverguide.friends.block_serverguideTitle","serverguideContent": "serverguide.friends.block_serverguideContent","titleItem": "serverguide.friends.block_titleItem"});
serverguide.addTemplate(new Surface.Template("friends"));
serverguide.friends.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_friends;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.friends");
    c.push("\n");
    o.serverguideTab = "friends";
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("serverguide.base", o, b, kwargs);
};
serverguide.friends.block_titleItem = new Surface.Block("serverguide.friends.block_titleItem");
serverguide.friends.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Friends Playing - ");
    return c.join("");
};
serverguide.friends.block_serverguideTitle = new Surface.Block("serverguide.friends.block_serverguideTitle");
serverguide.friends.block_serverguideTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Friends Playing");
    return c.join("");
};
serverguide.friends.block_serverguideContent = new Surface.Block("serverguide.friends.block_serverguideContent");
serverguide.friends.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((S.Modifier.count(o.servers) > 0)) {
        c.push(' <div style="float: left; width:656px;">\n ');
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverlist2")), {"servers": o.servers}, null, kwargs));
        c.push("\n </div>\n ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverinfo")), o, null, kwargs));
        c.push("\n");
    } else {
        c.push(' <div id="serverguide-noservers">\n <h1>');
        c.push(Surface.valOut("Sorry, found no servers with friends"));
        c.push("</h1>\n <p>");
        c.push(Surface.valOut("None of your friends are playing on PC right now"));
        c.push("</p>\n </div>\n");
    }
    return c.join("");
};
var block_serverguide_functions = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("functions"));
serverguide.functions.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_functions;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.functions");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
serverguide.function_maplist = function(l_game, b, kwargs) {
    var o = {};
    var c = [];
    var l_maplist;
    if ((Surface.globalContext.staticContext.games.BFBC2 == l_game)) {
        l_maplist = [];
    } else {
        if ((Surface.globalContext.staticContext.games.BF3 == l_game)) {
            l_maplist = $S.callFunction("common.getMapCodes", b, kwargs);
        } else {
            l_maplist = [];
        }
    }
    return l_maplist;
};
serverguide.function_mapinfo = function(l_game, l_mapId, b, kwargs) {
    var o = {};
    var c = [];
    var l_mapinfo;
    if ((Surface.globalContext.staticContext.games.BFBC2 == l_game)) {
        l_mapinfo = $S.callFunction("serverguide.mapinfobfbc2", l_mapId, b, kwargs);
    } else {
        if ((Surface.globalContext.staticContext.games.BF3 == l_game)) {
            l_mapinfo = $S.callFunction("serverguide.mapinfovenice", l_mapId, b, kwargs);
        } else {
            l_mapinfo = {"imageBig": l_game};
        }
    }
    return l_mapinfo;
};
serverguide.function_mapinfobfbc2 = function(l_mapId, b, kwargs) {
    var o = {};
    var c = [];
    var l_imageBig;
    var l_info;
    var l_imageSmall;
    var l_modes;
    var l_imageJoinflow;
    var l_name;
    var l_cssId;
    var l_imageIcon;
    var l_ids;
    var l_allMaps;
    var l_mapId;
    var l_imageWide;
    l_ids = {"MP_006CQ": "MP_006","MP_009CQ": "MP_009","MP_009GR": "MP_009","MP_012GR": "MP_012","MP_001SR": "MP_001","MP_002SR": "MP_002","MP_003SR": "MP_003","MP_005SR": "MP_005","MP_012SR": "MP_012","MP_004SDM": "MP_004","MP_006SDM": "MP_006","MP_007SDM": "MP_007","MP_009SDM": "MP_009"};
    l_mapId = S.Modifier.get(l_ids, l_mapId, l_mapId);
    l_allMaps = {"MP_001": {"name": "Panama Canal","modes": ["conquest", "sqdm", "sqrush"]},"MP_002": {"name": "Valparaiso","modes": ["rush", "sqrush"]},"MP_003": {"name": "Laguna Alta","modes": ["conquest", "sqrush"]},"MP_004": {"name": "Isla Inocentes","modes": ["sqdm", "rush"]},"MP_005": {"name": "Atacama Desert","modes": ["conquest", "rush", "sqrush"]},"MP_006": {"name": "Arica Harbor","modes": ["conquest", "sqdm", "rush"]},"MP_007": {"name": "White Pass","modes": ["conquest", "sqdm", "rush"]},"MP_008": {"name": "Nelson Bay","modes": ["conquest", "sqdm", "rush"]},"MP_009": {"name": "Laguna Presa","modes": ["conquest", "sqdm", "rush", "sqrush"]},"MP_012": {"name": "Port Valdes","modes": ["conquest", "rush", "sqrush"]},"NAM_MP_002": {"name": "Vantage Point","modes": ["conquest", "sqdm", "rush", "sqrush"]},"NAM_MP_003": {"name": "Hill 137","modes": ["conquest", "sqdm", "rush", "sqrush"]},"NAM_MP_005": {"name": "Temple","modes": ["conquest", "sqdm", "rush", "sqrush"]},"NAM_MP_006": {"name": "Phu Bai Valley","modes": ["conquest", "sqdm", "rush", "sqrush"]},"NAM_MP_007": {"name": "Op. Hastings","modes": ["conquest", "sqdm", "rush", "sqrush"]},"BC1_HARVEST_DAY": {"name": "Harvest Day","modes": ["conquest", "sqdm", "rush", "sqrush"]},"BC1_OASIS": {"name": "Oasis","modes": ["conquest", "sqdm", "rush", "sqrush"]},"MP_SP_002": {"name": "Cold War","modes": ["sqdm", "rush", "sqrush"]},"MP_SE_005": {"name": "Heavy Metal","modes": ["conquest", "sqdm"]}};
    l_name = S.Modifier.get(S.Modifier.get(l_allMaps, l_mapId, "Unknown"), "name", "Unknown");
    if ((l_name == "Unknown")) {
        l_mapId = "MP_012";
    }
    l_modes = S.Modifier.get(S.Modifier.get(l_allMaps, l_mapId, "Unknown"), "modes", "Unknown");
    l_cssId = S.Modifier.lower(S.Modifier.replace(l_name, " ", ""));
    l_imageSmall = S.Modifier.concat(S.Modifier.concat("/public/base/bfbc2/map_images/62x42/", l_mapId), ".jpg");
    l_imageBig = S.Modifier.concat(S.Modifier.concat("/public/base/bfbc2/map_images/146x79/", l_mapId), ".jpg");
    l_imageIcon = S.Modifier.concat(S.Modifier.concat("/public/base/bfbc2/map_images/30x21/", l_mapId), ".jpg");
    l_imageWide = S.Modifier.concat(S.Modifier.concat("/public/base/bfbc2/map_images/300x100/", l_mapId), ".jpg");
    l_imageJoinflow = S.Modifier.concat(S.Modifier.concat("/public/base/bfbc2/map_images/300x100/", l_mapId), ".jpg");
    l_info = {"mapId": l_mapId,"name": l_name,"modes": l_modes,"cssId": l_cssId,"imageIcon": l_imageIcon,"imageSmall": l_imageSmall,"imageBig": l_imageBig,"imageWide": l_imageWide,"imageJoinflow": l_imageJoinflow};
    return l_info;
};
serverguide.function_mapinfovenice = function(l_mapId, b, kwargs) {
    var o = {};
    var c = [];
    var l_imageBig;
    var l_modes;
    var l_imageJoinflow;
    var l_imageIcon;
    var l_name;
    var l_allMaps;
    var l_mapId;
    var l_info;
    var l_imageLargeWide;
    var l_imageSmall;
    var l_cssId;
    var l_mapImage;
    var l_imageWide;
    l_allMaps = $S.callFunction("common.getMapsVenice", b, kwargs);
    l_name = S.Modifier.get(S.Modifier.get(l_allMaps, l_mapId, "Unknown"), "name", "Unknown");
    if ((l_name == "Unknown")) {
        l_mapId = "MP_Subway";
    }
    l_modes = S.Modifier.get(S.Modifier.get(l_allMaps, l_mapId, "Unknown"), "modes", "Unknown");
    l_cssId = S.Modifier.lower(S.Modifier.replace(l_name, " ", ""));
    if ((l_name == "Unknown")) {
        l_mapImage = "unknown";
    } else {
        l_mapImage = S.Modifier.lower(l_mapId);
    }
    l_imageSmall = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/62x42/", l_mapImage), ".jpg");
    l_imageBig = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/146x79/", l_mapImage), ".jpg");
    l_imageIcon = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/30x21/", l_mapImage), ".jpg");
    l_imageWide = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/300x100/", l_mapImage), ".jpg");
    l_imageLargeWide = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/992x164/", l_mapImage), ".jpg");
    l_imageJoinflow = S.Modifier.concat(S.Modifier.concat("/public/base/bf3/map_images/300x100/", l_mapImage), ".jpg");
    l_info = {"mapId": l_mapId,"name": l_name,"modes": l_modes,"cssId": l_cssId,"imageIcon": l_imageIcon,"imageSmall": l_imageSmall,"imageBig": l_imageBig,"imageWide": l_imageWide,"imageLargeWide": l_imageLargeWide,"imageJoinflow": l_imageJoinflow};
    return l_info;
};
serverguide.function_showServerUrl = function(l_guid, l_name, b, kwargs) {
    var o = {};
    var c = [];
    var l_url;
    l_url = S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": l_guid,"slug": S.Modifier.slugify(l_name)});
    return l_url;
};
serverguide.function_showAbsoluteServerUrl = function(l_guid, l_name, b, kwargs) {
    var o = {};
    var c = [];
    var l_url;
    var l_host;
    if ((Surface.globalContext.staticContext.sslStrategy == "all")) {
        l_host = Surface.globalContext.staticContext.currentHostSecure;
    } else {
        l_host = Surface.globalContext.staticContext.currentHost;
    }
    l_url = S.Modifier.concat(l_host, S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": l_guid,"slug": S.Modifier.slugify(l_name)}));
    return l_url;
};
serverguide.function_gameServerPresetString = function(l_gameServerPreset, b, kwargs) {
    var o = {};
    var c = [];
    var l_name;
    l_name = "Normal";
    if ((l_gameServerPreset == 1)) {
    } else {
        if ((l_gameServerPreset == 2)) {
            l_name = "Hardcore";
        } else {
            if ((l_gameServerPreset == 4)) {
                l_name = "Infantry Only";
            } else {
                if ((l_gameServerPreset == 8)) {
                    l_name = "Custom";
                }
            }
        }
    }
    return l_name;
};
var block_serverguide_gameserversettingsbf3 = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("gameserversettingsbf3"));
serverguide.gameserversettingsbf3.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_gameserversettingsbf3;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.gameserversettingsbf3");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return c.join("");
};
serverguide.function_bf3GetGameServerSettingInfo = function(l_filterKey, b, kwargs) {
    var o = {};
    var c = [];
    var l_serverFilterInfo;
    l_serverFilterInfo = {"vhud": {"min": 0,"nameSID": "ID_RSP_HUD","max": 1,"descriptionSID": "ID_RSP_HUD_DESC","default": 1,"ranked": "true","key": "vhud","type": "bool"},"vaba": {"min": 0,"nameSID": "ID_RSP_TEAM_BALANCE","max": 1,"descriptionSID": "ID_RSP_TEAM_BALANCE_DESC","default": 1,"ranked": "true","key": "vaba","type": "bool"},"vbdm": {"min": 1,"nameSID": "ID_RSP_BULLET_MODIFIER","max": 100,"descriptionSID": "ID_RSP_BULLET_MODIFIER_DESC","default": 100,"ranked": "false","key": "vbdm","type": "int"},"vmin": {"min": 0,"nameSID": "ID_RSP_MINIMAP","max": 1,"descriptionSID": "ID_RSP_MINIMAP_DESC","default": 1,"ranked": "true","key": "vmin","type": "bool"},"v3ca": {"min": 0,"nameSID": "ID_RSP_3P_VEHICLE_CAM","max": 1,"descriptionSID": "ID_RSP_3P_VEHICLE_CAM_DESC","default": 1,"ranked": "true","key": "v3ca","type": "bool"},"vvsa": {"min": 0,"nameSID": "ID_RSP_VEHICLES","max": 1,"descriptionSID": "ID_RSP_VEHICLES_DESC","default": 1,"ranked": "true","key": "vvsa","type": "bool"},"vrhe": {"min": 0,"nameSID": "ID_RSP_REGEN_HEALTH","max": 1,"descriptionSID": "ID_RSP_REGEN_HEALTH_DESC","default": 1,"ranked": "true","key": "vrhe","type": "bool"},"vtkc": {"min": 0,"nameSID": "ID_RSP_KICK_AFTER_OF_TK","max": 100,"descriptionSID": "ID_RSP_KICK_AFTER_OF_TK_DESC","default": 5,"ranked": "true","key": "vtkc","type": "int"},"vkca": {"min": 0,"nameSID": "ID_RSP_KILL_CAM","max": 1,"descriptionSID": "ID_RSP_KILL_CAM_DESC","default": 1,"ranked": "true","key": "vkca","type": "bool"},"vmsp": {"min": 0,"nameSID": "ID_RSP_MINIMAP_SPOTTING","max": 1,"descriptionSID": "ID_RSP_MINIMAP_SPOTTING_DESC","default": 1,"ranked": "true","key": "vmsp","type": "bool"},"vshe": {"min": 1,"nameSID": "ID_RSP_PLAYER_HEALTH","max": 100,"descriptionSID": "ID_RSP_PLAYER_HEALTH_DESC","default": 100,"ranked": "false","key": "vshe","type": "int"},"vpmd": {"min": 0,"nameSID": "ID_RSP_PLAYER_MAN_DOWN","max": 100,"descriptionSID": "ID_RSP_PLAYER_MAN_DOWN_DESC","default": 100,"ranked": "false","key": "vpmd","type": "int"},"vffi": {"min": 0,"nameSID": "ID_RSP_FRIENDLY_FIRE","max": 1,"descriptionSID": "ID_RSP_FRIENDLY_FIRE_DESC","default": 0,"ranked": "true","key": "vffi","type": "bool"},"vtkk": {"min": 0,"nameSID": "ID_RSP_BAN_AFTER_OF_TK","max": 100,"descriptionSID": "ID_RSP_BAN_AFTER_OF_TK_DESC","default": 3,"ranked": "true","key": "vtkk","type": "int"},"vnta": {"min": 0,"nameSID": "ID_RSP_NAMETAG","max": 1,"descriptionSID": "ID_RSP_NAMETAG_DESC","default": 1,"ranked": "true","key": "vnta","type": "bool"},"vnit": {"min": 0,"nameSID": "ID_RSP_KICK_IDLE_PLAYER","max": 1000,"descriptionSID": "ID_RSP_KICK_IDLE_PLAYER_DESC","default": 300,"ranked": "true","key": "vnit","type": "int"},"v3sp": {"min": 0,"nameSID": "ID_RSP_3D_SPOTTING","max": 1,"descriptionSID": "ID_RSP_3D_SPOTTING_DESC","default": 1,"ranked": "true","key": "v3sp","type": "bool"},"vprt": {"min": 0,"nameSID": "ID_RSP_PLAYER_RESPAWN","max": 100,"descriptionSID": "ID_RSP_PLAYER_RESPAWN_DESC","default": 100,"ranked": "false","key": "vprt","type": "int"},"osls": {"min": 0,"nameSID": "ID_RSP_SQUAD_LEADER_SPAWN","max": 1,"descriptionSID": "ID_RSP_SQUAD_LEADER_SPAWN_DESC","default": 0,"ranked": "true","key": "osls","type": "bool"}};
    return S.Modifier.get(l_serverFilterInfo, l_filterKey);
};
var block_serverguide_history = new Surface.BlockConfig("serverguide.base", {"serverguideTitle": "serverguide.history.block_serverguideTitle","serverguideContent": "serverguide.history.block_serverguideContent","titleItem": "serverguide.history.block_titleItem"});
serverguide.addTemplate(new Surface.Template("history"));
serverguide.history.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_history;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.history");
    c.push("\n");
    o.serverguideTab = "history";
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("serverguide.base", o, b, kwargs);
};
serverguide.history.block_titleItem = new Surface.Block("serverguide.history.block_titleItem");
serverguide.history.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("History"));
    c.push(" - ");
    return c.join("");
};
serverguide.history.block_serverguideTitle = new Surface.Block("serverguide.history.block_serverguideTitle");
serverguide.history.block_serverguideTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut("History"));
    return c.join("");
};
serverguide.history.block_serverguideContent = new Surface.Block("serverguide.history.block_serverguideContent");
serverguide.history.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((S.Modifier.count(o.servers) > 0)) {
        c.push(' <div style="float: left; width:656px;">\n ');
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverlist2")), o, null, kwargs));
        c.push("\n </div>\n ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverinfo")), o, null, kwargs));
        c.push("\n");
    } else {
        c.push(' <div id="serverguide-noservers">\n <h1>');
        c.push(Surface.valOut("Sorry, found no servers"));
        c.push("</h1>\n <p>");
        c.push(Surface.valOut("Your server history is empty"));
        c.push("</p>\n </div>\n");
    }
    return c.join("");
};
var block_serverguide_index = new Surface.BlockConfig("serverguide.base", {"serverguideTitle": "serverguide.index.block_serverguideTitle","serverguideContent": "serverguide.index.block_serverguideContent"});
serverguide.addTemplate(new Surface.Template("index"));
serverguide.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.index");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("serverguide.base", o, b, kwargs);
};
var block_serverguide_index_use_23_10 = new Surface.BlockConfig("common.boxwideclean", {"content": "serverguide.index._use_23_10_block_content","extraClassInner": "serverguide.index._use_23_10_block_extraClassInner","titleContainer": "serverguide.index._use_23_10_block_titleContainer","extraClass": "serverguide.index._use_23_10_block_extraClass"});
serverguide.index.block_serverguideTitle = new Surface.Block("serverguide.index.block_serverguideTitle");
serverguide.index.block_serverguideTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Server Browser");
    return c.join("");
};
serverguide.index._use_23_10_block_extraClass = new Surface.Block("serverguide.index._use_23_10_block_extraClass");
serverguide.index._use_23_10_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverguide-list");
    return c.join("");
};
serverguide.index._use_23_10_block_extraClassInner = new Surface.Block("serverguide.index._use_23_10_block_extraClassInner");
serverguide.index._use_23_10_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("common-box-nopadding");
    return c.join("");
};
serverguide.index._use_23_10_block_titleContainer = new Surface.Block("serverguide.index._use_23_10_block_titleContainer");
serverguide.index._use_23_10_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
serverguide.index._use_23_10_block_content = new Surface.Block("serverguide.index._use_23_10_block_content");
serverguide.index._use_23_10_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "serverlist2")), {"servers": o.servers}, null, kwargs));
    c.push('\n <div style="clear:both;"></div>\n');
    return c.join("");
};
serverguide.index.block_serverguideContent = new Surface.Block("serverguide.index.block_serverguideContent");
serverguide.index.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    Surface.globalContext.hideFooter = 1;
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showFilter) != "undefined" && o.showFilter !== null) ? o.showFilter : true)) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "filters")), o, null, kwargs));
        c.push("\n");
    } else {
        c.push(' <div style="position: relative;clear:both;padding:16px 0">\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/", Surface.urlContext)));
        c.push('" style="font-weight:normal; font-size:12px;" >');
        c.push(Surface.valOut("View all servers"));
        c.push("</a>\n </div>\n");
    }
    c.push(' <div id="serverguide-loading-list-indicator"><div class="common-spinner" data-size="big"></div></div>\n');
    if ((S.Modifier.count(o.servers) > 0)) {
        c.push('\n <div id="serverguide-autobrowse-on"></div>\n <div id="serverguide-loading-list-indicator"><div class="common-spinner" data-size="big"></div></div>\n <div id="serverguide-list-outer-wrapper">\n');
        c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_serverguide_index_use_23_10, kwargs));
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "serverinfo")), o, null, kwargs));
        c.push('\n <div class="base-clear"></div>\n </div>\n');
    } else {
        c.push(' <div id="serverguide-noservers">\n <h1>');
        c.push(Surface.valOut("Sorry, found no servers"));
        c.push("</h1>\n <p>");
        c.push(Surface.valOut("Change your filter and try again"));
        c.push("</p>\n </div>\n");
    }
    c.push("\n");
    return c.join("");
};
var block_serverguide_joinfriendform = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("joinfriendform"));
serverguide.joinfriendform.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_joinfriendform;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.joinfriendform");
    var l_buttonValue;
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.label) != "undefined" && o.label !== null)) {
        l_buttonValue = o.label;
    } else {
        l_buttonValue = "Join";
    }
    c.push("\n");
    if (((S.Modifier.get(o.presence, "serverGuid") !== null) && (S.Modifier.get(o.presence, "playingMode", 0) == 1))) {
        c.push(' <form class="join-friend ');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.extraClass) != "undefined" && o.extraClass !== null) ? o.extraClass : "")));
        c.push('" method="POST" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"slug": S.Modifier.slugify(S.Modifier.get(o.presence, "serverName")),"_section": $S.callFunction("base.game", S.Modifier.get(o.presence, "game"), b, kwargs),"guid": S.Modifier.get(o.presence, "serverGuid")})));
        c.push('">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="hidden" name="game" value="');
        c.push(Surface.valOut(S.Modifier.get(o.presence, "game")));
        c.push('" />\n <input type="hidden" name="friendPersonaId" value="');
        c.push(Surface.valOut(o.friendPersonaId));
        c.push('" />\n <input type="hidden" name="guid" value="');
        c.push(Surface.valOut(S.Modifier.get(o.presence, "serverGuid")));
        c.push('" />\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.friendJoinButton) != "undefined" && o.friendJoinButton !== null) ? o.friendJoinButton : false)) {
            if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
                c.push(' <div title="Join game" class="bubble-title-left comcenter-interact-playing-dropdown base-button-general-dropdown"></div>\n <div class="join-friend-dropdown base-general-dropdown-area">\n <ul>\n <li>\n <a class="base-no-ajax join-friend-submit-link">\n ');
                c.push(Surface.valOut("Join alone"));
                c.push('\n </a>\n </li>\n <li>\n <a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": S.Modifier.get(o.presence, "serverGuid")})));
                c.push('" class="base-no-ajax base-button-dropdown-joingroup">\n ');
                c.push(Surface.valOut("Join with Party"));
                c.push("\n </a>\n </li>\n </ul>\n </div>\n");
            } else {
                c.push(' <div title="Join game" class="bubble-title-left join-friend-submit-link comcenter-interact-playing"></div>\n');
            }
        } else {
            if (((typeof (o) != "undefined" && o !== null && typeof (o.textButton) != "undefined" && o.textButton !== null) ? o.textButton : false)) {
                c.push(' <a class="join-friend-submit-link">');
                c.push(Surface.valOut(l_buttonValue));
                c.push("</a>\n");
            } else {
                if (((typeof (o) != "undefined" && o !== null && typeof (o.profileButton) != "undefined" && o.profileButton !== null) ? o.profileButton : false)) {
                    c.push(serverguide.joinfriendform.surface_41_13.render({"buttonValue": ((typeof (l_buttonValue) != "undefined" && l_buttonValue !== null) ? l_buttonValue : null),"presence": ((typeof (o) != "undefined" && o !== null && typeof (o.presence) != "undefined" && o.presence !== null) ? o.presence : null)}, b, kwargs));
                } else {
                    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
                        c.push(' <input type="button" class="base-button-arrow-tiny-dropdown base-button-general-dropdown" name="reset" value="');
                        c.push(Surface.valOut(l_buttonValue));
                        c.push('" />\n <div class="base-clear"></div>\n <div class="base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n <li>\n <a class="base-no-ajax join-friend-submit-link">\n ');
                        c.push(Surface.valOut("Join alone"));
                        c.push('\n </a>\n </li>\n <li>\n <a href="');
                        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": S.Modifier.get(o.presence, "serverGuid")})));
                        c.push('" class="base-no-ajax base-button-dropdown-joingroup">\n ');
                        c.push(Surface.valOut("Join with Party"));
                        c.push('\n </a>\n </li>\n </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
                    } else {
                        c.push(' <input type="submit" class="base-button-arrow-tiny" name="submit" value="');
                        c.push(Surface.valOut(l_buttonValue));
                        c.push('" />\n');
                    }
                }
            }
        }
        c.push(" </form>\n");
    }
    return c.join("");
};
serverguide.joinfriendform.surface_41_13 = new Surface.SingleSurface("serverguide.joinfriendform.surface_41_13");
serverguide.joinfriendform.surface_41_13.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_joinfriendform;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.joinfriendform");
    c.push('<surf:container id="');
    c.push("profile-joinbutton");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <input type="button" class="base-button-arrow-large-drop base-button-general-dropdown" name="reset" value="');
        c.push(Surface.valOut(o.buttonValue));
        c.push('" />\n <div class="base-clear"></div>\n <div class="base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n <li>\n <a class="base-no-ajax join-friend-submit-link">\n ');
        c.push(Surface.valOut("Join alone"));
        c.push('\n </a>\n </li>\n <li>\n <a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": S.Modifier.get(o.presence, "serverGuid")})));
        c.push('" class="base-no-ajax base-button-dropdown-joingroup">\n ');
        c.push(Surface.valOut("Join with Party"));
        c.push('\n </a>\n </li>\n </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
    } else {
        c.push(' <input type="submit" class="base-button-arrow-large" name="submit" value="');
        c.push(Surface.valOut(o.buttonValue));
        c.push('" />\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.joinfriendform", "surface_41_13", "profile-joinbutton", o, b);
    return c.join("");
};
var block_serverguide_quickmatchbutton = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("quickmatchbutton"));
serverguide.quickmatchbutton.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_quickmatchbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.quickmatchbutton");
    var l_session;
    var l_realm;
    c.push("\n");
    l_session = S.Modifier.get(Surface.globalContext, "session");
    if ((((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false) && Surface.globalContext.staticContext.venice)) {
        l_realm = S.Modifier.get(Surface.globalContext, "realm");
        c.push("\n");
        if ((l_realm.game == Surface.globalContext.staticContext.games.BF3)) {
            c.push(' <div class="serverguide-joinnow-container-venice" >\n');
            c.push(serverguide.quickmatchbutton.surface_8_6.render({"session": {"isLoggedIn": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : null)}}, b, kwargs));
            c.push(" </div>\n");
        } else {
            c.push(' <div class="base-button-arrow-small serverguide-joinnow gamemanager-launch-quickmatch bubble-title base-quickmatch-serverfilter-menu" data-url="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getJsonFilter/", Surface.urlContext)));
            c.push('" url="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getRandomServer/", Surface.urlContext)));
            c.push('" >\n ');
            c.push(Surface.valOut("Play now"));
            c.push("\n </div>\n");
        }
        c.push("\n");
    }
    c.push("\n");
    return c.join("");
};
serverguide.quickmatchbutton.surface_8_6 = new Surface.SingleSurface("serverguide.quickmatchbutton.surface_8_6");
serverguide.quickmatchbutton.surface_8_6.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_quickmatchbutton;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.quickmatchbutton");
    c.push('<surf:container id="');
    c.push("serverguide-quickmatch-button");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <button class="base-button-arrow-small-drop base-button-general-dropdown base-quickmatch-serverfilter-menu" data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getJsonFilter/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("Quick match"));
        c.push('</button>\n <div class="base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.isLoggedIn) != "undefined" && o.session.isLoggedIn !== null) ? o.session.isLoggedIn : false)) {
            c.push(' <li>\n <a class="base-no-ajax gamemanager-launch-quickmatch"><span class="join-alone"></span>Join Alone</a>\n </li>\n <li>\n <a id="serverguide-groupjoin" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": "quickmatch"})));
            c.push('" class="base-no-ajax base-button-dropdown-joingroup"><span class="join-party"></span>Join with Party</a>\n </li>\n');
        }
        c.push(' </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
    } else {
        c.push(' <button class="base-button-arrow-small gamemanager-launch-quickmatch ');
        if (!(Surface.globalContext.isTouchDevice)) {
            c.push("bubble-title");
        }
        c.push(' base-quickmatch-serverfilter-menu" data-url="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/getJsonFilter/", Surface.urlContext)));
        c.push('" >');
        c.push(Surface.valOut("Quick match"));
        c.push("</button>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.quickmatchbutton", "surface_8_6", "serverguide-quickmatch-button", o, b);
    return c.join("");
};
var block_serverguide_scoreboard = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("scoreboard"));
serverguide.scoreboard.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_scoreboard;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.scoreboard");
    c.push("\n");
    c.push(serverguide.scoreboard.surface_3_2.render({"scoreboard": ((typeof (o) != "undefined" && o !== null && typeof (o.scoreboard) != "undefined" && o.scoreboard !== null) ? o.scoreboard : null)}, b, kwargs));
    return c.join("");
};
serverguide.scoreboard.surface_3_2 = new Surface.SingleSurface("serverguide.scoreboard.surface_3_2");
serverguide.scoreboard.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_scoreboard;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.scoreboard");
    c.push('<surf:container id="');
    c.push("serverguide-scoreboard");
    c.push('">');
    c.push("\n");
    if ((S.Modifier.count(o.scoreboard) > 0)) {
        c.push(" WIP\n");
    } else {
        c.push(" <p>No players online on this server or no plugin installed.</p>\n");
    }
    c.push("\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.scoreboard", "surface_3_2", "serverguide-scoreboard", o, b);
    return c.join("");
};
var block_serverguide_serverinfo = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("serverinfo"));
serverguide.serverinfo.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverinfo");
    c.push('\n<div id="serverguide-show-column-rail" class="base-secondary-right-column">\n<div id="serverguide-show-column">\n');
    c.push(serverguide.serverinfo.surface_4_2.render({"action": ((typeof (o) != "undefined" && o !== null && typeof (o.action) != "undefined" && o.action !== null) ? o.action : null),"favGuids": ((typeof (o) != "undefined" && o !== null && typeof (o.favGuids) != "undefined" && o.favGuids !== null) ? o.favGuids : null),"friends": ((typeof (o) != "undefined" && o !== null && typeof (o.friends) != "undefined" && o.friends !== null) ? o.friends : null),"loading": ((typeof (o) != "undefined" && o !== null && typeof (o.loading) != "undefined" && o.loading !== null) ? o.loading : null),"players": ((typeof (o) != "undefined" && o !== null && typeof (o.players) != "undefined" && o.players !== null) ? o.players : null),"serverinfo": ((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null) ? o.serverinfo : null),"session": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null) ? o.session : null),"team1Score": ((typeof (o) != "undefined" && o !== null && typeof (o.team1Score) != "undefined" && o.team1Score !== null) ? o.team1Score : null),"team2Score": ((typeof (o) != "undefined" && o !== null && typeof (o.team2Score) != "undefined" && o.team2Score !== null) ? o.team2Score : null)}, b, kwargs));
    c.push("\n</div>\n</div>\n");
    return c.join("");
};
var block_serverguide_serverinfo_use_188_22 = new Surface.BlockConfig("common.secondarycontent", {"content": "serverguide.serverinfo._use_188_22_block_content","title": "serverguide.serverinfo._use_188_22_block_title","extraClass": "serverguide.serverinfo._use_188_22_block_extraClass"});
var block_serverguide_serverinfo_use_154_22 = new Surface.BlockConfig("common.secondarycontent", {"content": "serverguide.serverinfo._use_154_22_block_content","title": "serverguide.serverinfo._use_154_22_block_title","extraClass": "serverguide.serverinfo._use_154_22_block_extraClass"});
serverguide.serverinfo.surface_4_2 = new Surface.SingleSurface("serverguide.serverinfo.surface_4_2");
serverguide.serverinfo.surface_29_26 = new Surface.SingleSurface("serverguide.serverinfo.surface_29_26");
serverguide.serverinfo.surface_29_26.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverinfo");
    c.push('<surf:container id="');
    c.push("serverguide-join-button");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <input type="button" class="base-button-arrow-almost-gigantic-dropdown base-button-general-dropdown" name="submit" value="');
        c.push(Surface.valOut("Join server"));
        c.push('" />\n <div class="base-button-dropdown base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.isLoggedIn) != "undefined" && o.session.isLoggedIn !== null) ? o.session.isLoggedIn : false)) {
            c.push(' <li>\n <a class="base-no-ajax join-server-submit-link">\n <span class="join-alone"></span>');
            c.push(Surface.valOut("Join alone"));
            c.push('\n </a>\n </li>\n <li>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": o.serverinfo.guid})));
            c.push('" class="base-no-ajax base-button-dropdown-joingroup"><span class="join-party"></span>');
            c.push(Surface.valOut("Join with Party"));
            c.push("</a>\n </li>\n");
        }
        c.push(' </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
    } else {
        c.push(' <input type="submit" class="base-button-arrow-almost-gigantic" name="submit" value="');
        c.push(Surface.valOut("Join server"));
        c.push('" />\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.serverinfo", "surface_29_26", "serverguide-join-button", o, b);
    return c.join("");
};
serverguide.serverinfo._use_154_22_block_extraClass = new Surface.Block("serverguide.serverinfo._use_154_22_block_extraClass");
serverguide.serverinfo._use_154_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverinfo-players-box");
    return c.join("");
};
serverguide.serverinfo._use_154_22_block_title = new Surface.Block("serverguide.serverinfo._use_154_22_block_title");
serverguide.serverinfo._use_154_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(S.Modifier.count(o.friends)));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(S.Modifier.count(o.friends), "Friend", "Friends")));
    return c.join("");
};
serverguide.serverinfo._use_154_22_block_content = new Surface.Block("serverguide.serverinfo._use_154_22_block_content");
serverguide.serverinfo._use_154_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_serverguide_serverinfo_161_30_iteration;
    var l_for_serverguide_serverinfo_161_30_isOdd;
    var l_for_serverguide_serverinfo_161_30_list;
    var l_for_serverguide_serverinfo_161_30_isEven;
    l_for_serverguide_serverinfo_161_30_list = o.friends;
    l_for_serverguide_serverinfo_161_30_iteration = 0;
    if ((S.Modifier.count(l_for_serverguide_serverinfo_161_30_list) > 0)) {
        for (var l_for_serverguide_serverinfo_161_30_key in l_for_serverguide_serverinfo_161_30_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_serverinfo_161_30_list[l_for_serverguide_serverinfo_161_30_key])) {
                continue;
            }
            var l_friend = l_for_serverguide_serverinfo_161_30_list[l_for_serverguide_serverinfo_161_30_key];
            l_for_serverguide_serverinfo_161_30_iteration = (l_for_serverguide_serverinfo_161_30_iteration + 1);
            l_for_serverguide_serverinfo_161_30_isEven = (Surface.modulo(l_for_serverguide_serverinfo_161_30_iteration, 2) == 0);
            l_for_serverguide_serverinfo_161_30_isOdd = !(l_for_serverguide_serverinfo_161_30_isEven);
            c.push(' <div class="serverguide-show-playerrow serverguide-show-friendrow">\n <span ');
            if (l_for_serverguide_serverinfo_161_30_isOdd) {
                c.push('class="serverguide-show-player-odd"');
            }
            c.push(">\n ");
            c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_friend,"gravatarSize": 22}, null, kwargs));
            c.push('\n <div class="serverguide-show-player">\n <div class="serverguide-show-playerlink-container">\n <a class="serverguide-show-playerlink" href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": l_friend.username})));
            c.push('">');
            c.push(Surface.valOut(l_friend.username));
            c.push("</a>\n </div>\n </div>\n </span>\n </div>\n");
        }
    }
    c.push(' <div style="clear:both;"></div>\n ');
    return c.join("");
};
serverguide.serverinfo._use_188_22_block_extraClass = new Surface.Block("serverguide.serverinfo._use_188_22_block_extraClass");
serverguide.serverinfo._use_188_22_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverinfo-players-box");
    return c.join("");
};
serverguide.serverinfo._use_188_22_block_title = new Surface.Block("serverguide.serverinfo._use_188_22_block_title");
serverguide.serverinfo._use_188_22_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
serverguide.serverinfo._use_188_22_block_content = new Surface.Block("serverguide.serverinfo._use_188_22_block_content");
serverguide.serverinfo._use_188_22_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="serverinfo-players-all-wrapper"></div>\n <div id="serverinfo-players-all-view" class="base-link" data-numPlayers="');
    c.push(Surface.valOut(o.serverinfo.numPlayers));
    c.push('" data="');
    c.push(Surface.valOut(o.serverinfo.guid));
    c.push('">');
    c.push(Surface.valOut("Show"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.serverinfo.numPlayers, "Player", "all players")));
    c.push('</div>\n <div id="serverinfo-players-all-hide" class="base-link">');
    c.push(Surface.valOut("Hide"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.serverinfo.numPlayers, "Player", "all players")));
    c.push("</div>\n");
    return c.join("");
};
serverguide.serverinfo.surface_4_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverinfo;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverinfo");
    c.push('<surf:container id="');
    c.push("serverguide-show");
    c.push('">');
    var l_favGuids;
    var l_isFavorite;
    var l_session;
    var l_mapname;
    var l_mapinfo;
    o.players = o.players;
    c.push('\n <div class="serverguide-');
    if (!(((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null && typeof (o.serverinfo.online) != "undefined" && o.serverinfo.online !== null) ? o.serverinfo.online : false))) {
        c.push("offline");
    } else {
        c.push("online");
    }
    c.push('-info">\n');
    l_session = S.Modifier.get(Surface.globalContext, "session");
    l_favGuids = S.Modifier.get(Surface.globalContext, "favGuids");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.loading) != "undefined" && o.loading !== null) ? o.loading : false)) {
        c.push(' <div class="loading"></div>\n');
    } else {
        if ((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null)) {
            l_isFavorite = S.Modifier.contains(l_favGuids, S.Modifier.get(o.serverinfo, "guid", ""));
            l_mapinfo = $S.callFunction("serverguide.mapinfo", o.serverinfo.game, o.serverinfo.map, b, kwargs);
            l_mapname = S.Modifier.get(l_mapinfo, "name");
            c.push('\n <span class="');
            c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", o.serverinfo.game, o.serverinfo.platform, o.serverinfo.gameExpansion, b, kwargs)));
            c.push('"></span>\n <h1 id="selected-server-name" class="wfont">');
            if (!(Surface.globalContext.staticContext.isOpenBeta)) {
                c.push('<a href="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.serverinfo.guid,"slug": S.Modifier.slugify(o.serverinfo.name)})));
                c.push('">');
            }
            c.push(Surface.valOut(o.serverinfo.name));
            if (!(Surface.globalContext.staticContext.isOpenBeta)) {
                c.push("</a>");
            }
            c.push('</h1>\n <div style="clear: both;"></div>\n');
            if (o.serverinfo.online) {
                c.push(' <div id="serverguide-show-serverjoin">\n <form id="serverguide-show-joinserver-form" class="base-left serverguide-join-server base-no-ajax" method="GET" guid="');
                c.push(Surface.valOut(o.serverinfo.guid));
                c.push('" action="');
                c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.serverinfo.guid,"slug": S.Modifier.slugify(o.serverinfo.name)})));
                c.push('">\n <input type="hidden" name="action" value="');
                c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.action) != "undefined" && o.action !== null) ? o.action : "")));
                c.push('" />\n');
                c.push(serverguide.serverinfo.surface_29_26.render({"serverinfo": ((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null) ? o.serverinfo : null),"session": ((typeof (l_session) != "undefined" && l_session !== null) ? l_session : null)}, b, kwargs));
                c.push(' </form>\n <div class="base-clear"></div>\n </div>\n <input type="text" class="serverguide-server-link-field base-no-ajax" value="');
                c.push(Surface.valOut($S.callFunction("serverguide.showAbsoluteServerUrl", o.serverinfo.guid, o.serverinfo.name, b, kwargs)));
                c.push('" />\n <div style="clear: both;"></div>\n <div id="selected-server-mapimage">\n <img src="');
                c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.get(l_mapinfo, "imageBig"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                c.push('" alt="');
                c.push(Surface.valOut(S.Modifier.get(l_mapinfo, "name")));
                c.push('" width=146 height=79 />\n');
                if ((o.serverinfo.evented && (o.serverinfo.mapMode == 1))) {
                    c.push(' <div class="serverinfo-tickets-container">\n <div class="serverinfo-team-ticks">\n <div class="servinfo-teamname">US</div>\n <div id="serverinfo-score-team1">');
                    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.team1Score) != "undefined" && o.team1Score !== null) ? o.team1Score : "100")));
                    c.push('</div>\n <div id="serverinfo-score-team1-percent">\n ');
                    c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"value": ((typeof (o) != "undefined" && o !== null && typeof (o.team1Score) != "undefined" && o.team1Score !== null) ? o.team1Score : "100"),"max": 200,"bright": true}, null, kwargs));
                    c.push('\n </div>\n </div>\n <div class="serverinfo-team-ticks">\n <div class="servinfo-teamname">RU</div>\n <div id="serverinfo-score-team2">');
                    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.team2Score) != "undefined" && o.team2Score !== null) ? o.team2Score : "50")));
                    c.push('</div>\n <div id="serverinfo-score-team2-percent">\n ');
                    c.push(Surface.importTemplate(("common" + ("." + "percentbar")), {"value": ((typeof (o) != "undefined" && o !== null && typeof (o.team1Score) != "undefined" && o.team1Score !== null) ? o.team1Score : "50"),"max": 200,"bright": true}, null, kwargs));
                    c.push("\n </div>\n </div>\n </div>\n");
                }
                c.push(' </div>\n <div class="selected-server-info-wrapper">\n');
                if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
                    c.push(' <div class="serverguide-add-favorite">\n <form action="');
                    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gameserverbookmark/toggleFavourite/", Surface.urlContext)));
                    c.push('">\n <input type="hidden" name="guid" value="');
                    c.push(Surface.valOut(o.serverinfo.guid));
                    c.push('" />\n </form>\n <div class="serverguide-add-favorite-toggle ');
                    if (l_isFavorite) {
                        c.push("isFavorite");
                    }
                    c.push('" ><span>');
                    if (l_isFavorite) {
                        c.push(Surface.valOut("Favourite"));
                    } else {
                        c.push(Surface.valOut("Add as Favourite"));
                    }
                    c.push('</span></div>\n <div class="serverguide-add-favorite-loading">\n <img width="16" height="16" src="');
                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ajax-loader.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                    c.push('" alt="');
                    c.push(Surface.valOut("Loading..."));
                    c.push('" />\n </div>\n </div>\n <div class="base-clear"></div>\n');
                }
                c.push('\n <ul id="selected-server-info">\n <li>');
                c.push(Surface.valOut(o.serverinfo.numPlayers));
                c.push(" / ");
                c.push(Surface.valOut(o.serverinfo.maxPlayers));
                c.push(" ");
                c.push(Surface.valOut("Players"));
                c.push("</li>\n <li>");
                c.push(Surface.valOut((S.translations[l_mapname] || l_mapname)));
                c.push("</li>\n <li>");
                c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, o.serverinfo.mapMode)));
                c.push('</li>\n </ul>\n </div>\n <div style="clear: both;"></div>\n <div id="serverinfo-more-info">\n <div id="selected-server-settings">\n <h2>');
                c.push(Surface.valOut("Server settings"));
                c.push('</h2>\n <ul id="server-settings">\n <li>');
                c.push(Surface.valOut("Ranked"));
                c.push('<span class="selected-server-setting selected-server-setting-ranked selected-server-setting-ranked-');
                if (o.serverinfo.ranked) {
                    c.push("on");
                } else {
                    c.push("off");
                }
                c.push('">');
                if (o.serverinfo.ranked) {
                    c.push(Surface.valOut("On"));
                } else {
                    c.push(Surface.valOut("Off"));
                }
                c.push("</span></li>\n <li>");
                c.push(Surface.valOut("Preset"));
                c.push('<span class="selected-server-setting selected-server-setting-type selected-server-setting-type-');
                c.push(Surface.valOut(S.Modifier.lower($S.callFunction("serverguide.gameServerPresetString", o.serverinfo.preset, b, kwargs))));
                c.push('">');
                c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", o.serverinfo.preset, b, kwargs)));
                c.push('</span></li>\n <li>Punkbuster<span class="selected-server-setting selected-server-setting-pb selected-server-setting-pb-');
                if (o.serverinfo.punkbuster) {
                    c.push("on");
                } else {
                    c.push("off");
                }
                c.push('">');
                if (o.serverinfo.punkbuster) {
                    c.push(Surface.valOut("On"));
                } else {
                    c.push(Surface.valOut("Off"));
                }
                c.push("</span></li>\n <li>");
                c.push(Surface.valOut("Password"));
                c.push('<span class="selected-server-setting selected-server-setting-password selected-server-setting-password-');
                if (o.serverinfo.hasPassword) {
                    c.push("on");
                } else {
                    c.push("off");
                }
                c.push('">');
                if (o.serverinfo.hasPassword) {
                    c.push(Surface.valOut("On"));
                } else {
                    c.push(Surface.valOut("Off"));
                }
                c.push('</span></li>\n </ul>\n </div>\n </div>\n <div style="clear: both;"></div>\n');
                if (((S.Modifier.count(o.friends) > 0) && ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false))) {
                    c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_serverguide_serverinfo_use_154_22, kwargs));
                    c.push("\n");
                }
                c.push("\n");
                if ((o.serverinfo.numPlayers > 0)) {
                    c.push(' <div style="clear:both;"></div>\n');
                    c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_serverguide_serverinfo_use_188_22, kwargs));
                }
                c.push('\n <div style="clear:both;"></div>\n');
            } else {
                c.push(' <div class="common-secondary-column-line"></div>\n <h1 id="serverinfo-serveroffline">');
                c.push(Surface.valOut("Server is offline"));
                c.push('</h1>\n <div class="common-secondary-column-line"></div>\n');
            }
            c.push(" ");
        }
        c.push("\n");
    }
    c.push("\n </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.serverinfo", "surface_4_2", "serverguide-show", o, b);
    return c.join("");
};
var block_serverguide_serverlist2 = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("serverlist2"));
serverguide.serverlist2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverlist2;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverlist2");
    var l_favGuids;
    var l_for_serverguide_serverlist2_54_6_iteration;
    var l_for_serverguide_serverlist2_54_6_list;
    var l_realm;
    var l_serverss;
    c.push("\n");
    l_favGuids = S.Modifier.get(Surface.globalContext, "favGuids");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push('\n <div class="serverguide-headercells ');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.showFriendFavs) != "undefined" && o.showFriendFavs !== null) ? o.showFriendFavs : false)) {
        c.push("special-column");
    }
    c.push('">\n <div class="serverguide-headercell serverguide-cell-name serverguide-name-header">\n <span>');
    c.push(Surface.valOut("Server"));
    c.push('</span>\n <div class="serverguide-name-header-sorting-extra">');
    c.push(Surface.valOut("Sort by"));
    c.push(': <a class="serverguide-sorting-name serverguide-sorter">');
    c.push(Surface.valOut("Name"));
    c.push('</a>, <a class="serverguide-sorting-mode serverguide-sorter">');
    c.push(Surface.valOut("Mode"));
    c.push('</a>, <a class="serverguide-sorting-map serverguide-sorter">');
    c.push(Surface.valOut("Map"));
    c.push('</a>, <a class="serverguide-sorting-friend serverguide-sorter">');
    c.push(Surface.valOut("Friends"));
    c.push('</a></div>\n </div>\n <div class="serverguide-headersep"></div>\n <div class="serverguide-headercell serverguide-cell-players serverguide-players-header serverguide-sorter serverguide-sorting-players"><span>');
    c.push(Surface.valOut("Players"));
    c.push('</span><div class="serverguide-sort-arrow"></div></div>\n <div class="serverguide-headersep"></div>\n <div class="serverguide-headercell serverguide-cell-ranked serverguide-ranked-header serverguide-sorter serverguide-sorting-ranked" title="');
    c.push(Surface.valOut("Ranking"));
    c.push('">&nbsp;<div class="serverguide-sort-arrow"></div></div>\n <div class="serverguide-headercell serverguide-cell-pb serverguide-pb-header serverguide-sorter serverguide-sorting-pb" title="Punkbuster">&nbsp;<div class="serverguide-sort-arrow"></div></div>\n <div class="serverguide-headercell serverguide-cell-type serverguide-type-header serverguide-sorter serverguide-sorting-type" title="');
    c.push(Surface.valOut("Preset"));
    c.push('">&nbsp;<div class="serverguide-sort-arrow"></div></div>\n <div class="serverguide-headersep"></div>\n <div class="serverguide-headercell serverguide-cell-ping serverguide-sorter serverguide-sorting-ping"><span>');
    c.push(Surface.valOut("Ping"));
    c.push('</span><div class="serverguide-sort-arrow"></div></div>\n <div class="serverguide-cellend"></div>\n </div>\n<div id="serverguide-result">\n <div id="serverguide-listcontainer">\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.serverguideTab) != "undefined" && o.serverguideTab !== null) && (o.serverguideTab != "history"))) {
        l_serverss = S.Modifier.sort(o.servers, "favoriteByNumFriends", "desc");
    } else {
        l_serverss = o.servers;
    }
    l_for_serverguide_serverlist2_54_6_list = l_serverss;
    l_for_serverguide_serverlist2_54_6_iteration = 0;
    if ((S.Modifier.count(l_for_serverguide_serverlist2_54_6_list) > 0)) {
        for (var l_idx in l_for_serverguide_serverlist2_54_6_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_serverlist2_54_6_list[l_idx])) {
                continue;
            }
            var l_server = l_for_serverguide_serverlist2_54_6_list[l_idx];
            l_for_serverguide_serverlist2_54_6_iteration = (l_for_serverguide_serverlist2_54_6_iteration + 1);
            o.expand = ((typeof (o) != "undefined" && o !== null && typeof (o.startExpanded) != "undefined" && o.startExpanded !== null) ? o.startExpanded : 0);
            o.ping = "-";
            o.isFavorite = S.Modifier.contains(l_favGuids, l_server.guid);
            o.friendsOnServer = S.Modifier.get(((typeof (o) != "undefined" && o !== null && typeof (o.friendGuids) != "undefined" && o.friendGuids !== null) ? o.friendGuids : []), l_server.guid, []);
            o.formEnabled = 0;
            o.mapinfo = $S.callFunction("serverguide.mapinfo", l_realm.game, l_server.map, b, kwargs);
            o.idx = (S.Modifier.toint(l_idx) + ((typeof (o) != "undefined" && o !== null && typeof (o.idxOffset) != "undefined" && o.idxOffset !== null) ? o.idxOffset : 0));
            o.iteration = (l_for_serverguide_serverlist2_54_6_iteration + ((typeof (o) != "undefined" && o !== null && typeof (o.idxOffset) != "undefined" && o.idxOffset !== null) ? o.idxOffset : 0));
            o.favoriteByNumFriends = S.Modifier.get(l_server, "favoriteByNumFriends", false);
            c.push("\n");
            o.server = l_server;
            c.push("\n");
            c.push(Surface.importTemplate(("serverguide" + ("." + "serverrow")), o, null, kwargs));
            c.push("\n");
        }
    }
    c.push(" </div>\n</div>\n");
    return c.join("");
};
var block_serverguide_serverplayerlist = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("serverplayerlist"));
serverguide.serverplayerlist.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverplayerlist;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverplayerlist");
    var l_for_serverguide_serverplayerlist_5_6_list;
    var l_usedSlots;
    var l_for_serverguide_serverplayerlist_28_6_iteration;
    var l_for_serverguide_serverplayerlist_5_6_iteration;
    var l_for_serverguide_serverplayerlist_28_6_list;
    var l_for_serverguide_serverplayerlist_5_6_isOdd;
    var l_for_serverguide_serverplayerlist_28_6_isOdd;
    var l_friendIds;
    var l_for_serverguide_serverplayerlist_28_6_isEven;
    var l_for_serverguide_serverplayerlist_5_6_isEven;
    c.push("\n");
    l_friendIds = S.Modifier.get(Surface.globalContext, "friendIds");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.players) != "undefined" && o.players !== null)) {
        l_for_serverguide_serverplayerlist_5_6_list = ((typeof (o) != "undefined" && o !== null && typeof (o.players) != "undefined" && o.players !== null) ? o.players : []);
        l_for_serverguide_serverplayerlist_5_6_iteration = 0;
        if ((S.Modifier.count(l_for_serverguide_serverplayerlist_5_6_list) > 0)) {
            for (var l_for_serverguide_serverplayerlist_5_6_key in l_for_serverguide_serverplayerlist_5_6_list) {
                if (!Surface.isValidLoopItem(l_for_serverguide_serverplayerlist_5_6_list[l_for_serverguide_serverplayerlist_5_6_key])) {
                    continue;
                }
                var l_player = l_for_serverguide_serverplayerlist_5_6_list[l_for_serverguide_serverplayerlist_5_6_key];
                l_for_serverguide_serverplayerlist_5_6_iteration = (l_for_serverguide_serverplayerlist_5_6_iteration + 1);
                l_for_serverguide_serverplayerlist_5_6_isEven = (Surface.modulo(l_for_serverguide_serverplayerlist_5_6_iteration, 2) == 0);
                l_for_serverguide_serverplayerlist_5_6_isOdd = !(l_for_serverguide_serverplayerlist_5_6_isEven);
                c.push(' <div class="serverguide-show-playerrow ');
                if (S.Modifier.contains(l_friendIds, ((typeof (l_player) != "undefined" && l_player !== null && typeof (l_player.userId) != "undefined" && l_player.userId !== null) ? l_player.userId : 0))) {
                    c.push("myfriend");
                }
                c.push('">\n <span ');
                if (l_for_serverguide_serverplayerlist_5_6_isOdd) {
                    c.push('class="serverguide-show-player-odd"');
                }
                c.push(">\n ");
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": l_player.persona.user,"gravatarSize": 22}, null, kwargs));
                c.push('\n <div class="serverguide-show-player">\n ');
                c.push(Surface.importTemplate(("common" + ("." + "playername")), {"persona": l_player.persona,"user": l_player.persona.user}, null, kwargs));
                c.push('\n </div>\n <div class="serverguide-show-score-container">\n <div class="serverguide-player-score-');
                c.push(Surface.valOut(l_player.persona.personaId));
                c.push('"></div>\n </div>\n </span>\n </div>\n');
            }
        }
        c.push("\n");
        l_usedSlots = (((typeof (o) != "undefined" && o !== null && typeof (o.numPlayers) != "undefined" && o.numPlayers !== null) ? o.numPlayers : 0) - 1);
        l_for_serverguide_serverplayerlist_28_6_list = S.Modifier.to(S.Modifier.count(((typeof (o) != "undefined" && o !== null && typeof (o.players) != "undefined" && o.players !== null) ? o.players : [])), l_usedSlots);
        l_for_serverguide_serverplayerlist_28_6_iteration = 0;
        if ((S.Modifier.count(l_for_serverguide_serverplayerlist_28_6_list) > 0)) {
            for (var l_for_serverguide_serverplayerlist_28_6_key in l_for_serverguide_serverplayerlist_28_6_list) {
                if (!Surface.isValidLoopItem(l_for_serverguide_serverplayerlist_28_6_list[l_for_serverguide_serverplayerlist_28_6_key])) {
                    continue;
                }
                var l_n = l_for_serverguide_serverplayerlist_28_6_list[l_for_serverguide_serverplayerlist_28_6_key];
                l_for_serverguide_serverplayerlist_28_6_iteration = (l_for_serverguide_serverplayerlist_28_6_iteration + 1);
                l_for_serverguide_serverplayerlist_28_6_isEven = (Surface.modulo(l_for_serverguide_serverplayerlist_28_6_iteration, 2) == 0);
                l_for_serverguide_serverplayerlist_28_6_isOdd = !(l_for_serverguide_serverplayerlist_28_6_isEven);
                c.push(' <div class="serverguide-show-playerrow">\n <span ');
                if (l_for_serverguide_serverplayerlist_28_6_isOdd) {
                    c.push('class="serverguide-show-player-odd"');
                }
                c.push(">\n ");
                c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 22}, null, kwargs));
                c.push('\n <div class="serverguide-show-player">\n <div class="serverguide-show-player-persona shaded unknown">');
                c.push(Surface.valOut("Unknown"));
                c.push('</div>\n </div>\n <div class="serverguide-show-score-container">\n <div class="serverguide-player-score--"></div>\n </div>\n </span>\n </div>\n');
            }
        }
    } else {
        c.push(' <div class="common-spinner" data-size="big"></div>\n');
    }
    c.push('\n<div style="clear:both;"></div>\n');
    return c.join("");
};
var block_serverguide_serverrow = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("serverrow"));
serverguide.serverrow.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverrow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverrow");
    c.push("\n");
    c.push(serverguide.serverrow.surface_3_2.render({"expand": ((typeof (o) != "undefined" && o !== null && typeof (o.expand) != "undefined" && o.expand !== null) ? o.expand : null),"friendsOnServer": ((typeof (o) != "undefined" && o !== null && typeof (o.friendsOnServer) != "undefined" && o.friendsOnServer !== null) ? o.friendsOnServer : null),"idx": ((typeof (o) != "undefined" && o !== null && typeof (o.idx) != "undefined" && o.idx !== null) ? o.idx : null),"iteration": ((typeof (o) != "undefined" && o !== null && typeof (o.iteration) != "undefined" && o.iteration !== null) ? o.iteration : null),"mapinfo": {"imageSmall": ((typeof (o) != "undefined" && o !== null && typeof (o.mapinfo) != "undefined" && o.mapinfo !== null && typeof (o.mapinfo.imageSmall) != "undefined" && o.mapinfo.imageSmall !== null) ? o.mapinfo.imageSmall : null),"name": ((typeof (o) != "undefined" && o !== null && typeof (o.mapinfo) != "undefined" && o.mapinfo !== null && typeof (o.mapinfo.name) != "undefined" && o.mapinfo.name !== null) ? o.mapinfo.name : null)},"ping": ((typeof (o) != "undefined" && o !== null && typeof (o.ping) != "undefined" && o.ping !== null) ? o.ping : null),"server": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null) ? o.server : null),"serverinfo": {"preset": ((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null && typeof (o.serverinfo.preset) != "undefined" && o.serverinfo.preset !== null) ? o.serverinfo.preset : null)}}, b, kwargs));
    return c.join("");
};
serverguide.serverrow.surface_3_2 = new Surface.SingleSurface("serverguide.serverrow.surface_3_2");
serverguide.serverrow.surface_3_2.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serverrow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serverrow");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("serverguide-server-", o.idx));
    c.push('">');
    var l_numFriendsOnServer;
    c.push(' <div rel="');
    c.push(Surface.valOut(o.server.guid));
    c.push('" class="serverguide-surface-finder"></div>\n');
    l_numFriendsOnServer = S.Modifier.count(o.friendsOnServer);
    c.push(' <div class="serverguide-bodycells ');
    if (o.server.evented) {
        c.push("eaServer");
    }
    c.push(" ");
    if (!(o.server.online)) {
        c.push("offline");
    }
    c.push(" ");
    if (!(o.server.online)) {
        c.push(" serverguide-server-offline");
    }
    c.push(" ");
    if ((o.server.online && (l_numFriendsOnServer > 0))) {
        c.push("serverguide-server-friends-playing");
    }
    c.push('" guid="');
    c.push(Surface.valOut(o.server.guid));
    c.push('" ip="');
    c.push(Surface.valOut(o.server.ip));
    c.push('" idx="');
    c.push(Surface.valOut((o.iteration - 1)));
    c.push('">\n <div class="serverguide-bodycell serverguide-cell-expansion serverguide-cell-noborder" title="Game or expansion">\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSS", o.server.game, o.server.platform, o.server.gameExpansion, b, kwargs)));
    c.push('"></span>\n <span class="');
    c.push(Surface.valOut($S.callFunction("common.getGameIconCSSBright", o.server.game, o.server.platform, o.server.gameExpansion, b, kwargs)));
    c.push('"></span>\n </div>\n');
    if (o.server.online) {
        c.push('\n <div class="serverguide-bodycell serverguide-cell-name">\n <img src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(o.mapinfo.imageSmall, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" width="48" height="33" alt="');
        c.push(Surface.valOut((S.translations[o.mapinfo.name] || o.mapinfo.name)));
        c.push('" title="');
        c.push(Surface.valOut((S.translations[o.mapinfo.name] || o.mapinfo.name)));
        c.push('" class="serverguide-cell-name-server-map-image" />\n <div class="serverguide-cell-name-server-wrapper">\n');
        if (o.server.hasPassword) {
            c.push(' <div class="serverguide-hasPassword"></div>\n');
        }
        c.push(" ");
        if (o.server.evented) {
            c.push('<div class="serverguide-live-icon bubble-title" title="<b>This is a Live Server!</b><br/>See who\'s playing and join your friends right away."></div>');
        }
        c.push('\n <a href="');
        c.push(Surface.valOut($S.callFunction("serverguide.showServerUrl", o.server.guid, o.server.name, b, kwargs)));
        c.push('" class="base-no-ajax serverguide-cell-name-server-name">');
        c.push(Surface.importTemplate(("common" + ("." + "servername")), {"name": o.server.name,"first": 28,"limit": 80}, null, kwargs));
        c.push('</a>\n <div class="base-clear"></div>\n <div class="serverguide-cell-name-server-info">\n <span class="serverguide-cell-name-server-info-mode">');
        c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, o.server.mapMode)));
        c.push('</span>\n &bull; <span class="serverguide-cell-name-server-info-map">');
        c.push(Surface.valOut((S.translations[o.mapinfo.name] || o.mapinfo.name)));
        c.push("</span>\n ");
        if ((l_numFriendsOnServer > 0)) {
            c.push('&bull; <span class="serverguide-cell-name-server-info-friend">');
            c.push(Surface.valOut(l_numFriendsOnServer));
            c.push(" ");
            c.push(Surface.valOut(S.Modifier.pluralize(l_numFriendsOnServer, "friend", "friends")));
            c.push(" playing</span>");
        }
        c.push("\n");
        if ((o.server.gameExpansion > 0)) {
            c.push("&bull; ");
            c.push(Surface.importTemplate(("common" + ("." + "gameExpansionImage")), {"expansion": o.server.gameExpansion}, null, kwargs));
        }
        c.push('\n </div>\n </div>\n </div>\n <div class="serverguide-bodycell serverguide-cell-players">\n ');
        if (o.server.online) {
            c.push("<span>");
            c.push(Surface.valOut(o.server.numPlayers));
            c.push(" / ");
            c.push(Surface.valOut(o.server.maxPlayers));
            if ((o.server.numQueued > 0)) {
                c.push(' (<abbr title="');
                c.push(Surface.valOut(o.server.numQueued));
                c.push(' player(s) queued">');
                c.push(Surface.valOut(o.server.numQueued));
                c.push("</abbr>)");
            }
            c.push("</span>");
        }
        c.push('\n </div>\n <div class="serverguide-bodycell serverguide-cell-ranked-wrapper serverguide-cell-noborder">\n <div class="serverguide-cell-ranked serverguide-ranked-');
        if (o.server.ranked) {
            c.push("on");
        } else {
            c.push("off");
        }
        c.push('" title="Ranking ');
        if (o.server.ranked) {
            c.push("on");
        } else {
            c.push("off");
        }
        c.push('"></div>\n </div>\n <div class="serverguide-bodycell serverguide-cell-pb-wrapper serverguide-cell-noborder">\n <div class="serverguide-cell-pb ');
        if (o.server.online) {
            c.push("serverguide-punkbuster-");
            if (o.server.punkbuster) {
                c.push("on");
            } else {
                c.push("off");
            }
            c.push('" title="Punkbuster ');
            if (o.server.punkbuster) {
                c.push("on");
            } else {
                c.push("off");
            }
            c.push('" ');
        }
        c.push('></div>\n </div>\n <div class="serverguide-bodycell serverguide-cell-type-wrapper">\n <div class="serverguide-cell-type serverguide-type-');
        c.push(Surface.valOut(S.Modifier.lower($S.callFunction("serverguide.gameServerPresetString", o.serverinfo.preset, b, kwargs))));
        c.push('" title="');
        c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", o.serverinfo.preset, b, kwargs)));
        c.push('"></div>\n </div>\n <div class="serverguide-bodycell serverguide-cell-ping serverguide-cell-noborder">\n <div class="serverguide-cell-name-server-ping-lines-wrapper');
        if (S.Modifier.isstring(o.ping)) {
        } else {
            if ((o.ping < 80)) {
                c.push(" ping-best");
            } else {
                if ((o.ping < 150)) {
                    c.push(" ping-good");
                } else {
                    if ((o.ping < 200)) {
                        c.push(" ping-bad");
                    } else {
                        c.push(" ping-worst");
                    }
                }
            }
        }
        c.push('">\n <div class="serverguide-cell-name-server-ping-line worst"></div>\n <div class="serverguide-cell-name-server-ping-line bad"></div>\n <div class="serverguide-cell-name-server-ping-line good"></div>\n <div class="serverguide-cell-name-server-ping-line best"></div>\n </div>\n <span>');
        c.push(Surface.valOut(o.ping));
        c.push('</span>\n </div>\n <div class="serverguide-cellend"></div>\n');
        if (o.expand) {
            c.push(" ");
            c.push(Surface.importTemplate(("serverguide" + ("." + "expand")), {"server": o.server,"friendsOnServer": o.friendsOnServer}, null, kwargs));
            c.push("\n");
        }
    } else {
        c.push(' <div class="serverguide-bodycell serverguide-cell-name-serveroffline">\n <span class="serverguide-serveroffline-name">\n ');
        c.push(Surface.valOut(o.server.name));
        c.push('\n </span>\n <span class="serverguide-serveroffline-status">\n ');
        c.push(Surface.valOut("Server is offline"));
        c.push('\n </span>\n </div>\n <div class="serverguide-cellend"></div>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.serverrow", "surface_3_2", S.Modifier.concat("serverguide-server-", o.idx), o, b);
    return c.join("");
};
var block_serverguide_serversettings = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("serversettings"));
serverguide.serversettings.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_serversettings;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.serversettings");
    var l_settingValue;
    var l_for_serverguide_serversettings_5_6_list;
    var l_nameSID;
    var l_gameServerSettingInfo;
    c.push('\n<ul id="server-settings">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.serverSettings) != "undefined" && o.serverSettings !== null)) {
        l_for_serverguide_serversettings_5_6_list = o.serverSettings;
        if ((S.Modifier.count(l_for_serverguide_serversettings_5_6_list) > 0)) {
            for (var l_serverSettingKey in l_for_serverguide_serversettings_5_6_list) {
                if (!Surface.isValidLoopItem(l_for_serverguide_serversettings_5_6_list[l_serverSettingKey])) {
                    continue;
                }
                var l_serverSettingValue = l_for_serverguide_serversettings_5_6_list[l_serverSettingKey];
                l_gameServerSettingInfo = $S.callFunction("serverguide.bf3GetGameServerSettingInfo", l_serverSettingKey, b, kwargs);
                l_settingValue = l_serverSettingValue;
                if ((S.Modifier.get(l_gameServerSettingInfo, "type") == "bool")) {
                    if ((l_settingValue == 1)) {
                        l_settingValue = "On";
                    } else {
                        l_settingValue = "Off";
                    }
                }
                c.push("\n");
                l_nameSID = S.Modifier.get(l_gameServerSettingInfo, "nameSID");
                c.push("\n <li>");
                c.push(Surface.valOut((S.translations[l_nameSID] || l_nameSID)));
                c.push(" <span>");
                c.push(Surface.valOut(l_settingValue));
                c.push("</span></li>\n");
            }
        }
    }
    c.push("</ul>\n");
    return c.join("");
};
var block_serverguide_show = new Surface.BlockConfig("serverguide.base", {"serverguideTitle": "serverguide.show.block_serverguideTitle","serverguideContent": "serverguide.show.block_serverguideContent","titleItem": "serverguide.show.block_titleItem"});
serverguide.addTemplate(new Surface.Template("show"));
serverguide.show.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.show");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("serverguide.base", o, b, kwargs);
};
var block_serverguide_show_use_153_17 = new Surface.BlockConfig("common.secondarycontent", {"content": "serverguide.show._use_153_17_block_content","title": "serverguide.show._use_153_17_block_title","extraClass": "serverguide.show._use_153_17_block_extraClass"});
serverguide.show.block_titleItem = new Surface.Block("serverguide.show.block_titleItem");
serverguide.show.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(o.server.name));
    c.push(" - ");
    return c.join("");
};
serverguide.show.block_serverguideTitle = new Surface.Block("serverguide.show.block_serverguideTitle");
serverguide.show.block_serverguideTitle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("Server");
    return c.join("");
};
serverguide.show.surface_44_21 = new Surface.SingleSurface("serverguide.show.surface_44_21");
serverguide.show.surface_44_21.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.show");
    c.push('<surf:container id="');
    c.push("serverguide-show-serverjoin");
    c.push('">');
    if ((((typeof (Surface) != "undefined" && Surface !== null && typeof (Surface.globalContext) != "undefined" && Surface.globalContext !== null && typeof (Surface.globalContext.userContext) != "undefined" && Surface.globalContext.userContext !== null && typeof (Surface.globalContext.userContext.isInParty) != "undefined" && Surface.globalContext.userContext.isInParty !== null) ? Surface.globalContext.userContext.isInParty : 0) > 0)) {
        c.push(' <input type="button" class="base-button-arrow-almost-gigantic-dropdown base-button-general-dropdown" name="submit" value="');
        c.push(Surface.valOut("Join server"));
        c.push('" />\n <div class="base-button-dropdown base-general-dropdown-area">\n <div class="base-button-dropdown-inner">\n <ul>\n');
        if (((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.isLoggedIn) != "undefined" && o.session.isLoggedIn !== null) ? o.session.isLoggedIn : false)) {
            c.push(' <li>\n <a class="base-no-ajax join-server-submit-link"><span class="join-alone"></span>');
            c.push(Surface.valOut("Join alone"));
            c.push('</a>\n </li>\n <li>\n <a href="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gamemanager/createGroupJoinToServer/{guid}/", Surface.urlContext, {"guid": o.server.guid})));
            c.push('" class="base-no-ajax base-button-dropdown-joingroup"><span class="join-party"></span>');
            c.push(Surface.valOut("Join with Party"));
            c.push("</a>\n </li>\n");
        }
        c.push(' </ul>\n </div>\n <div class="base-button-dropdown-shadow"></div>\n </div>\n');
    } else {
        c.push(' <input type="submit" class="base-button-arrow-almost-gigantic" name="submit" value="');
        c.push(Surface.valOut("Join server"));
        c.push('" />\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.show", "surface_44_21", "serverguide-show-serverjoin", o, b);
    return c.join("");
};
serverguide.show.surface_69_13 = new Surface.SingleSurface("serverguide.show.surface_69_13");
serverguide.show.surface_69_13.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.show");
    c.push('<surf:container id="');
    c.push("serverguide-show-info");
    c.push('">');
    var l_mapName;
    var l_mapInfo;
    var l_for_serverguide_show_118_45_list;
    c.push(' <div id="server-info" class="common-box-container" ip="');
    c.push(Surface.valOut(o.server.ip));
    c.push('">\n <div class="common-box-inner">\n <table id="server-info-short">\n <thead>\n <tr>\n <th>');
    c.push(Surface.valOut("Players"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Ping"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Ranked"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Preset"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Punkbuster"));
    c.push("</th>\n <th>");
    c.push(Surface.valOut("Password"));
    c.push('</th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td id="server-info-players">');
    c.push(Surface.valOut(o.server.numPlayers));
    c.push(" / ");
    c.push(Surface.valOut(o.server.maxPlayers));
    c.push('</td>\n <td id="server-info-ping">');
    c.push(Surface.valOut(o.server.ping));
    c.push(' ms</td>\n <td id="server-info-ranked" ');
    if (!(o.server.ranked)) {
        c.push('class="server-info-off"');
    }
    c.push(">");
    if (o.server.ranked) {
        c.push(Surface.valOut("On"));
    } else {
        c.push(Surface.valOut("Off"));
    }
    c.push('</td>\n <td id="server-info-preset"');
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.preset) != "undefined" && o.server.preset !== null) ? o.server.preset : 0) != 2)) {
        c.push(' class="server-info-off"');
    }
    c.push(">");
    c.push(Surface.valOut($S.callFunction("serverguide.gameServerPresetString", ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.preset) != "undefined" && o.server.preset !== null) ? o.server.preset : 1), b, kwargs)));
    c.push('</td>\n <td id="server-info-punkbuster"');
    if (!(o.server.punkbuster)) {
        c.push(' class="server-info-off"');
    }
    c.push(">");
    if (o.server.punkbuster) {
        c.push(Surface.valOut("On"));
    } else {
        c.push(Surface.valOut("Off"));
    }
    c.push('</td>\n <td id="server-info-password" class="last');
    if (!(o.server.punkbuster)) {
        c.push(" server-info-off");
    }
    c.push('">');
    if (o.server.hasPassword) {
        c.push(Surface.valOut("On"));
    } else {
        c.push(Surface.valOut("Off"));
    }
    c.push("</td>\n </tr>\n </tbody>\n </table>\n ");
    c.push(Surface.importTemplate(("serverguide" + ("." + "serversettings")), {"serverSettings": o.server.settings}, null, kwargs));
    c.push('\n <div class="base-clear"></div>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.extendedInfo) != "undefined" && o.server.extendedInfo !== null && typeof (o.server.extendedInfo.desc) != "undefined" && o.server.extendedInfo.desc !== null) ? o.server.extendedInfo.desc : "")) {
        c.push(' <div id="server-description">\n <h3>');
        c.push(Surface.valOut("Description"));
        c.push("</h3>\n <p>");
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.extendedInfo) != "undefined" && o.server.extendedInfo !== null && typeof (o.server.extendedInfo.desc) != "undefined" && o.server.extendedInfo.desc !== null) ? o.server.extendedInfo.desc : "")));
        c.push("</p>\n </div>\n");
    }
    c.push('\n <div id="server-info-maprotation-container" class="base-box-push">\n <div class="base-box-push-inner">\n <div id="server-info-maprotation-slider-wrapper">\n <div class="server-info-maprotation-title">\n ');
    c.push(Surface.valOut("Map rotation"));
    c.push('\n </div>\n <div id="maprotation-nav-left" class="maprotation-nav sodaSlider-arrow-left"></div>\n <div id="maprotation-nav-right" class="maprotation-nav sodaSlider-arrow-right"></div>\n <table id="maprotation" border="0" cellpadding="0" cellspacing="0" class="sodaSlider-slider">\n <tr>\n');
    l_for_serverguide_show_118_45_list = o.server.maps;
    if ((S.Modifier.count(l_for_serverguide_show_118_45_list) > 0)) {
        for (var l_for_serverguide_show_118_45_key in l_for_serverguide_show_118_45_list) {
            if (!Surface.isValidLoopItem(l_for_serverguide_show_118_45_list[l_for_serverguide_show_118_45_key])) {
                continue;
            }
            var l_mapRotation = l_for_serverguide_show_118_45_list[l_for_serverguide_show_118_45_key];
            l_mapInfo = $S.callFunction("serverguide.mapinfo", o.server.game, l_mapRotation.map, b, kwargs);
            l_mapName = S.Modifier.get(l_mapInfo, "name");
            c.push(' <td><img class="bubble-title" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(S.Modifier.get(l_mapInfo, "imageBig"), "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut((S.translations[l_mapName] || l_mapName)));
            c.push('" data-battlebubble="');
            c.push(Surface.valOut((S.translations[l_mapName] || l_mapName)));
            c.push("<br>");
            c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, l_mapRotation.mapMode)));
            c.push('" /></td>\n');
        }
    } else {
        c.push(" ");
        c.push(Surface.valOut("No maps in map rotation"));
        c.push("\n");
    }
    c.push(' </tr>\n </table>\n </div>\n </div>\n </div>\n <div class="base-clear"></div>\n </div>\n </div>\n ');
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("serverguide.show", "surface_69_13", "serverguide-show-info", o, b);
    return c.join("");
};
serverguide.show._use_153_17_block_extraClass = new Surface.Block("serverguide.show._use_153_17_block_extraClass");
serverguide.show._use_153_17_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("serverinfo-players-box");
    return c.join("");
};
serverguide.show._use_153_17_block_title = new Surface.Block("serverguide.show._use_153_17_block_title");
serverguide.show._use_153_17_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(o.serverinfo.numPlayers));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.serverinfo.numPlayers, "Player", "players in total")));
    return c.join("");
};
serverguide.show._use_153_17_block_content = new Surface.Block("serverguide.show._use_153_17_block_content");
serverguide.show._use_153_17_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div id="serverinfo-players-all-wrapper"></div>\n <div id="serverinfo-players-all-view" class="base-link" data-numPlayers="');
    c.push(Surface.valOut(o.serverinfo.numPlayers));
    c.push('" data="');
    c.push(Surface.valOut(o.serverinfo.guid));
    c.push('">');
    c.push(Surface.valOut("Show"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.serverinfo.numPlayers, "Player", "all players")));
    c.push('</div>\n <div id="serverinfo-players-all-hide" class="base-link">');
    c.push(Surface.valOut("Hide"));
    c.push(" ");
    c.push(Surface.valOut(S.Modifier.pluralize(o.serverinfo.numPlayers, "Player", "all players")));
    c.push("</div>\n");
    return c.join("");
};
serverguide.show.block_serverguideContent = new Surface.Block("serverguide.show.block_serverguideContent");
serverguide.show.block_serverguideContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_favGuids;
    var l_currentMapName;
    var l_isFavorite;
    var l_session;
    var l_currentMapInfo;
    l_favGuids = S.Modifier.get(Surface.globalContext, "favGuids");
    c.push('\n <div id="server-page">\n');
    if ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null)) {
        l_session = S.Modifier.get(Surface.globalContext, "session");
        o.server.ping = "-";
        l_isFavorite = S.Modifier.contains(l_favGuids, o.server.guid);
        c.push("\n");
        l_currentMapInfo = $S.callFunction("serverguide.mapinfo", o.server.game, o.server.map, b, kwargs);
        l_currentMapName = S.Modifier.get(l_currentMapInfo, "name");
        c.push('\n <div id="server-header">\n <h1>');
        c.push(Surface.valOut(o.server.name));
        c.push("</h1>\n");
        if (((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : false)) {
            c.push(' <div class="serverguide-add-favorite">\n <form action="');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gameserverbookmark/toggleFavourite/", Surface.urlContext)));
            c.push('">\n <input type="hidden" name="guid" value="');
            c.push(Surface.valOut(o.server.guid));
            c.push('" />\n </form>\n <div class="serverguide-add-favorite-toggle ');
            if (l_isFavorite) {
                c.push("isFavorite");
            }
            c.push('">\n <span>');
            if (l_isFavorite) {
                c.push(Surface.valOut("Favourite"));
            } else {
                c.push(Surface.valOut("Add as Favourite"));
            }
            c.push('</span>\n </div>\n <div class="serverguide-add-favorite-loading">\n <img width="16" height="16" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/base/shared/ajax-loader.gif", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" alt="');
            c.push(Surface.valOut("Loading..."));
            c.push('"/>\n </div>\n </div>\n');
        }
        c.push('\n <span class="gameicon ');
        c.push(Surface.valOut($S.callFunction("common.getGameIconCSSHorizontal", o.server.game, o.server.platform, o.server.gameExpansion, b, kwargs)));
        c.push('"></span>\n <p>\n <strong>');
        c.push(Surface.valOut((S.translations[l_currentMapName] || l_currentMapName)));
        c.push('</strong> <span class="bullet">&bull;</span> ');
        c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.staticContext.niceGameModeMap, o.server.mapMode)));
        c.push('\n </p>\n <form id="serverguide-show-joinserver-form" class="base-left serverguide-join-server base-no-ajax" method="GET" guid="');
        c.push(Surface.valOut(o.server.guid));
        c.push('" action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.server.guid,"slug": S.Modifier.slugify(o.server.name)})));
        c.push('">\n <input type="hidden" name="action" value="');
        c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.action) != "undefined" && o.action !== null) ? o.action : "")));
        c.push('" />\n');
        c.push(serverguide.show.surface_44_21.render({"server": {"guid": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.guid) != "undefined" && o.server.guid !== null) ? o.server.guid : null)},"session": {"isLoggedIn": ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.isLoggedIn) != "undefined" && l_session.isLoggedIn !== null) ? l_session.isLoggedIn : null)}}, b, kwargs));
        c.push(" </form>\n </div>\n");
        c.push(serverguide.show.surface_69_13.render({"server": {"extendedInfo": {"desc": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.extendedInfo) != "undefined" && o.server.extendedInfo !== null && typeof (o.server.extendedInfo.desc) != "undefined" && o.server.extendedInfo.desc !== null) ? o.server.extendedInfo.desc : null)},"game": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.game) != "undefined" && o.server.game !== null) ? o.server.game : null),"hasPassword": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.hasPassword) != "undefined" && o.server.hasPassword !== null) ? o.server.hasPassword : null),"ip": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.ip) != "undefined" && o.server.ip !== null) ? o.server.ip : null),"maps": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.maps) != "undefined" && o.server.maps !== null) ? o.server.maps : null),"maxPlayers": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.maxPlayers) != "undefined" && o.server.maxPlayers !== null) ? o.server.maxPlayers : null),"numPlayers": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.numPlayers) != "undefined" && o.server.numPlayers !== null) ? o.server.numPlayers : null),"ping": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.ping) != "undefined" && o.server.ping !== null) ? o.server.ping : null),"preset": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.preset) != "undefined" && o.server.preset !== null) ? o.server.preset : null),"punkbuster": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.punkbuster) != "undefined" && o.server.punkbuster !== null) ? o.server.punkbuster : null),"ranked": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.ranked) != "undefined" && o.server.ranked !== null) ? o.server.ranked : null),"settings": ((typeof (o) != "undefined" && o !== null && typeof (o.server) != "undefined" && o.server !== null && typeof (o.server.settings) != "undefined" && o.server.settings !== null) ? o.server.settings : null)}}, b, kwargs));
        c.push("\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.serverinfo) != "undefined" && o.serverinfo !== null) && (o.serverinfo.numPlayers > 0))) {
            c.push(' <div style="clear:both;"></div>\n');
            c.push(Surface.importTemplate(("common" + ("." + "secondarycontent")), o, block_serverguide_show_use_153_17, kwargs));
        }
        c.push("\n");
    } else {
        c.push(' <div id="serverguide-result">\n <p class="serverguide-show-infomsg">');
        c.push(Surface.valOut("Sorry, this server was not found."));
        c.push("</p>\n </div>\n");
    }
    c.push("\n </div>\n");
    return c.join("");
};
var block_serverguide_venicefilters = new Surface.BlockConfig("", {});
serverguide.addTemplate(new Surface.Template("venicefilters"));
serverguide.venicefilters.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_serverguide_venicefilters;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("serverguide");
    Surface.Renderer.addUsedTemplate("serverguide.venicefilters");
    var l_gamemodes;
    var l_regions;
    var l_mapcodes;
    var l_realm;
    var l_gameexpansions;
    c.push("\n");
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push("\n");
    if (Surface.globalContext.staticContext.isOpenBeta) {
        l_gameexpansions = [{"key": "default","label": "Battlefield 3","image": "/public/serverguide/bf3/filter-bf3.png"}];
        c.push("\n");
    } else {
        l_gameexpansions = [{"key": "default","label": "Battlefield 3","image": "/public/serverguide/bf3/filter-bf3.png"}, {"key": "xpack1","label": "Back to Karkand","image": "/public/serverguide/bf3/filter-bf3-karkand.png"}];
        c.push("\n");
    }
    c.push("\n");
    if (Surface.globalContext.staticContext.isOpenBeta) {
        l_gamemodes = [{"key": "conquestlarge","label": "Conquest Large","icon": "/public/serverguide/bfbc2/conquest.png"}, {"key": "rush","label": "Rush","icon": "/public/serverguide/bfbc2/rush.png"}];
    } else {
        l_gamemodes = [{"key": "conquestlarge","label": "Conquest Large","icon": "/public/serverguide/bfbc2/conquest.png"}, {"key": "conquest","label": "Conquest","icon": "/public/serverguide/bfbc2/conquest.png"}, {"key": "rush","label": "Rush","icon": "/public/serverguide/bfbc2/rush.png"}, {"key": "sqrush","label": "Squad Rush","icon": "/public/serverguide/bfbc2/rush.png"}, {"key": "sqdm","label": "Squad DM","icon": "/public/serverguide/bfbc2/sqdm.png"}, {"key": "teamdeathmatch","label": "Team DM","icon": "/public/serverguide/bfbc2/sqdm.png"}];
        c.push("\n");
    }
    c.push("\n");
    l_regions = [{"key": "NAm","label": "North America","value": 1}, {"key": "SAm","label": "South America","value": 2}, {"key": "AC","label": "Antarctica","value": 4}, {"key": "Afr","label": "Africa","value": 8}, {"key": "EU","label": "Europe","value": 16}, {"key": "Asia","label": "Asia","value": 32}, {"key": "OC","label": "Oceania","value": 64}];
    c.push('\n<div class="');
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push("openbeta");
    }
    c.push('">\n <div class="filtergameexpansionvenice">\n ');
    c.push(Surface.importTemplate(("serverguide" + ("." + "filtergameexpansion")), {"filter": o.filter,"gameexpansions": l_gameexpansions}, null, kwargs));
    c.push('\n <div class="serverguide-filter serverguide-filter-search">\n <div class="serverguide-filter-name"><h1>');
    c.push(Surface.valOut("Filter by server name"));
    c.push("</h1></div>\n");
    if (!((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null))) {
        o.searchQuery = "";
    }
    c.push(' <input id="serverguide-search-input" type="text" name="q" title="" value="');
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.searchQuery) != "undefined" && o.searchQuery !== null) ? o.searchQuery : "")));
    c.push('" autocomplete="off" />\n </div>\n </div>\n <div style="float: left; width:152px;" class="filtergamemodesregions">\n ');
    c.push(Surface.importTemplate(("serverguide" + ("." + "filtergamemode")), {"filter": o.filter,"gamemodes": l_gamemodes}, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterregion")), {"filter": o.filter,"regions": l_regions}, null, kwargs));
    c.push("\n </div>\n ");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterslots")), o, null, kwargs));
    c.push("\n");
    c.push(Surface.importTemplate(("serverguide" + ("." + "filterextravenice")), o, null, kwargs));
    c.push("\n");
    if (Surface.globalContext.staticContext.isOpenBeta) {
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "filtermaps")), {"filter": o.filter,"maps": ["MP_007", "MP_Subway"]}, null, kwargs));
        c.push("\n");
    } else {
        l_mapcodes = $S.callFunction("serverguide.maplist", l_realm.game, b, kwargs);
        c.push(" ");
        c.push(Surface.importTemplate(("serverguide" + ("." + "filtermaps")), {"filter": o.filter,"maps": l_mapcodes}, null, kwargs));
        c.push("\n");
    }
    c.push('\n <div style="clear:both"></div>\n</div>');
    return c.join("");
};
if (typeof session == "undefined") {
    var session = {};
}
var surf_session_component = new Surface.Component("session");
surf_session_component.extend(session);
session = surf_session_component;
var block_session_index = new Surface.BlockConfig("base.ajaxindex", {"main": "session.index.block_main"});
session.addTemplate(new Surface.Template("index"));
if (typeof settings == "undefined") {
    var settings = {};
}
var surf_settings_component = new Surface.Component("settings");
surf_settings_component.extend(settings);
settings = surf_settings_component;
var block_settings_installation = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "settings.installation.block_mainContent"});
settings.addTemplate(new Surface.Template("installation"));
var block_settings_voice = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "settings.voice.block_mainContent"});
settings.addTemplate(new Surface.Template("voice"));
var block_settings_voice_use_148_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "settings.voice._use_148_18_block_content","title": "settings.voice._use_148_18_block_title","extraClassInner": "settings.voice._use_148_18_block_extraClassInner","extraClass": "settings.voice._use_148_18_block_extraClass"});
var block_settings_voice_use_96_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "settings.voice._use_96_18_block_content","title": "settings.voice._use_96_18_block_title","extraClassInner": "settings.voice._use_96_18_block_extraClassInner","extraClass": "settings.voice._use_96_18_block_extraClass"});
var block_settings_voice_use_15_18 = new Surface.BlockConfig("common.boxwideclean", {"content": "settings.voice._use_15_18_block_content","title": "settings.voice._use_15_18_block_title","extraClassInner": "settings.voice._use_15_18_block_extraClassInner","extraClass": "settings.voice._use_15_18_block_extraClass"});
var block_settings_voice_use_72_35 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "settings.voice._use_15_18__use_72_35_block_content","extraClassInner": "settings.voice._use_15_18__use_72_35_block_extraClassInner","shadow": "settings.voice._use_15_18__use_72_35_block_shadow","titleContainer": "settings.voice._use_15_18__use_72_35_block_titleContainer","extraClass": "settings.voice._use_15_18__use_72_35_block_extraClass"});
var block_settings_voice_use_34_34 = new Surface.BlockConfig("common.boxnarrowclean", {"content": "settings.voice._use_15_18__use_34_34_block_content","extraClassInner": "settings.voice._use_15_18__use_34_34_block_extraClassInner","shadow": "settings.voice._use_15_18__use_34_34_block_shadow","titleContainer": "settings.voice._use_15_18__use_34_34_block_titleContainer","extraClass": "settings.voice._use_15_18__use_34_34_block_extraClass"});
settings.voice.surface_106_30 = new Surface.SingleSurface("settings.voice.surface_106_30");
settings.voice.surface_106_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_settings_voice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("settings");
    Surface.Renderer.addUsedTemplate("settings.voice");
    c.push('<surf:container id="');
    c.push("captureDevices");
    c.push('">');
    var l_for_settings_voice_109_42_list;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.devices) != "undefined" && o.devices !== null)) {
        c.push(' <select class="voice-settings-input" onchange="ESN.Sonar.setCaptureDevice($(this).val());">\n');
        l_for_settings_voice_109_42_list = o.devices;
        if ((S.Modifier.count(l_for_settings_voice_109_42_list) > 0)) {
            for (var l_for_settings_voice_109_42_key in l_for_settings_voice_109_42_list) {
                if (!Surface.isValidLoopItem(l_for_settings_voice_109_42_list[l_for_settings_voice_109_42_key])) {
                    continue;
                }
                var l_device = l_for_settings_voice_109_42_list[l_for_settings_voice_109_42_key];
                c.push(" <option ");
                if (l_device.active) {
                    c.push("selected");
                }
                c.push(' value="');
                c.push(Surface.valOut(l_device.deviceId));
                c.push('">');
                c.push(Surface.valOut(l_device.deviceName));
                c.push("</option>\n");
            }
        }
        c.push(" </select>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("settings.voice", "surface_106_30", "captureDevices", o, b);
    return c.join("");
};
settings.voice.surface_124_30 = new Surface.SingleSurface("settings.voice.surface_124_30");
settings.voice.surface_124_30.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_settings_voice;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("settings");
    Surface.Renderer.addUsedTemplate("settings.voice");
    c.push('<surf:container id="');
    c.push("playbackDevices");
    c.push('">');
    var l_for_settings_voice_127_42_list;
    if ((typeof (o) != "undefined" && o !== null && typeof (o.devices) != "undefined" && o.devices !== null)) {
        c.push(' <select class="voice-settings-input" onchange="ESN.Sonar.setPlaybackDevice($(this).val());">\n');
        l_for_settings_voice_127_42_list = o.devices;
        if ((S.Modifier.count(l_for_settings_voice_127_42_list) > 0)) {
            for (var l_for_settings_voice_127_42_key in l_for_settings_voice_127_42_list) {
                if (!Surface.isValidLoopItem(l_for_settings_voice_127_42_list[l_for_settings_voice_127_42_key])) {
                    continue;
                }
                var l_device = l_for_settings_voice_127_42_list[l_for_settings_voice_127_42_key];
                c.push(" <option ");
                if (l_device.active) {
                    c.push("selected");
                }
                c.push(' value="');
                c.push(Surface.valOut(l_device.deviceId));
                c.push('">');
                c.push(Surface.valOut(l_device.deviceName));
                c.push("</option>\n");
            }
        }
        c.push(" </select>\n");
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("settings.voice", "surface_124_30", "playbackDevices", o, b);
    return c.join("");
};
if (typeof sonar == "undefined") {
    var sonar = {};
}
var surf_sonar_component = new Surface.Component("sonar");
surf_sonar_component.extend(sonar);
sonar = surf_sonar_component;
sonar.addTemplate(new Surface.Template("empty"));
var block_sonar_index = new Surface.BlockConfig("base.box3x", {"boxContent": "sonar.index.block_boxContent"});
sonar.addTemplate(new Surface.Template("index"));
var block_sonar_joinchannelform = new Surface.BlockConfig("", {});
sonar.addTemplate(new Surface.Template("joinchannelform"));
sonar.joinchannelform.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_sonar_joinchannelform;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("sonar");
    Surface.Renderer.addUsedTemplate("sonar.joinchannelform");
    c.push('\n<input type="button" rel="');
    c.push(Surface.valOut(o.channel.channelId));
    c.push("\" class='voice-connect-button base-button-arrow-microscopic' value='");
    c.push(Surface.valOut("Talk"));
    c.push("' />\n");
    return c.join("");
};
var block_sonar_userjoinedchannel = new Surface.BlockConfig("notification.basesmaller", {"notification_body": "sonar.userjoinedchannel.block_notification_body","notification_icon": "sonar.userjoinedchannel.block_notification_icon","notification_button": "sonar.userjoinedchannel.block_notification_button"});
sonar.addTemplate(new Surface.Template("userjoinedchannel"));
sonar.userjoinedchannel.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_sonar_userjoinedchannel;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("sonar");
    Surface.Renderer.addUsedTemplate("sonar.userjoinedchannel");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("notification.basesmaller", o, b, kwargs);
};
sonar.userjoinedchannel.block_notification_icon = new Surface.Block("sonar.userjoinedchannel.block_notification_icon");
sonar.userjoinedchannel.block_notification_icon.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"gravatarSize": 30,"user": o.user}, null, kwargs));
    c.push("\n");
    return c.join("");
};
sonar.userjoinedchannel.block_notification_body = new Surface.Block("sonar.userjoinedchannel.block_notification_body");
sonar.userjoinedchannel.block_notification_body.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(" ");
    c.push(Surface.importTemplate(("profile" + ("." + "openchatlink")), {"user": o.user}, null, kwargs));
    c.push("<br>\n joined ");
    c.push(Surface.valOut(S.Modifier.truncate(o.channel.description, 20)));
    c.push("\n");
    return c.join("");
};
sonar.userjoinedchannel.block_notification_button = new Surface.Block("sonar.userjoinedchannel.block_notification_button");
sonar.userjoinedchannel.block_notification_button.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((o.user.presence.playingMode != 4)) {
        c.push(' <input type="button" rel="');
        c.push(Surface.valOut(o.channel.channelId));
        c.push("\" class='voice-connect-button base-button-arrow-microscopic' value='");
        c.push(Surface.valOut("Talk"));
        c.push("' />\n");
    }
    return c.join("");
};
sonar.addTemplate(new Surface.Template("xml"));
if (typeof store == "undefined") {
    var store = {};
}
var surf_store_component = new Surface.Component("store");
surf_store_component.extend(store);
store = surf_store_component;
var block_store_index = new Surface.BlockConfig("base.ajaxindex", {"main": "store.index.block_main"});
store.addTemplate(new Surface.Template("index"));
if (typeof surfaceerror == "undefined") {
    var surfaceerror = {};
}
var surf_surfaceerror_component = new Surface.Component("surfaceerror");
surf_surfaceerror_component.extend(surfaceerror);
surfaceerror = surf_surfaceerror_component;
surfaceerror.addTemplate(new Surface.Template("ajax"));
surfaceerror.addTemplate(new Surface.Template("index"));
if (typeof surfaceframework == "undefined") {
    var surfaceframework = {};
}
var surf_surfaceframework_component = new Surface.Component("surfaceframework");
surf_surfaceframework_component.extend(surfaceframework);
surfaceframework = surf_surfaceframework_component;
var block_surfaceframework_index = new Surface.BlockConfig("", {});
surfaceframework.addTemplate(new Surface.Template("index"));
surfaceframework.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_surfaceframework_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("surfaceframework");
    Surface.Renderer.addUsedTemplate("surfaceframework.index");
    c.push("<!-- #SURFACE_STATE# -->");
    return c.join("");
};
var block_surfaceframework_push = new Surface.BlockConfig("", {});
surfaceframework.addTemplate(new Surface.Template("push"));
surfaceframework.push.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_surfaceframework_push;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("surfaceframework");
    Surface.Renderer.addUsedTemplate("surfaceframework.push");
    c.push('\n<script type="text/javascript" src="');
    c.push(Surface.valOut(Surface.globalContext.pushJavascriptUrl));
    c.push('"><\/script>\n<script type="text/javascript">\n Surface.domReady(function() {\n Surface.Push.init(');
    c.push(S.Modifier.json(Surface.globalContext.pushConnections));
    c.push(', "');
    c.push(Surface.valOut(Surface.globalContext.pushFlashUrl));
    c.push('", true);\n });\n<\/script>');
    return c.join("");
};
if (typeof teammatch == "undefined") {
    var teammatch = {};
}
var surf_teammatch_component = new Surface.Component("teammatch");
surf_teammatch_component.extend(teammatch);
teammatch = surf_teammatch_component;
var block_teammatch_arrow = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("arrow"));
teammatch.arrow.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_arrow;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.arrow");
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.leftStep) != "undefined" && o.leftStep !== null) && o.leftStep)) {
        c.push(" </div>\n");
        if (((typeof (o) != "undefined" && o !== null && typeof (o.rightStep) != "undefined" && o.rightStep !== null) && o.rightStep)) {
            if ((o.curStep == o.leftStep)) {
                c.push(' <div class="teammatch-arrow onoff"></div>\n');
            } else {
                if ((o.curStep == o.rightStep)) {
                    c.push(' <div class="teammatch-arrow offon"></div>\n');
                } else {
                    c.push(' <div class="teammatch-arrow offoff"></div>\n');
                }
            }
        } else {
            c.push("\n");
            if ((o.curStep == o.leftStep)) {
                c.push(' <div class="teammatch-arrow sideon"></div>\n');
            } else {
                c.push(' <div class="teammatch-arrow rightoff"></div>\n');
            }
        }
    } else {
        c.push("\n");
        if ((o.curStep == o.rightStep)) {
            c.push(' <div class="teammatch-arrow sideon"></div>\n');
        } else {
            c.push(' <div class="teammatch-arrow leftoff"></div>\n');
        }
    }
    c.push("\n");
    if ((typeof (o) != "undefined" && o !== null && typeof (o.rightStep) != "undefined" && o.rightStep !== null)) {
        if ((o.rightStep == o.curStep)) {
            c.push(' <div class="teammatch-arrow on">\n');
        } else {
            c.push(' <div class="teammatch-arrow off">\n');
        }
    }
    return c.join("");
};
var block_teammatch_arrowround = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("arrowround"));
teammatch.arrowround.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_arrowround;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.arrowround");
    c.push('\n<div class="teammatch-arrow-round">\n <h1>');
    c.push(Surface.valOut(o.title));
    c.push('</h1>\n <div class="teammatch-arrow-round-score">\n <div class="team1 teammatch-event-team-1">A</div>\n <div class="teamscore">');
    c.push(Surface.valOut(o.team1score));
    c.push('</div>\n <div>-</div>\n <div class="teamscore">');
    c.push(Surface.valOut(o.team2score));
    c.push('</div>\n <div class="team2 teammatch-event-team-2">B</div>Not started\n </div>\n <h2>\n');
    if ((o.curStep == o.step)) {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.sectotime(o.match.timeLeft)));
        c.push("\n");
    } else {
        if ((o.curStep > o.step)) {
            c.push(" Completed\n");
        } else {
            if ((o.curStep < o.step)) {
                c.push(" Not started\n");
            }
        }
    }
    c.push(" </h2>\n</div>");
    return c.join("");
};
var block_teammatch_arrowtotal = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("arrowtotal"));
teammatch.arrowtotal.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_arrowtotal;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.arrowtotal");
    c.push('\n<div class="teammatch-arrow-total">\n <h1>');
    c.push(Surface.valOut("TOTAL"));
    c.push('</h1>\n <div class="teammatch-arrow-total-score">\n <div class="team1 teammatch-event-team-1">A</div>\n <div class="teamscore">');
    c.push(Surface.valOut(o.team1score));
    c.push('</div>\n <div>-</div>\n <div class="teamscore">');
    c.push(Surface.valOut(o.team2score));
    c.push('</div>\n <div class="team2 teammatch-event-team-2">B</div>\n </div>\n</div>');
    return c.join("");
};
var block_teammatch_arrowwarmup = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("arrowwarmup"));
teammatch.arrowwarmup.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_arrowwarmup;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.arrowwarmup");
    c.push('\n<div class="teammatch-arrow-warmup">\n <h1>');
    c.push(Surface.valOut(o.title));
    c.push("</h1>\n <h2>\n");
    if ((o.step == o.curStep)) {
        c.push(" ");
        c.push(Surface.valOut(S.Modifier.sectotime(o.match.timeLeft)));
        c.push("\n");
    } else {
        if ((o.curStep > o.step)) {
            c.push(" Completed\n");
        } else {
            if ((o.curStep < o.step)) {
                c.push(" Not started\n");
            }
        }
    }
    c.push(" </h2>\n</div>");
    return c.join("");
};
var block_teammatch_base = new Surface.BlockConfig("base.ajaxindex", {"left": "teammatch.base.block_left","mainContent": "teammatch.base.block_mainContent","right": "teammatch.base.block_right","all": "teammatch.base.block_all"});
teammatch.addTemplate(new Surface.Template("base"));
var block_teammatch_matchevent = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("matchevent"));
teammatch.matchevent.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_matchevent;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.matchevent");
    var l_killer;
    var l_name;
    var l_weapon;
    var l_param2;
    var l_victim;
    var l_param1;
    var l_headshot;
    c.push("\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.topBorder) != "undefined" && o.topBorder !== null) ? o.topBorder : true)) {
        c.push(' <div class="teammatch-event-team-border"></div>\n');
    }
    l_name = o.matchevent.eventName;
    l_param1 = S.Modifier.get(o.matchevent.event, 0, "");
    l_param2 = S.Modifier.get(o.matchevent.event, 1, "");
    c.push('\n<div class="teammatch-show-events-listitem ');
    c.push(Surface.valOut(S.Modifier.replace(l_name, ".", "-")));
    c.push('">\n');
    if ((l_name == "warmupBegin")) {
        c.push(' <img width="17" height="17" src="');
        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/roundstart.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
        c.push('" />');
        c.push(Surface.valOut("Warmup started"));
        c.push("\n");
    } else {
        if ((l_name == "roundBegin")) {
            c.push(' <img width="17" height="17" src="');
            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/roundstart.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
            c.push('" />');
            c.push(Surface.valOut("Round"));
            c.push(" ");
            c.push(Surface.valOut(l_param1));
            c.push(" ");
            c.push(Surface.valOut("started"));
            c.push("\n");
        } else {
            if ((l_name == "roundComplete")) {
                c.push(' <span class="teammatch-event-team-');
                c.push(Surface.valOut(l_param2));
                c.push('">');
                c.push(Surface.valOut("Team"));
                c.push(" ");
                c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.teamNames, l_param2, "-")));
                c.push("</span> ");
                c.push(Surface.valOut("won round"));
                c.push(" ");
                c.push(Surface.valOut(l_param1));
                c.push("<br>\n");
            } else {
                if ((l_name == "matchEnded")) {
                    if ((l_param1 == "0")) {
                        c.push(" ");
                        c.push(Surface.valOut("Match is a draw"));
                        c.push("\n");
                    } else {
                        c.push(" ");
                        c.push(Surface.valOut("Team"));
                        c.push(" ");
                        c.push(Surface.valOut(S.Modifier.get(Surface.globalContext.teamNames, l_param1, "unknown")));
                        c.push(" ");
                        c.push(Surface.valOut("won the match"));
                        c.push("\n");
                    }
                    c.push("\n");
                } else {
                    if ((l_name == "player.onJoin")) {
                        c.push(' <img width="17" height="17" src="');
                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/join.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                        c.push('" />\n <span class="teammatch-event-team-');
                        c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_param1, "unknown")));
                        c.push('">');
                        c.push(Surface.valOut(l_param1));
                        c.push("</span> ");
                        c.push(Surface.valOut("joined server"));
                        c.push("\n");
                    } else {
                        if ((l_name == "player.onLeave")) {
                            c.push(' <img width="17" height="17" src="');
                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/leave.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                            c.push('" />\n <span class="teammatch-event-team-');
                            c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_param1, "unknown")));
                            c.push('">');
                            c.push(Surface.valOut(l_param1));
                            c.push("</span> ");
                            c.push(Surface.valOut("left server"));
                            c.push("\n");
                        } else {
                            if ((l_name == "player.onKill")) {
                                l_killer = l_param1;
                                l_victim = l_param2;
                                l_weapon = S.Modifier.get(o.matchevent.event, 2, "");
                                l_headshot = S.Modifier.get(o.matchevent.event, 3, "");
                                c.push("\n");
                                if ((l_killer != l_victim)) {
                                    if ((l_weapon == "KNV-1")) {
                                        c.push(' <img width="17" height="17" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/knife.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />\n');
                                    } else {
                                        if ((l_headshot == "true")) {
                                            c.push(' <img width="17" height="17" src="');
                                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/headshot.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                            c.push('" />\n');
                                        } else {
                                            c.push(' <img width="17" height="17" src="');
                                            c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/kill.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                            c.push('" />\n');
                                        }
                                    }
                                } else {
                                    c.push(' <img width="17" height="17" src="');
                                    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/suicide.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                    c.push('" />\n');
                                }
                                c.push('\n <span class="teammatch-event-team-');
                                c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_killer, "unknown")));
                                c.push('">');
                                c.push(Surface.valOut(l_killer));
                                c.push("</span>\n");
                                if ((l_killer == l_victim)) {
                                    c.push(" committed suicide\n");
                                } else {
                                    c.push(" &lt;");
                                    c.push(Surface.valOut(l_weapon));
                                    c.push('&gt; <span class="teammatch-event-team-');
                                    c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_victim, "unknown")));
                                    c.push('">');
                                    c.push(Surface.valOut(l_victim));
                                    c.push("</span>\n");
                                }
                                c.push("\n");
                            } else {
                                if ((l_name == "player.onSpawn")) {
                                    l_param2 = S.Modifier.lower(l_param2);
                                    c.push(" ");
                                    if ((l_param2 == "assault")) {
                                        c.push('<img width="17" height="17" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/assault.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />');
                                    }
                                    c.push("\n");
                                    if ((l_param2 == "recon")) {
                                        c.push('<img width="17" height="17" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/recon.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />');
                                    }
                                    c.push("\n");
                                    if ((l_param2 == "demolition")) {
                                        c.push('<img width="17" height="17" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/engineer.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />');
                                    }
                                    c.push("\n");
                                    if ((l_param2 == "medic")) {
                                        c.push('<img width="17" height="17" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/medic.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />');
                                    }
                                    c.push('\n <span class="teammatch-event-team-');
                                    c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_param1, "unknown")));
                                    c.push('">');
                                    c.push(Surface.valOut(l_param1));
                                    c.push("</span> ");
                                    c.push(Surface.valOut("spawned as"));
                                    c.push(" ");
                                    c.push(Surface.valOut(l_param2));
                                    c.push("\n");
                                } else {
                                    if ((l_name == "player.onChat")) {
                                        c.push(' <img width="15" height="12" src="');
                                        c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace("/public/teammatch/icons/chat.png", "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
                                        c.push('" />\n <span class="teammatch-event-team-');
                                        c.push(Surface.valOut(S.Modifier.get(o.personaTeams, l_param1, "unknown")));
                                        c.push('">');
                                        c.push(Surface.valOut(l_param1));
                                        c.push("</span>: ");
                                        c.push(Surface.valOut(l_param2));
                                        c.push("\n");
                                    } else {
                                        c.push(" ");
                                        c.push(Surface.valOut(l_name));
                                        c.push("\n");
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    c.push("</div>\n");
    return c.join("");
};
var block_teammatch_matchstatus = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("matchstatus"));
teammatch.matchstatus.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_matchstatus;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.matchstatus");
    var l_team1round2;
    var l_step;
    var l_team1total;
    var l_for_teammatch_matchstatus_27_6_list;
    var l_team2round1;
    var l_team2round2;
    var l_team2total;
    var l_team1round1;
    c.push("\n");
    if ((o.gamemode == "SQDM")) {
        c.push(' <div class="teammatch-result-box-sqdm">\n');
        if (o.match.inWarmup) {
            c.push(" Warmup: ");
            c.push(Surface.valOut(S.Modifier.sectotime(o.match.timeLeft)));
            c.push(" left\n");
        } else {
            if ((o.match.roundsCompleted == 0)) {
                c.push(" Match is live! Time left: ");
                c.push(Surface.valOut(S.Modifier.sectotime(o.match.timeLeft)));
                c.push("\n");
            } else {
                c.push(" Match is over\n");
            }
        }
        c.push(" </div>\n");
    } else {
        l_step = 1;
        if (((o.match.currentRound == 1) && !(o.match.inWarmup))) {
            l_step = 2;
        }
        if (((o.match.roundsCompleted == 1) && o.match.inWarmup)) {
            l_step = 3;
        }
        if (((o.match.currentRound == 2) && !(o.match.inWarmup))) {
            l_step = 4;
        }
        if ((o.match.roundsCompleted == 2)) {
            l_step = 5;
        }
        c.push("\n");
        l_team1total = 0;
        l_team2total = 0;
        l_team1round1 = "-";
        l_team1round2 = "-";
        l_team2round1 = "-";
        l_team2round2 = "-";
        l_for_teammatch_matchstatus_27_6_list = o.match.teamScores;
        if ((S.Modifier.count(l_for_teammatch_matchstatus_27_6_list) > 0)) {
            for (var l_for_teammatch_matchstatus_27_6_key in l_for_teammatch_matchstatus_27_6_list) {
                if (!Surface.isValidLoopItem(l_for_teammatch_matchstatus_27_6_list[l_for_teammatch_matchstatus_27_6_key])) {
                    continue;
                }
                var l_score = l_for_teammatch_matchstatus_27_6_list[l_for_teammatch_matchstatus_27_6_key];
                if ((l_score.team == "1")) {
                    l_team1total = (l_team1total + l_score.score);
                    if ((l_score.round == "1")) {
                        l_team1round1 = l_score.score;
                    }
                    if ((l_score.round == "2")) {
                        l_team1round2 = l_score.score;
                    }
                }
                if ((l_score.team == "2")) {
                    l_team2total = (l_team2total + l_score.score);
                    if ((l_score.round == "1")) {
                        l_team2round1 = l_score.score;
                    }
                    if ((l_score.round == "2")) {
                        l_team2round2 = l_score.score;
                    }
                }
            }
        }
        c.push('\n <div id="teammatch-arrowcontainer">\n ');
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"rightStep": 1,"curStep": l_step}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrowwarmup")), {"curStep": l_step,"step": 1,"match": o.match,"title": "WARMUP"}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"leftStep": 1,"rightStep": 2,"curStep": l_step}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrowround")), {"curStep": l_step,"step": 2,"match": o.match,"title": "ROUND 1","team1score": l_team1round1,"team2score": l_team2round1}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"leftStep": 2,"rightStep": 3,"curStep": l_step}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrowwarmup")), {"curStep": l_step,"step": 3,"match": o.match,"title": "INTERMISSION"}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"leftStep": 3,"rightStep": 4,"curStep": l_step}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrowround")), {"curStep": l_step,"step": 4,"match": o.match,"title": "ROUND 2","team1score": l_team1round2,"team2score": l_team2round2}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"leftStep": 4,"curStep": l_step}, null, kwargs));
        c.push('\n <div style="float: left; width: 16px;">&nbsp;</div>\n ');
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"rightStep": 5,"curStep": l_step}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrowtotal")), {"team1score": l_team1total,"team2score": l_team2total}, null, kwargs));
        c.push("\n");
        c.push(Surface.importTemplate(("teammatch" + ("." + "arrow")), {"leftStep": 5,"curStep": l_step}, null, kwargs));
        c.push('\n <div class="base-clear"></div>\n </div>\n');
    }
    return c.join("");
};
var block_teammatch_show = new Surface.BlockConfig("teammatch.base", {"titleItem": "teammatch.show.block_titleItem","all": "teammatch.show.block_all"});
teammatch.addTemplate(new Surface.Template("show"));
teammatch.show.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.show");
    c.push("\n");
    c.push("\n");
    return Surface.importTemplate("teammatch.base", o, b, kwargs);
};
var block_teammatch_show_use_11_9 = new Surface.BlockConfig("teammatch.showheader", {"right": "teammatch.show._use_11_9_block_right"});
teammatch.show.block_titleItem = new Surface.Block("teammatch.show.block_titleItem");
teammatch.show.block_titleItem.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(Surface.valOut(((typeof (o) != "undefined" && o !== null && typeof (o.match) != "undefined" && o.match !== null && typeof (o.match.name) != "undefined" && o.match.name !== null) ? o.match.name : "Unknown match")));
    c.push(" - ");
    return c.join("");
};
teammatch.show._use_11_9_block_right = new Surface.Block("teammatch.show._use_11_9_block_right");
teammatch.show._use_11_9_block_right.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    if ((((typeof (o) != "undefined" && o !== null && typeof (o.isAdmin) != "undefined" && o.isAdmin !== null) ? o.isAdmin : false) && ((typeof (o) != "undefined" && o !== null && typeof (o.canDeleteGather) != "undefined" && o.canDeleteGather !== null) ? o.canDeleteGather : false))) {
        c.push(' <div onmouseover="$(this).find(\'input\').show();" onmouseout="$(this).find(\'input\').hide();" style="width: 500px; height: 30px;">\n <input style="display:none;" type="button" onclick="gather.ajaxpost(\'');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/teammatch/destroy/{id}/", Surface.urlContext, o.match)));
        c.push("');\" value='Kill match' />");
        if ((o.match.matchtype == "gather")) {
            c.push('<input style="display:none;" type="button" onclick="gather.ajaxpost(\'');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/destroyByMatch/{id}/", Surface.urlContext, o.match)));
            c.push('\');" value=\'Kill gather\' /><input style="display:none;" type="button" onclick="gather.ajaxpost(\'');
            c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/gather/endByMatch/{id}/", Surface.urlContext, o.match)));
            c.push("');\" value='End gather' />");
        }
        c.push("\n </div>\n");
    }
    c.push("\n");
    return c.join("");
};
teammatch.show.surface_24_9 = new Surface.SingleSurface("teammatch.show.surface_24_9");
teammatch.show.surface_24_9.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.show");
    c.push('<surf:container id="');
    c.push("match");
    c.push('">');
    var l_for_teammatch_show_44_17_iteration;
    var l_for_teammatch_show_44_17_list;
    var l_session;
    var l_for_teammatch_show_28_13_list;
    var l_isInMatch;
    var l_teams;
    l_session = S.Modifier.get(Surface.globalContext, "session");
    c.push("\n");
    l_isInMatch = false;
    l_for_teammatch_show_28_13_list = o.match.players;
    if ((S.Modifier.count(l_for_teammatch_show_28_13_list) > 0)) {
        for (var l_for_teammatch_show_28_13_key in l_for_teammatch_show_28_13_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_show_28_13_list[l_for_teammatch_show_28_13_key])) {
                continue;
            }
            var l_player = l_for_teammatch_show_28_13_list[l_for_teammatch_show_28_13_key];
            if ((l_player.userId == ((typeof (l_session) != "undefined" && l_session !== null && typeof (l_session.user) != "undefined" && l_session.user !== null && typeof (l_session.user.userId) != "undefined" && l_session.user.userId !== null) ? l_session.user.userId : -(1)))) {
                l_isInMatch = true;
            }
        }
    }
    c.push("\n");
    l_teams = ["1", "2"];
    if ((o.gamemode == "SQDM")) {
        l_teams = ["1", "2", "3", "4"];
    }
    c.push("\n");
    if ((l_isInMatch && !(o.match.matchOver))) {
        c.push(' <div style="clear:both;margin-top: -20px; text-align:center; width: 992px; margin-bottom: 20px;">\n <input type="button" class="base-button-arrow-large" onclick="teammatch.joinServer(\'');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/servers/show/{guid}/{slug}/", Surface.urlContext, {"guid": o.match.serverGuid})));
        c.push('\');" value="');
        c.push(Surface.valOut("Join server"));
        c.push('" />\n </div>\n');
    }
    c.push("\n");
    c.push(Surface.importTemplate(("teammatch" + ("." + "matchstatus")), {"gamemode": o.gamemode,"match": o.match}, null, kwargs));
    c.push('\n <div id="teammatch-show-teamfloats">\n');
    l_for_teammatch_show_44_17_list = l_teams;
    l_for_teammatch_show_44_17_iteration = 0;
    if ((S.Modifier.count(l_for_teammatch_show_44_17_list) > 0)) {
        for (var l_for_teammatch_show_44_17_key in l_for_teammatch_show_44_17_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_show_44_17_list[l_for_teammatch_show_44_17_key])) {
                continue;
            }
            var l_teamId = l_for_teammatch_show_44_17_list[l_for_teammatch_show_44_17_key];
            l_for_teammatch_show_44_17_iteration = (l_for_teammatch_show_44_17_iteration + 1);
            c.push(" ");
            c.push(Surface.importTemplate(("teammatch" + ("." + "showteam")), {"teamId": l_teamId,"gamemode": o.gamemode,"match": o.match,"n": S.Modifier.count(l_teams),"i": l_for_teammatch_show_44_17_iteration,"players": S.Modifier.filterlist(o.match.players, "team", l_teamId)}, null, kwargs));
            c.push("\n");
        }
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("teammatch.show", "surface_24_9", "match", o, b);
    return c.join("");
};
teammatch.show.surface_60_25 = new Surface.SingleSurface("teammatch.show.surface_60_25");
teammatch.show.surface_60_25.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_show;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.show");
    c.push('<surf:container id="');
    c.push("teammatch-personateams");
    c.push('">');
    if (!(o.personaTeams)) {
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("teammatch.show", "surface_60_25", "teammatch-personateams", o, b);
    return c.join("");
};
teammatch.show.block_all = new Surface.Block("teammatch.show.block_all");
teammatch.show.block_all.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_for_teammatch_show_64_25_iteration;
    var l_for_teammatch_show_64_25_list;
    var l_for_teammatch_show_6_9_list;
    var l_for_teammatch_show_57_25_list;
    o.gamemode = "CONQUEST";
    l_for_teammatch_show_6_9_list = o.maps;
    if ((S.Modifier.count(l_for_teammatch_show_6_9_list) > 0)) {
        for (var l_for_teammatch_show_6_9_key in l_for_teammatch_show_6_9_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_show_6_9_list[l_for_teammatch_show_6_9_key])) {
                continue;
            }
            var l_m = l_for_teammatch_show_6_9_list[l_for_teammatch_show_6_9_key];
            if ((S.Modifier.get(l_m, 1) == o.matchsettings.map)) {
                o.gamemode = S.Modifier.get(l_m, 0);
            }
        }
    }
    c.push(Surface.importTemplate(("teammatch" + ("." + "showheader")), {"map": o.matchsettings.map,"match": o.match,"game": o.match.game,"maps": o.maps,"name": o.match.name}, block_teammatch_show_use_11_9, kwargs));
    c.push(" <br><br>\n <div>\n");
    c.push(teammatch.show.surface_24_9.render({"gamemode": ((typeof (o) != "undefined" && o !== null && typeof (o.gamemode) != "undefined" && o.gamemode !== null) ? o.gamemode : null),"match": ((typeof (o) != "undefined" && o !== null && typeof (o.match) != "undefined" && o.match !== null) ? o.match : null),"session": {"user": {"userId": ((typeof (o) != "undefined" && o !== null && typeof (o.session) != "undefined" && o.session !== null && typeof (o.session.user) != "undefined" && o.session.user !== null && typeof (o.session.user.userId) != "undefined" && o.session.user.userId !== null) ? o.session.user.userId : null)}}}, b, kwargs));
    c.push(' </div>\n <div class="teammatch-show-events">\n <div class="teammatch-show-events-border">\n <div class="teammatch-show-events-header">Live updates</div>\n <div class="teammatch-show-events-list">\n');
    o.personaTeams = {};
    l_for_teammatch_show_57_25_list = o.match.players;
    if ((S.Modifier.count(l_for_teammatch_show_57_25_list) > 0)) {
        for (var l_for_teammatch_show_57_25_key in l_for_teammatch_show_57_25_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_show_57_25_list[l_for_teammatch_show_57_25_key])) {
                continue;
            }
            var l_p = l_for_teammatch_show_57_25_list[l_for_teammatch_show_57_25_key];
            o.personaTeams = S.Modifier.set(o.personaTeams, l_p.persona.personaName, l_p.team);
        }
    }
    c.push(teammatch.show.surface_60_25.render({"personaTeams": ((typeof (o) != "undefined" && o !== null && typeof (o.personaTeams) != "undefined" && o.personaTeams !== null) ? o.personaTeams : null)}, b, kwargs));
    c.push("\n");
    Surface.globalContext.teamNames = o.match.teamNames;
    c.push("\n");
    l_for_teammatch_show_64_25_list = S.Modifier.sort(o.matchevents, "eventTime", "desc");
    l_for_teammatch_show_64_25_iteration = 0;
    if ((S.Modifier.count(l_for_teammatch_show_64_25_list) > 0)) {
        for (var l_for_teammatch_show_64_25_key in l_for_teammatch_show_64_25_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_show_64_25_list[l_for_teammatch_show_64_25_key])) {
                continue;
            }
            var l_matchevent = l_for_teammatch_show_64_25_list[l_for_teammatch_show_64_25_key];
            l_for_teammatch_show_64_25_iteration = (l_for_teammatch_show_64_25_iteration + 1);
            c.push(" ");
            c.push(Surface.importTemplate(("teammatch" + ("." + "matchevent")), {"personaTeams": o.personaTeams,"topBorder": (l_for_teammatch_show_64_25_iteration > 1),"matchevent": l_matchevent}, null, kwargs));
            c.push("\n");
        }
    }
    c.push(' </div>\n </div>\n </div>\n <div style="clear:both;"></div>\n');
    return c.join("");
};
var block_teammatch_showheader = new Surface.BlockConfig("", {"left": "teammatch.showheader.block_left","right": "teammatch.showheader.block_right","middle": "teammatch.showheader.block_middle"});
teammatch.addTemplate(new Surface.Template("showheader"));
teammatch.showheader.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_showheader;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.showheader");
    var l_for_teammatch_showheader_5_2_list;
    c.push("\n");
    o.mapinfo = $S.callFunction("serverguide.mapinfo", o.game, o.map, b, kwargs);
    o.gamemode = "CONQUEST";
    l_for_teammatch_showheader_5_2_list = o.maps;
    if ((S.Modifier.count(l_for_teammatch_showheader_5_2_list) > 0)) {
        for (var l_for_teammatch_showheader_5_2_key in l_for_teammatch_showheader_5_2_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_showheader_5_2_list[l_for_teammatch_showheader_5_2_key])) {
                continue;
            }
            var l_m = l_for_teammatch_showheader_5_2_list[l_for_teammatch_showheader_5_2_key];
            if ((S.Modifier.get(l_m, 1) == o.map)) {
                o.gamemode = S.Modifier.get(l_m, 0);
            }
        }
    }
    c.push('<div class="teammatch-show-header">\n');
    c.push(b.get("left")(o, b, kwargs));
    c.push("\n");
    c.push(b.get("middle")(o, b, kwargs));
    c.push(b.get("right")(o, b, kwargs));
    c.push(' <div style="clear:both;"></div>\n</div>');
    return c.join("");
};
teammatch.showheader.block_left = new Surface.Block("teammatch.showheader.block_left");
teammatch.showheader.block_left.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="teammatch-show-header-map">\n <div class="teammatch-show-header-map-border">\n <img src="');
    c.push(Surface.valOut(S.Modifier.concat(S.Modifier.replace(o.mapinfo.imageSmall, "/public/", "http://battlelog-cdn.battlefield.com/public/"), "?v=7")));
    c.push('" />\n </div>\n </div>\n');
    return c.join("");
};
teammatch.showheader.block_middle = new Surface.Block("teammatch.showheader.block_middle");
teammatch.showheader.block_middle.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <div class="teammatch-show-header-info">\n <h1>');
    c.push(Surface.valOut(o.name));
    c.push("</h1>\n <div>Map: <strong>");
    c.push(Surface.valOut(o.mapinfo.name));
    c.push("</strong> ");
    c.push(Surface.importTemplate(("common" + ("." + "square")), o, null, kwargs));
    c.push(" Mode: <strong>");
    c.push(Surface.valOut($S.callFunction("common.gamemodeDescription", o.game, o.gamemode, b, kwargs)));
    c.push("</strong></div>\n </div>\n");
    return c.join("");
};
teammatch.showheader.block_right = new Surface.Block("teammatch.showheader.block_right");
teammatch.showheader.block_right.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
var block_teammatch_showteam = new Surface.BlockConfig("", {});
teammatch.addTemplate(new Surface.Template("showteam"));
teammatch.showteam.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_showteam;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.showteam");
    var l_teamScore;
    var l_for_teammatch_showteam_7_14_list;
    c.push('\n<div class="teammatch-show-team" id="teammatch-show-team-');
    c.push(Surface.valOut(o.i));
    c.push("of");
    c.push(Surface.valOut(o.n));
    c.push('">\n <div class="teammatch-show-team-topborder"></div>\n <div class="teammatch-show-team-score">\n');
    if ((o.gamemode == "SQDM")) {
        l_teamScore = 0;
        l_for_teammatch_showteam_7_14_list = o.match.teamScores;
        if ((S.Modifier.count(l_for_teammatch_showteam_7_14_list) > 0)) {
            for (var l_for_teammatch_showteam_7_14_key in l_for_teammatch_showteam_7_14_list) {
                if (!Surface.isValidLoopItem(l_for_teammatch_showteam_7_14_list[l_for_teammatch_showteam_7_14_key])) {
                    continue;
                }
                var l_score = l_for_teammatch_showteam_7_14_list[l_for_teammatch_showteam_7_14_key];
                if (((l_score.team == o.teamId) && (l_score.round == "1"))) {
                    l_teamScore = l_score.score;
                }
            }
        }
        c.push(" ");
        c.push(Surface.valOut(l_teamScore));
        c.push("\n");
    }
    c.push(' </div>\n <div class="teammatch-show-team-name">Team ');
    c.push(Surface.valOut(S.Modifier.get(o.match.teamNames, o.teamId, "-")));
    c.push('</div>\n <div class="teammatch-show-team-players-header">\n Soldier/Name<span>K&nbsp;/&nbsp;D</span>\n </div>\n <div class="teammatch-show-team-players">\n <div class="teammatch-show-team-players-border">\n');
    c.push(teammatch.showteam.surface_22_14.render({"match": ((typeof (o) != "undefined" && o !== null && typeof (o.match) != "undefined" && o.match !== null) ? o.match : null),"players": ((typeof (o) != "undefined" && o !== null && typeof (o.players) != "undefined" && o.players !== null) ? o.players : null),"teamId": ((typeof (o) != "undefined" && o !== null && typeof (o.teamId) != "undefined" && o.teamId !== null) ? o.teamId : null)}, b, kwargs));
    c.push(" </div>\n </div>\n</div>");
    return c.join("");
};
teammatch.showteam.surface_22_14 = new Surface.SurfaceList("teammatch.showteam.surface_22_14", "players", "p", "p.persona.personaName");
teammatch.showteam.surface_23_18 = new Surface.SingleSurface("teammatch.showteam.surface_23_18");
teammatch.showteam.surface_23_18.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_showteam;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.showteam");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat(S.Modifier.concat("teammatch-players-", o.teamId), S.Modifier.concat("_", o.p.persona.personaName)));
    c.push('">');
    c.push(' <div class="teammatch-show-team-player">\n ');
    c.push(Surface.importTemplate(("profile" + ("." + "gravatar")), {"user": o.p.user,"gravatarSize": 22}, null, kwargs));
    c.push('\n <div class="teammatch-show-team-player-name">\n ');
    c.push(Surface.valOut(o.p.persona.personaName));
    c.push("\n");
    if (!(o.p.isConnected)) {
        c.push(" (not connected)\n");
    } else {
        if (o.match.inWarmup) {
            if (o.p.isReady) {
                c.push(" (ready)\n");
            } else {
                c.push(" (not ready)\n");
            }
        } else {
            if (!(o.match.matchOver)) {
                c.push(" (playing)\n");
            }
        }
    }
    c.push('\n <br>\n <a href="');
    c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/user/{username}/", Surface.urlContext, {"username": o.p.user.username})));
    c.push('">');
    c.push(Surface.valOut(o.p.user.username));
    c.push('</a>\n </div>\n <div class="teammatch-show-team-player-score">\n <div class="teammatch-show-team-player-score-kills">');
    c.push(Surface.valOut(o.p.kills));
    c.push('</div>\n <div class="teammatch-show-team-player-score-slash">/</div>\n <div class="teammatch-show-team-player-score-deaths">');
    c.push(Surface.valOut(o.p.deaths));
    c.push("</div>\n </div>\n");
    if (o.for_teammatch_showteam_22_14_hasNext) {
        c.push(' <div class="teammatch-show-team-player-sep"></div>\n');
    }
    c.push(" </div>\n");
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("teammatch.showteam", "surface_23_18", S.Modifier.concat(S.Modifier.concat("teammatch-players-", o.teamId), S.Modifier.concat("_", o.p.persona.personaName)), o, b);
    return c.join("");
};
teammatch.showteam.surface_22_14.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_teammatch_showteam;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("teammatch");
    Surface.Renderer.addUsedTemplate("teammatch.showteam");
    c.push('<surf:container id="');
    c.push(S.Modifier.concat("teammatch-players-", o.teamId));
    c.push('">');
    var l_for_teammatch_showteam_22_14_list;
    var l_for_teammatch_showteam_22_14_count;
    var l_for_teammatch_showteam_22_14_hasNext;
    var l_for_teammatch_showteam_22_14_iteration;
    l_for_teammatch_showteam_22_14_list = S.Modifier.sort(o.players, "kills", "desc");
    l_for_teammatch_showteam_22_14_count = S.Modifier.count(l_for_teammatch_showteam_22_14_list);
    l_for_teammatch_showteam_22_14_iteration = 0;
    if ((S.Modifier.count(l_for_teammatch_showteam_22_14_list) > 0)) {
        for (var l_for_teammatch_showteam_22_14_key in l_for_teammatch_showteam_22_14_list) {
            if (!Surface.isValidLoopItem(l_for_teammatch_showteam_22_14_list[l_for_teammatch_showteam_22_14_key])) {
                continue;
            }
            var l_p = l_for_teammatch_showteam_22_14_list[l_for_teammatch_showteam_22_14_key];
            l_for_teammatch_showteam_22_14_iteration = (l_for_teammatch_showteam_22_14_iteration + 1);
            l_for_teammatch_showteam_22_14_hasNext = (l_for_teammatch_showteam_22_14_iteration < l_for_teammatch_showteam_22_14_count);
            c.push(teammatch.showteam.surface_23_18.render({"for_teammatch_showteam_22_14_hasNext": ((typeof (l_for_teammatch_showteam_22_14_hasNext) != "undefined" && l_for_teammatch_showteam_22_14_hasNext !== null) ? l_for_teammatch_showteam_22_14_hasNext : null),"match": ((typeof (o) != "undefined" && o !== null && typeof (o.match) != "undefined" && o.match !== null) ? o.match : null),"p": ((typeof (l_p) != "undefined" && l_p !== null) ? l_p : null),"teamId": ((typeof (o) != "undefined" && o !== null && typeof (o.teamId) != "undefined" && o.teamId !== null) ? o.teamId : null)}, b, kwargs));
        }
    } else {
        c.push(' <div class="teammatch-show-team-player">\n </div>\n');
    }
    c.push("</surf:container>");
    Surface.Renderer.addSurfaceState("teammatch.showteam", "surface_22_14", S.Modifier.concat("teammatch-players-", o.teamId), o, b);
    return c.join("");
};
if (typeof terms == "undefined") {
    var terms = {};
}
var surf_terms_component = new Surface.Component("terms");
surf_terms_component.extend(terms);
terms = surf_terms_component;
var block_terms_index = new Surface.BlockConfig("base.ajaxindex", {"mainContent": "terms.index.block_mainContent"});
terms.addTemplate(new Surface.Template("index"));
terms.index.render = function(o, b, kwargs) {
    var c = [];
    b = b || block_terms_index;
    kwargs = kwargs || {};
    Surface.Renderer.addUsedComponent("terms");
    Surface.Renderer.addUsedTemplate("terms.index");
    c.push("\n");
    return Surface.importTemplate("base.ajaxindex", o, b, kwargs);
};
var block_terms_index_use_55_6 = new Surface.BlockConfig("common.boxwideclean", {"content": "terms.index._use_55_6_block_content","extraClassInner": "terms.index._use_55_6_block_extraClassInner","title": "terms.index._use_55_6_block_title","shadow": "terms.index._use_55_6_block_shadow","titleType": "terms.index._use_55_6_block_titleType","titleContainer": "terms.index._use_55_6_block_titleContainer","extraClass": "terms.index._use_55_6_block_extraClass"});
terms.index._use_55_6_block_titleType = new Surface.Block("terms.index._use_55_6_block_titleType");
terms.index._use_55_6_block_titleType.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
terms.index._use_55_6_block_extraClass = new Surface.Block("terms.index._use_55_6_block_extraClass");
terms.index._use_55_6_block_extraClass.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push("tos");
    return c.join("");
};
terms.index._use_55_6_block_title = new Surface.Block("terms.index._use_55_6_block_title");
terms.index._use_55_6_block_title.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
terms.index._use_55_6_block_titleContainer = new Surface.Block("terms.index._use_55_6_block_titleContainer");
terms.index._use_55_6_block_titleContainer.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(b.get("title")(o, b, kwargs));
    return c.join("");
};
terms.index._use_55_6_block_extraClassInner = new Surface.Block("terms.index._use_55_6_block_extraClassInner");
terms.index._use_55_6_block_extraClassInner.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
terms.index._use_55_6_block_content = new Surface.Block("terms.index._use_55_6_block_content");
terms.index._use_55_6_block_content.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    var l_realm;
    l_realm = S.Modifier.get(Surface.globalContext, "realm");
    c.push(' <iframe src="http://tos.ea.com/legalapp/WEBTERMS/');
    c.push(Surface.valOut($S.callFunction("base.country", l_realm.lang, b, kwargs)));
    c.push("/");
    c.push(Surface.valOut($S.callFunction("base.language", l_realm.lang, b, kwargs)));
    c.push('/PC/" width="100%" height="340"></iframe>\n');
    return c.join("");
};
terms.index._use_55_6_block_shadow = new Surface.Block("terms.index._use_55_6_block_shadow");
terms.index._use_55_6_block_shadow.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    return c.join("");
};
terms.index.block_mainContent = new Surface.Block("terms.index.block_mainContent");
terms.index.block_mainContent.render = function(o, b, kwargs) {
    var c = [];
    kwargs = kwargs || {};
    c.push(' <style>\n #terms h1 {\n width: 100%;\n font-size: 35px;\n text-align: center;\n font-family: "BebasNeueRegular", Arial, sans-serif;\n color: #000;\n padding: 16px 0;\n font-weight: normal;\n padding-bottom: 10px;\n }\n #terms h2 {\n width: 100%;\n font-size: 14px;\n text-align: center;\n font-family: Arial, sans-serif;\n color: #353535;\n padding-bottom: 16px;\n font-weight: normal;\n }\n #terms .tos .common-box-inner {\n height: 350px;\n overflow: auto;\n padding: 16px;\n font-size: 12px;\n font-family: Arial, sans-serif;\n line-height: 1.5;\n color: #353535;\n }\n .terms-proceed {\n width: 195px;\n margin: 0 auto;\n text-align: center;\n }\n .terms-proceed .terms-do-not-accept {\n padding-bottom: 20px;\n }\n .terms-proceed .terms-do-not-accept a {\n font-weight: normal;\n }\n #terms-text p {\n margin-bottom: 12px;\n }\n </style>\n <div id="main-login-upper" class="base-upper"></div>\n <div class="base-middle" id="terms">\n <div class="base-middle-content">\n <h1>');
    c.push(Surface.valOut("ELECTRONIC ARTS TERMS OF SERVICE"));
    c.push("</h1>\n");
    if (((typeof (o) != "undefined" && o !== null && typeof (o.choice) != "undefined" && o.choice !== null) ? o.choice : true)) {
        c.push(" <h2>");
        c.push(Surface.valOut("You need to accept the Terms of Service to continue"));
        c.push("</h2>\n");
    }
    c.push(Surface.importTemplate(("common" + ("." + "boxwideclean")), o, block_terms_index_use_55_6, kwargs));
    c.push(' <div style="clear:both"></div>\n');
    if (((typeof (o) != "undefined" && o !== null && typeof (o.choice) != "undefined" && o.choice !== null) ? o.choice : true)) {
        c.push(' <div class="terms-proceed">\n <form action="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/terms/accept/", Surface.urlContext)));
        c.push('" method="post">\n ');
        c.push(Surface.importTemplate(("base" + ("." + "postChecksum")), o, null, kwargs));
        c.push('\n <input type="submit" class="base-button-arrow-large" style="margin: 20px 0 16px 0"\n value="');
        c.push(Surface.valOut("Accept & Continue"));
        c.push('"/>\n </form>\n <div class="terms-do-not-accept"><a href="');
        c.push(Surface.valOut(S.Modifier.urlformat("/{_section}/{_language}/session/logout/{redirect}/", Surface.urlContext)));
        c.push('">');
        c.push(Surface.valOut("I do not accept the Terms of Service"));
        c.push("</a></div>\n </div>\n");
    }
    c.push(' </div>\n </div>\n <script type="text/javascript">\n // Really ugly code which won\'t be needed once we get the TOS from correct source and strip anchors automagically\n $("#terms a").click(function(e) {\n e.preventDefault();\n var section = $(this).attr("href");\n section = section.split("#");\n var anchor = $("a[name=" + section[1] + "]");\n var position = anchor.position();\n var box = $("#terms").find(".common-box-inner");\n box.scrollTop(position.top);\n });\n <\/script>\n');
    return c.join("");
};
if (typeof viewcontent == "undefined") {
    var viewcontent = {};
}
var surf_viewcontent_component = new Surface.Component("viewcontent");
surf_viewcontent_component.extend(viewcontent);
viewcontent = surf_viewcontent_component;
var block_viewcontent_blogitem = new Surface.BlockConfig("base.index", {"mainContent": "viewcontent.blogitem.block_mainContent"});
viewcontent.addTemplate(new Surface.Template("blogitem"));
var block_viewcontent_feeditem = new Surface.BlockConfig("base.index", {"mainContent": "viewcontent.feeditem.block_mainContent"});
viewcontent.addTemplate(new Surface.Template("feeditem"));
var block_viewcontent_forumpost = new Surface.BlockConfig("base.index", {"mainContent": "viewcontent.forumpost.block_mainContent"});
viewcontent.addTemplate(new Surface.Template("forumpost"));
var block_viewcontent_index = new Surface.BlockConfig("base.index", {"main": "viewcontent.index.block_main"});
viewcontent.addTemplate(new Surface.Template("index"));
var block_viewcontent_platoon = new Surface.BlockConfig("base.index", {"mainContent": "viewcontent.platoon.block_mainContent"});
viewcontent.addTemplate(new Surface.Template("platoon"));
var block_viewcontent_presentation = new Surface.BlockConfig("base.index", {"mainContent": "viewcontent.presentation.block_mainContent"});
viewcontent.addTemplate(new Surface.Template("presentation"));
document.iframeReady = 0;
(function($) {
    var locationWrapper = {put: function(hash, win) {
            (win || window).location.hash = hash;
        },get: function(win) {
            return ((win || window).location.hash).replace(/^#/, "");
        }};
    var iframeWrapper = {id: "__jQuery_history",init: function() {
            var html = '<iframe id="' + this.id + '" style="display:none;" src="/iframe.html" />';
            $("body").prepend(html);
            return this;
        },_document: function() {
            return $("#" + this.id)[0].contentWindow.document;
        },put: function(hash) {
            var doc = this._document();
            doc.open();
            doc.write('<html><head><script>var hostparts = window.location.host.split(".");for (var i = hostparts.length-1; i >= 0; i--){domain = window.location.host.split(".");domain.splice(0, i);domain = domain.join(".");try{document.domain = domain;break;}catch (err){}};document.domain = document.domain; parent.document.iframeReady = 1;<\/script></head><body>tjosan' + (new Date()) + "</body></html>");
            doc.close();
            locationWrapper.put(hash, doc);
        },get: function() {
            return locationWrapper.get(this._document());
        }};
    var implementations = {};
    implementations.base = {callback: undefined,type: undefined,check: function() {
        },load: function(hash) {
        },init: function(callback) {
            self.callback = callback;
            self._init();
        },_init: function() {
        }};
    implementations.timer = {_appState: undefined,_init: function() {
            var current_hash = locationWrapper.get();
            self._appState = current_hash;
            self.callback(current_hash);
            setInterval(self.check, 100);
        },check: function() {
            var current_hash = locationWrapper.get();
            if (current_hash != self._appState) {
                self._appState = current_hash;
                self.callback(current_hash);
            }
        },load: function(hash) {
            if (hash != self._appState) {
                locationWrapper.put(hash);
                self._appState = hash;
                self.callback(hash);
            }
        }};
    implementations.iframeTimer = {_appState: undefined,_init: function() {
            var x = iframeWrapper.init();
            var doit = function() {
                if (document.iframeReady) {
                    var current_hash = locationWrapper.get();
                    self._appState = current_hash;
                    x.put(current_hash);
                    self.callback(current_hash);
                    setInterval(self.check, 100);
                } else {
                    setTimeout(doit, 100);
                }
            };
            doit();
        },check: function() {
            var iframe_hash = iframeWrapper.get(), location_hash = locationWrapper.get();
            if (location_hash != iframe_hash) {
                if (location_hash == self._appState) {
                    self._appState = iframe_hash;
                    locationWrapper.put(iframe_hash);
                    self.callback(iframe_hash);
                } else {
                    self._appState = location_hash;
                    iframeWrapper.put(location_hash);
                    self.callback(location_hash);
                }
            }
        },load: function(hash) {
            if (hash != self._appState) {
                locationWrapper.put(hash);
                iframeWrapper.put(hash);
                self._appState = hash;
                self.callback(hash);
            }
        }};
    implementations.hashchangeEvent = {_init: function() {
            self.callback(locationWrapper.get());
            $(window).bind("hashchange", self.check);
        },check: function() {
            self.callback(locationWrapper.get());
        },load: function(hash) {
            locationWrapper.put(hash);
        }};
    implementations.html5history = {_init: function() {
            self.callback(locationWrapper.get());
            $(window).bind("popstate", function() {
            });
        },check: function() {
            self.callback(locationWrapper.get());
        },load: function(hash) {
            locationWrapper.put(hash);
        }};
    var self = $.extend({}, implementations.base);
    if ($.browser.msie && ($.browser.version < 8 || document.documentMode < 8)) {
        self.type = "iframeTimer";
    } else {
        if ("onhashchange" in window) {
            self.type = "hashchangeEvent";
        } else {
            self.type = "timer";
        }
    }
    $.extend(self, implementations[self.type]);
    $.history = self;
})(Surface.jQuery);
Surface.ajaxNavigation = {prefix: "",html5history: history && history.pushState,beforeCallback: function() {
    },afterCallback: function() {
    },errorCallback: function() {
    },newPageLoad: true,initiatedComponent: {},errorReportingEnabled: true,getRelative: function(url) {
        if (url.substring(0, 1) == "/") {
            return url;
        }
        if (url.substring(0, 4) == "http") {
            var regexp = new RegExp("(?:http|https)://(?:.+?)(/.*)", "im");
            return url.match(regexp)[1];
        }
        return url;
    },requiresFullRedirect: function(newUrl) {
        if (!newUrl.substring(0, 1) == "/") {
            return true;
        }
        if (newUrl == "/bfbc2/gate/") {
            return true;
        }
        if (newUrl == "/bf3/gate/") {
            return true;
        }
        var oldUrl = Surface.ajaxNavigation.getRelative(document.location.href);
        if (newUrl.split("/")[1] != oldUrl.split("/")[1]) {
            return true;
        }
        return false;
    },navigateTo: function(url, data) {
        if (Surface.ajaxNavigation.requiresFullRedirect(url)) {
            return true;
        }
        if (data) {
            Surface.ajaxNavigation.loadContent(url, data);
        } else {
            if (Surface.ajaxNavigation.html5history) {
                history.pushState({ajax: url}, "", url);
                Surface.ajaxNavigation.loadContent(url);
            } else {
                Surface.ajaxNavigation.lastLoadedUrl = url;
                Surface.ajaxNavigation.setCurrentUrl(url);
                Surface.ajaxNavigation.loadContent(url);
            }
        }
        return false;
    },setCurrentUrl: function(url) {
        url = url.replace("?", "%3F");
        location.hash = "#!" + url;
    },getCurrentUrl: function() {
        var s = location.hash;
        if (s.indexOf("#!") == -1) {
            return Surface.ajaxNavigation.getRelative(document.location.href);
        }
        s = s.replace("#!", "");
        return s;
    },sequenceId: 0,currentXhr: null,loadContent: function(url, data) {
        if (!url && !Surface.ajaxNavigation.newPageLoad) {
            url = window.location.href.replace(/.+:\/\/[^\/]*/g, "");
        }
        if (url) {
            url = url.replace("#", "");
            Surface.ajaxNavigation.sequenceId++;
            var requestSequenceId = Surface.ajaxNavigation.sequenceId;
            if (Surface.ajaxNavigation.currentXhr) {
                try {
                    Surface.ajaxNavigation.currentXhr.abort();
                } catch (e) {
                }
            }
            Surface.ajaxNavigation.newPageLoad = false;
            var excludeList = ["navigation"];
            $.each(Surface.Renderer.state.surface, function(surfId, value) {
                if ($("#content #" + surfId).length == 0) {
                    excludeList.push(surfId);
                }
            });
            url = url.replace(new RegExp("^" + Surface.ajaxNavigation.prefix), "");
            Surface.ajaxNavigation.beforeCallback(url);
            Surface.ajaxNavigation.currentXhr = Surface.$.ajax({url: url,data: (data || null),type: (data ? "POST" : "GET"),async: true,beforeSend: function(xmlHttpRequest, settings) {
                    xmlHttpRequest.setRequestHeader("X-AjaxNavigation", "1");
                    return true;
                },complete: function(xmlHttpRequest, textStatus) {
                    if (Surface.ajaxNavigation.sequenceId != requestSequenceId) {
                        return;
                    }
                    var status = xmlHttpRequest.status;
                    var data = xmlHttpRequest.responseText;
                    var response = null;
                    if (status == 200 || status == 404) {
                        var json = null;
                        if (data.substr(0, 1) == "{" && data.substr(data.length - 1) == "}") {
                            try {
                                json = S.parseJSON(data);
                            } catch (e) {
                            }
                        }
                        if (json === null) {
                            Surface.Renderer.clearSurfaceStates(excludeList);
                            Surface.ajaxNavigation.afterCallback(url, data);
                        } else {
                            if (json.template) {
                                var session = Surface.globalContext.session;
                                Surface.globalContext = json.globalContext;
                                if (Surface.globalContext.session == null) {
                                    Surface.globalContext.session = session;
                                }
                                Surface.globalContext.staticContext = base.staticContext;
                                Surface.globalContext.userContext = base.userContext;
                                Surface.Renderer.state.usedComponents = [];
                                if (json.context.bf3GadgetsLocale === "") {
                                    json.context.bf3GadgetsLocale = gadgetsLocale;
                                }
                                var html;
                                try {
                                    var html = $S(json.template).render(json.context);
                                } catch (e) {
                                    S.error("Failed rendering " + json.template + ": " + e);
                                    try {
                                        if (Surface.ajaxNavigation.errorReportingEnabled) {
                                            Surface.ajaxNavigation.errorReportingEnabled = false;
                                            var postData = {"msg": "" + e,"data": Surface.encodeJSON(json)};
                                            $.ajax({url: "/bf3/errorlogging/template",type: "POST",data: postData});
                                            setTimeout(60000, function() {
                                                Surface.ajaxNavigation.errorReportingEnabled = true;
                                            });
                                        }
                                    } catch (e) {
                                    }
                                    html = $S("main.errorfivehundred").render();
                                }
                                Surface.ajaxNavigation.afterCallback(url, html);
                                Surface.Renderer.invokeUsedComponents(Surface.Renderer.state.usedComponents);
                            }
                            if (json.location) {
                                if (json.partial && !Surface.ajaxNavigation.requiresFullRedirect(json.location)) {
                                    Surface.ajaxNavigation.navigateTo(json.location);
                                } else {
                                    document.location.href = json.location;
                                }
                            }
                        }
                    } else {
                        var html = $S("main.errorfivehundred").render();
                        Surface.ajaxNavigation.afterCallback(url, html);
                    }
                }});
        }
    },onHashChange: function(url) {
        url = url.replace("%3F", "?");
        if (url.substring(0, 1) == "!" && url.substring(1) != Surface.ajaxNavigation.lastLoadedUrl) {
            Surface.ajaxNavigation.loadContent(url);
        }
    },lastLoadedUrl: "",setup: function(beforeCallback, afterCallback, errorCallback, prefix) {
        Surface.ajaxNavigation.beforeCallback = beforeCallback;
        Surface.ajaxNavigation.afterCallback = afterCallback;
        Surface.ajaxNavigation.errorCallback = errorCallback;
        Surface.ajaxNavigation.prefix = prefix;
        Surface.Renderer.warnDuplicateSurfaces = function() {
            return;
        };
        Surface.$(document).ready(function() {
            if (Surface.ajaxNavigation.html5history) {
                $(window).bind("popstate", function(ev) {
                    if (ev.originalEvent.state) {
                        Surface.ajaxNavigation.loadContent(location.pathname);
                    }
                });
                var url = Surface.ajaxNavigation.getRelative(document.location.href);
                history.pushState({ajax: url}, "", url);
            }
            Surface.$.history.init(Surface.ajaxNavigation.onHashChange);
            Surface.$("body").delegate(".base-ajax-submit", "click", function(e) {
                $(this).parents("form:first").data("ajaxSubmitButton", $(this));
            });
            Surface.$("body").delegate("form", "submit", function(e) {
                var form = $(this);
                var submitButton = form.data("ajaxSubmitButton");
                if (submitButton) {
                    $("<input />").attr("type", "hidden").attr("name", submitButton.attr("name")).attr("value", submitButton.val()).appendTo(form);
                }
                if (form.attr("method").toUpperCase() == "GET" && !form.hasClass("base-no-ajax")) {
                    return Surface.ajaxNavigation.navigateTo(form.attr("action") + (form.attr("action").indexOf("?") == -1 ? "?" : "") + form.serialize());
                }
                if (form.attr("method").toUpperCase() == "POST" && form.hasClass("base-do-ajax")) {
                    return Surface.ajaxNavigation.navigateTo(form.attr("action"), form.serializeArray());
                }
                return true;
            });
            Surface.$("a").live("click", function(e) {
                if (e.which == 2 || e.metaKey || e.ctrlKey) {
                    return true;
                }
                var link = $(this);
                if (!link.hasClass("base-no-ajax") && link.attr("href")) {
                    var href = link.attr("href");
                    var strippedhref = href.replace(/http[s]*:\/\/.+?\//im, "");
                    if (strippedhref != href) {
                        href = "/" + strippedhref;
                    }
                    return Surface.ajaxNavigation.navigateTo(href);
                }
                return true;
            });
        });
    }};
